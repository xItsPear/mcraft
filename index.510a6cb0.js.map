{"version":3,"file":"static/js/index.510a6cb0.js","sources":["webpack://minecraft-web-client/./generated/large-data-aliases.ts","webpack://minecraft-web-client/./renderer/playground/allEntitiesDebug.ts","webpack://minecraft-web-client/./renderer/playground/shared.ts","webpack://minecraft-web-client/./renderer/viewer/common/utils.ts","webpack://minecraft-web-client/./renderer/viewer/lib/DebugGui.ts","webpack://minecraft-web-client/./renderer/viewer/lib/basePlayerState.ts","webpack://minecraft-web-client/./renderer/viewer/lib/mesher/modelsGeometryCommon.ts","webpack://minecraft-web-client/./renderer/viewer/lib/mesher/standaloneRenderer.ts","webpack://minecraft-web-client/./renderer/viewer/lib/simpleUtils.ts","webpack://minecraft-web-client/./renderer/viewer/lib/ui/newStats.ts","webpack://minecraft-web-client/./renderer/viewer/lib/utils.ts","webpack://minecraft-web-client/./renderer/viewer/lib/utils/skins.ts","webpack://minecraft-web-client/./renderer/buildMesherConfig.mjs","webpack://minecraft-web-client/./renderer/viewer/lib/cleanupDecorator.ts","webpack://minecraft-web-client/./renderer/viewer/lib/worldrendererCommon.ts","webpack://minecraft-web-client/./renderer/viewer/lib/mesher/shared.ts","webpack://minecraft-web-client/./renderer/viewer/sign-renderer/index.ts","webpack://minecraft-web-client/./renderer/viewer/three/itemMesh.ts","webpack://minecraft-web-client/./renderer/viewer/three/entities.ts","webpack://minecraft-web-client/./renderer/viewer/three/entity/EntityMesh.ts","webpack://minecraft-web-client/./renderer/viewer/three/entity/animations.js","webpack://minecraft-web-client/./renderer/viewer/three/entity/armorModels.ts","webpack://minecraft-web-client/./renderer/viewer/three/hand.ts","webpack://minecraft-web-client/./renderer/viewer/lib/animationController.ts","webpack://minecraft-web-client/./renderer/viewer/lib/smoothSwitcher.ts","webpack://minecraft-web-client/./renderer/viewer/lib/utils/proxy.ts","webpack://minecraft-web-client/./renderer/viewer/three/holdingBlock.ts","webpack://minecraft-web-client/./renderer/viewer/three/renderSlot.ts","webpack://minecraft-web-client/./renderer/viewer/three/threeJsMethods.ts","webpack://minecraft-web-client/./renderer/viewer/three/threeJsUtils.ts","webpack://minecraft-web-client/./renderer/viewer/three/worldGeometryExport.ts","webpack://minecraft-web-client/./renderer/viewer/three/bannerRenderer.ts","webpack://minecraft-web-client/./renderer/viewer/three/world/cursorBlock.ts","webpack://minecraft-web-client/./renderer/viewer/three/appShared.ts","webpack://minecraft-web-client/./renderer/viewer/three/threeJsSound.ts","webpack://minecraft-web-client/./renderer/viewer/three/cameraShake.ts","webpack://minecraft-web-client/./renderer/viewer/three/threeJsMedia.ts","webpack://minecraft-web-client/./renderer/viewer/three/waypointSprite.ts","webpack://minecraft-web-client/./renderer/viewer/three/waypoints.ts","webpack://minecraft-web-client/./renderer/viewer/three/skyboxRenderer.ts","webpack://minecraft-web-client/./renderer/viewer/three/fireworks.ts","webpack://minecraft-web-client/./renderer/viewer/three/worldrendererThree.ts","webpack://minecraft-web-client/./src/appParams.ts","webpack://minecraft-web-client/./src/appStatus.ts","webpack://minecraft-web-client/./renderer/viewer/three/documentRenderer.ts","webpack://minecraft-web-client/./renderer/viewer/lib/worldDataEmitter.ts","webpack://minecraft-web-client/./renderer/viewer/baseGraphicsBackend.ts","webpack://minecraft-web-client/./renderer/viewer/three/panorama.ts","webpack://minecraft-web-client/./renderer/viewer/three/panoramaShared.ts","webpack://minecraft-web-client/./renderer/viewer/three/world/vr.ts","webpack://minecraft-web-client/./renderer/viewer/three/graphicsBackend.ts","webpack://minecraft-web-client/./renderer/viewer/lib/guiRenderer.ts","webpack://minecraft-web-client/./src/resourcesManager.ts","webpack://minecraft-web-client/./src/watchOptions.ts","webpack://minecraft-web-client/./src/appViewer.ts","webpack://minecraft-web-client/./src/appViewerLoad.ts","webpack://minecraft-web-client/./src/basicSounds.ts","webpack://minecraft-web-client/./src/botUtils.ts","webpack://minecraft-web-client/./src/browserfs.ts","webpack://minecraft-web-client/./src/chatUtils.ts","webpack://minecraft-web-client/./src/connect.ts","webpack://minecraft-web-client/./src/core/ideChannels.ts","webpack://minecraft-web-client/./src/core/progressReporter.ts","webpack://minecraft-web-client/./src/customChannels.ts","webpack://minecraft-web-client/./src/customClient.js","webpack://minecraft-web-client/./src/customServer.ts","webpack://minecraft-web-client/./src/defaultLocalServerOptions.js","webpack://minecraft-web-client/./src/defaultOptions.ts","webpack://minecraft-web-client/./src/flyingSquidUtils.ts","webpack://minecraft-web-client/./src/generated/resources.ts","webpack://minecraft-web-client/./src/getCollisionShapes.ts","webpack://minecraft-web-client/./src/globalState.ts","webpack://minecraft-web-client/./src/importsWorkaround.js","webpack://minecraft-web-client/./src/globals.js","webpack://minecraft-web-client/./src/entities.ts","webpack://minecraft-web-client/./src/cameraRotationControls.ts","webpack://minecraft-web-client/./src/app/gamepadCursor.ts","webpack://minecraft-web-client/./src/localServerMultiplayer.ts","webpack://minecraft-web-client/./src/react/KeybindingsScreen.tsx","webpack://minecraft-web-client/./src/reactUi.tsx","webpack://minecraft-web-client/./src/index.ts","webpack://minecraft-web-client/./src/testCrasher.ts","webpack://minecraft-web-client/./src/devtools.ts","webpack://minecraft-web-client/./src/mineflayer/entityStatus.ts","webpack://minecraft-web-client/./src/globalDomListeners.ts","webpack://minecraft-web-client/./src/mineflayer/maps.ts","webpack://minecraft-web-client/./src/mineflayer/cameraShake.ts","webpack://minecraft-web-client/./src/shims/patchShims.ts","webpack://minecraft-web-client/./src/mineflayer/java-tester/commands.ts","webpack://minecraft-web-client/./src/mineflayer/java-tester/index.ts","webpack://minecraft-web-client/./src/react/Slider.tsx","webpack://minecraft-web-client/./src/react/slider.module.css?bc01","webpack://minecraft-web-client/./src/react/AllSettingsEditor.tsx","webpack://minecraft-web-client/./src/react/OptionsItems.tsx","webpack://minecraft-web-client/./src/clientMods.ts","webpack://minecraft-web-client/./src/core/importExport.ts","webpack://minecraft-web-client/./src/optionsGuiScheme.tsx","webpack://minecraft-web-client/./src/customCommands.ts","webpack://minecraft-web-client/./src/react/FullScreenWidget.tsx","webpack://minecraft-web-client/./src/react/ModuleSignsViewer.tsx","webpack://minecraft-web-client/./src/react/widgets.ts","webpack://minecraft-web-client/./src/react/uiMotion.ts","webpack://minecraft-web-client/./src/react/PlayerListOverlay.tsx","webpack://minecraft-web-client/./src/react/PlayerListOverlayProvider.tsx","webpack://minecraft-web-client/./src/controls.ts","webpack://minecraft-web-client/./src/appConfig.ts","webpack://minecraft-web-client/./src/core/timers.ts","webpack://minecraft-web-client/./src/mineflayer/timers.ts","webpack://minecraft-web-client/./src/mineflayer/plugins/mouse.ts","webpack://minecraft-web-client/./src/mineflayer/plugins/packetsPatcher.ts","webpack://minecraft-web-client/./src/mineflayer/plugins/ping.ts","webpack://minecraft-web-client/./src/mineflayer/plugins/webFeatures.ts","webpack://minecraft-web-client/./src/mineflayer/plugins/index.ts","webpack://minecraft-web-client/./src/app/progressControllers.ts","webpack://minecraft-web-client/./src/react/GamepadUiCursor.module.css?f191","webpack://minecraft-web-client/./src/react/GamepadUiCursor.tsx","webpack://minecraft-web-client/./src/parseServerAddress.ts","webpack://minecraft-web-client/./src/react/singleplayer.module.css?35f9","webpack://minecraft-web-client/./src/react/Tabs.tsx","webpack://minecraft-web-client/./src/react/simpleHooks.ts","webpack://minecraft-web-client/./src/react/Singleplayer.tsx","webpack://minecraft-web-client/./src/react/select.module.css?a43c","webpack://minecraft-web-client/./src/react/Select.tsx","webpack://minecraft-web-client/./src/react/ServersList.tsx","webpack://minecraft-web-client/./src/mineflayer/minecraft-protocol-extra.ts","webpack://minecraft-web-client/./src/mineflayer/websocket-core.ts","webpack://minecraft-web-client/./src/mineflayer/mc-protocol.ts","webpack://minecraft-web-client/./src/getCollisionInteractionShapes.ts","webpack://minecraft-web-client/./src/react/DeathScreen.tsx","webpack://minecraft-web-client/./src/react/DeathScreenProvider.tsx","webpack://minecraft-web-client/./src/react/OptionsGroup.tsx","webpack://minecraft-web-client/./src/react/OptionsRenderApp.tsx","webpack://minecraft-web-client/./src/utils/splashText.ts","webpack://minecraft-web-client/./src/react/mainMenu.module.css?7103","webpack://minecraft-web-client/./src/react/ButtonWithTooltip.tsx","webpack://minecraft-web-client/./src/react/DiscordButton.tsx","webpack://minecraft-web-client/./src/react/PauseScreen.module.css?2fba","webpack://minecraft-web-client/./src/react/PauseLinkButtons.tsx","webpack://minecraft-web-client/./src/react/CreditsBookButton.tsx","webpack://minecraft-web-client/./src/react/CreditsBookButton.module.css?ec59","webpack://minecraft-web-client/./src/react/MainMenu.tsx","webpack://minecraft-web-client/./src/react/MainMenuRenderApp.tsx","webpack://minecraft-web-client/./src/builtinCommands.ts","webpack://minecraft-web-client/./src/googledrive.ts","webpack://minecraft-web-client/./src/react/GoogleButton.tsx","webpack://minecraft-web-client/./src/react/SingleplayerProvider.tsx","webpack://minecraft-web-client/./src/react/SelectGameVersion.tsx","webpack://minecraft-web-client/./src/react/CreateWorld.tsx","webpack://minecraft-web-client/./src/react/createWorld.module.css?245e","webpack://minecraft-web-client/./src/react/CreateWorldProvider.tsx","webpack://minecraft-web-client/./src/react/EnterFullscreenButton.tsx","webpack://minecraft-web-client/./src/react/MineflayerPluginHud.tsx","webpack://minecraft-web-client/./src/react/MineflayerPluginConsole.tsx","webpack://minecraft-web-client/./src/viewerConnector.ts","webpack://minecraft-web-client/./src/react/ChatProvider.tsx","webpack://minecraft-web-client/./src/react/Title.tsx","webpack://minecraft-web-client/./src/react/TitleProvider.tsx","webpack://minecraft-web-client/./src/react/Scoreboard.tsx","webpack://minecraft-web-client/./src/react/ScoreboardProvider.tsx","webpack://minecraft-web-client/./src/markdownToFormattedText.ts","webpack://minecraft-web-client/./src/react/SignEditor.tsx","webpack://minecraft-web-client/./src/react/SignEditorProvider.tsx","webpack://minecraft-web-client/./src/react/IndicatorEffects.tsx","webpack://minecraft-web-client/./src/react/effectsImages.ts","webpack://minecraft-web-client/./src/react/IndicatorEffectsProvider.tsx","webpack://minecraft-web-client/./renderer/viewer/lib/mesher/worldConstants.ts","webpack://minecraft-web-client/./src/react/Fullmap.tsx","webpack://minecraft-web-client/./src/react/Minimap.tsx","webpack://minecraft-web-client/./src/react/MinimapDrawer.ts","webpack://minecraft-web-client/./src/react/MinimapProvider.tsx","webpack://minecraft-web-client/./src/react/armorValues.ts","webpack://minecraft-web-client/./src/react/BarsCommon.tsx","webpack://minecraft-web-client/./src/react/HealthBar.tsx","webpack://minecraft-web-client/./src/react/FoodBar.tsx","webpack://minecraft-web-client/./src/react/ArmorBar.tsx","webpack://minecraft-web-client/./src/react/BreathBar.tsx","webpack://minecraft-web-client/./src/react/HudBarsProvider.tsx","webpack://minecraft-web-client/./src/react/XPBar.tsx","webpack://minecraft-web-client/./src/react/XPBar.module.css?5a59","webpack://minecraft-web-client/./src/react/XPBarProvider.tsx","webpack://minecraft-web-client/./src/downloadAndOpenFile.ts","webpack://minecraft-web-client/./src/react/DebugOverlay.module.css?dc9d","webpack://minecraft-web-client/./src/react/DebugOverlay.tsx","webpack://minecraft-web-client/./src/react/MobileTopButtons.module.css?8fcb","webpack://minecraft-web-client/./src/react/MobileTopButtons.tsx","webpack://minecraft-web-client/./src/react/NetworkStatus.module.css?e925","webpack://minecraft-web-client/./src/react/NetworkStatus.tsx","webpack://minecraft-web-client/./src/react/PauseScreen.tsx","webpack://minecraft-web-client/./src/react/SoundMuffler.tsx","webpack://minecraft-web-client/./src/react/TouchControls.tsx","webpack://minecraft-web-client/./src/react/GlobalSearchInput.tsx","webpack://minecraft-web-client/./src/react/TouchAreasControls.tsx","webpack://minecraft-web-client/./src/react/TouchAreasControlsProvider.tsx","webpack://minecraft-web-client/./src/gameUnload.ts","webpack://minecraft-web-client/./src/react/HotbarRenderApp.tsx","webpack://minecraft-web-client/./src/react/Crosshair.tsx","webpack://minecraft-web-client/./src/react/ButtonAppProvider.tsx","webpack://minecraft-web-client/./src/api/mcStatusApi.ts","webpack://minecraft-web-client/./src/react/UIProvider.tsx","webpack://minecraft-web-client/./src/react/AddServerOrConnect.tsx","webpack://minecraft-web-client/./src/react/ServersListProvider.tsx","webpack://minecraft-web-client/./src/react/KeybindingsScreen.module.css?3c93","webpack://minecraft-web-client/./src/react/KeybindingsCustom.tsx","webpack://minecraft-web-client/./src/react/parseKeybindingName.ts","webpack://minecraft-web-client/./src/react/Keybinding.tsx","webpack://minecraft-web-client/./src/react/KeybindingsScreenProvider.tsx","webpack://minecraft-web-client/./src/react/HeldMapUi.tsx","webpack://minecraft-web-client/./src/react/BedTime.tsx","webpack://minecraft-web-client/./src/react/NoModalFoundProvider.tsx","webpack://minecraft-web-client/./src/react/SignInMessage.tsx","webpack://minecraft-web-client/./src/react/SignInMessageProvider.tsx","webpack://minecraft-web-client/./src/react/Book.module.css?17c6","webpack://minecraft-web-client/./src/react/Book.tsx","webpack://minecraft-web-client/./src/react/BookProvider.tsx","webpack://minecraft-web-client/./src/react/BossBarOverlay.tsx","webpack://minecraft-web-client/./src/react/BossBarOverlayProvider.tsx","webpack://minecraft-web-client/./src/react/mods.module.css?6939","webpack://minecraft-web-client/./src/react/ModsPage.tsx","webpack://minecraft-web-client/./src/react/DebugEdges.tsx","webpack://minecraft-web-client/./src/react/GameInteractionOverlay.tsx","webpack://minecraft-web-client/./src/react/packetsFilter.ts","webpack://minecraft-web-client/./src/react/components/replay/constants.ts","webpack://minecraft-web-client/./src/react/components/replay/FilterInput.tsx","webpack://minecraft-web-client/./src/react/components/replay/PacketList.tsx","webpack://minecraft-web-client/./src/react/components/replay/ProgressBar.tsx","webpack://minecraft-web-client/./src/react/ReplayPanel.tsx","webpack://minecraft-web-client/./src/react/PacketsReplayProvider.tsx","webpack://minecraft-web-client/./src/react/TouchInteractionHint.module.css?64ab","webpack://minecraft-web-client/./src/react/TouchInteractionHint.tsx","webpack://minecraft-web-client/./src/react/VoiceMicrophone.tsx","webpack://minecraft-web-client/./src/react/ConnectOnlyServerUi.tsx","webpack://minecraft-web-client/./src/react/ControDebug.tsx","webpack://minecraft-web-client/./src/react/ChunksDebug.tsx","webpack://minecraft-web-client/./src/react/ChunksDebugScreen.tsx","webpack://minecraft-web-client/./src/react/debugs/DebugResponseTimeIndicator.module.css?e8d6","webpack://minecraft-web-client/./src/react/debugs/DebugResponseTimeIndicator.tsx","webpack://minecraft-web-client/./src/react/rendererDebugMenu.module.css?6208","webpack://minecraft-web-client/./src/react/RendererDebugMenu.tsx","webpack://minecraft-web-client/./src/react/CreditsAboutModal.module.css?b6df","webpack://minecraft-web-client/./src/react/CreditsAboutModal.tsx","webpack://minecraft-web-client/./src/react/FullscreenTime.tsx","webpack://minecraft-web-client/./src/react/StorageConflictModal.tsx","webpack://minecraft-web-client/./src/react/FireRenderer.tsx","webpack://minecraft-web-client/./src/react/MonacoEditor.tsx","webpack://minecraft-web-client/./src/react/CornerIndicatorStats.tsx","webpack://minecraft-web-client/./src/dragndrop.ts","webpack://minecraft-web-client/./src/createLocalServer.ts","webpack://minecraft-web-client/./src/serviceWorker.ts","webpack://minecraft-web-client/./src/rendererUtils.ts","webpack://minecraft-web-client/./src/flyingSquidEvents.ts","webpack://minecraft-web-client/./src/devReload.ts","webpack://minecraft-web-client/./src/water.ts","webpack://minecraft-web-client/./src/benchmarkAdapter.ts","webpack://minecraft-web-client/./src/benchmark.ts","webpack://minecraft-web-client/./src/inventoryWindows.ts","webpack://minecraft-web-client/./src/itemsDescriptions.ts","webpack://minecraft-web-client/./src/loadSave.ts","webpack://minecraft-web-client/./src/microsoftAuthflow.ts","webpack://minecraft-web-client/./src/mineflayer/items.ts","webpack://minecraft-web-client/./src/mineflayer/playerState.ts","webpack://minecraft-web-client/./src/mineflayer/plugins/packetsRecording.ts","webpack://minecraft-web-client/./src/mineflayer/userError.ts","webpack://minecraft-web-client/./src/mobileShim.ts","webpack://minecraft-web-client/./src/optionsStorage.ts","webpack://minecraft-web-client/./src/packetsReplay/packetsReplayLegacy.ts","webpack://minecraft-web-client/./src/react/simpleUtils.ts","webpack://minecraft-web-client/./src/packetsReplay/replayPackets.ts","webpack://minecraft-web-client/./src/playgroundIntegration.ts","webpack://minecraft-web-client/./src/errorLoadingScreenHelpers.ts","webpack://minecraft-web-client/./src/react/appStatus.module.css?b80f","webpack://minecraft-web-client/./src/react/AppStatus.tsx","webpack://minecraft-web-client/./src/react/DiveTransition.module.css?8aee","webpack://minecraft-web-client/./src/react/DiveTransition.tsx","webpack://minecraft-web-client/./src/react/LoadingChunks.tsx","webpack://minecraft-web-client/./src/react/AppStatusProvider.tsx","webpack://minecraft-web-client/./src/react/button.module.css?ca85","webpack://minecraft-web-client/./src/react/Button.tsx","webpack://minecraft-web-client/./src/react/Chat.tsx","webpack://minecraft-web-client/./src/react/GlobalOverlayHints.tsx","webpack://minecraft-web-client/./src/react/Input.tsx","webpack://minecraft-web-client/./src/react/input.module.css?c37b","webpack://minecraft-web-client/./src/react/LoadingTimer.tsx","webpack://minecraft-web-client/./src/react/MessageFormatted.tsx","webpack://minecraft-web-client/./src/react/MessageFormattedString.tsx","webpack://minecraft-web-client/./src/react/Notification.tsx","webpack://minecraft-web-client/./src/react/NotificationProvider.tsx","webpack://minecraft-web-client/./renderer/viewer/lib/createPlayerObject.ts","webpack://minecraft-web-client/./src/react/OverlayModelViewer.tsx","webpack://minecraft-web-client/./src/react/PixelartIcon.tsx","webpack://minecraft-web-client/./src/react/Screen.tsx","webpack://minecraft-web-client/./src/react/SelectOption.tsx","webpack://minecraft-web-client/./src/react/SharedHudVars.tsx","webpack://minecraft-web-client/./src/react/appStorageProvider.ts","webpack://minecraft-web-client/./src/react/hooks/useScrollBehavior.ts","webpack://minecraft-web-client/./src/react/serversStorage.ts","webpack://minecraft-web-client/./src/react/state/packetsReplayState.ts","webpack://minecraft-web-client/./src/react/useLongPress.ts","webpack://minecraft-web-client/./src/react/utils.ts","webpack://minecraft-web-client/./src/react/utilsApp.ts","webpack://minecraft-web-client/./src/resourcePack.ts","webpack://minecraft-web-client/./src/scaleInterface.ts","webpack://minecraft-web-client/./src/shims/crypto.js","webpack://minecraft-web-client/./src/shims/dns.js","webpack://minecraft-web-client/./src/shims/empty.ts","webpack://minecraft-web-client/./src/shims/fs.js","webpack://minecraft-web-client/./src/shims/minecraftData.ts","webpack://minecraft-web-client/./src/optimizeJson.ts","webpack://minecraft-web-client/./src/shims/perf_hooks_replacement.js","webpack://minecraft-web-client/./src/shims/prismarineAuthReplacement.ts","webpack://minecraft-web-client/./src/shims/yggdrasilReplacement.ts","webpack://minecraft-web-client/./src/sounds/botSoundSystem.ts","webpack://minecraft-web-client/./src/sounds/musicSystem.ts","webpack://minecraft-web-client/./src/sounds/soundsMap.ts","webpack://minecraft-web-client/./src/sounds/customSoundSystem.ts","webpack://minecraft-web-client/./src/standaloneUtils.ts","webpack://minecraft-web-client/./src/supportedVersions.mjs","webpack://minecraft-web-client/./src/utils.ts"],"sourcesContent":["\nimport pako from 'pako';\n\nglobalThis.pako = { inflate: pako.inflate.bind(pako) }\n\nfunction decompressFromBase64(input) {\n    console.time('decompressFromBase64')\n    // Decode the Base64 string\n    const binaryString = atob(input);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n\n    // Convert the binary string to a byte array\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n\n    // Decompress the byte array\n    const decompressedData = pako.inflate(bytes, { to: 'string' });\n\n    console.timeEnd('decompressFromBase64')\n    return decompressedData;\n}\n\nexport const importLargeData = async (mod: 'mcData' | 'blockStatesModels') => {\n  if (mod === 'mcData') return (await import(/* webpackChunkName: \"mc-data\" */ '../generated/minecraft-data-optimized.json')).default\n  if (mod === 'blockStatesModels') return (await import(/* webpackChunkName: \"mc-assets\" */ 'mc-assets/dist/blockStatesModels.json')).default\n}\n","import { EntityMesh, rendererSpecialHandled, EntityDebugFlags } from '../viewer/three/entity/EntityMesh'\r\n\r\nexport const displayEntitiesDebugList = (version: string) => {\r\n  // Create results container\r\n  const container = document.createElement('div')\r\n  container.style.cssText = `\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    max-height: 90vh;\r\n    overflow-y: auto;\r\n    background: rgba(0,0,0,0.8);\r\n    color: white;\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    font-family: monospace;\r\n    min-width: 400px;\r\n    z-index: 1000;\r\n  `\r\n  document.body.appendChild(container)\r\n\r\n  // Add title\r\n  const title = document.createElement('h2')\r\n  title.textContent = 'Minecraft Entity Support'\r\n  title.style.cssText = 'margin-top: 0; text-align: center;'\r\n  container.appendChild(title)\r\n\r\n  // Test entities\r\n  const results: Array<{\r\n    entity: string;\r\n    supported: boolean;\r\n    type?: 'obj' | 'bedrock' | 'special';\r\n    mappedFrom?: string;\r\n    textureMap?: boolean;\r\n    errors?: string[];\r\n  }> = []\r\n  const { mcData } = window\r\n  const entityNames = Object.keys(mcData.entitiesArray.reduce((acc, entity) => {\r\n    acc[entity.name] = true\r\n    return acc\r\n  }, {}))\r\n\r\n  // Add loading indicator\r\n  const loading = document.createElement('div')\r\n  loading.textContent = 'Testing entities...'\r\n  loading.style.textAlign = 'center'\r\n  container.appendChild(loading)\r\n\r\n  for (const entity of entityNames) {\r\n    const debugFlags: EntityDebugFlags = {}\r\n\r\n    if (rendererSpecialHandled.includes(entity)) {\r\n      results.push({\r\n        entity,\r\n        supported: true,\r\n        type: 'special',\r\n      })\r\n      continue\r\n    }\r\n\r\n    try {\r\n\r\n      const { mesh: entityMesh } = new EntityMesh(version, entity, undefined, {}, debugFlags)\r\n      // find the most distant pos child\r\n      window.objects ??= {}\r\n      window.objects[entity] = entityMesh\r\n\r\n      results.push({\r\n        entity,\r\n        supported: !!debugFlags.type || rendererSpecialHandled.includes(entity),\r\n        type: debugFlags.type,\r\n        mappedFrom: debugFlags.tempMap,\r\n        textureMap: debugFlags.textureMap,\r\n        errors: debugFlags.errors\r\n      })\r\n    } catch (e) {\r\n      console.error(e)\r\n      results.push({\r\n        entity,\r\n        supported: false,\r\n        mappedFrom: debugFlags.tempMap\r\n      })\r\n    }\r\n  }\r\n\r\n  // Remove loading indicator\r\n  loading.remove()\r\n\r\n  const createSection = (title: string, items: any[], filter: (item: any) => boolean) => {\r\n    const section = document.createElement('div')\r\n    section.style.marginBottom = '20px'\r\n\r\n    const sectionTitle = document.createElement('h3')\r\n    sectionTitle.textContent = title\r\n    sectionTitle.style.textAlign = 'center'\r\n    section.appendChild(sectionTitle)\r\n\r\n    const list = document.createElement('ul')\r\n    list.style.cssText = 'padding-left: 20px; list-style-type: none; margin: 0;'\r\n\r\n    const filteredItems = items.filter(filter)\r\n    for (const item of filteredItems) {\r\n      const listItem = document.createElement('li')\r\n      listItem.style.cssText = 'line-height: 1.4; margin: 8px 0;'\r\n\r\n      const entityName = document.createElement('strong')\r\n      entityName.style.cssText = 'user-select: text;-webkit-user-select: text;'\r\n      entityName.textContent = item.entity\r\n      listItem.appendChild(entityName)\r\n\r\n      let text = ''\r\n      if (item.mappedFrom) {\r\n        text += ` -> ${item.mappedFrom}`\r\n      }\r\n      if (item.type) {\r\n        text += ` - ${item.type}`\r\n      }\r\n      if (item.textureMap) {\r\n        text += ' ⚠️'\r\n      }\r\n      if (item.errors) {\r\n        text += ' ❌'\r\n      }\r\n\r\n      listItem.appendChild(document.createTextNode(text))\r\n      list.appendChild(listItem)\r\n    }\r\n\r\n    section.appendChild(list)\r\n    return { section, count: filteredItems.length }\r\n  }\r\n\r\n  // Sort results - bedrock first\r\n  results.sort((a, b) => {\r\n    if (a.type === 'bedrock' && b.type !== 'bedrock') return -1\r\n    if (a.type !== 'bedrock' && b.type === 'bedrock') return 1\r\n    return a.entity.localeCompare(b.entity)\r\n  })\r\n\r\n  // Add sections\r\n  const sections = [\r\n    {\r\n      title: '❌ Unsupported Entities',\r\n      filter: (r: any) => !r.supported && !r.mappedFrom\r\n    },\r\n    {\r\n      title: '⚠️ Partially Supported Entities',\r\n      filter: (r: any) => r.mappedFrom\r\n    },\r\n    {\r\n      title: '✅ Supported Entities',\r\n      filter: (r: any) => r.supported && !r.mappedFrom\r\n    }\r\n  ]\r\n\r\n  for (const { title, filter } of sections) {\r\n    const { section, count } = createSection(title, results, filter)\r\n    if (count > 0) {\r\n      container.appendChild(section)\r\n    }\r\n  }\r\n\r\n  // log object with errors per entity\r\n  const errors = results.filter(r => r.errors).map(r => ({\r\n    entity: r.entity,\r\n    errors: r.errors\r\n  }))\r\n  console.log(errors)\r\n}\r\n","import WorldLoader, { world } from 'prismarine-world'\r\nimport ChunkLoader from 'prismarine-chunk'\r\n\r\nexport type BlockFaceType = {\r\n  side: number\r\n  textureIndex: number\r\n  tint?: [number, number, number]\r\n  isTransparent?: boolean\r\n\r\n  // for testing\r\n  face?: string\r\n  neighbor?: string\r\n  light?: number\r\n}\r\n\r\nexport type BlockType = {\r\n  faces: BlockFaceType[]\r\n\r\n  // for testing\r\n  block: string\r\n}\r\n\r\nexport const makeError = (str: string) => {\r\n  reportError?.(str)\r\n}\r\nexport const makeErrorCritical = (str: string) => {\r\n  throw new Error(str)\r\n}\r\n\r\nexport const getSyncWorld = (version: string): world.WorldSync => {\r\n  const World = (WorldLoader as any)(version)\r\n  const Chunk = (ChunkLoader as any)(version)\r\n\r\n  const world = new World(version).sync\r\n\r\n  const methods = getAllMethods(world)\r\n  for (const method of methods) {\r\n    if (method.startsWith('set') && method !== 'setColumn') {\r\n      const oldMethod = world[method].bind(world)\r\n      world[method] = (...args) => {\r\n        const arg = args[0]\r\n        if (arg.x !== undefined && !world.getColumnAt(arg)) {\r\n          world.setColumn(Math.floor(arg.x / 16), Math.floor(arg.z / 16), new Chunk(undefined as any))\r\n        }\r\n        oldMethod(...args)\r\n      }\r\n    }\r\n  }\r\n\r\n  return world\r\n}\r\n\r\nfunction getAllMethods (obj) {\r\n  const methods = new Set()\r\n  let currentObj = obj\r\n\r\n  do {\r\n    for (const name of Object.getOwnPropertyNames(currentObj)) {\r\n      if (typeof obj[name] === 'function' && name !== 'constructor') {\r\n        methods.add(name)\r\n      }\r\n    }\r\n  } while ((currentObj = Object.getPrototypeOf(currentObj)))\r\n\r\n  return [...methods] as string[]\r\n}\r\n\r\nexport const delayedIterator = async <T> (arr: T[], delay: number, exec: (item: T, index: number) => Promise<void>, chunkSize = 1) => {\r\n  // if delay is 0 then don't use setTimeout\r\n  for (let i = 0; i < arr.length; i += chunkSize) {\r\n    if (delay) {\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await new Promise(resolve => {\r\n        setTimeout(resolve, delay)\r\n      })\r\n    }\r\n    await exec(arr[i], i)\r\n  }\r\n}\r\n","export const versionToNumber = (ver: string) => {\r\n  const [x, y = '0', z = '0'] = ver.split('.')\r\n  return +`${x.padStart(2, '0')}${y.padStart(2, '0')}${z.padStart(2, '0')}`\r\n}\r\n\r\nexport const versionToMajor = (version: string) => {\r\n  const [x, y = '0'] = version.split('.')\r\n  return `${x.padStart(2, '0')}.${y.padStart(2, '0')}`\r\n}\r\n\r\nexport const versionsMapToMajor = <T> (versionsMap: Record<string, T>) => {\r\n  const majorVersions = {} as Record<string, T>\r\n  for (const [ver, data] of Object.entries(versionsMap)) {\r\n    const major = versionToMajor(ver)\r\n    majorVersions[major] = data\r\n  }\r\n  return majorVersions\r\n}\r\n","// eslint-disable-next-line import/no-named-as-default\r\nimport GUI from 'lil-gui'\r\n\r\nexport interface ParamMeta {\r\n  min?: number\r\n  max?: number\r\n  step?: number\r\n}\r\n\r\nexport class DebugGui {\r\n  private gui: GUI\r\n  private readonly storageKey: string\r\n  private target: any\r\n  private readonly params: string[]\r\n  private readonly paramsMeta: Record<string, ParamMeta>\r\n  private _visible = false // Default to not visible\r\n  private readonly initialValues: Record<string, any> = {} // Store initial values\r\n  private initialized = false\r\n\r\n  constructor (id: string, target: any, params?: string[], paramsMeta?: Record<string, ParamMeta>) {\r\n    this.gui = new GUI()\r\n    this.storageKey = `debug_params_${id}`\r\n    this.target = target\r\n    this.paramsMeta = paramsMeta ?? {}\r\n    this.params = params ?? Object.keys(target)\r\n\r\n    // Store initial values\r\n    for (const param of this.params) {\r\n      this.initialValues[param] = target[param]\r\n    }\r\n\r\n    // Hide by default\r\n    this.gui.domElement.style.display = 'none'\r\n  }\r\n\r\n  // Initialize and show the GUI\r\n  activate () {\r\n    if (!this.initialized) {\r\n      this.loadSavedValues()\r\n      this.setupControls()\r\n      this.initialized = true\r\n    }\r\n    this.show()\r\n    return this\r\n  }\r\n\r\n  // Getter for visibility\r\n  get visible (): boolean {\r\n    return this._visible\r\n  }\r\n\r\n  // Setter for visibility\r\n  set visible (value: boolean) {\r\n    this._visible = value\r\n    this.gui.domElement.style.display = value ? 'block' : 'none'\r\n    this.saveVisibility()\r\n  }\r\n\r\n  private loadSavedValues () {\r\n    try {\r\n      const saved = localStorage.getItem(this.storageKey)\r\n      if (saved) {\r\n        const values = JSON.parse(saved)\r\n        // Apply saved values to target\r\n        for (const param of this.params) {\r\n          if (param in values) {\r\n            const value = values[param]\r\n            if (value !== null) {\r\n              this.target[param] = value\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('Failed to load debug values:', e)\r\n    }\r\n  }\r\n\r\n  private saveValues (deleteKey = false) {\r\n    try {\r\n      const values = {}\r\n      for (const param of this.params) {\r\n        values[param] = this.target[param]\r\n      }\r\n      if (deleteKey) {\r\n        localStorage.removeItem(this.storageKey)\r\n      } else {\r\n        localStorage.setItem(this.storageKey, JSON.stringify(values))\r\n      }\r\n    } catch (e) {\r\n      console.warn('Failed to save debug values:', e)\r\n    }\r\n  }\r\n\r\n  private saveVisibility () {\r\n    try {\r\n      localStorage.setItem(`${this.storageKey}_visible`, this._visible.toString())\r\n    } catch (e) {\r\n      console.warn('Failed to save debug visibility:', e)\r\n    }\r\n  }\r\n\r\n  private setupControls () {\r\n    // Add visibility toggle at the top\r\n    this.gui.add(this, 'visible').name('Show Controls')\r\n    this.gui.add({ resetAll: () => {\r\n      for (const param of this.params) {\r\n        this.target[param] = this.initialValues[param]\r\n      }\r\n      this.saveValues(true)\r\n      this.gui.destroy()\r\n      this.gui = new GUI()\r\n      this.setupControls()\r\n    } }, 'resetAll').name('Reset All Parameters')\r\n\r\n    for (const param of this.params) {\r\n      const value = this.target[param]\r\n      const meta = this.paramsMeta[param] ?? {}\r\n\r\n      if (typeof value === 'number') {\r\n        // For numbers, use meta values or calculate reasonable defaults\r\n        const min = meta.min ?? value - Math.abs(value * 2)\r\n        const max = meta.max ?? value + Math.abs(value * 2)\r\n        const step = meta.step ?? Math.abs(value) / 100\r\n\r\n        this.gui.add(this.target, param, min, max, step)\r\n          .onChange(() => this.saveValues())\r\n      } else if (typeof value === 'boolean') {\r\n        // For booleans, create a checkbox\r\n        this.gui.add(this.target, param)\r\n          .onChange(() => this.saveValues())\r\n      } else if (typeof value === 'string' && ['x', 'y', 'z'].includes(param)) {\r\n        // Special case for xyz coordinates\r\n        const min = meta.min ?? -10\r\n        const max = meta.max ?? 10\r\n        const step = meta.step ?? 0.1\r\n\r\n        this.gui.add(this.target, param, min, max, step)\r\n          .onChange(() => this.saveValues())\r\n      } else if (Array.isArray(value)) {\r\n        // For arrays, create a dropdown\r\n        this.gui.add(this.target, param, value)\r\n          .onChange(() => this.saveValues())\r\n      }\r\n    }\r\n  }\r\n\r\n  // Method to manually trigger save\r\n  save () {\r\n    this.saveValues()\r\n    this.saveVisibility()\r\n  }\r\n\r\n  // Method to destroy the GUI and clean up\r\n  destroy () {\r\n    this.saveVisibility()\r\n    this.gui.destroy()\r\n  }\r\n\r\n  // Toggle visibility\r\n  toggle () {\r\n    this.visible = !this.visible\r\n  }\r\n\r\n  // Show the GUI\r\n  show () {\r\n    this.visible = true\r\n  }\r\n\r\n  // Hide the GUI\r\n  hide () {\r\n    this.visible = false\r\n  }\r\n}\r\n","import { ItemSelector } from 'mc-assets/dist/itemDefinitions'\r\nimport { GameMode, Team } from 'mineflayer'\r\nimport { proxy } from 'valtio'\r\nimport type { HandItemBlock } from '../three/holdingBlock'\r\n\r\nexport type MovementState = 'NOT_MOVING' | 'WALKING' | 'SPRINTING' | 'SNEAKING'\r\nexport type ItemSpecificContextProperties = Partial<Pick<ItemSelector['properties'], 'minecraft:using_item' | 'minecraft:use_duration' | 'minecraft:use_cycle' | 'minecraft:display_context'>>\r\nexport type CameraPerspective = 'first_person' | 'third_person_back' | 'third_person_front'\r\n\r\nexport type BlockShape = { position: any; width: any; height: any; depth: any; }\r\nexport type BlocksShapes = BlockShape[]\r\n\r\n// edit src/mineflayer/playerState.ts for implementation of player state from mineflayer\r\nexport const getInitialPlayerState = () => proxy({\r\n  playerSkin: undefined as string | undefined,\r\n  inWater: false,\r\n  waterBreathing: false,\r\n  backgroundColor: [0, 0, 0] as [number, number, number],\r\n  ambientLight: 0,\r\n  directionalLight: 0,\r\n  eyeHeight: 0,\r\n  gameMode: undefined as GameMode | undefined,\r\n  lookingAtBlock: undefined as {\r\n    x: number\r\n    y: number\r\n    z: number\r\n    face?: number\r\n    shapes: BlocksShapes\r\n  } | undefined,\r\n  diggingBlock: undefined as {\r\n    x: number\r\n    y: number\r\n    z: number\r\n    stage: number\r\n    face?: number\r\n    mergedShape: BlockShape | undefined\r\n  } | undefined,\r\n  movementState: 'NOT_MOVING' as MovementState,\r\n  onGround: true,\r\n  sneaking: false,\r\n  flying: false,\r\n  sprinting: false,\r\n  itemUsageTicks: 0,\r\n  username: '',\r\n  onlineMode: false,\r\n  lightingDisabled: false,\r\n  shouldHideHand: false,\r\n  heldItemMain: undefined as HandItemBlock | undefined,\r\n  heldItemOff: undefined as HandItemBlock | undefined,\r\n  perspective: 'first_person' as CameraPerspective,\r\n  onFire: false,\r\n\r\n  cameraSpectatingEntity: undefined as number | undefined,\r\n\r\n  team: undefined as Team | undefined,\r\n})\r\n\r\nexport const getPlayerStateUtils = (reactive: PlayerStateReactive) => ({\r\n  isSpectator () {\r\n    return reactive.gameMode === 'spectator'\r\n  },\r\n  isSpectatingEntity () {\r\n    return reactive.cameraSpectatingEntity !== undefined && reactive.gameMode === 'spectator'\r\n  },\r\n  isThirdPerson () {\r\n    if ((this as PlayerStateUtils).isSpectatingEntity()) return false\r\n    return reactive.perspective === 'third_person_back' || reactive.perspective === 'third_person_front'\r\n  }\r\n})\r\n\r\nexport const getInitialPlayerStateRenderer = () => ({\r\n  reactive: getInitialPlayerState()\r\n})\r\n\r\nexport type PlayerStateReactive = ReturnType<typeof getInitialPlayerState>\r\nexport type PlayerStateUtils = ReturnType<typeof getPlayerStateUtils>\r\n\r\nexport type PlayerStateRenderer = PlayerStateReactive\r\n\r\nexport const getItemSelector = (playerState: PlayerStateRenderer, specificProperties: ItemSpecificContextProperties, item?: import('prismarine-item').Item) => {\r\n  return {\r\n    ...specificProperties,\r\n    'minecraft:date': new Date(),\r\n    // \"minecraft:context_dimension\": bot.entityp,\r\n    // 'minecraft:time': bot.time.timeOfDay / 24_000,\r\n  }\r\n}\r\n","import { BlockModelPartsResolved } from './world'\r\n\r\nexport type BlockElement = NonNullable<BlockModelPartsResolved[0][0]['elements']>[0]\r\n\r\n\r\nexport function buildRotationMatrix (axis, degree) {\r\n  const radians = degree / 180 * Math.PI\r\n  const cos = Math.cos(radians)\r\n  const sin = Math.sin(radians)\r\n\r\n  const axis0 = { x: 0, y: 1, z: 2 }[axis]\r\n  const axis1 = (axis0 + 1) % 3\r\n  const axis2 = (axis0 + 2) % 3\r\n\r\n  const matrix = [\r\n    [0, 0, 0],\r\n    [0, 0, 0],\r\n    [0, 0, 0]\r\n  ]\r\n\r\n  matrix[axis0][axis0] = 1\r\n  matrix[axis1][axis1] = cos\r\n  matrix[axis1][axis2] = -sin\r\n  matrix[axis2][axis1] = +sin\r\n  matrix[axis2][axis2] = cos\r\n\r\n  return matrix\r\n}\r\n\r\nexport function vecadd3 (a, b) {\r\n  if (!b) return a\r\n  return [a[0] + b[0], a[1] + b[1], a[2] + b[2]]\r\n}\r\n\r\nexport function vecsub3 (a, b) {\r\n  if (!b) return a\r\n  return [a[0] - b[0], a[1] - b[1], a[2] - b[2]]\r\n}\r\n\r\nexport function matmul3 (matrix, vector): [number, number, number] {\r\n  if (!matrix) return vector\r\n  return [\r\n    matrix[0][0] * vector[0] + matrix[0][1] * vector[1] + matrix[0][2] * vector[2],\r\n    matrix[1][0] * vector[0] + matrix[1][1] * vector[1] + matrix[1][2] * vector[2],\r\n    matrix[2][0] * vector[0] + matrix[2][1] * vector[1] + matrix[2][2] * vector[2]\r\n  ]\r\n}\r\n\r\nexport function matmulmat3 (a, b) {\r\n  const te = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\r\n\r\n  const a11 = a[0][0]; const a12 = a[1][0]; const a13 = a[2][0]\r\n  const a21 = a[0][1]; const a22 = a[1][1]; const a23 = a[2][1]\r\n  const a31 = a[0][2]; const a32 = a[1][2]; const a33 = a[2][2]\r\n\r\n  const b11 = b[0][0]; const b12 = b[1][0]; const b13 = b[2][0]\r\n  const b21 = b[0][1]; const b22 = b[1][1]; const b23 = b[2][1]\r\n  const b31 = b[0][2]; const b32 = b[1][2]; const b33 = b[2][2]\r\n\r\n  te[0][0] = a11 * b11 + a12 * b21 + a13 * b31\r\n  te[1][0] = a11 * b12 + a12 * b22 + a13 * b32\r\n  te[2][0] = a11 * b13 + a12 * b23 + a13 * b33\r\n\r\n  te[0][1] = a21 * b11 + a22 * b21 + a23 * b31\r\n  te[1][1] = a21 * b12 + a22 * b22 + a23 * b32\r\n  te[2][1] = a21 * b13 + a22 * b23 + a23 * b33\r\n\r\n  te[0][2] = a31 * b11 + a32 * b21 + a33 * b31\r\n  te[1][2] = a31 * b12 + a32 * b22 + a33 * b32\r\n  te[2][2] = a31 * b13 + a32 * b23 + a33 * b33\r\n\r\n  return te\r\n}\r\n\r\nexport const elemFaces = {\r\n  up: {\r\n    dir: [0, 1, 0],\r\n    mask1: [1, 1, 0],\r\n    mask2: [0, 1, 1],\r\n    corners: [\r\n      [0, 1, 1, 0, 1],\r\n      [1, 1, 1, 1, 1],\r\n      [0, 1, 0, 0, 0],\r\n      [1, 1, 0, 1, 0]\r\n    ]\r\n  },\r\n  down: {\r\n    dir: [0, -1, 0],\r\n    mask1: [1, 1, 0],\r\n    mask2: [0, 1, 1],\r\n    corners: [\r\n      [1, 0, 1, 0, 1],\r\n      [0, 0, 1, 1, 1],\r\n      [1, 0, 0, 0, 0],\r\n      [0, 0, 0, 1, 0]\r\n    ]\r\n  },\r\n  east: {\r\n    dir: [1, 0, 0],\r\n    mask1: [1, 1, 0],\r\n    mask2: [1, 0, 1],\r\n    corners: [\r\n      [1, 1, 1, 0, 0],\r\n      [1, 0, 1, 0, 1],\r\n      [1, 1, 0, 1, 0],\r\n      [1, 0, 0, 1, 1]\r\n    ]\r\n  },\r\n  west: {\r\n    dir: [-1, 0, 0],\r\n    mask1: [1, 1, 0],\r\n    mask2: [1, 0, 1],\r\n    corners: [\r\n      [0, 1, 0, 0, 0],\r\n      [0, 0, 0, 0, 1],\r\n      [0, 1, 1, 1, 0],\r\n      [0, 0, 1, 1, 1]\r\n    ]\r\n  },\r\n  north: {\r\n    dir: [0, 0, -1],\r\n    mask1: [1, 0, 1],\r\n    mask2: [0, 1, 1],\r\n    corners: [\r\n      [1, 0, 0, 1, 1],\r\n      [0, 0, 0, 0, 1],\r\n      [1, 1, 0, 1, 0],\r\n      [0, 1, 0, 0, 0]\r\n    ]\r\n  },\r\n  south: {\r\n    dir: [0, 0, 1],\r\n    mask1: [1, 0, 1],\r\n    mask2: [0, 1, 1],\r\n    corners: [\r\n      [0, 0, 1, 0, 1],\r\n      [1, 0, 1, 1, 1],\r\n      [0, 1, 1, 0, 0],\r\n      [1, 1, 1, 1, 0]\r\n    ]\r\n  }\r\n}\r\n","/* eslint-disable @stylistic/function-call-argument-newline */\r\nimport { Vec3 } from 'vec3'\r\nimport { Block } from 'prismarine-block'\r\nimport { IndexedData } from 'minecraft-data'\r\nimport * as THREE from 'three'\r\nimport { BlockModelPartsResolved } from './world'\r\nimport { BlockElement, buildRotationMatrix, elemFaces, matmul3, matmulmat3, vecadd3, vecsub3 } from './modelsGeometryCommon'\r\n\r\ntype NeighborSide = 'up' | 'down' | 'east' | 'west' | 'north' | 'south'\r\n\r\nfunction tintToGl (tint) {\r\n  const r = (tint >> 16) & 0xff\r\n  const g = (tint >> 8) & 0xff\r\n  const b = tint & 0xff\r\n  return [r / 255, g / 255, b / 255]\r\n}\r\n\r\ntype Neighbors = Partial<Record<NeighborSide, boolean>>\r\nfunction renderElement (element: BlockElement, doAO: boolean, attr, globalMatrix, globalShift, block: Block | undefined, biome: string, neighbors: Neighbors) {\r\n  const cursor = new Vec3(0, 0, 0)\r\n\r\n  // const key = `${position.x},${position.y},${position.z}`\r\n  // if (!globalThis.allowedBlocks.includes(key)) return\r\n  // const cullIfIdentical = block.name.indexOf('glass') >= 0\r\n\r\n  // eslint-disable-next-line guard-for-in\r\n  for (const face in element.faces) {\r\n    const eFace = element.faces[face]\r\n    const { corners, mask1, mask2 } = elemFaces[face]\r\n    const dir = matmul3(globalMatrix, elemFaces[face].dir)\r\n\r\n    if (eFace.cullface) {\r\n      if (neighbors[face]) continue\r\n    }\r\n\r\n    const minx = element.from[0]\r\n    const miny = element.from[1]\r\n    const minz = element.from[2]\r\n    const maxx = element.to[0]\r\n    const maxy = element.to[1]\r\n    const maxz = element.to[2]\r\n\r\n    const texture = eFace.texture as any\r\n    const { u } = texture\r\n    const { v } = texture\r\n    const { su } = texture\r\n    const { sv } = texture\r\n\r\n    const ndx = Math.floor(attr.positions.length / 3)\r\n\r\n    let tint = [1, 1, 1]\r\n    if (eFace.tintindex !== undefined) {\r\n      if (eFace.tintindex === 0) {\r\n        // TODO\r\n        // if (block.name === 'redstone_wire') {\r\n        //   tint = tints.redstone[`${block.getProperties().power}`]\r\n        // } else if (block.name === 'birch_leaves' ||\r\n        //   block.name === 'spruce_leaves' ||\r\n        //   block.name === 'lily_pad') {\r\n        //   tint = tints.constant[block.name]\r\n        // } else if (block.name.includes('leaves') || block.name === 'vine') {\r\n        //   tint = tints.foliage[biome]\r\n        // } else {\r\n        //   tint = tints.grass[biome]\r\n        // }\r\n        const grassTint = [145 / 255, 189 / 255, 89 / 255]\r\n        tint = grassTint\r\n      }\r\n    }\r\n\r\n    // UV rotation\r\n    const r = eFace.rotation || 0\r\n    const uvcs = Math.cos(r * Math.PI / 180)\r\n    const uvsn = -Math.sin(r * Math.PI / 180)\r\n\r\n    let localMatrix = null as any\r\n    let localShift = null as any\r\n\r\n    if (element.rotation) {\r\n      // todo do we support rescale?\r\n      localMatrix = buildRotationMatrix(\r\n        element.rotation.axis,\r\n        element.rotation.angle\r\n      )\r\n\r\n      localShift = vecsub3(\r\n        element.rotation.origin,\r\n        matmul3(\r\n          localMatrix,\r\n          element.rotation.origin\r\n        )\r\n      )\r\n    }\r\n\r\n    const aos: number[] = []\r\n    // const neighborPos = position.plus(new Vec3(...dir))\r\n    // const baseLight = world.getLight(neighborPos, undefined, undefined, block.name) / 15\r\n    const baseLight = 1\r\n    for (const pos of corners) {\r\n      let vertex = [\r\n        (pos[0] ? maxx : minx),\r\n        (pos[1] ? maxy : miny),\r\n        (pos[2] ? maxz : minz)\r\n      ]\r\n\r\n      vertex = vecadd3(matmul3(localMatrix, vertex), localShift)\r\n      vertex = vecadd3(matmul3(globalMatrix, vertex), globalShift)\r\n      vertex = vertex.map(v => v / 16)\r\n\r\n      attr.positions.push(\r\n        vertex[0]/*  + (cursor.x & 15) - 8 */,\r\n        vertex[1]/*  + (cursor.y & 15) x */,\r\n        vertex[2]/*  + (cursor.z & 15) - 8 */\r\n      )\r\n\r\n      attr.normals.push(...dir)\r\n\r\n      const baseu = (pos[3] - 0.5) * uvcs - (pos[4] - 0.5) * uvsn + 0.5\r\n      const basev = (pos[3] - 0.5) * uvsn + (pos[4] - 0.5) * uvcs + 0.5\r\n      attr.uvs.push(baseu * su + u, basev * sv + v)\r\n\r\n      let light = 1\r\n      if (doAO) {\r\n        const cornerLightResult = 15\r\n\r\n        const side1Block = 0\r\n        const side2Block = 0\r\n        const cornerBlock = 0\r\n\r\n        const ao = (side1Block && side2Block) ? 0 : (3 - (side1Block + side2Block + cornerBlock))\r\n        // todo light should go upper on lower blocks\r\n        light = (ao + 1) / 4 * (cornerLightResult / 15)\r\n        aos.push(ao)\r\n      }\r\n\r\n      attr.colors.push(baseLight * tint[0] * light, baseLight * tint[1] * light, baseLight * tint[2] * light)\r\n    }\r\n\r\n    // if (needTiles) {\r\n    //   attr.tiles[`${cursor.x},${cursor.y},${cursor.z}`] ??= {\r\n    //     block: block.name,\r\n    //     faces: [],\r\n    //   }\r\n    //   attr.tiles[`${cursor.x},${cursor.y},${cursor.z}`].faces.push({\r\n    //     face,\r\n    //     neighbor: `${neighborPos.x},${neighborPos.y},${neighborPos.z}`,\r\n    //     light: baseLight\r\n    //     // texture: eFace.texture.name,\r\n    //   })\r\n    // }\r\n\r\n    if (doAO && aos[0] + aos[3] >= aos[1] + aos[2]) {\r\n      attr.indices.push(\r\n\r\n        ndx, ndx + 3, ndx + 2,\r\n        ndx, ndx + 1, ndx + 3\r\n      )\r\n    } else {\r\n      attr.indices.push(\r\n\r\n        ndx, ndx + 1, ndx + 2,\r\n        ndx + 2, ndx + 1, ndx + 3\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport const renderBlockThreeAttr = (models: BlockModelPartsResolved, block: Block | undefined, biome: string, mcData: IndexedData, variants = [], neighbors: Neighbors = {}) => {\r\n  const sx = 0\r\n  const sy = 0\r\n  const sz = 0\r\n\r\n  const attr = {\r\n    sx: sx + 0.5,\r\n    sy: sy + 0.5,\r\n    sz: sz + 0.5,\r\n    positions: [],\r\n    normals: [],\r\n    colors: [],\r\n    uvs: [],\r\n    t_positions: [],\r\n    t_normals: [],\r\n    t_colors: [],\r\n    t_uvs: [],\r\n    indices: [],\r\n    tiles: {},\r\n  } as Record<string, any>\r\n\r\n  for (const [i, modelVars] of models.entries()) {\r\n    const model = modelVars[variants[i]] ?? modelVars[0]\r\n    if (!model) continue\r\n    let globalMatrix = null as any\r\n    let globalShift = null as any\r\n    for (const axis of ['x', 'y', 'z'] as const) {\r\n      if (axis in model) {\r\n        if (globalMatrix) { globalMatrix = matmulmat3(globalMatrix, buildRotationMatrix(axis, -(model[axis] ?? 0))) } else { globalMatrix = buildRotationMatrix(axis, -(model[axis] ?? 0)) }\r\n      }\r\n    }\r\n    if (globalMatrix) {\r\n      globalShift = [8, 8, 8]\r\n      globalShift = vecsub3(globalShift, matmul3(globalMatrix, globalShift))\r\n    }\r\n\r\n    const ao = model.ao ?? true\r\n\r\n    for (const element of model.elements ?? []) {\r\n      renderElement(element, ao, attr, globalMatrix, globalShift, block, biome, neighbors)\r\n    }\r\n  }\r\n\r\n  let ndx = attr.positions.length / 3\r\n  for (let i = 0; i < attr.t_positions.length / 12; i++) {\r\n    attr.indices.push(\r\n      ndx, ndx + 1, ndx + 2, ndx + 2, ndx + 1, ndx + 3,\r\n      // back face\r\n      ndx, ndx + 2, ndx + 1, ndx + 2, ndx + 3, ndx + 1\r\n    )\r\n    ndx += 4\r\n  }\r\n\r\n  attr.positions.push(...attr.t_positions)\r\n  attr.normals.push(...attr.t_normals)\r\n  attr.colors.push(...attr.t_colors)\r\n  attr.uvs.push(...attr.t_uvs)\r\n\r\n  delete attr.t_positions\r\n  delete attr.t_normals\r\n  delete attr.t_colors\r\n  delete attr.t_uvs\r\n\r\n  attr.positions = new Float32Array(attr.positions) as any\r\n  attr.normals = new Float32Array(attr.normals) as any\r\n  attr.colors = new Float32Array(attr.colors) as any\r\n  attr.uvs = new Float32Array(attr.uvs) as any\r\n\r\n  return attr\r\n}\r\n\r\nexport const renderBlockThree = (...args: Parameters<typeof renderBlockThreeAttr>) => {\r\n  const attr = renderBlockThreeAttr(...args)\r\n  const data = {\r\n    geometry: attr\r\n  }\r\n\r\n  const geometry = new THREE.BufferGeometry()\r\n  geometry.setAttribute('position', new THREE.BufferAttribute(data.geometry.positions, 3))\r\n  geometry.setAttribute('normal', new THREE.BufferAttribute(data.geometry.normals, 3))\r\n  geometry.setAttribute('color', new THREE.BufferAttribute(data.geometry.colors, 3))\r\n  geometry.setAttribute('uv', new THREE.BufferAttribute(data.geometry.uvs, 2))\r\n  geometry.setIndex(data.geometry.indices)\r\n  geometry.name = 'block-geometry'\r\n\r\n  return geometry\r\n}\r\n\r\nexport const getThreeBlockModelGroup = (material: THREE.Material, ...args: Parameters<typeof renderBlockThree>) => {\r\n  const geometry = renderBlockThree(...args)\r\n  const mesh = new THREE.Mesh(geometry, material)\r\n  mesh.position.set(-0.5, -0.5, -0.5)\r\n  const group = new THREE.Group()\r\n  group.add(mesh)\r\n  group.rotation.set(0, -THREE.MathUtils.degToRad(90), 0, 'ZYX')\r\n  globalThis.mesh = group\r\n  return group\r\n  // return new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), new THREE.MeshPhongMaterial({ color: 0x00_00_ff, transparent: true, opacity: 0.5 }))\r\n}\r\n\r\nexport const setBlockPosition = (object: THREE.Object3D, position: { x: number, y: number, z: number }) => {\r\n  object.position.set(position.x + 0.5, position.y + 0.5, position.z + 0.5)\r\n}\r\n","export async function getBufferFromStream (stream) {\r\n  return new Promise((resolve, reject) => {\r\n    let buffer = Buffer.from([])\r\n    stream.on('data', buf => {\r\n      buffer = Buffer.concat([buffer, buf])\r\n    })\r\n    stream.on('end', () => resolve(buffer))\r\n    stream.on('error', reject)\r\n  })\r\n}\r\n\r\nexport function openURL (url, newTab = true) {\r\n  if (newTab) {\r\n    window.open(url, '_blank', 'noopener,noreferrer')\r\n  } else {\r\n    window.open(url, '_self')\r\n  }\r\n}\r\n\r\nexport const isMobile = () => {\r\n  return window.matchMedia('(pointer: coarse)').matches || navigator.userAgent.includes('Mobile')\r\n}\r\n\r\nexport function chunkPos (pos: { x: number, z: number }) {\r\n  const x = Math.floor(pos.x / 16)\r\n  const z = Math.floor(pos.z / 16)\r\n  return [x, z]\r\n}\r\n\r\nexport function sectionPos (pos: { x: number, y: number, z: number }) {\r\n  const x = Math.floor(pos.x / 16)\r\n  const y = Math.floor(pos.y / 16)\r\n  const z = Math.floor(pos.z / 16)\r\n  return [x, y, z]\r\n}\r\n","/* eslint-disable unicorn/prefer-dom-node-text-content */\r\nconst rightOffset = 0\r\n\r\nconst stats = {}\r\n\r\nlet lastY = 40\r\nexport const addNewStat = (id: string, width = 80, x = rightOffset, y = lastY) => {\r\n  const pane = document.createElement('div')\r\n  pane.style.position = 'fixed'\r\n  pane.style.top = `${y ?? lastY}px`\r\n  pane.style.right = `${x}px`\r\n  // gray bg\r\n  pane.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'\r\n  pane.style.color = 'white'\r\n  pane.style.padding = '2px'\r\n  pane.style.fontFamily = 'monospace'\r\n  pane.style.fontSize = '12px'\r\n  pane.style.zIndex = '100'\r\n  pane.style.pointerEvents = 'none'\r\n  document.body.appendChild(pane)\r\n  stats[id] = pane\r\n  if (y === undefined && x === rightOffset) { // otherwise it's a custom position\r\n    // rightOffset += width\r\n    lastY += 20\r\n  }\r\n\r\n  return {\r\n    updateText (text: string) {\r\n      if (pane.innerText === text) return\r\n      pane.innerText = text\r\n    },\r\n    setVisibility (visible: boolean) {\r\n      pane.style.display = visible ? 'block' : 'none'\r\n    }\r\n  }\r\n}\r\n\r\nexport const addNewStat2 = (id: string, { top, bottom, right, left, displayOnlyWhenWider }: { top?: number, bottom?: number, right?: number, left?: number, displayOnlyWhenWider?: number }) => {\r\n  if (top === undefined && bottom === undefined) top = 0\r\n  const pane = document.createElement('div')\r\n  pane.style.position = 'fixed'\r\n  if (top !== undefined) {\r\n    pane.style.top = `${top}px`\r\n  }\r\n  if (bottom !== undefined) {\r\n    pane.style.bottom = `${bottom}px`\r\n  }\r\n  if (left !== undefined) {\r\n    pane.style.left = `${left}px`\r\n  }\r\n  if (right !== undefined) {\r\n    pane.style.right = `${right}px`\r\n  }\r\n  // gray bg\r\n  pane.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'\r\n  pane.style.color = 'white'\r\n  pane.style.padding = '2px'\r\n  pane.style.fontFamily = 'monospace'\r\n  pane.style.fontSize = '12px'\r\n  pane.style.zIndex = '10000'\r\n  pane.style.pointerEvents = 'none'\r\n  document.body.appendChild(pane)\r\n  stats[id] = pane\r\n\r\n  const resizeCheck = () => {\r\n    if (!displayOnlyWhenWider) return\r\n    pane.style.display = window.innerWidth > displayOnlyWhenWider ? 'block' : 'none'\r\n  }\r\n  window.addEventListener('resize', resizeCheck)\r\n  resizeCheck()\r\n\r\n  return {\r\n    updateText (text: string) {\r\n      pane.innerText = text\r\n    },\r\n    setVisibility (visible: boolean) {\r\n      pane.style.display = visible ? 'block' : 'none'\r\n    }\r\n  }\r\n}\r\n\r\nexport const updateStatText = (id, text) => {\r\n  if (!stats[id]) return\r\n  stats[id].innerText = text\r\n}\r\n\r\nexport const updatePanesVisibility = (visible: boolean) => {\r\n  // eslint-disable-next-line guard-for-in\r\n  for (const id in stats) {\r\n    stats[id].style.display = visible ? 'block' : 'none'\r\n  }\r\n}\r\n\r\nexport const removeAllStats = () => {\r\n  // eslint-disable-next-line guard-for-in\r\n  for (const id in stats) {\r\n    removeStat(id)\r\n  }\r\n}\r\n\r\nexport const removeStat = (id) => {\r\n  if (!stats[id]) return\r\n  stats[id].remove()\r\n  delete stats[id]\r\n}\r\n\r\nif (typeof customEvents !== 'undefined') {\r\n  customEvents.on('gameLoaded', () => {\r\n    const chunksLoaded = addNewStat('chunks-loaded', 80, 0, 0)\r\n    const chunksTotal = addNewStat('chunks-read', 80, 0, 0)\r\n  })\r\n}\r\n","export const loadScript = async function (scriptSrc: string, highPriority = true): Promise<HTMLScriptElement> {\r\n  const existingScript = document.querySelector<HTMLScriptElement>(`script[src=\"${scriptSrc}\"]`)\r\n  if (existingScript) {\r\n    return existingScript\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const scriptElement = document.createElement('script')\r\n    scriptElement.src = scriptSrc\r\n\r\n    if (highPriority) {\r\n      scriptElement.fetchPriority = 'high'\r\n    }\r\n    scriptElement.async = true\r\n\r\n    scriptElement.addEventListener('load', () => {\r\n      resolve(scriptElement)\r\n    })\r\n\r\n    scriptElement.onerror = (error) => {\r\n      reject(new Error(typeof error === 'string' ? error : (error as any).message))\r\n      scriptElement.remove()\r\n    }\r\n\r\n    document.head.appendChild(scriptElement)\r\n  })\r\n}\r\n\r\nconst detectFullOffscreenCanvasSupport = () => {\r\n  if (typeof OffscreenCanvas === 'undefined') return false\r\n  try {\r\n    const canvas = new OffscreenCanvas(1, 1)\r\n    // Try to get a WebGL context - this will fail on iOS where only 2D is supported (iOS 16)\r\n    const gl = canvas.getContext('webgl2') || canvas.getContext('webgl')\r\n    return gl !== null\r\n  } catch (e) {\r\n    return false\r\n  }\r\n}\r\n\r\nconst hasFullOffscreenCanvasSupport = detectFullOffscreenCanvasSupport()\r\n\r\nexport const createCanvas = (width: number, height: number): OffscreenCanvas => {\r\n  if (hasFullOffscreenCanvasSupport) {\r\n    return new OffscreenCanvas(width, height)\r\n  }\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = width\r\n  canvas.height = height\r\n  return canvas as unknown as OffscreenCanvas // todo-low\r\n}\r\n\r\nexport async function loadImageFromUrl (imageUrl: string): Promise<ImageBitmap> {\r\n  const response = await fetch(imageUrl)\r\n  const blob = await response.blob()\r\n  return createImageBitmap(blob)\r\n}\r\n","import { loadSkinToCanvas } from 'skinview-utils'\r\nimport { createCanvas, loadImageFromUrl } from '../utils'\r\n\r\nexport { default as stevePngUrl } from 'mc-assets/dist/other-textures/latest/entity/player/wide/steve.png'\r\n\r\nconst config = {\r\n  apiEnabled: true,\r\n}\r\n\r\nexport const setSkinsConfig = (newConfig: Partial<typeof config>) => {\r\n  Object.assign(config, newConfig)\r\n}\r\n\r\nexport async function loadSkinFromUsername (username: string, type: 'skin' | 'cape'): Promise<string | undefined> {\r\n  if (!config.apiEnabled) return\r\n\r\n  if (type === 'cape') return\r\n  const url = `https://playerdb.co/api/player/minecraft/${username}`\r\n  const response = await fetch(url)\r\n  if (!response.ok) return\r\n\r\n  const data: {\r\n    data: {\r\n      player: {\r\n        skin_texture: string\r\n      }\r\n    }\r\n  } = await response.json()\r\n  return data.data.player.skin_texture\r\n}\r\n\r\nexport const parseSkinTexturesValue = (value: string) => {\r\n  const decodedData: {\r\n    textures: {\r\n      SKIN: {\r\n        url: string\r\n      }\r\n    }\r\n  } = JSON.parse(Buffer.from(value, 'base64').toString())\r\n  return decodedData.textures?.SKIN?.url\r\n}\r\n\r\nexport async function loadSkinImage (skinUrl: string): Promise<{ canvas: OffscreenCanvas, image: ImageBitmap }> {\r\n  if (!skinUrl.startsWith('data:')) {\r\n    skinUrl = await fetchAndConvertBase64Skin(skinUrl.replace('http://', 'https://'))\r\n  }\r\n\r\n  const image = await loadImageFromUrl(skinUrl)\r\n  const skinCanvas = createCanvas(64, 64)\r\n  loadSkinToCanvas(skinCanvas, image)\r\n  return { canvas: skinCanvas, image }\r\n}\r\n\r\nconst fetchAndConvertBase64Skin = async (skinUrl: string) => {\r\n  const response = await fetch(skinUrl, { })\r\n  const arrayBuffer = await response.arrayBuffer()\r\n  const base64 = Buffer.from(arrayBuffer).toString('base64')\r\n  return `data:image/png;base64,${base64}`\r\n}\r\n","export const dynamicMcDataFiles = ['blocks', 'blockCollisionShapes', 'biomes', 'version']\r\n","export function buildCleanupDecorator (cleanupMethod: string) {\r\n  return function () {\r\n    return function (_target: { snapshotInitialValues }, propertyKey: string) {\r\n      const target = _target as any\r\n      // Store the initial value of the property\r\n      if (!target._snapshotMethodPatched) {\r\n        target.snapshotInitialValues = function () {\r\n          this._initialValues = {}\r\n          for (const key of target._toCleanup) {\r\n            this._initialValues[key] = this[key]\r\n          }\r\n        }\r\n        target._snapshotMethodPatched = true\r\n      }\r\n      (target._toCleanup ??= []).push(propertyKey)\r\n      if (!target._cleanupPatched) {\r\n        const originalMethod = target[cleanupMethod]\r\n        target[cleanupMethod] = function () {\r\n          for (const key of target._toCleanup) {\r\n            this[key] = this._initialValues[key]\r\n          }\r\n          // eslint-disable-next-line prefer-rest-params\r\n          Reflect.apply(originalMethod, this, arguments)\r\n        }\r\n      }\r\n      target._cleanupPatched = true\r\n    }\r\n  }\r\n}\r\n","/* eslint-disable guard-for-in */\r\nimport { EventEmitter } from 'events'\r\nimport { Vec3 } from 'vec3'\r\nimport mcDataRaw from 'minecraft-data/data.js' // note: using alias\r\nimport TypedEmitter from 'typed-emitter'\r\nimport { WorldBlockProvider } from 'mc-assets/dist/worldBlockProvider'\r\nimport { generateSpiralMatrix } from 'flying-squid/dist/utils'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { proxy } from 'valtio'\r\nimport { dynamicMcDataFiles } from '../../buildMesherConfig.mjs'\r\nimport type { ResourcesManagerTransferred } from '../../../src/resourcesManager'\r\nimport { DisplayWorldOptions, GraphicsInitOptions, RendererReactiveState } from '../../../src/appViewer'\r\nimport { SoundSystem } from '../three/threeJsSound'\r\nimport { buildCleanupDecorator } from './cleanupDecorator'\r\nimport { HighestBlockInfo, CustomBlockModels, BlockStateModelInfo, getBlockAssetsCacheKey, MesherConfig, MesherMainEvent } from './mesher/shared'\r\nimport { chunkPos } from './simpleUtils'\r\nimport { addNewStat, removeAllStats, updatePanesVisibility, updateStatText } from './ui/newStats'\r\nimport { WorldDataEmitterWorker } from './worldDataEmitter'\r\nimport { getPlayerStateUtils, PlayerStateReactive, PlayerStateRenderer, PlayerStateUtils } from './basePlayerState'\r\nimport { MesherLogReader } from './mesherlogReader'\r\nimport { setSkinsConfig } from './utils/skins'\r\n\r\nfunction mod (x, n) {\r\n  return ((x % n) + n) % n\r\n}\r\n\r\nconst toMajorVersion = version => {\r\n  const [a, b] = (String(version)).split('.')\r\n  return `${a}.${b}`\r\n}\r\n\r\nexport const worldCleanup = buildCleanupDecorator('resetWorld')\r\n\r\nexport const defaultWorldRendererConfig = {\r\n  // Debug settings\r\n  showChunkBorders: false,\r\n  enableDebugOverlay: false,\r\n  debugModelVariant: undefined as undefined | number[],\r\n\r\n  // Performance settings\r\n  mesherWorkers: 4,\r\n  addChunksBatchWaitTime: 200,\r\n  _experimentalSmoothChunkLoading: true,\r\n  _renderByChunks: false,\r\n\r\n  // Rendering engine settings\r\n  dayCycle: true,\r\n  smoothLighting: true,\r\n  enableLighting: true,\r\n  starfield: true,\r\n  defaultSkybox: true,\r\n  renderEntities: true,\r\n  extraBlockRenderers: true,\r\n  foreground: true,\r\n  fov: 75,\r\n  volume: 1,\r\n\r\n  // Camera visual related settings\r\n  showHand: false,\r\n  viewBobbing: false,\r\n  renderEars: true,\r\n  highlightBlockColor: 'blue',\r\n\r\n  // Player models\r\n  fetchPlayerSkins: true,\r\n  skinTexturesProxy: undefined as string | undefined,\r\n\r\n  // VR settings\r\n  vrSupport: true,\r\n  vrPageGameRendering: true,\r\n\r\n  // World settings\r\n  clipWorldBelowY: undefined as number | undefined,\r\n  isPlayground: false,\r\n  instantCameraUpdate: false\r\n}\r\n\r\nexport type WorldRendererConfig = typeof defaultWorldRendererConfig\r\n\r\nexport abstract class WorldRendererCommon<WorkerSend = any, WorkerReceive = any> {\r\n  worldReadyResolvers = Promise.withResolvers<void>()\r\n  worldReadyPromise = this.worldReadyResolvers.promise\r\n  timeOfTheDay = 0\r\n  worldSizeParams = { minY: 0, worldHeight: 256 }\r\n  reactiveDebugParams = proxy({\r\n    stopRendering: false,\r\n    chunksRenderAboveOverride: undefined as number | undefined,\r\n    chunksRenderAboveEnabled: false,\r\n    chunksRenderBelowOverride: undefined as number | undefined,\r\n    chunksRenderBelowEnabled: false,\r\n    chunksRenderDistanceOverride: undefined as number | undefined,\r\n    chunksRenderDistanceEnabled: false,\r\n    disableEntities: false,\r\n    // disableParticles: false\r\n  })\r\n\r\n  active = false\r\n\r\n  // #region CHUNK & SECTIONS TRACKING\r\n  @worldCleanup()\r\n  loadedChunks = {} as Record<string, boolean> // data is added for these chunks and they might be still processing\r\n\r\n  @worldCleanup()\r\n  finishedChunks = {} as Record<string, boolean> // these chunks are fully loaded into the world (scene)\r\n\r\n  @worldCleanup()\r\n  finishedSections = {} as Record<string, boolean> // these sections are fully loaded into the world (scene)\r\n\r\n  @worldCleanup()\r\n  // loading sections (chunks)\r\n  sectionsWaiting = new Map<string, number>()\r\n\r\n  @worldCleanup()\r\n  queuedChunks = new Set<string>()\r\n  queuedFunctions = [] as Array<() => void>\r\n  // #endregion\r\n\r\n  renderUpdateEmitter = new EventEmitter() as unknown as TypedEmitter<{\r\n    dirty (pos: Vec3, value: boolean): void\r\n    update (/* pos: Vec3, value: boolean */): void\r\n    chunkFinished (key: string): void\r\n    heightmap (key: string, heightmap: Uint8Array): void\r\n  }>\r\n  customTexturesDataUrl = undefined as string | undefined\r\n  workers: any[] = []\r\n  viewerChunkPosition?: Vec3\r\n  lastCamUpdate = 0\r\n  droppedFpsPercentage = 0\r\n  initialChunkLoadWasStartedIn: number | undefined\r\n  initialChunksLoad = true\r\n  enableChunksLoadDelay = false\r\n  texturesVersion?: string\r\n  viewDistance = -1\r\n  chunksLength = 0\r\n  allChunksFinished = false\r\n  messageQueue: any[] = []\r\n  isProcessingQueue = false\r\n  ONMESSAGE_TIME_LIMIT = 30 // ms\r\n\r\n  handleResize = () => { }\r\n  highestBlocksByChunks = new Map<string, { [chunkKey: string]: HighestBlockInfo }>()\r\n  blockEntities = {}\r\n\r\n  workersProcessAverageTime = 0\r\n  workersProcessAverageTimeCount = 0\r\n  maxWorkersProcessTime = 0\r\n  geometryReceiveCount = {} as Record<number, number>\r\n  allLoadedIn: undefined | number\r\n  onWorldSwitched = [] as Array<() => void>\r\n  renderTimeMax = 0\r\n  renderTimeAvg = 0\r\n  renderTimeAvgCount = 0\r\n  edgeChunks = {} as Record<string, boolean>\r\n  lastAddChunk = null as null | {\r\n    timeout: any\r\n    x: number\r\n    z: number\r\n  }\r\n  neighborChunkUpdates = true\r\n  lastChunkDistance = 0\r\n  debugStopGeometryUpdate = false\r\n\r\n  protocolCustomBlocks = new Map<string, CustomBlockModels>()\r\n\r\n  @worldCleanup()\r\n  blockStateModelInfo = new Map<string, BlockStateModelInfo>()\r\n\r\n  abstract outputFormat: 'threeJs' | 'webgpu'\r\n  worldBlockProvider: WorldBlockProvider\r\n  soundSystem: SoundSystem | undefined\r\n\r\n  abstract changeBackgroundColor (color: [number, number, number]): void\r\n\r\n  worldRendererConfig: WorldRendererConfig\r\n  playerStateReactive: PlayerStateReactive\r\n  playerStateUtils: PlayerStateUtils\r\n  reactiveState: RendererReactiveState\r\n  mesherLogReader: MesherLogReader | undefined\r\n  forceCallFromMesherReplayer = false\r\n  stopMesherMessagesProcessing = false\r\n\r\n  abortController = new AbortController()\r\n  lastRendered = 0\r\n  renderingActive = true\r\n  geometryReceiveCountPerSec = 0\r\n  mesherLogger = {\r\n    contents: [] as string[],\r\n    active: new URL(location.href).searchParams.get('mesherlog') === 'true'\r\n  }\r\n  currentRenderedFrames = 0\r\n  fpsAverage = 0\r\n  lastFps = 0\r\n  fpsWorst = undefined as number | undefined\r\n  fpsSamples = 0\r\n  mainThreadRendering = true\r\n  backendInfoReport = '-'\r\n  chunksFullInfo = '-'\r\n  workerCustomHandleTime = 0\r\n\r\n  get version () {\r\n    return this.displayOptions.version\r\n  }\r\n\r\n  get displayAdvancedStats () {\r\n    return (this.initOptions.config.statsVisible ?? 0) > 1\r\n  }\r\n\r\n  constructor (public readonly resourcesManager: ResourcesManagerTransferred, public displayOptions: DisplayWorldOptions, public initOptions: GraphicsInitOptions) {\r\n    this.snapshotInitialValues()\r\n    this.worldRendererConfig = displayOptions.inWorldRenderingConfig\r\n    this.playerStateReactive = displayOptions.playerStateReactive\r\n    this.playerStateUtils = getPlayerStateUtils(this.playerStateReactive)\r\n    this.reactiveState = displayOptions.rendererState\r\n    // this.mesherLogReader = new MesherLogReader(this)\r\n    this.renderUpdateEmitter.on('update', () => {\r\n      const loadedChunks = Object.keys(this.finishedChunks).length\r\n      updateStatText('loaded-chunks', `${loadedChunks}/${this.chunksLength} chunks (${this.lastChunkDistance}/${this.viewDistance})`)\r\n    })\r\n\r\n    addNewStat('downloaded-chunks', 100, 140, 20)\r\n\r\n    this.connect(this.displayOptions.worldView)\r\n\r\n    const interval = setInterval(() => {\r\n      this.geometryReceiveCountPerSec = Object.values(this.geometryReceiveCount).reduce((acc, curr) => acc + curr, 0)\r\n      this.geometryReceiveCount = {}\r\n      updatePanesVisibility(this.displayAdvancedStats)\r\n      this.updateChunksStats()\r\n      if (this.mainThreadRendering) {\r\n        this.fpsUpdate()\r\n      }\r\n    }, 500)\r\n    this.abortController.signal.addEventListener('abort', () => {\r\n      clearInterval(interval)\r\n    })\r\n  }\r\n\r\n  fpsUpdate () {\r\n    this.fpsSamples++\r\n    this.fpsAverage = (this.fpsAverage * (this.fpsSamples - 1) + this.currentRenderedFrames) / this.fpsSamples\r\n    if (this.fpsWorst === undefined) {\r\n      this.fpsWorst = this.currentRenderedFrames\r\n    } else {\r\n      this.fpsWorst = Math.min(this.fpsWorst, this.currentRenderedFrames)\r\n    }\r\n    this.lastFps = this.currentRenderedFrames\r\n    this.currentRenderedFrames = 0\r\n  }\r\n\r\n  logWorkerWork (message: string | (() => string)) {\r\n    if (!this.mesherLogger.active) return\r\n    this.mesherLogger.contents.push(typeof message === 'function' ? message() : message)\r\n  }\r\n\r\n  async init () {\r\n    if (this.active) throw new Error('WorldRendererCommon is already initialized')\r\n\r\n    await Promise.all([\r\n      this.resetWorkers(),\r\n      (async () => {\r\n        if (this.resourcesManager.currentResources?.allReady) {\r\n          await this.updateAssetsData()\r\n        }\r\n      })()\r\n    ])\r\n\r\n    this.resourcesManager.on('assetsTexturesUpdated', async () => {\r\n      if (!this.active) return\r\n      await this.updateAssetsData()\r\n    })\r\n\r\n    this.watchReactivePlayerState()\r\n    this.watchReactiveConfig()\r\n    this.worldReadyResolvers.resolve()\r\n  }\r\n\r\n  snapshotInitialValues () { }\r\n\r\n  wasChunkSentToWorker (chunkKey: string) {\r\n    return this.loadedChunks[chunkKey]\r\n  }\r\n\r\n  async getHighestBlocks (chunkKey: string) {\r\n    return this.highestBlocksByChunks.get(chunkKey)\r\n  }\r\n\r\n  updateCustomBlock (chunkKey: string, blockPos: string, model: string) {\r\n    this.protocolCustomBlocks.set(chunkKey, {\r\n      ...this.protocolCustomBlocks.get(chunkKey),\r\n      [blockPos]: model\r\n    })\r\n    this.logWorkerWork(() => `-> updateCustomBlock ${chunkKey} ${blockPos} ${model} ${this.wasChunkSentToWorker(chunkKey)}`)\r\n    if (this.wasChunkSentToWorker(chunkKey)) {\r\n      const [x, y, z] = blockPos.split(',').map(Number)\r\n      this.setBlockStateId(new Vec3(x, y, z), undefined)\r\n    }\r\n  }\r\n\r\n  async getBlockInfo (blockPos: { x: number, y: number, z: number }, stateId: number) {\r\n    const chunkKey = `${Math.floor(blockPos.x / 16) * 16},${Math.floor(blockPos.z / 16) * 16}`\r\n    const customBlockName = this.protocolCustomBlocks.get(chunkKey)?.[`${blockPos.x},${blockPos.y},${blockPos.z}`]\r\n    const cacheKey = getBlockAssetsCacheKey(stateId, customBlockName)\r\n    const modelInfo = this.blockStateModelInfo.get(cacheKey)\r\n    return {\r\n      customBlockName,\r\n      modelInfo\r\n    }\r\n  }\r\n\r\n  initWorkers (numWorkers = this.worldRendererConfig.mesherWorkers) {\r\n    // init workers\r\n    for (let i = 0; i < numWorkers + 1; i++) {\r\n      const worker = initMesherWorker((data) => {\r\n        if (Array.isArray(data)) {\r\n          this.messageQueue.push(...data)\r\n        } else {\r\n          this.messageQueue.push(data)\r\n        }\r\n        void this.processMessageQueue('worker')\r\n      })\r\n      this.workers.push(worker)\r\n    }\r\n  }\r\n\r\n  onReactivePlayerStateUpdated<T extends keyof PlayerStateReactive>(key: T, callback: (value: PlayerStateReactive[T]) => void, initial = true) {\r\n    if (initial) {\r\n      callback(this.playerStateReactive[key])\r\n    }\r\n    subscribeKey(this.playerStateReactive, key, callback)\r\n  }\r\n\r\n  onReactiveConfigUpdated<T extends keyof typeof this.worldRendererConfig>(key: T, callback: (value: typeof this.worldRendererConfig[T]) => void) {\r\n    callback(this.worldRendererConfig[key])\r\n    subscribeKey(this.worldRendererConfig, key, callback)\r\n  }\r\n\r\n  onReactiveDebugUpdated<T extends keyof typeof this.reactiveDebugParams>(key: T, callback: (value: typeof this.reactiveDebugParams[T]) => void) {\r\n    callback(this.reactiveDebugParams[key])\r\n    subscribeKey(this.reactiveDebugParams, key, callback)\r\n  }\r\n\r\n  watchReactivePlayerState () {\r\n    this.onReactivePlayerStateUpdated('backgroundColor', (value) => {\r\n      this.changeBackgroundColor(value)\r\n    })\r\n  }\r\n\r\n  watchReactiveConfig () {\r\n    this.onReactiveConfigUpdated('fetchPlayerSkins', (value) => {\r\n      setSkinsConfig({ apiEnabled: value })\r\n    })\r\n  }\r\n\r\n  async processMessageQueue (source: string) {\r\n    if (this.isProcessingQueue || this.messageQueue.length === 0) return\r\n    this.logWorkerWork(`# ${source} processing queue`)\r\n    if (this.lastRendered && performance.now() - this.lastRendered > this.ONMESSAGE_TIME_LIMIT && this.worldRendererConfig._experimentalSmoothChunkLoading && this.renderingActive) {\r\n      const start = performance.now()\r\n      await new Promise(resolve => {\r\n        requestAnimationFrame(resolve)\r\n      })\r\n      this.logWorkerWork(`# processing got delayed by ${performance.now() - start}ms`)\r\n    }\r\n    this.isProcessingQueue = true\r\n\r\n    const startTime = performance.now()\r\n    let processedCount = 0\r\n\r\n    while (this.messageQueue.length > 0) {\r\n      const processingStopped = this.stopMesherMessagesProcessing\r\n      if (!processingStopped) {\r\n        const data = this.messageQueue.shift()!\r\n        this.handleMessage(data)\r\n        processedCount++\r\n      }\r\n\r\n      // Check if we've exceeded the time limit\r\n      if (processingStopped || (performance.now() - startTime > this.ONMESSAGE_TIME_LIMIT && this.renderingActive && this.worldRendererConfig._experimentalSmoothChunkLoading)) {\r\n        // If we have more messages and exceeded time limit, schedule next batch\r\n        if (this.messageQueue.length > 0) {\r\n          requestAnimationFrame(async () => {\r\n            this.isProcessingQueue = false\r\n            void this.processMessageQueue('queue-delay')\r\n          })\r\n          return\r\n        }\r\n        break\r\n      }\r\n    }\r\n\r\n    this.isProcessingQueue = false\r\n  }\r\n\r\n  handleMessage (rawData: any) {\r\n    const data = rawData as MesherMainEvent\r\n    if (!this.active) return\r\n    this.mesherLogReader?.workerMessageReceived(data.type, data)\r\n    if (data.type !== 'geometry' || !this.debugStopGeometryUpdate) {\r\n      const start = performance.now()\r\n      this.handleWorkerMessage(data as WorkerReceive)\r\n      this.workerCustomHandleTime += performance.now() - start\r\n    }\r\n    if (data.type === 'geometry') {\r\n      this.logWorkerWork(() => `-> ${data.workerIndex} geometry ${data.key} ${JSON.stringify({ dataSize: JSON.stringify(data).length })}`)\r\n      this.geometryReceiveCount[data.workerIndex] ??= 0\r\n      this.geometryReceiveCount[data.workerIndex]++\r\n      const chunkCoords = data.key.split(',').map(Number)\r\n      this.lastChunkDistance = Math.max(...this.getDistance(new Vec3(chunkCoords[0], 0, chunkCoords[2])))\r\n    }\r\n    if (data.type === 'sectionFinished') { // on after load & unload section\r\n      this.logWorkerWork(`<- ${data.workerIndex} sectionFinished ${data.key} ${JSON.stringify({ processTime: data.processTime })}`)\r\n      if (!this.sectionsWaiting.has(data.key)) throw new Error(`sectionFinished event for non-outstanding section ${data.key}`)\r\n      this.sectionsWaiting.set(data.key, this.sectionsWaiting.get(data.key)! - 1)\r\n      if (this.sectionsWaiting.get(data.key) === 0) {\r\n        this.sectionsWaiting.delete(data.key)\r\n        this.finishedSections[data.key] = true\r\n      }\r\n\r\n      const chunkCoords = data.key.split(',').map(Number)\r\n      const chunkKey = `${chunkCoords[0]},${chunkCoords[2]}`\r\n      if (this.loadedChunks[chunkKey]) { // ensure chunk data was added, not a neighbor chunk update\r\n        let loaded = true\r\n        for (let y = this.worldMinYRender; y < this.worldSizeParams.worldHeight; y += 16) {\r\n          if (!this.finishedSections[`${chunkCoords[0]},${y},${chunkCoords[2]}`]) {\r\n            loaded = false\r\n            break\r\n          }\r\n        }\r\n        if (loaded) {\r\n          // CHUNK FINISHED\r\n          this.finishedChunks[chunkKey] = true\r\n          this.reactiveState.world.chunksLoaded.add(`${Math.floor(chunkCoords[0] / 16)},${Math.floor(chunkCoords[2] / 16)}`)\r\n          this.renderUpdateEmitter.emit(`chunkFinished`, `${chunkCoords[0]},${chunkCoords[2]}`)\r\n          this.checkAllFinished()\r\n          // merge highest blocks by sections into highest blocks by chunks\r\n          // for (let y = this.worldMinYRender; y < this.worldSizeParams.worldHeight; y += 16) {\r\n          //   const sectionKey = `${chunkCoords[0]},${y},${chunkCoords[2]}`\r\n          //   for (let x = 0; x < 16; x++) {\r\n          //     for (let z = 0; z < 16; z++) {\r\n          //       const posInsideKey = `${chunkCoords[0] + x},${chunkCoords[2] + z}`\r\n          //       let block = null as HighestBlockInfo | null\r\n          //       const highestBlock = this.highestBlocksBySections[sectionKey]?.[posInsideKey]\r\n          //       if (!highestBlock) continue\r\n          //       if (!block || highestBlock.y > block.y) {\r\n          //         block = highestBlock\r\n          //       }\r\n          //       if (block) {\r\n          //         this.highestBlocksByChunks[chunkKey] ??= {}\r\n          //         this.highestBlocksByChunks[chunkKey][posInsideKey] = block\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   delete this.highestBlocksBySections[sectionKey]\r\n          // }\r\n        }\r\n      }\r\n\r\n      this.renderUpdateEmitter.emit('update')\r\n      if (data.processTime) {\r\n        this.workersProcessAverageTimeCount++\r\n        this.workersProcessAverageTime = ((this.workersProcessAverageTime * (this.workersProcessAverageTimeCount - 1)) + data.processTime) / this.workersProcessAverageTimeCount\r\n        this.maxWorkersProcessTime = Math.max(this.maxWorkersProcessTime, data.processTime)\r\n      }\r\n    }\r\n\r\n    if (data.type === 'blockStateModelInfo') {\r\n      for (const [cacheKey, info] of Object.entries(data.info)) {\r\n        this.blockStateModelInfo.set(cacheKey, info)\r\n      }\r\n    }\r\n\r\n    if (data.type === 'heightmap') {\r\n      this.reactiveState.world.heightmaps.set(data.key, new Uint8Array(data.heightmap))\r\n    }\r\n  }\r\n\r\n  downloadMesherLog () {\r\n    const a = document.createElement('a')\r\n    a.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(this.mesherLogger.contents.join('\\n'))\r\n    a.download = 'mesher.log'\r\n    a.click()\r\n  }\r\n\r\n  checkAllFinished () {\r\n    if (this.sectionsWaiting.size === 0) {\r\n      this.reactiveState.world.mesherWork = false\r\n    }\r\n    // todo check exact surrounding chunks\r\n    const allFinished = Object.keys(this.finishedChunks).length >= this.chunksLength\r\n    if (allFinished) {\r\n      this.allChunksLoaded?.()\r\n      this.allChunksFinished = true\r\n      this.allLoadedIn ??= Date.now() - this.initialChunkLoadWasStartedIn!\r\n    }\r\n    this.updateChunksStats()\r\n  }\r\n\r\n  changeHandSwingingState (isAnimationPlaying: boolean, isLeftHand: boolean): void { }\r\n\r\n  abstract handleWorkerMessage (data: WorkerReceive): void\r\n\r\n  abstract updateCamera (pos: Vec3 | null, yaw: number, pitch: number): void\r\n\r\n  abstract render (): void\r\n\r\n  /**\r\n   * Optionally update data that are depedendent on the viewer position\r\n   */\r\n  updatePosDataChunk? (key: string): void\r\n\r\n  allChunksLoaded? (): void\r\n\r\n  timeUpdated? (newTime: number): void\r\n\r\n  biomeUpdated? (biome: any): void\r\n\r\n  biomeReset? (): void\r\n\r\n  updateViewerPosition (pos: Vec3) {\r\n    this.viewerChunkPosition = pos\r\n    for (const [key, value] of Object.entries(this.loadedChunks)) {\r\n      if (!value) continue\r\n      this.updatePosDataChunk?.(key)\r\n    }\r\n  }\r\n\r\n  sendWorkers (message: WorkerSend) {\r\n    for (const worker of this.workers) {\r\n      worker.postMessage(message)\r\n    }\r\n  }\r\n\r\n  getDistance (posAbsolute: Vec3) {\r\n    const [botX, botZ] = chunkPos(this.viewerChunkPosition!)\r\n    const dx = Math.abs(botX - Math.floor(posAbsolute.x / 16))\r\n    const dz = Math.abs(botZ - Math.floor(posAbsolute.z / 16))\r\n    return [dx, dz] as [number, number]\r\n  }\r\n\r\n  abstract updateShowChunksBorder (value: boolean): void\r\n\r\n  resetWorld () {\r\n    // destroy workers\r\n    for (const worker of this.workers) {\r\n      worker.terminate()\r\n    }\r\n    this.workers = []\r\n  }\r\n\r\n  async resetWorkers () {\r\n    this.resetWorld()\r\n\r\n    // for workers in single file build\r\n    if (typeof document !== 'undefined' && document?.readyState === 'loading') {\r\n      await new Promise(resolve => {\r\n        document.addEventListener('DOMContentLoaded', resolve)\r\n      })\r\n    }\r\n\r\n    this.initWorkers()\r\n    this.active = true\r\n\r\n    this.sendMesherMcData()\r\n  }\r\n\r\n  getMesherConfig (): MesherConfig {\r\n    let skyLight = 15\r\n    const timeOfDay = this.timeOfTheDay\r\n    if (timeOfDay < 0 || timeOfDay > 24_000) {\r\n      //\r\n    } else if (timeOfDay <= 6000 || timeOfDay >= 18_000) {\r\n      skyLight = 15\r\n    } else if (timeOfDay > 6000 && timeOfDay < 12_000) {\r\n      skyLight = 15 - ((timeOfDay - 6000) / 6000) * 15\r\n    } else if (timeOfDay >= 12_000 && timeOfDay < 18_000) {\r\n      skyLight = ((timeOfDay - 12_000) / 6000) * 15\r\n    }\r\n\r\n    skyLight = Math.floor(skyLight)\r\n    return {\r\n      version: this.version,\r\n      enableLighting: this.worldRendererConfig.enableLighting,\r\n      skyLight,\r\n      smoothLighting: this.worldRendererConfig.smoothLighting,\r\n      outputFormat: this.outputFormat,\r\n      // textureSize: this.resourcesManager.currentResources!.blocksAtlasParser.atlas.latest.width,\r\n      debugModelVariant: this.worldRendererConfig.debugModelVariant,\r\n      clipWorldBelowY: this.worldRendererConfig.clipWorldBelowY,\r\n      disableBlockEntityTextures: !this.worldRendererConfig.extraBlockRenderers,\r\n      worldMinY: this.worldMinYRender,\r\n      worldMaxY: this.worldMinYRender + this.worldSizeParams.worldHeight,\r\n    }\r\n  }\r\n\r\n  sendMesherMcData () {\r\n    const allMcData = mcDataRaw.pc[this.version] ?? mcDataRaw.pc[toMajorVersion(this.version)]\r\n    const mcData = {\r\n      version: JSON.parse(JSON.stringify(allMcData.version))\r\n    }\r\n    for (const key of dynamicMcDataFiles) {\r\n      mcData[key] = allMcData[key]\r\n    }\r\n\r\n    for (const worker of this.workers) {\r\n      worker.postMessage({ type: 'mcData', mcData, config: this.getMesherConfig() })\r\n    }\r\n    this.logWorkerWork('# mcData sent')\r\n  }\r\n\r\n  async updateAssetsData () {\r\n    const resources = this.resourcesManager.currentResources\r\n\r\n    if (this.workers.length === 0) throw new Error('workers not initialized yet')\r\n    for (const [i, worker] of this.workers.entries()) {\r\n      const { blockstatesModels } = resources\r\n\r\n      worker.postMessage({\r\n        type: 'mesherData',\r\n        workerIndex: i,\r\n        blocksAtlas: {\r\n          latest: resources.blocksAtlasJson\r\n        },\r\n        blockstatesModels,\r\n        config: this.getMesherConfig(),\r\n      })\r\n    }\r\n\r\n    this.logWorkerWork('# mesherData sent')\r\n    console.log('textures loaded')\r\n  }\r\n\r\n  get worldMinYRender () {\r\n    return Math.floor(Math.max(this.worldSizeParams.minY, this.worldRendererConfig.clipWorldBelowY ?? -Infinity) / 16) * 16\r\n  }\r\n\r\n  updateChunksStats () {\r\n    const loadedChunks = Object.keys(this.finishedChunks)\r\n    this.displayOptions.nonReactiveState.world.chunksLoaded = new Set(loadedChunks)\r\n    this.displayOptions.nonReactiveState.world.chunksTotalNumber = this.chunksLength\r\n    this.reactiveState.world.allChunksLoaded = this.allChunksFinished\r\n\r\n    const text = `Q: ${this.messageQueue.length} ${Object.keys(this.loadedChunks).length}/${Object.keys(this.finishedChunks).length}/${this.chunksLength} chunks (${this.workers.length}:${this.workersProcessAverageTime.toFixed(0)}ms/${this.geometryReceiveCountPerSec}ss/${this.allLoadedIn?.toFixed(1) ?? '-'}s)`\r\n    this.chunksFullInfo = text\r\n    updateStatText('downloaded-chunks', text)\r\n  }\r\n\r\n  addColumn (x: number, z: number, chunk: any, isLightUpdate: boolean) {\r\n    if (!this.active) return\r\n    if (this.workers.length === 0) throw new Error('workers not initialized yet')\r\n    this.initialChunksLoad = false\r\n    this.initialChunkLoadWasStartedIn ??= Date.now()\r\n    this.loadedChunks[`${x},${z}`] = true\r\n    this.updateChunksStats()\r\n\r\n    const chunkKey = `${x},${z}`\r\n    const customBlockModels = this.protocolCustomBlocks.get(chunkKey)\r\n\r\n    for (const worker of this.workers) {\r\n      worker.postMessage({\r\n        type: 'chunk',\r\n        x,\r\n        z,\r\n        chunk,\r\n        customBlockModels: customBlockModels || undefined\r\n      })\r\n    }\r\n    this.workers[0].postMessage({\r\n      type: 'getHeightmap',\r\n      x,\r\n      z,\r\n    })\r\n    this.logWorkerWork(() => `-> chunk ${JSON.stringify({ x, z, chunkLength: chunk.length, customBlockModelsLength: customBlockModels ? Object.keys(customBlockModels).length : 0 })}`)\r\n    this.mesherLogReader?.chunkReceived(x, z, chunk.length)\r\n    for (let y = this.worldMinYRender; y < this.worldSizeParams.worldHeight; y += 16) {\r\n      const loc = new Vec3(x, y, z)\r\n      this.setSectionDirty(loc)\r\n      if (this.neighborChunkUpdates && (!isLightUpdate || this.worldRendererConfig.smoothLighting)) {\r\n        this.setSectionDirty(loc.offset(-16, 0, 0))\r\n        this.setSectionDirty(loc.offset(16, 0, 0))\r\n        this.setSectionDirty(loc.offset(0, 0, -16))\r\n        this.setSectionDirty(loc.offset(0, 0, 16))\r\n      }\r\n    }\r\n  }\r\n\r\n  markAsLoaded (x, z) {\r\n    this.loadedChunks[`${x},${z}`] = true\r\n    this.finishedChunks[`${x},${z}`] = true\r\n    this.logWorkerWork(`-> markAsLoaded ${JSON.stringify({ x, z })}`)\r\n    this.checkAllFinished()\r\n  }\r\n\r\n  removeColumn (x, z) {\r\n    delete this.loadedChunks[`${x},${z}`]\r\n    for (const worker of this.workers) {\r\n      worker.postMessage({ type: 'unloadChunk', x, z })\r\n    }\r\n    this.logWorkerWork(`-> unloadChunk ${JSON.stringify({ x, z })}`)\r\n    delete this.finishedChunks[`${x},${z}`]\r\n    this.allChunksFinished = Object.keys(this.finishedChunks).length === this.chunksLength\r\n    if (Object.keys(this.finishedChunks).length === 0) {\r\n      this.allLoadedIn = undefined\r\n      this.initialChunkLoadWasStartedIn = undefined\r\n    }\r\n    for (let y = this.worldSizeParams.minY; y < this.worldSizeParams.worldHeight; y += 16) {\r\n      this.setSectionDirty(new Vec3(x, y, z), false)\r\n      delete this.finishedSections[`${x},${y},${z}`]\r\n    }\r\n    this.highestBlocksByChunks.delete(`${x},${z}`)\r\n\r\n    this.updateChunksStats()\r\n\r\n    if (Object.keys(this.loadedChunks).length === 0) {\r\n      this.mesherLogger.contents = []\r\n      this.logWorkerWork('# all chunks unloaded. New log started')\r\n      void this.mesherLogReader?.maybeStartReplay()\r\n    }\r\n  }\r\n\r\n  setBlockStateId (pos: Vec3, stateId: number | undefined, needAoRecalculation = true) {\r\n    const set = async () => {\r\n      const sectionX = Math.floor(pos.x / 16) * 16\r\n      const sectionZ = Math.floor(pos.z / 16) * 16\r\n      if (this.queuedChunks.has(`${sectionX},${sectionZ}`)) {\r\n        await new Promise<void>(resolve => {\r\n          this.queuedFunctions.push(() => {\r\n            resolve()\r\n          })\r\n        })\r\n      }\r\n      if (!this.loadedChunks[`${sectionX},${sectionZ}`]) {\r\n        // console.debug('[should be unreachable] setBlockStateId called for unloaded chunk', pos)\r\n      }\r\n      this.setBlockStateIdInner(pos, stateId, needAoRecalculation)\r\n    }\r\n    void set()\r\n  }\r\n\r\n  updateEntity (e: any, isUpdate = false) { }\r\n\r\n  abstract updatePlayerEntity? (e: any): void\r\n\r\n  lightUpdate (chunkX: number, chunkZ: number) { }\r\n\r\n  connect (worldView: WorldDataEmitterWorker) {\r\n    const worldEmitter = worldView\r\n\r\n    worldEmitter.on('entity', (e) => {\r\n      this.updateEntity(e, false)\r\n    })\r\n    worldEmitter.on('entityMoved', (e) => {\r\n      this.updateEntity(e, true)\r\n    })\r\n    worldEmitter.on('playerEntity', (e) => {\r\n      this.updatePlayerEntity?.(e)\r\n    })\r\n\r\n    let currentLoadChunkBatch = null as {\r\n      timeout\r\n      data\r\n    } | null\r\n    worldEmitter.on('loadChunk', ({ x, z, chunk, worldConfig, isLightUpdate }) => {\r\n      this.worldSizeParams = worldConfig\r\n      this.queuedChunks.add(`${x},${z}`)\r\n      const args = [x, z, chunk, isLightUpdate]\r\n      if (!currentLoadChunkBatch) {\r\n        // add a setting to use debounce instead\r\n        currentLoadChunkBatch = {\r\n          data: [],\r\n          timeout: setTimeout(() => {\r\n            for (const args of currentLoadChunkBatch!.data) {\r\n              this.queuedChunks.delete(`${args[0]},${args[1]}`)\r\n              this.addColumn(...args as Parameters<typeof this.addColumn>)\r\n            }\r\n            for (const fn of this.queuedFunctions) {\r\n              fn()\r\n            }\r\n            this.queuedFunctions = []\r\n            currentLoadChunkBatch = null\r\n          }, this.worldRendererConfig.addChunksBatchWaitTime)\r\n        }\r\n      }\r\n      currentLoadChunkBatch.data.push(args)\r\n    })\r\n    // todo remove and use other architecture instead so data flow is clear\r\n    worldEmitter.on('blockEntities', (blockEntities) => {\r\n      this.blockEntities = blockEntities\r\n    })\r\n\r\n    worldEmitter.on('unloadChunk', ({ x, z }) => {\r\n      this.removeColumn(x, z)\r\n    })\r\n\r\n    worldEmitter.on('blockUpdate', ({ pos, stateId }) => {\r\n      this.setBlockStateId(new Vec3(pos.x, pos.y, pos.z), stateId)\r\n    })\r\n\r\n    worldEmitter.on('chunkPosUpdate', ({ pos }) => {\r\n      this.updateViewerPosition(pos)\r\n    })\r\n\r\n    worldEmitter.on('end', () => {\r\n      this.worldStop?.()\r\n    })\r\n\r\n\r\n    worldEmitter.on('renderDistance', (d) => {\r\n      this.viewDistance = d\r\n      this.chunksLength = d === 0 ? 1 : generateSpiralMatrix(d).length\r\n    })\r\n\r\n    worldEmitter.on('renderDistance', (d) => {\r\n      this.viewDistance = d\r\n      this.chunksLength = d === 0 ? 1 : generateSpiralMatrix(d).length\r\n      this.allChunksFinished = Object.keys(this.finishedChunks).length === this.chunksLength\r\n    })\r\n\r\n    worldEmitter.on('markAsLoaded', ({ x, z }) => {\r\n      this.markAsLoaded(x, z)\r\n    })\r\n\r\n    worldEmitter.on('updateLight', ({ pos }) => {\r\n      this.lightUpdate(pos.x, pos.z)\r\n    })\r\n\r\n    worldEmitter.on('onWorldSwitch', () => {\r\n      for (const fn of this.onWorldSwitched) {\r\n        try {\r\n          fn()\r\n        } catch (e) {\r\n          setTimeout(() => {\r\n            console.log('[Renderer Backend] Error in onWorldSwitched:')\r\n            throw e\r\n          }, 0)\r\n        }\r\n      }\r\n    })\r\n\r\n    worldEmitter.on('time', (timeOfDay) => {\r\n      if (!this.worldRendererConfig.dayCycle) return\r\n      this.timeUpdated?.(timeOfDay)\r\n\r\n      this.timeOfTheDay = timeOfDay\r\n\r\n      // if (this.worldRendererConfig.skyLight === skyLight) return\r\n      // this.worldRendererConfig.skyLight = skyLight\r\n      // if (this instanceof WorldRendererThree) {\r\n      //   (this).rerenderAllChunks?.()\r\n      // }\r\n    })\r\n\r\n    worldEmitter.on('biomeUpdate', ({ biome }) => {\r\n      this.biomeUpdated?.(biome)\r\n    })\r\n\r\n    worldEmitter.on('biomeReset', () => {\r\n      this.biomeReset?.()\r\n    })\r\n  }\r\n\r\n  setBlockStateIdInner (pos: Vec3, stateId: number | undefined, needAoRecalculation = true) {\r\n    const chunkKey = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.z / 16) * 16}`\r\n    const blockPosKey = `${pos.x},${pos.y},${pos.z}`\r\n    const customBlockModels = this.protocolCustomBlocks.get(chunkKey) || {}\r\n\r\n    for (const worker of this.workers) {\r\n      worker.postMessage({\r\n        type: 'blockUpdate',\r\n        pos,\r\n        stateId,\r\n        customBlockModels\r\n      })\r\n    }\r\n    this.logWorkerWork(`-> blockUpdate ${JSON.stringify({ pos, stateId, customBlockModels })}`)\r\n    this.setSectionDirty(pos, true, true)\r\n    if (this.neighborChunkUpdates) {\r\n      if ((pos.x & 15) === 0) this.setSectionDirty(pos.offset(-16, 0, 0), true, true)\r\n      if ((pos.x & 15) === 15) this.setSectionDirty(pos.offset(16, 0, 0), true, true)\r\n      if ((pos.y & 15) === 0) this.setSectionDirty(pos.offset(0, -16, 0), true, true)\r\n      if ((pos.y & 15) === 15) this.setSectionDirty(pos.offset(0, 16, 0), true, true)\r\n      if ((pos.z & 15) === 0) this.setSectionDirty(pos.offset(0, 0, -16), true, true)\r\n      if ((pos.z & 15) === 15) this.setSectionDirty(pos.offset(0, 0, 16), true, true)\r\n\r\n      if (needAoRecalculation) {\r\n        // top view neighbors\r\n        if ((pos.x & 15) === 0 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(-16, 0, -16), true, true)\r\n        if ((pos.x & 15) === 15 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(16, 0, -16), true, true)\r\n        if ((pos.x & 15) === 0 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(-16, 0, 16), true, true)\r\n        if ((pos.x & 15) === 15 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(16, 0, 16), true, true)\r\n\r\n        // side view neighbors (but ignore updates above)\r\n        // z view neighbors\r\n        if ((pos.x & 15) === 0 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(-16, -16, 0), true, true)\r\n        if ((pos.x & 15) === 15 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(16, -16, 0), true, true)\r\n\r\n        // x view neighbors\r\n        if ((pos.z & 15) === 0 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(0, -16, -16), true, true)\r\n        if ((pos.z & 15) === 15 && (pos.y & 15) === 0) this.setSectionDirty(pos.offset(0, -16, 16), true, true)\r\n\r\n        // x & z neighbors\r\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 0 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(-16, -16, -16), true, true)\r\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 15 && (pos.z & 15) === 0) this.setSectionDirty(pos.offset(16, -16, -16), true, true)\r\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 0 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(-16, -16, 16), true, true)\r\n        if ((pos.y & 15) === 0 && (pos.x & 15) === 15 && (pos.z & 15) === 15) this.setSectionDirty(pos.offset(16, -16, 16), true, true)\r\n      }\r\n    }\r\n  }\r\n\r\n  abstract worldStop? ()\r\n\r\n  queueAwaited = false\r\n  toWorkerMessagesQueue = {} as { [workerIndex: string]: any[] }\r\n\r\n  getWorkerNumber (pos: Vec3, updateAction = false) {\r\n    if (updateAction) {\r\n      const key = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.y / 16) * 16},${Math.floor(pos.z / 16) * 16}`\r\n      const cantUseChangeWorker = this.sectionsWaiting.get(key) && !this.finishedSections[key]\r\n      if (!cantUseChangeWorker) return 0\r\n    }\r\n\r\n    const hash = mod(Math.floor(pos.x / 16) + Math.floor(pos.y / 16) + Math.floor(pos.z / 16), this.workers.length - 1)\r\n    return hash + 1\r\n  }\r\n\r\n  async debugGetWorkerCustomBlockModel (pos: Vec3) {\r\n    const data = [] as Array<Promise<string>>\r\n    for (const worker of this.workers) {\r\n      data.push(new Promise((resolve) => {\r\n        worker.addEventListener('message', (e) => {\r\n          if (e.data.type === 'customBlockModel') {\r\n            resolve(e.data.customBlockModel)\r\n          }\r\n        })\r\n      }))\r\n      worker.postMessage({\r\n        type: 'getCustomBlockModel',\r\n        pos\r\n      })\r\n    }\r\n    return Promise.all(data)\r\n  }\r\n\r\n  setSectionDirty (pos: Vec3, value = true, useChangeWorker = false) { // value false is used for unloading chunks\r\n    if (!this.forceCallFromMesherReplayer && this.mesherLogReader) return\r\n\r\n    if (this.viewDistance === -1) throw new Error('viewDistance not set')\r\n    this.reactiveState.world.mesherWork = true\r\n    const distance = this.getDistance(pos)\r\n    // todo shouldnt we check loadedChunks instead?\r\n    if (!this.workers.length || distance[0] > this.viewDistance || distance[1] > this.viewDistance) return\r\n    const key = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.y / 16) * 16},${Math.floor(pos.z / 16) * 16}`\r\n    // if (this.sectionsOutstanding.has(key)) return\r\n    this.renderUpdateEmitter.emit('dirty', pos, value)\r\n    // Dispatch sections to workers based on position\r\n    // This guarantees uniformity accross workers and that a given section\r\n    // is always dispatched to the same worker\r\n    const hash = this.getWorkerNumber(pos, useChangeWorker && this.mesherLogger.active)\r\n    this.sectionsWaiting.set(key, (this.sectionsWaiting.get(key) ?? 0) + 1)\r\n    if (this.forceCallFromMesherReplayer) {\r\n      this.workers[hash].postMessage({\r\n        type: 'dirty',\r\n        x: pos.x,\r\n        y: pos.y,\r\n        z: pos.z,\r\n        value,\r\n        config: this.getMesherConfig(),\r\n      })\r\n    } else {\r\n      this.toWorkerMessagesQueue[hash] ??= []\r\n      this.toWorkerMessagesQueue[hash].push({\r\n        // this.workers[hash].postMessage({\r\n        type: 'dirty',\r\n        x: pos.x,\r\n        y: pos.y,\r\n        z: pos.z,\r\n        value,\r\n        config: this.getMesherConfig(),\r\n      })\r\n      this.dispatchMessages()\r\n    }\r\n  }\r\n\r\n  dispatchMessages () {\r\n    if (this.queueAwaited) return\r\n    this.queueAwaited = true\r\n    setTimeout(() => {\r\n      // group messages and send as one\r\n      for (const workerIndex in this.toWorkerMessagesQueue) {\r\n        const worker = this.workers[Number(workerIndex)]\r\n        worker.postMessage(this.toWorkerMessagesQueue[workerIndex])\r\n        for (const message of this.toWorkerMessagesQueue[workerIndex]) {\r\n          this.logWorkerWork(`-> ${workerIndex} dispatchMessages ${message.type} ${JSON.stringify({ x: message.x, y: message.y, z: message.z, value: message.value })}`)\r\n        }\r\n      }\r\n      this.toWorkerMessagesQueue = {}\r\n      this.queueAwaited = false\r\n    })\r\n  }\r\n\r\n  // Listen for chunk rendering updates emitted if a worker finished a render and resolve if the number\r\n  // of sections not rendered are 0\r\n  async waitForChunksToRender () {\r\n    return new Promise<void>((resolve, reject) => {\r\n      if ([...this.sectionsWaiting].length === 0) {\r\n        resolve()\r\n        return\r\n      }\r\n\r\n      const updateHandler = () => {\r\n        if (this.sectionsWaiting.size === 0) {\r\n          this.renderUpdateEmitter.removeListener('update', updateHandler)\r\n          resolve()\r\n        }\r\n      }\r\n      this.renderUpdateEmitter.on('update', updateHandler)\r\n    })\r\n  }\r\n\r\n  async waitForChunkToLoad (pos: Vec3) {\r\n    return new Promise<void>((resolve, reject) => {\r\n      const key = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.z / 16) * 16}`\r\n      if (this.loadedChunks[key]) {\r\n        resolve()\r\n        return\r\n      }\r\n      const updateHandler = () => {\r\n        if (this.loadedChunks[key]) {\r\n          this.renderUpdateEmitter.removeListener('update', updateHandler)\r\n          resolve()\r\n        }\r\n      }\r\n      this.renderUpdateEmitter.on('update', updateHandler)\r\n    })\r\n  }\r\n\r\n  destroy () {\r\n    // Stop all workers\r\n    for (const worker of this.workers) {\r\n      worker.terminate()\r\n    }\r\n    this.workers = []\r\n\r\n    // Stop and destroy sound system\r\n    if (this.soundSystem) {\r\n      this.soundSystem.destroy()\r\n      this.soundSystem = undefined\r\n    }\r\n\r\n    this.active = false\r\n\r\n    this.renderUpdateEmitter.removeAllListeners()\r\n    this.abortController.abort()\r\n    removeAllStats()\r\n  }\r\n}\r\n\r\nexport const initMesherWorker = (onGotMessage: (data: any) => void) => {\r\n  // Node environment needs an absolute path, but browser needs the url of the file\r\n  const workerName = 'mesher.js'\r\n\r\n  let worker: any\r\n  if (process.env.SINGLE_FILE_BUILD) {\r\n    const workerCode = document.getElementById('mesher-worker-code')!.textContent!\r\n    const blob = new Blob([workerCode], { type: 'text/javascript' })\r\n    worker = new Worker(window.URL.createObjectURL(blob))\r\n  } else {\r\n    worker = new Worker(workerName)\r\n  }\r\n\r\n  worker.onmessage = ({ data }) => {\r\n    onGotMessage(data)\r\n  }\r\n  if (worker.on) worker.on('message', (data) => { worker.onmessage({ data }) })\r\n  return worker\r\n}\r\n\r\nexport const meshersSendMcData = (workers: Worker[], version: string, addData = {} as Record<string, any>) => {\r\n  const allMcData = mcDataRaw.pc[version] ?? mcDataRaw.pc[toMajorVersion(version)]\r\n  const mcData = {\r\n    version: JSON.parse(JSON.stringify(allMcData.version))\r\n  }\r\n  for (const key of dynamicMcDataFiles) {\r\n    mcData[key] = allMcData[key]\r\n  }\r\n\r\n  for (const worker of workers) {\r\n    worker.postMessage({ type: 'mcData', mcData, ...addData })\r\n  }\r\n}\r\n","import { BlockType } from '../../../playground/shared'\r\n\r\n// only here for easier testing\r\nexport const defaultMesherConfig = {\r\n  version: '',\r\n  worldMaxY: 256,\r\n  worldMinY: 0,\r\n  enableLighting: true,\r\n  skyLight: 15,\r\n  smoothLighting: true,\r\n  outputFormat: 'threeJs' as 'threeJs' | 'webgpu',\r\n  // textureSize: 1024, // for testing\r\n  debugModelVariant: undefined as undefined | number[],\r\n  clipWorldBelowY: undefined as undefined | number,\r\n  disableBlockEntityTextures: false\r\n}\r\n\r\nexport type CustomBlockModels = {\r\n  [blockPosKey: string]: string // blockPosKey is \"x,y,z\" -> model name\r\n}\r\n\r\nexport type MesherConfig = typeof defaultMesherConfig\r\n\r\nexport type MesherGeometryOutput = {\r\n  sx: number,\r\n  sy: number,\r\n  sz: number,\r\n  // resulting: float32array\r\n  positions: any,\r\n  normals: any,\r\n  colors: any,\r\n  uvs: any,\r\n  t_positions?: number[],\r\n  t_normals?: number[],\r\n  t_colors?: number[],\r\n  t_uvs?: number[],\r\n\r\n  indices: Uint32Array | Uint16Array | number[],\r\n  indicesCount: number,\r\n  using32Array: boolean,\r\n  tiles: Record<string, BlockType>,\r\n  heads: Record<string, any>,\r\n  signs: Record<string, any>,\r\n  banners: Record<string, any>,\r\n  // isFull: boolean\r\n  hadErrors: boolean\r\n  blocksCount: number\r\n  customBlockModels?: CustomBlockModels\r\n}\r\n\r\nexport interface MesherMainEvents {\r\n  geometry: { type: 'geometry'; key: string; geometry: MesherGeometryOutput; workerIndex: number };\r\n  sectionFinished: { type: 'sectionFinished'; key: string; workerIndex: number; processTime?: number };\r\n  blockStateModelInfo: { type: 'blockStateModelInfo'; info: Record<string, BlockStateModelInfo> };\r\n  heightmap: { type: 'heightmap'; key: string; heightmap: Uint8Array };\r\n}\r\n\r\nexport type MesherMainEvent = MesherMainEvents[keyof MesherMainEvents]\r\n\r\nexport type HighestBlockInfo = { y: number, stateId: number | undefined, biomeId: number | undefined }\r\n\r\nexport type BlockStateModelInfo = {\r\n  cacheKey: string\r\n  issues: string[]\r\n  modelNames: string[]\r\n  conditions: string[]\r\n}\r\n\r\nexport const getBlockAssetsCacheKey = (stateId: number, modelNameOverride?: string) => {\r\n  return modelNameOverride ? `${stateId}:${modelNameOverride}` : String(stateId)\r\n}\r\n","import type { ChatMessage } from 'prismarine-chat'\r\nimport { createCanvas } from '../lib/utils'\r\n\r\ntype SignBlockEntity = {\r\n  Color?: string\r\n  GlowingText?: 0 | 1\r\n  Text1?: string\r\n  Text2?: string\r\n  Text3?: string\r\n  Text4?: string\r\n} | {\r\n  // todo\r\n  is_waxed?: 0 | 1\r\n  front_text: {\r\n    color: string\r\n    messages: string[]\r\n    // todo\r\n    has_glowing_text?: 0 | 1\r\n  }\r\n  // todo\r\n  // back_text: {}\r\n}\r\n\r\ntype JsonEncodedType = string | null | Record<string, any>\r\n\r\nconst parseSafe = (text: string, task: string) => {\r\n  try {\r\n    return JSON.parse(text)\r\n  } catch (e) {\r\n    console.warn(`Failed to parse ${task}`, e)\r\n    return null\r\n  }\r\n}\r\n\r\nconst LEGACY_COLORS = {\r\n  black: '#000000',\r\n  dark_blue: '#0000AA',\r\n  dark_green: '#00AA00',\r\n  dark_aqua: '#00AAAA',\r\n  dark_red: '#AA0000',\r\n  dark_purple: '#AA00AA',\r\n  gold: '#FFAA00',\r\n  gray: '#AAAAAA',\r\n  dark_gray: '#555555',\r\n  blue: '#5555FF',\r\n  green: '#55FF55',\r\n  aqua: '#55FFFF',\r\n  red: '#FF5555',\r\n  light_purple: '#FF55FF',\r\n  yellow: '#FFFF55',\r\n  white: '#FFFFFF',\r\n}\r\n\r\nexport const renderSign = (\r\n  blockEntity: SignBlockEntity,\r\n  isHanging: boolean,\r\n  PrismarineChat: typeof ChatMessage,\r\n  ctxHook = (ctx) => { },\r\n  canvasCreator = (width, height): OffscreenCanvas => { return createCanvas(width, height) }\r\n) => {\r\n  // todo don't use texture rendering, investigate the font rendering when possible\r\n  // or increase factor when needed\r\n  const factor = 40\r\n  const fontSize = 1.6 * factor\r\n  const signboardY = [16, 9]\r\n  const heightOffset = signboardY[0] - signboardY[1]\r\n  const heightScalar = heightOffset / 16\r\n  // todo the text should be clipped based on it's render width (needs investigate)\r\n\r\n  const texts = 'front_text' in blockEntity ? /* > 1.20 */ blockEntity.front_text.messages : [\r\n    blockEntity.Text1,\r\n    blockEntity.Text2,\r\n    blockEntity.Text3,\r\n    blockEntity.Text4\r\n  ]\r\n\r\n  if (!texts.some((text) => text !== 'null')) {\r\n    return undefined\r\n  }\r\n\r\n  const canvas = canvasCreator(16 * factor, heightOffset * factor)\r\n\r\n  const _ctx = canvas.getContext('2d')!\r\n\r\n  ctxHook(_ctx)\r\n  const defaultColor = ('front_text' in blockEntity ? blockEntity.front_text.color : blockEntity.Color) || 'black'\r\n  for (const [lineNum, text] of texts.slice(0, 4).entries()) {\r\n    if (text === 'null') continue\r\n    renderComponent(text, PrismarineChat, canvas, fontSize, defaultColor, fontSize * (lineNum + 1) + (isHanging ? 0 : -8))\r\n  }\r\n  return canvas\r\n}\r\n\r\nexport const renderComponent = (\r\n  text: JsonEncodedType | string | undefined,\r\n  PrismarineChat: typeof ChatMessage,\r\n  canvas: OffscreenCanvas,\r\n  fontSize: number,\r\n  defaultColor: string,\r\n  offset = 0\r\n) => {\r\n  // todo: in pre flatenning it seems the format was not json\r\n  const parsed = typeof text === 'string' && (text?.startsWith('{') || text?.startsWith('\"')) ? parseSafe(text ?? '\"\"', 'sign text') : text\r\n  if (!parsed || (typeof parsed !== 'object' && typeof parsed !== 'string')) return\r\n  // todo fix type\r\n\r\n  const ctx = canvas.getContext('2d')!\r\n  if (!ctx) throw new Error('Could not get 2d context')\r\n  ctx.imageSmoothingEnabled = false\r\n  ctx.font = `${fontSize}px mojangles`\r\n\r\n  type Formatting = {\r\n    color: string | undefined\r\n    underlined: boolean | undefined\r\n    strikethrough: boolean | undefined\r\n    bold: boolean | undefined\r\n    italic: boolean | undefined\r\n  }\r\n\r\n  type Message = ChatMessage & Formatting & { text: string }\r\n\r\n  const message = new PrismarineChat(parsed) as Message\r\n\r\n  const toRenderCanvas: Array<{\r\n    fontStyle: string\r\n    fillStyle: string\r\n    underlineStyle: boolean\r\n    strikeStyle: boolean\r\n    offset: number\r\n    text: string\r\n  }> = []\r\n  let visibleFormatting = false\r\n  let plainText = ''\r\n  let textOffset = offset\r\n  const textWidths: number[] = []\r\n\r\n  const renderText = (component: Message, parentFormatting?: Formatting | undefined) => {\r\n    const { text } = component\r\n    const formatting = {\r\n      color: component.color ?? parentFormatting?.color,\r\n      underlined: component.underlined ?? parentFormatting?.underlined,\r\n      strikethrough: component.strikethrough ?? parentFormatting?.strikethrough,\r\n      bold: component.bold ?? parentFormatting?.bold,\r\n      italic: component.italic ?? parentFormatting?.italic\r\n    }\r\n    visibleFormatting = visibleFormatting || formatting.underlined || formatting.strikethrough || false\r\n    if (text?.includes('\\n')) {\r\n      for (const line of text.split('\\n')) {\r\n        addTextPart(line, formatting)\r\n        textOffset += fontSize\r\n        plainText = ''\r\n      }\r\n    } else if (text) {\r\n      addTextPart(text, formatting)\r\n    }\r\n    if (component.extra) {\r\n      for (const child of component.extra) {\r\n        renderText(child as Message, formatting)\r\n      }\r\n    }\r\n  }\r\n\r\n  const addTextPart = (text: string, formatting: Formatting) => {\r\n    plainText += text\r\n    textWidths[textOffset] = ctx.measureText(plainText).width\r\n    let color = formatting.color ?? defaultColor\r\n    if (!color.startsWith('#')) {\r\n      color = LEGACY_COLORS[color.toLowerCase()] || color\r\n    }\r\n    toRenderCanvas.push({\r\n      fontStyle: `${formatting.bold ? 'bold' : ''} ${formatting.italic ? 'italic' : ''}`,\r\n      fillStyle: color,\r\n      underlineStyle: formatting.underlined ?? false,\r\n      strikeStyle: formatting.strikethrough ?? false,\r\n      offset: textOffset,\r\n      text\r\n    })\r\n  }\r\n\r\n  renderText(message)\r\n\r\n  // skip rendering empty lines\r\n  if (!visibleFormatting && !message.toString().trim()) return\r\n\r\n  let renderedWidth = 0\r\n  let previousOffsetY = 0\r\n  for (const { fillStyle, fontStyle, underlineStyle, strikeStyle, offset: offsetY, text } of toRenderCanvas) {\r\n    if (previousOffsetY !== offsetY) {\r\n      renderedWidth = 0\r\n    }\r\n    previousOffsetY = offsetY\r\n    ctx.fillStyle = fillStyle\r\n    ctx.textRendering = 'optimizeLegibility'\r\n    ctx.font = `${fontStyle} ${fontSize}px mojangles`\r\n    const textWidth = textWidths[offsetY] ?? ctx.measureText(text).width\r\n    const offsetX = (canvas.width - textWidth) / 2 + renderedWidth\r\n    ctx.fillText(text, offsetX, offsetY)\r\n    if (strikeStyle) {\r\n      ctx.lineWidth = fontSize / 8\r\n      ctx.strokeStyle = fillStyle\r\n      ctx.beginPath()\r\n      ctx.moveTo(offsetX, offsetY - ctx.lineWidth * 2.5)\r\n      ctx.lineTo(offsetX + ctx.measureText(text).width, offsetY - ctx.lineWidth * 2.5)\r\n      ctx.stroke()\r\n    }\r\n    if (underlineStyle) {\r\n      ctx.lineWidth = fontSize / 8\r\n      ctx.strokeStyle = fillStyle\r\n      ctx.beginPath()\r\n      ctx.moveTo(offsetX, offsetY + ctx.lineWidth)\r\n      ctx.lineTo(offsetX + ctx.measureText(text).width, offsetY + ctx.lineWidth)\r\n      ctx.stroke()\r\n    }\r\n    renderedWidth += ctx.measureText(text).width\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport interface Create3DItemMeshOptions {\r\n  depth: number\r\n  pixelSize?: number\r\n}\r\n\r\nexport interface Create3DItemMeshResult {\r\n  geometry: THREE.BufferGeometry\r\n  totalVertices: number\r\n  totalTriangles: number\r\n}\r\n\r\n/**\r\n * Creates a 3D item geometry with front/back faces and connecting edges\r\n * from a canvas containing the item texture\r\n */\r\nexport function create3DItemMesh (\r\n  canvas: HTMLCanvasElement,\r\n  options: Create3DItemMeshOptions\r\n): Create3DItemMeshResult {\r\n  const { depth, pixelSize } = options\r\n\r\n  // Validate canvas dimensions\r\n  if (canvas.width <= 0 || canvas.height <= 0) {\r\n    throw new Error(`Invalid canvas dimensions: ${canvas.width}x${canvas.height}`)\r\n  }\r\n\r\n  const ctx = canvas.getContext('2d')!\r\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n  const { data } = imageData\r\n\r\n  const w = canvas.width\r\n  const h = canvas.height\r\n  const halfDepth = depth / 2\r\n  const actualPixelSize = pixelSize ?? (1 / Math.max(w, h))\r\n\r\n  // Find opaque pixels\r\n  const isOpaque = (x: number, y: number) => {\r\n    if (x < 0 || y < 0 || x >= w || y >= h) return false\r\n    const i = (y * w + x) * 4\r\n    return data[i + 3] > 128 // alpha > 128\r\n  }\r\n\r\n  const vertices: number[] = []\r\n  const indices: number[] = []\r\n  const uvs: number[] = []\r\n  const normals: number[] = []\r\n\r\n  let vertexIndex = 0\r\n\r\n  // Helper to add a vertex\r\n  const addVertex = (x: number, y: number, z: number, u: number, v: number, nx: number, ny: number, nz: number) => {\r\n    vertices.push(x, y, z)\r\n    uvs.push(u, v)\r\n    normals.push(nx, ny, nz)\r\n    return vertexIndex++\r\n  }\r\n\r\n  // Helper to add a quad (two triangles)\r\n  const addQuad = (v0: number, v1: number, v2: number, v3: number) => {\r\n    indices.push(v0, v1, v2, v0, v2, v3)\r\n  }\r\n\r\n  // Convert pixel coordinates to world coordinates\r\n  const pixelToWorld = (px: number, py: number) => {\r\n    const x = (px / w - 0.5) * actualPixelSize * w\r\n    const y = -(py / h - 0.5) * actualPixelSize * h\r\n    return { x, y }\r\n  }\r\n\r\n  // Create a grid of vertices for front and back faces\r\n  const frontVertices: Array<Array<number | null>> = Array.from({ length: h + 1 }, () => Array.from({ length: w + 1 }, () => null))\r\n  const backVertices: Array<Array<number | null>> = Array.from({ length: h + 1 }, () => Array.from({ length: w + 1 }, () => null))\r\n\r\n  // Create vertices at pixel corners\r\n  for (let py = 0; py <= h; py++) {\r\n    for (let px = 0; px <= w; px++) {\r\n      const { x, y } = pixelToWorld(px - 0.5, py - 0.5)\r\n\r\n      // UV coordinates should map to the texture space of the extracted tile\r\n      const u = px / w\r\n      const v = py / h\r\n\r\n      // Check if this vertex is needed for any face or edge\r\n      let needVertex = false\r\n\r\n      // Check all 4 adjacent pixels to see if any are opaque\r\n      const adjacentPixels = [\r\n        [px - 1, py - 1], // top-left pixel\r\n        [px, py - 1], // top-right pixel\r\n        [px - 1, py], // bottom-left pixel\r\n        [px, py] // bottom-right pixel\r\n      ]\r\n\r\n      for (const [adjX, adjY] of adjacentPixels) {\r\n        if (isOpaque(adjX, adjY)) {\r\n          needVertex = true\r\n          break\r\n        }\r\n      }\r\n\r\n      if (needVertex) {\r\n        frontVertices[py][px] = addVertex(x, y, halfDepth, u, v, 0, 0, 1)\r\n        backVertices[py][px] = addVertex(x, y, -halfDepth, u, v, 0, 0, -1)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Create front and back faces\r\n  for (let py = 0; py < h; py++) {\r\n    for (let px = 0; px < w; px++) {\r\n      if (!isOpaque(px, py)) continue\r\n\r\n      const v00 = frontVertices[py][px]\r\n      const v10 = frontVertices[py][px + 1]\r\n      const v11 = frontVertices[py + 1][px + 1]\r\n      const v01 = frontVertices[py + 1][px]\r\n\r\n      const b00 = backVertices[py][px]\r\n      const b10 = backVertices[py][px + 1]\r\n      const b11 = backVertices[py + 1][px + 1]\r\n      const b01 = backVertices[py + 1][px]\r\n\r\n      if (v00 !== null && v10 !== null && v11 !== null && v01 !== null) {\r\n        // Front face\r\n        addQuad(v00, v10, v11, v01)\r\n      }\r\n\r\n      if (b00 !== null && b10 !== null && b11 !== null && b01 !== null) {\r\n        // Back face (reversed winding)\r\n        addQuad(b10, b00, b01, b11)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Create edge faces for each side of the pixel with proper UVs\r\n  for (let py = 0; py < h; py++) {\r\n    for (let px = 0; px < w; px++) {\r\n      if (!isOpaque(px, py)) continue\r\n\r\n      const pixelU = (px + 0.5) / w // Center of current pixel\r\n      const pixelV = (py + 0.5) / h\r\n\r\n      // Left edge (x = px)\r\n      if (!isOpaque(px - 1, py)) {\r\n        const f0 = frontVertices[py][px]\r\n        const f1 = frontVertices[py + 1][px]\r\n        const b0 = backVertices[py][px]\r\n        const b1 = backVertices[py + 1][px]\r\n\r\n        if (f0 !== null && f1 !== null && b0 !== null && b1 !== null) {\r\n          // Create new vertices for edge with current pixel's UV\r\n          const ef0 = addVertex(vertices[f0 * 3], vertices[f0 * 3 + 1], vertices[f0 * 3 + 2], pixelU, pixelV, -1, 0, 0)\r\n          const ef1 = addVertex(vertices[f1 * 3], vertices[f1 * 3 + 1], vertices[f1 * 3 + 2], pixelU, pixelV, -1, 0, 0)\r\n          const eb1 = addVertex(vertices[b1 * 3], vertices[b1 * 3 + 1], vertices[b1 * 3 + 2], pixelU, pixelV, -1, 0, 0)\r\n          const eb0 = addVertex(vertices[b0 * 3], vertices[b0 * 3 + 1], vertices[b0 * 3 + 2], pixelU, pixelV, -1, 0, 0)\r\n          addQuad(ef0, ef1, eb1, eb0)\r\n        }\r\n      }\r\n\r\n      // Right edge (x = px + 1)\r\n      if (!isOpaque(px + 1, py)) {\r\n        const f0 = frontVertices[py + 1][px + 1]\r\n        const f1 = frontVertices[py][px + 1]\r\n        const b0 = backVertices[py + 1][px + 1]\r\n        const b1 = backVertices[py][px + 1]\r\n\r\n        if (f0 !== null && f1 !== null && b0 !== null && b1 !== null) {\r\n          const ef0 = addVertex(vertices[f0 * 3], vertices[f0 * 3 + 1], vertices[f0 * 3 + 2], pixelU, pixelV, 1, 0, 0)\r\n          const ef1 = addVertex(vertices[f1 * 3], vertices[f1 * 3 + 1], vertices[f1 * 3 + 2], pixelU, pixelV, 1, 0, 0)\r\n          const eb1 = addVertex(vertices[b1 * 3], vertices[b1 * 3 + 1], vertices[b1 * 3 + 2], pixelU, pixelV, 1, 0, 0)\r\n          const eb0 = addVertex(vertices[b0 * 3], vertices[b0 * 3 + 1], vertices[b0 * 3 + 2], pixelU, pixelV, 1, 0, 0)\r\n          addQuad(ef0, ef1, eb1, eb0)\r\n        }\r\n      }\r\n\r\n      // Top edge (y = py)\r\n      if (!isOpaque(px, py - 1)) {\r\n        const f0 = frontVertices[py][px]\r\n        const f1 = frontVertices[py][px + 1]\r\n        const b0 = backVertices[py][px]\r\n        const b1 = backVertices[py][px + 1]\r\n\r\n        if (f0 !== null && f1 !== null && b0 !== null && b1 !== null) {\r\n          const ef0 = addVertex(vertices[f0 * 3], vertices[f0 * 3 + 1], vertices[f0 * 3 + 2], pixelU, pixelV, 0, -1, 0)\r\n          const ef1 = addVertex(vertices[f1 * 3], vertices[f1 * 3 + 1], vertices[f1 * 3 + 2], pixelU, pixelV, 0, -1, 0)\r\n          const eb1 = addVertex(vertices[b1 * 3], vertices[b1 * 3 + 1], vertices[b1 * 3 + 2], pixelU, pixelV, 0, -1, 0)\r\n          const eb0 = addVertex(vertices[b0 * 3], vertices[b0 * 3 + 1], vertices[b0 * 3 + 2], pixelU, pixelV, 0, -1, 0)\r\n          addQuad(ef0, ef1, eb1, eb0)\r\n        }\r\n      }\r\n\r\n      // Bottom edge (y = py + 1)\r\n      if (!isOpaque(px, py + 1)) {\r\n        const f0 = frontVertices[py + 1][px + 1]\r\n        const f1 = frontVertices[py + 1][px]\r\n        const b0 = backVertices[py + 1][px + 1]\r\n        const b1 = backVertices[py + 1][px]\r\n\r\n        if (f0 !== null && f1 !== null && b0 !== null && b1 !== null) {\r\n          const ef0 = addVertex(vertices[f0 * 3], vertices[f0 * 3 + 1], vertices[f0 * 3 + 2], pixelU, pixelV, 0, 1, 0)\r\n          const ef1 = addVertex(vertices[f1 * 3], vertices[f1 * 3 + 1], vertices[f1 * 3 + 2], pixelU, pixelV, 0, 1, 0)\r\n          const eb1 = addVertex(vertices[b1 * 3], vertices[b1 * 3 + 1], vertices[b1 * 3 + 2], pixelU, pixelV, 0, 1, 0)\r\n          const eb0 = addVertex(vertices[b0 * 3], vertices[b0 * 3 + 1], vertices[b0 * 3 + 2], pixelU, pixelV, 0, 1, 0)\r\n          addQuad(ef0, ef1, eb1, eb0)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const geometry = new THREE.BufferGeometry()\r\n  geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n  geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2))\r\n  geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3))\r\n  geometry.setIndex(indices)\r\n\r\n  // Compute normals properly\r\n  geometry.computeVertexNormals()\r\n\r\n  return {\r\n    geometry,\r\n    totalVertices: vertexIndex,\r\n    totalTriangles: indices.length / 3\r\n  }\r\n}\r\n\r\nexport interface ItemTextureInfo {\r\n  u: number\r\n  v: number\r\n  sizeX: number\r\n  sizeY: number\r\n}\r\n\r\nexport interface ItemMeshResult {\r\n  mesh: THREE.Object3D\r\n  itemsTexture?: THREE.Texture\r\n  itemsTextureFlipped?: THREE.Texture\r\n  cleanup?: () => void\r\n}\r\n\r\n/**\r\n * Extracts item texture region to a canvas\r\n */\r\nexport function extractItemTextureToCanvas (\r\n  sourceTexture: THREE.Texture,\r\n  textureInfo: ItemTextureInfo\r\n): HTMLCanvasElement {\r\n  const { u, v, sizeX, sizeY } = textureInfo\r\n\r\n  // Calculate canvas size - fix the calculation\r\n  const canvasWidth = Math.max(1, Math.floor(sizeX * sourceTexture.image.width))\r\n  const canvasHeight = Math.max(1, Math.floor(sizeY * sourceTexture.image.height))\r\n\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = canvasWidth\r\n  canvas.height = canvasHeight\r\n\r\n  const ctx = canvas.getContext('2d')!\r\n  ctx.imageSmoothingEnabled = false\r\n\r\n  // Draw the item texture region to canvas\r\n  ctx.drawImage(\r\n    sourceTexture.image,\r\n    u * sourceTexture.image.width,\r\n    v * sourceTexture.image.height,\r\n    sizeX * sourceTexture.image.width,\r\n    sizeY * sourceTexture.image.height,\r\n    0,\r\n    0,\r\n    canvas.width,\r\n    canvas.height\r\n  )\r\n\r\n  return canvas\r\n}\r\n\r\n/**\r\n * Creates either a 2D or 3D item mesh based on parameters\r\n */\r\nexport function createItemMesh (\r\n  sourceTexture: THREE.Texture,\r\n  textureInfo: ItemTextureInfo,\r\n  options: {\r\n    faceCamera?: boolean\r\n    use3D?: boolean\r\n    depth?: number\r\n  } = {}\r\n): ItemMeshResult {\r\n  const { faceCamera = false, use3D = true, depth = 0.04 } = options\r\n  const { u, v, sizeX, sizeY } = textureInfo\r\n\r\n  if (faceCamera) {\r\n    // Create sprite for camera-facing items\r\n    const itemsTexture = sourceTexture.clone()\r\n    itemsTexture.flipY = true\r\n    itemsTexture.offset.set(u, 1 - v - sizeY)\r\n    itemsTexture.repeat.set(sizeX, sizeY)\r\n    itemsTexture.needsUpdate = true\r\n    itemsTexture.magFilter = THREE.NearestFilter\r\n    itemsTexture.minFilter = THREE.NearestFilter\r\n\r\n    const spriteMat = new THREE.SpriteMaterial({\r\n      map: itemsTexture,\r\n      transparent: true,\r\n      alphaTest: 0.1,\r\n    })\r\n    const mesh = new THREE.Sprite(spriteMat)\r\n\r\n    return {\r\n      mesh,\r\n      itemsTexture,\r\n      cleanup () {\r\n        itemsTexture.dispose()\r\n      }\r\n    }\r\n  }\r\n\r\n  if (use3D) {\r\n    // Try to create 3D mesh\r\n    try {\r\n      const canvas = extractItemTextureToCanvas(sourceTexture, textureInfo)\r\n      const { geometry } = create3DItemMesh(canvas, { depth })\r\n\r\n      // Create texture from canvas for the 3D mesh\r\n      const itemsTexture = new THREE.CanvasTexture(canvas)\r\n      itemsTexture.magFilter = THREE.NearestFilter\r\n      itemsTexture.minFilter = THREE.NearestFilter\r\n      itemsTexture.wrapS = itemsTexture.wrapT = THREE.ClampToEdgeWrapping\r\n      itemsTexture.flipY = false\r\n      itemsTexture.needsUpdate = true\r\n\r\n      const material = new THREE.MeshStandardMaterial({\r\n        map: itemsTexture,\r\n        side: THREE.DoubleSide,\r\n        transparent: true,\r\n        alphaTest: 0.1,\r\n      })\r\n\r\n      const mesh = new THREE.Mesh(geometry, material)\r\n\r\n      return {\r\n        mesh,\r\n        itemsTexture,\r\n        cleanup () {\r\n          itemsTexture.dispose()\r\n          geometry.dispose()\r\n          if (material.map) material.map.dispose()\r\n          material.dispose()\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to create 3D item mesh, falling back to 2D:', error)\r\n      // Fall through to 2D rendering\r\n    }\r\n  }\r\n\r\n  // Fallback to 2D flat rendering\r\n  const itemsTexture = sourceTexture.clone()\r\n  itemsTexture.flipY = true\r\n  itemsTexture.offset.set(u, 1 - v - sizeY)\r\n  itemsTexture.repeat.set(sizeX, sizeY)\r\n  itemsTexture.needsUpdate = true\r\n  itemsTexture.magFilter = THREE.NearestFilter\r\n  itemsTexture.minFilter = THREE.NearestFilter\r\n\r\n  const itemsTextureFlipped = itemsTexture.clone()\r\n  itemsTextureFlipped.repeat.x *= -1\r\n  itemsTextureFlipped.needsUpdate = true\r\n  itemsTextureFlipped.offset.set(u + sizeX, 1 - v - sizeY)\r\n\r\n  const material = new THREE.MeshStandardMaterial({\r\n    map: itemsTexture,\r\n    transparent: true,\r\n    alphaTest: 0.1,\r\n  })\r\n  const materialFlipped = new THREE.MeshStandardMaterial({\r\n    map: itemsTextureFlipped,\r\n    transparent: true,\r\n    alphaTest: 0.1,\r\n  })\r\n  const mesh = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 0), [\r\n    new THREE.MeshBasicMaterial({ color: 0x00_00_00 }), new THREE.MeshBasicMaterial({ color: 0x00_00_00 }),\r\n    new THREE.MeshBasicMaterial({ color: 0x00_00_00 }), new THREE.MeshBasicMaterial({ color: 0x00_00_00 }),\r\n    material, materialFlipped,\r\n  ])\r\n\r\n  return {\r\n    mesh,\r\n    itemsTexture,\r\n    itemsTextureFlipped,\r\n    cleanup () {\r\n      itemsTexture.dispose()\r\n      itemsTextureFlipped.dispose()\r\n      material.dispose()\r\n      materialFlipped.dispose()\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a complete 3D item mesh from a canvas texture\r\n */\r\nexport function createItemMeshFromCanvas (\r\n  canvas: HTMLCanvasElement,\r\n  options: Create3DItemMeshOptions\r\n): THREE.Mesh {\r\n  const { geometry } = create3DItemMesh(canvas, options)\r\n\r\n  // Base color texture for the item\r\n  const colorTexture = new THREE.CanvasTexture(canvas)\r\n  colorTexture.magFilter = THREE.NearestFilter\r\n  colorTexture.minFilter = THREE.NearestFilter\r\n  colorTexture.wrapS = colorTexture.wrapT = THREE.ClampToEdgeWrapping\r\n  colorTexture.flipY = false // Important for canvas textures\r\n  colorTexture.needsUpdate = true\r\n\r\n  // Material - no transparency, no alpha test needed for edges\r\n  const material = new THREE.MeshBasicMaterial({\r\n    map: colorTexture,\r\n    side: THREE.DoubleSide,\r\n    transparent: true,\r\n    alphaTest: 0.1\r\n  })\r\n\r\n  return new THREE.Mesh(geometry, material)\r\n}\r\n","//@ts-check\r\nimport { UnionToIntersection } from 'type-fest'\r\nimport nbt from 'prismarine-nbt'\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\nimport * as THREE from 'three'\r\nimport { PlayerAnimation, PlayerObject } from 'skinview3d'\r\nimport { inferModelType, loadCapeToCanvas, loadEarsToCanvasFromSkin } from 'skinview-utils'\r\n// todo replace with url\r\nimport { degreesToRadians } from '@nxg-org/mineflayer-tracker/lib/mathUtils'\r\nimport { NameTagObject } from 'skinview3d/libs/nametag'\r\nimport { flat, fromFormattedString } from '@xmcl/text-component'\r\nimport mojangson from 'mojangson'\r\nimport { snakeCase } from 'change-case'\r\nimport { Item } from 'prismarine-item'\r\nimport { isEntityAttackable } from 'mineflayer-mouse/dist/attackableEntity'\r\nimport { Team } from 'mineflayer'\r\nimport PrismarineChatLoader from 'prismarine-chat'\r\nimport { EntityMetadataVersions } from '../../../src/mcDataTypes'\r\nimport { ItemSpecificContextProperties } from '../lib/basePlayerState'\r\nimport { loadSkinFromUsername, loadSkinImage, stevePngUrl } from '../lib/utils/skins'\r\nimport { renderComponent } from '../sign-renderer'\r\nimport { createCanvas } from '../lib/utils'\r\nimport { PlayerObjectType } from '../lib/createPlayerObject'\r\nimport { getBlockMeshFromModel } from './holdingBlock'\r\nimport { createItemMesh } from './itemMesh'\r\nimport * as Entity from './entity/EntityMesh'\r\nimport { getMesh } from './entity/EntityMesh'\r\nimport { WalkingGeneralSwing } from './entity/animations'\r\nimport { disposeObject, loadTexture, loadThreeJsTextureFromUrl } from './threeJsUtils'\r\nimport { armorModel, armorTextures, elytraTexture } from './entity/armorModels'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\n\r\nexport const steveTexture = loadThreeJsTextureFromUrl(stevePngUrl)\r\n\r\nexport const TWEEN_DURATION = 120\r\n\r\nfunction convert2sComplementToHex (complement: number) {\r\n  if (complement < 0) {\r\n    complement = (0xFF_FF_FF_FF + complement + 1) >>> 0\r\n  }\r\n  return complement.toString(16)\r\n}\r\n\r\nfunction toRgba (color: string | undefined) {\r\n  if (color === undefined) {\r\n    return undefined\r\n  }\r\n  if (parseInt(color, 10) === 0) {\r\n    return 'rgba(0, 0, 0, 0)'\r\n  }\r\n  const hex = convert2sComplementToHex(parseInt(color, 10))\r\n  if (hex.length === 8) {\r\n    return `#${hex.slice(2, 8)}${hex.slice(0, 2)}`\r\n  } else {\r\n    return `#${hex}`\r\n  }\r\n}\r\n\r\nfunction toQuaternion (quaternion: any, defaultValue?: THREE.Quaternion) {\r\n  if (quaternion === undefined) {\r\n    return defaultValue\r\n  }\r\n  if (quaternion instanceof THREE.Quaternion) {\r\n    return quaternion\r\n  }\r\n  if (Array.isArray(quaternion)) {\r\n    return new THREE.Quaternion(quaternion[0], quaternion[1], quaternion[2], quaternion[3])\r\n  }\r\n  return new THREE.Quaternion(quaternion.x, quaternion.y, quaternion.z, quaternion.w)\r\n}\r\n\r\nfunction poseToEuler (pose: any, defaultValue?: THREE.Euler) {\r\n  if (pose === undefined) {\r\n    return defaultValue ?? new THREE.Euler()\r\n  }\r\n  if (pose instanceof THREE.Euler) {\r\n    return pose\r\n  }\r\n  if (pose['yaw'] !== undefined && pose['pitch'] !== undefined && pose['roll'] !== undefined) {\r\n    // Convert Minecraft pitch, yaw, roll definitions to our angle system\r\n    return new THREE.Euler(-degreesToRadians(pose.pitch), -degreesToRadians(pose.yaw), degreesToRadians(pose.roll), 'ZYX')\r\n  }\r\n  if (pose['x'] !== undefined && pose['y'] !== undefined && pose['z'] !== undefined) {\r\n    return new THREE.Euler(pose.z, pose.y, pose.x, 'ZYX')\r\n  }\r\n  if (Array.isArray(pose)) {\r\n    return new THREE.Euler(pose[0], pose[1], pose[2])\r\n  }\r\n  return defaultValue ?? new THREE.Euler()\r\n}\r\n\r\nfunction getUsernameTexture ({\r\n  username,\r\n  nameTagBackgroundColor = 'rgba(0, 0, 0, 0.3)',\r\n  nameTagTextOpacity = 255\r\n}: any, { fontFamily = 'mojangles' }: any, version: string) {\r\n  const canvas = createCanvas(64, 64)\r\n\r\n  const PrismarineChat = PrismarineChatLoader(version)\r\n\r\n  const ctx = canvas.getContext('2d')\r\n  if (!ctx) throw new Error('Could not get 2d context')\r\n\r\n  const fontSize = 48\r\n  const padding = 5\r\n  ctx.font = `${fontSize}px ${fontFamily}`\r\n\r\n  const plainLines = String(typeof username === 'string' ? username : new PrismarineChat(username).toString()).split('\\n')\r\n  let textWidth = 0\r\n  for (const line of plainLines) {\r\n    const width = ctx.measureText(line).width + padding * 2\r\n    if (width > textWidth) textWidth = width\r\n  }\r\n\r\n  canvas.width = textWidth\r\n  canvas.height = (fontSize + padding) * plainLines.length\r\n\r\n  ctx.fillStyle = nameTagBackgroundColor\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n  ctx.globalAlpha = nameTagTextOpacity / 255\r\n\r\n  renderComponent(username, PrismarineChat, canvas, fontSize, 'white', -padding + fontSize)\r\n\r\n  ctx.globalAlpha = 1\r\n\r\n  return canvas\r\n}\r\n\r\nconst addNametag = (entity, options: { fontFamily: string }, mesh, version: string) => {\r\n  for (const c of mesh.children) {\r\n    if (c.name === 'nametag') {\r\n      c.removeFromParent()\r\n    }\r\n  }\r\n  if (entity.username !== undefined) {\r\n    const canvas = getUsernameTexture(entity, options, version)\r\n    const tex = new THREE.Texture(canvas)\r\n    tex.needsUpdate = true\r\n    let nameTag: THREE.Object3D\r\n    if (entity.nameTagFixed) {\r\n      const geometry = new THREE.PlaneGeometry()\r\n      const material = new THREE.MeshBasicMaterial({ map: tex })\r\n      material.transparent = true\r\n      nameTag = new THREE.Mesh(geometry, material)\r\n      nameTag.rotation.set(entity.pitch, THREE.MathUtils.degToRad(entity.yaw + 180), 0)\r\n      nameTag.position.y += entity.height + 0.3\r\n    } else {\r\n      const spriteMat = new THREE.SpriteMaterial({ map: tex })\r\n      nameTag = new THREE.Sprite(spriteMat)\r\n      nameTag.position.y += entity.height + 0.6\r\n    }\r\n    nameTag.renderOrder = 1000\r\n    nameTag.scale.set(canvas.width * 0.005, canvas.height * 0.005, 1)\r\n    if (entity.nameTagRotationRight) {\r\n      nameTag.applyQuaternion(entity.nameTagRotationRight)\r\n    }\r\n    if (entity.nameTagScale) {\r\n      nameTag.scale.multiply(entity.nameTagScale)\r\n    }\r\n    if (entity.nameTagRotationLeft) {\r\n      nameTag.applyQuaternion(entity.nameTagRotationLeft)\r\n    }\r\n    if (entity.nameTagTranslation) {\r\n      nameTag.position.add(entity.nameTagTranslation)\r\n    }\r\n    nameTag.name = 'nametag'\r\n\r\n    mesh.add(nameTag)\r\n    return nameTag\r\n  }\r\n}\r\n\r\n// todo cleanup\r\nconst nametags = {}\r\n\r\nconst isFirstUpperCase = (str) => str.charAt(0) === str.charAt(0).toUpperCase()\r\n\r\nfunction getEntityMesh (entity: import('prismarine-entity').Entity & { delete?: any; pos?: any; name?: any }, world: WorldRendererThree, options: { fontFamily: string }, overrides) {\r\n  if (entity.name) {\r\n    try {\r\n      // https://github.com/PrismarineJS/prismarine-viewer/pull/410\r\n      const entityName = (isFirstUpperCase(entity.name) ? snakeCase(entity.name) : entity.name).toLowerCase()\r\n      const e = new Entity.EntityMesh('1.16.4', entityName, world, overrides)\r\n\r\n      if (e.mesh) {\r\n        addNametag(entity, options, e.mesh, world.version)\r\n        return e.mesh\r\n      }\r\n    } catch (err) {\r\n      reportError?.(err)\r\n    }\r\n  }\r\n\r\n  if (!isEntityAttackable(loadedData, entity)) return\r\n  const geometry = new THREE.BoxGeometry(entity.width, entity.height, entity.width)\r\n  geometry.translate(0, entity.height / 2, 0)\r\n  const material = new THREE.MeshBasicMaterial({ color: 0xff_00_ff })\r\n  const cube = new THREE.Mesh(geometry, material)\r\n  const nametagCount = (nametags[entity.name] = (nametags[entity.name] || 0) + 1)\r\n  if (nametagCount < 6) {\r\n    addNametag({\r\n      username: entity.name,\r\n      height: entity.height,\r\n    }, options, cube, world.version)\r\n  }\r\n  return cube\r\n}\r\n\r\nexport type SceneEntity = THREE.Object3D & {\r\n  playerObject?: PlayerObjectType\r\n  username?: string\r\n  uuid?: string\r\n  additionalCleanup?: () => void\r\n  originalEntity: import('prismarine-entity').Entity & { delete?; pos?, name, team?: Team }\r\n}\r\n\r\nexport class Entities {\r\n  entities = {} as Record<string, SceneEntity>\r\n  playerEntity: SceneEntity | null = null // Special entity for the player in third person\r\n  entitiesOptions = {\r\n    fontFamily: 'mojangles'\r\n  }\r\n  debugMode: string\r\n  onSkinUpdate: () => void\r\n  clock = new THREE.Clock()\r\n  currentlyRendering = true\r\n  cachedMapsImages = {} as Record<number, string>\r\n  itemFrameMaps = {} as Record<number, Array<THREE.Mesh<THREE.PlaneGeometry, THREE.MeshLambertMaterial>>>\r\n\r\n  get entitiesByName (): Record<string, SceneEntity[]> {\r\n    const byName: Record<string, SceneEntity[]> = {}\r\n    for (const entity of Object.values(this.entities)) {\r\n      if (!entity['realName']) continue\r\n      byName[entity['realName']] = byName[entity['realName']] || []\r\n      byName[entity['realName']].push(entity)\r\n    }\r\n    return byName\r\n  }\r\n\r\n  get entitiesRenderingCount (): number {\r\n    return Object.values(this.entities).filter(entity => entity.visible).length\r\n  }\r\n\r\n  getDebugString (): string {\r\n    const totalEntities = Object.keys(this.entities).length\r\n    const visibleEntities = this.entitiesRenderingCount\r\n\r\n    const playerEntities = Object.values(this.entities).filter(entity => entity.playerObject)\r\n    const visiblePlayerEntities = playerEntities.filter(entity => entity.visible)\r\n\r\n    return `${visibleEntities}/${totalEntities} ${visiblePlayerEntities.length}/${playerEntities.length}`\r\n  }\r\n\r\n  constructor (public worldRenderer: WorldRendererThree) {\r\n    this.debugMode = 'none'\r\n    this.onSkinUpdate = () => { }\r\n    this.watchResourcesUpdates()\r\n  }\r\n\r\n  handlePlayerEntity (playerData: SceneEntity['originalEntity']) {\r\n    // Create player entity if it doesn't exist\r\n    if (!this.playerEntity) {\r\n      // Create the player entity similar to how normal entities are created\r\n      const group = new THREE.Group() as unknown as SceneEntity\r\n      group.originalEntity = { ...playerData, name: 'player' } as SceneEntity['originalEntity']\r\n\r\n      const wrapper = new THREE.Group()\r\n      const playerObject = this.setupPlayerObject(playerData, wrapper, {})\r\n      group.playerObject = playerObject\r\n      group.add(wrapper)\r\n\r\n      group.name = 'player_entity'\r\n      this.playerEntity = group\r\n      this.worldRenderer.scene.add(group)\r\n\r\n      void this.updatePlayerSkin(playerData.id, playerData.username, playerData.uuid ?? undefined, stevePngUrl)\r\n    }\r\n\r\n    // Update position and rotation\r\n    if (playerData.position) {\r\n      this.playerEntity.position.set(playerData.position.x, playerData.position.y, playerData.position.z)\r\n    }\r\n    if (playerData.yaw !== undefined) {\r\n      this.playerEntity.rotation.y = playerData.yaw\r\n    }\r\n\r\n    this.updateEntityEquipment(this.playerEntity, playerData)\r\n  }\r\n\r\n  clear () {\r\n    for (const mesh of Object.values(this.entities)) {\r\n      this.worldRenderer.scene.remove(mesh)\r\n      disposeObject(mesh)\r\n    }\r\n    this.entities = {}\r\n\r\n    // Clean up player entity\r\n    if (this.playerEntity) {\r\n      this.worldRenderer.scene.remove(this.playerEntity)\r\n      disposeObject(this.playerEntity)\r\n      this.playerEntity = null\r\n    }\r\n  }\r\n\r\n  reloadEntities () {\r\n    for (const entity of Object.values(this.entities)) {\r\n      // update all entities textures like held items, armour, etc\r\n      // todo update entity textures itself\r\n      this.update({ ...entity.originalEntity, delete: true, } as SceneEntity['originalEntity'], {})\r\n      this.update(entity.originalEntity, {})\r\n    }\r\n  }\r\n\r\n  watchResourcesUpdates () {\r\n    this.worldRenderer.resourcesManager.on('assetsTexturesUpdated', () => this.reloadEntities())\r\n    this.worldRenderer.resourcesManager.on('assetsInventoryReady', () => this.reloadEntities())\r\n  }\r\n\r\n  setDebugMode (mode: string, entity: THREE.Object3D | null = null) {\r\n    this.debugMode = mode\r\n    for (const mesh of entity ? [entity] : Object.values(this.entities)) {\r\n      const boxHelper = mesh.children.find(c => c.name === 'debug')!\r\n      boxHelper.visible = false\r\n      if (this.debugMode === 'basic') {\r\n        boxHelper.visible = true\r\n      }\r\n      // todo advanced\r\n    }\r\n  }\r\n\r\n  setRendering (rendering: boolean, entity: THREE.Object3D | null = null) {\r\n    this.currentlyRendering = rendering\r\n    for (const ent of entity ? [entity] : Object.values(this.entities)) {\r\n      if (rendering) {\r\n        if (!this.worldRenderer.scene.children.includes(ent)) this.worldRenderer.scene.add(ent)\r\n      } else {\r\n        this.worldRenderer.scene.remove(ent)\r\n      }\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const renderEntitiesConfig = this.worldRenderer.worldRendererConfig.renderEntities\r\n    if (renderEntitiesConfig !== this.currentlyRendering) {\r\n      this.setRendering(renderEntitiesConfig)\r\n    }\r\n\r\n    const dt = this.clock.getDelta()\r\n    const botPos = this.worldRenderer.viewerChunkPosition\r\n    const VISIBLE_DISTANCE = 10 * 10\r\n\r\n    // Update regular entities\r\n    for (const [entityId, entity] of [...Object.entries(this.entities), ['player_entity', this.playerEntity] as [string, SceneEntity | null]]) {\r\n      if (!entity) continue\r\n      const { playerObject } = entity\r\n\r\n      // Update animations\r\n      if (playerObject?.animation) {\r\n        playerObject.animation.update(playerObject, dt)\r\n      }\r\n\r\n      // Update visibility based on distance and chunk load status\r\n      if (botPos && entity.position) {\r\n        const dx = entity.position.x - botPos.x\r\n        const dy = entity.position.y - botPos.y\r\n        const dz = entity.position.z - botPos.z\r\n        const distanceSquared = dx * dx + dy * dy + dz * dz\r\n\r\n        // Entity is visible if within 20 blocks OR in a finished chunk\r\n        entity.visible = !!(distanceSquared < VISIBLE_DISTANCE || this.worldRenderer.shouldObjectVisible(entity))\r\n\r\n        this.maybeRenderPlayerSkin(entityId)\r\n      }\r\n\r\n      if (entity.visible) {\r\n        // Update armor positions\r\n        this.syncArmorPositions(entity)\r\n      }\r\n\r\n      if (entityId === 'player_entity') {\r\n        entity.visible = this.worldRenderer.playerStateUtils.isThirdPerson()\r\n\r\n        if (entity.visible) {\r\n          // sync\r\n          const yOffset = this.worldRenderer.playerStateReactive.eyeHeight\r\n          const pos = this.worldRenderer.cameraObject.position.clone().add(new THREE.Vector3(0, -yOffset, 0))\r\n          entity.position.set(pos.x, pos.y, pos.z)\r\n\r\n          const rotation = this.worldRenderer.cameraShake.getBaseRotation()\r\n          entity.rotation.set(0, rotation.yaw, 0)\r\n\r\n          // Sync head rotation\r\n          entity.traverse((c) => {\r\n            if (c.name === 'head') {\r\n              c.rotation.set(-rotation.pitch, 0, 0)\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private syncArmorPositions (entity: SceneEntity) {\r\n    if (!entity.playerObject) return\r\n\r\n    // todo-low use property access for less loop iterations (small performance gain)\r\n    entity.traverse((armor) => {\r\n      if (!armor.name.startsWith('geometry_armor_')) return\r\n\r\n      const { skin } = entity.playerObject!\r\n\r\n      switch (armor.name) {\r\n        case 'geometry_armor_head':\r\n          // Head armor sync\r\n          if (armor.children[0]?.children[0]) {\r\n            armor.children[0].children[0].rotation.set(\r\n              -skin.head.rotation.x,\r\n              skin.head.rotation.y,\r\n              skin.head.rotation.z,\r\n              skin.head.rotation.order\r\n            )\r\n          }\r\n          break\r\n\r\n        case 'geometry_armor_legs':\r\n          // Legs armor sync\r\n          if (armor.children[0]) {\r\n            // Left leg\r\n            if (armor.children[0].children[2]) {\r\n              armor.children[0].children[2].rotation.set(\r\n                -skin.leftLeg.rotation.x,\r\n                skin.leftLeg.rotation.y,\r\n                skin.leftLeg.rotation.z,\r\n                skin.leftLeg.rotation.order\r\n              )\r\n            }\r\n            // Right leg\r\n            if (armor.children[0].children[1]) {\r\n              armor.children[0].children[1].rotation.set(\r\n                -skin.rightLeg.rotation.x,\r\n                skin.rightLeg.rotation.y,\r\n                skin.rightLeg.rotation.z,\r\n                skin.rightLeg.rotation.order\r\n              )\r\n            }\r\n          }\r\n          break\r\n\r\n        case 'geometry_armor_feet':\r\n          // Boots armor sync\r\n          if (armor.children[0]) {\r\n            // Right boot\r\n            if (armor.children[0].children[0]) {\r\n              armor.children[0].children[0].rotation.set(\r\n                -skin.rightLeg.rotation.x,\r\n                skin.rightLeg.rotation.y,\r\n                skin.rightLeg.rotation.z,\r\n                skin.rightLeg.rotation.order\r\n              )\r\n            }\r\n            // Left boot (reversed Z rotation)\r\n            if (armor.children[0].children[1]) {\r\n              armor.children[0].children[1].rotation.set(\r\n                -skin.leftLeg.rotation.x,\r\n                skin.leftLeg.rotation.y,\r\n                -skin.leftLeg.rotation.z,\r\n                skin.leftLeg.rotation.order\r\n              )\r\n            }\r\n          }\r\n          break\r\n      }\r\n    })\r\n  }\r\n\r\n  getPlayerObject (entityId: string | number) {\r\n    if (this.playerEntity?.originalEntity.id === entityId) return this.playerEntity?.playerObject\r\n    const playerObject = this.entities[entityId]?.playerObject\r\n    return playerObject\r\n  }\r\n\r\n  uuidPerSkinUrlsCache = {} as Record<string, { skinUrl?: string, capeUrl?: string }>\r\n\r\n  private isCanvasBlank (canvas: HTMLCanvasElement): boolean {\r\n    return !canvas.getContext('2d')\r\n      ?.getImageData(0, 0, canvas.width, canvas.height).data\r\n      .some(channel => channel !== 0)\r\n  }\r\n\r\n  // todo true/undefined doesnt reset the skin to the default one\r\n  // eslint-disable-next-line max-params\r\n  async updatePlayerSkin (entityId: string | number, username: string | undefined, uuidCache: string | undefined, skinUrl: string | true, capeUrl: string | true | undefined = undefined) {\r\n    const isCustomSkin = skinUrl !== stevePngUrl\r\n    if (isCustomSkin) {\r\n      this.loadedSkinEntityIds.add(String(entityId))\r\n    }\r\n    if (uuidCache) {\r\n      if (typeof skinUrl === 'string' || typeof capeUrl === 'string') this.uuidPerSkinUrlsCache[uuidCache] = {}\r\n      if (typeof skinUrl === 'string') this.uuidPerSkinUrlsCache[uuidCache].skinUrl = skinUrl\r\n      if (typeof capeUrl === 'string') this.uuidPerSkinUrlsCache[uuidCache].capeUrl = capeUrl\r\n      if (skinUrl === true) {\r\n        skinUrl = this.uuidPerSkinUrlsCache[uuidCache]?.skinUrl ?? skinUrl\r\n      }\r\n      capeUrl ??= this.uuidPerSkinUrlsCache[uuidCache]?.capeUrl\r\n    }\r\n\r\n    const playerObject = this.getPlayerObject(entityId)\r\n    if (!playerObject) return\r\n\r\n    if (skinUrl === true) {\r\n      if (!username) return\r\n      const newSkinUrl = await loadSkinFromUsername(username, 'skin')\r\n      if (!this.getPlayerObject(entityId)) return\r\n      if (!newSkinUrl) return\r\n      skinUrl = newSkinUrl\r\n    }\r\n\r\n    if (typeof skinUrl !== 'string') throw new Error('Invalid skin url')\r\n    const renderEars = this.worldRenderer.worldRendererConfig.renderEars || username === 'deadmau5'\r\n    void this.loadAndApplySkin(entityId, skinUrl, renderEars).then(async () => {\r\n      if (capeUrl) {\r\n        if (capeUrl === true && username) {\r\n          const newCapeUrl = await loadSkinFromUsername(username, 'cape')\r\n          if (!this.getPlayerObject(entityId)) return\r\n          if (!newCapeUrl) return\r\n          capeUrl = newCapeUrl\r\n        }\r\n        if (typeof capeUrl === 'string') {\r\n          void this.loadAndApplyCape(entityId, capeUrl)\r\n        }\r\n      }\r\n    })\r\n\r\n\r\n    playerObject.cape.visible = false\r\n    if (!capeUrl) {\r\n      playerObject.backEquipment = null\r\n      playerObject.elytra.map = null\r\n      if (playerObject.cape.map) {\r\n        playerObject.cape.map.dispose()\r\n      }\r\n      playerObject.cape.map = null\r\n    }\r\n  }\r\n\r\n  private async loadAndApplySkin (entityId: string | number, skinUrl: string, renderEars: boolean) {\r\n    let playerObject = this.getPlayerObject(entityId)\r\n    if (!playerObject) return\r\n\r\n    try {\r\n      let playerCustomSkinImage: ImageBitmap | undefined\r\n\r\n      playerObject = this.getPlayerObject(entityId)\r\n      if (!playerObject) return\r\n\r\n      let skinTexture: THREE.Texture\r\n      let skinCanvas: OffscreenCanvas\r\n      if (skinUrl === stevePngUrl) {\r\n        skinTexture = await steveTexture\r\n        const canvas = createCanvas(64, 64)\r\n        const ctx = canvas.getContext('2d')\r\n        if (!ctx) throw new Error('Failed to get context')\r\n        ctx.drawImage(skinTexture.image, 0, 0)\r\n        skinCanvas = canvas\r\n      } else {\r\n        const { canvas, image } = await loadSkinImage(skinUrl)\r\n        playerCustomSkinImage = image\r\n        skinTexture = new THREE.CanvasTexture(canvas)\r\n        skinCanvas = canvas\r\n      }\r\n\r\n      skinTexture.magFilter = THREE.NearestFilter\r\n      skinTexture.minFilter = THREE.NearestFilter\r\n      skinTexture.needsUpdate = true\r\n      playerObject.skin.map = skinTexture as any\r\n      playerObject.skin.modelType = inferModelType(skinCanvas)\r\n\r\n      let earsCanvas: HTMLCanvasElement | undefined\r\n      if (!playerCustomSkinImage) {\r\n        renderEars = false\r\n      } else if (renderEars) {\r\n        earsCanvas = document.createElement('canvas')\r\n        loadEarsToCanvasFromSkin(earsCanvas, playerCustomSkinImage)\r\n        renderEars = !this.isCanvasBlank(earsCanvas)\r\n      }\r\n      if (renderEars) {\r\n        const earsTexture = new THREE.CanvasTexture(earsCanvas!)\r\n        earsTexture.magFilter = THREE.NearestFilter\r\n        earsTexture.minFilter = THREE.NearestFilter\r\n        earsTexture.needsUpdate = true\r\n        //@ts-expect-error\r\n        playerObject.ears.map = earsTexture\r\n        playerObject.ears.visible = true\r\n      } else {\r\n        playerObject.ears.map = null\r\n        playerObject.ears.visible = false\r\n      }\r\n      this.onSkinUpdate?.()\r\n    } catch (error) {\r\n      console.error('Error loading skin:', error)\r\n    }\r\n  }\r\n\r\n  private async loadAndApplyCape (entityId: string | number, capeUrl: string) {\r\n    let playerObject = this.getPlayerObject(entityId)\r\n    if (!playerObject) return\r\n\r\n    try {\r\n      const { canvas: capeCanvas, image: capeImage } = await loadSkinImage(capeUrl)\r\n\r\n      playerObject = this.getPlayerObject(entityId)\r\n      if (!playerObject) return\r\n\r\n      loadCapeToCanvas(capeCanvas, capeImage)\r\n      const capeTexture = new THREE.CanvasTexture(capeCanvas)\r\n      capeTexture.magFilter = THREE.NearestFilter\r\n      capeTexture.minFilter = THREE.NearestFilter\r\n      capeTexture.needsUpdate = true\r\n      //@ts-expect-error\r\n      playerObject.cape.map = capeTexture\r\n      playerObject.cape.visible = true\r\n      //@ts-expect-error\r\n      playerObject.elytra.map = capeTexture\r\n      this.onSkinUpdate?.()\r\n\r\n      if (!playerObject.backEquipment) {\r\n        playerObject.backEquipment = 'cape'\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading cape:', error)\r\n    }\r\n  }\r\n\r\n  debugSwingArm () {\r\n    const playerObject = Object.values(this.entities).find(entity => entity.playerObject?.animation instanceof WalkingGeneralSwing)\r\n    if (!playerObject) return\r\n    (playerObject.playerObject!.animation as WalkingGeneralSwing).swingArm()\r\n  }\r\n\r\n  playAnimation (entityPlayerId, animation: 'walking' | 'running' | 'oneSwing' | 'idle' | 'crouch' | 'crouchWalking') {\r\n    // TODO CLEANUP!\r\n    // Handle special player entity ID for bot entity in third person\r\n    if (entityPlayerId === 'player_entity' && this.playerEntity?.playerObject) {\r\n      const { playerObject } = this.playerEntity\r\n      if (animation === 'oneSwing') {\r\n        if (!(playerObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\r\n        playerObject.animation.swingArm()\r\n        return\r\n      }\r\n\r\n      if (playerObject.animation instanceof WalkingGeneralSwing) {\r\n        playerObject.animation.switchAnimationCallback = () => {\r\n          if (!(playerObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\r\n          playerObject.animation.isMoving = animation === 'walking' || animation === 'running' || animation === 'crouchWalking'\r\n          playerObject.animation.isRunning = animation === 'running'\r\n          playerObject.animation.isCrouched = animation === 'crouch' || animation === 'crouchWalking'\r\n        }\r\n      }\r\n      return\r\n    }\r\n\r\n    // Handle regular entities\r\n    const playerObject = this.getPlayerObject(entityPlayerId)\r\n    if (playerObject) {\r\n      if (animation === 'oneSwing') {\r\n        if (!(playerObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\r\n        playerObject.animation.swingArm()\r\n        return\r\n      }\r\n\r\n      if (playerObject.animation instanceof WalkingGeneralSwing) {\r\n        playerObject.animation.switchAnimationCallback = () => {\r\n          if (!(playerObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\r\n          playerObject.animation.isMoving = animation === 'walking' || animation === 'running' || animation === 'crouchWalking'\r\n          playerObject.animation.isRunning = animation === 'running'\r\n          playerObject.animation.isCrouched = animation === 'crouch' || animation === 'crouchWalking'\r\n        }\r\n      }\r\n      return\r\n    }\r\n\r\n    // Handle player entity (for third person view) - fallback for backwards compatibility\r\n    if (this.playerEntity?.playerObject) {\r\n      const { playerObject: playerEntityObject } = this.playerEntity\r\n      if (animation === 'oneSwing') {\r\n        if (!(playerEntityObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\r\n        playerEntityObject.animation.swingArm()\r\n        return\r\n      }\r\n\r\n      if (playerEntityObject.animation instanceof WalkingGeneralSwing) {\r\n        playerEntityObject.animation.switchAnimationCallback = () => {\r\n          if (!(playerEntityObject.animation instanceof WalkingGeneralSwing)) throw new Error('Expected WalkingGeneralSwing')\r\n          playerEntityObject.animation.isMoving = animation === 'walking' || animation === 'running' || animation === 'crouchWalking'\r\n          playerEntityObject.animation.isRunning = animation === 'running'\r\n          playerEntityObject.animation.isCrouched = animation === 'crouch' || animation === 'crouchWalking'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  parseEntityLabel (jsonLike) {\r\n    if (!jsonLike) return\r\n    try {\r\n      if (jsonLike.type === 'string') {\r\n        return jsonLike.value\r\n      }\r\n      const parsed = typeof jsonLike === 'string' ? mojangson.simplify(mojangson.parse(jsonLike)) : nbt.simplify(jsonLike)\r\n      const text = flat(parsed).map(this.textFromComponent)\r\n      return text.join('')\r\n    } catch (err) {\r\n      return jsonLike\r\n    }\r\n  }\r\n\r\n  private textFromComponent (component) {\r\n    return typeof component === 'string' ? component : component.text ?? ''\r\n  }\r\n\r\n  getItemMesh (item, specificProps: ItemSpecificContextProperties, faceCamera = false, previousModel?: string) {\r\n    if (!item.nbt && item.nbtData) item.nbt = item.nbtData\r\n    const textureUv = this.worldRenderer.getItemRenderData(item, specificProps)\r\n    if (previousModel && previousModel === textureUv?.modelName) return undefined\r\n\r\n    if (textureUv && 'resolvedModel' in textureUv) {\r\n      const mesh = getBlockMeshFromModel(this.worldRenderer.material, textureUv.resolvedModel, textureUv.modelName, this.worldRenderer.resourcesManager.currentResources.worldBlockProvider!)\r\n      let SCALE = 1\r\n      if (specificProps['minecraft:display_context'] === 'ground') {\r\n        SCALE = 0.5\r\n      } else if (specificProps['minecraft:display_context'] === 'thirdperson') {\r\n        SCALE = 6\r\n      }\r\n      mesh.scale.set(SCALE, SCALE, SCALE)\r\n      const outerGroup = new THREE.Group()\r\n      outerGroup.add(mesh)\r\n      return {\r\n        mesh: outerGroup,\r\n        isBlock: true,\r\n        modelName: textureUv.modelName,\r\n      }\r\n    }\r\n\r\n    // Render proper 3D model for items\r\n    if (textureUv) {\r\n      const textureThree = textureUv.renderInfo?.texture === 'blocks' ? this.worldRenderer.material.map! : this.worldRenderer.itemsTexture\r\n      const { u, v, su, sv } = textureUv\r\n      const sizeX = su ?? 1 // su is actually width\r\n      const sizeY = sv ?? 1 // sv is actually height\r\n\r\n      // Use the new unified item mesh function\r\n      const result = createItemMesh(textureThree, {\r\n        u,\r\n        v,\r\n        sizeX,\r\n        sizeY\r\n      }, {\r\n        faceCamera,\r\n        use3D: !faceCamera, // Only use 3D for non-camera-facing items\r\n      })\r\n\r\n      let SCALE = 1\r\n      if (specificProps['minecraft:display_context'] === 'ground') {\r\n        SCALE = 0.5\r\n      } else if (specificProps['minecraft:display_context'] === 'thirdperson') {\r\n        SCALE = 6\r\n      }\r\n      result.mesh.scale.set(SCALE, SCALE, SCALE)\r\n\r\n      return {\r\n        mesh: result.mesh,\r\n        isBlock: false,\r\n        modelName: textureUv.modelName,\r\n        cleanup: result.cleanup\r\n      }\r\n    }\r\n  }\r\n\r\n  setVisible (mesh: THREE.Object3D, visible: boolean) {\r\n    //mesh.visible = visible\r\n    //TODO: Fix workaround for visibility setting\r\n    if (visible) {\r\n      mesh.scale.set(1, 1, 1)\r\n    } else {\r\n      mesh.scale.set(0, 0, 0)\r\n    }\r\n  }\r\n\r\n  update (entity: SceneEntity['originalEntity'], overrides) {\r\n    const isPlayerModel = entity.name === 'player'\r\n    if (entity.name === 'zombie_villager' || entity.name === 'husk') {\r\n      overrides.texture = `textures/1.16.4/entity/${entity.name === 'zombie_villager' ? 'zombie_villager/zombie_villager.png' : `zombie/${entity.name}.png`}`\r\n    }\r\n    if (entity.name === 'glow_item_frame') {\r\n      if (!overrides.textures) overrides.textures = []\r\n      overrides.textures['background'] = 'block:glow_item_frame'\r\n    }\r\n    // this can be undefined in case where packet entity_destroy was sent twice (so it was already deleted)\r\n    let e = this.entities[entity.id]\r\n    const justAdded = !e\r\n\r\n    if (entity.delete) {\r\n      if (!e) return\r\n      if (e.additionalCleanup) e.additionalCleanup()\r\n      e.traverse(c => {\r\n        if (c['additionalCleanup']) c['additionalCleanup']()\r\n      })\r\n      this.onRemoveEntity(entity)\r\n      this.worldRenderer.scene.remove(e)\r\n      disposeObject(e)\r\n      // todo dispose textures as well ?\r\n      delete this.entities[entity.id]\r\n      return\r\n    }\r\n\r\n    let mesh: THREE.Object3D | undefined\r\n    if (e === undefined) {\r\n      const group = new THREE.Group() as unknown as SceneEntity\r\n      group.originalEntity = entity\r\n      if (entity.name === 'item' || entity.name === 'tnt' || entity.name === 'falling_block' || entity.name === 'snowball'\r\n        || entity.name === 'egg' || entity.name === 'ender_pearl' || entity.name === 'experience_bottle'\r\n        || entity.name === 'splash_potion' || entity.name === 'lingering_potion') {\r\n        const item = entity.name === 'tnt' || entity.type === 'projectile'\r\n          ? { name: entity.name }\r\n          : entity.name === 'falling_block'\r\n            ? { blockState: entity['objectData'] }\r\n            : entity.metadata?.find((m: any) => typeof m === 'object' && m?.itemCount)\r\n        if (item) {\r\n          const object = this.getItemMesh(item, {\r\n            'minecraft:display_context': 'ground',\r\n          }, entity.type === 'projectile')\r\n          if (object) {\r\n            mesh = object.mesh\r\n            if (entity.name === 'item' || entity.type === 'projectile') {\r\n              mesh.scale.set(0.5, 0.5, 0.5)\r\n              mesh.position.set(0, entity.name === 'item' ? 0.2 : 0.1, 0)\r\n            } else {\r\n              mesh.scale.set(2, 2, 2)\r\n              mesh.position.set(0, 0.5, 0)\r\n            }\r\n            // set faces\r\n            // mesh.position.set(targetPos.x + 0.5 + 2, targetPos.y + 0.5, targetPos.z + 0.5)\r\n            // viewer.scene.add(mesh)\r\n            if (entity.name === 'item') {\r\n              const clock = new THREE.Clock()\r\n              mesh.onBeforeRender = () => {\r\n                const delta = clock.getDelta()\r\n                mesh!.rotation.y += delta\r\n              }\r\n            }\r\n\r\n            // TNT blinking\r\n            // if (entity.name === 'tnt') {\r\n            //   let lastBlink = 0\r\n            //   const blinkInterval = 500 // ms between blinks\r\n            //   mesh.onBeforeRender = () => {\r\n            //     const now = Date.now()\r\n            //     if (now - lastBlink > blinkInterval) {\r\n            //       lastBlink = now\r\n            //       mesh.traverse((child) => {\r\n            //         if (child instanceof THREE.Mesh) {\r\n            //           const material = child.material as THREE.MeshLambertMaterial\r\n            //           material.color.set(material.color?.equals(new THREE.Color(0xff_ff_ff))\r\n            //             ? new THREE.Color(0xff_00_00)\r\n            //             : new THREE.Color(0xff_ff_ff))\r\n            //         }\r\n            //       })\r\n            //     }\r\n            //   }\r\n            // }\r\n\r\n            group.additionalCleanup = () => {\r\n              // important: avoid texture memory leak and gpu slowdown\r\n              if (object.cleanup) {\r\n                object.cleanup()\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else if (isPlayerModel) {\r\n        const wrapper = new THREE.Group()\r\n        const playerObject = this.setupPlayerObject(entity, wrapper, overrides)\r\n        group.playerObject = playerObject\r\n        mesh = wrapper\r\n\r\n        if (entity.username) {\r\n          const nametag = addNametag(entity, { fontFamily: 'mojangles' }, wrapper, this.worldRenderer.version)\r\n          if (nametag) {\r\n            nametag.position.y = playerObject.position.y + playerObject.scale.y * 16 + 3\r\n            nametag.scale.multiplyScalar(12)\r\n          }\r\n        }\r\n      } else {\r\n        mesh = getEntityMesh(entity, this.worldRenderer, this.entitiesOptions, { ...overrides, customModel: entity['customModel'] })\r\n      }\r\n      if (!mesh) return\r\n      mesh.name = 'mesh'\r\n      // set initial position so there are no weird jumps update after\r\n      const pos = entity.pos ?? entity.position\r\n      group.position.set(pos.x, pos.y, pos.z)\r\n\r\n      // todo use width and height instead\r\n      const boxHelper = new THREE.BoxHelper(\r\n        mesh,\r\n        entity.type === 'hostile' ? 0xff_00_00 :\r\n          entity.type === 'mob' ? 0x00_ff_00 :\r\n            entity.type === 'player' ? 0x00_00_ff :\r\n              0xff_a5_00,\r\n      )\r\n      boxHelper.name = 'debug'\r\n      group.add(mesh)\r\n      group.add(boxHelper)\r\n      boxHelper.visible = false\r\n      this.worldRenderer.scene.add(group)\r\n\r\n      e = group\r\n      e.name = 'entity'\r\n      e['realName'] = entity.name\r\n      this.entities[entity.id] = e\r\n\r\n      this.onAddEntity(entity)\r\n\r\n      if (isPlayerModel) {\r\n        void this.updatePlayerSkin(entity.id, entity.username, overrides?.texture ? entity.uuid : undefined, overrides?.texture || stevePngUrl)\r\n      }\r\n      this.setDebugMode(this.debugMode, group)\r\n      this.setRendering(this.currentlyRendering, group)\r\n    } else {\r\n      mesh = e.children.find(c => c.name === 'mesh')\r\n    }\r\n\r\n    // Update equipment\r\n    this.updateEntityEquipment(e, entity)\r\n\r\n    const meta = getGeneralEntitiesMetadata(entity)\r\n\r\n    const isInvisible = ((entity.metadata?.[0] ?? 0) as unknown as number) & 0x20 || (this.worldRenderer.playerStateReactive.cameraSpectatingEntity === entity.id && this.worldRenderer.playerStateUtils.isSpectator())\r\n    for (const child of mesh!.children ?? []) {\r\n      if (child.name !== 'nametag') {\r\n        child.visible = !isInvisible\r\n      }\r\n    }\r\n    // ---\r\n    // set baby size\r\n    if (meta.baby) {\r\n      e.scale.set(0.5, 0.5, 0.5)\r\n    } else {\r\n      e.scale.set(1, 1, 1)\r\n    }\r\n    // entity specific meta\r\n    const textDisplayMeta = getSpecificEntityMetadata('text_display', entity)\r\n    const displayTextRaw = textDisplayMeta?.text || meta.custom_name_visible && meta.custom_name\r\n    if (entity.name !== 'player' && displayTextRaw) {\r\n      const nameTagFixed = textDisplayMeta && (textDisplayMeta.billboard_render_constraints === 'fixed' || !textDisplayMeta.billboard_render_constraints)\r\n      const nameTagBackgroundColor = (textDisplayMeta && (parseInt(textDisplayMeta.style_flags, 10) & 0x04) === 0) ? toRgba(textDisplayMeta.background_color) : undefined\r\n      let nameTagTextOpacity: any\r\n      if (textDisplayMeta?.text_opacity) {\r\n        const rawOpacity = parseInt(textDisplayMeta?.text_opacity, 10)\r\n        nameTagTextOpacity = rawOpacity > 0 ? rawOpacity : 256 - rawOpacity\r\n      }\r\n      addNametag(\r\n        { ...entity, username: typeof displayTextRaw === 'string' ? mojangson.simplify(mojangson.parse(displayTextRaw)) : nbt.simplify(displayTextRaw),\r\n          nameTagBackgroundColor, nameTagTextOpacity, nameTagFixed,\r\n          nameTagScale: textDisplayMeta?.scale, nameTagTranslation: textDisplayMeta && (textDisplayMeta.translation || new THREE.Vector3(0, 0, 0)),\r\n          nameTagRotationLeft: toQuaternion(textDisplayMeta?.left_rotation), nameTagRotationRight: toQuaternion(textDisplayMeta?.right_rotation) },\r\n        this.entitiesOptions,\r\n        mesh,\r\n        this.worldRenderer.version\r\n      )\r\n    }\r\n\r\n    const armorStandMeta = getSpecificEntityMetadata('armor_stand', entity)\r\n    if (armorStandMeta) {\r\n      const isSmall = (parseInt(armorStandMeta.client_flags, 10) & 0x01) !== 0\r\n      const hasArms = (parseInt(armorStandMeta.client_flags, 10) & 0x04) !== 0\r\n      const hasBasePlate = (parseInt(armorStandMeta.client_flags, 10) & 0x08) === 0\r\n      const isMarker = (parseInt(armorStandMeta.client_flags, 10) & 0x10) !== 0\r\n      mesh!.castShadow = !isMarker\r\n      mesh!.receiveShadow = !isMarker\r\n      if (isSmall) {\r\n        e.scale.set(0.5, 0.5, 0.5)\r\n      } else {\r\n        e.scale.set(1, 1, 1)\r\n      }\r\n      e.traverse(c => {\r\n        switch (c.name) {\r\n          case 'bone_baseplate':\r\n            this.setVisible(c, hasBasePlate)\r\n            c.rotation.y = -e.rotation.y\r\n            break\r\n          case 'bone_head':\r\n            if (armorStandMeta.head_pose) {\r\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.head_pose))\r\n            }\r\n            break\r\n          case 'bone_body':\r\n            if (armorStandMeta.body_pose) {\r\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.body_pose))\r\n            }\r\n            break\r\n          case 'bone_rightarm':\r\n            if (c.parent?.name !== 'bone_armor') {\r\n              this.setVisible(c, hasArms)\r\n            }\r\n            if (armorStandMeta.left_arm_pose) {\r\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.left_arm_pose))\r\n            } else {\r\n              c.setRotationFromEuler(poseToEuler({ 'yaw': -10, 'pitch': -10, 'roll': 0 }))\r\n            }\r\n            break\r\n          case 'bone_leftarm':\r\n            if (c.parent?.name !== 'bone_armor') {\r\n              this.setVisible(c, hasArms)\r\n            }\r\n            if (armorStandMeta.right_arm_pose) {\r\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.right_arm_pose))\r\n            } else {\r\n              c.setRotationFromEuler(poseToEuler({ 'yaw': 10, 'pitch': -10, 'roll': 0 }))\r\n            }\r\n            break\r\n          case 'bone_rightleg':\r\n            if (armorStandMeta.left_leg_pose) {\r\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.left_leg_pose))\r\n            } else {\r\n              c.setRotationFromEuler(poseToEuler({ 'yaw': -1, 'pitch': -1, 'roll': 0 }))\r\n            }\r\n            break\r\n          case 'bone_leftleg':\r\n            if (armorStandMeta.right_leg_pose) {\r\n              c.setRotationFromEuler(poseToEuler(armorStandMeta.right_leg_pose))\r\n            } else {\r\n              c.setRotationFromEuler(poseToEuler({ 'yaw': 1, 'pitch': 1, 'roll': 0 }))\r\n            }\r\n            break\r\n        }\r\n      })\r\n    }\r\n\r\n    // todo handle map, map_chunks events\r\n    let itemFrameMeta = getSpecificEntityMetadata('item_frame', entity)\r\n    if (!itemFrameMeta) {\r\n      itemFrameMeta = getSpecificEntityMetadata('glow_item_frame', entity)\r\n    }\r\n    if (itemFrameMeta) {\r\n      // TODO: fix type\r\n      // todo! fix errors in mc-data (no entities data prior 1.18.2)\r\n      const item = (itemFrameMeta?.item ?? entity.metadata?.[8]) as any as { itemId, blockId, components, nbtData: { value: { map: { value: number } } } }\r\n      mesh!.scale.set(1, 1, 1)\r\n      mesh!.position.set(0, 0, -0.5)\r\n\r\n      e.rotation.x = -entity.pitch\r\n      e.children.find(c => {\r\n        if (c.name.startsWith('map_')) {\r\n          disposeObject(c)\r\n          const existingMapNumber = parseInt(c.name.split('_')[1], 10)\r\n          this.itemFrameMaps[existingMapNumber] = this.itemFrameMaps[existingMapNumber]?.filter(mesh => mesh !== c)\r\n          if (c instanceof THREE.Mesh) {\r\n            c.material?.map?.dispose()\r\n          }\r\n          return true\r\n        } else if (c.name === 'item') {\r\n          disposeObject(c)\r\n          return true\r\n        }\r\n        return false\r\n      })?.removeFromParent()\r\n\r\n      if (item && (item.itemId ?? item.blockId ?? 0) !== 0) {\r\n        // Get rotation from metadata, default to 0 if not present\r\n        // Rotation is stored in 45° increments (0-7) for items, 90° increments (0-3) for maps\r\n        const rotation = (itemFrameMeta.rotation as any as number) ?? 0\r\n        const mapNumber = item.nbtData?.value?.map?.value ?? item.components?.find(x => x.type === 'map_id')?.data\r\n        if (mapNumber) {\r\n          // TODO: Use proper larger item frame model when a map exists\r\n          mesh!.scale.set(16 / 12, 16 / 12, 1)\r\n          // Handle map rotation (4 possibilities, 90° increments)\r\n          this.addMapModel(e, mapNumber, rotation)\r\n        } else {\r\n          // Handle regular item rotation (8 possibilities, 45° increments)\r\n          const itemMesh = this.getItemMesh(item, {\r\n            'minecraft:display_context': 'fixed',\r\n          })\r\n          if (itemMesh) {\r\n            itemMesh.mesh.position.set(0, 0, -0.05)\r\n            // itemMesh.mesh.position.set(0, 0, 0.43)\r\n            if (itemMesh.isBlock) {\r\n              itemMesh.mesh.scale.set(0.25, 0.25, 0.25)\r\n            } else {\r\n              itemMesh.mesh.scale.set(0.5, 0.5, 0.5)\r\n            }\r\n            // Rotate 180° around Y axis first\r\n            itemMesh.mesh.rotateY(Math.PI)\r\n            // Then apply the 45° increment rotation\r\n            itemMesh.mesh.rotateZ(-rotation * Math.PI / 4)\r\n            itemMesh.mesh.name = 'item'\r\n            e.add(itemMesh.mesh)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (entity.username !== undefined) {\r\n      e.username = entity.username\r\n    }\r\n\r\n    this.updateNameTagVisibility(e)\r\n\r\n    this.updateEntityPosition(entity, justAdded, overrides)\r\n  }\r\n\r\n  updateEntityPosition (entity: import('prismarine-entity').Entity, justAdded: boolean, overrides: { rotation?: { head?: { y: number, x: number } } }) {\r\n    const e = this.entities[entity.id]\r\n    if (!e) return\r\n    const ANIMATION_DURATION = justAdded ? 0 : TWEEN_DURATION\r\n    if (entity.position) {\r\n      new TWEEN.Tween(e.position).to({ x: entity.position.x, y: entity.position.y, z: entity.position.z }, ANIMATION_DURATION).start()\r\n    }\r\n    if (entity.yaw) {\r\n      const da = (entity.yaw - e.rotation.y) % (Math.PI * 2)\r\n      const dy = 2 * da % (Math.PI * 2) - da\r\n      new TWEEN.Tween(e.rotation).to({ y: e.rotation.y + dy }, ANIMATION_DURATION).start()\r\n    }\r\n\r\n    if (e?.playerObject && overrides?.rotation?.head) {\r\n      const { playerObject } = e\r\n      const headRotationDiff = overrides.rotation.head.y ? overrides.rotation.head.y - entity.yaw : 0\r\n      playerObject.skin.head.rotation.y = -headRotationDiff\r\n      playerObject.skin.head.rotation.x = overrides.rotation.head.x ? - overrides.rotation.head.x : 0\r\n    }\r\n  }\r\n\r\n  onAddEntity (entity: import('prismarine-entity').Entity) {\r\n  }\r\n\r\n  loadedSkinEntityIds = new Set<string>()\r\n  maybeRenderPlayerSkin (entityId: string) {\r\n    let mesh = this.entities[entityId]\r\n    if (entityId === 'player_entity') {\r\n      mesh = this.playerEntity!\r\n      entityId = this.playerEntity?.originalEntity.id as any\r\n    }\r\n    if (!mesh) return\r\n    if (!mesh.playerObject) return\r\n    if (!mesh.visible) return\r\n\r\n    const MAX_DISTANCE_SKIN_LOAD = 128\r\n    const cameraPos = this.worldRenderer.cameraObject.position\r\n    const distance = mesh.position.distanceTo(cameraPos)\r\n    if (distance < MAX_DISTANCE_SKIN_LOAD && distance < (this.worldRenderer.viewDistance * 16)) {\r\n      if (this.loadedSkinEntityIds.has(String(entityId))) return\r\n      void this.updatePlayerSkin(entityId, mesh.playerObject.realUsername, mesh.playerObject.realPlayerUuid, true, true)\r\n    }\r\n  }\r\n\r\n  playerPerAnimation = {} as Record<number, string>\r\n  onRemoveEntity (entity: import('prismarine-entity').Entity) {\r\n    this.loadedSkinEntityIds.delete(entity.id.toString())\r\n  }\r\n\r\n  updateMap (mapNumber: string | number, data: string) {\r\n    this.cachedMapsImages[mapNumber] = data\r\n    let itemFrameMeshes = this.itemFrameMaps[mapNumber]\r\n    if (!itemFrameMeshes) return\r\n    itemFrameMeshes = itemFrameMeshes.filter(mesh => mesh.parent)\r\n    this.itemFrameMaps[mapNumber] = itemFrameMeshes\r\n    if (itemFrameMeshes) {\r\n      for (const mesh of itemFrameMeshes) {\r\n        mesh.material.map = this.loadMap(data)\r\n        mesh.material.needsUpdate = true\r\n        mesh.visible = true\r\n      }\r\n    }\r\n  }\r\n\r\n  updateNameTagVisibility (entity: SceneEntity) {\r\n    const playerTeam = this.worldRenderer.playerStateReactive.team\r\n    const entityTeam = entity.originalEntity.team\r\n    const nameTagVisibility = entityTeam?.nameTagVisibility || 'always'\r\n    const showNameTag = nameTagVisibility === 'always' ||\r\n      (nameTagVisibility === 'hideForOwnTeam' && entityTeam?.team !== playerTeam?.team) ||\r\n      (nameTagVisibility === 'hideForOtherTeams' && (entityTeam?.team === playerTeam?.team || playerTeam === undefined))\r\n    entity.traverse(c => {\r\n      if (c.name === 'nametag') {\r\n        c.visible = showNameTag\r\n      }\r\n    })\r\n  }\r\n\r\n  addMapModel (entityMesh: THREE.Object3D, mapNumber: number, rotation: number) {\r\n    const imageData = this.cachedMapsImages?.[mapNumber]\r\n    let texture: THREE.Texture | null = null\r\n    if (imageData) {\r\n      texture = this.loadMap(imageData)\r\n    }\r\n    const parameters = {\r\n      transparent: true,\r\n      alphaTest: 0.1,\r\n    }\r\n    if (texture) {\r\n      parameters['map'] = texture\r\n    }\r\n    const material = new THREE.MeshLambertMaterial(parameters)\r\n\r\n    const mapMesh = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), material)\r\n\r\n    mapMesh.rotation.set(0, Math.PI, 0)\r\n    entityMesh.add(mapMesh)\r\n    let isInvisible = true\r\n    entityMesh.traverseVisible(c => {\r\n      if (c.name === 'geometry_frame') {\r\n        isInvisible = false\r\n      }\r\n    })\r\n    if (isInvisible) {\r\n      mapMesh.position.set(0, 0, 0.499)\r\n    } else {\r\n      mapMesh.position.set(0, 0, 0.437)\r\n    }\r\n    // Apply 90° increment rotation for maps (0-3)\r\n    mapMesh.rotateZ(Math.PI * 2 - rotation * Math.PI / 2)\r\n    mapMesh.name = `map_${mapNumber}`\r\n\r\n    if (!texture) {\r\n      mapMesh.visible = false\r\n    }\r\n\r\n    if (!this.itemFrameMaps[mapNumber]) {\r\n      this.itemFrameMaps[mapNumber] = []\r\n    }\r\n    this.itemFrameMaps[mapNumber].push(mapMesh)\r\n  }\r\n\r\n  loadMap (data: any) {\r\n    const texture = new THREE.TextureLoader().load(data)\r\n    if (texture) {\r\n      texture.magFilter = THREE.NearestFilter\r\n      texture.minFilter = THREE.NearestFilter\r\n      texture.needsUpdate = true\r\n    }\r\n    return texture\r\n  }\r\n\r\n  addItemModel (entityMesh: SceneEntity, hand: 'left' | 'right', item: Item, isPlayer = false) {\r\n    const bedrockParentName = `bone_${hand}item`\r\n    const itemName = `custom_item_${hand}`\r\n\r\n    // remove existing item\r\n    entityMesh.traverse(c => {\r\n      if (c.name === itemName) {\r\n        c.removeFromParent()\r\n        if (c['additionalCleanup']) c['additionalCleanup']()\r\n      }\r\n    })\r\n    if (!item) return\r\n\r\n    const itemObject = this.getItemMesh(item, {\r\n      'minecraft:display_context': 'thirdperson',\r\n    })\r\n    if (itemObject?.mesh) {\r\n      entityMesh.traverse(c => {\r\n        if (c.name.toLowerCase() === bedrockParentName || c.name === `${hand}Arm`) {\r\n          const group = new THREE.Object3D()\r\n          group['additionalCleanup'] = () => {\r\n            // important: avoid texture memory leak and gpu slowdown\r\n            if (itemObject.cleanup) {\r\n              itemObject.cleanup()\r\n            }\r\n          }\r\n          const itemMesh = itemObject.mesh\r\n          group.rotation.z = -Math.PI / 16\r\n          if (itemObject.isBlock) {\r\n            group.rotation.y = Math.PI / 4\r\n          } else {\r\n            itemMesh.rotation.z = -Math.PI / 4\r\n            group.rotation.y = Math.PI / 2\r\n            group.scale.multiplyScalar(2)\r\n          }\r\n\r\n          // if player, move item below and forward a bit\r\n          if (isPlayer) {\r\n            group.position.y = -8\r\n            group.position.z = 5\r\n            group.position.x = hand === 'left' ? 1 : -1\r\n            group.rotation.x = Math.PI\r\n          }\r\n\r\n          group.add(itemMesh)\r\n\r\n          group.name = itemName\r\n          c.add(group)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  handleDamageEvent (entityId, damageAmount) {\r\n    const entityMesh = this.entities[entityId]?.children.find(c => c.name === 'mesh')\r\n    if (entityMesh) {\r\n      entityMesh.traverse((child) => {\r\n        if (child instanceof THREE.Mesh && child.material.clone) {\r\n          const clonedMaterial = child.material.clone()\r\n          clonedMaterial.dispose()\r\n          child.material = child.material.clone()\r\n          const originalColor = child.material.color.clone()\r\n          child.material.color.set(0xff_00_00)\r\n          new TWEEN.Tween(child.material.color)\r\n            .to(originalColor, 500)\r\n            .start()\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  raycastSceneDebug () {\r\n    // return any object from scene. raycast from camera\r\n    const raycaster = new THREE.Raycaster()\r\n    raycaster.setFromCamera(new THREE.Vector2(0, 0), this.worldRenderer.camera)\r\n    const intersects = raycaster.intersectObjects(this.worldRenderer.scene.children)\r\n    return intersects[0]?.object\r\n  }\r\n\r\n  private setupPlayerObject (entity: SceneEntity['originalEntity'], wrapper: THREE.Group, overrides: { texture?: string }): PlayerObjectType {\r\n    const playerObject = new PlayerObject() as PlayerObjectType\r\n    playerObject.realPlayerUuid = entity.uuid ?? ''\r\n    playerObject.realUsername = entity.username ?? ''\r\n    playerObject.position.set(0, 16, 0)\r\n\r\n    // fix issues with starfield\r\n    playerObject.traverse((obj) => {\r\n      if (obj instanceof THREE.Mesh && obj.material instanceof THREE.MeshStandardMaterial) {\r\n        obj.material.transparent = true\r\n      }\r\n    })\r\n\r\n    wrapper.add(playerObject as any)\r\n    const scale = 1 / 16\r\n    wrapper.scale.set(scale, scale, scale)\r\n    wrapper.rotation.set(0, Math.PI, 0)\r\n\r\n    // Set up animation\r\n    playerObject.animation = new WalkingGeneralSwing()\r\n    //@ts-expect-error\r\n    playerObject.animation.isMoving = false\r\n\r\n    return playerObject\r\n  }\r\n\r\n  private updateEntityEquipment (entityMesh: SceneEntity, entity: SceneEntity['originalEntity']) {\r\n    if (!entityMesh || !entity.equipment) return\r\n\r\n    const isPlayer = entity.type === 'player'\r\n    this.addItemModel(entityMesh, isPlayer ? 'right' : 'left', entity.equipment[0], isPlayer)\r\n    this.addItemModel(entityMesh, isPlayer ? 'left' : 'right', entity.equipment[1], isPlayer)\r\n    addArmorModel(this.worldRenderer, entityMesh, 'feet', entity.equipment[2])\r\n    addArmorModel(this.worldRenderer, entityMesh, 'legs', entity.equipment[3], 2)\r\n    addArmorModel(this.worldRenderer, entityMesh, 'chest', entity.equipment[4])\r\n    addArmorModel(this.worldRenderer, entityMesh, 'head', entity.equipment[5])\r\n\r\n    // Update player-specific equipment\r\n    if (isPlayer && entityMesh.playerObject) {\r\n      const { playerObject } = entityMesh\r\n      playerObject.backEquipment = entity.equipment.some((item) => item?.name === 'elytra') ? 'elytra' : 'cape'\r\n      if (playerObject.backEquipment === 'elytra') {\r\n        void this.loadAndApplyCape(entity.id, elytraTexture)\r\n      }\r\n      if (playerObject.cape.map === null) {\r\n        playerObject.cape.visible = false\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction getGeneralEntitiesMetadata (entity: { name; metadata }): Partial<UnionToIntersection<EntityMetadataVersions[keyof EntityMetadataVersions]>> {\r\n  const entityData = loadedData.entitiesByName[entity.name]\r\n  return new Proxy({}, {\r\n    get (target, p, receiver) {\r\n      if (typeof p !== 'string' || !entityData) return\r\n      const index = entityData.metadataKeys?.indexOf(p)\r\n      return entity.metadata?.[index ?? -1]\r\n    },\r\n  })\r\n}\r\n\r\nfunction getSpecificEntityMetadata<T extends keyof EntityMetadataVersions> (name: T, entity): EntityMetadataVersions[T] | undefined {\r\n  if (entity.name !== name) return\r\n  return getGeneralEntitiesMetadata(entity) as any\r\n}\r\n\r\nfunction addArmorModel (worldRenderer: WorldRendererThree, entityMesh: THREE.Object3D, slotType: string, item: Item, layer = 1, overlay = false) {\r\n  if (!item) {\r\n    removeArmorModel(entityMesh, slotType)\r\n    return\r\n  }\r\n  const itemParts = item.name.split('_')\r\n  let texturePath\r\n  const isPlayerHead = slotType === 'head' && item.name === 'player_head'\r\n  if (isPlayerHead) {\r\n    removeArmorModel(entityMesh, slotType)\r\n    if (item.nbt) {\r\n      const itemNbt = nbt.simplify(item.nbt)\r\n      try {\r\n        let textureData\r\n        if (itemNbt.SkullOwner) {\r\n          textureData = itemNbt.SkullOwner.Properties.textures[0]?.Value\r\n        } else {\r\n          textureData = itemNbt['minecraft:profile']?.Properties?.find(p => p.name === 'textures')?.value\r\n        }\r\n        if (textureData) {\r\n          const decodedData = JSON.parse(Buffer.from(textureData, 'base64').toString())\r\n          texturePath = decodedData.textures?.SKIN?.url\r\n          const { skinTexturesProxy } = this.worldRenderer.worldRendererConfig\r\n          if (skinTexturesProxy) {\r\n            texturePath = texturePath?.replace('http://textures.minecraft.net/', skinTexturesProxy)\r\n              .replace('https://textures.minecraft.net/', skinTexturesProxy)\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Error decoding player head texture:', err)\r\n      }\r\n    } else {\r\n      texturePath = stevePngUrl\r\n    }\r\n  }\r\n  const armorMaterial = itemParts[0]\r\n  if (!texturePath) {\r\n    // TODO: Support mirroring on certain parts of the model\r\n    const armorTextureName = `${armorMaterial}_layer_${layer}${overlay ? '_overlay' : ''}`\r\n    texturePath = worldRenderer.resourcesManager.currentResources.customTextures.armor?.textures[armorTextureName]?.src ?? armorTextures[armorTextureName]\r\n  }\r\n  if (!texturePath || !armorModel[slotType]) {\r\n    removeArmorModel(entityMesh, slotType)\r\n    return\r\n  }\r\n\r\n  const meshName = `geometry_armor_${slotType}${overlay ? '_overlay' : ''}`\r\n  let mesh = entityMesh.children.findLast(c => c.name === meshName) as THREE.Mesh\r\n  let material\r\n  if (mesh) {\r\n    material = mesh.material\r\n    void loadTexture(texturePath, texture => {\r\n      texture.magFilter = THREE.NearestFilter\r\n      texture.minFilter = THREE.NearestFilter\r\n      texture.flipY = false\r\n      texture.wrapS = THREE.MirroredRepeatWrapping\r\n      texture.wrapT = THREE.MirroredRepeatWrapping\r\n      material.map = texture\r\n    })\r\n  } else {\r\n    mesh = getMesh(worldRenderer, texturePath, armorModel[slotType])\r\n    // // enable debug mode to see the mesh\r\n    // mesh.traverse(c => {\r\n    //   if (c instanceof THREE.Mesh) {\r\n    //     c.material.wireframe = true\r\n    //   }\r\n    // })\r\n    if (slotType === 'head') {\r\n      // avoid z-fighting with the head\r\n      mesh.children[0].position.y += 0.01\r\n    }\r\n    mesh.name = meshName\r\n    material = mesh.material\r\n    if (!isPlayerHead) {\r\n      material.side = THREE.DoubleSide\r\n    }\r\n  }\r\n  if (armorMaterial === 'leather' && !overlay) {\r\n    const color = (item.nbt?.value as any)?.display?.value?.color?.value\r\n    if (color) {\r\n      const r = color >> 16 & 0xff\r\n      const g = color >> 8 & 0xff\r\n      const b = color & 0xff\r\n      material.color.setRGB(r / 255, g / 255, b / 255)\r\n    } else {\r\n      material.color.setHex(0xB5_6D_51) // default brown color\r\n    }\r\n    addArmorModel(worldRenderer, entityMesh, slotType, item, layer, true)\r\n  } else {\r\n    material.color.setHex(0xFF_FF_FF)\r\n  }\r\n  const group = new THREE.Object3D()\r\n  group.name = `armor_${slotType}${overlay ? '_overlay' : ''}`\r\n  group.add(mesh)\r\n\r\n  entityMesh.add(mesh)\r\n}\r\n\r\nfunction removeArmorModel (entityMesh: THREE.Object3D, slotType: string) {\r\n  for (const c of entityMesh.children) {\r\n    if (c.name === `geometry_armor_${slotType}` || c.name === `geometry_armor_${slotType}_overlay`) {\r\n      c.removeFromParent()\r\n    }\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { OBJLoader } from 'three-stdlib'\r\nimport huskPng from 'mc-assets/dist/other-textures/latest/entity/zombie/husk.png'\r\nimport { Vec3 } from 'vec3'\r\nimport ocelotPng from '../../../../node_modules/mc-assets/dist/other-textures/latest/entity/cat/ocelot.png'\r\nimport arrowTexture from '../../../../node_modules/mc-assets/dist/other-textures/1.21.2/entity/projectiles/arrow.png'\r\nimport spectralArrowTexture from '../../../../node_modules/mc-assets/dist/other-textures/1.21.2/entity/projectiles/spectral_arrow.png'\r\nimport tippedArrowTexture from '../../../../node_modules/mc-assets/dist/other-textures/1.21.2/entity/projectiles/tipped_arrow.png'\r\nimport { loadTexture } from '../threeJsUtils'\r\nimport { WorldRendererThree } from '../worldrendererThree'\r\nimport entities from './entities.json'\r\nimport { externalModels } from './objModels'\r\nimport externalTexturesJson from './externalTextures.json'\r\n\r\ninterface ElemFace {\r\n  dir: [number, number, number]\r\n  u0: [number, number, number]\r\n  v0: [number, number, number]\r\n  u1: [number, number, number]\r\n  v1: [number, number, number]\r\n  corners: Array<[number, number, number, number, number]>\r\n}\r\n\r\ninterface GeoData {\r\n  positions: number[]\r\n  normals: number[]\r\n  uvs: number[]\r\n  indices: number[]\r\n  skinIndices: number[]\r\n  skinWeights: number[]\r\n}\r\n\r\ninterface JsonBone {\r\n  name: string\r\n  pivot?: [number, number, number]\r\n  bind_pose_rotation?: [number, number, number]\r\n  rotation?: [number, number, number]\r\n  parent?: string\r\n  cubes?: JsonCube[]\r\n  mirror?: boolean\r\n}\r\n\r\ninterface JsonCube {\r\n  origin: [number, number, number]\r\n  size: [number, number, number]\r\n  uv: [number, number]\r\n  inflate?: number\r\n  rotation?: [number, number, number]\r\n}\r\n\r\ninterface JsonModel {\r\n  texturewidth?: number\r\n  textureheight?: number\r\n  bones: JsonBone[]\r\n}\r\n\r\ninterface EntityOverrides {\r\n  textures?: Record<string, string>\r\n  rotation?: Record<string, { x?: number; y?: number; z?: number }>\r\n}\r\n\r\nconst elemFaces: Record<string, ElemFace> = {\r\n  up: {\r\n    dir: [0, 1, 0],\r\n    u0: [0, 0, 1],\r\n    v0: [0, 0, 0],\r\n    u1: [1, 0, 1],\r\n    v1: [0, 0, 1],\r\n    corners: [\r\n      [0, 1, 1, 0, 0],\r\n      [1, 1, 1, 1, 0],\r\n      [0, 1, 0, 0, 1],\r\n      [1, 1, 0, 1, 1]\r\n    ]\r\n  },\r\n  down: {\r\n    dir: [0, -1, 0],\r\n    u0: [1, 0, 1],\r\n    v0: [0, 0, 0],\r\n    u1: [2, 0, 1],\r\n    v1: [0, 0, 1],\r\n    corners: [\r\n      [1, 0, 1, 0, 0],\r\n      [0, 0, 1, 1, 0],\r\n      [1, 0, 0, 0, 1],\r\n      [0, 0, 0, 1, 1]\r\n    ]\r\n  },\r\n  east: {\r\n    dir: [1, 0, 0],\r\n    u0: [0, 0, 0],\r\n    v0: [0, 0, 1],\r\n    u1: [0, 0, 1],\r\n    v1: [0, 1, 1],\r\n    corners: [\r\n      [1, 1, 1, 0, 0],\r\n      [1, 0, 1, 0, 1],\r\n      [1, 1, 0, 1, 0],\r\n      [1, 0, 0, 1, 1]\r\n    ]\r\n  },\r\n  west: {\r\n    dir: [-1, 0, 0],\r\n    u0: [1, 0, 1],\r\n    v0: [0, 0, 1],\r\n    u1: [1, 0, 2],\r\n    v1: [0, 1, 1],\r\n    corners: [\r\n      [0, 1, 0, 0, 0],\r\n      [0, 0, 0, 0, 1],\r\n      [0, 1, 1, 1, 0],\r\n      [0, 0, 1, 1, 1]\r\n    ]\r\n  },\r\n  north: {\r\n    dir: [0, 0, -1],\r\n    u0: [0, 0, 1],\r\n    v0: [0, 0, 1],\r\n    u1: [1, 0, 1],\r\n    v1: [0, 1, 1],\r\n    corners: [\r\n      [1, 0, 0, 0, 1],\r\n      [0, 0, 0, 1, 1],\r\n      [1, 1, 0, 0, 0],\r\n      [0, 1, 0, 1, 0]\r\n    ]\r\n  },\r\n  south: {\r\n    dir: [0, 0, 1],\r\n    u0: [1, 0, 2],\r\n    v0: [0, 0, 1],\r\n    u1: [2, 0, 2],\r\n    v1: [0, 1, 1],\r\n    corners: [\r\n      [0, 0, 1, 0, 1],\r\n      [1, 0, 1, 1, 1],\r\n      [0, 1, 1, 0, 0],\r\n      [1, 1, 1, 1, 0]\r\n    ]\r\n  }\r\n}\r\n\r\nfunction dot (a: number[], b: number[]): number {\r\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]\r\n}\r\n\r\nfunction addCube (\r\n  attr: GeoData,\r\n  boneId: number,\r\n  bone: THREE.Bone,\r\n  cube: JsonCube,\r\n  sameTextureForAllFaces = false,\r\n  texWidth = 64,\r\n  texHeight = 64,\r\n  mirror = false,\r\n  errors: string[] = []\r\n): void {\r\n  const cubeRotation = new THREE.Euler(0, 0, 0)\r\n  if (cube.rotation) {\r\n    cubeRotation.x = -cube.rotation[0] * Math.PI / 180\r\n    cubeRotation.y = -cube.rotation[1] * Math.PI / 180\r\n    cubeRotation.z = -cube.rotation[2] * Math.PI / 180\r\n  }\r\n  for (const { dir, corners, u0, v0, u1, v1 } of Object.values(elemFaces)) {\r\n    const ndx = Math.floor(attr.positions.length / 3)\r\n\r\n    const eastOrWest = dir[0] !== 0\r\n    const faceUvs: number[] = []\r\n    for (const pos of corners) {\r\n      let u: number\r\n      let v: number\r\n      if (sameTextureForAllFaces) {\r\n        u = (cube.uv[0] + pos[3] * cube.size[0]) / texWidth\r\n        v = (cube.uv[1] + pos[4] * cube.size[1]) / texHeight\r\n      } else {\r\n        u = (cube.uv[0] + dot(pos[3] ? u1 : u0, cube.size)) / texWidth\r\n        v = (cube.uv[1] + dot(pos[4] ? v1 : v0, cube.size)) / texHeight\r\n      }\r\n      // if (isNaN(u) || isNaN(v)) {\r\n      //   errors.push(`NaN u: ${u}, v: ${v}`)\r\n      //   continue\r\n      // }\r\n      // if (u < 0 || u > 1 || v < 0 || v > 1) {\r\n      //   errors.push(`u: ${u}, v: ${v} out of range`)\r\n      //   continue\r\n      // }\r\n\r\n      const posX = eastOrWest && mirror ? pos[0] ^ 1 : pos[0]\r\n      const posY = pos[1]\r\n      const posZ = eastOrWest && mirror ? pos[2] ^ 1 : pos[2]\r\n      const inflate = cube.inflate ?? 0\r\n      let vecPos = new THREE.Vector3(\r\n        cube.origin[0] + posX * cube.size[0] + (posX ? inflate : -inflate),\r\n        cube.origin[1] + posY * cube.size[1] + (posY ? inflate : -inflate),\r\n        cube.origin[2] + posZ * cube.size[2] + (posZ ? inflate : -inflate)\r\n      )\r\n\r\n      vecPos = vecPos.applyEuler(cubeRotation)\r\n      vecPos = vecPos.sub(bone.position)\r\n      vecPos = vecPos.applyEuler(bone.rotation)\r\n      vecPos = vecPos.add(bone.position)\r\n\r\n      attr.positions.push(vecPos.x, vecPos.y, vecPos.z)\r\n      attr.normals.push(dir[0], dir[1], dir[2])\r\n      faceUvs.push(u, v)\r\n      attr.skinIndices.push(boneId, 0, 0, 0)\r\n      attr.skinWeights.push(1, 0, 0, 0)\r\n    }\r\n\r\n    if (mirror) {\r\n      for (let i = 0; i + 1 < corners.length; i += 2) {\r\n        const faceIndex = i * 2\r\n        const tempFaceUvs = faceUvs.slice(faceIndex, faceIndex + 4)\r\n        faceUvs[faceIndex] = tempFaceUvs[2]\r\n        faceUvs[faceIndex + 1] = tempFaceUvs[eastOrWest ? 1 : 3]\r\n        faceUvs[faceIndex + 2] = tempFaceUvs[0]\r\n        faceUvs[faceIndex + 3] = tempFaceUvs[eastOrWest ? 3 : 1]\r\n      }\r\n    }\r\n    attr.uvs.push(...faceUvs)\r\n\r\n    attr.indices.push(ndx, ndx + 1, ndx + 2, ndx + 2, ndx + 1, ndx + 3)\r\n  }\r\n}\r\n\r\nexport function getMesh (\r\n  worldRenderer: WorldRendererThree | undefined,\r\n  texture: string,\r\n  jsonModel: JsonModel,\r\n  overrides: EntityOverrides = {},\r\n  debugFlags: EntityDebugFlags = {}\r\n): THREE.SkinnedMesh {\r\n  let textureWidth = jsonModel.texturewidth ?? 64\r\n  let textureHeight = jsonModel.textureheight ?? 64\r\n  let textureOffset: number[] | undefined\r\n  const useBlockTexture = texture.startsWith('block:')\r\n  const blocksTexture = worldRenderer?.material.map\r\n  if (useBlockTexture) {\r\n    if (!worldRenderer) throw new Error('worldRenderer is required for block textures')\r\n    const blockName = texture.slice(6)\r\n    const textureInfo = worldRenderer.resourcesManager.currentResources.blocksAtlasJson.textures[blockName]\r\n    if (textureInfo) {\r\n      textureWidth = blocksTexture?.image.width ?? textureWidth\r\n      textureHeight = blocksTexture?.image.height ?? textureHeight\r\n      // todo support su/sv\r\n      textureOffset = [textureInfo.u, textureInfo.v]\r\n    } else {\r\n      console.error(`Unknown block ${blockName}`)\r\n    }\r\n  }\r\n\r\n  const bones: Record<string, THREE.Bone> = {}\r\n\r\n  const geoData: GeoData = {\r\n    positions: [],\r\n    normals: [],\r\n    uvs: [],\r\n    indices: [],\r\n    skinIndices: [],\r\n    skinWeights: []\r\n  }\r\n  let i = 0\r\n  for (const jsonBone of jsonModel.bones) {\r\n    const bone = new THREE.Bone()\r\n    if (jsonBone.pivot) {\r\n      bone.position.x = jsonBone.pivot[0]\r\n      bone.position.y = jsonBone.pivot[1]\r\n      bone.position.z = jsonBone.pivot[2]\r\n    }\r\n    if (jsonBone.bind_pose_rotation) {\r\n      bone.rotation.x = -jsonBone.bind_pose_rotation[0] * Math.PI / 180\r\n      bone.rotation.y = -jsonBone.bind_pose_rotation[1] * Math.PI / 180\r\n      bone.rotation.z = -jsonBone.bind_pose_rotation[2] * Math.PI / 180\r\n    } else if (jsonBone.rotation) {\r\n      bone.rotation.x = -jsonBone.rotation[0] * Math.PI / 180\r\n      bone.rotation.y = -jsonBone.rotation[1] * Math.PI / 180\r\n      bone.rotation.z = -jsonBone.rotation[2] * Math.PI / 180\r\n    }\r\n    if (overrides.rotation?.[jsonBone.name]) {\r\n      bone.rotation.x -= (overrides.rotation[jsonBone.name].x ?? 0) * Math.PI / 180\r\n      bone.rotation.y -= (overrides.rotation[jsonBone.name].y ?? 0) * Math.PI / 180\r\n      bone.rotation.z -= (overrides.rotation[jsonBone.name].z ?? 0) * Math.PI / 180\r\n    }\r\n    bone.name = `bone_${jsonBone.name}`\r\n    bones[jsonBone.name] = bone\r\n\r\n    if (jsonBone.cubes) {\r\n      for (const cube of jsonBone.cubes) {\r\n        const errors: string[] = []\r\n        addCube(geoData, i, bone, cube, useBlockTexture, textureWidth, textureHeight, jsonBone.mirror, errors)\r\n        if (errors.length) {\r\n          debugFlags.errors ??= []\r\n          debugFlags.errors.push(...errors.map(error => `Bone ${jsonBone.name}: ${error}`))\r\n        }\r\n      }\r\n    }\r\n    i++\r\n  }\r\n\r\n  const rootBones: THREE.Object3D[] = []\r\n  for (const jsonBone of jsonModel.bones) {\r\n    if (jsonBone.parent && bones[jsonBone.parent]) {\r\n      bones[jsonBone.parent].add(bones[jsonBone.name])\r\n    } else {\r\n      rootBones.push(bones[jsonBone.name])\r\n    }\r\n  }\r\n\r\n  const skeleton = new THREE.Skeleton(Object.values(bones))\r\n\r\n  const geometry = new THREE.BufferGeometry()\r\n  geometry.setAttribute('position', new THREE.Float32BufferAttribute(geoData.positions, 3))\r\n  geometry.setAttribute('normal', new THREE.Float32BufferAttribute(geoData.normals, 3))\r\n  geometry.setAttribute('uv', new THREE.Float32BufferAttribute(geoData.uvs, 2))\r\n  geometry.setAttribute('skinIndex', new THREE.Uint16BufferAttribute(geoData.skinIndices, 4))\r\n  geometry.setAttribute('skinWeight', new THREE.Float32BufferAttribute(geoData.skinWeights, 4))\r\n  geometry.setIndex(geoData.indices)\r\n\r\n  const material = new THREE.MeshLambertMaterial({ transparent: true, alphaTest: 0.1 })\r\n  const mesh = new THREE.SkinnedMesh(geometry, material)\r\n  mesh.add(...rootBones)\r\n  mesh.bind(skeleton)\r\n  mesh.scale.set(1 / 16, 1 / 16, 1 / 16)\r\n\r\n  if (textureOffset) {\r\n    // todo(memory) dont clone\r\n    const loadedTexture = blocksTexture!.clone()\r\n    loadedTexture.offset.set(textureOffset[0], textureOffset[1])\r\n    loadedTexture.needsUpdate = true\r\n    material.map = loadedTexture\r\n  } else {\r\n    void loadTexture(texture, loadedTexture => {\r\n      if (material.map) {\r\n        // texture is already loaded\r\n        return\r\n      }\r\n      loadedTexture.magFilter = THREE.NearestFilter\r\n      loadedTexture.minFilter = THREE.NearestFilter\r\n      loadedTexture.flipY = false\r\n      loadedTexture.wrapS = THREE.RepeatWrapping\r\n      loadedTexture.wrapT = THREE.RepeatWrapping\r\n      material.map = loadedTexture\r\n    }, () => {\r\n      // This callback runs after the texture is fully loaded\r\n      const actualWidth = material.map!.image.width\r\n      if (actualWidth && textureWidth !== actualWidth) {\r\n        material.map!.repeat.x = textureWidth / actualWidth\r\n      }\r\n      const actualHeight = material.map!.image.height\r\n      if (actualHeight && textureHeight !== actualHeight) {\r\n        material.map!.repeat.y = textureHeight / actualHeight\r\n      }\r\n      material.needsUpdate = true\r\n    })\r\n  }\r\n\r\n  return mesh\r\n}\r\n\r\nexport const rendererSpecialHandled = ['item_frame', 'item', 'player']\r\n\r\ntype EntityMapping = {\r\n  pattern: string | RegExp\r\n  target: string\r\n}\r\n\r\nconst temporaryMappings: EntityMapping[] = [\r\n  // Exact matches\r\n  { pattern: 'furnace_minecart', target: 'minecart' },\r\n  { pattern: 'spawner_minecart', target: 'minecart' },\r\n  { pattern: 'chest_minecart', target: 'minecart' },\r\n  { pattern: 'hopper_minecart', target: 'minecart' },\r\n  { pattern: 'command_block_minecart', target: 'minecart' },\r\n  { pattern: 'tnt_minecart', target: 'minecart' },\r\n  { pattern: 'glow_item_frame', target: 'item_frame' },\r\n  { pattern: 'glow_squid', target: 'squid' },\r\n  { pattern: 'trader_llama', target: 'llama' },\r\n  { pattern: 'chest_boat', target: 'boat' },\r\n  { pattern: 'spectral_arrow', target: 'arrow' },\r\n  { pattern: 'husk', target: 'zombie' },\r\n  { pattern: 'zombie_horse', target: 'horse' },\r\n  { pattern: 'donkey', target: 'horse' },\r\n  { pattern: 'skeleton_horse', target: 'horse' },\r\n  { pattern: 'mule', target: 'horse' },\r\n  { pattern: 'ocelot', target: 'cat' },\r\n  // Regex patterns\r\n  { pattern: /_minecraft$/, target: 'minecraft' },\r\n  { pattern: /_boat$/, target: 'boat' },\r\n  { pattern: /_raft$/, target: 'boat' },\r\n  { pattern: /_horse$/, target: 'horse' },\r\n  { pattern: /_zombie$/, target: 'zombie' },\r\n  { pattern: /_arrow$/, target: 'zombie' },\r\n]\r\n\r\nfunction getEntityMapping (type: string): string | undefined {\r\n  for (const mapping of temporaryMappings) {\r\n    if (typeof mapping.pattern === 'string') {\r\n      if (mapping.pattern === type) return mapping.target\r\n    } else if (mapping.pattern.test(type)) { return mapping.target }\r\n  }\r\n  return undefined\r\n}\r\n\r\nconst getEntity = (name: string) => {\r\n  return entities[name]\r\n}\r\n\r\nconst scaleEntity: Record<string, number> = {\r\n  zombie: 1.85,\r\n  husk: 1.85,\r\n  arrow: 0.0025\r\n}\r\n\r\nconst offsetEntity: Record<string, Vec3> = {\r\n  zombie: new Vec3(0, 1, 0),\r\n  husk: new Vec3(0, 1, 0),\r\n  boat: new Vec3(0, -1, 0),\r\n  arrow: new Vec3(0, -0.9, 0)\r\n}\r\n\r\ninterface EntityGeometry {\r\n  geometry: Array<{\r\n    name: string;\r\n    [key: string]: any;\r\n  }>;\r\n}\r\n\r\nexport type EntityDebugFlags = {\r\n  type?: 'obj' | 'bedrock'\r\n  tempMap?: string\r\n  textureMap?: boolean\r\n  errors?: string[]\r\n  isHardcodedTexture?: boolean\r\n}\r\n\r\nexport class EntityMesh {\r\n  mesh: THREE.Object3D\r\n\r\n  constructor (\r\n    version: string,\r\n    type: string,\r\n    worldRenderer?: WorldRendererThree,\r\n    overrides: EntityOverrides = {},\r\n    debugFlags: EntityDebugFlags = {}\r\n  ) {\r\n    const originalType = type\r\n    const mappedValue = getEntityMapping(type)\r\n    if (mappedValue) {\r\n      type = mappedValue\r\n      debugFlags.tempMap = mappedValue\r\n    }\r\n\r\n    if (externalModels[type]) {\r\n      const objLoader = new OBJLoader()\r\n      const texturePathMap = {\r\n        'zombie_horse': `textures/${version}/entity/horse/horse_zombie.png`,\r\n        'husk': huskPng,\r\n        'skeleton_horse': `textures/${version}/entity/horse/horse_skeleton.png`,\r\n        'donkey': `textures/${version}/entity/horse/donkey.png`,\r\n        'mule': `textures/${version}/entity/horse/mule.png`,\r\n        'ocelot': ocelotPng,\r\n        'arrow': arrowTexture,\r\n        'spectral_arrow': spectralArrowTexture,\r\n        'tipped_arrow': tippedArrowTexture\r\n      }\r\n      const tempTextureMap = texturePathMap[originalType] || texturePathMap[type]\r\n      if (tempTextureMap) {\r\n        debugFlags.textureMap = true\r\n      }\r\n      const texturePath = tempTextureMap || externalTexturesJson[type]\r\n      if (externalTexturesJson[type]) {\r\n        debugFlags.isHardcodedTexture = true\r\n      }\r\n      if (!texturePath) throw new Error(`No texture for ${type}`)\r\n      const texture = new THREE.TextureLoader().load(texturePath)\r\n      texture.minFilter = THREE.NearestFilter\r\n      texture.magFilter = THREE.NearestFilter\r\n      const material = new THREE.MeshBasicMaterial({\r\n        map: texture,\r\n        transparent: true,\r\n        alphaTest: 0.1\r\n      })\r\n      const obj = objLoader.parse(externalModels[type])\r\n      const scale = scaleEntity[originalType] || scaleEntity[type]\r\n      if (scale) obj.scale.set(scale, scale, scale)\r\n      const offset = offsetEntity[originalType]\r\n      if (offset) obj.position.set(offset.x, offset.y, offset.z)\r\n      obj.traverse((child) => {\r\n        if (child instanceof THREE.Mesh) {\r\n          child.material = material\r\n          // todo\r\n          if (child.name === 'Head layer') child.visible = false\r\n          if (child.name === 'Head' && overrides.rotation?.head) { // todo\r\n            child.rotation.x -= (overrides.rotation.head.x ?? 0) * Math.PI / 180\r\n            child.rotation.y -= (overrides.rotation.head.y ?? 0) * Math.PI / 180\r\n            child.rotation.z -= (overrides.rotation.head.z ?? 0) * Math.PI / 180\r\n          }\r\n        }\r\n      })\r\n      this.mesh = obj\r\n      debugFlags.type = 'obj'\r\n      return\r\n    }\r\n\r\n    if (originalType === 'arrow') {\r\n      // overrides.textures = {\r\n      //   'default': testArrow,\r\n      //   ...overrides.textures,\r\n      // }\r\n    }\r\n\r\n    const e = getEntity(type)\r\n    if (!e) {\r\n      // if (knownNotHandled.includes(type)) return\r\n      // throw new Error(`Unknown entity ${type}`)\r\n      return\r\n    }\r\n\r\n    this.mesh = new THREE.Object3D()\r\n    for (const [name, jsonModel] of Object.entries(e.geometry)) {\r\n      const texture = overrides.textures?.[name] ?? e.textures[name]\r\n      if (!texture) continue\r\n      // console.log(JSON.stringify(jsonModel, null, 2))\r\n      const mesh = getMesh(worldRenderer,\r\n        texture.endsWith('.png') || texture.startsWith('data:image/') || texture.startsWith('block:')\r\n          ? texture : texture + '.png',\r\n        jsonModel,\r\n        overrides,\r\n        debugFlags)\r\n      mesh.name = `geometry_${name}`\r\n      this.mesh.add(mesh)\r\n    }\r\n    debugFlags.type = 'bedrock'\r\n  }\r\n\r\n  static getStaticData (name: string): { boneNames: string[] } {\r\n    name = getEntityMapping(name) || name\r\n    if (externalModels[name]) {\r\n      return {\r\n        boneNames: [] // todo\r\n      }\r\n    }\r\n    const e = getEntity(name) as EntityGeometry\r\n    if (!e) throw new Error(`Unknown entity ${name}`)\r\n    return {\r\n      boneNames: Object.values(e.geometry).flatMap(x => x.name)\r\n    }\r\n  }\r\n}\r\nglobalThis.EntityMesh = EntityMesh\r\n","//@ts-check\r\nimport { PlayerAnimation } from 'skinview3d'\r\n\r\nexport class WalkingGeneralSwing extends PlayerAnimation {\r\n\r\n  switchAnimationCallback\r\n\r\n  isRunning = false\r\n  isMoving = true\r\n  isCrouched = false\r\n\r\n  _startArmSwing\r\n\r\n  swingArm() {\r\n    this._startArmSwing = this.progress\r\n  }\r\n\r\n  animate(player) {\r\n    // Multiply by animation's natural speed\r\n    let t = 0\r\n    const updateT = () => {\r\n      if (!this.isMoving) {\r\n        t = 0\r\n        return\r\n      }\r\n      if (this.isRunning) {\r\n        t = this.progress * 10 + Math.PI * 0.5\r\n      } else {\r\n        t = this.progress * 8\r\n      }\r\n    }\r\n    updateT()\r\n    let reset = false\r\n\r\n    croughAnimation(player, this.isCrouched)\r\n\r\n    if ((this.isRunning ? Math.cos(t) : Math.sin(t)) < 0.01) {\r\n      if (this.switchAnimationCallback) {\r\n        reset = true\r\n        this.progress = 0\r\n        updateT()\r\n      }\r\n    }\r\n\r\n    if (this.isRunning) {\r\n      // Leg swing with larger amplitude\r\n      player.skin.leftLeg.rotation.x = Math.cos(t + Math.PI) * 1.3\r\n      player.skin.rightLeg.rotation.x = Math.cos(t) * 1.3\r\n    } else {\r\n      // Leg swing\r\n      player.skin.leftLeg.rotation.x = Math.sin(t) * 0.5\r\n      player.skin.rightLeg.rotation.x = Math.sin(t + Math.PI) * 0.5\r\n    }\r\n\r\n    if (this._startArmSwing) {\r\n      const tHand = (this.progress - this._startArmSwing) * 18 + Math.PI * 0.5\r\n      // player.skin.rightArm.rotation.x = Math.cos(tHand) * 1.5\r\n      // const basicArmRotationZ = Math.PI * 0.1\r\n      // player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.3 - basicArmRotationZ\r\n      HitAnimation.animate((this.progress - this._startArmSwing), player, this.isMoving)\r\n\r\n      if (tHand > Math.PI + Math.PI) {\r\n        this._startArmSwing = null\r\n        player.skin.rightArm.rotation.z = 0\r\n      }\r\n    }\r\n\r\n    if (this.isRunning) {\r\n      player.skin.leftArm.rotation.x = Math.cos(t) * 1.5\r\n      if (!this._startArmSwing) {\r\n        player.skin.rightArm.rotation.x = Math.cos(t + Math.PI) * 1.5\r\n      }\r\n      const basicArmRotationZ = Math.PI * 0.1\r\n      player.skin.leftArm.rotation.z = Math.cos(t) * 0.1 + basicArmRotationZ\r\n      if (!this._startArmSwing) {\r\n        player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.1 - basicArmRotationZ\r\n      }\r\n    } else {\r\n      // Arm swing\r\n      player.skin.leftArm.rotation.x = Math.sin(t + Math.PI) * 0.5\r\n      if (!this._startArmSwing) {\r\n        player.skin.rightArm.rotation.x = Math.sin(t) * 0.5\r\n      }\r\n      const basicArmRotationZ = Math.PI * 0.02\r\n      player.skin.leftArm.rotation.z = Math.cos(t) * 0.03 + basicArmRotationZ\r\n      if (!this._startArmSwing) {\r\n        player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.03 - basicArmRotationZ\r\n      }\r\n    }\r\n\r\n    if (this.isRunning) {\r\n      player.rotation.z = Math.cos(t + Math.PI) * 0.01\r\n    }\r\n    if (this.isRunning) {\r\n      const basicCapeRotationX = Math.PI * 0.3\r\n      player.cape.rotation.x = Math.sin(t * 2) * 0.1 + basicCapeRotationX\r\n    } else {\r\n      // Always add an angle for cape around the x axis\r\n      const basicCapeRotationX = Math.PI * 0.06\r\n      player.cape.rotation.x = Math.sin(t / 1.5) * 0.06 + basicCapeRotationX\r\n    }\r\n\r\n    if (reset) {\r\n      this.switchAnimationCallback()\r\n      this.switchAnimationCallback = null\r\n    }\r\n  }\r\n}\r\n\r\nconst HitAnimation = {\r\n  animate(progress, player, isMovingOrRunning) {\r\n    const t = progress * 18\r\n    player.skin.rightArm.rotation.x = -0.453_786_055_2 * 2 + 2 * Math.sin(t + Math.PI) * 0.3\r\n\r\n    if (!isMovingOrRunning) {\r\n      const basicArmRotationZ = 0.01 * Math.PI + 0.06\r\n      player.skin.rightArm.rotation.z = -Math.cos(t) * 0.403 + basicArmRotationZ\r\n      player.skin.body.rotation.y = -Math.cos(t) * 0.06\r\n      player.skin.leftArm.rotation.x = Math.sin(t + Math.PI) * 0.077\r\n      player.skin.leftArm.rotation.z = -Math.cos(t) * 0.015 + 0.13 - 0.05\r\n      player.skin.leftArm.position.z = Math.cos(t) * 0.3\r\n      player.skin.leftArm.position.x = 5 - Math.cos(t) * 0.05\r\n    }\r\n  },\r\n}\r\n\r\nconst croughAnimation = (player, isCrouched) => {\r\n  const erp = 0\r\n\r\n  // let pr = this.progress * 8;\r\n  let pr = isCrouched ? 1 : 0\r\n  const showProgress = false\r\n  if (showProgress) {\r\n    pr = Math.floor(pr)\r\n  }\r\n  player.skin.body.rotation.x = 0.453_786_055_2 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.skin.body.position.z =\r\n\t\t\t1.325_618_1 * Math.abs(Math.sin((pr * Math.PI) / 2)) - 3.450_031_037_7 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.skin.body.position.y = -6 - 2.103_677_462 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.cape.position.y = 8 - 1.851_236_166_577_372 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.cape.rotation.x = (10.8 * Math.PI) / 180 + 0.294_220_265_771 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.cape.position.z =\r\n\t\t\t-2 + 3.786_619_432 * Math.abs(Math.sin((pr * Math.PI) / 2)) - 3.450_031_037_7 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.elytra.position.x = player.cape.position.x\r\n  player.elytra.position.y = player.cape.position.y\r\n  player.elytra.position.z = player.cape.position.z\r\n  player.elytra.rotation.x = player.cape.rotation.x - (10.8 * Math.PI) / 180\r\n  // const pr1 = this.progress / this.speed;\r\n  const pr1 = 1\r\n  if (Math.abs(Math.sin((pr * Math.PI) / 2)) === 1) {\r\n    player.elytra.leftWing.rotation.z =\r\n\t\t\t\t0.261_799_44 + 0.458_200_6 * Math.abs(Math.sin((Math.min(pr1 - erp, 1) * Math.PI) / 2))\r\n    player.elytra.updateRightWing()\r\n  } else if (isCrouched !== undefined) {\r\n    player.elytra.leftWing.rotation.z =\r\n\t\t\t\t0.72 - 0.458_200_6 * Math.abs(Math.sin((Math.min(pr1 - erp, 1) * Math.PI) / 2))\r\n    player.elytra.updateRightWing()\r\n  }\r\n  player.skin.head.position.y = -3.618_325_234_674 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.skin.leftArm.position.z =\r\n\t\t\t3.618_325_234_674 * Math.abs(Math.sin((pr * Math.PI) / 2)) - 3.450_031_037_7 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.skin.rightArm.position.z = player.skin.leftArm.position.z\r\n  player.skin.leftArm.rotation.x = 0.410_367_746_202 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.skin.rightArm.rotation.x = player.skin.leftArm.rotation.x\r\n  player.skin.leftArm.rotation.z = 0.1\r\n  player.skin.rightArm.rotation.z = -player.skin.leftArm.rotation.z\r\n  player.skin.leftArm.position.y = -2 - 2.539_433_18 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.skin.rightArm.position.y = player.skin.leftArm.position.y\r\n  player.skin.rightLeg.position.z = -3.450_031_037_7 * Math.abs(Math.sin((pr * Math.PI) / 2))\r\n  player.skin.leftLeg.position.z = player.skin.rightLeg.position.z\r\n}\r\n","import { default as chainmailLayer1 } from 'mc-assets/dist/other-textures/latest/models/armor/chainmail_layer_1.png'\r\nimport { default as chainmailLayer2 } from 'mc-assets/dist/other-textures/latest/models/armor/chainmail_layer_2.png'\r\nimport { default as diamondLayer1 } from 'mc-assets/dist/other-textures/latest/models/armor/diamond_layer_1.png'\r\nimport { default as diamondLayer2 } from 'mc-assets/dist/other-textures/latest/models/armor/diamond_layer_2.png'\r\nimport { default as goldenLayer1 } from 'mc-assets/dist/other-textures/latest/models/armor/gold_layer_1.png'\r\nimport { default as goldenLayer2 } from 'mc-assets/dist/other-textures/latest/models/armor/gold_layer_2.png'\r\nimport { default as ironLayer1 } from 'mc-assets/dist/other-textures/latest/models/armor/iron_layer_1.png'\r\nimport { default as ironLayer2 } from 'mc-assets/dist/other-textures/latest/models/armor/iron_layer_2.png'\r\nimport { default as leatherLayer1 } from 'mc-assets/dist/other-textures/latest/models/armor/leather_layer_1.png'\r\nimport { default as leatherLayer1Overlay } from 'mc-assets/dist/other-textures/latest/models/armor/leather_layer_1_overlay.png'\r\nimport { default as leatherLayer2 } from 'mc-assets/dist/other-textures/latest/models/armor/leather_layer_2.png'\r\nimport { default as leatherLayer2Overlay } from 'mc-assets/dist/other-textures/latest/models/armor/leather_layer_2_overlay.png'\r\nimport { default as netheriteLayer1 } from 'mc-assets/dist/other-textures/latest/models/armor/netherite_layer_1.png'\r\nimport { default as netheriteLayer2 } from 'mc-assets/dist/other-textures/latest/models/armor/netherite_layer_2.png'\r\nimport { default as turtleLayer1 } from 'mc-assets/dist/other-textures/latest/models/armor/turtle_layer_1.png'\r\n\r\nexport { default as elytraTexture } from 'mc-assets/dist/other-textures/latest/entity/elytra.png'\r\nexport { default as armorModel } from './armorModels.json'\r\n\r\nexport const armorTextures = {\r\n  'leather_layer_1': leatherLayer1,\r\n  'leather_layer_1_overlay': leatherLayer1Overlay,\r\n  'leather_layer_2': leatherLayer2,\r\n  'leather_layer_2_overlay': leatherLayer2Overlay,\r\n  'chainmail_layer_1': chainmailLayer1,\r\n  'chainmail_layer_2': chainmailLayer2,\r\n  'iron_layer_1': ironLayer1,\r\n  'iron_layer_2': ironLayer2,\r\n  'diamond_layer_1': diamondLayer1,\r\n  'diamond_layer_2': diamondLayer2,\r\n  'golden_layer_1': goldenLayer1,\r\n  'golden_layer_2': goldenLayer2,\r\n  'netherite_layer_1': netheriteLayer1,\r\n  'netherite_layer_2': netheriteLayer2,\r\n  'turtle_layer_1': turtleLayer1\r\n}\r\n","import * as THREE from 'three'\r\nimport { loadSkinFromUsername, loadSkinImage } from '../lib/utils/skins'\r\nimport { steveTexture } from './entities'\r\n\r\n\r\nexport const getMyHand = async (image?: string, userName?: string) => {\r\n  let newMap: THREE.Texture\r\n  if (!image && !userName) {\r\n    newMap = await steveTexture\r\n  } else {\r\n    if (!image) {\r\n      image = await loadSkinFromUsername(userName!, 'skin')\r\n    }\r\n    if (!image) {\r\n      return\r\n    }\r\n    const { canvas } = await loadSkinImage(image)\r\n    newMap = new THREE.CanvasTexture(canvas)\r\n  }\r\n\r\n  newMap.magFilter = THREE.NearestFilter\r\n  newMap.minFilter = THREE.NearestFilter\r\n  // right arm\r\n  const box = new THREE.BoxGeometry()\r\n  const material = new THREE.MeshStandardMaterial()\r\n  const slim = false\r\n  const mesh = new THREE.Mesh(box, material)\r\n  mesh.scale.x = slim ? 3 : 4\r\n  mesh.scale.y = 12\r\n  mesh.scale.z = 4\r\n  setSkinUVs(box, 40, 16, slim ? 3 : 4, 12, 4)\r\n  material.map = newMap\r\n  material.needsUpdate = true\r\n  const group = new THREE.Group()\r\n  group.add(mesh)\r\n  group.scale.set(0.1, 0.1, 0.1)\r\n  mesh.rotation.z = Math.PI\r\n  return group\r\n}\r\n\r\nfunction setUVs (\r\n  box: THREE.BoxGeometry,\r\n  u: number,\r\n  v: number,\r\n  width: number,\r\n  height: number,\r\n  depth: number,\r\n  textureWidth: number,\r\n  textureHeight: number\r\n): void {\r\n  const toFaceVertices = (x1: number, y1: number, x2: number, y2: number) => [\r\n    new THREE.Vector2(x1 / textureWidth, 1 - y2 / textureHeight),\r\n    new THREE.Vector2(x2 / textureWidth, 1 - y2 / textureHeight),\r\n    new THREE.Vector2(x2 / textureWidth, 1 - y1 / textureHeight),\r\n    new THREE.Vector2(x1 / textureWidth, 1 - y1 / textureHeight),\r\n  ]\r\n\r\n  const top = toFaceVertices(u + depth, v, u + width + depth, v + depth)\r\n  const bottom = toFaceVertices(u + width + depth, v, u + width * 2 + depth, v + depth)\r\n  const left = toFaceVertices(u, v + depth, u + depth, v + depth + height)\r\n  const front = toFaceVertices(u + depth, v + depth, u + width + depth, v + depth + height)\r\n  const right = toFaceVertices(u + width + depth, v + depth, u + width + depth * 2, v + height + depth)\r\n  const back = toFaceVertices(u + width + depth * 2, v + depth, u + width * 2 + depth * 2, v + height + depth)\r\n\r\n  const uvAttr = box.attributes.uv as THREE.BufferAttribute\r\n  const uvRight = [right[3], right[2], right[0], right[1]]\r\n  const uvLeft = [left[3], left[2], left[0], left[1]]\r\n  const uvTop = [top[3], top[2], top[0], top[1]]\r\n  const uvBottom = [bottom[0], bottom[1], bottom[3], bottom[2]]\r\n  const uvFront = [front[3], front[2], front[0], front[1]]\r\n  const uvBack = [back[3], back[2], back[0], back[1]]\r\n\r\n  // Create a new array to hold the modified UV data\r\n  const newUVData = [] as number[]\r\n\r\n  // Iterate over the arrays and copy the data to uvData\r\n  for (const uvArray of [uvRight, uvLeft, uvTop, uvBottom, uvFront, uvBack]) {\r\n    for (const uv of uvArray) {\r\n      newUVData.push(uv.x, uv.y)\r\n    }\r\n  }\r\n\r\n  uvAttr.set(new Float32Array(newUVData))\r\n  uvAttr.needsUpdate = true\r\n}\r\n\r\nfunction setSkinUVs (box: THREE.BoxGeometry, u: number, v: number, width: number, height: number, depth: number): void {\r\n  setUVs(box, u, v, width, height, depth, 64, 64)\r\n}\r\n","import * as tweenJs from '@tweenjs/tween.js'\r\n\r\nexport class AnimationController {\r\n  private currentAnimation: tweenJs.Group | null = null\r\n  private isAnimating = false\r\n  private cancelRequested = false\r\n  private completionCallbacks: Array<() => void> = []\r\n  private currentCancelCallback: (() => void) | null = null\r\n\r\n  /** Main method */\r\n  async startAnimation (createAnimation: () => tweenJs.Group, onCancelled?: () => void): Promise<void> {\r\n    if (this.isAnimating) {\r\n      await this.cancelCurrentAnimation()\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n      this.isAnimating = true\r\n      this.cancelRequested = false\r\n      this.currentCancelCallback = onCancelled ?? null\r\n      this.currentAnimation = createAnimation()\r\n\r\n      this.completionCallbacks.push(() => {\r\n        this.isAnimating = false\r\n        this.currentAnimation = null\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  /** Main method */\r\n  async cancelCurrentAnimation (): Promise<void> {\r\n    if (!this.isAnimating) return\r\n\r\n    if (this.currentCancelCallback) {\r\n      const callback = this.currentCancelCallback\r\n      this.currentCancelCallback = null\r\n      callback()\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n      this.cancelRequested = true\r\n      this.completionCallbacks.push(() => {\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  animationCycleFinish () {\r\n    if (this.cancelRequested) this.forceFinish()\r\n  }\r\n\r\n  forceFinish (callComplete = true) {\r\n    if (!this.isAnimating) return\r\n\r\n    if (this.currentAnimation) {\r\n      for (const tween of this.currentAnimation.getAll()) tween.stop()\r\n      this.currentAnimation.removeAll()\r\n      this.currentAnimation = null\r\n    }\r\n\r\n    this.isAnimating = false\r\n    this.cancelRequested = false\r\n\r\n    const callbacks = [...this.completionCallbacks]\r\n    this.completionCallbacks = []\r\n    if (callComplete) {\r\n      for (const cb of callbacks) cb()\r\n    }\r\n  }\r\n\r\n  /** Required method */\r\n  update () {\r\n    if (this.currentAnimation) {\r\n      this.currentAnimation.update()\r\n    }\r\n  }\r\n\r\n  get isActive () {\r\n    return this.isAnimating\r\n  }\r\n\r\n  get shouldCancel () {\r\n    return this.cancelRequested\r\n  }\r\n}\r\n","import * as tweenJs from '@tweenjs/tween.js'\r\nimport { AnimationController } from './animationController'\r\n\r\nexport type StateProperties = Record<string, number>\r\nexport type StateGetterFn = () => StateProperties\r\nexport type StateSetterFn = (property: string, value: number) => void\r\n\r\n// Speed in units per second for each property type\r\nconst DEFAULT_SPEEDS = {\r\n  x: 3000, // pixels/units per second\r\n  y: 3000,\r\n  z: 3000,\r\n  rotation: Math.PI, // radians per second\r\n  scale: 1, // scale units per second\r\n  default: 3000 // default speed for unknown properties\r\n}\r\n\r\nexport class SmoothSwitcher {\r\n  private readonly animationController = new AnimationController()\r\n  // private readonly currentState: StateProperties = {}\r\n  private readonly defaultState: StateProperties\r\n  private readonly speeds: Record<string, number>\r\n  public currentStateName = ''\r\n  public transitioningToStateName = ''\r\n\r\n  constructor (\r\n    public getState: StateGetterFn,\r\n    public setState: StateSetterFn,\r\n    speeds?: Partial<Record<string, number>>\r\n  ) {\r\n\r\n    // Initialize speeds with defaults and overrides\r\n    this.speeds = { ...DEFAULT_SPEEDS }\r\n    if (speeds) {\r\n      Object.assign(this.speeds, speeds)\r\n    }\r\n\r\n    // Store initial values\r\n    this.defaultState = this.getState()\r\n  }\r\n\r\n  /**\r\n   * Calculate transition duration based on the largest property change\r\n   */\r\n  private calculateDuration (newState: Partial<StateProperties>): number {\r\n    let maxDuration = 0\r\n    const currentState = this.getState()\r\n\r\n    for (const [key, targetValue] of Object.entries(newState)) {\r\n      const currentValue = currentState[key]\r\n      const diff = Math.abs(targetValue! - currentValue)\r\n      const speed = this.getPropertySpeed(key)\r\n      const duration = (diff / speed) * 1000 // Convert to milliseconds\r\n\r\n      maxDuration = Math.max(maxDuration, duration)\r\n    }\r\n\r\n    // Ensure minimum duration of 50ms and maximum of 2000ms\r\n    return Math.min(Math.max(maxDuration, 200), 2000)\r\n  }\r\n\r\n  private getPropertySpeed (property: string): number {\r\n    // Check for specific property speed\r\n    if (property in this.speeds) {\r\n      return this.speeds[property]\r\n    }\r\n\r\n    // Check for property type (rotation, scale, etc.)\r\n    if (property.toLowerCase().includes('rotation')) return this.speeds.rotation\r\n    if (property.toLowerCase().includes('scale')) return this.speeds.scale\r\n    if (property.toLowerCase() === 'x' || property.toLowerCase() === 'y' || property.toLowerCase() === 'z') {\r\n      return this.speeds[property]\r\n    }\r\n\r\n    return this.speeds.default\r\n  }\r\n\r\n  /**\r\n   * Start a transition to a new state\r\n   * @param newState Partial state - only need to specify properties that change\r\n   * @param easing Easing function to use\r\n   */\r\n  startTransition (\r\n    newState: Partial<StateProperties>,\r\n    stateName?: string,\r\n    onEnd?: () => void,\r\n    easing: (amount: number) => number = tweenJs.Easing.Linear.None,\r\n    onCancelled?: () => void\r\n  ): void {\r\n    if (this.isTransitioning) {\r\n      this.animationController.forceFinish(false)\r\n    }\r\n\r\n    this.transitioningToStateName = stateName ?? ''\r\n    const state = this.getState()\r\n\r\n    const duration = this.calculateDuration(newState)\r\n    // console.log('duration', duration, JSON.stringify(state), JSON.stringify(newState))\r\n\r\n    void this.animationController.startAnimation(() => {\r\n      const group = new tweenJs.Group()\r\n      new tweenJs.Tween(state, group)\r\n        .to(newState, duration)\r\n        .easing(easing)\r\n        .onUpdate((obj) => {\r\n          for (const key of Object.keys(obj)) {\r\n            this.setState(key, obj[key])\r\n          }\r\n        })\r\n        .onComplete(() => {\r\n          this.animationController.forceFinish()\r\n          this.currentStateName = this.transitioningToStateName\r\n          this.transitioningToStateName = ''\r\n          onEnd?.()\r\n        })\r\n        .start()\r\n      return group\r\n    }, onCancelled)\r\n  }\r\n\r\n  /**\r\n   * Reset to default state\r\n   */\r\n  reset (): void {\r\n    this.startTransition(this.defaultState)\r\n  }\r\n\r\n\r\n  /**\r\n   * Update the animation (should be called in your render/update loop)\r\n   */\r\n  update (): void {\r\n    this.animationController.update()\r\n  }\r\n\r\n  /**\r\n   * Force finish the current transition\r\n   */\r\n  forceFinish (): void {\r\n    this.animationController.forceFinish()\r\n  }\r\n\r\n  /**\r\n   * Start a new transition to the specified state\r\n   */\r\n  transitionTo (\r\n    newState: Partial<StateProperties>,\r\n    stateName?: string,\r\n    onEnd?: () => void,\r\n    onCancelled?: () => void\r\n  ): void {\r\n    this.startTransition(newState, stateName, onEnd, tweenJs.Easing.Linear.None, onCancelled)\r\n  }\r\n\r\n  /**\r\n   * Get the current value of a property\r\n   */\r\n  getCurrentValue (property: string): number {\r\n    return this.getState()[property]\r\n  }\r\n\r\n  /**\r\n   * Check if currently transitioning\r\n   */\r\n  get isTransitioning (): boolean {\r\n    return this.animationController.isActive\r\n  }\r\n}\r\n","import { subscribeKey } from 'valtio/utils'\r\n\r\n// eslint-disable-next-line max-params\r\nexport function watchProperty<T extends Record<string, any>, K> (asyncGetter: (value: T[keyof T]) => Promise<K>, valtioProxy: T, key: keyof T, readySetter: (res: K) => void, cleanup?: (res: K) => void) {\r\n  let i = 0\r\n  let lastRes: K | undefined\r\n  const request = async () => {\r\n    const req = ++i\r\n    const res = await asyncGetter(valtioProxy[key])\r\n    if (req === i) {\r\n      if (lastRes) {\r\n        cleanup?.(lastRes)\r\n      }\r\n      readySetter(res)\r\n      lastRes = res\r\n    } else {\r\n      // rejected\r\n      cleanup?.(res)\r\n    }\r\n  }\r\n  void request()\r\n  return subscribeKey(valtioProxy, key, request)\r\n}\r\n","import * as THREE from 'three'\r\nimport * as tweenJs from '@tweenjs/tween.js'\r\nimport PrismarineItem from 'prismarine-item'\r\nimport worldBlockProvider, { WorldBlockProvider } from 'mc-assets/dist/worldBlockProvider'\r\nimport { BlockModel } from 'mc-assets'\r\nimport { getThreeBlockModelGroup, renderBlockThree, setBlockPosition } from '../lib/mesher/standaloneRenderer'\r\nimport { MovementState, PlayerStateRenderer } from '../lib/basePlayerState'\r\nimport { DebugGui } from '../lib/DebugGui'\r\nimport { SmoothSwitcher } from '../lib/smoothSwitcher'\r\nimport { watchProperty } from '../lib/utils/proxy'\r\nimport { WorldRendererConfig } from '../lib/worldrendererCommon'\r\nimport { getMyHand } from './hand'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\nimport { disposeObject } from './threeJsUtils'\r\n\r\nexport type HandItemBlock = {\r\n  name?\r\n  properties?\r\n  fullItem?\r\n  type: 'block' | 'item' | 'hand'\r\n  id?: number\r\n}\r\n\r\nconst rotationPositionData = {\r\n  itemRight: {\r\n    'rotation': [\r\n      0,\r\n      -90,\r\n      25\r\n    ],\r\n    'translation': [\r\n      1.13,\r\n      3.2,\r\n      1.13\r\n    ],\r\n    'scale': [\r\n      0.68,\r\n      0.68,\r\n      0.68\r\n    ]\r\n  },\r\n  itemLeft: {\r\n    'rotation': [\r\n      0,\r\n      90,\r\n      -25\r\n    ],\r\n    'translation': [\r\n      1.13,\r\n      3.2,\r\n      1.13\r\n    ],\r\n    'scale': [\r\n      0.68,\r\n      0.68,\r\n      0.68\r\n    ]\r\n  },\r\n  blockRight: {\r\n    'rotation': [\r\n      0,\r\n      45,\r\n      0\r\n    ],\r\n    'translation': [\r\n      0,\r\n      0,\r\n      0\r\n    ],\r\n    'scale': [\r\n      0.4,\r\n      0.4,\r\n      0.4\r\n    ]\r\n  },\r\n  blockLeft: {\r\n    'rotation': [\r\n      0,\r\n      225,\r\n      0\r\n    ],\r\n    'translation': [\r\n      0,\r\n      0,\r\n      0\r\n    ],\r\n    'scale': [\r\n      0.4,\r\n      0.4,\r\n      0.4\r\n    ]\r\n  }\r\n}\r\n\r\nexport default class HoldingBlock {\r\n  // TODO refactor with the tree builder for better visual understanding\r\n  holdingBlock: THREE.Object3D | undefined = undefined\r\n  blockSwapAnimation: {\r\n    switcher: SmoothSwitcher\r\n    // hidden: boolean\r\n  } | undefined = undefined\r\n  cameraGroup = new THREE.Mesh()\r\n  objectOuterGroup = new THREE.Group() // 3\r\n  objectInnerGroup = new THREE.Group() // 4\r\n  holdingBlockInnerGroup = new THREE.Group() // 5\r\n  camera = new THREE.PerspectiveCamera(75, 1, 0.1, 100)\r\n  stopUpdate = false\r\n  lastHeldItem: HandItemBlock | undefined\r\n  isSwinging = false\r\n  nextIterStopCallbacks: Array<() => void> | undefined\r\n  idleAnimator: HandIdleAnimator | undefined\r\n  ready = false\r\n  lastUpdate = 0\r\n  playerHand: THREE.Object3D | undefined\r\n  offHandDisplay = false\r\n  offHandModeLegacy = false\r\n\r\n  swingAnimator: HandSwingAnimator | undefined\r\n  config: WorldRendererConfig\r\n\r\n  constructor (public worldRenderer: WorldRendererThree, public offHand = false) {\r\n    this.initCameraGroup()\r\n    this.worldRenderer.onReactivePlayerStateUpdated('heldItemMain', () => {\r\n      if (!this.offHand) {\r\n        this.updateItem()\r\n      }\r\n    }, false)\r\n    this.worldRenderer.onReactivePlayerStateUpdated('heldItemOff', () => {\r\n      if (this.offHand) {\r\n        this.updateItem()\r\n      }\r\n    }, false)\r\n    this.config = worldRenderer.displayOptions.inWorldRenderingConfig\r\n\r\n    this.offHandDisplay = this.offHand\r\n    // this.offHandDisplay = true\r\n    if (!this.offHand) {\r\n      // load default hand\r\n      void getMyHand().then((hand) => {\r\n        this.playerHand = hand\r\n        // trigger update\r\n        this.updateItem()\r\n      }).then(() => {\r\n        // now watch over the player skin\r\n        watchProperty(\r\n          async () => {\r\n            return getMyHand(this.worldRenderer.playerStateReactive.playerSkin, this.worldRenderer.playerStateReactive.onlineMode ? this.worldRenderer.playerStateReactive.username : undefined)\r\n          },\r\n          this.worldRenderer.playerStateReactive,\r\n          'playerSkin',\r\n          (newHand) => {\r\n            if (newHand) {\r\n              this.playerHand = newHand\r\n              // trigger update\r\n              this.updateItem()\r\n            }\r\n          },\r\n          (oldHand) => {\r\n            disposeObject(oldHand!, true)\r\n          }\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n  updateItem () {\r\n    if (!this.ready) return\r\n    const item = this.offHand ? this.worldRenderer.playerStateReactive.heldItemOff : this.worldRenderer.playerStateReactive.heldItemMain\r\n    if (item) {\r\n      void this.setNewItem(item)\r\n    } else if (this.offHand) {\r\n      void this.setNewItem()\r\n    } else {\r\n      void this.setNewItem({\r\n        type: 'hand',\r\n      })\r\n    }\r\n  }\r\n\r\n  initCameraGroup () {\r\n    this.cameraGroup = new THREE.Mesh()\r\n  }\r\n\r\n  startSwing () {\r\n    this.swingAnimator?.startSwing()\r\n  }\r\n\r\n  stopSwing () {\r\n    this.swingAnimator?.stopSwing()\r\n  }\r\n\r\n  render (originalCamera: THREE.PerspectiveCamera, renderer: THREE.WebGLRenderer, ambientLight: THREE.AmbientLight, directionalLight: THREE.DirectionalLight) {\r\n    if (!this.lastHeldItem) return\r\n    const now = performance.now()\r\n    if (this.lastUpdate && now - this.lastUpdate > 50) { // one tick\r\n      void this.replaceItemModel(this.lastHeldItem)\r\n    }\r\n\r\n    // Only update idle animation if not swinging\r\n    if (this.swingAnimator?.isCurrentlySwinging() || this.swingAnimator?.debugParams.animationStage) {\r\n      this.swingAnimator?.update()\r\n    } else {\r\n      this.idleAnimator?.update()\r\n    }\r\n\r\n    this.blockSwapAnimation?.switcher.update()\r\n\r\n    const scene = new THREE.Scene()\r\n    scene.add(this.cameraGroup)\r\n    // if (this.camera.aspect !== originalCamera.aspect) {\r\n    //   this.camera.aspect = originalCamera.aspect\r\n    //   this.camera.updateProjectionMatrix()\r\n    // }\r\n    this.updateCameraGroup()\r\n    scene.add(ambientLight.clone())\r\n    scene.add(directionalLight.clone())\r\n\r\n    const viewerSize = renderer.getSize(new THREE.Vector2())\r\n    const minSize = Math.min(viewerSize.width, viewerSize.height)\r\n    const x = viewerSize.width - minSize\r\n\r\n    // Mirror the scene for offhand by scaling\r\n    const { offHandDisplay } = this\r\n    if (offHandDisplay) {\r\n      this.cameraGroup.scale.x = -1\r\n    }\r\n\r\n    renderer.autoClear = false\r\n    renderer.clearDepth()\r\n    if (this.offHandDisplay) {\r\n      renderer.setViewport(0, 0, minSize, minSize)\r\n    } else {\r\n      const x = viewerSize.width - minSize\r\n      // if (x) x -= x / 4\r\n      renderer.setViewport(x, 0, minSize, minSize)\r\n    }\r\n    renderer.render(scene, this.camera)\r\n    renderer.setViewport(0, 0, viewerSize.width, viewerSize.height)\r\n\r\n    // Reset the mirroring after rendering\r\n    if (offHandDisplay) {\r\n      this.cameraGroup.scale.x = 1\r\n    }\r\n  }\r\n\r\n  // worldTest () {\r\n  //   const mesh = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), new THREE.MeshPhongMaterial({ color: 0x00_00_ff, transparent: true, opacity: 0.5 }))\r\n  //   mesh.position.set(0.5, 0.5, 0.5)\r\n  //   const group = new THREE.Group()\r\n  //   group.add(mesh)\r\n  //   group.position.set(-0.5, -0.5, -0.5)\r\n  //   const outerGroup = new THREE.Group()\r\n  //   outerGroup.add(group)\r\n  //   outerGroup.position.set(this.camera.position.x, this.camera.position.y, this.camera.position.z)\r\n  //   this.scene.add(outerGroup)\r\n\r\n  //   new tweenJs.Tween(group.rotation).to({ z: THREE.MathUtils.degToRad(90) }, 1000).yoyo(true).repeat(Infinity).start()\r\n  // }\r\n\r\n  async playBlockSwapAnimation (forceState: 'appeared' | 'disappeared') {\r\n    this.blockSwapAnimation ??= {\r\n      switcher: new SmoothSwitcher(\r\n        () => ({\r\n          y: this.objectInnerGroup.position.y\r\n        }),\r\n        (property, value) => {\r\n          if (property === 'y') this.objectInnerGroup.position.y = value\r\n        },\r\n        {\r\n          y: 16 // units per second\r\n        }\r\n      )\r\n    }\r\n\r\n    const newState = forceState\r\n    // if (forceState && newState !== forceState) {\r\n    //   throw new Error(`forceState does not match current state ${forceState} !== ${newState}`)\r\n    // }\r\n\r\n    const targetY = this.objectInnerGroup.position.y + (this.objectInnerGroup.scale.y * 1.5 * (newState === 'appeared' ? 1 : -1))\r\n\r\n    // if (newState === this.blockSwapAnimation.switcher.transitioningToStateName) {\r\n    //   return false\r\n    // }\r\n\r\n    let cancelled = false\r\n    return new Promise<boolean>((resolve) => {\r\n      this.blockSwapAnimation!.switcher.transitionTo(\r\n        { y: targetY },\r\n        newState,\r\n        () => {\r\n          if (!cancelled) {\r\n            resolve(true)\r\n          }\r\n        },\r\n        () => {\r\n          cancelled = true\r\n          resolve(false)\r\n        }\r\n      )\r\n    })\r\n  }\r\n\r\n  isDifferentItem (block: HandItemBlock | undefined) {\r\n    const Item = PrismarineItem(this.worldRenderer.version)\r\n    if (!this.lastHeldItem) {\r\n      return true\r\n    }\r\n    if (this.lastHeldItem.name !== block?.name) {\r\n      return true\r\n    }\r\n    // eslint-disable-next-line sonarjs/prefer-single-boolean-return\r\n    if (!Item.equal(this.lastHeldItem.fullItem, block?.fullItem ?? {}) || JSON.stringify(this.lastHeldItem.fullItem.components) !== JSON.stringify(block?.fullItem?.components)) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  updateCameraGroup () {\r\n    if (this.stopUpdate) return\r\n    const { camera } = this\r\n    this.cameraGroup.position.copy(camera.position)\r\n    this.cameraGroup.rotation.copy(camera.rotation)\r\n\r\n    // const viewerSize = viewer.renderer.getSize(new THREE.Vector2())\r\n    // const aspect = viewerSize.width / viewerSize.height\r\n    const aspect = 1\r\n\r\n\r\n    // Adjust the position based on the aspect ratio\r\n    const { position, scale: scaleData } = this.getHandHeld3d()\r\n    const distance = -position.z\r\n    const side = this.offHandModeLegacy ? -1 : 1\r\n    this.objectOuterGroup.position.set(\r\n      distance * position.x * aspect * side,\r\n      distance * position.y,\r\n      -distance\r\n    )\r\n\r\n    // const scale = Math.min(0.8, Math.max(1, 1 * aspect))\r\n    const scale = scaleData * 2.22 * 0.2\r\n    this.objectOuterGroup.scale.set(scale, scale, scale)\r\n  }\r\n\r\n  lastItemModelName: string | undefined\r\n  private async createItemModel (handItem: HandItemBlock): Promise<{ model: THREE.Object3D; type: 'hand' | 'block' | 'item' } | undefined> {\r\n    this.lastUpdate = performance.now()\r\n    if (!handItem || (handItem.type === 'hand' && !this.playerHand)) return undefined\r\n\r\n    let blockInner: THREE.Object3D | undefined\r\n    if (handItem.type === 'item' || handItem.type === 'block') {\r\n      const result = this.worldRenderer.entities.getItemMesh({\r\n        ...handItem.fullItem,\r\n        itemId: handItem.id,\r\n      }, {\r\n        'minecraft:display_context': 'firstperson',\r\n        'minecraft:use_duration': this.worldRenderer.playerStateReactive.itemUsageTicks,\r\n        'minecraft:using_item': !!this.worldRenderer.playerStateReactive.itemUsageTicks,\r\n      }, false, this.lastItemModelName)\r\n      if (result) {\r\n        const { mesh: itemMesh, isBlock, modelName } = result\r\n        if (isBlock) {\r\n          blockInner = itemMesh\r\n          handItem.type = 'block'\r\n        } else {\r\n          itemMesh.position.set(0.5, 0.5, 0.5)\r\n          blockInner = itemMesh\r\n          handItem.type = 'item'\r\n        }\r\n        this.lastItemModelName = modelName\r\n      }\r\n    } else {\r\n      blockInner = this.playerHand!\r\n    }\r\n    if (!blockInner) return\r\n    blockInner.name = 'holdingBlock'\r\n\r\n    const rotationDeg = this.getHandHeld3d().rotation\r\n    blockInner.rotation.x = THREE.MathUtils.degToRad(rotationDeg.x)\r\n    blockInner.rotation.y = THREE.MathUtils.degToRad(rotationDeg.y)\r\n    blockInner.rotation.z = THREE.MathUtils.degToRad(rotationDeg.z)\r\n\r\n    return { model: blockInner, type: handItem.type }\r\n  }\r\n\r\n  async replaceItemModel (handItem?: HandItemBlock): Promise<void> {\r\n    // if switch animation is in progress, do not replace the item\r\n    if (this.blockSwapAnimation?.switcher.isTransitioning) return\r\n\r\n    if (!handItem) {\r\n      this.holdingBlock?.removeFromParent()\r\n      this.holdingBlock = undefined\r\n      this.swingAnimator?.stopSwing()\r\n      this.swingAnimator = undefined\r\n      this.idleAnimator = undefined\r\n      return\r\n    }\r\n\r\n    const result = await this.createItemModel(handItem)\r\n    if (!result) return\r\n\r\n    // Update the model without changing the group structure\r\n    this.holdingBlock?.removeFromParent()\r\n    this.holdingBlock = result.model\r\n    this.holdingBlockInnerGroup.add(result.model)\r\n\r\n\r\n  }\r\n\r\n  testUnknownBlockSwitch () {\r\n    void this.setNewItem({\r\n      type: 'item',\r\n      name: 'minecraft:some-unknown-block',\r\n      id: 0,\r\n      fullItem: {}\r\n    })\r\n  }\r\n\r\n  switchRequest = 0\r\n  async setNewItem (handItem?: HandItemBlock) {\r\n    if (!this.isDifferentItem(handItem)) return\r\n    this.lastItemModelName = undefined\r\n    const switchRequest = ++this.switchRequest\r\n    this.lastHeldItem = handItem\r\n    let playAppearAnimation = false\r\n    if (this.holdingBlock) {\r\n      // play disappear animation\r\n      playAppearAnimation = true\r\n      const result = await this.playBlockSwapAnimation('disappeared')\r\n      if (!result) return\r\n      this.holdingBlock?.removeFromParent()\r\n      this.holdingBlock = undefined\r\n    }\r\n\r\n    if (!handItem) {\r\n      this.swingAnimator?.stopSwing()\r\n      this.swingAnimator = undefined\r\n      this.idleAnimator = undefined\r\n      this.blockSwapAnimation = undefined\r\n      return\r\n    }\r\n\r\n    if (switchRequest !== this.switchRequest) return\r\n    const result = await this.createItemModel(handItem)\r\n    if (!result || switchRequest !== this.switchRequest) return\r\n\r\n    const blockOuterGroup = new THREE.Group()\r\n    this.holdingBlockInnerGroup.removeFromParent()\r\n    this.holdingBlockInnerGroup = new THREE.Group()\r\n    this.holdingBlockInnerGroup.add(result.model)\r\n    blockOuterGroup.add(this.holdingBlockInnerGroup)\r\n    this.holdingBlock = result.model\r\n    this.objectInnerGroup = new THREE.Group()\r\n    this.objectInnerGroup.add(blockOuterGroup)\r\n    this.objectInnerGroup.position.set(-0.5, -0.5, -0.5)\r\n    if (playAppearAnimation) {\r\n      this.objectInnerGroup.position.y -= this.objectInnerGroup.scale.y * 1.5\r\n    }\r\n    Object.assign(blockOuterGroup.position, { x: 0.5, y: 0.5, z: 0.5 })\r\n\r\n    this.objectOuterGroup = new THREE.Group()\r\n    this.objectOuterGroup.add(this.objectInnerGroup)\r\n\r\n    this.cameraGroup.add(this.objectOuterGroup)\r\n    const rotationDeg = this.getHandHeld3d().rotation\r\n    this.objectOuterGroup.rotation.y = THREE.MathUtils.degToRad(rotationDeg.yOuter)\r\n\r\n    if (playAppearAnimation) {\r\n      await this.playBlockSwapAnimation('appeared')\r\n    }\r\n\r\n    this.swingAnimator = new HandSwingAnimator(this.holdingBlockInnerGroup)\r\n    this.swingAnimator.type = result.type\r\n    if (this.config.viewBobbing) {\r\n      this.idleAnimator = new HandIdleAnimator(this.holdingBlockInnerGroup, this.worldRenderer.playerStateReactive)\r\n    }\r\n  }\r\n\r\n  getHandHeld3d () {\r\n    const type = this.lastHeldItem?.type ?? 'hand'\r\n    const side = this.offHandModeLegacy ? 'Left' : 'Right'\r\n\r\n    let scale = 0.8 * 1.15 // default scale for hand\r\n    let position = {\r\n      x: 0.4,\r\n      y: -0.7,\r\n      z: -0.45\r\n    }\r\n    let rotation = {\r\n      x: -32.4,\r\n      y: 42.8,\r\n      z: -41.3,\r\n      yOuter: 0\r\n    }\r\n\r\n    if (type === 'item') {\r\n      const itemData = rotationPositionData[`item${side}`]\r\n      position = {\r\n        x: -0.05,\r\n        y: -0.7,\r\n        z: -0.45\r\n      }\r\n      rotation = {\r\n        x: itemData.rotation[0],\r\n        y: itemData.rotation[1],\r\n        z: itemData.rotation[2],\r\n        yOuter: 0\r\n      }\r\n      scale = itemData.scale[0] * 1.15\r\n    } else if (type === 'block') {\r\n      const blockData = rotationPositionData[`block${side}`]\r\n      position = {\r\n        x: 0.4,\r\n        y: -0.7,\r\n        z: -0.45\r\n      }\r\n      rotation = {\r\n        x: blockData.rotation[0],\r\n        y: blockData.rotation[1],\r\n        z: blockData.rotation[2],\r\n        yOuter: 0\r\n      }\r\n      scale = blockData.scale[0] * 1.15\r\n    }\r\n\r\n    return {\r\n      rotation,\r\n      position,\r\n      scale\r\n    }\r\n  }\r\n}\r\n\r\nclass HandIdleAnimator {\r\n  globalTime = 0\r\n  lastTime = 0\r\n  currentState: MovementState\r\n  targetState: MovementState\r\n  defaultPosition: { x: number; y: number; z: number; rotationX: number; rotationY: number; rotationZ: number }\r\n  private readonly idleOffset = { y: 0, rotationZ: 0 }\r\n  private readonly tween = new tweenJs.Group()\r\n  private idleTween: tweenJs.Tween<{ y: number; rotationZ: number }> | null = null\r\n  private readonly stateSwitcher: SmoothSwitcher\r\n\r\n  // Debug parameters\r\n  private readonly debugParams = {\r\n    // Transition durations for different state changes\r\n    walkingSpeed: 8,\r\n    sprintingSpeed: 16,\r\n    walkingAmplitude: { x: 1 / 30, y: 1 / 10, rotationZ: 0.25 },\r\n    sprintingAmplitude: { x: 1 / 30, y: 1 / 10, rotationZ: 0.4 }\r\n  }\r\n\r\n  private readonly debugGui: DebugGui\r\n\r\n  constructor (public handMesh: THREE.Object3D, public playerState: PlayerStateRenderer) {\r\n    this.handMesh = handMesh\r\n    this.globalTime = 0\r\n    this.currentState = 'NOT_MOVING'\r\n    this.targetState = 'NOT_MOVING'\r\n\r\n    this.defaultPosition = {\r\n      x: handMesh.position.x,\r\n      y: handMesh.position.y,\r\n      z: handMesh.position.z,\r\n      rotationX: handMesh.rotation.x,\r\n      rotationY: handMesh.rotation.y,\r\n      rotationZ: handMesh.rotation.z\r\n    }\r\n\r\n    // Initialize state switcher with appropriate speeds\r\n    this.stateSwitcher = new SmoothSwitcher(\r\n      () => {\r\n        return {\r\n          x: this.handMesh.position.x,\r\n          y: this.handMesh.position.y,\r\n          z: this.handMesh.position.z,\r\n          rotationX: this.handMesh.rotation.x,\r\n          rotationY: this.handMesh.rotation.y,\r\n          rotationZ: this.handMesh.rotation.z\r\n        }\r\n      },\r\n      (property, value) => {\r\n        switch (property) {\r\n          case 'x': this.handMesh.position.x = value; break\r\n          case 'y': this.handMesh.position.y = value; break\r\n          case 'z': this.handMesh.position.z = value; break\r\n          case 'rotationX': this.handMesh.rotation.x = value; break\r\n          case 'rotationY': this.handMesh.rotation.y = value; break\r\n          case 'rotationZ': this.handMesh.rotation.z = value; break\r\n        }\r\n      },\r\n      {\r\n        x: 2, // units per second\r\n        y: 2,\r\n        z: 2,\r\n        rotation: Math.PI // radians per second\r\n      }\r\n    )\r\n\r\n    // Initialize debug GUI\r\n    this.debugGui = new DebugGui('idle_animator', this.debugParams)\r\n    // this.debugGui.activate()\r\n  }\r\n\r\n  private startIdleAnimation () {\r\n    if (this.idleTween) {\r\n      this.idleTween.stop()\r\n    }\r\n\r\n    // Start from current position for smooth transition\r\n    this.idleOffset.y = this.handMesh.position.y - this.defaultPosition.y\r\n    this.idleOffset.rotationZ = this.handMesh.rotation.z - this.defaultPosition.rotationZ\r\n\r\n    this.idleTween = new tweenJs.Tween(this.idleOffset, this.tween)\r\n      .to({\r\n        y: 0.05,\r\n        rotationZ: 0.05\r\n      }, 3000)\r\n      .easing(tweenJs.Easing.Sinusoidal.InOut)\r\n      .yoyo(true)\r\n      .repeat(Infinity)\r\n      .start()\r\n  }\r\n\r\n  private stopIdleAnimation () {\r\n    if (this.idleTween) {\r\n      this.idleTween.stop()\r\n      this.idleOffset.y = 0\r\n      this.idleOffset.rotationZ = 0\r\n    }\r\n  }\r\n\r\n  private getStateTransform (state: MovementState, time: number) {\r\n    switch (state) {\r\n      case 'NOT_MOVING':\r\n      case 'SNEAKING':\r\n        return {\r\n          x: this.defaultPosition.x,\r\n          y: this.defaultPosition.y,\r\n          z: this.defaultPosition.z,\r\n          rotationX: this.defaultPosition.rotationX,\r\n          rotationY: this.defaultPosition.rotationY,\r\n          rotationZ: this.defaultPosition.rotationZ\r\n        }\r\n      case 'WALKING':\r\n      case 'SPRINTING': {\r\n        const speed = state === 'SPRINTING' ? this.debugParams.sprintingSpeed : this.debugParams.walkingSpeed\r\n        const amplitude = state === 'SPRINTING' ? this.debugParams.sprintingAmplitude : this.debugParams.walkingAmplitude\r\n\r\n        return {\r\n          x: this.defaultPosition.x + Math.sin(time * speed) * amplitude.x,\r\n          y: this.defaultPosition.y - Math.abs(Math.cos(time * speed)) * amplitude.y,\r\n          z: this.defaultPosition.z,\r\n          rotationX: this.defaultPosition.rotationX,\r\n          rotationY: this.defaultPosition.rotationY,\r\n          // rotationZ: this.defaultPosition.rotationZ + Math.sin(time * speed) * amplitude.rotationZ\r\n          rotationZ: this.defaultPosition.rotationZ\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setState (newState: MovementState) {\r\n    if (newState === this.targetState) return\r\n\r\n    this.targetState = newState\r\n    const noTransition = false\r\n    if (this.currentState !== newState) {\r\n      // Stop idle animation during state transitions\r\n      this.stopIdleAnimation()\r\n\r\n      // Calculate new state transform\r\n      if (!noTransition) {\r\n        // this.globalTime = 0\r\n        const stateTransform = this.getStateTransform(newState, this.globalTime)\r\n\r\n        // Start transition to new state\r\n        this.stateSwitcher.transitionTo(stateTransform, newState)\r\n        // this.updated = false\r\n      }\r\n      this.currentState = newState\r\n    }\r\n  }\r\n\r\n  updated = false\r\n  update () {\r\n    this.stateSwitcher.update()\r\n\r\n    const now = performance.now()\r\n    const deltaTime = (now - this.lastTime) / 1000\r\n    this.lastTime = now\r\n\r\n    // Update global time based on current state\r\n    if (!this.stateSwitcher.isTransitioning) {\r\n      switch (this.currentState) {\r\n        case 'NOT_MOVING':\r\n        case 'SNEAKING':\r\n          this.globalTime = Math.PI / 4\r\n          break\r\n        case 'SPRINTING':\r\n        case 'WALKING':\r\n          this.globalTime += deltaTime\r\n          break\r\n      }\r\n    }\r\n\r\n    // Check for state changes from player state\r\n    if (this.playerState) {\r\n      const newState = this.playerState.movementState\r\n      if (newState !== this.targetState) {\r\n        this.setState(newState)\r\n      }\r\n    }\r\n\r\n    // If we're not transitioning between states and in a stable state that should have idle animation\r\n    if (!this.stateSwitcher.isTransitioning &&\r\n      (this.currentState === 'NOT_MOVING' || this.currentState === 'SNEAKING')) {\r\n      // Start idle animation if not already running\r\n      if (!this.idleTween?.isPlaying()) {\r\n        this.startIdleAnimation()\r\n      }\r\n      // Update idle animation\r\n      this.tween.update()\r\n\r\n      // Apply idle offsets\r\n      this.handMesh.position.y = this.defaultPosition.y + this.idleOffset.y\r\n      this.handMesh.rotation.z = this.defaultPosition.rotationZ + this.idleOffset.rotationZ\r\n    }\r\n\r\n    // If we're in a movement state and not transitioning, update the movement animation\r\n    if (!this.stateSwitcher.isTransitioning &&\r\n      (this.currentState === 'WALKING' || this.currentState === 'SPRINTING')) {\r\n      const stateTransform = this.getStateTransform(this.currentState, this.globalTime)\r\n      Object.assign(this.handMesh.position, stateTransform)\r\n      Object.assign(this.handMesh.rotation, {\r\n        x: stateTransform.rotationX,\r\n        y: stateTransform.rotationY,\r\n        z: stateTransform.rotationZ\r\n      })\r\n      // this.stateSwitcher.transitionTo(stateTransform, this.currentState)\r\n    }\r\n  }\r\n\r\n  getCurrentState () {\r\n    return this.currentState\r\n  }\r\n\r\n  destroy () {\r\n    this.stopIdleAnimation()\r\n    this.stateSwitcher.forceFinish()\r\n  }\r\n}\r\n\r\nclass HandSwingAnimator {\r\n  private readonly PI = Math.PI\r\n  private animationTimer = 0\r\n  private lastTime = 0\r\n  private isAnimating = false\r\n  private stopRequested = false\r\n  private readonly originalRotation: THREE.Euler\r\n  private readonly originalPosition: THREE.Vector3\r\n  private readonly originalScale: THREE.Vector3\r\n\r\n  readonly debugParams = {\r\n    // Animation timing\r\n    animationTime: 250,\r\n    animationStage: 0,\r\n    useClassicSwing: true,\r\n\r\n    // Item/Block animation parameters\r\n    itemSwingXPosScale: -0.8,\r\n    itemSwingYPosScale: 0.2,\r\n    itemSwingZPosScale: -0.2,\r\n    itemHeightScale: -0.6,\r\n    itemPreswingRotY: 45,\r\n    itemSwingXRotAmount: -30,\r\n    itemSwingYRotAmount: -35,\r\n    itemSwingZRotAmount: -5,\r\n\r\n    // Hand/Arm animation parameters\r\n    armSwingXPosScale: -0.3,\r\n    armSwingYPosScale: 0.4,\r\n    armSwingZPosScale: -0.4,\r\n    armSwingYRotAmount: 70,\r\n    armSwingZRotAmount: -20,\r\n    armHeightScale: -0.6\r\n  }\r\n\r\n  private readonly debugGui: DebugGui\r\n\r\n  public type: 'hand' | 'block' | 'item' = 'hand'\r\n\r\n  constructor (public handMesh: THREE.Object3D) {\r\n    this.handMesh = handMesh\r\n    // Store initial transforms\r\n    this.originalRotation = handMesh.rotation.clone()\r\n    this.originalPosition = handMesh.position.clone()\r\n    this.originalScale = handMesh.scale.clone()\r\n\r\n    // Initialize debug GUI\r\n    this.debugGui = new DebugGui('hand_animator', this.debugParams, undefined, {\r\n      animationStage: {\r\n        min: 0,\r\n        max: 1,\r\n        step: 0.01\r\n      },\r\n      // Add ranges for all animation parameters\r\n      itemSwingXPosScale: { min: -2, max: 2, step: 0.1 },\r\n      itemSwingYPosScale: { min: -2, max: 2, step: 0.1 },\r\n      itemSwingZPosScale: { min: -2, max: 2, step: 0.1 },\r\n      itemHeightScale: { min: -2, max: 2, step: 0.1 },\r\n      itemPreswingRotY: { min: -180, max: 180, step: 5 },\r\n      itemSwingXRotAmount: { min: -180, max: 180, step: 5 },\r\n      itemSwingYRotAmount: { min: -180, max: 180, step: 5 },\r\n      itemSwingZRotAmount: { min: -180, max: 180, step: 5 },\r\n      armSwingXPosScale: { min: -2, max: 2, step: 0.1 },\r\n      armSwingYPosScale: { min: -2, max: 2, step: 0.1 },\r\n      armSwingZPosScale: { min: -2, max: 2, step: 0.1 },\r\n      armSwingYRotAmount: { min: -180, max: 180, step: 5 },\r\n      armSwingZRotAmount: { min: -180, max: 180, step: 5 },\r\n      armHeightScale: { min: -2, max: 2, step: 0.1 }\r\n    })\r\n    // this.debugGui.activate()\r\n  }\r\n\r\n  update () {\r\n    if (!this.isAnimating && !this.debugParams.animationStage) {\r\n      // If not animating, ensure we're at original position\r\n      this.handMesh.rotation.copy(this.originalRotation)\r\n      this.handMesh.position.copy(this.originalPosition)\r\n      this.handMesh.scale.copy(this.originalScale)\r\n      return\r\n    }\r\n\r\n    const now = performance.now()\r\n    const deltaTime = (now - this.lastTime) / 1000\r\n    this.lastTime = now\r\n\r\n    // Update animation progress\r\n    this.animationTimer += deltaTime * 1000 // Convert to ms\r\n\r\n    // Calculate animation stage (0 to 1)\r\n    const stage = this.debugParams.animationStage || Math.min(this.animationTimer / this.debugParams.animationTime, 1)\r\n\r\n    if (stage >= 1) {\r\n      // Animation complete\r\n      if (this.stopRequested) {\r\n        // If stop was requested, actually stop now that we've completed a swing\r\n        this.isAnimating = false\r\n        this.stopRequested = false\r\n        this.animationTimer = 0\r\n        this.handMesh.rotation.copy(this.originalRotation)\r\n        this.handMesh.position.copy(this.originalPosition)\r\n        this.handMesh.scale.copy(this.originalScale)\r\n        return\r\n      }\r\n      // Otherwise reset timer and continue\r\n      this.animationTimer = 0\r\n      return\r\n    }\r\n\r\n    // Start from original transforms\r\n    this.handMesh.rotation.copy(this.originalRotation)\r\n    this.handMesh.position.copy(this.originalPosition)\r\n    this.handMesh.scale.copy(this.originalScale)\r\n\r\n    // Calculate swing progress\r\n    const swingProgress = stage\r\n    const sqrtProgress = Math.sqrt(swingProgress)\r\n    const sinProgress = Math.sin(swingProgress * this.PI)\r\n    const sinSqrtProgress = Math.sin(sqrtProgress * this.PI)\r\n\r\n    if (this.type === 'hand') {\r\n      // Hand animation\r\n      const xOffset = this.debugParams.armSwingXPosScale * sinSqrtProgress\r\n      const yOffset = this.debugParams.armSwingYPosScale * Math.sin(sqrtProgress * this.PI * 2)\r\n      const zOffset = this.debugParams.armSwingZPosScale * sinProgress\r\n\r\n      this.handMesh.position.x += xOffset\r\n      this.handMesh.position.y += yOffset + this.debugParams.armHeightScale * swingProgress\r\n      this.handMesh.position.z += zOffset\r\n\r\n      // Rotations\r\n      this.handMesh.rotation.y += THREE.MathUtils.degToRad(this.debugParams.armSwingYRotAmount * sinSqrtProgress)\r\n      this.handMesh.rotation.z += THREE.MathUtils.degToRad(this.debugParams.armSwingZRotAmount * sinProgress)\r\n    } else {\r\n      // Item/Block animation\r\n      const xOffset = this.debugParams.itemSwingXPosScale * sinSqrtProgress\r\n      const yOffset = this.debugParams.itemSwingYPosScale * Math.sin(sqrtProgress * this.PI * 2)\r\n      const zOffset = this.debugParams.itemSwingZPosScale * sinProgress\r\n\r\n      this.handMesh.position.x += xOffset\r\n      this.handMesh.position.y += yOffset + this.debugParams.itemHeightScale * swingProgress\r\n      this.handMesh.position.z += zOffset\r\n\r\n      // Pre-swing rotation\r\n      this.handMesh.rotation.y += THREE.MathUtils.degToRad(this.debugParams.itemPreswingRotY)\r\n\r\n      // Swing rotations\r\n      this.handMesh.rotation.x += THREE.MathUtils.degToRad(this.debugParams.itemSwingXRotAmount * sinProgress)\r\n      this.handMesh.rotation.y += THREE.MathUtils.degToRad(this.debugParams.itemSwingYRotAmount * sinSqrtProgress)\r\n      this.handMesh.rotation.z += THREE.MathUtils.degToRad(this.debugParams.itemSwingZRotAmount * sinProgress)\r\n    }\r\n  }\r\n\r\n  startSwing () {\r\n    this.stopRequested = false\r\n    if (this.isAnimating) return\r\n\r\n    this.isAnimating = true\r\n    this.animationTimer = 0\r\n    this.lastTime = performance.now()\r\n  }\r\n\r\n  stopSwing () {\r\n    if (!this.isAnimating) return\r\n    this.stopRequested = true\r\n  }\r\n\r\n  isCurrentlySwinging () {\r\n    return this.isAnimating\r\n  }\r\n}\r\n\r\nexport const getBlockMeshFromModel = (material: THREE.Material, model: BlockModel, name: string, blockProvider: WorldBlockProvider) => {\r\n  const worldRenderModel = blockProvider.transformModel(model, {\r\n    name,\r\n    properties: {}\r\n  }) as any\r\n  return getThreeBlockModelGroup(material, [[worldRenderModel]], undefined, 'plains', loadedData)\r\n}\r\n","import { getRenamedData } from 'flying-squid/dist/blockRenames'\r\nimport { BlockModel } from 'mc-assets'\r\nimport { versionToNumber } from 'mc-assets/dist/utils'\r\nimport type { ResourcesManagerCommon } from '../../../src/resourcesManager'\r\n\r\nexport type ResolvedItemModelRender = {\r\n  modelName: string,\r\n  originalItemName?: string\r\n}\r\n\r\nexport const renderSlot = (model: ResolvedItemModelRender, resourcesManager: ResourcesManagerCommon, debugIsQuickbar = false, fullBlockModelSupport = false): {\r\n  texture: string,\r\n  blockData: Record<string, { slice, path }> & { resolvedModel: BlockModel } | null,\r\n  scale: number | null,\r\n  slice: number[] | null,\r\n  modelName: string | null,\r\n} => {\r\n  let itemModelName = model.modelName\r\n  const isItem = loadedData.itemsByName[itemModelName]\r\n\r\n  // #region normalize item name\r\n  if (versionToNumber(bot.version) < versionToNumber('1.13')) itemModelName = getRenamedData(isItem ? 'items' : 'blocks', itemModelName, bot.version, '1.13.1') as string\r\n  // #endregion\r\n\r\n\r\n  let itemTexture\r\n\r\n  if (!fullBlockModelSupport) {\r\n    const atlas = resourcesManager.currentResources?.guiAtlas?.json\r\n    // todo atlas holds all rendered blocks, not all possibly rendered item/block models, need to request this on demand instead (this is how vanilla works)\r\n    const tryGetAtlasTexture = (name?: string) => name && atlas?.textures[name.replace('minecraft:', '').replace('block/', '').replace('blocks/', '').replace('item/', '').replace('items/', '').replace('_inventory', '')]\r\n    const item = tryGetAtlasTexture(itemModelName) ?? tryGetAtlasTexture(model.originalItemName)\r\n    if (item) {\r\n      const x = item.u * atlas.width\r\n      const y = item.v * atlas.height\r\n      return {\r\n        texture: 'gui',\r\n        slice: [x, y, atlas.tileSize, atlas.tileSize],\r\n        scale: 0.25,\r\n        blockData: null,\r\n        modelName: null\r\n      }\r\n    }\r\n  }\r\n\r\n  const blockToTopTexture = (r) => r.top ?? r\r\n\r\n  try {\r\n    if (!appViewer.resourcesManager.currentResources?.itemsRenderer) throw new Error('Items renderer is not available')\r\n    itemTexture =\r\n        appViewer.resourcesManager.currentResources.itemsRenderer.getItemTexture(itemModelName, {}, false, fullBlockModelSupport)\r\n        ?? (model.originalItemName ? appViewer.resourcesManager.currentResources.itemsRenderer.getItemTexture(model.originalItemName, {}, false, fullBlockModelSupport) : undefined)\r\n        ?? appViewer.resourcesManager.currentResources.itemsRenderer.getItemTexture('item/missing_texture')!\r\n  } catch (err) {\r\n    // get resourcepack from resource manager\r\n    reportError?.(`Failed to render item ${itemModelName} (original: ${model.originalItemName}) on ${bot.version} (resourcepack: TODO!): ${err.stack}`)\r\n    itemTexture = blockToTopTexture(appViewer.resourcesManager.currentResources!.itemsRenderer.getItemTexture('errored')!)\r\n  }\r\n\r\n  itemTexture ??= blockToTopTexture(appViewer.resourcesManager.currentResources!.itemsRenderer.getItemTexture('unknown')!)\r\n\r\n\r\n  if ('type' in itemTexture) {\r\n    // is item\r\n    return {\r\n      texture: itemTexture.type,\r\n      slice: itemTexture.slice,\r\n      modelName: itemModelName,\r\n      blockData: null,\r\n      scale: null\r\n    }\r\n  } else {\r\n    // is block\r\n    return {\r\n      texture: 'blocks',\r\n      blockData: itemTexture,\r\n      modelName: itemModelName,\r\n      slice: null,\r\n      scale: null\r\n    }\r\n  }\r\n}\r\n","import type { GraphicsBackend } from '../../../src/appViewer'\r\nimport type { ThreeJsBackendMethods } from './graphicsBackend'\r\n\r\nexport function getThreeJsRendererMethods (): ThreeJsBackendMethods | undefined {\r\n  const renderer = appViewer.backend\r\n  if (renderer?.id !== 'threejs' || !renderer.backendMethods) return\r\n  return new Proxy(renderer.backendMethods, {\r\n    get (target, prop) {\r\n      return async (...args) => {\r\n        const result = await (target[prop as any] as any)(...args)\r\n        return result\r\n      }\r\n    }\r\n  }) as ThreeJsBackendMethods\r\n}\r\n","import * as THREE from 'three'\r\nimport { getLoadedImage } from 'mc-assets/dist/utils'\r\nimport { createCanvas } from '../lib/utils'\r\n\r\nexport const disposeObject = (obj: THREE.Object3D, cleanTextures = false) => {\r\n  // not cleaning texture there as it might be used by other objects, but would be good to also do that\r\n  if (obj instanceof THREE.Mesh) {\r\n    obj.geometry?.dispose?.()\r\n    obj.material?.dispose?.()\r\n  }\r\n  if (obj.children) {\r\n    // eslint-disable-next-line unicorn/no-array-for-each\r\n    obj.children.forEach(child => disposeObject(child, cleanTextures))\r\n  }\r\n  if (cleanTextures) {\r\n    if (obj instanceof THREE.Mesh) {\r\n      obj.material?.map?.dispose?.()\r\n    }\r\n  }\r\n}\r\n\r\nlet textureCache: Record<string, THREE.Texture> = {}\r\nlet imagesPromises: Record<string, Promise<THREE.Texture>> = {}\r\n\r\nexport const loadThreeJsTextureFromUrlSync = (imageUrl: string) => {\r\n  const texture = new THREE.Texture()\r\n  const promise = getLoadedImage(imageUrl).then(image => {\r\n    texture.image = image\r\n    texture.needsUpdate = true\r\n    return texture\r\n  })\r\n  return {\r\n    texture,\r\n    promise\r\n  }\r\n}\r\n\r\nexport const loadThreeJsTextureFromUrl = async (imageUrl: string) => {\r\n  const loaded = new THREE.TextureLoader().loadAsync(imageUrl)\r\n  return loaded\r\n}\r\n\r\nexport const loadThreeJsTextureFromBitmap = (image: ImageBitmap) => {\r\n  const canvas = createCanvas(image.width, image.height)\r\n  const ctx = canvas.getContext('2d')!\r\n  ctx.drawImage(image, 0, 0)\r\n  const texture = new THREE.Texture(canvas)\r\n  texture.magFilter = THREE.NearestFilter\r\n  texture.minFilter = THREE.NearestFilter\r\n  return texture\r\n}\r\n\r\nexport async function loadTexture (texture: string, cb: (texture: THREE.Texture) => void, onLoad?: () => void): Promise<void> {\r\n  const cached = textureCache[texture]\r\n  if (!cached) {\r\n    const { promise, resolve } = Promise.withResolvers<THREE.Texture>()\r\n    const t = loadThreeJsTextureFromUrlSync(texture)\r\n    textureCache[texture] = t.texture\r\n    void t.promise.then(resolve)\r\n    imagesPromises[texture] = promise\r\n  }\r\n\r\n  cb(textureCache[texture])\r\n  void imagesPromises[texture].then(() => {\r\n    onLoad?.()\r\n  })\r\n}\r\n\r\nexport const clearTextureCache = () => {\r\n  textureCache = {}\r\n  imagesPromises = {}\r\n}\r\n\r\n","import * as THREE from 'three'\r\nimport type { WorldRendererThree } from './worldrendererThree'\r\n\r\n// Format for exported world geometry\r\nexport interface ExportedWorldGeometry {\r\n  version: string\r\n  exportedAt: string\r\n  camera: {\r\n    position: { x: number, y: number, z: number }\r\n    rotation: { pitch: number, yaw: number }\r\n  }\r\n  sections: ExportedSection[]\r\n  textureAtlasDataUrl?: string\r\n}\r\n\r\nexport interface ExportedSection {\r\n  key: string\r\n  position: { x: number, y: number, z: number }\r\n  geometry: {\r\n    positions: number[]\r\n    normals: number[]\r\n    colors: number[]\r\n    uvs: number[]\r\n    indices: number[]\r\n  }\r\n}\r\n\r\n/**\r\n * Export world geometry to a downloadable file\r\n */\r\nexport function exportWorldGeometry (\r\n  worldRenderer: WorldRendererThree,\r\n  cameraPosition: { x: number, y: number, z: number },\r\n  cameraRotation: { pitch: number, yaw: number },\r\n  includeTexture = false\r\n): ExportedWorldGeometry {\r\n  const sections: ExportedSection[] = []\r\n\r\n  for (const [key, sectionObject] of Object.entries(worldRenderer.sectionObjects)) {\r\n    const mesh = sectionObject.children.find(child => child.name === 'mesh') as THREE.Mesh | undefined\r\n    if (!mesh?.geometry) continue\r\n\r\n    const { geometry } = mesh\r\n    const positionAttr = geometry.getAttribute('position') as THREE.BufferAttribute\r\n    const normalAttr = geometry.getAttribute('normal') as THREE.BufferAttribute\r\n    const colorAttr = geometry.getAttribute('color') as THREE.BufferAttribute\r\n    const uvAttr = geometry.getAttribute('uv') as THREE.BufferAttribute\r\n    const indexAttr = geometry.index!\r\n\r\n    if (!positionAttr || !indexAttr) continue\r\n\r\n    sections.push({\r\n      key,\r\n      position: {\r\n        x: mesh.position.x,\r\n        y: mesh.position.y,\r\n        z: mesh.position.z\r\n      },\r\n      geometry: {\r\n        positions: [...positionAttr.array],\r\n        normals: normalAttr ? [...normalAttr.array] : [],\r\n        colors: colorAttr ? [...colorAttr.array] : [],\r\n        uvs: uvAttr ? [...uvAttr.array] : [],\r\n        indices: [...indexAttr.array]\r\n      }\r\n    })\r\n  }\r\n\r\n  const exportData: ExportedWorldGeometry = {\r\n    version: worldRenderer.version ?? 'unknown',\r\n    exportedAt: new Date().toISOString(),\r\n    camera: {\r\n      position: cameraPosition,\r\n      rotation: cameraRotation\r\n    },\r\n    sections\r\n  }\r\n\r\n  // Optionally include texture atlas as data URL\r\n  if (includeTexture && worldRenderer.material.map) {\r\n    const canvas = document.createElement('canvas')\r\n    const texture = worldRenderer.material.map\r\n    const { image } = texture\r\n    if (image) {\r\n      canvas.width = image.width\r\n      canvas.height = image.height\r\n      const ctx = canvas.getContext('2d')!\r\n      ctx.drawImage(image, 0, 0)\r\n      exportData.textureAtlasDataUrl = canvas.toDataURL('image/png')\r\n    }\r\n  }\r\n\r\n  return exportData\r\n}\r\n\r\n/**\r\n * Download world geometry as JSON file\r\n */\r\nexport function downloadWorldGeometry (\r\n  worldRenderer: WorldRendererThree,\r\n  cameraPosition: { x: number, y: number, z: number },\r\n  cameraRotation: { pitch: number, yaw: number },\r\n  filename = 'world-geometry.json',\r\n  includeTexture = false\r\n) {\r\n  const exportData = exportWorldGeometry(worldRenderer, cameraPosition, cameraRotation, includeTexture)\r\n  const json = JSON.stringify(exportData)\r\n  const blob = new Blob([json], { type: 'application/json' })\r\n  const url = URL.createObjectURL(blob)\r\n\r\n  const a = document.createElement('a')\r\n  a.href = url\r\n  a.download = filename\r\n  a.click()\r\n\r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\n/**\r\n * Load world geometry from URL\r\n */\r\nexport async function loadWorldGeometryFromUrl (url: string): Promise<ExportedWorldGeometry> {\r\n  const response = await fetch(url)\r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch world geometry: ${response.statusText}`)\r\n  }\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Recreate THREE.js meshes from exported geometry\r\n * Returns an array of mesh groups that can be added to a scene\r\n */\r\nexport function createMeshesFromExport (\r\n  exportData: ExportedWorldGeometry,\r\n  material: THREE.Material\r\n): THREE.Group[] {\r\n  const groups: THREE.Group[] = []\r\n\r\n  for (const section of exportData.sections) {\r\n    const geometry = new THREE.BufferGeometry()\r\n\r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(section.geometry.positions, 3))\r\n    if (section.geometry.normals.length) {\r\n      geometry.setAttribute('normal', new THREE.Float32BufferAttribute(section.geometry.normals, 3))\r\n    }\r\n    if (section.geometry.colors.length) {\r\n      geometry.setAttribute('color', new THREE.Float32BufferAttribute(section.geometry.colors, 3))\r\n    }\r\n    if (section.geometry.uvs.length) {\r\n      geometry.setAttribute('uv', new THREE.Float32BufferAttribute(section.geometry.uvs, 2))\r\n    }\r\n\r\n    // Use appropriate index type based on vertex count\r\n    const maxIndex = Math.max(...section.geometry.indices)\r\n    const IndexArrayType = maxIndex > 65_535 ? Uint32Array : Uint16Array\r\n    geometry.setIndex(new THREE.BufferAttribute(new IndexArrayType(section.geometry.indices), 1))\r\n\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n    mesh.position.set(section.position.x, section.position.y, section.position.z)\r\n    mesh.name = 'mesh'\r\n\r\n    const group = new THREE.Group()\r\n    group.name = 'chunk'\r\n    group.add(mesh)\r\n\r\n    groups.push(group)\r\n  }\r\n\r\n  return groups\r\n}\r\n\r\n/**\r\n * Load texture from data URL and create THREE.js texture\r\n */\r\nexport async function loadTextureFromDataUrl (dataUrl: string): Promise<THREE.Texture> {\r\n  return new Promise((resolve, reject) => {\r\n    const image = new Image()\r\n    image.onload = () => {\r\n      const texture = new THREE.Texture(image)\r\n      texture.magFilter = THREE.NearestFilter\r\n      texture.minFilter = THREE.NearestFilter\r\n      texture.needsUpdate = true\r\n      texture.flipY = false\r\n      resolve(texture)\r\n    }\r\n    image.onerror = reject\r\n    image.src = dataUrl\r\n  })\r\n}\r\n","import * as THREE from 'three'\r\nimport { Vec3 } from 'vec3'\r\nimport { createCanvas } from '../lib/utils'\r\nimport type { WorldRendererThree } from './worldrendererThree'\r\n\r\ntype BannerBlockEntity = {\r\n  Patterns?: Array<{\r\n    Color?: number\r\n    Pattern?: string\r\n  }>\r\n}\r\n\r\n// Banner cloth size is 20x40\r\nconst BANNER_WIDTH = 20\r\nconst BANNER_HEIGHT = 40\r\n\r\n// Map banner block names to base color IDs\r\nconst BANNER_NAME_TO_COLOR: Record<string, number> = {\r\n  'white_banner': 15,\r\n  'orange_banner': 14,\r\n  'magenta_banner': 13,\r\n  'light_blue_banner': 12,\r\n  'yellow_banner': 11,\r\n  'lime_banner': 10,\r\n  'pink_banner': 9,\r\n  'gray_banner': 8,\r\n  'light_gray_banner': 7,\r\n  'cyan_banner': 6,\r\n  'purple_banner': 5,\r\n  'blue_banner': 4,\r\n  'brown_banner': 3,\r\n  'green_banner': 2,\r\n  'red_banner': 1,\r\n  'black_banner': 0,\r\n}\r\n\r\n// Basic Minecraft banner colors (DyeColor enum values)\r\nconst BANNER_COLORS: Record<number, string> = {\r\n  0: '#1d1d21', // black\r\n  1: '#b02e26', // red\r\n  2: '#5e7c16', // green\r\n  3: '#835432', // brown\r\n  4: '#3c44aa', // blue\r\n  5: '#8932b8', // purple\r\n  6: '#169c9c', // cyan\r\n  7: '#9d9d97', // light_gray\r\n  8: '#474f52', // gray\r\n  9: '#f38baa', // pink\r\n  10: '#80c71f', // lime\r\n  11: '#fed83d', // yellow\r\n  12: '#3ab3da', // light_blue\r\n  13: '#c74ebd', // magenta\r\n  14: '#f9801d', // orange\r\n  15: '#f9fffe', // white\r\n}\r\n\r\n// Extract base color from banner block name\r\nfunction getBannerBaseColor (blockName: string): number {\r\n  // Remove _wall_banner suffix if present\r\n  const baseName = blockName.replace('_wall_banner', '_banner')\r\n  return BANNER_NAME_TO_COLOR[baseName] ?? 15 // Default to white\r\n}\r\n\r\n// Basic pattern rendering (simplified - just solid colors for now)\r\nconst renderPattern = (\r\n  ctx: OffscreenCanvasRenderingContext2D,\r\n  pattern: string,\r\n  color: string,\r\n  x: number,\r\n  y: number,\r\n  width: number,\r\n  height: number\r\n) => {\r\n  ctx.fillStyle = color\r\n  // For now, just render basic patterns as solid colors\r\n  // TODO: Implement actual pattern shapes (stripes, crosses, etc.)\r\n  switch (pattern) {\r\n    case 'bs': // Base\r\n      ctx.fillRect(x, y, width, height)\r\n      break\r\n    case 'ls': // Left stripe\r\n      ctx.fillRect(x, y, width / 3, height)\r\n      break\r\n    case 'rs': // Right stripe\r\n      ctx.fillRect(x + (width * 2 / 3), y, width / 3, height)\r\n      break\r\n    case 'ts': // Top stripe\r\n      ctx.fillRect(x, y, width, height / 3)\r\n      break\r\n    case 'ms': // Middle stripe\r\n      ctx.fillRect(x, y + (height / 3), width, height / 3)\r\n      break\r\n    case 'drs': // Down-right stripe\r\n      ctx.fillRect(x, y, width / 2, height / 2)\r\n      break\r\n    case 'dls': // Down-left stripe\r\n      ctx.fillRect(x + (width / 2), y, width / 2, height / 2)\r\n      break\r\n    case 'ss': // Small stripes\r\n      for (let i = 0; i < width; i += 2) {\r\n        ctx.fillRect(x + i, y, 1, height)\r\n      }\r\n      break\r\n    case 'cr': // Cross\r\n      ctx.fillRect(x, y + (height / 3), width, height / 3)\r\n      ctx.fillRect(x + (width / 3), y, width / 3, height)\r\n      break\r\n    case 'sc': // Straight cross\r\n      ctx.fillRect(x, y + (height / 2) - 1, width, 2)\r\n      ctx.fillRect(x + (width / 2) - 1, y, 2, height)\r\n      break\r\n    default:\r\n      // Default: fill entire area\r\n      ctx.fillRect(x, y, width, height)\r\n  }\r\n}\r\n\r\n// Create a cache key from banner content (base color + patterns)\r\nfunction createBannerCacheKey (baseColor: number, patterns: Array<{ Color?: number, Pattern?: string }> | undefined): string {\r\n  if (!patterns || patterns.length === 0) {\r\n    return `banner_${baseColor}_empty`\r\n  }\r\n  const patternStr = patterns.map(p => `${p.Pattern ?? 'bs'}_${p.Color ?? 0}`).join(',')\r\n  return `banner_${baseColor}_${patternStr}`\r\n}\r\n\r\nexport const renderBanner = (\r\n  baseColor: number,\r\n  blockEntity: BannerBlockEntity,\r\n  canvasCreator = (width: number, height: number): OffscreenCanvas => {\r\n    return createCanvas(width, height)\r\n  }\r\n) => {\r\n  // Create canvas with banner cloth size (20x40)\r\n  const scale = 1\r\n  const canvas = canvasCreator(BANNER_WIDTH * scale, BANNER_HEIGHT * scale)\r\n  const ctx = canvas.getContext('2d')!\r\n\r\n  if (!ctx) {\r\n    console.warn('Failed to get 2d context for banner rendering')\r\n    return undefined\r\n  }\r\n\r\n  ctx.imageSmoothingEnabled = false\r\n\r\n  // Base color rendering disabled\r\n  // // Always render base color first (even if no patterns)\r\n  // const baseColorHex = BANNER_COLORS[baseColor] || BANNER_COLORS[15]\r\n  // ctx.fillStyle = baseColorHex\r\n  // ctx.fillRect(0, 0, BANNER_WIDTH * scale, BANNER_HEIGHT * scale)\r\n\r\n  // Render patterns on top of base color (if any)\r\n  if (blockEntity?.Patterns && blockEntity.Patterns.length > 0) {\r\n    for (const patternData of blockEntity.Patterns) {\r\n      const colorId = patternData.Color ?? 0\r\n      const pattern = patternData.Pattern ?? 'bs'\r\n      const color = BANNER_COLORS[colorId] || BANNER_COLORS[0]\r\n\r\n      // Render each pattern on top of previous ones\r\n      renderPattern(\r\n        ctx,\r\n        pattern,\r\n        color,\r\n        0,\r\n        0,\r\n        BANNER_WIDTH * scale,\r\n        BANNER_HEIGHT * scale\r\n      )\r\n    }\r\n  }\r\n\r\n  return canvas\r\n}\r\n\r\n\r\n// Banner texture cache with reference counting\r\nconst bannerTextureCache = new Map<string, { texture: THREE.Texture, refCount: number }>()\r\n\r\nexport function getBannerTexture (\r\n  worldRenderer: WorldRendererThree,\r\n  blockName: string,\r\n  blockEntity: any\r\n): THREE.Texture | undefined {\r\n  // Extract base color from block name\r\n  const baseColor = getBannerBaseColor(blockName)\r\n\r\n  // Create cache key from banner content (not position)\r\n  const cacheKey = createBannerCacheKey(baseColor, blockEntity?.Patterns)\r\n\r\n  // Check cache\r\n  const cached = bannerTextureCache.get(cacheKey)\r\n  if (cached) {\r\n    cached.refCount++\r\n    return cached.texture\r\n  }\r\n\r\n  // Render new banner\r\n  const canvas = renderBanner(baseColor, blockEntity)\r\n  if (!canvas) return undefined\r\n\r\n  const tex = new THREE.Texture(canvas)\r\n  tex.magFilter = THREE.NearestFilter\r\n  tex.minFilter = THREE.NearestFilter\r\n  tex.needsUpdate = true\r\n\r\n  // Store in cache with reference count\r\n  bannerTextureCache.set(cacheKey, { texture: tex, refCount: 1 })\r\n  return tex\r\n}\r\n\r\nexport function releaseBannerTexture (texture: THREE.Texture): void {\r\n  // Find and decrement reference count\r\n  for (const [key, cached] of bannerTextureCache.entries()) {\r\n    if (cached.texture === texture) {\r\n      cached.refCount--\r\n      if (cached.refCount <= 0) {\r\n        // Cleanup unused texture\r\n        cached.texture.dispose()\r\n        bannerTextureCache.delete(key)\r\n      }\r\n      return\r\n    }\r\n  }\r\n}\r\n\r\nexport function createBannerMesh (\r\n  position: Vec3,\r\n  rotation: number,\r\n  isWall: boolean,\r\n  texture: THREE.Texture\r\n): THREE.Group & { bannerTexture?: THREE.Texture } {\r\n  const bannerWidth = 13.6 / 16\r\n  const bannerHeight = 28 / 16\r\n  const clothXOffset = 0\r\n\r\n  let clothYOffset: number\r\n  let clothZPosition: number\r\n  let heightOffset: number\r\n\r\n  if (isWall) {\r\n    // Wall banner: Cloth from [1.2, -14.6, 14.5] to [14.8, 13.4, 15]\r\n    clothYOffset = (-14.6 + 13.4) / 2 / 16 - 0.5\r\n    clothZPosition = 1 - 14.75 / 16 - 0.5\r\n    heightOffset = 1 / 2\r\n  } else {\r\n    // Standing banner: Cloth from [1.2, 1.4, 7] to [14.8, 29.4, 7.5]\r\n    clothYOffset = (1.4 + 29.4) / 2 / 16\r\n    clothZPosition = 1 - 7.25 / 16 - 0.5\r\n    heightOffset = 0\r\n  }\r\n\r\n  const mesh = new THREE.Mesh(\r\n    new THREE.PlaneGeometry(bannerWidth, bannerHeight),\r\n    new THREE.MeshBasicMaterial({ map: texture, transparent: true })\r\n  )\r\n  mesh.renderOrder = 999\r\n\r\n  const thickness = 0.5 / 16\r\n  const wallSpacing = 0.25 / 16\r\n  if (isWall) {\r\n    mesh.position.set(clothXOffset, clothYOffset, clothZPosition + wallSpacing + 0.004)\r\n  } else {\r\n    mesh.position.set(clothXOffset, clothYOffset, clothZPosition + thickness / 2 + 0.004)\r\n  }\r\n\r\n  const group = new THREE.Group() as THREE.Group & { bannerTexture?: THREE.Texture }\r\n  group.rotation.set(\r\n    0,\r\n    -THREE.MathUtils.degToRad(rotation * (isWall ? 90 : 45 / 2)),\r\n    0\r\n  )\r\n  group.add(mesh)\r\n  group.bannerTexture = texture\r\n  group.position.set(position.x + 0.5, position.y + heightOffset, position.z + 0.5)\r\n  return group\r\n}\r\n","import * as THREE from 'three'\r\nimport { LineMaterial, LineSegmentsGeometry, Wireframe } from 'three-stdlib'\r\nimport { Vec3 } from 'vec3'\r\nimport { BlockShape, BlocksShapes } from 'renderer/viewer/lib/basePlayerState'\r\nimport { WorldRendererThree } from '../worldrendererThree'\r\nimport { loadThreeJsTextureFromUrl } from '../threeJsUtils'\r\nimport destroyStage0 from '../../../../assets/destroy_stage_0.png'\r\nimport destroyStage1 from '../../../../assets/destroy_stage_1.png'\r\nimport destroyStage2 from '../../../../assets/destroy_stage_2.png'\r\nimport destroyStage3 from '../../../../assets/destroy_stage_3.png'\r\nimport destroyStage4 from '../../../../assets/destroy_stage_4.png'\r\nimport destroyStage5 from '../../../../assets/destroy_stage_5.png'\r\nimport destroyStage6 from '../../../../assets/destroy_stage_6.png'\r\nimport destroyStage7 from '../../../../assets/destroy_stage_7.png'\r\nimport destroyStage8 from '../../../../assets/destroy_stage_8.png'\r\nimport destroyStage9 from '../../../../assets/destroy_stage_9.png'\r\n\r\nexport class CursorBlock {\r\n  _cursorLinesHidden = false\r\n  get cursorLinesHidden () {\r\n    return this._cursorLinesHidden\r\n  }\r\n  set cursorLinesHidden (value: boolean) {\r\n    if (this.interactionLines) {\r\n      this.interactionLines.mesh.visible = !value\r\n    }\r\n    this._cursorLinesHidden = value\r\n  }\r\n\r\n  cursorLineMaterial: LineMaterial\r\n  interactionLines: null | { blockPos: Vec3, mesh: THREE.Group, shapePositions: BlocksShapes | undefined } = null\r\n  prevColor: string | undefined\r\n  blockBreakMesh: THREE.Mesh\r\n  breakTextures: THREE.Texture[] = []\r\n\r\n  constructor (public readonly worldRenderer: WorldRendererThree) {\r\n    // Initialize break mesh and textures\r\n    const destroyStagesImages = [\r\n      destroyStage0, destroyStage1, destroyStage2, destroyStage3, destroyStage4,\r\n      destroyStage5, destroyStage6, destroyStage7, destroyStage8, destroyStage9\r\n    ]\r\n\r\n    for (let i = 0; i < 10; i++) {\r\n      void loadThreeJsTextureFromUrl(destroyStagesImages[i]).then((texture) => {\r\n        texture.magFilter = THREE.NearestFilter\r\n        texture.minFilter = THREE.NearestFilter\r\n        this.breakTextures.push(texture)\r\n      })\r\n    }\r\n\r\n    const breakMaterial = new THREE.MeshBasicMaterial({\r\n      transparent: true,\r\n      blending: THREE.MultiplyBlending,\r\n      alphaTest: 0.5,\r\n    })\r\n    this.blockBreakMesh = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), breakMaterial)\r\n    this.blockBreakMesh.visible = false\r\n    this.blockBreakMesh.renderOrder = 999\r\n    this.blockBreakMesh.name = 'blockBreakMesh'\r\n    this.worldRenderer.scene.add(this.blockBreakMesh)\r\n\r\n    this.worldRenderer.onReactivePlayerStateUpdated('gameMode', () => {\r\n      this.updateLineMaterial()\r\n    })\r\n    // todo figure out why otherwise fog from skybox breaks it\r\n    setTimeout(() => {\r\n      this.updateLineMaterial()\r\n      if (this.interactionLines) {\r\n        this.setHighlightCursorBlock(this.interactionLines.blockPos, this.interactionLines.shapePositions, true)\r\n      }\r\n    })\r\n  }\r\n\r\n  // Update functions\r\n  updateLineMaterial () {\r\n    const inCreative = this.worldRenderer.playerStateReactive.gameMode === 'creative'\r\n    const pixelRatio = this.worldRenderer.renderer.getPixelRatio()\r\n\r\n    if (this.cursorLineMaterial) {\r\n      this.cursorLineMaterial.dispose()\r\n    }\r\n    this.cursorLineMaterial = new LineMaterial({\r\n      color: (() => {\r\n        switch (this.worldRenderer.worldRendererConfig.highlightBlockColor) {\r\n          case 'blue':\r\n            return 0x40_80_ff\r\n          case 'classic':\r\n            return 0x00_00_00\r\n          default:\r\n            return inCreative ? 0x40_80_ff : 0x00_00_00\r\n        }\r\n      })(),\r\n      linewidth: Math.max(pixelRatio * 0.7, 1) * 2,\r\n      // dashed: true,\r\n      // dashSize: 5,\r\n    })\r\n    this.prevColor = this.worldRenderer.worldRendererConfig.highlightBlockColor\r\n  }\r\n\r\n  updateBreakAnimation (blockPosition: { x: number, y: number, z: number } | undefined, stage: number | null, mergedShape?: BlockShape) {\r\n    this.hideBreakAnimation()\r\n    if (stage === null || !blockPosition || !mergedShape) return\r\n\r\n    const { position, width, height, depth } = mergedShape\r\n    this.blockBreakMesh.scale.set(width * 1.001, height * 1.001, depth * 1.001)\r\n    position.add(blockPosition)\r\n    this.blockBreakMesh.position.set(position.x, position.y, position.z)\r\n    this.blockBreakMesh.visible = true;\r\n\r\n    (this.blockBreakMesh.material as THREE.MeshBasicMaterial).map = this.breakTextures[stage] ?? this.breakTextures.at(-1);\r\n    (this.blockBreakMesh.material as THREE.MeshBasicMaterial).needsUpdate = true\r\n  }\r\n\r\n  hideBreakAnimation () {\r\n    if (this.blockBreakMesh) {\r\n      this.blockBreakMesh.visible = false\r\n    }\r\n  }\r\n\r\n  updateDisplay () {\r\n    if (this.cursorLineMaterial) {\r\n      const { renderer } = this.worldRenderer\r\n      this.cursorLineMaterial.resolution.set(renderer.domElement.width, renderer.domElement.height)\r\n      this.cursorLineMaterial.dashOffset = performance.now() / 750\r\n    }\r\n  }\r\n\r\n  setHighlightCursorBlock (blockPos: Vec3 | null, shapePositions?: BlocksShapes, force = false): void {\r\n    if (blockPos && this.interactionLines && blockPos.equals(this.interactionLines.blockPos) && sameArray(shapePositions ?? [], this.interactionLines.shapePositions ?? []) && !force) {\r\n      return\r\n    }\r\n    if (this.interactionLines !== null) {\r\n      this.worldRenderer.scene.remove(this.interactionLines.mesh)\r\n      this.interactionLines = null\r\n    }\r\n    if (blockPos === null) {\r\n      return\r\n    }\r\n\r\n    const group = new THREE.Group()\r\n    for (const { position, width, height, depth } of shapePositions ?? []) {\r\n      const scale = [1.0001 * width, 1.0001 * height, 1.0001 * depth] as const\r\n      const geometry = new THREE.BoxGeometry(...scale)\r\n      const lines = new LineSegmentsGeometry().fromEdgesGeometry(new THREE.EdgesGeometry(geometry))\r\n      const wireframe = new Wireframe(lines, this.cursorLineMaterial)\r\n      const pos = blockPos.plus(position)\r\n      wireframe.position.set(pos.x, pos.y, pos.z)\r\n      wireframe.computeLineDistances()\r\n      group.add(wireframe)\r\n    }\r\n    this.worldRenderer.scene.add(group)\r\n    group.visible = !this.cursorLinesHidden\r\n    this.interactionLines = { blockPos, mesh: group, shapePositions }\r\n  }\r\n\r\n  render () {\r\n    if (this.prevColor !== this.worldRenderer.worldRendererConfig.highlightBlockColor) {\r\n      this.updateLineMaterial()\r\n    }\r\n    this.updateDisplay()\r\n  }\r\n}\r\n\r\nconst sameArray = (a: any[], b: any[]) => {\r\n  if (a.length !== b.length) return false\r\n  for (const [i, element] of a.entries()) {\r\n    if (element !== b[i]) return false\r\n  }\r\n  return true\r\n}\r\n","import { BlockModel } from 'mc-assets/dist/types'\r\nimport { ItemSpecificContextProperties, PlayerStateRenderer } from 'renderer/viewer/lib/basePlayerState'\r\nimport { GeneralInputItem, getItemModelName } from '../../../src/mineflayer/items'\r\nimport { ResourcesManager, ResourcesManagerTransferred } from '../../../src/resourcesManager'\r\nimport { renderSlot } from './renderSlot'\r\n\r\nexport const getItemUv = (item: Record<string, any>, specificProps: ItemSpecificContextProperties, resourcesManager: ResourcesManagerTransferred, playerState: PlayerStateRenderer): {\r\n  u: number\r\n  v: number\r\n  su: number\r\n  sv: number\r\n  renderInfo?: ReturnType<typeof renderSlot>\r\n  // texture: ImageBitmap\r\n  modelName: string\r\n} | {\r\n  resolvedModel: BlockModel\r\n  modelName: string\r\n} => {\r\n  const resources = resourcesManager.currentResources\r\n  if (!resources) throw new Error('Resources not loaded')\r\n  const idOrName = item.itemId ?? item.blockId ?? item.name\r\n  const { blockState } = item\r\n  try {\r\n    const name =\r\n      blockState\r\n        ? loadedData.blocksByStateId[blockState]?.name\r\n        : typeof idOrName === 'number' ? loadedData.items[idOrName]?.name : idOrName\r\n    if (!name) throw new Error(`Item not found: ${idOrName}`)\r\n\r\n    const model = getItemModelName({\r\n      ...item,\r\n      name,\r\n    } as GeneralInputItem, specificProps, resourcesManager, playerState)\r\n\r\n    const renderInfo = renderSlot({\r\n      modelName: model,\r\n    }, resourcesManager, false, true)\r\n\r\n    if (!renderInfo) throw new Error(`Failed to get render info for item ${name}`)\r\n\r\n    const img = renderInfo.texture === 'blocks' ? resources.blocksAtlasImage : resources.itemsAtlasImage\r\n\r\n    if (renderInfo.blockData) {\r\n      return {\r\n        resolvedModel: renderInfo.blockData.resolvedModel,\r\n        modelName: renderInfo.modelName!\r\n      }\r\n    }\r\n    if (renderInfo.slice) {\r\n      // Get slice coordinates from either block or item texture\r\n      const [x, y, w, h] = renderInfo.slice\r\n      const [u, v, su, sv] = [x / img.width, y / img.height, (w / img.width), (h / img.height)]\r\n      return {\r\n        u, v, su, sv,\r\n        renderInfo,\r\n        // texture: img,\r\n        modelName: renderInfo.modelName!\r\n      }\r\n    }\r\n\r\n    throw new Error(`Invalid render info for item ${name}`)\r\n  } catch (err) {\r\n    reportError?.(err)\r\n    // Return default UV coordinates for missing texture\r\n    return {\r\n      u: 0,\r\n      v: 0,\r\n      su: 16 / resources.blocksAtlasImage.width,\r\n      sv: 16 / resources.blocksAtlasImage.width,\r\n      // texture: resources.blocksAtlasImage,\r\n      modelName: 'missing'\r\n    }\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\n\r\nexport interface SoundSystem {\r\n  playSound: (position: { x: number, y: number, z: number }, path: string, volume?: number, pitch?: number, timeout?: number) => void\r\n  destroy: () => void\r\n}\r\n\r\nexport class ThreeJsSound implements SoundSystem {\r\n  audioListener: THREE.AudioListener | undefined\r\n  private readonly activeSounds = new Set<THREE.PositionalAudio>()\r\n  private readonly audioContext: AudioContext | undefined\r\n  private readonly soundVolumes = new Map<THREE.PositionalAudio, number>()\r\n  baseVolume = 1\r\n\r\n  constructor (public worldRenderer: WorldRendererThree) {\r\n    worldRenderer.onWorldSwitched.push(() => {\r\n      this.stopAll()\r\n    })\r\n\r\n    worldRenderer.onReactiveConfigUpdated('volume', (volume) => {\r\n      this.changeVolume(volume)\r\n    })\r\n  }\r\n\r\n  initAudioListener () {\r\n    if (this.audioListener) return\r\n    this.audioListener = new THREE.AudioListener()\r\n    this.worldRenderer.camera.add(this.audioListener)\r\n  }\r\n\r\n  playSound (position: { x: number, y: number, z: number }, path: string, volume = 1, pitch = 1, timeout = 500) {\r\n    this.initAudioListener()\r\n\r\n    const sound = new THREE.PositionalAudio(this.audioListener!)\r\n    this.activeSounds.add(sound)\r\n    this.soundVolumes.set(sound, volume)\r\n\r\n    const audioLoader = new THREE.AudioLoader()\r\n    const start = Date.now()\r\n    void audioLoader.loadAsync(path).then((buffer) => {\r\n      if (Date.now() - start > timeout) {\r\n        console.warn('Ignored playing sound', path, 'due to timeout:', timeout, 'ms <', Date.now() - start, 'ms')\r\n        return\r\n      }\r\n      // play\r\n      sound.setBuffer(buffer)\r\n      sound.setRefDistance(20)\r\n      sound.setVolume(volume * this.baseVolume)\r\n      sound.setPlaybackRate(pitch) // set the pitch\r\n      this.worldRenderer.scene.add(sound)\r\n      // set sound position\r\n      sound.position.set(position.x, position.y, position.z)\r\n      sound.onEnded = () => {\r\n        this.worldRenderer.scene.remove(sound)\r\n        if (sound.source) {\r\n          sound.disconnect()\r\n        }\r\n        this.activeSounds.delete(sound)\r\n        this.soundVolumes.delete(sound)\r\n        audioLoader.manager.itemEnd(path)\r\n      }\r\n      sound.play()\r\n    })\r\n  }\r\n\r\n  stopAll () {\r\n    for (const sound of this.activeSounds) {\r\n      if (!sound) continue\r\n      sound.stop()\r\n      if (sound.source) {\r\n        sound.disconnect()\r\n      }\r\n      this.worldRenderer.scene.remove(sound)\r\n    }\r\n    this.activeSounds.clear()\r\n    this.soundVolumes.clear()\r\n  }\r\n\r\n  changeVolume (volume: number) {\r\n    this.baseVolume = volume\r\n    for (const [sound, individualVolume] of this.soundVolumes) {\r\n      sound.setVolume(individualVolume * this.baseVolume)\r\n    }\r\n  }\r\n\r\n  destroy () {\r\n    this.stopAll()\r\n    // Remove and cleanup audio listener\r\n    if (this.audioListener) {\r\n      this.audioListener.removeFromParent()\r\n      this.audioListener = undefined\r\n    }\r\n  }\r\n\r\n  playTestSound () {\r\n    this.playSound(this.worldRenderer.camera.position, '/sound.mp3')\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\n\r\nexport class CameraShake {\r\n  private rollAngle = 0\r\n  private get damageRollAmount () { return 5 }\r\n  private get damageAnimDuration () { return 200 }\r\n  private rollAnimation?: { startTime: number, startRoll: number, targetRoll: number, duration: number, returnToZero?: boolean }\r\n  private basePitch = 0\r\n  private baseYaw = 0\r\n\r\n  constructor (public worldRenderer: WorldRendererThree, public onRenderCallbacks: Array<() => void>) {\r\n    onRenderCallbacks.push(() => {\r\n      this.update()\r\n    })\r\n  }\r\n\r\n  setBaseRotation (pitch: number, yaw: number) {\r\n    this.basePitch = pitch\r\n    this.baseYaw = yaw\r\n    this.update()\r\n  }\r\n\r\n  getBaseRotation () {\r\n    return { pitch: this.basePitch, yaw: this.baseYaw }\r\n  }\r\n\r\n  shakeFromDamage (yaw?: number) {\r\n    // Add roll animation\r\n    const startRoll = this.rollAngle\r\n    const targetRoll = startRoll + (yaw ?? (Math.random() < 0.5 ? -1 : 1)) * this.damageRollAmount\r\n\r\n    this.rollAnimation = {\r\n      startTime: performance.now(),\r\n      startRoll,\r\n      targetRoll,\r\n      duration: this.damageAnimDuration / 2\r\n    }\r\n  }\r\n\r\n  update () {\r\n    if (this.worldRenderer.playerStateUtils.isSpectatingEntity()) {\r\n      // Remove any shaking when spectating\r\n      this.rollAngle = 0\r\n      this.rollAnimation = undefined\r\n    }\r\n    // Update roll animation\r\n    if (this.rollAnimation) {\r\n      const now = performance.now()\r\n      const elapsed = now - this.rollAnimation.startTime\r\n      const progress = Math.min(elapsed / this.rollAnimation.duration, 1)\r\n\r\n      if (this.rollAnimation.returnToZero) {\r\n        // Ease back to zero\r\n        this.rollAngle = this.rollAnimation.startRoll * (1 - this.easeInOut(progress))\r\n        if (progress === 1) {\r\n          this.rollAnimation = undefined\r\n        }\r\n      } else {\r\n        // Initial roll\r\n        this.rollAngle = this.rollAnimation.startRoll + (this.rollAnimation.targetRoll - this.rollAnimation.startRoll) * this.easeOut(progress)\r\n        if (progress === 1) {\r\n          // Start return to zero animation\r\n          this.rollAnimation = {\r\n            startTime: now,\r\n            startRoll: this.rollAngle,\r\n            targetRoll: 0,\r\n            duration: this.damageAnimDuration / 2,\r\n            returnToZero: true\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const camera = this.worldRenderer.cameraObject\r\n\r\n    if (this.worldRenderer.cameraGroupVr) {\r\n      // For VR camera, only apply yaw rotation\r\n      const yawQuat = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 1, 0), this.baseYaw)\r\n      camera.setRotationFromQuaternion(yawQuat)\r\n    } else {\r\n      // For regular camera, apply all rotations\r\n      // Add tiny offsets to prevent z-fighting at ideal angles (90, 180, 270 degrees)\r\n      const pitchOffset = this.addAntiZfightingOffset(this.basePitch)\r\n      const yawOffset = this.addAntiZfightingOffset(this.baseYaw)\r\n\r\n      const pitchQuat = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1, 0, 0), pitchOffset)\r\n      const yawQuat = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 1, 0), yawOffset)\r\n      const rollQuat = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), THREE.MathUtils.degToRad(this.rollAngle))\r\n      // Combine rotations in the correct order: pitch -> yaw -> roll\r\n      const finalQuat = yawQuat.multiply(pitchQuat).multiply(rollQuat)\r\n      camera.setRotationFromQuaternion(finalQuat)\r\n    }\r\n  }\r\n\r\n  private easeOut (t: number): number {\r\n    return 1 - (1 - t) * (1 - t)\r\n  }\r\n\r\n  private easeInOut (t: number): number {\r\n    return t < 0.5 ? 2 * t * t : 1 - (-2 * t + 2) ** 2 / 2\r\n  }\r\n\r\n  private addAntiZfightingOffset (angle: number): number {\r\n    const offset = 0.001 // Very small offset in radians (about 0.057 degrees)\r\n\r\n    // Check if the angle is close to ideal angles (0, π/2, π, 3π/2)\r\n    const normalizedAngle = ((angle % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2)\r\n    const tolerance = 0.01 // Tolerance for considering an angle \"ideal\"\r\n\r\n    if (Math.abs(normalizedAngle) < tolerance ||\r\n      Math.abs(normalizedAngle - Math.PI / 2) < tolerance ||\r\n      Math.abs(normalizedAngle - Math.PI) < tolerance ||\r\n      Math.abs(normalizedAngle - 3 * Math.PI / 2) < tolerance) {\r\n      return angle + offset\r\n    }\r\n\r\n    return angle\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { sendVideoPlay, sendVideoStop } from '../../../src/customChannels'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\nimport { ThreeJsSound } from './threeJsSound'\r\n\r\ninterface MediaProperties {\r\n  position: { x: number, y: number, z: number }\r\n  size: { width: number, height: number }\r\n  src: string\r\n  rotation?: 0 | 1 | 2 | 3 // 0-3 for 0°, 90°, 180°, 270°\r\n  doubleSide?: boolean\r\n  background?: number // Hexadecimal color (e.g., 0x000000 for black)\r\n  opacity?: number // 0-1 value for transparency\r\n  uvMapping?: { startU: number, endU: number, startV: number, endV: number }\r\n  allowOrigins?: string[] | boolean\r\n  loop?: boolean\r\n  volume?: number\r\n  autoPlay?: boolean\r\n\r\n  allowLighting?: boolean\r\n}\r\n\r\nexport class ThreeJsMedia {\r\n  customMedia = new Map<string, {\r\n    mesh: THREE.Object3D\r\n    props: MediaProperties\r\n    video: HTMLVideoElement | undefined\r\n    texture: THREE.Texture\r\n    updateUVMapping: (config: { startU: number, endU: number, startV: number, endV: number }) => void\r\n    positionalAudio?: THREE.PositionalAudio\r\n    hadAutoPlayError?: boolean\r\n  }>()\r\n\r\n  constructor (private readonly worldRenderer: WorldRendererThree) {\r\n    this.worldRenderer.onWorldSwitched.push(() => {\r\n      this.onWorldGone()\r\n    })\r\n\r\n    this.worldRenderer.onRender.push(() => {\r\n      this.render()\r\n    })\r\n  }\r\n\r\n  onWorldGone () {\r\n    for (const [id, videoData] of this.customMedia.entries()) {\r\n      this.destroyMedia(id)\r\n    }\r\n  }\r\n\r\n  onWorldStop () {\r\n    for (const [id, videoData] of this.customMedia.entries()) {\r\n      this.setVideoPlaying(id, false)\r\n    }\r\n  }\r\n\r\n  private createErrorTexture (width: number, height: number, background = 0x00_00_00, error = 'Failed to load'): THREE.CanvasTexture {\r\n    const canvas = document.createElement('canvas')\r\n    const MAX_DIMENSION = 100\r\n\r\n    canvas.width = MAX_DIMENSION\r\n    canvas.height = MAX_DIMENSION\r\n\r\n    const ctx = canvas.getContext('2d')\r\n    if (!ctx) return new THREE.CanvasTexture(canvas)\r\n\r\n    // Clear with transparent background\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n\r\n    // Add background color\r\n    ctx.fillStyle = `rgba(${background >> 16 & 255}, ${background >> 8 & 255}, ${background & 255}, 0.5)`\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n    // Add red text with size relative to canvas dimensions\r\n    ctx.fillStyle = '#ff0000'\r\n    ctx.font = 'bold 10px sans-serif'\r\n    ctx.textAlign = 'center'\r\n    ctx.textBaseline = 'middle'\r\n    ctx.fillText(error, canvas.width / 2, canvas.height / 2, canvas.width)\r\n\r\n    const texture = new THREE.CanvasTexture(canvas)\r\n    texture.minFilter = THREE.LinearFilter\r\n    texture.magFilter = THREE.LinearFilter\r\n    return texture\r\n  }\r\n\r\n  private createBackgroundTexture (width: number, height: number, color = 0x00_00_00, opacity = 1): THREE.CanvasTexture {\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = 1\r\n    canvas.height = 1\r\n\r\n    const ctx = canvas.getContext('2d')\r\n    if (!ctx) return new THREE.CanvasTexture(canvas)\r\n\r\n    // Convert hex color to rgba\r\n    const r = (color >> 16) & 255\r\n    const g = (color >> 8) & 255\r\n    const b = color & 255\r\n\r\n    ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${opacity})`\r\n    ctx.fillRect(0, 0, 1, 1)\r\n\r\n    const texture = new THREE.CanvasTexture(canvas)\r\n    texture.minFilter = THREE.NearestFilter\r\n    texture.magFilter = THREE.NearestFilter\r\n    return texture\r\n  }\r\n\r\n  validateOrigin (src: string, allowOrigins: string[] | boolean) {\r\n    if (allowOrigins === true) return true\r\n    if (allowOrigins === false) return false\r\n    const url = new URL(src)\r\n    return allowOrigins.some(origin => url.origin.endsWith(origin))\r\n  }\r\n\r\n  onPageInteraction () {\r\n    for (const [id, videoData] of this.customMedia.entries()) {\r\n      if (videoData.hadAutoPlayError) {\r\n        videoData.hadAutoPlayError = false\r\n        void videoData.video?.play()\r\n          .catch(err => {\r\n            if (err.name === 'AbortError') return\r\n            console.error('Failed to play video:', err)\r\n            videoData.hadAutoPlayError = true\r\n            return true\r\n          })\r\n          .then((fromCatch) => {\r\n            if (fromCatch) return\r\n            if (videoData.positionalAudio) {\r\n              // workaround: audio has to be recreated\r\n              this.addMedia(id, videoData.props)\r\n            }\r\n          })\r\n      }\r\n    }\r\n  }\r\n\r\n  addMedia (id: string, props: MediaProperties) {\r\n    const originalProps = structuredClone(props)\r\n    this.destroyMedia(id)\r\n\r\n    const { scene } = this.worldRenderer\r\n\r\n    const originSecurityError = props.allowOrigins !== undefined && !this.validateOrigin(props.src, props.allowOrigins)\r\n    if (originSecurityError) {\r\n      console.warn('Remote resource blocked due to security policy', props.src, 'allowed origins:', props.allowOrigins, 'you can control it with `remoteContentNotSameOrigin` option')\r\n      props.src = ''\r\n    }\r\n\r\n    const isImage = props.src.endsWith('.png') || props.src.endsWith('.jpg') || props.src.endsWith('.jpeg')\r\n\r\n    let video: HTMLVideoElement | undefined\r\n    let positionalAudio: THREE.PositionalAudio | undefined\r\n    if (!isImage) {\r\n      video = document.createElement('video')\r\n      video.src = props.src.endsWith('.gif') ? props.src.replace('.gif', '.mp4') : props.src\r\n      video.loop = props.loop ?? true\r\n      video.volume = props.volume ?? 1\r\n      video.playsInline = true\r\n      video.crossOrigin = 'anonymous'\r\n\r\n      // Create positional audio\r\n      const soundSystem = this.worldRenderer.soundSystem as ThreeJsSound\r\n      soundSystem.initAudioListener()\r\n      if (!soundSystem.audioListener) throw new Error('Audio listener not initialized')\r\n      positionalAudio = new THREE.PositionalAudio(soundSystem.audioListener)\r\n      positionalAudio.setRefDistance(6)\r\n      positionalAudio.setVolume(props.volume ?? 1)\r\n      scene.add(positionalAudio)\r\n      positionalAudio.position.set(props.position.x, props.position.y, props.position.z)\r\n\r\n      // Connect video to positional audio\r\n      positionalAudio.setMediaElementSource(video)\r\n      positionalAudio.connect()\r\n\r\n      video.addEventListener('pause', () => {\r\n        positionalAudio?.pause()\r\n        sendVideoStop(id, 'paused', video!.currentTime)\r\n      })\r\n      video.addEventListener('play', () => {\r\n        positionalAudio?.play()\r\n        sendVideoPlay(id)\r\n      })\r\n      video.addEventListener('seeked', () => {\r\n        if (positionalAudio && video) {\r\n          positionalAudio.offset = video.currentTime\r\n        }\r\n      })\r\n      video.addEventListener('stalled', () => {\r\n        sendVideoStop(id, 'stalled', video!.currentTime)\r\n      })\r\n      video.addEventListener('waiting', () => {\r\n        sendVideoStop(id, 'waiting', video!.currentTime)\r\n      })\r\n      video.addEventListener('error', ({ error }) => {\r\n        sendVideoStop(id, `error: ${error}`, video!.currentTime)\r\n      })\r\n      video.addEventListener('ended', () => {\r\n        sendVideoStop(id, 'ended', video!.currentTime)\r\n      })\r\n    }\r\n\r\n\r\n    // Create background texture first\r\n    const backgroundTexture = this.createBackgroundTexture(\r\n      props.size.width,\r\n      props.size.height,\r\n      props.background,\r\n      // props.opacity ?? 1\r\n    )\r\n\r\n    const handleError = (text?: string) => {\r\n      const errorTexture = this.createErrorTexture(props.size.width, props.size.height, props.background, text)\r\n      material.map = errorTexture\r\n      material.needsUpdate = true\r\n    }\r\n\r\n    // Create a plane geometry with configurable UV mapping\r\n    const geometry = new THREE.PlaneGeometry(1, 1)\r\n\r\n    // Create material with initial properties using background texture\r\n    const MaterialClass = props.allowLighting ? THREE.MeshLambertMaterial : THREE.MeshBasicMaterial\r\n    const material = new MaterialClass({\r\n      map: backgroundTexture,\r\n      transparent: true,\r\n      side: props.doubleSide ? THREE.DoubleSide : THREE.FrontSide,\r\n      alphaTest: 0.1\r\n    })\r\n\r\n    const texture = video\r\n      ? new THREE.VideoTexture(video)\r\n      : new THREE.TextureLoader().load(props.src, () => {\r\n        if (this.customMedia.get(id)?.texture === texture) {\r\n          material.map = texture\r\n          material.needsUpdate = true\r\n        }\r\n      }, undefined, () => handleError()) // todo cache\r\n    texture.minFilter = THREE.NearestFilter\r\n    texture.magFilter = THREE.NearestFilter\r\n    // texture.format = THREE.RGBAFormat\r\n    // texture.colorSpace = THREE.SRGBColorSpace\r\n    texture.generateMipmaps = false\r\n\r\n    // Create inner mesh for offsets\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n\r\n    const { mesh: panel } = this.positionMeshExact(mesh, THREE.MathUtils.degToRad((props.rotation ?? 0) * 90), props.position, props.size.width, props.size.height)\r\n\r\n    scene.add(panel)\r\n\r\n    if (video) {\r\n      // Start playing the video\r\n      video.play().catch(err => {\r\n        if (err.name === 'AbortError') return\r\n        console.error('Failed to play video:', err)\r\n        videoData.hadAutoPlayError = true\r\n        handleError(err.name === 'NotAllowedError' ? 'Waiting for user interaction' : 'Failed to auto play')\r\n      })\r\n\r\n      // Update texture in animation loop\r\n      mesh.onBeforeRender = () => {\r\n        if (video.readyState === video.HAVE_ENOUGH_DATA && (!video.paused || !videoData?.hadAutoPlayError)) {\r\n          if (material.map !== texture) {\r\n            material.map = texture\r\n            material.needsUpdate = true\r\n          }\r\n          texture.needsUpdate = true\r\n\r\n          // Sync audio position with video position\r\n          if (positionalAudio) {\r\n            positionalAudio.position.copy(panel.position)\r\n            positionalAudio.rotation.copy(panel.rotation)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // UV mapping configuration\r\n    const updateUVMapping = (config: { startU: number, endU: number, startV: number, endV: number }) => {\r\n      const uvs = geometry.attributes.uv.array as Float32Array\r\n      uvs[0] = config.startU\r\n      uvs[1] = config.startV\r\n      uvs[2] = config.endU\r\n      uvs[3] = config.startV\r\n      uvs[4] = config.endU\r\n      uvs[5] = config.endV\r\n      uvs[6] = config.startU\r\n      uvs[7] = config.endV\r\n      geometry.attributes.uv.needsUpdate = true\r\n    }\r\n\r\n    // Apply initial UV mapping if provided\r\n    if (props.uvMapping) {\r\n      updateUVMapping(props.uvMapping)\r\n    }\r\n\r\n    const videoData = {\r\n      mesh: panel,\r\n      video,\r\n      texture,\r\n      updateUVMapping,\r\n      positionalAudio,\r\n      props: originalProps,\r\n      hadAutoPlayError: false\r\n    }\r\n    // Store video data\r\n    this.customMedia.set(id, videoData)\r\n\r\n    return id\r\n  }\r\n\r\n  render () {\r\n    for (const [id, videoData] of this.customMedia.entries()) {\r\n      const chunkX = Math.floor(videoData.props.position.x / 16) * 16\r\n      const chunkZ = Math.floor(videoData.props.position.z / 16) * 16\r\n      const sectionY = Math.floor(videoData.props.position.y / 16) * 16\r\n\r\n      const chunkKey = `${chunkX},${chunkZ}`\r\n      const sectionKey = `${chunkX},${sectionY},${chunkZ}`\r\n      videoData.mesh.visible = !!this.worldRenderer.sectionObjects[sectionKey] || !!this.worldRenderer.finishedChunks[chunkKey]\r\n    }\r\n  }\r\n\r\n  setVideoPlaying (id: string, playing: boolean) {\r\n    const videoData = this.customMedia.get(id)\r\n    if (videoData?.video) {\r\n      if (playing) {\r\n        videoData.video.play().catch(console.error)\r\n      } else {\r\n        videoData.video.pause()\r\n      }\r\n    }\r\n  }\r\n\r\n  setVideoSeeking (id: string, seconds: number) {\r\n    const videoData = this.customMedia.get(id)\r\n    if (videoData?.video) {\r\n      videoData.video.currentTime = seconds\r\n    }\r\n  }\r\n\r\n  setVideoVolume (id: string, volume: number) {\r\n    const videoData = this.customMedia.get(id)\r\n    if (videoData?.video) {\r\n      videoData.video.volume = volume\r\n    }\r\n  }\r\n\r\n  setVideoSpeed (id: string, speed: number) {\r\n    const videoData = this.customMedia.get(id)\r\n    if (videoData?.video) {\r\n      videoData.video.playbackRate = speed\r\n    }\r\n  }\r\n\r\n  destroyMedia (id: string) {\r\n    const { scene } = this.worldRenderer\r\n    const mediaData = this.customMedia.get(id)\r\n    if (mediaData) {\r\n      if (mediaData.video) {\r\n        mediaData.video.pause()\r\n        mediaData.video.src = ''\r\n        mediaData.video.remove()\r\n      }\r\n      if (mediaData.positionalAudio) {\r\n        // mediaData.positionalAudio.stop()\r\n        // mediaData.positionalAudio.disconnect()\r\n        scene.remove(mediaData.positionalAudio)\r\n      }\r\n      scene.remove(mediaData.mesh)\r\n      mediaData.texture.dispose()\r\n\r\n      // Get the inner mesh from the group\r\n      const mesh = mediaData.mesh.children[0] as THREE.Mesh\r\n      if (mesh) {\r\n        mesh.geometry.dispose()\r\n        if (mesh.material instanceof THREE.Material) {\r\n          mesh.material.dispose()\r\n        }\r\n      }\r\n\r\n      this.customMedia.delete(id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Positions a mesh exactly at startPosition and extends it along the rotation direction\r\n   * with the specified width and height\r\n   *\r\n   * @param mesh The mesh to position\r\n   * @param rotation Rotation in radians (applied to Y axis)\r\n   * @param startPosition The exact starting position (corner) of the mesh\r\n   * @param width Width of the mesh\r\n   * @param height Height of the mesh\r\n   * @param depth Depth of the mesh (default: 1)\r\n   * @returns The positioned mesh for chaining\r\n   */\r\n  positionMeshExact (\r\n    mesh: THREE.Mesh,\r\n    rotation: number,\r\n    startPosition: { x: number, y: number, z: number },\r\n    width: number,\r\n    height: number,\r\n    depth = 1\r\n  ) {\r\n    // avoid z-fighting with the ground plane\r\n    if (rotation === 0) {\r\n      startPosition.z += 0.001\r\n    }\r\n    if (rotation === Math.PI / 2) {\r\n      startPosition.x -= 0.001\r\n    }\r\n    if (rotation === Math.PI) {\r\n      startPosition.z -= 0.001\r\n    }\r\n    if (rotation === 3 * Math.PI / 2) {\r\n      startPosition.x += 0.001\r\n    }\r\n\r\n    // rotation normalize coordinates\r\n    if (rotation === 0) {\r\n      startPosition.z += 1\r\n    }\r\n    if (rotation === Math.PI) {\r\n      startPosition.x += 1\r\n    }\r\n    if (rotation === 3 * Math.PI / 2) {\r\n      startPosition.z += 1\r\n      startPosition.x += 1\r\n    }\r\n\r\n\r\n    // First, clean up any previous transformations\r\n    mesh.matrix.identity()\r\n    mesh.position.set(0, 0, 0)\r\n    mesh.rotation.set(0, 0, 0)\r\n    mesh.scale.set(1, 1, 1)\r\n\r\n    // By default, PlaneGeometry creates a plane in the XY plane (facing +Z)\r\n    // We need to set up the proper orientation for our use case\r\n    // Rotate the plane to face the correct direction based on the rotation parameter\r\n    mesh.rotateY(rotation)\r\n    if (rotation === Math.PI / 2 || rotation === 3 * Math.PI / 2) {\r\n      mesh.rotateZ(-Math.PI)\r\n      mesh.rotateX(-Math.PI)\r\n    }\r\n\r\n    // Scale it to the desired size\r\n    mesh.scale.set(width, height, depth)\r\n\r\n    // For a PlaneGeometry, if we want the corner at the origin, we need to offset\r\n    // by half the dimensions after scaling\r\n    mesh.geometry.translate(0.5, 0.5, 0)\r\n    mesh.geometry.attributes.position.needsUpdate = true\r\n\r\n    // Now place the mesh at the start position\r\n    mesh.position.set(startPosition.x, startPosition.y, startPosition.z)\r\n\r\n    // Create a group to hold our mesh and markers\r\n    const debugGroup = new THREE.Group()\r\n    debugGroup.add(mesh)\r\n\r\n    // Add a marker at the starting position (should be exactly at pos)\r\n    const startMarker = new THREE.Mesh(\r\n      new THREE.BoxGeometry(0.1, 0.1, 0.1),\r\n      new THREE.MeshBasicMaterial({ color: 0xff_00_00 })\r\n    )\r\n    startMarker.position.copy(new THREE.Vector3(startPosition.x, startPosition.y, startPosition.z))\r\n    debugGroup.add(startMarker)\r\n\r\n    // Add a marker at the end position (width units away in the rotated direction)\r\n    const endX = startPosition.x + Math.cos(rotation) * width\r\n    const endZ = startPosition.z + Math.sin(rotation) * width\r\n    const endYMarker = new THREE.Mesh(\r\n      new THREE.BoxGeometry(0.1, 0.1, 0.1),\r\n      new THREE.MeshBasicMaterial({ color: 0x00_00_ff })\r\n    )\r\n    endYMarker.position.set(startPosition.x, startPosition.y + height, startPosition.z)\r\n    debugGroup.add(endYMarker)\r\n\r\n    // Add a marker at the width endpoint\r\n    const endWidthMarker = new THREE.Mesh(\r\n      new THREE.BoxGeometry(0.1, 0.1, 0.1),\r\n      new THREE.MeshBasicMaterial({ color: 0xff_ff_00 })\r\n    )\r\n    endWidthMarker.position.set(endX, startPosition.y, endZ)\r\n    debugGroup.add(endWidthMarker)\r\n\r\n    // Add a marker at the corner diagonal endpoint (both width and height)\r\n    const endCornerMarker = new THREE.Mesh(\r\n      new THREE.BoxGeometry(0.1, 0.1, 0.1),\r\n      new THREE.MeshBasicMaterial({ color: 0xff_00_ff })\r\n    )\r\n    endCornerMarker.position.set(endX, startPosition.y + height, endZ)\r\n    debugGroup.add(endCornerMarker)\r\n\r\n    // Also add a visual helper to show the rotation direction\r\n    const directionHelper = new THREE.ArrowHelper(\r\n      new THREE.Vector3(Math.cos(rotation), 0, Math.sin(rotation)),\r\n      new THREE.Vector3(startPosition.x, startPosition.y, startPosition.z),\r\n      1,\r\n      0xff_00_00\r\n    )\r\n    debugGroup.add(directionHelper)\r\n\r\n    return {\r\n      mesh,\r\n      debugGroup\r\n    }\r\n  }\r\n\r\n  createTestCanvasTexture () {\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = 100\r\n    canvas.height = 100\r\n    const ctx = canvas.getContext('2d')\r\n    if (!ctx) return null\r\n    ctx.font = '10px Arial'\r\n    ctx.fillStyle = 'red'\r\n    ctx.fillText('Hello World', 0, 10) // at\r\n    return new THREE.CanvasTexture(canvas)\r\n  }\r\n\r\n  /**\r\n   * Creates a test mesh that demonstrates the exact positioning\r\n   */\r\n  addTestMeshExact (rotationNum: number) {\r\n    const pos = window.cursorBlockRel().position\r\n    console.log('Creating exact positioned test mesh at:', pos)\r\n\r\n    // Create a plane mesh with a wireframe to visualize boundaries\r\n    const plane = new THREE.Mesh(\r\n      new THREE.PlaneGeometry(1, 1),\r\n      new THREE.MeshBasicMaterial({\r\n        // side: THREE.DoubleSide,\r\n        map: this.createTestCanvasTexture()\r\n      })\r\n    )\r\n\r\n    const width = 2\r\n    const height = 1\r\n    const rotation = THREE.MathUtils.degToRad(rotationNum * 90) // 90 degrees in radians\r\n\r\n    // Position the mesh exactly where we want it\r\n    const { debugGroup } = this.positionMeshExact(plane, rotation, pos, width, height)\r\n\r\n    this.worldRenderer.scene.add(debugGroup)\r\n    console.log('Exact test mesh added with dimensions:', width, height, 'and rotation:', rotation)\r\n  }\r\n\r\n  lastCheck = 0\r\n  THROTTLE_TIME = 100\r\n  tryIntersectMedia () {\r\n    // hack: need to optimize this by pulling only in distance of interaction instead and throttle\r\n    if (this.customMedia.size === 0) return\r\n    if (Date.now() - this.lastCheck < this.THROTTLE_TIME) return\r\n    this.lastCheck = Date.now()\r\n\r\n    const { camera, scene } = this.worldRenderer\r\n    const raycaster = new THREE.Raycaster()\r\n\r\n    // Get mouse position at center of screen\r\n    const mouse = new THREE.Vector2(0, 0)\r\n\r\n    // Update the raycaster\r\n    raycaster.setFromCamera(mouse, camera)\r\n\r\n    // Check intersection with all objects in scene\r\n    const intersects = raycaster.intersectObjects(scene.children, true)\r\n    if (intersects.length > 0) {\r\n      const intersection = intersects[0]\r\n      const intersectedObject = intersection.object\r\n\r\n      // Find if this object belongs to any media\r\n      for (const [id, videoData] of this.customMedia.entries()) {\r\n        // Check if the intersected object is part of our media mesh\r\n        if (intersectedObject === videoData.mesh ||\r\n          videoData.mesh.children.includes(intersectedObject)) {\r\n          const { uv } = intersection\r\n          if (uv) {\r\n            const result = {\r\n              id,\r\n              x: uv.x,\r\n              y: uv.y\r\n            }\r\n            this.worldRenderer.reactiveState.world.intersectMedia = result\r\n            this.worldRenderer['debugVideo'] = videoData\r\n            this.worldRenderer.cursorBlock.cursorLinesHidden = true\r\n            return\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // No media intersection found\r\n    this.worldRenderer.reactiveState.world.intersectMedia = null\r\n    this.worldRenderer['debugVideo'] = null\r\n    this.worldRenderer.cursorBlock.cursorLinesHidden = false\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\n// Centralized visual configuration (in screen pixels)\r\nexport const WAYPOINT_CONFIG = {\r\n  // Target size in screen pixels (this controls the final sprite size)\r\n  TARGET_SCREEN_PX: 150,\r\n  // Canvas size for internal rendering (keep power of 2 for textures)\r\n  CANVAS_SIZE: 256,\r\n  // Relative positions in canvas (0-1)\r\n  LAYOUT: {\r\n    DOT_Y: 0.3,\r\n    NAME_Y: 0.45,\r\n    DISTANCE_Y: 0.55,\r\n  },\r\n  // Multiplier for canvas internal resolution to keep text crisp\r\n  CANVAS_SCALE: 2,\r\n  ARROW: {\r\n    enabledDefault: false,\r\n    pixelSize: 50,\r\n    paddingPx: 50,\r\n  },\r\n}\r\n\r\nexport type WaypointSprite = {\r\n  group: THREE.Group\r\n  sprite: THREE.Sprite\r\n  // Offscreen arrow controls\r\n  enableOffscreenArrow: (enabled: boolean) => void\r\n  setArrowParent: (parent: THREE.Object3D | null) => void\r\n  // Convenience combined updater\r\n  updateForCamera: (\r\n    cameraPosition: THREE.Vector3,\r\n    camera: THREE.PerspectiveCamera,\r\n    viewportWidthPx: number,\r\n    viewportHeightPx: number\r\n  ) => boolean\r\n  // Utilities\r\n  setColor: (color: number) => void\r\n  setLabel: (label?: string) => void\r\n  updateDistanceText: (label: string, distanceText: string) => void\r\n  setVisible: (visible: boolean) => void\r\n  setPosition: (x: number, y: number, z: number) => void\r\n  dispose: () => void\r\n}\r\n\r\nexport function createWaypointSprite (options: {\r\n  position: THREE.Vector3 | { x: number, y: number, z: number },\r\n  color?: number,\r\n  label?: string,\r\n  depthTest?: boolean,\r\n  // Y offset in world units used by updateScaleWorld only (screen-pixel API ignores this)\r\n  labelYOffset?: number,\r\n  metadata?: any,\r\n}): WaypointSprite {\r\n  const color = options.color ?? 0xFF_00_00\r\n  const depthTest = options.depthTest ?? false\r\n  const labelYOffset = options.labelYOffset ?? 1.5\r\n\r\n  // Build combined sprite\r\n  const sprite = createCombinedSprite(color, options.label ?? '', '0m', depthTest)\r\n  sprite.renderOrder = 10\r\n  let currentLabel = options.label ?? ''\r\n\r\n  // Performance optimization: cache distance text to avoid unnecessary updates\r\n  let lastDistanceText = '0m'\r\n  let lastDistance = 0\r\n\r\n  // Offscreen arrow (detached by default)\r\n  let arrowSprite: THREE.Sprite | undefined\r\n  let arrowParent: THREE.Object3D | null = null\r\n  let arrowEnabled = WAYPOINT_CONFIG.ARROW.enabledDefault\r\n\r\n  // Group for easy add/remove\r\n  const group = new THREE.Group()\r\n  group.add(sprite)\r\n\r\n  // Initial position\r\n  const { x, y, z } = options.position\r\n  group.position.set(x, y, z)\r\n\r\n  function setColor (newColor: number) {\r\n    const canvas = drawCombinedCanvas(newColor, currentLabel, '0m')\r\n    const texture = new THREE.CanvasTexture(canvas)\r\n    const mat = sprite.material\r\n    mat.map?.dispose()\r\n    mat.map = texture\r\n    mat.needsUpdate = true\r\n  }\r\n\r\n  function setLabel (newLabel?: string) {\r\n    currentLabel = newLabel ?? ''\r\n    const canvas = drawCombinedCanvas(color, currentLabel, '0m')\r\n    const texture = new THREE.CanvasTexture(canvas)\r\n    const mat = sprite.material\r\n    mat.map?.dispose()\r\n    mat.map = texture\r\n    mat.needsUpdate = true\r\n  }\r\n\r\n  function updateDistanceText (label: string, distanceText: string) {\r\n    // Performance optimization: only update if distance text actually changed\r\n    if (distanceText === lastDistanceText) {\r\n      return\r\n    }\r\n    lastDistanceText = distanceText\r\n\r\n    const canvas = drawCombinedCanvas(color, label, distanceText)\r\n    const texture = new THREE.CanvasTexture(canvas)\r\n    const mat = sprite.material\r\n    mat.map?.dispose()\r\n    mat.map = texture\r\n    mat.needsUpdate = true\r\n  }\r\n\r\n  function setVisible (visible: boolean) {\r\n    sprite.visible = visible\r\n  }\r\n\r\n  function setPosition (nx: number, ny: number, nz: number) {\r\n    group.position.set(nx, ny, nz)\r\n  }\r\n\r\n  // Keep constant pixel size on screen using global config\r\n  function updateScaleScreenPixels (\r\n    cameraPosition: THREE.Vector3,\r\n    cameraFov: number,\r\n    distance: number,\r\n    viewportHeightPx: number\r\n  ) {\r\n    const vFovRad = cameraFov * Math.PI / 180\r\n    const worldUnitsPerScreenHeightAtDist = Math.tan(vFovRad / 2) * 2 * distance\r\n    // Use configured target screen size\r\n    const scale = worldUnitsPerScreenHeightAtDist * (WAYPOINT_CONFIG.TARGET_SCREEN_PX / viewportHeightPx)\r\n    sprite.scale.set(scale, scale, 1)\r\n  }\r\n\r\n  function ensureArrow () {\r\n    if (arrowSprite) return\r\n    const size = 128\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = size\r\n    canvas.height = size\r\n    const ctx = canvas.getContext('2d')!\r\n    ctx.clearRect(0, 0, size, size)\r\n\r\n    // Draw arrow shape\r\n    ctx.beginPath()\r\n    ctx.moveTo(size * 0.15, size * 0.5)\r\n    ctx.lineTo(size * 0.85, size * 0.5)\r\n    ctx.lineTo(size * 0.5, size * 0.15)\r\n    ctx.closePath()\r\n\r\n    // Use waypoint color for arrow\r\n    const colorHex = `#${color.toString(16).padStart(6, '0')}`\r\n    ctx.lineWidth = 6\r\n    ctx.strokeStyle = 'black'\r\n    ctx.stroke()\r\n    ctx.fillStyle = colorHex\r\n    ctx.fill()\r\n\r\n    const texture = new THREE.CanvasTexture(canvas)\r\n    const material = new THREE.SpriteMaterial({ map: texture, transparent: true, depthTest: false, depthWrite: false })\r\n    arrowSprite = new THREE.Sprite(material)\r\n    arrowSprite.renderOrder = 12\r\n    arrowSprite.visible = false\r\n    if (arrowParent) arrowParent.add(arrowSprite)\r\n  }\r\n\r\n  function enableOffscreenArrow (enabled: boolean) {\r\n    arrowEnabled = enabled\r\n    if (!enabled && arrowSprite) arrowSprite.visible = false\r\n  }\r\n\r\n  function setArrowParent (parent: THREE.Object3D | null) {\r\n    if (arrowSprite?.parent) arrowSprite.parent.remove(arrowSprite)\r\n    arrowParent = parent\r\n    if (arrowSprite && parent) parent.add(arrowSprite)\r\n  }\r\n\r\n  function updateOffscreenArrow (\r\n    camera: THREE.PerspectiveCamera,\r\n    viewportWidthPx: number,\r\n    viewportHeightPx: number\r\n  ): boolean {\r\n    if (!arrowEnabled) return true\r\n    ensureArrow()\r\n    if (!arrowSprite) return true\r\n\r\n    // Check if onlyLeftRight is enabled in metadata\r\n    const onlyLeftRight = options.metadata?.onlyLeftRight === true\r\n\r\n    // Build camera basis using camera.up to respect custom orientations\r\n    const forward = new THREE.Vector3()\r\n    camera.getWorldDirection(forward) // camera look direction\r\n    const upWorld = camera.up.clone().normalize()\r\n    const right = new THREE.Vector3().copy(forward).cross(upWorld).normalize()\r\n    const upCam = new THREE.Vector3().copy(right).cross(forward).normalize()\r\n\r\n    // Vector from camera to waypoint\r\n    const camPos = new THREE.Vector3().setFromMatrixPosition(camera.matrixWorld)\r\n    const toWp = new THREE.Vector3(group.position.x, group.position.y, group.position.z).sub(camPos)\r\n\r\n    // Components in camera basis\r\n    const z = toWp.dot(forward)\r\n    const x = toWp.dot(right)\r\n    const y = toWp.dot(upCam)\r\n\r\n    const aspect = viewportWidthPx / viewportHeightPx\r\n    const vFovRad = camera.fov * Math.PI / 180\r\n    const hFovRad = 2 * Math.atan(Math.tan(vFovRad / 2) * aspect)\r\n\r\n    // Determine if waypoint is inside view frustum using angular checks\r\n    const thetaX = Math.atan2(x, z)\r\n    const thetaY = Math.atan2(y, z)\r\n    const visible = z > 0 && Math.abs(thetaX) <= hFovRad / 2 && Math.abs(thetaY) <= vFovRad / 2\r\n    if (visible) {\r\n      arrowSprite.visible = false\r\n      return true\r\n    }\r\n\r\n    // Direction on screen in normalized frustum units\r\n    let rx = thetaX / (hFovRad / 2)\r\n    let ry = thetaY / (vFovRad / 2)\r\n\r\n    // If behind the camera, snap to dominant axis to avoid confusing directions\r\n    if (z <= 0) {\r\n      if (Math.abs(rx) > Math.abs(ry)) {\r\n        rx = Math.sign(rx)\r\n        ry = 0\r\n      } else {\r\n        rx = 0\r\n        ry = Math.sign(ry)\r\n      }\r\n    }\r\n\r\n    // Apply onlyLeftRight logic - restrict arrows to left/right edges only\r\n    if (onlyLeftRight) {\r\n      // Force the arrow to appear only on left or right edges\r\n      if (Math.abs(rx) > Math.abs(ry)) {\r\n        // Horizontal direction is dominant, keep it\r\n        ry = 0\r\n      } else {\r\n        // Vertical direction is dominant, but we want only left/right\r\n        // So choose left or right based on the sign of rx\r\n        rx = rx >= 0 ? 1 : -1\r\n        ry = 0\r\n      }\r\n    }\r\n\r\n    // Place on the rectangle border [-1,1]x[-1,1]\r\n    const s = Math.max(Math.abs(rx), Math.abs(ry)) || 1\r\n    let ndcX = rx / s\r\n    let ndcY = ry / s\r\n\r\n    // Apply padding in pixel space by clamping\r\n    const padding = WAYPOINT_CONFIG.ARROW.paddingPx\r\n    const pxX = ((ndcX + 1) * 0.5) * viewportWidthPx\r\n    const pxY = ((1 - ndcY) * 0.5) * viewportHeightPx\r\n    const clampedPxX = Math.min(Math.max(pxX, padding), viewportWidthPx - padding)\r\n    const clampedPxY = Math.min(Math.max(pxY, padding), viewportHeightPx - padding)\r\n    ndcX = (clampedPxX / viewportWidthPx) * 2 - 1\r\n    ndcY = -(clampedPxY / viewportHeightPx) * 2 + 1\r\n\r\n    // Compute world position at a fixed distance in front of the camera using camera basis\r\n    const placeDist = Math.max(2, camera.near * 4)\r\n    const halfPlaneHeight = Math.tan(vFovRad / 2) * placeDist\r\n    const halfPlaneWidth = halfPlaneHeight * aspect\r\n    const pos = camPos.clone()\r\n      .add(forward.clone().multiplyScalar(placeDist))\r\n      .add(right.clone().multiplyScalar(ndcX * halfPlaneWidth))\r\n      .add(upCam.clone().multiplyScalar(ndcY * halfPlaneHeight))\r\n\r\n    // Update arrow sprite\r\n    arrowSprite.visible = true\r\n    arrowSprite.position.copy(pos)\r\n\r\n    // Angle for rotation relative to screen right/up (derived from camera up vector)\r\n    const angle = Math.atan2(ry, rx)\r\n    arrowSprite.material.rotation = angle - Math.PI / 2\r\n\r\n    // Constant pixel size for arrow (use fixed placement distance)\r\n    const worldUnitsPerScreenHeightAtDist = Math.tan(vFovRad / 2) * 2 * placeDist\r\n    const sPx = worldUnitsPerScreenHeightAtDist * (WAYPOINT_CONFIG.ARROW.pixelSize / viewportHeightPx)\r\n    arrowSprite.scale.set(sPx, sPx, 1)\r\n    return false\r\n  }\r\n\r\n  function computeDistance (cameraPosition: THREE.Vector3): number {\r\n    return cameraPosition.distanceTo(group.position)\r\n  }\r\n\r\n  function updateForCamera (\r\n    cameraPosition: THREE.Vector3,\r\n    camera: THREE.PerspectiveCamera,\r\n    viewportWidthPx: number,\r\n    viewportHeightPx: number\r\n  ): boolean {\r\n    const distance = computeDistance(cameraPosition)\r\n    // Keep constant pixel size\r\n    updateScaleScreenPixels(cameraPosition, camera.fov, distance, viewportHeightPx)\r\n\r\n    // Performance optimization: only update distance text if distance changed significantly\r\n    const roundedDistance = Math.round(distance)\r\n    if (Math.abs(roundedDistance - lastDistance) >= 1) {\r\n      lastDistance = roundedDistance\r\n      updateDistanceText(currentLabel, `${roundedDistance}m`)\r\n    }\r\n\r\n    // Update arrow and visibility\r\n    const onScreen = updateOffscreenArrow(camera, viewportWidthPx, viewportHeightPx)\r\n    setVisible(onScreen)\r\n    return onScreen\r\n  }\r\n\r\n  function dispose () {\r\n    const mat = sprite.material\r\n    mat.map?.dispose()\r\n    mat.dispose()\r\n    if (arrowSprite) {\r\n      // Remove arrow from parent before disposing\r\n      if (arrowSprite.parent) {\r\n        arrowSprite.parent.remove(arrowSprite)\r\n      }\r\n      const am = arrowSprite.material\r\n      am.map?.dispose()\r\n      am.dispose()\r\n    }\r\n  }\r\n\r\n  return {\r\n    group,\r\n    sprite,\r\n    enableOffscreenArrow,\r\n    setArrowParent,\r\n    updateForCamera,\r\n    setColor,\r\n    setLabel,\r\n    updateDistanceText,\r\n    setVisible,\r\n    setPosition,\r\n    dispose,\r\n  }\r\n}\r\n\r\n// Internal helpers\r\nfunction drawCombinedCanvas (color: number, id: string, distance: string): HTMLCanvasElement {\r\n  const scale = WAYPOINT_CONFIG.CANVAS_SCALE * (globalThis.devicePixelRatio || 1)\r\n  const size = WAYPOINT_CONFIG.CANVAS_SIZE * scale\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = size\r\n  canvas.height = size\r\n  const ctx = canvas.getContext('2d')!\r\n\r\n  // Clear canvas\r\n  ctx.clearRect(0, 0, size, size)\r\n\r\n  // Draw dot\r\n  const centerX = size / 2\r\n  const dotY = Math.round(size * WAYPOINT_CONFIG.LAYOUT.DOT_Y)\r\n  const radius = Math.round(size * 0.05) // Dot takes up ~12% of canvas height\r\n  const borderWidth = Math.max(2, Math.round(4 * scale))\r\n\r\n  // Outer border (black)\r\n  ctx.beginPath()\r\n  ctx.arc(centerX, dotY, radius + borderWidth, 0, Math.PI * 2)\r\n  ctx.fillStyle = 'black'\r\n  ctx.fill()\r\n\r\n  // Inner circle (colored)\r\n  ctx.beginPath()\r\n  ctx.arc(centerX, dotY, radius, 0, Math.PI * 2)\r\n  ctx.fillStyle = `#${color.toString(16).padStart(6, '0')}`\r\n  ctx.fill()\r\n\r\n  // Text properties\r\n  ctx.textAlign = 'center'\r\n  ctx.textBaseline = 'middle'\r\n\r\n  // Title\r\n  const nameFontPx = Math.round(size * 0.08) // ~8% of canvas height\r\n  const distanceFontPx = Math.round(size * 0.06) // ~6% of canvas height\r\n  ctx.font = `bold ${nameFontPx}px mojangles`\r\n  ctx.lineWidth = Math.max(2, Math.round(3 * scale))\r\n  const nameY = Math.round(size * WAYPOINT_CONFIG.LAYOUT.NAME_Y)\r\n\r\n  ctx.strokeStyle = 'black'\r\n  ctx.strokeText(id, centerX, nameY)\r\n  ctx.fillStyle = 'white'\r\n  ctx.fillText(id, centerX, nameY)\r\n\r\n  // Distance\r\n  ctx.font = `bold ${distanceFontPx}px mojangles`\r\n  ctx.lineWidth = Math.max(2, Math.round(2 * scale))\r\n  const distanceY = Math.round(size * WAYPOINT_CONFIG.LAYOUT.DISTANCE_Y)\r\n\r\n  ctx.strokeStyle = 'black'\r\n  ctx.strokeText(distance, centerX, distanceY)\r\n  ctx.fillStyle = '#CCCCCC'\r\n  ctx.fillText(distance, centerX, distanceY)\r\n\r\n  return canvas\r\n}\r\n\r\nfunction createCombinedSprite (color: number, id: string, distance: string, depthTest: boolean): THREE.Sprite {\r\n  const canvas = drawCombinedCanvas(color, id, distance)\r\n  const texture = new THREE.CanvasTexture(canvas)\r\n  texture.anisotropy = 1\r\n  texture.magFilter = THREE.LinearFilter\r\n  texture.minFilter = THREE.LinearFilter\r\n  const material = new THREE.SpriteMaterial({\r\n    map: texture,\r\n    transparent: true,\r\n    opacity: 1,\r\n    depthTest,\r\n    depthWrite: false,\r\n  })\r\n  const sprite = new THREE.Sprite(material)\r\n  sprite.position.set(0, 0, 0)\r\n  return sprite\r\n}\r\n\r\nexport const WaypointHelpers = {\r\n  // World-scale constant size helper\r\n  computeWorldScale (distance: number, fixedReference = 10) {\r\n    return Math.max(0.0001, distance / fixedReference)\r\n  },\r\n  // Screen-pixel constant size helper\r\n  computeScreenPixelScale (\r\n    camera: THREE.PerspectiveCamera,\r\n    distance: number,\r\n    pixelSize: number,\r\n    viewportHeightPx: number\r\n  ) {\r\n    const vFovRad = camera.fov * Math.PI / 180\r\n    const worldUnitsPerScreenHeightAtDist = Math.tan(vFovRad / 2) * 2 * distance\r\n    return worldUnitsPerScreenHeightAtDist * (pixelSize / viewportHeightPx)\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\nimport { createWaypointSprite, type WaypointSprite } from './waypointSprite'\r\n\r\ninterface Waypoint {\r\n  id: string\r\n  x: number\r\n  y: number\r\n  z: number\r\n  minDistance: number\r\n  color: number\r\n  label?: string\r\n  sprite: WaypointSprite\r\n}\r\n\r\ninterface WaypointOptions {\r\n  color?: number\r\n  label?: string\r\n  minDistance?: number\r\n  metadata?: any\r\n}\r\n\r\nexport class WaypointsRenderer {\r\n  private readonly waypoints = new Map<string, Waypoint>()\r\n  private readonly waypointScene = new THREE.Scene()\r\n\r\n  // Performance optimization: cache camera position to reduce update frequency\r\n  private readonly lastCameraPosition = new THREE.Vector3()\r\n  private lastUpdateTime = 0\r\n  private readonly UPDATE_THROTTLE_MS = 16 // ~60fps max update rate\r\n\r\n  constructor (\r\n    private readonly worldRenderer: WorldRendererThree\r\n  ) {\r\n  }\r\n\r\n  private updateWaypoints () {\r\n    const currentTime = performance.now()\r\n    const playerPos = this.worldRenderer.cameraObject.position\r\n\r\n    // Performance optimization: throttle updates and check for significant camera movement\r\n    const cameraMovedSignificantly = this.lastCameraPosition.distanceTo(playerPos) > 0.5\r\n    const timeToUpdate = currentTime - this.lastUpdateTime > this.UPDATE_THROTTLE_MS\r\n\r\n    if (!cameraMovedSignificantly && !timeToUpdate) {\r\n      return // Skip update if camera hasn't moved much and not enough time passed\r\n    }\r\n\r\n    this.lastCameraPosition.copy(playerPos)\r\n    this.lastUpdateTime = currentTime\r\n\r\n    const sizeVec = this.worldRenderer.renderer.getSize(new THREE.Vector2())\r\n\r\n    for (const waypoint of this.waypoints.values()) {\r\n      const waypointPos = new THREE.Vector3(waypoint.x, waypoint.y, waypoint.z)\r\n      const distance = playerPos.distanceTo(waypointPos)\r\n      const visible = !waypoint.minDistance || distance >= waypoint.minDistance\r\n\r\n      waypoint.sprite.setVisible(visible)\r\n\r\n      if (visible) {\r\n        // Update position\r\n        waypoint.sprite.setPosition(waypoint.x, waypoint.y, waypoint.z)\r\n        // Ensure camera-based update each frame\r\n        waypoint.sprite.updateForCamera(this.worldRenderer.getCameraPosition(), this.worldRenderer.camera, sizeVec.width, sizeVec.height)\r\n      }\r\n    }\r\n  }\r\n\r\n  render () {\r\n    if (this.waypoints.size === 0) return\r\n\r\n    // Update waypoint scaling\r\n    this.updateWaypoints()\r\n\r\n    // Render waypoints scene with the world camera\r\n    this.worldRenderer.renderer.render(this.waypointScene, this.worldRenderer.camera)\r\n  }\r\n\r\n  // Removed sprite/label texture creation. Use utils/waypointSprite.ts\r\n\r\n  addWaypoint (\r\n    id: string,\r\n    x: number,\r\n    y: number,\r\n    z: number,\r\n    options: WaypointOptions = {}\r\n  ) {\r\n    // Remove existing waypoint if it exists\r\n    this.removeWaypoint(id)\r\n\r\n    const color = options.color ?? 0xFF_00_00\r\n    const { label, metadata } = options\r\n    const minDistance = options.minDistance ?? 0\r\n\r\n    const sprite = createWaypointSprite({\r\n      position: new THREE.Vector3(x, y, z),\r\n      color,\r\n      label: (label || id),\r\n      metadata,\r\n    })\r\n    sprite.enableOffscreenArrow(true)\r\n    sprite.setArrowParent(this.waypointScene)\r\n\r\n    this.waypointScene.add(sprite.group)\r\n\r\n    this.waypoints.set(id, {\r\n      id, x: x + 0.5, y: y + 0.5, z: z + 0.5, minDistance,\r\n      color, label,\r\n      sprite,\r\n    })\r\n  }\r\n\r\n  removeWaypoint (id: string) {\r\n    const waypoint = this.waypoints.get(id)\r\n    if (waypoint) {\r\n      this.waypointScene.remove(waypoint.sprite.group)\r\n      waypoint.sprite.dispose()\r\n      this.waypoints.delete(id)\r\n    }\r\n  }\r\n\r\n  clear () {\r\n    for (const id of this.waypoints.keys()) {\r\n      this.removeWaypoint(id)\r\n    }\r\n  }\r\n\r\n  testWaypoint () {\r\n    this.addWaypoint('Test Point', 0, 70, 0, { color: 0x00_FF_00, label: 'Test Point' })\r\n    this.addWaypoint('Spawn', 0, 64, 0, { color: 0xFF_FF_00, label: 'Spawn' })\r\n    this.addWaypoint('Far Point', 100, 70, 100, { color: 0x00_00_FF, label: 'Far Point' })\r\n    this.addWaypoint('Far Point 2', 180, 170, 100, { color: 0x00_00_FF, label: 'Far Point 2' })\r\n    this.addWaypoint('Far Point 3', 1000, 100, 1000, { color: 0x00_00_FF, label: 'Far Point 3' })\r\n  }\r\n\r\n  getWaypoint (id: string): Waypoint | undefined {\r\n    return this.waypoints.get(id)\r\n  }\r\n\r\n  getAllWaypoints (): Waypoint[] {\r\n    return [...this.waypoints.values()]\r\n  }\r\n\r\n  setWaypointColor (id: string, color: number) {\r\n    const waypoint = this.waypoints.get(id)\r\n    if (waypoint) {\r\n      waypoint.sprite.setColor(color)\r\n      waypoint.color = color\r\n    }\r\n  }\r\n\r\n  setWaypointLabel (id: string, label?: string) {\r\n    const waypoint = this.waypoints.get(id)\r\n    if (waypoint) {\r\n      waypoint.label = label\r\n      waypoint.sprite.setLabel(label)\r\n    }\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { DebugGui } from '../lib/DebugGui'\r\n\r\nexport const DEFAULT_TEMPERATURE = 0.75\r\n\r\nexport class SkyboxRenderer {\r\n  private texture: THREE.Texture | null = null\r\n  private mesh: THREE.Mesh<THREE.SphereGeometry, THREE.MeshBasicMaterial> | null = null\r\n  private skyMesh: THREE.Mesh | null = null\r\n  private voidMesh: THREE.Mesh | null = null\r\n\r\n  // World state\r\n  private worldTime = 0\r\n  private partialTicks = 0\r\n  private viewDistance = 4\r\n  private temperature = DEFAULT_TEMPERATURE\r\n  private inWater = false\r\n  private waterBreathing = false\r\n  private fogBrightness = 0\r\n  private prevFogBrightness = 0\r\n  private readonly fogOrangeness = 0 // Debug property to control sky color orangeness\r\n  private readonly distanceFactor = 2.7\r\n\r\n  private readonly brightnessAtPosition = 1\r\n  debugGui: DebugGui\r\n\r\n  constructor (private readonly scene: THREE.Scene, public defaultSkybox: boolean, public initialImage: string | null) {\r\n    this.debugGui = new DebugGui('skybox_renderer', this, [\r\n      'temperature',\r\n      'worldTime',\r\n      'inWater',\r\n      'waterBreathing',\r\n      'fogOrangeness',\r\n      'brightnessAtPosition',\r\n      'distanceFactor'\r\n    ], {\r\n      brightnessAtPosition: { min: 0, max: 1, step: 0.01 },\r\n      temperature: { min: 0, max: 1, step: 0.01 },\r\n      worldTime: { min: 0, max: 24_000, step: 1 },\r\n      fogOrangeness: { min: -1, max: 1, step: 0.01 },\r\n      distanceFactor: { min: 0, max: 5, step: 0.01 },\r\n    })\r\n\r\n    if (!initialImage) {\r\n      this.createGradientSky()\r\n    }\r\n    // this.debugGui.activate()\r\n  }\r\n\r\n  async init () {\r\n    if (this.initialImage) {\r\n      await this.setSkyboxImage(this.initialImage)\r\n    }\r\n  }\r\n\r\n  async setSkyboxImage (imageUrl: string) {\r\n    // Dispose old textures if they exist\r\n    if (this.texture) {\r\n      this.texture.dispose()\r\n    }\r\n\r\n    // Load the equirectangular texture\r\n    const textureLoader = new THREE.TextureLoader()\r\n    this.texture = await new Promise((resolve) => {\r\n      textureLoader.load(\r\n        imageUrl,\r\n        (texture) => {\r\n          texture.mapping = THREE.EquirectangularReflectionMapping\r\n          texture.encoding = THREE.sRGBEncoding\r\n          // Keep pixelated look\r\n          texture.minFilter = THREE.NearestFilter\r\n          texture.magFilter = THREE.NearestFilter\r\n          texture.needsUpdate = true\r\n          resolve(texture)\r\n        }\r\n      )\r\n    })\r\n\r\n    // Create or update the skybox\r\n    if (this.mesh) {\r\n      // Just update the texture on the existing material\r\n      this.mesh.material.map = this.texture\r\n      this.mesh.material.needsUpdate = true\r\n    } else {\r\n      // Create a large sphere geometry for the skybox\r\n      const geometry = new THREE.SphereGeometry(500, 60, 40)\r\n      // Flip the geometry inside out\r\n      geometry.scale(-1, 1, 1)\r\n\r\n      // Create material using the loaded texture\r\n      const material = new THREE.MeshBasicMaterial({\r\n        map: this.texture,\r\n        side: THREE.FrontSide // Changed to FrontSide since we're flipping the geometry\r\n      })\r\n\r\n      // Create and add the skybox mesh\r\n      this.mesh = new THREE.Mesh(geometry, material)\r\n      this.scene.add(this.mesh)\r\n    }\r\n  }\r\n\r\n  update (cameraPosition: THREE.Vector3, newViewDistance: number) {\r\n    if (newViewDistance !== this.viewDistance) {\r\n      this.viewDistance = newViewDistance\r\n      this.updateSkyColors()\r\n    }\r\n\r\n    if (this.mesh) {\r\n      // Update skybox position\r\n      this.mesh.position.copy(cameraPosition)\r\n    } else if (this.skyMesh) {\r\n      // Update gradient sky position\r\n      this.skyMesh.position.copy(cameraPosition)\r\n      this.voidMesh?.position.copy(cameraPosition)\r\n      this.updateSkyColors() // Update colors based on time of day\r\n    }\r\n  }\r\n\r\n  // Update world time\r\n  updateTime (timeOfDay: number, partialTicks = 0) {\r\n    if (this.debugGui.visible) return\r\n    this.worldTime = timeOfDay\r\n    this.partialTicks = partialTicks\r\n    this.updateSkyColors()\r\n  }\r\n\r\n  // Update view distance\r\n  updateViewDistance (viewDistance: number) {\r\n    this.viewDistance = viewDistance\r\n    this.updateSkyColors()\r\n  }\r\n\r\n  // Update temperature (for biome support)\r\n  updateTemperature (temperature: number) {\r\n    if (this.debugGui.visible) return\r\n    this.temperature = temperature\r\n    this.updateSkyColors()\r\n  }\r\n\r\n  // Update water state\r\n  updateWaterState (inWater: boolean, waterBreathing: boolean) {\r\n    if (this.debugGui.visible) return\r\n    this.inWater = inWater\r\n    this.waterBreathing = waterBreathing\r\n    this.updateSkyColors()\r\n  }\r\n\r\n  // Update default skybox setting\r\n  updateDefaultSkybox (defaultSkybox: boolean) {\r\n    if (this.debugGui.visible) return\r\n    this.defaultSkybox = defaultSkybox\r\n    this.updateSkyColors()\r\n  }\r\n\r\n  private createGradientSky () {\r\n    const size = 64\r\n    const scale = 256 / size + 2\r\n\r\n    {\r\n      const geometry = new THREE.PlaneGeometry(size * scale * 2, size * scale * 2)\r\n      geometry.rotateX(-Math.PI / 2)\r\n      geometry.translate(0, 16, 0)\r\n\r\n      const material = new THREE.MeshBasicMaterial({\r\n        color: 0xff_ff_ff,\r\n        side: THREE.DoubleSide,\r\n        depthTest: false\r\n      })\r\n\r\n      this.skyMesh = new THREE.Mesh(geometry, material)\r\n      this.scene.add(this.skyMesh)\r\n    }\r\n\r\n    {\r\n      const geometry = new THREE.PlaneGeometry(size * scale * 2, size * scale * 2)\r\n      geometry.rotateX(-Math.PI / 2)\r\n      geometry.translate(0, -16, 0)\r\n\r\n      const material = new THREE.MeshBasicMaterial({\r\n        color: 0xff_ff_ff,\r\n        side: THREE.DoubleSide,\r\n        depthTest: false\r\n      })\r\n\r\n      this.voidMesh = new THREE.Mesh(geometry, material)\r\n      this.scene.add(this.voidMesh)\r\n    }\r\n\r\n    this.updateSkyColors()\r\n  }\r\n\r\n  private getFogColor (partialTicks = 0): THREE.Vector3 {\r\n    const angle = this.getCelestialAngle(partialTicks)\r\n    let rotation = Math.cos(angle * Math.PI * 2) * 2 + 0.5\r\n    rotation = Math.max(0, Math.min(1, rotation))\r\n\r\n    let x = 0.752_941_2\r\n    let y = 0.847_058_83\r\n    let z = 1\r\n\r\n    x *= (rotation * 0.94 + 0.06)\r\n    y *= (rotation * 0.94 + 0.06)\r\n    z *= (rotation * 0.91 + 0.09)\r\n\r\n    return new THREE.Vector3(x, y, z)\r\n  }\r\n\r\n  private getSkyColor (x = 0, z = 0, partialTicks = 0): THREE.Vector3 {\r\n    const angle = this.getCelestialAngle(partialTicks)\r\n    let brightness = Math.cos(angle * 3.141_593 * 2) * 2 + 0.5\r\n\r\n    if (brightness < 0) brightness = 0\r\n    if (brightness > 1) brightness = 1\r\n\r\n    const temperature = this.getTemperature(x, z)\r\n    const rgb = this.getSkyColorByTemp(temperature)\r\n\r\n    const red = ((rgb >> 16) & 0xff) / 255\r\n    const green = ((rgb >> 8) & 0xff) / 255\r\n    const blue = (rgb & 0xff) / 255\r\n\r\n    return new THREE.Vector3(\r\n      red * brightness,\r\n      green * brightness,\r\n      blue * brightness\r\n    )\r\n  }\r\n\r\n  private calculateCelestialAngle (time: number, partialTicks: number): number {\r\n    const modTime = (time % 24_000)\r\n    let angle = (modTime + partialTicks) / 24_000 - 0.25\r\n\r\n    if (angle < 0) {\r\n      angle++\r\n    }\r\n    if (angle > 1) {\r\n      angle--\r\n    }\r\n\r\n    angle = 1 - ((Math.cos(angle * Math.PI) + 1) / 2)\r\n    angle += (angle - angle) / 3\r\n\r\n    return angle\r\n  }\r\n\r\n  private getCelestialAngle (partialTicks: number): number {\r\n    return this.calculateCelestialAngle(this.worldTime, partialTicks)\r\n  }\r\n\r\n  private getTemperature (x: number, z: number): number {\r\n    return this.temperature\r\n  }\r\n\r\n  private getSkyColorByTemp (temperature: number): number {\r\n    temperature /= 3\r\n    if (temperature < -1) temperature = -1\r\n    if (temperature > 1) temperature = 1\r\n\r\n    // Apply debug fog orangeness to hue - positive values make it more orange, negative make it less orange\r\n    const baseHue = 0.622_222_2 - temperature * 0.05\r\n    // Orange is around hue 0.08-0.15, so we need to shift from blue-purple (0.62) toward orange\r\n    // Use a more dramatic shift and also increase saturation for more noticeable effect\r\n    const orangeHue = 0.12 // Orange hue value\r\n    const hue = this.fogOrangeness > 0\r\n      ? baseHue + (orangeHue - baseHue) * this.fogOrangeness * 0.8 // Blend toward orange\r\n      : baseHue + this.fogOrangeness * 0.1 // Subtle shift for negative values\r\n    const saturation = 0.5 + temperature * 0.1 + Math.abs(this.fogOrangeness) * 0.3 // Increase saturation with orangeness\r\n    const brightness = 1\r\n\r\n    return this.hsbToRgb(hue, saturation, brightness)\r\n  }\r\n\r\n  private hsbToRgb (hue: number, saturation: number, brightness: number): number {\r\n    let r = 0; let g = 0; let b = 0\r\n    if (saturation === 0) {\r\n      r = g = b = Math.floor(brightness * 255 + 0.5)\r\n    } else {\r\n      const h = (hue - Math.floor(hue)) * 6\r\n      const f = h - Math.floor(h)\r\n      const p = brightness * (1 - saturation)\r\n      const q = brightness * (1 - saturation * f)\r\n      const t = brightness * (1 - (saturation * (1 - f)))\r\n      switch (Math.floor(h)) {\r\n        case 0:\r\n          r = Math.floor(brightness * 255 + 0.5)\r\n          g = Math.floor(t * 255 + 0.5)\r\n          b = Math.floor(p * 255 + 0.5)\r\n          break\r\n        case 1:\r\n          r = Math.floor(q * 255 + 0.5)\r\n          g = Math.floor(brightness * 255 + 0.5)\r\n          b = Math.floor(p * 255 + 0.5)\r\n          break\r\n        case 2:\r\n          r = Math.floor(p * 255 + 0.5)\r\n          g = Math.floor(brightness * 255 + 0.5)\r\n          b = Math.floor(t * 255 + 0.5)\r\n          break\r\n        case 3:\r\n          r = Math.floor(p * 255 + 0.5)\r\n          g = Math.floor(q * 255 + 0.5)\r\n          b = Math.floor(brightness * 255 + 0.5)\r\n          break\r\n        case 4:\r\n          r = Math.floor(t * 255 + 0.5)\r\n          g = Math.floor(p * 255 + 0.5)\r\n          b = Math.floor(brightness * 255 + 0.5)\r\n          break\r\n        case 5:\r\n          r = Math.floor(brightness * 255 + 0.5)\r\n          g = Math.floor(p * 255 + 0.5)\r\n          b = Math.floor(q * 255 + 0.5)\r\n          break\r\n      }\r\n    }\r\n    return 0xff_00_00_00 | (r << 16) | (g << 8) | (Math.trunc(b))\r\n  }\r\n\r\n  private updateSkyColors () {\r\n    if (!this.skyMesh || !this.voidMesh) return\r\n\r\n    // If default skybox is disabled, hide the skybox meshes\r\n    if (!this.defaultSkybox) {\r\n      this.skyMesh.visible = false\r\n      this.voidMesh.visible = false\r\n      if (this.mesh) {\r\n        this.mesh.visible = false\r\n      }\r\n      return\r\n    }\r\n\r\n    // Show skybox meshes when default skybox is enabled\r\n    this.skyMesh.visible = true\r\n    this.voidMesh.visible = true\r\n    if (this.mesh) {\r\n      this.mesh.visible = true\r\n    }\r\n\r\n    // Update fog brightness with smooth transition\r\n    this.prevFogBrightness = this.fogBrightness\r\n    const renderDistance = this.viewDistance / 32\r\n    const targetBrightness = this.brightnessAtPosition * (1 - renderDistance) + renderDistance\r\n    this.fogBrightness += (targetBrightness - this.fogBrightness) * 0.1\r\n\r\n    // Handle water fog\r\n    if (this.inWater) {\r\n      const waterViewDistance = this.waterBreathing ? 100 : 5\r\n      this.scene.fog = new THREE.Fog(new THREE.Color(0, 0, 1), 0.0025, waterViewDistance)\r\n      this.scene.background = new THREE.Color(0, 0, 1)\r\n\r\n      // Update sky and void colors for underwater effect\r\n      ;(this.skyMesh.material as THREE.MeshBasicMaterial).color.set(new THREE.Color(0, 0, 1))\r\n      ;(this.voidMesh.material as THREE.MeshBasicMaterial).color.set(new THREE.Color(0, 0, 0.6))\r\n      return\r\n    }\r\n\r\n    // Normal sky colors\r\n    const viewDistance = this.viewDistance * 16\r\n    const viewFactor = 1 - (0.25 + 0.75 * this.viewDistance / 32) ** 0.25\r\n\r\n    const angle = this.getCelestialAngle(this.partialTicks)\r\n    const skyColor = this.getSkyColor(0, 0, this.partialTicks)\r\n    const fogColor = this.getFogColor(this.partialTicks)\r\n\r\n    const brightness = Math.cos(angle * Math.PI * 2) * 2 + 0.5\r\n    const clampedBrightness = Math.max(0, Math.min(1, brightness))\r\n\r\n    // Interpolate fog brightness\r\n    const interpolatedBrightness = this.prevFogBrightness + (this.fogBrightness - this.prevFogBrightness) * this.partialTicks\r\n\r\n    const red = (fogColor.x + (skyColor.x - fogColor.x) * viewFactor) * clampedBrightness * interpolatedBrightness\r\n    const green = (fogColor.y + (skyColor.y - fogColor.y) * viewFactor) * clampedBrightness * interpolatedBrightness\r\n    const blue = (fogColor.z + (skyColor.z - fogColor.z) * viewFactor) * clampedBrightness * interpolatedBrightness\r\n\r\n    this.scene.background = new THREE.Color(red, green, blue)\r\n    this.scene.fog = new THREE.Fog(new THREE.Color(red, green, blue), 0.0025, viewDistance * this.distanceFactor)\r\n\r\n    ;(this.skyMesh.material as THREE.MeshBasicMaterial).color.set(new THREE.Color(skyColor.x, skyColor.y, skyColor.z))\r\n    ;(this.voidMesh.material as THREE.MeshBasicMaterial).color.set(new THREE.Color(\r\n      skyColor.x * 0.2 + 0.04,\r\n      skyColor.y * 0.2 + 0.04,\r\n      skyColor.z * 0.6 + 0.1\r\n    ))\r\n  }\r\n\r\n  dispose () {\r\n    if (this.texture) {\r\n      this.texture.dispose()\r\n    }\r\n    if (this.mesh) {\r\n      this.mesh.geometry.dispose()\r\n      ;(this.mesh.material as THREE.Material).dispose()\r\n      this.scene.remove(this.mesh)\r\n    }\r\n    if (this.skyMesh) {\r\n      this.skyMesh.geometry.dispose()\r\n      ;(this.skyMesh.material as THREE.Material).dispose()\r\n      this.scene.remove(this.skyMesh)\r\n    }\r\n    if (this.voidMesh) {\r\n      this.voidMesh.geometry.dispose()\r\n      ;(this.voidMesh.material as THREE.Material).dispose()\r\n      this.scene.remove(this.voidMesh)\r\n    }\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\n// Shader code\r\nconst vertexShader = `\r\nprecision highp float;\r\nattribute vec3 position;\r\nattribute vec4 color;\r\nattribute vec3 velocity;\r\nattribute float adjustSize;\r\nattribute float mass;\r\n\r\nuniform mat4 modelViewMatrix;\r\nuniform mat4 projectionMatrix;\r\nuniform float size;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n  vColor = color;\r\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\r\n  gl_PointSize = size * adjustSize * (300.0 / length(mvPosition.xyz));\r\n  gl_Position = projectionMatrix * mvPosition;\r\n}\r\n`\r\n\r\nconst fragmentShader = `\r\nprecision highp float;\r\nuniform sampler2D texture;\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n  vec4 texColor = texture2D(texture, gl_PointCoord);\r\n  gl_FragColor = vColor * texColor;\r\n}\r\n`\r\n\r\n// Configuration interfaces\r\nexport interface FireworkLaunchOptions {\r\n  /** Position to launch the firework from */\r\n  position?: THREE.Vector3\r\n  /** Particle size (100-600, default: 300) */\r\n  particleSize?: number\r\n  /** Force rich fireworks type (with trails) */\r\n  forceRich?: boolean\r\n  /** Force basic fireworks type (no trails) */\r\n  forceBasic?: boolean\r\n}\r\n\r\nexport interface FireworksManagerConfig {\r\n  /** Maximum number of active fireworks at once */\r\n  maxActiveFireworks?: number\r\n  /** Default particle size for fireworks */\r\n  defaultParticleSize?: number\r\n}\r\n\r\n// Constants\r\nexport const FIREWORKS_CONFIG = {\r\n  textureSize: 128,\r\n  gravity: new THREE.Vector3(0, -0.005, 0),\r\n  friction: 0.998,\r\n  defaultParticleSize: 300,\r\n  maxActiveFireworks: 5,\r\n}\r\n\r\n// Utility functions\r\nconst getOffsetXYZ = (i: number) => {\r\n  const offset = 3\r\n  const index = i * offset\r\n  return { x: index, y: index + 1, z: index + 2 }\r\n}\r\n\r\nconst getOffsetRGBA = (i: number) => {\r\n  const offset = 4\r\n  const index = i * offset\r\n  return { r: index, g: index + 1, b: index + 2, a: index + 3 }\r\n}\r\n\r\nconst getRandomNum = (max = 0, min = 0) => Math.floor(Math.random() * (max + 1 - min)) + min\r\n\r\n// Texture generation\r\nconst drawRadialGradation = (ctx: CanvasRenderingContext2D, canvasRadius: number, canvasW: number, canvasH: number) => {\r\n  ctx.save()\r\n  const gradient = ctx.createRadialGradient(canvasRadius, canvasRadius, 0, canvasRadius, canvasRadius, canvasRadius)\r\n  gradient.addColorStop(0, 'rgba(255,255,255,1.0)')\r\n  gradient.addColorStop(0.5, 'rgba(255,255,255,0.5)')\r\n  gradient.addColorStop(1, 'rgba(255,255,255,0)')\r\n  ctx.fillStyle = gradient\r\n  ctx.fillRect(0, 0, canvasW, canvasH)\r\n  ctx.restore()\r\n}\r\n\r\nexport const createFireworksTexture = () => {\r\n  const canvas = document.createElement('canvas')\r\n  const ctx = canvas.getContext('2d')!\r\n  const diameter = FIREWORKS_CONFIG.textureSize\r\n  canvas.width = diameter\r\n  canvas.height = diameter\r\n  const canvasRadius = diameter / 2\r\n\r\n  drawRadialGradation(ctx, canvasRadius, canvas.width, canvas.height)\r\n  const texture = new THREE.Texture(canvas)\r\n  texture.needsUpdate = true\r\n  return texture\r\n}\r\n\r\n// Point mesh creation\r\nconst getPointMesh = (num: number, vels: THREE.Vector3[], type: 'seed' | 'trail' | 'default', texture: THREE.Texture, particleSize = FIREWORKS_CONFIG.defaultParticleSize) => {\r\n  const bufferGeometry = new THREE.BufferGeometry()\r\n  const vertices: number[] = []\r\n  const velocities: number[] = []\r\n  const colors: number[] = []\r\n  const adjustSizes: number[] = []\r\n  const masses: number[] = []\r\n\r\n  const colorType = Math.random() > 0.3 ? 'single' : 'multiple'\r\n  const singleColor = getRandomNum(100, 20) * 0.01\r\n  const multipleColor = () => getRandomNum(100, 1) * 0.01\r\n\r\n  let rgbType: 'red' | 'green' | 'blue' = 'red'\r\n  const rgbTypeDice = Math.random()\r\n  if (rgbTypeDice > 0.66) {\r\n    rgbType = 'red'\r\n  } else if (rgbTypeDice > 0.33) {\r\n    rgbType = 'green'\r\n  } else {\r\n    rgbType = 'blue'\r\n  }\r\n\r\n  for (let i = 0; i < num; i++) {\r\n    const pos = new THREE.Vector3(0, 0, 0)\r\n    vertices.push(pos.x, pos.y, pos.z)\r\n    velocities.push(vels[i].x, vels[i].y, vels[i].z)\r\n\r\n    if (type === 'seed') {\r\n      let size = vels[i].y ** 2 * 0.04\r\n      if (i === 0) size *= 1.1\r\n      adjustSizes.push(size)\r\n      masses.push(size * 0.017)\r\n      colors.push(1, 1, 1, 1)\r\n    } else if (type === 'trail') {\r\n      const size = Math.random() * 0.1 + 0.1\r\n      adjustSizes.push(size)\r\n      masses.push(size * 0.017)\r\n      colors.push(1, 1, 1, 1)\r\n    } else {\r\n      const size = getRandomNum(particleSize, 10) * 0.001\r\n      adjustSizes.push(size)\r\n      masses.push(size * 0.017)\r\n\r\n      if (colorType === 'multiple') {\r\n        colors.push(multipleColor(), multipleColor(), multipleColor(), 1)\r\n      } else {\r\n        switch (rgbType) {\r\n          case 'red':\r\n            colors.push(singleColor, 0.1, 0.1, 1)\r\n            break\r\n          case 'green':\r\n            colors.push(0.1, singleColor, 0.1, 1)\r\n            break\r\n          case 'blue':\r\n            colors.push(0.1, 0.1, singleColor, 1)\r\n            break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  bufferGeometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n  bufferGeometry.setAttribute('velocity', new THREE.Float32BufferAttribute(velocities, 3))\r\n  bufferGeometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 4))\r\n  bufferGeometry.setAttribute('adjustSize', new THREE.Float32BufferAttribute(adjustSizes, 1))\r\n  bufferGeometry.setAttribute('mass', new THREE.Float32BufferAttribute(masses, 1))\r\n\r\n  const shaderMaterial = new THREE.RawShaderMaterial({\r\n    uniforms: {\r\n      size: { value: FIREWORKS_CONFIG.textureSize },\r\n      texture: { value: texture },\r\n    },\r\n    transparent: true,\r\n    depthWrite: false,\r\n    blending: THREE.AdditiveBlending,\r\n    vertexShader,\r\n    fragmentShader,\r\n  })\r\n\r\n  return new THREE.Points(bufferGeometry, shaderMaterial)\r\n}\r\n\r\n// Particle mesh classes\r\nexport class ParticleMesh {\r\n  particleNum: number\r\n  timerStartFading: number\r\n  mesh: THREE.Points\r\n\r\n  constructor (num: number, vels: THREE.Vector3[], type: 'seed' | 'trail' | 'default', texture: THREE.Texture, particleSize?: number) {\r\n    this.particleNum = num\r\n    this.timerStartFading = 10\r\n    this.mesh = getPointMesh(num, vels, type, texture, particleSize)\r\n  }\r\n\r\n  update (gravity: THREE.Vector3) {\r\n    if (this.timerStartFading > 0) this.timerStartFading -= 0.3\r\n\r\n    const position = this.mesh.geometry.attributes.position as THREE.BufferAttribute\r\n    const velocity = this.mesh.geometry.attributes.velocity as THREE.BufferAttribute\r\n    const color = this.mesh.geometry.attributes.color as THREE.BufferAttribute\r\n    const mass = this.mesh.geometry.attributes.mass as THREE.BufferAttribute\r\n\r\n    const decrementRandom = () => (Math.random() > 0.5 ? 0.98 : 0.96)\r\n    const decrementByVel = (v: number) => (Math.random() > 0.5 ? 0 : (1 - v) * 0.1)\r\n\r\n    for (let i = 0; i < this.particleNum; i++) {\r\n      const { x, y, z } = getOffsetXYZ(i)\r\n\r\n      velocity.array[y] += gravity.y - mass.array[i]\r\n      velocity.array[x] *= FIREWORKS_CONFIG.friction\r\n      velocity.array[z] *= FIREWORKS_CONFIG.friction\r\n      velocity.array[y] *= FIREWORKS_CONFIG.friction\r\n\r\n      position.array[x] += velocity.array[x]\r\n      position.array[y] += velocity.array[y]\r\n      position.array[z] += velocity.array[z]\r\n\r\n      const { a } = getOffsetRGBA(i)\r\n      if (this.timerStartFading <= 0) {\r\n        color.array[a] *= decrementRandom() - decrementByVel(color.array[a])\r\n        if (color.array[a] < 0.001) color.array[a] = 0\r\n      }\r\n    }\r\n\r\n    position.needsUpdate = true\r\n    velocity.needsUpdate = true\r\n    color.needsUpdate = true\r\n  }\r\n\r\n  disposeAll () {\r\n    this.mesh.geometry.dispose()\r\n    ;(this.mesh.material as THREE.Material).dispose()\r\n  }\r\n}\r\n\r\nexport class ParticleSeedMesh extends ParticleMesh {\r\n  constructor (num: number, vels: THREE.Vector3[], texture: THREE.Texture) {\r\n    super(num, vels, 'seed', texture)\r\n  }\r\n\r\n  update (gravity: THREE.Vector3) {\r\n    const position = this.mesh.geometry.attributes.position as THREE.BufferAttribute\r\n    const velocity = this.mesh.geometry.attributes.velocity as THREE.BufferAttribute\r\n    const color = this.mesh.geometry.attributes.color as THREE.BufferAttribute\r\n    const mass = this.mesh.geometry.attributes.mass as THREE.BufferAttribute\r\n\r\n    const decrementRandom = () => (Math.random() > 0.3 ? 0.99 : 0.96)\r\n    const decrementByVel = (v: number) => (Math.random() > 0.3 ? 0 : (1 - v) * 0.1)\r\n    const shake = () => (Math.random() > 0.5 ? 0.05 : -0.05)\r\n    const dice = () => Math.random() > 0.1\r\n    const _f = FIREWORKS_CONFIG.friction * 0.98\r\n\r\n    for (let i = 0; i < this.particleNum; i++) {\r\n      const { x, y, z } = getOffsetXYZ(i)\r\n\r\n      velocity.array[y] += gravity.y - mass.array[i]\r\n      velocity.array[x] *= _f\r\n      velocity.array[z] *= _f\r\n      velocity.array[y] *= _f\r\n\r\n      position.array[x] += velocity.array[x]\r\n      position.array[y] += velocity.array[y]\r\n      position.array[z] += velocity.array[z]\r\n\r\n      if (dice()) position.array[x] += shake()\r\n      if (dice()) position.array[z] += shake()\r\n\r\n      const { a } = getOffsetRGBA(i)\r\n      color.array[a] *= decrementRandom() - decrementByVel(color.array[a])\r\n      if (color.array[a] < 0.001) color.array[a] = 0\r\n    }\r\n\r\n    position.needsUpdate = true\r\n    velocity.needsUpdate = true\r\n    color.needsUpdate = true\r\n  }\r\n}\r\n\r\nexport class ParticleTailMesh extends ParticleMesh {\r\n  constructor (num: number, vels: THREE.Vector3[], texture: THREE.Texture) {\r\n    super(num, vels, 'trail', texture)\r\n  }\r\n\r\n  update (gravity: THREE.Vector3) {\r\n    const position = this.mesh.geometry.attributes.position as THREE.BufferAttribute\r\n    const velocity = this.mesh.geometry.attributes.velocity as THREE.BufferAttribute\r\n    const color = this.mesh.geometry.attributes.color as THREE.BufferAttribute\r\n    const mass = this.mesh.geometry.attributes.mass as THREE.BufferAttribute\r\n\r\n    const decrementRandom = () => (Math.random() > 0.3 ? 0.98 : 0.95)\r\n    const shake = () => (Math.random() > 0.5 ? 0.05 : -0.05)\r\n    const dice = () => Math.random() > 0.2\r\n\r\n    for (let i = 0; i < this.particleNum; i++) {\r\n      const { x, y, z } = getOffsetXYZ(i)\r\n\r\n      velocity.array[y] += gravity.y - mass.array[i]\r\n      velocity.array[x] *= FIREWORKS_CONFIG.friction\r\n      velocity.array[z] *= FIREWORKS_CONFIG.friction\r\n      velocity.array[y] *= FIREWORKS_CONFIG.friction\r\n\r\n      position.array[x] += velocity.array[x]\r\n      position.array[y] += velocity.array[y]\r\n      position.array[z] += velocity.array[z]\r\n\r\n      if (dice()) position.array[x] += shake()\r\n      if (dice()) position.array[z] += shake()\r\n\r\n      const { a } = getOffsetRGBA(i)\r\n      color.array[a] *= decrementRandom()\r\n      if (color.array[a] < 0.001) color.array[a] = 0\r\n    }\r\n\r\n    position.needsUpdate = true\r\n    velocity.needsUpdate = true\r\n    color.needsUpdate = true\r\n  }\r\n}\r\n\r\n// Fireworks classes\r\nexport class BasicFireworks {\r\n  meshGroup: THREE.Group\r\n  isExplode: boolean\r\n  petalsNum: number\r\n  life: number\r\n  seed: ParticleSeedMesh\r\n  flowerSizeRate: number\r\n  flower?: ParticleMesh\r\n  texture: THREE.Texture\r\n  particleSize: number\r\n\r\n  constructor (texture: THREE.Texture, particleSize = FIREWORKS_CONFIG.defaultParticleSize, startPosition?: THREE.Vector3) {\r\n    this.meshGroup = new THREE.Group()\r\n    this.isExplode = false\r\n    this.texture = texture\r\n    this.particleSize = particleSize\r\n\r\n    const max = 400\r\n    const min = 150\r\n    this.petalsNum = getRandomNum(max, min)\r\n    this.life = 150\r\n    this.seed = this.getSeed(startPosition)\r\n    this.meshGroup.add(this.seed.mesh)\r\n    this.flowerSizeRate = THREE.MathUtils.mapLinear(this.petalsNum, min, max, 0.4, 0.7)\r\n  }\r\n\r\n  getSeed (startPosition?: THREE.Vector3): ParticleSeedMesh {\r\n    const num = 40\r\n    const vels: THREE.Vector3[] = []\r\n\r\n    for (let i = 0; i < num; i++) {\r\n      const vx = 0\r\n      const vy = i === 0 ? Math.random() * 2.5 + 0.9 : Math.random() * 2 + 0.4\r\n      const vz = 0\r\n      vels.push(new THREE.Vector3(vx, vy, vz))\r\n    }\r\n\r\n    const pm = new ParticleSeedMesh(num, vels, this.texture)\r\n    if (startPosition) {\r\n      pm.mesh.position.set(startPosition.x, startPosition.y, startPosition.z)\r\n    } else {\r\n      const x = Math.random() * 80 - 40\r\n      const y = -50\r\n      const z = Math.random() * 80 - 40\r\n      pm.mesh.position.set(x, y, z)\r\n    }\r\n\r\n    return pm\r\n  }\r\n\r\n  explode (pos: THREE.Vector3) {\r\n    this.isExplode = true\r\n    this.flower = this.getFlower(pos)\r\n    this.meshGroup.add(this.flower.mesh)\r\n    this.meshGroup.remove(this.seed.mesh)\r\n    this.seed.disposeAll()\r\n  }\r\n\r\n  getFlower (pos: THREE.Vector3): ParticleMesh {\r\n    const num = this.petalsNum\r\n    const vels: THREE.Vector3[] = []\r\n    let radius: number\r\n    const dice = Math.random()\r\n\r\n    if (dice > 0.5) {\r\n      for (let i = 0; i < num; i++) {\r\n        radius = getRandomNum(120, 60) * 0.01\r\n        const theta = THREE.MathUtils.degToRad(Math.random() * 180)\r\n        const phi = THREE.MathUtils.degToRad(Math.random() * 360)\r\n        const vx = Math.sin(theta) * Math.cos(phi) * radius\r\n        const vy = Math.sin(theta) * Math.sin(phi) * radius\r\n        const vz = Math.cos(theta) * radius\r\n        const vel = new THREE.Vector3(vx, vy, vz)\r\n        vel.multiplyScalar(this.flowerSizeRate)\r\n        vels.push(vel)\r\n      }\r\n    } else {\r\n      const zStep = 180 / num\r\n      const trad = (360 * (Math.random() * 20 + 1)) / num\r\n      const xStep = trad\r\n      const yStep = trad\r\n      radius = getRandomNum(120, 60) * 0.01\r\n\r\n      for (let i = 0; i < num; i++) {\r\n        const sphereRate = Math.sin(THREE.MathUtils.degToRad(zStep * i))\r\n        const vz = Math.cos(THREE.MathUtils.degToRad(zStep * i)) * radius\r\n        const vx = Math.cos(THREE.MathUtils.degToRad(xStep * i)) * sphereRate * radius\r\n        const vy = Math.sin(THREE.MathUtils.degToRad(yStep * i)) * sphereRate * radius\r\n        const vel = new THREE.Vector3(vx, vy, vz)\r\n        vel.multiplyScalar(this.flowerSizeRate)\r\n        vels.push(vel)\r\n      }\r\n    }\r\n\r\n    const particleMesh = new ParticleMesh(num, vels, 'default', this.texture, this.particleSize)\r\n    particleMesh.mesh.position.set(pos.x, pos.y, pos.z)\r\n    return particleMesh\r\n  }\r\n\r\n  update (gravity: THREE.Vector3) {\r\n    if (this.isExplode) {\r\n      this.flower!.update(gravity)\r\n      if (this.life > 0) this.life -= 1\r\n    } else {\r\n      this.drawTail()\r\n    }\r\n  }\r\n\r\n  drawTail () {\r\n    this.seed.update(FIREWORKS_CONFIG.gravity)\r\n\r\n    const position = this.seed.mesh.geometry.attributes.position as THREE.BufferAttribute\r\n    const velocity = this.seed.mesh.geometry.attributes.velocity as THREE.BufferAttribute\r\n\r\n    let count = 0\r\n\r\n    // Check if the y-axis speed is down for all particles\r\n    for (let i = 0, l = velocity.array.length; i < l; i++) {\r\n      const v = velocity.array[i]\r\n      const index = i % 3\r\n      if (index === 1 && v > 0) {\r\n        count++\r\n      }\r\n    }\r\n\r\n    const isComplete = count === 0\r\n    if (!isComplete) return\r\n\r\n    const { x, y, z } = this.seed.mesh.position\r\n    const flowerPos = new THREE.Vector3(x, y, z)\r\n    let highestPos = 0\r\n    let offsetPos: THREE.Vector3 | undefined\r\n\r\n    for (let i = 0, l = position.array.length; i < l; i++) {\r\n      const p = position.array[i]\r\n      const index = i % 3\r\n      if (index === 1 && p > highestPos) {\r\n        highestPos = p\r\n        offsetPos = new THREE.Vector3(position.array[i - 1], p, position.array[i + 2])\r\n      }\r\n    }\r\n\r\n    if (offsetPos) {\r\n      flowerPos.add(offsetPos)\r\n      this.explode(flowerPos)\r\n    }\r\n  }\r\n}\r\n\r\nexport class RichFireworks extends BasicFireworks {\r\n  tailMeshGroup: THREE.Group\r\n  tails: ParticleTailMesh[]\r\n\r\n  constructor (texture: THREE.Texture, particleSize = FIREWORKS_CONFIG.defaultParticleSize, startPosition?: THREE.Vector3) {\r\n    super(texture, particleSize, startPosition)\r\n\r\n    const max = 150\r\n    const min = 100\r\n    this.petalsNum = getRandomNum(max, min)\r\n    this.flowerSizeRate = THREE.MathUtils.mapLinear(this.petalsNum, min, max, 0.4, 0.7)\r\n    this.tailMeshGroup = new THREE.Group()\r\n    this.tails = []\r\n  }\r\n\r\n  explode (pos: THREE.Vector3) {\r\n    this.isExplode = true\r\n    this.flower = this.getFlower(pos)\r\n    this.tails = this.getTail()\r\n    this.meshGroup.add(this.flower.mesh)\r\n    this.meshGroup.add(this.tailMeshGroup)\r\n  }\r\n\r\n  getTail (): ParticleTailMesh[] {\r\n    const tails: ParticleTailMesh[] = []\r\n    const num = 20\r\n    const petalColor = this.flower!.mesh.geometry.attributes.color as THREE.BufferAttribute\r\n\r\n    for (let i = 0; i < this.petalsNum; i++) {\r\n      const vels: THREE.Vector3[] = []\r\n      for (let j = 0; j < num; j++) {\r\n        vels.push(new THREE.Vector3(0, 0, 0))\r\n      }\r\n\r\n      const tail = new ParticleTailMesh(num, vels, this.texture)\r\n      const { r, g, b, a } = getOffsetRGBA(i)\r\n\r\n      const petalR = petalColor.array[r]\r\n      const petalG = petalColor.array[g]\r\n      const petalB = petalColor.array[b]\r\n      const petalA = petalColor.array[a]\r\n\r\n      const position = tail.mesh.geometry.attributes.position as THREE.BufferAttribute\r\n      const color = tail.mesh.geometry.attributes.color as THREE.BufferAttribute\r\n\r\n      for (let k = 0; k < position.count; k++) {\r\n        const rgba = getOffsetRGBA(k)\r\n        color.array[rgba.r] = petalR\r\n        color.array[rgba.g] = petalG\r\n        color.array[rgba.b] = petalB\r\n        color.array[rgba.a] = petalA\r\n      }\r\n\r\n      const { x, y, z } = this.flower!.mesh.position\r\n      tail.mesh.position.set(x, y, z)\r\n      tails.push(tail)\r\n      this.tailMeshGroup.add(tail.mesh)\r\n    }\r\n\r\n    return tails\r\n  }\r\n\r\n  update (gravity: THREE.Vector3) {\r\n    if (this.isExplode) {\r\n      this.flower!.update(gravity)\r\n\r\n      const flowerGeometry = this.flower!.mesh.geometry.attributes.position as THREE.BufferAttribute\r\n\r\n      for (let i = 0, l = this.tails.length; i < l; i++) {\r\n        const tail = this.tails[i]\r\n        tail.update(gravity)\r\n\r\n        const { x, y, z } = getOffsetXYZ(i)\r\n        const flowerPos = new THREE.Vector3(\r\n          flowerGeometry.array[x],\r\n          flowerGeometry.array[y],\r\n          flowerGeometry.array[z]\r\n        )\r\n\r\n        const position = tail.mesh.geometry.attributes.position as THREE.BufferAttribute\r\n        const velocity = tail.mesh.geometry.attributes.velocity as THREE.BufferAttribute\r\n\r\n        for (let k = 0; k < position.count; k++) {\r\n          const offset = getOffsetXYZ(k)\r\n          const desiredVelocity = new THREE.Vector3()\r\n          const tailPos = new THREE.Vector3(position.array[offset.x], position.array[offset.y], position.array[offset.z])\r\n          const tailVel = new THREE.Vector3(velocity.array[offset.x], velocity.array[offset.y], velocity.array[offset.z])\r\n          desiredVelocity.subVectors(flowerPos, tailPos)\r\n          const steer = desiredVelocity.sub(tailVel)\r\n          steer.normalize()\r\n          steer.multiplyScalar(Math.random() * 0.0003 * this.life)\r\n          velocity.array[offset.x] += steer.x\r\n          velocity.array[offset.y] += steer.y\r\n          velocity.array[offset.z] += steer.z\r\n        }\r\n        velocity.needsUpdate = true\r\n      }\r\n\r\n      if (this.life > 0) this.life -= 1.2\r\n    } else {\r\n      this.drawTail()\r\n    }\r\n  }\r\n}\r\n\r\n// Manager class for handling multiple fireworks\r\nexport class FireworksManager {\r\n  fireworksInstances: Array<BasicFireworks | RichFireworks>\r\n  scene: THREE.Scene\r\n  texture: THREE.Texture\r\n  particleSize: number\r\n  maxFireworks: number\r\n\r\n  constructor (scene: THREE.Scene, config?: FireworksManagerConfig) {\r\n    this.fireworksInstances = []\r\n    this.scene = scene\r\n    this.texture = createFireworksTexture()\r\n    this.particleSize = config?.defaultParticleSize ?? FIREWORKS_CONFIG.defaultParticleSize\r\n    this.maxFireworks = config?.maxActiveFireworks ?? FIREWORKS_CONFIG.maxActiveFireworks\r\n  }\r\n\r\n  launchFirework (options?: FireworkLaunchOptions) {\r\n    if (this.fireworksInstances.length >= this.maxFireworks) return\r\n\r\n    const particleSize = options?.particleSize ?? this.particleSize\r\n    const position = options?.position\r\n\r\n    let fw: BasicFireworks | RichFireworks\r\n    if (options?.forceRich) {\r\n      fw = new RichFireworks(this.texture, particleSize, position)\r\n    } else if (options?.forceBasic) {\r\n      fw = new BasicFireworks(this.texture, particleSize, position)\r\n    } else {\r\n      fw = Math.random() > 0.5 ? new BasicFireworks(this.texture, particleSize, position) : new RichFireworks(this.texture, particleSize, position)\r\n    }\r\n\r\n    this.fireworksInstances.push(fw)\r\n    this.scene.add(fw.meshGroup)\r\n  }\r\n\r\n  update () {\r\n    const explodedIndexList: number[] = []\r\n\r\n    for (let i = this.fireworksInstances.length - 1; i >= 0; i--) {\r\n      const instance = this.fireworksInstances[i]\r\n      instance.update(FIREWORKS_CONFIG.gravity)\r\n      if (instance.isExplode) explodedIndexList.push(i)\r\n    }\r\n\r\n    for (let i = 0, l = explodedIndexList.length; i < l; i++) {\r\n      const index = explodedIndexList[i]\r\n      const instance = this.fireworksInstances[index]\r\n      if (!instance) continue\r\n\r\n      instance.meshGroup.remove(instance.seed.mesh)\r\n      instance.seed.disposeAll()\r\n\r\n      if (instance.life <= 0) {\r\n        this.scene.remove(instance.meshGroup)\r\n        if (instance instanceof RichFireworks && instance.tailMeshGroup) {\r\n          for (const v of instance.tails) {\r\n            v.disposeAll()\r\n          }\r\n        }\r\n        instance.flower?.disposeAll()\r\n        this.fireworksInstances.splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n\r\n  clear () {\r\n    for (const instance of this.fireworksInstances) {\r\n      this.scene.remove(instance.meshGroup)\r\n      instance.seed.disposeAll()\r\n      if (instance.flower) instance.flower.disposeAll()\r\n      if (instance instanceof RichFireworks) {\r\n        for (const v of instance.tails) v.disposeAll()\r\n      }\r\n    }\r\n    this.fireworksInstances = []\r\n  }\r\n\r\n  dispose () {\r\n    this.clear()\r\n    this.texture.dispose()\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { Vec3 } from 'vec3'\r\nimport nbt from 'prismarine-nbt'\r\nimport PrismarineChatLoader from 'prismarine-chat'\r\nimport * as tweenJs from '@tweenjs/tween.js'\r\nimport { Biome } from 'minecraft-data'\r\nimport { renderSign } from '../sign-renderer'\r\nimport { DisplayWorldOptions, GraphicsInitOptions } from '../../../src/appViewer'\r\nimport { chunkPos, sectionPos } from '../lib/simpleUtils'\r\nimport { WorldRendererCommon } from '../lib/worldrendererCommon'\r\nimport { addNewStat } from '../lib/ui/newStats'\r\nimport { MesherGeometryOutput } from '../lib/mesher/shared'\r\nimport { ItemSpecificContextProperties } from '../lib/basePlayerState'\r\nimport { setBlockPosition } from '../lib/mesher/standaloneRenderer'\r\nimport { getBannerTexture, createBannerMesh, releaseBannerTexture } from './bannerRenderer'\r\nimport { getMyHand } from './hand'\r\nimport HoldingBlock from './holdingBlock'\r\nimport { getMesh } from './entity/EntityMesh'\r\nimport { armorModel } from './entity/armorModels'\r\nimport { disposeObject, loadThreeJsTextureFromBitmap } from './threeJsUtils'\r\nimport { CursorBlock } from './world/cursorBlock'\r\nimport { getItemUv } from './appShared'\r\nimport { Entities } from './entities'\r\nimport { ThreeJsSound } from './threeJsSound'\r\nimport { CameraShake } from './cameraShake'\r\nimport { ThreeJsMedia } from './threeJsMedia'\r\nimport { Fountain } from './threeJsParticles'\r\nimport { WaypointsRenderer } from './waypoints'\r\nimport { DEFAULT_TEMPERATURE, SkyboxRenderer } from './skyboxRenderer'\r\nimport { FireworksManager } from './fireworks'\r\nimport { downloadWorldGeometry } from './worldGeometryExport'\r\n\r\ntype SectionKey = string\r\n\r\nexport class WorldRendererThree extends WorldRendererCommon {\r\n  outputFormat = 'threeJs' as const\r\n  sectionObjects: Record<string, THREE.Object3D & { foutain?: boolean }> = {}\r\n  chunkTextures = new Map<string, { [pos: string]: THREE.Texture }>()\r\n  signsCache = new Map<string, any>()\r\n  starField: StarField\r\n  cameraSectionPos: Vec3 = new Vec3(0, 0, 0)\r\n  holdingBlock: HoldingBlock\r\n  holdingBlockLeft: HoldingBlock\r\n  scene = new THREE.Scene()\r\n  ambientLight = new THREE.AmbientLight(0xcc_cc_cc)\r\n  directionalLight = new THREE.DirectionalLight(0xff_ff_ff, 0.5)\r\n  entities = new Entities(this)\r\n  cameraGroupVr?: THREE.Object3D\r\n  material = new THREE.MeshLambertMaterial({ vertexColors: true, transparent: true, alphaTest: 0.1 })\r\n  itemsTexture: THREE.Texture\r\n  cursorBlock: CursorBlock\r\n  onRender: Array<() => void> = []\r\n  cameraShake: CameraShake\r\n  cameraContainer: THREE.Object3D\r\n  media: ThreeJsMedia\r\n  waitingChunksToDisplay = {} as { [chunkKey: string]: SectionKey[] }\r\n  waypoints: WaypointsRenderer\r\n  camera: THREE.PerspectiveCamera\r\n  renderTimeAvg = 0\r\n  sectionsOffsetsAnimations = {} as {\r\n    [chunkKey: string]: {\r\n      time: number,\r\n      // also specifies direction\r\n      speedX: number,\r\n      speedY: number,\r\n      speedZ: number,\r\n\r\n      currentOffsetX: number,\r\n      currentOffsetY: number,\r\n      currentOffsetZ: number,\r\n\r\n      limitX?: number,\r\n      limitY?: number,\r\n      limitZ?: number,\r\n    }\r\n  }\r\n  fountains: Fountain[] = []\r\n  DEBUG_RAYCAST = false\r\n  skyboxRenderer: SkyboxRenderer\r\n  fireworks: FireworksManager\r\n\r\n  private currentPosTween?: tweenJs.Tween<THREE.Vector3>\r\n  private currentRotTween?: tweenJs.Tween<{ pitch: number, yaw: number }>\r\n\r\n  get tilesRendered () {\r\n    return Object.values(this.sectionObjects).reduce((acc, obj) => acc + (obj as any).tilesCount, 0)\r\n  }\r\n\r\n  get blocksRendered () {\r\n    return Object.values(this.sectionObjects).reduce((acc, obj) => acc + (obj as any).blocksCount, 0)\r\n  }\r\n\r\n  constructor (public renderer: THREE.WebGLRenderer, public initOptions: GraphicsInitOptions, public displayOptions: DisplayWorldOptions) {\r\n    if (!initOptions.resourcesManager) throw new Error('resourcesManager is required')\r\n    super(initOptions.resourcesManager, displayOptions, initOptions)\r\n\r\n    this.renderer = renderer\r\n    displayOptions.rendererState.renderer = WorldRendererThree.getRendererInfo(renderer) ?? '...'\r\n    this.starField = new StarField(this)\r\n    this.cursorBlock = new CursorBlock(this)\r\n    this.holdingBlock = new HoldingBlock(this)\r\n    this.holdingBlockLeft = new HoldingBlock(this, true)\r\n\r\n    // Initialize skybox renderer\r\n    this.skyboxRenderer = new SkyboxRenderer(this.scene, this.worldRendererConfig.defaultSkybox, null)\r\n    void this.skyboxRenderer.init()\r\n\r\n    this.addDebugOverlay()\r\n    this.resetScene()\r\n    void this.init()\r\n\r\n    this.soundSystem = new ThreeJsSound(this)\r\n    this.cameraShake = new CameraShake(this, this.onRender)\r\n    this.media = new ThreeJsMedia(this)\r\n    this.waypoints = new WaypointsRenderer(this)\r\n    this.fireworks = new FireworksManager(this.scene)\r\n\r\n    // this.fountain = new Fountain(this.scene, this.scene, {\r\n    //   position: new THREE.Vector3(0, 10, 0),\r\n    // })\r\n\r\n    this.renderUpdateEmitter.on('chunkFinished', (chunkKey: string) => {\r\n      this.finishChunk(chunkKey)\r\n    })\r\n    this.worldSwitchActions()\r\n  }\r\n\r\n  get cameraObject () {\r\n    return this.cameraGroupVr ?? this.cameraContainer\r\n  }\r\n\r\n  worldSwitchActions () {\r\n    this.onWorldSwitched.push(() => {\r\n      // clear custom blocks\r\n      this.protocolCustomBlocks.clear()\r\n      // Reset section animations\r\n      this.sectionsOffsetsAnimations = {}\r\n      // Clear waypoints\r\n      this.waypoints.clear()\r\n      // Clear fireworks\r\n      this.fireworks.clear()\r\n    })\r\n  }\r\n\r\n  downloadWorldGeometry () {\r\n    downloadWorldGeometry(this, this.cameraObject.position, this.cameraShake.getBaseRotation(), 'world-geometry.json')\r\n  }\r\n\r\n  updateEntity (e, isPosUpdate = false) {\r\n    const overrides = {\r\n      rotation: {\r\n        head: {\r\n          x: e.headPitch ?? e.pitch,\r\n          y: e.headYaw,\r\n          z: 0\r\n        }\r\n      }\r\n    }\r\n    if (isPosUpdate) {\r\n      this.entities.updateEntityPosition(e, false, overrides)\r\n    } else {\r\n      this.entities.update(e, overrides)\r\n    }\r\n  }\r\n\r\n  updatePlayerEntity (e: any) {\r\n    this.entities.handlePlayerEntity(e)\r\n  }\r\n\r\n  resetScene () {\r\n    this.scene.matrixAutoUpdate = false // for perf\r\n    this.scene.background = new THREE.Color(this.initOptions.config.sceneBackground)\r\n    this.scene.add(this.ambientLight)\r\n    this.directionalLight.position.set(1, 1, 0.5).normalize()\r\n    this.directionalLight.castShadow = true\r\n    this.scene.add(this.directionalLight)\r\n\r\n    const size = this.renderer.getSize(new THREE.Vector2())\r\n    this.camera = new THREE.PerspectiveCamera(75, size.x / size.y, 0.1, 1000)\r\n    this.cameraContainer = new THREE.Object3D()\r\n    this.cameraContainer.add(this.camera)\r\n    this.scene.add(this.cameraContainer)\r\n  }\r\n\r\n  override watchReactivePlayerState () {\r\n    super.watchReactivePlayerState()\r\n    this.onReactivePlayerStateUpdated('inWater', (value) => {\r\n      this.skyboxRenderer.updateWaterState(value, this.playerStateReactive.waterBreathing)\r\n    })\r\n    this.onReactivePlayerStateUpdated('waterBreathing', (value) => {\r\n      this.skyboxRenderer.updateWaterState(this.playerStateReactive.inWater, value)\r\n    })\r\n    this.onReactivePlayerStateUpdated('ambientLight', (value) => {\r\n      if (!value) return\r\n      this.ambientLight.intensity = value\r\n    })\r\n    this.onReactivePlayerStateUpdated('directionalLight', (value) => {\r\n      if (!value) return\r\n      this.directionalLight.intensity = value\r\n    })\r\n    this.onReactivePlayerStateUpdated('lookingAtBlock', (value) => {\r\n      this.cursorBlock.setHighlightCursorBlock(value ? new Vec3(value.x, value.y, value.z) : null, value?.shapes)\r\n    })\r\n    this.onReactivePlayerStateUpdated('diggingBlock', (value) => {\r\n      this.cursorBlock.updateBreakAnimation(value ? { x: value.x, y: value.y, z: value.z } : undefined, value?.stage ?? null, value?.mergedShape)\r\n    })\r\n    this.onReactivePlayerStateUpdated('perspective', (value) => {\r\n      // Update camera perspective when it changes\r\n      const vecPos = new Vec3(this.cameraObject.position.x, this.cameraObject.position.y, this.cameraObject.position.z)\r\n      this.updateCamera(vecPos, this.cameraShake.getBaseRotation().yaw, this.cameraShake.getBaseRotation().pitch)\r\n      // todo also update camera when block within camera was changed\r\n    })\r\n  }\r\n\r\n  override watchReactiveConfig () {\r\n    super.watchReactiveConfig()\r\n    this.onReactiveConfigUpdated('showChunkBorders', (value) => {\r\n      this.updateShowChunksBorder(value)\r\n    })\r\n    this.onReactiveConfigUpdated('defaultSkybox', (value) => {\r\n      this.skyboxRenderer.updateDefaultSkybox(value)\r\n    })\r\n  }\r\n\r\n  changeHandSwingingState (isAnimationPlaying: boolean, isLeft = false) {\r\n    const holdingBlock = isLeft ? this.holdingBlockLeft : this.holdingBlock\r\n    if (isAnimationPlaying) {\r\n      holdingBlock.startSwing()\r\n    } else {\r\n      holdingBlock.stopSwing()\r\n    }\r\n  }\r\n\r\n  async updateAssetsData (): Promise<void> {\r\n    const resources = this.resourcesManager.currentResources\r\n\r\n    const oldTexture = this.material.map\r\n    const oldItemsTexture = this.itemsTexture\r\n\r\n    const texture = loadThreeJsTextureFromBitmap(resources.blocksAtlasImage)\r\n    texture.needsUpdate = true\r\n    texture.flipY = false\r\n    this.material.map = texture\r\n\r\n    const itemsTexture = loadThreeJsTextureFromBitmap(resources.itemsAtlasImage)\r\n    itemsTexture.needsUpdate = true\r\n    itemsTexture.flipY = false\r\n    this.itemsTexture = itemsTexture\r\n\r\n    if (oldTexture) {\r\n      oldTexture.dispose()\r\n    }\r\n    if (oldItemsTexture) {\r\n      oldItemsTexture.dispose()\r\n    }\r\n\r\n    await super.updateAssetsData()\r\n    this.onAllTexturesLoaded()\r\n    if (Object.keys(this.loadedChunks).length > 0) {\r\n      console.log('rerendering chunks because of texture update')\r\n      this.rerenderAllChunks()\r\n    }\r\n  }\r\n\r\n  onAllTexturesLoaded () {\r\n    this.holdingBlock.ready = true\r\n    this.holdingBlock.updateItem()\r\n    this.holdingBlockLeft.ready = true\r\n    this.holdingBlockLeft.updateItem()\r\n  }\r\n\r\n  changeBackgroundColor (color: [number, number, number]): void {\r\n    this.scene.background = new THREE.Color(color[0], color[1], color[2])\r\n  }\r\n\r\n  timeUpdated (newTime: number): void {\r\n    const nightTime = 13_500\r\n    const morningStart = 23_000\r\n    const displayStars = newTime > nightTime && newTime < morningStart\r\n    if (displayStars) {\r\n      this.starField.addToScene()\r\n    } else {\r\n      this.starField.remove()\r\n    }\r\n\r\n    this.skyboxRenderer.updateTime(newTime)\r\n  }\r\n\r\n  biomeUpdated (biome: Biome): void {\r\n    if (biome?.temperature !== undefined) {\r\n      this.skyboxRenderer.updateTemperature(biome.temperature)\r\n    }\r\n  }\r\n\r\n  biomeReset (): void {\r\n    // Reset to default temperature when biome is unknown\r\n    this.skyboxRenderer.updateTemperature(DEFAULT_TEMPERATURE)\r\n  }\r\n\r\n  getItemRenderData (item: Record<string, any>, specificProps: ItemSpecificContextProperties) {\r\n    return getItemUv(item, specificProps, this.resourcesManager, this.playerStateReactive)\r\n  }\r\n\r\n  async demoModel () {\r\n    //@ts-expect-error\r\n    const pos = cursorBlockRel(0, 1, 0).position\r\n\r\n    const mesh = (await getMyHand())!\r\n    // mesh.rotation.y = THREE.MathUtils.degToRad(90)\r\n    setBlockPosition(mesh, pos)\r\n    const helper = new THREE.BoxHelper(mesh, 0xff_ff_00)\r\n    mesh.add(helper)\r\n    this.scene.add(mesh)\r\n  }\r\n\r\n  demoItem () {\r\n    //@ts-expect-error\r\n    const pos = cursorBlockRel(0, 1, 0).position\r\n    const { mesh } = this.entities.getItemMesh({\r\n      itemId: 541,\r\n    }, {})!\r\n    mesh.position.set(pos.x + 0.5, pos.y + 0.5, pos.z + 0.5)\r\n    // mesh.scale.set(0.5, 0.5, 0.5)\r\n    const helper = new THREE.BoxHelper(mesh, 0xff_ff_00)\r\n    mesh.add(helper)\r\n    this.scene.add(mesh)\r\n  }\r\n\r\n  debugOverlayAdded = false\r\n  addDebugOverlay () {\r\n    if (this.debugOverlayAdded) return\r\n    this.debugOverlayAdded = true\r\n    const pane = addNewStat('debug-overlay')\r\n    setInterval(() => {\r\n      pane.setVisibility(this.displayAdvancedStats)\r\n      if (this.displayAdvancedStats) {\r\n        const formatBigNumber = (num: number) => {\r\n          return new Intl.NumberFormat('en-US', {}).format(num)\r\n        }\r\n        let text = ''\r\n        text += `C: ${formatBigNumber(this.renderer.info.render.calls)} `\r\n        text += `TR: ${formatBigNumber(this.renderer.info.render.triangles)} `\r\n        text += `TE: ${formatBigNumber(this.renderer.info.memory.textures)} `\r\n        text += `F: ${formatBigNumber(this.tilesRendered)} `\r\n        text += `B: ${formatBigNumber(this.blocksRendered)}`\r\n        pane.updateText(text)\r\n        this.backendInfoReport = text\r\n      }\r\n    }, 200)\r\n  }\r\n\r\n  /**\r\n   * Optionally update data that are depedendent on the viewer position\r\n   */\r\n  updatePosDataChunk (key: string) {\r\n    const [x, y, z] = key.split(',').map(x => Math.floor(+x / 16))\r\n    // sum of distances: x + y + z\r\n    const chunkDistance = Math.abs(x - this.cameraSectionPos.x) + Math.abs(y - this.cameraSectionPos.y) + Math.abs(z - this.cameraSectionPos.z)\r\n    const section = this.sectionObjects[key].children.find(child => child.name === 'mesh')!\r\n    section.renderOrder = 500 - chunkDistance\r\n  }\r\n\r\n  override updateViewerPosition (pos: Vec3): void {\r\n    this.viewerChunkPosition = pos\r\n  }\r\n\r\n  cameraSectionPositionUpdate () {\r\n    // eslint-disable-next-line guard-for-in\r\n    for (const key in this.sectionObjects) {\r\n      const value = this.sectionObjects[key]\r\n      if (!value) continue\r\n      this.updatePosDataChunk(key)\r\n    }\r\n  }\r\n\r\n  getDir (current: number, origin: number) {\r\n    if (current === origin) return 0\r\n    return current < origin ? 1 : -1\r\n  }\r\n\r\n  finishChunk (chunkKey: string) {\r\n    for (const sectionKey of this.waitingChunksToDisplay[chunkKey] ?? []) {\r\n      this.sectionObjects[sectionKey].visible = true\r\n    }\r\n    delete this.waitingChunksToDisplay[chunkKey]\r\n  }\r\n\r\n  // debugRecomputedDeletedObjects = 0\r\n  handleWorkerMessage (data: { geometry: MesherGeometryOutput, key, type }): void {\r\n    if (data.type !== 'geometry') return\r\n    let object: THREE.Object3D = this.sectionObjects[data.key]\r\n    if (object) {\r\n      // Cleanup banner textures before disposing\r\n      object.traverse((child) => {\r\n        if ((child as any).bannerTexture) {\r\n          releaseBannerTexture((child as any).bannerTexture)\r\n        }\r\n      })\r\n      this.scene.remove(object)\r\n      disposeObject(object)\r\n      delete this.sectionObjects[data.key]\r\n    }\r\n\r\n    const chunkCoords = data.key.split(',')\r\n    if (!this.loadedChunks[chunkCoords[0] + ',' + chunkCoords[2]] || !data.geometry.positions.length || !this.active) return\r\n\r\n    // if (object) {\r\n    //   this.debugRecomputedDeletedObjects++\r\n    // }\r\n\r\n    const geometry = new THREE.BufferGeometry()\r\n    geometry.setAttribute('position', new THREE.BufferAttribute(data.geometry.positions, 3))\r\n    geometry.setAttribute('normal', new THREE.BufferAttribute(data.geometry.normals, 3))\r\n    geometry.setAttribute('color', new THREE.BufferAttribute(data.geometry.colors, 3))\r\n    geometry.setAttribute('uv', new THREE.BufferAttribute(data.geometry.uvs, 2))\r\n    geometry.index = new THREE.BufferAttribute(data.geometry.indices as Uint32Array | Uint16Array, 1)\r\n\r\n    const mesh = new THREE.Mesh(geometry, this.material)\r\n    mesh.position.set(data.geometry.sx, data.geometry.sy, data.geometry.sz)\r\n    mesh.name = 'mesh'\r\n    object = new THREE.Group()\r\n    object.add(mesh)\r\n    // mesh with static dimensions: 16x16x16\r\n    const staticChunkMesh = new THREE.Mesh(new THREE.BoxGeometry(16, 16, 16), new THREE.MeshBasicMaterial({ color: 0x00_00_00, transparent: true, opacity: 0 }))\r\n    staticChunkMesh.position.set(data.geometry.sx, data.geometry.sy, data.geometry.sz)\r\n    const boxHelper = new THREE.BoxHelper(staticChunkMesh, 0xff_ff_00)\r\n    boxHelper.name = 'helper'\r\n    object.add(boxHelper)\r\n    object.name = 'chunk';\r\n    (object as any).tilesCount = data.geometry.positions.length / 3 / 4;\r\n    (object as any).blocksCount = data.geometry.blocksCount\r\n    if (!this.displayOptions.inWorldRenderingConfig.showChunkBorders) {\r\n      boxHelper.visible = false\r\n    }\r\n    // should not compute it once\r\n    if (Object.keys(data.geometry.signs).length) {\r\n      for (const [posKey, { isWall, isHanging, rotation }] of Object.entries(data.geometry.signs)) {\r\n        const signBlockEntity = this.blockEntities[posKey]\r\n        if (!signBlockEntity) continue\r\n        const [x, y, z] = posKey.split(',')\r\n        const sign = this.renderSign(new Vec3(+x, +y, +z), rotation, isWall, isHanging, nbt.simplify(signBlockEntity))\r\n        if (!sign) continue\r\n        object.add(sign)\r\n      }\r\n    }\r\n    if (Object.keys(data.geometry.heads).length) {\r\n      for (const [posKey, { isWall, rotation }] of Object.entries(data.geometry.heads)) {\r\n        const headBlockEntity = this.blockEntities[posKey]\r\n        if (!headBlockEntity) continue\r\n        const [x, y, z] = posKey.split(',')\r\n        const head = this.renderHead(new Vec3(+x, +y, +z), rotation, isWall, nbt.simplify(headBlockEntity))\r\n        if (!head) continue\r\n        object.add(head)\r\n      }\r\n    }\r\n    if (Object.keys(data.geometry.banners).length) {\r\n      for (const [posKey, { isWall, rotation, blockName }] of Object.entries(data.geometry.banners)) {\r\n        const bannerBlockEntity = this.blockEntities[posKey]\r\n        if (!bannerBlockEntity) continue\r\n        const [x, y, z] = posKey.split(',')\r\n        const bannerTexture = getBannerTexture(this, blockName, nbt.simplify(bannerBlockEntity))\r\n        if (!bannerTexture) continue\r\n        const banner = createBannerMesh(new Vec3(+x, +y, +z), rotation, isWall, bannerTexture)\r\n        object.add(banner)\r\n      }\r\n    }\r\n    this.sectionObjects[data.key] = object\r\n    if (this.displayOptions.inWorldRenderingConfig._renderByChunks) {\r\n      object.visible = false\r\n      const chunkKey = `${chunkCoords[0]},${chunkCoords[2]}`\r\n      this.waitingChunksToDisplay[chunkKey] ??= []\r\n      this.waitingChunksToDisplay[chunkKey].push(data.key)\r\n      if (this.finishedChunks[chunkKey]) {\r\n        // todo it might happen even when it was not an update\r\n        this.finishChunk(chunkKey)\r\n      }\r\n    }\r\n\r\n    this.updatePosDataChunk(data.key)\r\n    object.matrixAutoUpdate = false\r\n    mesh.onAfterRender = (renderer, scene, camera, geometry, material, group) => {\r\n      // mesh.matrixAutoUpdate = false\r\n    }\r\n\r\n    this.scene.add(object)\r\n  }\r\n\r\n  getSignTexture (position: Vec3, blockEntity, isHanging, backSide = false) {\r\n    const chunk = chunkPos(position)\r\n    let textures = this.chunkTextures.get(`${chunk[0]},${chunk[1]}`)\r\n    if (!textures) {\r\n      textures = {}\r\n      this.chunkTextures.set(`${chunk[0]},${chunk[1]}`, textures)\r\n    }\r\n    const texturekey = `${position.x},${position.y},${position.z}`\r\n    // todo investigate bug and remove this so don't need to clean in section dirty\r\n    if (textures[texturekey]) return textures[texturekey]\r\n\r\n    const PrismarineChat = PrismarineChatLoader(this.version)\r\n    const canvas = renderSign(blockEntity, isHanging, PrismarineChat)\r\n    if (!canvas) return\r\n    const tex = new THREE.Texture(canvas)\r\n    tex.magFilter = THREE.NearestFilter\r\n    tex.minFilter = THREE.NearestFilter\r\n    tex.needsUpdate = true\r\n    textures[texturekey] = tex\r\n    return tex\r\n  }\r\n\r\n  getCameraPosition () {\r\n    const worldPos = new THREE.Vector3()\r\n    this.camera.getWorldPosition(worldPos)\r\n    return worldPos\r\n  }\r\n\r\n  getSectionCameraPosition () {\r\n    const pos = this.getCameraPosition()\r\n    return new Vec3(\r\n      Math.floor(pos.x / 16),\r\n      Math.floor(pos.y / 16),\r\n      Math.floor(pos.z / 16)\r\n    )\r\n  }\r\n\r\n  updateCameraSectionPos () {\r\n    const newSectionPos = this.getSectionCameraPosition()\r\n    if (!this.cameraSectionPos.equals(newSectionPos)) {\r\n      this.cameraSectionPos = newSectionPos\r\n      this.cameraSectionPositionUpdate()\r\n    }\r\n  }\r\n\r\n  setFirstPersonCamera (pos: Vec3 | null, yaw: number, pitch: number) {\r\n    const yOffset = this.playerStateReactive.eyeHeight\r\n\r\n    this.updateCamera(pos?.offset(0, yOffset, 0) ?? null, yaw, pitch)\r\n    this.media.tryIntersectMedia()\r\n    this.updateCameraSectionPos()\r\n  }\r\n\r\n  getThirdPersonCamera (pos: THREE.Vector3 | null, yaw: number, pitch: number) {\r\n    pos ??= this.cameraObject.position\r\n\r\n    // Calculate camera offset based on perspective\r\n    const isBack = this.playerStateReactive.perspective === 'third_person_back'\r\n    const distance = 4 // Default third person distance\r\n\r\n    // Calculate direction vector using proper world orientation\r\n    // We need to get the camera's current look direction and use that for positioning\r\n\r\n    // Create a direction vector that represents where the camera is looking\r\n    // This matches the Three.js camera coordinate system\r\n    const direction = new THREE.Vector3(0, 0, -1) // Forward direction in camera space\r\n\r\n    // Apply the same rotation that's applied to the camera container\r\n    const pitchQuat = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1, 0, 0), pitch)\r\n    const yawQuat = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 1, 0), yaw)\r\n    const finalQuat = new THREE.Quaternion().multiplyQuaternions(yawQuat, pitchQuat)\r\n\r\n    // Transform the direction vector by the camera's rotation\r\n    direction.applyQuaternion(finalQuat)\r\n\r\n    // For back view, we want the camera behind the player (opposite to view direction)\r\n    // For front view, we want the camera in front of the player (same as view direction)\r\n    if (isBack) {\r\n      direction.multiplyScalar(-1)\r\n    }\r\n\r\n    // Create debug visualization if advanced stats are enabled\r\n    if (this.DEBUG_RAYCAST) {\r\n      this.debugRaycast(pos, direction, distance)\r\n    }\r\n\r\n    // Perform raycast to avoid camera going through blocks\r\n    const raycaster = new THREE.Raycaster()\r\n    raycaster.set(pos, direction)\r\n    raycaster.far = distance // Limit raycast distance\r\n\r\n    // Filter to only nearby chunks for performance\r\n    const nearbyChunks = Object.values(this.sectionObjects)\r\n      .filter(obj => obj.name === 'chunk' && obj.visible)\r\n      .filter(obj => {\r\n        // Get the mesh child which has the actual geometry\r\n        const mesh = obj.children.find(child => child.name === 'mesh')\r\n        if (!mesh) return false\r\n\r\n        // Check distance from player position to chunk\r\n        const chunkWorldPos = new THREE.Vector3()\r\n        mesh.getWorldPosition(chunkWorldPos)\r\n        const distance = pos.distanceTo(chunkWorldPos)\r\n        return distance < 80 // Only check chunks within 80 blocks\r\n      })\r\n\r\n    // Get all mesh children for raycasting\r\n    const meshes: THREE.Object3D[] = []\r\n    for (const chunk of nearbyChunks) {\r\n      const mesh = chunk.children.find(child => child.name === 'mesh')\r\n      if (mesh) meshes.push(mesh)\r\n    }\r\n\r\n    const intersects = raycaster.intersectObjects(meshes, false)\r\n\r\n    let finalDistance = distance\r\n    if (intersects.length > 0) {\r\n      // Use intersection distance minus a small offset to prevent clipping\r\n      finalDistance = Math.max(0.5, intersects[0].distance - 0.2)\r\n    }\r\n\r\n    const finalPos = new Vec3(\r\n      pos.x + direction.x * finalDistance,\r\n      pos.y + direction.y * finalDistance,\r\n      pos.z + direction.z * finalDistance\r\n    )\r\n\r\n    return finalPos\r\n  }\r\n\r\n  private debugRaycastHelper?: THREE.ArrowHelper\r\n  private debugHitPoint?: THREE.Mesh\r\n\r\n  private debugRaycast (pos: THREE.Vector3, direction: THREE.Vector3, distance: number) {\r\n    // Remove existing debug objects\r\n    if (this.debugRaycastHelper) {\r\n      this.scene.remove(this.debugRaycastHelper)\r\n      this.debugRaycastHelper = undefined\r\n    }\r\n    if (this.debugHitPoint) {\r\n      this.scene.remove(this.debugHitPoint)\r\n      this.debugHitPoint = undefined\r\n    }\r\n\r\n    // Create raycast arrow\r\n    this.debugRaycastHelper = new THREE.ArrowHelper(\r\n      direction.clone().normalize(),\r\n      pos,\r\n      distance,\r\n      0xff_00_00, // Red color\r\n      distance * 0.1,\r\n      distance * 0.05\r\n    )\r\n    this.scene.add(this.debugRaycastHelper)\r\n\r\n    // Create hit point indicator\r\n    const hitGeometry = new THREE.SphereGeometry(0.2, 8, 8)\r\n    const hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00_ff_00 })\r\n    this.debugHitPoint = new THREE.Mesh(hitGeometry, hitMaterial)\r\n    this.debugHitPoint.position.copy(pos).add(direction.clone().multiplyScalar(distance))\r\n    this.scene.add(this.debugHitPoint)\r\n  }\r\n\r\n  prevFramePerspective = null as string | null\r\n\r\n  updateCamera (pos: Vec3 | null, yaw: number, pitch: number): void {\r\n    // if (this.freeFlyMode) {\r\n    //   pos = this.freeFlyState.position\r\n    //   pitch = this.freeFlyState.pitch\r\n    //   yaw = this.freeFlyState.yaw\r\n    // }\r\n\r\n    if (pos) {\r\n      if (this.renderer.xr.isPresenting) {\r\n        pos.y -= this.camera.position.y // Fix Y position of camera in world\r\n      }\r\n\r\n      this.currentPosTween?.stop()\r\n      // Use instant camera updates (0 delay) in playground mode when camera controls are enabled\r\n      const tweenDelay = this.displayOptions.inWorldRenderingConfig.instantCameraUpdate\r\n        ? 0\r\n        : (this.playerStateUtils.isSpectatingEntity() ? 150 : 50)\r\n      this.currentPosTween = new tweenJs.Tween(this.cameraObject.position).to({ x: pos.x, y: pos.y, z: pos.z }, tweenDelay).start()\r\n      // this.freeFlyState.position = pos\r\n    }\r\n\r\n    if (this.playerStateUtils.isSpectatingEntity()) {\r\n      const rotation = this.cameraShake.getBaseRotation()\r\n      // wrap in the correct direction\r\n      let yawOffset = 0\r\n      const halfPi = Math.PI / 2\r\n      if (rotation.yaw < halfPi && yaw > Math.PI + halfPi) {\r\n        yawOffset = -Math.PI * 2\r\n      } else if (yaw < halfPi && rotation.yaw > Math.PI + halfPi) {\r\n        yawOffset = Math.PI * 2\r\n      }\r\n      this.currentRotTween?.stop()\r\n      this.currentRotTween = new tweenJs.Tween(rotation).to({ pitch, yaw: yaw + yawOffset }, 100)\r\n        .onUpdate(params => this.cameraShake.setBaseRotation(params.pitch, params.yaw - yawOffset)).start()\r\n    } else {\r\n      this.currentRotTween?.stop()\r\n      this.cameraShake.setBaseRotation(pitch, yaw)\r\n\r\n      const { perspective } = this.playerStateReactive\r\n      if (perspective === 'third_person_back' || perspective === 'third_person_front') {\r\n        // Use getThirdPersonCamera for proper raycasting with max distance of 4\r\n        const currentCameraPos = this.cameraObject.position\r\n        const thirdPersonPos = this.getThirdPersonCamera(\r\n          new THREE.Vector3(currentCameraPos.x, currentCameraPos.y, currentCameraPos.z),\r\n          yaw,\r\n          pitch\r\n        )\r\n\r\n        const distance = currentCameraPos.distanceTo(new THREE.Vector3(thirdPersonPos.x, thirdPersonPos.y, thirdPersonPos.z))\r\n        // Apply Z offset based on perspective and calculated distance\r\n        const zOffset = perspective === 'third_person_back' ? distance : -distance\r\n        this.camera.position.set(0, 0, zOffset)\r\n\r\n        if (perspective === 'third_person_front') {\r\n          // Flip camera view 180 degrees around Y axis for front view\r\n          this.camera.rotation.set(0, Math.PI, 0)\r\n        } else {\r\n          this.camera.rotation.set(0, 0, 0)\r\n        }\r\n      } else {\r\n        this.camera.position.set(0, 0, 0)\r\n        this.camera.rotation.set(0, 0, 0)\r\n\r\n        // remove any debug raycasting\r\n        if (this.debugRaycastHelper) {\r\n          this.scene.remove(this.debugRaycastHelper)\r\n          this.debugRaycastHelper = undefined\r\n        }\r\n        if (this.debugHitPoint) {\r\n          this.scene.remove(this.debugHitPoint)\r\n          this.debugHitPoint = undefined\r\n        }\r\n      }\r\n    }\r\n\r\n    this.updateCameraSectionPos()\r\n  }\r\n\r\n  debugChunksVisibilityOverride () {\r\n    const { chunksRenderAboveOverride, chunksRenderBelowOverride, chunksRenderDistanceOverride, chunksRenderAboveEnabled, chunksRenderBelowEnabled, chunksRenderDistanceEnabled } = this.reactiveDebugParams\r\n\r\n    const baseY = this.cameraSectionPos.y * 16\r\n\r\n    if (\r\n      this.displayOptions.inWorldRenderingConfig.enableDebugOverlay &&\r\n      chunksRenderAboveOverride !== undefined ||\r\n      chunksRenderBelowOverride !== undefined ||\r\n      chunksRenderDistanceOverride !== undefined\r\n    ) {\r\n      for (const [key, object] of Object.entries(this.sectionObjects)) {\r\n        const [x, y, z] = key.split(',').map(Number)\r\n        const isVisible =\r\n          // eslint-disable-next-line no-constant-binary-expression, sonarjs/no-redundant-boolean\r\n          (chunksRenderAboveEnabled && chunksRenderAboveOverride !== undefined) ? y <= (baseY + chunksRenderAboveOverride) : true &&\r\n          // eslint-disable-next-line @stylistic/indent-binary-ops, no-constant-binary-expression, sonarjs/no-redundant-boolean\r\n          (chunksRenderBelowEnabled && chunksRenderBelowOverride !== undefined) ? y >= (baseY - chunksRenderBelowOverride) : true &&\r\n          // eslint-disable-next-line @stylistic/indent-binary-ops\r\n          (chunksRenderDistanceEnabled && chunksRenderDistanceOverride !== undefined) ? Math.abs(y - baseY) <= chunksRenderDistanceOverride : true\r\n\r\n        object.visible = isVisible\r\n      }\r\n    } else {\r\n      for (const object of Object.values(this.sectionObjects)) {\r\n        object.visible = true\r\n      }\r\n    }\r\n  }\r\n\r\n  render (sizeChanged = false) {\r\n    if (this.reactiveDebugParams.stopRendering) return\r\n    this.debugChunksVisibilityOverride()\r\n    const start = performance.now()\r\n    this.lastRendered = performance.now()\r\n    this.cursorBlock.render()\r\n    this.updateSectionOffsets()\r\n\r\n    // Update skybox position to follow camera\r\n    const cameraPos = this.getCameraPosition()\r\n    this.skyboxRenderer.update(cameraPos, this.viewDistance)\r\n\r\n    const sizeOrFovChanged = sizeChanged || this.displayOptions.inWorldRenderingConfig.fov !== this.camera.fov\r\n    if (sizeOrFovChanged) {\r\n      const size = this.renderer.getSize(new THREE.Vector2())\r\n      this.camera.aspect = size.width / size.height\r\n      this.camera.fov = this.displayOptions.inWorldRenderingConfig.fov\r\n      this.camera.updateProjectionMatrix()\r\n    }\r\n\r\n    if (!this.reactiveDebugParams.disableEntities) {\r\n      this.entities.render()\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/non-nullable-type-assertion-style\r\n    const cam = this.cameraGroupVr instanceof THREE.Group ? this.cameraGroupVr.children.find(child => child instanceof THREE.PerspectiveCamera) as THREE.PerspectiveCamera : this.camera\r\n    this.renderer.render(this.scene, cam)\r\n\r\n    if (\r\n      this.displayOptions.inWorldRenderingConfig.showHand &&\r\n      this.playerStateReactive.gameMode !== 'spectator' &&\r\n      this.playerStateReactive.perspective === 'first_person' &&\r\n      // !this.freeFlyMode &&\r\n      !this.renderer.xr.isPresenting\r\n    ) {\r\n      this.holdingBlock.render(this.camera, this.renderer, this.ambientLight, this.directionalLight)\r\n      this.holdingBlockLeft.render(this.camera, this.renderer, this.ambientLight, this.directionalLight)\r\n    }\r\n\r\n    for (const fountain of this.fountains) {\r\n      if (this.sectionObjects[fountain.sectionId] && !this.sectionObjects[fountain.sectionId].foutain) {\r\n        fountain.createParticles(this.sectionObjects[fountain.sectionId])\r\n        this.sectionObjects[fountain.sectionId].foutain = true\r\n      }\r\n      fountain.render()\r\n    }\r\n\r\n    this.waypoints.render()\r\n    this.fireworks.update()\r\n\r\n    for (const onRender of this.onRender) {\r\n      onRender()\r\n    }\r\n    const end = performance.now()\r\n    const totalTime = end - start\r\n    this.renderTimeAvgCount++\r\n    this.renderTimeAvg = ((this.renderTimeAvg * (this.renderTimeAvgCount - 1)) + totalTime) / this.renderTimeAvgCount\r\n    this.renderTimeMax = Math.max(this.renderTimeMax, totalTime)\r\n    this.currentRenderedFrames++\r\n  }\r\n\r\n  renderHead (position: Vec3, rotation: number, isWall: boolean, blockEntity) {\r\n    let textureData: string\r\n    if (blockEntity.SkullOwner) {\r\n      textureData = blockEntity.SkullOwner.Properties?.textures?.[0]?.Value\r\n    } else {\r\n      textureData = blockEntity.profile?.properties?.find(p => p.name === 'textures')?.value\r\n    }\r\n    if (!textureData) return\r\n\r\n    try {\r\n      const decodedData = JSON.parse(Buffer.from(textureData, 'base64').toString())\r\n      let skinUrl = decodedData.textures?.SKIN?.url\r\n      const { skinTexturesProxy } = this.worldRendererConfig\r\n      if (skinTexturesProxy) {\r\n        skinUrl = skinUrl?.replace('http://textures.minecraft.net/', skinTexturesProxy)\r\n          .replace('https://textures.minecraft.net/', skinTexturesProxy)\r\n      }\r\n\r\n      const mesh = getMesh(this, skinUrl, armorModel.head)\r\n      const group = new THREE.Group()\r\n      if (isWall) {\r\n        mesh.position.set(0, 0.3125, 0.3125)\r\n      }\r\n      // move head model down as armor have a different offset than blocks\r\n      mesh.position.y -= 23 / 16\r\n      group.add(mesh)\r\n      group.position.set(position.x + 0.5, position.y + 0.045, position.z + 0.5)\r\n      group.rotation.set(\r\n        0,\r\n        -THREE.MathUtils.degToRad(rotation * (isWall ? 90 : 45 / 2)),\r\n        0\r\n      )\r\n      group.scale.set(0.8, 0.8, 0.8)\r\n      return group\r\n    } catch (err) {\r\n      console.error('Error decoding player texture:', err)\r\n    }\r\n  }\r\n\r\n  renderSign (position: Vec3, rotation: number, isWall: boolean, isHanging: boolean, blockEntity) {\r\n    const tex = this.getSignTexture(position, blockEntity, isHanging)\r\n\r\n    if (!tex) return\r\n\r\n    // todo implement\r\n    // const key = JSON.stringify({ position, rotation, isWall })\r\n    // if (this.signsCache.has(key)) {\r\n    //   console.log('cached', key)\r\n    // } else {\r\n    //   this.signsCache.set(key, tex)\r\n    // }\r\n\r\n    const mesh = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), new THREE.MeshBasicMaterial({ map: tex, transparent: true }))\r\n    mesh.renderOrder = 999\r\n\r\n    const lineHeight = 7 / 16\r\n    const scaleFactor = isHanging ? 1.3 : 1\r\n    mesh.scale.set(1 * scaleFactor, lineHeight * scaleFactor, 1 * scaleFactor)\r\n\r\n    const thickness = (isHanging ? 2 : 1.5) / 16\r\n    const wallSpacing = 0.25 / 16\r\n    if (isWall && !isHanging) {\r\n      mesh.position.set(0, 0, -0.5 + thickness + wallSpacing + 0.0001)\r\n    } else {\r\n      mesh.position.set(0, 0, thickness / 2 + 0.0001)\r\n    }\r\n\r\n    const group = new THREE.Group()\r\n    group.rotation.set(\r\n      0,\r\n      -THREE.MathUtils.degToRad(rotation * (isWall ? 90 : 45 / 2)),\r\n      0\r\n    )\r\n    group.add(mesh)\r\n    const height = (isHanging ? 10 : 8) / 16\r\n    const heightOffset = (isHanging ? 0 : isWall ? 4.333 : 9.333) / 16\r\n    const textPosition = height / 2 + heightOffset\r\n    group.position.set(position.x + 0.5, position.y + textPosition, position.z + 0.5)\r\n    return group\r\n  }\r\n\r\n  lightUpdate (chunkX: number, chunkZ: number) {\r\n    // set all sections in the chunk dirty\r\n    for (let y = this.worldSizeParams.minY; y < this.worldSizeParams.worldHeight; y += 16) {\r\n      this.setSectionDirty(new Vec3(chunkX, y, chunkZ))\r\n    }\r\n  }\r\n\r\n  rerenderAllChunks () { // todo not clear what to do with loading chunks\r\n    for (const key of Object.keys(this.sectionObjects)) {\r\n      const [x, y, z] = key.split(',').map(Number)\r\n      this.setSectionDirty(new Vec3(x, y, z))\r\n    }\r\n  }\r\n\r\n  updateShowChunksBorder (value: boolean) {\r\n    for (const object of Object.values(this.sectionObjects)) {\r\n      for (const child of object.children) {\r\n        if (child.name === 'helper') {\r\n          child.visible = value\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  resetWorld () {\r\n    super.resetWorld()\r\n\r\n    for (const mesh of Object.values(this.sectionObjects)) {\r\n      this.scene.remove(mesh)\r\n    }\r\n\r\n    // Clean up debug objects\r\n    if (this.debugRaycastHelper) {\r\n      this.scene.remove(this.debugRaycastHelper)\r\n      this.debugRaycastHelper = undefined\r\n    }\r\n    if (this.debugHitPoint) {\r\n      this.scene.remove(this.debugHitPoint)\r\n      this.debugHitPoint = undefined\r\n    }\r\n  }\r\n\r\n  getLoadedChunksRelative (pos: Vec3, includeY = false) {\r\n    const [currentX, currentY, currentZ] = sectionPos(pos)\r\n    return Object.fromEntries(Object.entries(this.sectionObjects).map(([key, o]) => {\r\n      const [xRaw, yRaw, zRaw] = key.split(',').map(Number)\r\n      const [x, y, z] = sectionPos({ x: xRaw, y: yRaw, z: zRaw })\r\n      const setKey = includeY ? `${x - currentX},${y - currentY},${z - currentZ}` : `${x - currentX},${z - currentZ}`\r\n      return [setKey, o]\r\n    }))\r\n  }\r\n\r\n  cleanChunkTextures (x, z) {\r\n    const textures = this.chunkTextures.get(`${Math.floor(x / 16)},${Math.floor(z / 16)}`) ?? {}\r\n    for (const key of Object.keys(textures)) {\r\n      textures[key].dispose()\r\n      delete textures[key]\r\n    }\r\n  }\r\n\r\n  readdChunks () {\r\n    for (const key of Object.keys(this.sectionObjects)) {\r\n      this.scene.remove(this.sectionObjects[key])\r\n    }\r\n    setTimeout(() => {\r\n      for (const key of Object.keys(this.sectionObjects)) {\r\n        this.scene.add(this.sectionObjects[key])\r\n      }\r\n    }, 500)\r\n  }\r\n\r\n  disableUpdates (children = this.scene.children) {\r\n    for (const child of children) {\r\n      child.matrixWorldNeedsUpdate = false\r\n      this.disableUpdates(child.children ?? [])\r\n    }\r\n  }\r\n\r\n  removeColumn (x, z) {\r\n    super.removeColumn(x, z)\r\n\r\n    this.cleanChunkTextures(x, z)\r\n    for (let y = this.worldSizeParams.minY; y < this.worldSizeParams.worldHeight; y += 16) {\r\n      this.setSectionDirty(new Vec3(x, y, z), false)\r\n      const key = `${x},${y},${z}`\r\n      const mesh = this.sectionObjects[key]\r\n      if (mesh) {\r\n        // Cleanup banner textures before disposing\r\n        mesh.traverse((child) => {\r\n          if ((child as any).bannerTexture) {\r\n            releaseBannerTexture((child as any).bannerTexture)\r\n          }\r\n        })\r\n        this.scene.remove(mesh)\r\n        disposeObject(mesh)\r\n      }\r\n      delete this.sectionObjects[key]\r\n    }\r\n  }\r\n\r\n  setSectionDirty (...args: Parameters<WorldRendererCommon['setSectionDirty']>) {\r\n    const [pos] = args\r\n    this.cleanChunkTextures(pos.x, pos.z) // todo don't do this!\r\n    super.setSectionDirty(...args)\r\n  }\r\n\r\n  static getRendererInfo (renderer: THREE.WebGLRenderer) {\r\n    try {\r\n      const gl = renderer.getContext()\r\n      return `${gl.getParameter(gl.getExtension('WEBGL_debug_renderer_info')!.UNMASKED_RENDERER_WEBGL)}`\r\n    } catch (err) {\r\n      console.warn('Failed to get renderer info', err)\r\n    }\r\n  }\r\n\r\n  worldStop () {\r\n    this.media.onWorldStop()\r\n  }\r\n\r\n  destroy (): void {\r\n    super.destroy()\r\n    this.skyboxRenderer.dispose()\r\n    this.fireworks.dispose()\r\n  }\r\n\r\n  shouldObjectVisible (object: THREE.Object3D) {\r\n    // Get chunk coordinates\r\n    const chunkX = Math.floor(object.position.x / 16) * 16\r\n    const chunkZ = Math.floor(object.position.z / 16) * 16\r\n    const sectionY = Math.floor(object.position.y / 16) * 16\r\n\r\n    const chunkKey = `${chunkX},${chunkZ}`\r\n    const sectionKey = `${chunkX},${sectionY},${chunkZ}`\r\n\r\n    return !!this.finishedChunks[chunkKey] || !!this.sectionObjects[sectionKey]\r\n  }\r\n\r\n  updateSectionOffsets () {\r\n    const currentTime = performance.now()\r\n    for (const [key, anim] of Object.entries(this.sectionsOffsetsAnimations)) {\r\n      const timeDelta = (currentTime - anim.time) / 1000 // Convert to seconds\r\n      anim.time = currentTime\r\n\r\n      // Update offsets based on speed and time delta\r\n      anim.currentOffsetX += anim.speedX * timeDelta\r\n      anim.currentOffsetY += anim.speedY * timeDelta\r\n      anim.currentOffsetZ += anim.speedZ * timeDelta\r\n\r\n      // Apply limits if they exist\r\n      if (anim.limitX !== undefined) {\r\n        if (anim.speedX > 0) {\r\n          anim.currentOffsetX = Math.min(anim.currentOffsetX, anim.limitX)\r\n        } else {\r\n          anim.currentOffsetX = Math.max(anim.currentOffsetX, anim.limitX)\r\n        }\r\n      }\r\n      if (anim.limitY !== undefined) {\r\n        if (anim.speedY > 0) {\r\n          anim.currentOffsetY = Math.min(anim.currentOffsetY, anim.limitY)\r\n        } else {\r\n          anim.currentOffsetY = Math.max(anim.currentOffsetY, anim.limitY)\r\n        }\r\n      }\r\n      if (anim.limitZ !== undefined) {\r\n        if (anim.speedZ > 0) {\r\n          anim.currentOffsetZ = Math.min(anim.currentOffsetZ, anim.limitZ)\r\n        } else {\r\n          anim.currentOffsetZ = Math.max(anim.currentOffsetZ, anim.limitZ)\r\n        }\r\n      }\r\n\r\n      // Apply the offset to the section object\r\n      const section = this.sectionObjects[key]\r\n      if (section) {\r\n        section.position.set(\r\n          anim.currentOffsetX,\r\n          anim.currentOffsetY,\r\n          anim.currentOffsetZ\r\n        )\r\n        section.updateMatrix()\r\n      }\r\n    }\r\n  }\r\n\r\n  reloadWorld () {\r\n    this.entities.reloadEntities()\r\n  }\r\n}\r\n\r\nclass StarField {\r\n  points?: THREE.Points\r\n  private _enabled = true\r\n  get enabled () {\r\n    return this._enabled\r\n  }\r\n\r\n  set enabled (value) {\r\n    this._enabled = value\r\n    if (this.points) {\r\n      this.points.visible = value\r\n    }\r\n  }\r\n\r\n  constructor (\r\n    private readonly worldRenderer: WorldRendererThree\r\n  ) {\r\n    const clock = new THREE.Clock()\r\n    const speed = 0.2\r\n    this.worldRenderer.onRender.push(() => {\r\n      if (!this.points) return\r\n      this.points.position.copy(this.worldRenderer.getCameraPosition());\r\n      (this.points.material as StarfieldMaterial).uniforms.time.value = clock.getElapsedTime() * speed\r\n    })\r\n  }\r\n\r\n  addToScene () {\r\n    if (this.points || !this.enabled) return\r\n\r\n    const radius = 80\r\n    const depth = 50\r\n    const count = 7000\r\n    const factor = 7\r\n    const saturation = 10\r\n\r\n    const geometry = new THREE.BufferGeometry()\r\n\r\n    const genStar = r => new THREE.Vector3().setFromSpherical(new THREE.Spherical(r, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI))\r\n\r\n    const positions = [] as number[]\r\n    const colors = [] as number[]\r\n    const sizes = Array.from({ length: count }, () => (0.5 + 0.5 * Math.random()) * factor)\r\n    const color = new THREE.Color()\r\n    let r = radius + depth\r\n    const increment = depth / count\r\n    for (let i = 0; i < count; i++) {\r\n      r -= increment * Math.random()\r\n      positions.push(...genStar(r).toArray())\r\n      color.setHSL(i / count, saturation, 0.9)\r\n      colors.push(color.r, color.g, color.b)\r\n    }\r\n\r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3))\r\n    geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3))\r\n    geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1))\r\n\r\n    // Create a material\r\n    const material = new StarfieldMaterial()\r\n    material.blending = THREE.AdditiveBlending\r\n    material.depthTest = false\r\n    material.transparent = true\r\n\r\n    // Create points and add them to the scene\r\n    this.points = new THREE.Points(geometry, material)\r\n    this.worldRenderer.scene.add(this.points)\r\n\r\n    this.points.renderOrder = -1\r\n  }\r\n\r\n  remove () {\r\n    if (this.points) {\r\n      this.points.geometry.dispose();\r\n      (this.points.material as THREE.Material).dispose()\r\n      this.worldRenderer.scene.remove(this.points)\r\n\r\n      this.points = undefined\r\n    }\r\n  }\r\n}\r\n\r\nconst version = parseInt(THREE.REVISION.replaceAll(/\\D+/g, ''), 10)\r\nclass StarfieldMaterial extends THREE.ShaderMaterial {\r\n  constructor () {\r\n    super({\r\n      uniforms: { time: { value: 0 }, fade: { value: 1 } },\r\n      vertexShader: /* glsl */ `\r\n                uniform float time;\r\n                attribute float size;\r\n                varying vec3 vColor;\r\n                attribute vec3 color;\r\n                void main() {\r\n                vColor = color;\r\n                vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\r\n                gl_PointSize = 0.7 * size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));\r\n                gl_Position = projectionMatrix * mvPosition;\r\n            }`,\r\n      fragmentShader: /* glsl */ `\r\n                uniform sampler2D pointTexture;\r\n                uniform float fade;\r\n                varying vec3 vColor;\r\n                void main() {\r\n                float opacity = 1.0;\r\n                gl_FragColor = vec4(vColor, 1.0);\r\n\r\n                #include <tonemapping_fragment>\r\n                #include <${version >= 154 ? 'colorspace_fragment' : 'encodings_fragment'}>\r\n            }`,\r\n    })\r\n  }\r\n}\r\n","import type { AppConfig } from './appConfig'\r\nimport { miscUiState } from './globalState'\r\n\r\nconst qsParams = new URLSearchParams(window.location?.search ?? '')\r\n\r\nexport type AppQsParams = {\r\n  // AddServerOrConnect.tsx params\r\n  ip?: string\r\n  name?: string\r\n  version?: string\r\n  proxy?: string\r\n  username?: string\r\n  lockConnect?: string\r\n  autoConnect?: string\r\n  alwaysReconnect?: string\r\n  // googledrive.ts params\r\n  state?: string\r\n  // ServersListProvider.tsx params\r\n  serversList?: string\r\n  // Map and texture params\r\n  texturepack?: string\r\n  map?: string\r\n  mapDirBaseUrl?: string\r\n  mapDirGuess?: string\r\n  // Singleplayer params\r\n  singleplayer?: string\r\n  sp?: string\r\n  loadSave?: string\r\n  // Server params\r\n  reconnect?: string\r\n  server?: string\r\n  // Peer connection params\r\n  connectPeer?: string\r\n  peerVersion?: string\r\n  // UI params\r\n  modal?: string\r\n  viewerConnect?: string\r\n  playground?: string\r\n  // Map version param\r\n  mapVersion?: string\r\n  // Command params\r\n  command?: string\r\n  // Misc params\r\n  suggest_save?: string\r\n  noPacketsValidation?: string\r\n  testCrashApp?: string\r\n  onlyConnect?: string\r\n  connectText?: string\r\n  freezeSettings?: string\r\n  testIosCrash?: string\r\n  addPing?: string\r\n\r\n  // Replay params\r\n  replayFilter?: string\r\n  replaySpeed?: string\r\n  replayFileUrl?: string\r\n  replayValidateClient?: string\r\n  replayStopOnError?: string\r\n  replaySkipMissingOnTimeout?: string\r\n  replayPacketsSenderDelay?: string\r\n\r\n  // Benchmark params\r\n  openBenchmark?: string\r\n  renderDistance?: string\r\n  downloadBenchmark?: string\r\n  benchmarkMapZipUrl?: string\r\n  benchmarkPosition?: string\r\n}\r\n\r\nexport type AppQsParamsArray = {\r\n  mapDir?: string[]\r\n  setting?: string[]\r\n  serverSetting?: string[]\r\n  command?: string[]\r\n}\r\n\r\ntype AppQsParamsArrayTransformed = {\r\n  [k in keyof AppQsParamsArray]: string[]\r\n}\r\n\r\nglobalThis.process ??= {} as any\r\nconst initialAppConfig = process?.env?.INLINED_APP_CONFIG as AppConfig ?? {}\r\n\r\nexport const appQueryParams = new Proxy<AppQsParams>({} as AppQsParams, {\r\n  get (target, property) {\r\n    if (typeof property !== 'string') {\r\n      return undefined\r\n    }\r\n    const qsParam = qsParams.get(property)\r\n    if (qsParam) return qsParam\r\n    return miscUiState.appConfig?.appParams?.[property]\r\n  },\r\n})\r\n\r\nexport const appQueryParamsArray = new Proxy({} as AppQsParamsArrayTransformed, {\r\n  get (target, property) {\r\n    if (typeof property !== 'string') {\r\n      return null\r\n    }\r\n    const qsParam = qsParams.getAll(property)\r\n    if (qsParam.length) return qsParam\r\n    return miscUiState.appConfig?.appParams?.[property] ?? []\r\n  },\r\n})\r\n\r\nexport function updateQsParam (name: keyof AppQsParams, value: string | undefined) {\r\n  const url = new URL(window.location.href)\r\n  if (value) {\r\n    url.searchParams.set(name, value)\r\n  } else {\r\n    url.searchParams.delete(name)\r\n  }\r\n  window.history.replaceState({}, '', url.toString())\r\n}\r\n\r\n// Helper function to check if a specific query parameter exists\r\nexport const hasQueryParam = (param: keyof AppQsParams) => qsParams.has(param)\r\n\r\n// Helper function to get all query parameters as a URLSearchParams object\r\nexport const getRawQueryParams = () => qsParams;\r\n\r\n(globalThis as any).debugQueryParams = Object.fromEntries(qsParams.entries())\r\n","import { resetStateAfterDisconnect } from './browserfs'\r\nimport { hideModal, activeModalStack, showModal, miscUiState } from './globalState'\r\nimport { appStatusState, resetAppStatusState } from './react/AppStatusProvider'\r\n\r\nlet ourLastStatus: string | undefined = ''\r\nexport const setLoadingScreenStatus = function (status: string | undefined | null, isError = false, hideDots = false, fromFlyingSquid = false, minecraftJsonMessage?: Record<string, any>) {\r\n  if (typeof status === 'string') status = window.translateText?.(status) ?? status\r\n  // null can come from flying squid, should restore our last status\r\n  if (status === null) {\r\n    status = ourLastStatus\r\n  } else if (!fromFlyingSquid) {\r\n    ourLastStatus = status\r\n  }\r\n  fromFlyingSquid = false\r\n\r\n  if (status === undefined) {\r\n    appStatusState.status = ''\r\n\r\n    hideModal({ reactType: 'app-status' }, {}, { force: true })\r\n    return\r\n  }\r\n\r\n  if (!activeModalStack.some(x => x.reactType === 'app-status')) {\r\n    // just showing app status\r\n    resetAppStatusState()\r\n  }\r\n  showModal({ reactType: 'app-status' })\r\n  if (appStatusState.isError) {\r\n    return\r\n  }\r\n  appStatusState.hideDots = hideDots\r\n  appStatusState.isError = isError\r\n  appStatusState.lastStatus = isError ? appStatusState.status : ''\r\n  appStatusState.status = status\r\n  appStatusState.minecraftJsonMessage = minecraftJsonMessage ?? null\r\n\r\n  if (isError && miscUiState.gameLoaded) {\r\n    resetStateAfterDisconnect()\r\n  }\r\n}\r\nglobalThis.setLoadingScreenStatus = setLoadingScreenStatus\r\n","import * as THREE from 'three'\r\nimport Stats from 'stats.js'\r\nimport StatsGl from 'stats-gl'\r\nimport * as tween from '@tweenjs/tween.js'\r\nimport { GraphicsBackendConfig, GraphicsInitOptions } from '../../../src/appViewer'\r\nimport { WorldRendererConfig } from '../lib/worldrendererCommon'\r\n\r\nexport class DocumentRenderer {\r\n  canvas: HTMLCanvasElement | OffscreenCanvas\r\n  readonly renderer: THREE.WebGLRenderer\r\n  private animationFrameId?: number\r\n  private timeoutId?: number\r\n  private lastRenderTime = 0\r\n\r\n  private previousCanvasWidth = 0\r\n  private previousCanvasHeight = 0\r\n  private currentWidth = 0\r\n  private currentHeight = 0\r\n\r\n  private renderedFps = 0\r\n  private fpsInterval: any\r\n  private readonly stats: TopRightStats | undefined\r\n  private paused = false\r\n  disconnected = false\r\n  preRender = () => { }\r\n  render = (sizeChanged: boolean) => { }\r\n  postRender = () => { }\r\n  sizeChanged = () => { }\r\n  droppedFpsPercentage: number\r\n  config: GraphicsBackendConfig\r\n  onRender = [] as Array<(sizeChanged: boolean) => void>\r\n  inWorldRenderingConfig: WorldRendererConfig | undefined\r\n\r\n  constructor (initOptions: GraphicsInitOptions, public externalCanvas?: OffscreenCanvas) {\r\n    this.config = initOptions.config\r\n\r\n    // Handle canvas creation/transfer based on context\r\n    if (externalCanvas) {\r\n      this.canvas = externalCanvas\r\n    } else {\r\n      this.addToPage()\r\n    }\r\n\r\n    try {\r\n      this.renderer = new THREE.WebGLRenderer({\r\n        canvas: this.canvas,\r\n        preserveDrawingBuffer: true,\r\n        logarithmicDepthBuffer: true,\r\n        powerPreference: this.config.powerPreference\r\n      })\r\n    } catch (err) {\r\n      initOptions.callbacks.displayCriticalError(new Error(`Failed to create WebGL context, not possible to render (restart browser): ${err.message}`))\r\n      throw err\r\n    }\r\n    this.renderer.useLegacyLights = true\r\n    this.renderer.outputColorSpace = THREE.LinearSRGBColorSpace\r\n    if (!externalCanvas) {\r\n      this.updatePixelRatio()\r\n    }\r\n    this.sizeUpdated()\r\n    // Initialize previous dimensions\r\n    this.previousCanvasWidth = this.canvas.width\r\n    this.previousCanvasHeight = this.canvas.height\r\n\r\n    const supportsWebGL2 = 'WebGL2RenderingContext' in window\r\n    // Only initialize stats and DOM-related features in main thread\r\n    if (!externalCanvas && supportsWebGL2) {\r\n      this.stats = new TopRightStats(this.canvas as HTMLCanvasElement, this.config.statsVisible)\r\n      this.setupFpsTracking()\r\n    }\r\n\r\n    this.startRenderLoop()\r\n  }\r\n\r\n  updatePixelRatio () {\r\n    let pixelRatio = window.devicePixelRatio || 1 // todo this value is too high on ios, need to check, probably we should use avg, also need to make it configurable\r\n    if (!this.renderer.capabilities.isWebGL2) {\r\n      pixelRatio = 1 // webgl1 has issues with high pixel ratio (sometimes screen is clipped)\r\n    }\r\n    this.renderer.setPixelRatio(pixelRatio)\r\n  }\r\n\r\n  sizeUpdated () {\r\n    this.renderer.setSize(this.currentWidth, this.currentHeight, false)\r\n  }\r\n\r\n  private addToPage () {\r\n    this.canvas = addCanvasToPage()\r\n    this.updateCanvasSize()\r\n  }\r\n\r\n  updateSizeExternal (newWidth: number, newHeight: number, pixelRatio: number) {\r\n    this.currentWidth = newWidth\r\n    this.currentHeight = newHeight\r\n    this.renderer.setPixelRatio(pixelRatio)\r\n    this.sizeUpdated()\r\n  }\r\n\r\n  private updateCanvasSize () {\r\n    if (!this.externalCanvas) {\r\n      const innnerWidth = window.innerWidth\r\n      const innnerHeight = window.innerHeight\r\n      if (this.currentWidth !== innnerWidth) {\r\n        this.currentWidth = innnerWidth\r\n      }\r\n      if (this.currentHeight !== innnerHeight) {\r\n        this.currentHeight = innnerHeight\r\n      }\r\n    }\r\n  }\r\n\r\n  private setupFpsTracking () {\r\n    let max = 0\r\n    this.fpsInterval = setInterval(() => {\r\n      if (max > 0) {\r\n        this.droppedFpsPercentage = this.renderedFps / max\r\n      }\r\n      max = Math.max(this.renderedFps, max)\r\n      this.renderedFps = 0\r\n    }, 1000)\r\n  }\r\n\r\n  private startRenderLoop () {\r\n    const animate = () => {\r\n      if (this.disconnected) return\r\n\r\n      if (this.config.timeoutRendering) {\r\n        this.timeoutId = setTimeout(animate, this.config.fpsLimit ? 1000 / this.config.fpsLimit : 0) as unknown as number\r\n      } else {\r\n        this.animationFrameId = requestAnimationFrame(animate)\r\n      }\r\n\r\n      if (this.paused || (this.renderer.xr.isPresenting && !this.inWorldRenderingConfig?.vrPageGameRendering)) return\r\n\r\n      // Handle FPS limiting\r\n      if (this.config.fpsLimit) {\r\n        const now = performance.now()\r\n        const elapsed = now - this.lastRenderTime\r\n        const fpsInterval = 1000 / this.config.fpsLimit\r\n\r\n        if (elapsed < fpsInterval) {\r\n          return\r\n        }\r\n\r\n        this.lastRenderTime = now - (elapsed % fpsInterval)\r\n      }\r\n\r\n      let sizeChanged = false\r\n      this.updateCanvasSize()\r\n      if (this.previousCanvasWidth !== this.currentWidth || this.previousCanvasHeight !== this.currentHeight) {\r\n        this.previousCanvasWidth = this.currentWidth\r\n        this.previousCanvasHeight = this.currentHeight\r\n        this.sizeUpdated()\r\n        sizeChanged = true\r\n      }\r\n\r\n      this.frameRender(sizeChanged)\r\n\r\n      // Update stats visibility each frame (main thread only)\r\n      if (this.config.statsVisible !== undefined) {\r\n        this.stats?.setVisibility(this.config.statsVisible)\r\n      }\r\n    }\r\n\r\n    animate()\r\n  }\r\n\r\n  frameRender (sizeChanged: boolean) {\r\n    this.preRender()\r\n    this.stats?.markStart()\r\n    tween.update()\r\n    if (!globalThis.freezeRender) {\r\n      this.render(sizeChanged)\r\n    }\r\n    for (const fn of this.onRender) {\r\n      fn(sizeChanged)\r\n    }\r\n    this.renderedFps++\r\n    this.stats?.markEnd()\r\n    this.postRender()\r\n  }\r\n\r\n  setPaused (paused: boolean) {\r\n    this.paused = paused\r\n  }\r\n\r\n  dispose () {\r\n    this.disconnected = true\r\n    if (this.animationFrameId) {\r\n      cancelAnimationFrame(this.animationFrameId)\r\n    }\r\n    if (this.timeoutId) {\r\n      clearTimeout(this.timeoutId)\r\n    }\r\n    if (this.canvas instanceof HTMLCanvasElement) {\r\n      this.canvas.remove()\r\n    }\r\n    clearInterval(this.fpsInterval)\r\n    this.stats?.dispose()\r\n    this.renderer.dispose()\r\n  }\r\n}\r\n\r\nclass TopRightStats {\r\n  private readonly stats: Stats\r\n  private readonly stats2: Stats\r\n  private readonly statsGl: StatsGl\r\n  private total = 0\r\n  private readonly denseMode: boolean\r\n\r\n  constructor (private readonly canvas: HTMLCanvasElement, initialStatsVisible = 0) {\r\n    this.stats = new Stats()\r\n    this.stats2 = new Stats()\r\n    this.statsGl = new StatsGl({ minimal: true })\r\n    this.stats2.showPanel(2)\r\n    this.denseMode = process.env.NODE_ENV === 'production' || window.innerHeight < 500\r\n\r\n    this.initStats()\r\n    this.setVisibility(initialStatsVisible)\r\n  }\r\n\r\n  private addStat (dom: HTMLElement, size = 80) {\r\n    dom.style.position = 'absolute'\r\n    if (this.denseMode) dom.style.height = '12px'\r\n    dom.style.overflow = 'hidden'\r\n    dom.style.left = ''\r\n    dom.style.top = '0'\r\n    dom.style.right = `${this.total}px`\r\n    dom.style.width = '80px'\r\n    dom.style.zIndex = '1'\r\n    dom.style.opacity = '0.8'\r\n    const container = document.getElementById('corner-indicator-stats') ?? document.body\r\n    container.appendChild(dom)\r\n    this.total += size\r\n  }\r\n\r\n  private initStats () {\r\n    const hasRamPanel = this.stats2.dom.children.length === 3\r\n\r\n    this.addStat(this.stats.dom)\r\n    this.stats.dom.style.position = 'relative'\r\n    if (hasRamPanel) {\r\n      this.addStat(this.stats2.dom)\r\n    }\r\n\r\n    this.statsGl.init(this.canvas)\r\n    this.statsGl.container.style.display = 'flex'\r\n    this.statsGl.container.style.justifyContent = 'flex-end'\r\n\r\n    let i = 0\r\n    for (const _child of this.statsGl.container.children) {\r\n      const child = _child as HTMLElement\r\n      if (i++ === 0) {\r\n        child.style.display = 'none'\r\n      }\r\n      child.style.position = ''\r\n    }\r\n  }\r\n\r\n  setVisibility (level: number) {\r\n    const visible = level > 0\r\n    if (visible) {\r\n      this.stats.dom.style.display = 'block'\r\n      this.stats2.dom.style.display = level >= 2 ? 'block' : 'none'\r\n      this.statsGl.container.style.display = level >= 2 ? 'block' : 'none'\r\n    } else {\r\n      this.stats.dom.style.display = 'none'\r\n      this.stats2.dom.style.display = 'none'\r\n      this.statsGl.container.style.display = 'none'\r\n    }\r\n  }\r\n\r\n  markStart () {\r\n    this.stats.begin()\r\n    this.stats2.begin()\r\n    this.statsGl.begin()\r\n  }\r\n\r\n  markEnd () {\r\n    this.stats.end()\r\n    this.stats2.end()\r\n    this.statsGl.end()\r\n  }\r\n\r\n  dispose () {\r\n    this.stats.dom.remove()\r\n    this.stats2.dom.remove()\r\n    this.statsGl.container.remove()\r\n  }\r\n}\r\n\r\nconst addCanvasToPage = () => {\r\n  const canvas = document.createElement('canvas')\r\n  canvas.id = 'viewer-canvas'\r\n  document.body.appendChild(canvas)\r\n  return canvas\r\n}\r\n\r\nexport const addCanvasForWorker = () => {\r\n  const canvas = addCanvasToPage()\r\n  const transferred = canvas.transferControlToOffscreen()\r\n  let removed = false\r\n  let onSizeChanged = (w, h) => { }\r\n  let oldSize = { width: 0, height: 0 }\r\n  const checkSize = () => {\r\n    if (removed) return\r\n    if (oldSize.width !== window.innerWidth || oldSize.height !== window.innerHeight) {\r\n      onSizeChanged(window.innerWidth, window.innerHeight)\r\n      oldSize = { width: window.innerWidth, height: window.innerHeight }\r\n    }\r\n    requestAnimationFrame(checkSize)\r\n  }\r\n  requestAnimationFrame(checkSize)\r\n  return {\r\n    canvas: transferred,\r\n    destroy () {\r\n      removed = true\r\n      canvas.remove()\r\n    },\r\n    onSizeChanged (cb: (width: number, height: number) => void) {\r\n      onSizeChanged = cb\r\n    },\r\n    get size () {\r\n      return { width: window.innerWidth, height: window.innerHeight }\r\n    }\r\n  }\r\n}\r\n","/* eslint-disable guard-for-in */\r\n\r\n// todo refactor into its own commons module\r\nimport { EventEmitter } from 'events'\r\nimport { generateSpiralMatrix, ViewRect } from 'flying-squid/dist/utils'\r\nimport { Vec3 } from 'vec3'\r\nimport { BotEvents } from 'mineflayer'\r\nimport { proxy } from 'valtio'\r\nimport TypedEmitter from 'typed-emitter'\r\nimport { Biome } from 'minecraft-data'\r\nimport { delayedIterator } from '../../playground/shared'\r\nimport { chunkPos } from './simpleUtils'\r\n\r\nexport type ChunkPosKey = string // like '16,16'\r\ntype ChunkPos = { x: number, z: number } // like { x: 16, z: 16 }\r\n\r\nexport type WorldDataEmitterEvents = {\r\n  chunkPosUpdate: (data: { pos: Vec3 }) => void\r\n  blockUpdate: (data: { pos: Vec3, stateId: number }) => void\r\n  entity: (data: any) => void\r\n  entityMoved: (data: any) => void\r\n  playerEntity: (data: any) => void\r\n  time: (data: number) => void\r\n  renderDistance: (viewDistance: number) => void\r\n  blockEntities: (data: Record<string, any> | { blockEntities: Record<string, any> }) => void\r\n  markAsLoaded: (data: { x: number, z: number }) => void\r\n  unloadChunk: (data: { x: number, z: number }) => void\r\n  loadChunk: (data: { x: number, z: number, chunk: string, blockEntities: any, worldConfig: any, isLightUpdate: boolean }) => void\r\n  updateLight: (data: { pos: Vec3 }) => void\r\n  onWorldSwitch: () => void\r\n  end: () => void\r\n  biomeUpdate: (data: { biome: Biome }) => void\r\n  biomeReset: () => void\r\n}\r\n\r\nexport class WorldDataEmitterWorker extends (EventEmitter as new () => TypedEmitter<WorldDataEmitterEvents>) {\r\n  static readonly restorerName = 'WorldDataEmitterWorker'\r\n}\r\n\r\nexport class WorldDataEmitter extends (EventEmitter as new () => TypedEmitter<WorldDataEmitterEvents>) {\r\n  spiralNumber = 0\r\n  gotPanicLastTime = false\r\n  panicChunksReload = () => {}\r\n  loadedChunks: Record<ChunkPosKey, boolean>\r\n  private inLoading = false\r\n  private chunkReceiveTimes: number[] = []\r\n  private lastChunkReceiveTime = 0\r\n  public lastChunkReceiveTimeAvg = 0\r\n  private panicTimeout?: NodeJS.Timeout\r\n  readonly lastPos: Vec3\r\n  private eventListeners: Record<string, any> = {}\r\n  private readonly emitter: WorldDataEmitter\r\n  debugChunksInfo: Record<ChunkPosKey, {\r\n    loads: Array<{\r\n      dataLength: number\r\n      reason: string\r\n      time: number\r\n    }>\r\n    // blockUpdates: number\r\n  }> = {}\r\n\r\n  waitingSpiralChunksLoad = {} as Record<ChunkPosKey, (value: boolean) => void>\r\n\r\n  addWaitTime = 1\r\n  /* config */ keepChunksDistance = 0\r\n  /* config */ isPlayground = false\r\n  /* config */ allowPositionUpdate = true\r\n\r\n  constructor (public world: typeof __type_bot['world'], public viewDistance: number, position: Vec3 = new Vec3(0, 0, 0)) {\r\n    // eslint-disable-next-line constructor-super\r\n    super()\r\n    this.loadedChunks = {}\r\n    this.lastPos = new Vec3(0, 0, 0).update(position)\r\n    // todo\r\n    this.emitter = this\r\n  }\r\n\r\n  setBlockStateId (position: Vec3, stateId: number) {\r\n    const val = this.world.setBlockStateId(position, stateId) as Promise<void> | void\r\n    if (val) throw new Error('setBlockStateId returned promise (not supported)')\r\n    // const chunkX = Math.floor(position.x / 16)\r\n    // const chunkZ = Math.floor(position.z / 16)\r\n    // if (!this.loadedChunks[`${chunkX},${chunkZ}`] && !this.waitingSpiralChunksLoad[`${chunkX},${chunkZ}`]) {\r\n    //   void this.loadChunk({ x: chunkX, z: chunkZ })\r\n    //   return\r\n    // }\r\n\r\n    this.emit('blockUpdate', { pos: position, stateId })\r\n  }\r\n\r\n  updateViewDistance (viewDistance: number) {\r\n    this.viewDistance = viewDistance\r\n    this.emitter.emit('renderDistance', viewDistance)\r\n  }\r\n\r\n  listenToBot (bot: typeof __type_bot) {\r\n    const entitiesObjectData = new Map<string, number>()\r\n    bot._client.prependListener('spawn_entity', (data) => {\r\n      if (data.objectData && data.entityId !== undefined) {\r\n        entitiesObjectData.set(data.entityId, data.objectData)\r\n      }\r\n    })\r\n\r\n    const emitEntity = (e, name = 'entity') => {\r\n      if (!e) return\r\n      if (e === bot.entity) {\r\n        if (name === 'entity') {\r\n          this.emitter.emit('playerEntity', e)\r\n        }\r\n        return\r\n      }\r\n      if (!e.name) return // mineflayer received update for not spawned entity\r\n      e.objectData = entitiesObjectData.get(e.id)\r\n      this.emitter.emit(name as any, {\r\n        ...e,\r\n        pos: e.position,\r\n        username: e.username,\r\n        team: bot.teamMap[e.username] || bot.teamMap[e.uuid],\r\n        // set debugTree (obj) {\r\n        //   e.debugTree = obj\r\n        // }\r\n      })\r\n    }\r\n\r\n    this.eventListeners = {\r\n      // 'move': botPosition,\r\n      entitySpawn (e: any) {\r\n        if (e.name === 'item_frame' || e.name === 'glow_item_frame') {\r\n          // Item frames use block positions in the protocol, not their center. Fix that.\r\n          e.position.translate(0.5, 0.5, 0.5)\r\n        }\r\n        emitEntity(e)\r\n      },\r\n      entityUpdate (e: any) {\r\n        emitEntity(e)\r\n      },\r\n      entityEquip (e: any) {\r\n        emitEntity(e)\r\n      },\r\n      entityMoved (e: any) {\r\n        emitEntity(e, 'entityMoved')\r\n      },\r\n      entityGone: (e: any) => {\r\n        this.emitter.emit('entity', { id: e.id, delete: true })\r\n      },\r\n      chunkColumnLoad: (pos: Vec3) => {\r\n        const now = performance.now()\r\n        if (this.lastChunkReceiveTime) {\r\n          this.chunkReceiveTimes.push(now - this.lastChunkReceiveTime)\r\n        }\r\n        this.lastChunkReceiveTime = now\r\n\r\n        if (this.waitingSpiralChunksLoad[`${pos.x},${pos.z}`]) {\r\n          this.waitingSpiralChunksLoad[`${pos.x},${pos.z}`](true)\r\n          delete this.waitingSpiralChunksLoad[`${pos.x},${pos.z}`]\r\n        } else if (this.loadedChunks[`${pos.x},${pos.z}`]) {\r\n          void this.loadChunk(pos, false, 'Received another chunkColumnLoad event while already loaded')\r\n        }\r\n        this.chunkProgress()\r\n      },\r\n      chunkColumnUnload: (pos: Vec3) => {\r\n        this.unloadChunk(pos)\r\n      },\r\n      blockUpdate: (oldBlock: any, newBlock: any) => {\r\n        const stateId = newBlock.stateId ?? ((newBlock.type << 4) | newBlock.metadata)\r\n        this.emitter.emit('blockUpdate', { pos: oldBlock.position, stateId })\r\n      },\r\n      time: () => {\r\n        this.emitter.emit('time', bot.time.timeOfDay)\r\n      },\r\n      end: () => {\r\n        this.emitter.emit('end')\r\n      },\r\n      // when dimension might change\r\n      login: () => {\r\n        void this.updatePosition(bot.entity.position, true)\r\n        this.emitter.emit('playerEntity', bot.entity)\r\n      },\r\n      respawn: () => {\r\n        void this.updatePosition(bot.entity.position, true)\r\n        this.emitter.emit('playerEntity', bot.entity)\r\n        this.emitter.emit('onWorldSwitch')\r\n      },\r\n    } satisfies Partial<BotEvents>\r\n\r\n\r\n    bot._client.on('update_light', ({ chunkX, chunkZ }) => {\r\n      const chunkPos = new Vec3(chunkX * 16, 0, chunkZ * 16)\r\n      if (!this.waitingSpiralChunksLoad[`${chunkX},${chunkZ}`] && this.loadedChunks[`${chunkX},${chunkZ}`]) {\r\n        void this.loadChunk(chunkPos, true, 'update_light')\r\n      }\r\n    })\r\n\r\n    for (const [evt, listener] of Object.entries(this.eventListeners)) {\r\n      bot.on(evt as any, listener)\r\n    }\r\n\r\n    for (const id in bot.entities) {\r\n      const e = bot.entities[id]\r\n      try {\r\n        emitEntity(e)\r\n      } catch (err) {\r\n        // reportError?.(err)\r\n        console.error('error processing entity', err)\r\n      }\r\n    }\r\n  }\r\n\r\n  emitterGotConnected () {\r\n    this.emitter.emit('blockEntities', new Proxy({}, {\r\n      get (_target, posKey, receiver) {\r\n        if (typeof posKey !== 'string') return\r\n        const [x, y, z] = posKey.split(',').map(Number)\r\n        return bot.world.getBlock(new Vec3(x, y, z))?.entity\r\n      },\r\n    }))\r\n  }\r\n\r\n  removeListenersFromBot (bot: import('mineflayer').Bot) {\r\n    for (const [evt, listener] of Object.entries(this.eventListeners)) {\r\n      bot.removeListener(evt as any, listener)\r\n    }\r\n  }\r\n\r\n  async init (pos: Vec3) {\r\n    this.updateViewDistance(this.viewDistance)\r\n    this.emitter.emit('chunkPosUpdate', { pos })\r\n    if (bot?.time?.timeOfDay) {\r\n      this.emitter.emit('time', bot.time.timeOfDay)\r\n    }\r\n    if (bot?.entity) {\r\n      this.emitter.emit('playerEntity', bot.entity)\r\n    }\r\n    this.emitterGotConnected()\r\n    const [botX, botZ] = chunkPos(pos)\r\n\r\n    const positions = generateSpiralMatrix(this.viewDistance).map(([x, z]) => new Vec3((botX + x) * 16, 0, (botZ + z) * 16))\r\n\r\n    this.lastPos.update(pos)\r\n    await this._loadChunks(positions, pos)\r\n  }\r\n\r\n  chunkProgress () {\r\n    if (this.panicTimeout) clearTimeout(this.panicTimeout)\r\n    if (this.chunkReceiveTimes.length >= 5) {\r\n      const avgReceiveTime = this.chunkReceiveTimes.reduce((a, b) => a + b, 0) / this.chunkReceiveTimes.length\r\n      this.lastChunkReceiveTimeAvg = avgReceiveTime\r\n      const timeoutDelay = avgReceiveTime * 2 + 1000 // 2x average + 1 second\r\n\r\n      // Clear any existing timeout\r\n      if (this.panicTimeout) clearTimeout(this.panicTimeout)\r\n\r\n      // Set new timeout for panic reload\r\n      this.panicTimeout = setTimeout(() => {\r\n        if (!this.gotPanicLastTime && this.inLoading) {\r\n          console.warn('Chunk loading seems stuck, triggering panic reload')\r\n          this.gotPanicLastTime = true\r\n          this.panicChunksReload()\r\n        }\r\n      }, timeoutDelay)\r\n    }\r\n  }\r\n\r\n  async _loadChunks (positions: Vec3[], centerPos: Vec3) {\r\n    this.spiralNumber++\r\n    const { spiralNumber } = this\r\n    // stop loading previous chunks\r\n    for (const pos of Object.keys(this.waitingSpiralChunksLoad)) {\r\n      this.waitingSpiralChunksLoad[pos](false)\r\n      delete this.waitingSpiralChunksLoad[pos]\r\n    }\r\n\r\n    let continueLoading = true\r\n    this.inLoading = true\r\n    await delayedIterator(positions, this.addWaitTime, async (pos) => {\r\n      if (!continueLoading || this.loadedChunks[`${pos.x},${pos.z}`]) return\r\n\r\n      // Wait for chunk to be available from server\r\n      if (!this.world.getColumnAt(pos)) {\r\n        continueLoading = await new Promise<boolean>(resolve => {\r\n          this.waitingSpiralChunksLoad[`${pos.x},${pos.z}`] = resolve\r\n        })\r\n      }\r\n      if (!continueLoading) return\r\n      await this.loadChunk(pos, undefined, `spiral ${spiralNumber} from ${centerPos.x},${centerPos.z}`)\r\n      this.chunkProgress()\r\n    })\r\n    if (this.panicTimeout) clearTimeout(this.panicTimeout)\r\n    this.inLoading = false\r\n    this.gotPanicLastTime = false\r\n    this.chunkReceiveTimes = []\r\n    this.lastChunkReceiveTime = 0\r\n  }\r\n\r\n  readdDebug () {\r\n    const clonedLoadedChunks = { ...this.loadedChunks }\r\n    this.unloadAllChunks()\r\n    console.time('readdDebug')\r\n    for (const loadedChunk in clonedLoadedChunks) {\r\n      const [x, z] = loadedChunk.split(',').map(Number)\r\n      void this.loadChunk(new Vec3(x, 0, z))\r\n    }\r\n    const interval = setInterval(() => {\r\n      if (appViewer.rendererState.world.allChunksLoaded) {\r\n        clearInterval(interval)\r\n        console.timeEnd('readdDebug')\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  // debugGotChunkLatency = [] as number[]\r\n  // lastTime = 0\r\n\r\n  async loadChunk (pos: ChunkPos, isLightUpdate = false, reason = 'spiral') {\r\n    const [botX, botZ] = chunkPos(this.lastPos)\r\n\r\n    const dx = Math.abs(botX - Math.floor(pos.x / 16))\r\n    const dz = Math.abs(botZ - Math.floor(pos.z / 16))\r\n    if (dx <= this.viewDistance && dz <= this.viewDistance) {\r\n      // eslint-disable-next-line @typescript-eslint/await-thenable -- todo allow to use async world provider but not sure if needed\r\n      const column = await this.world.getColumnAt(pos['y'] ? pos as Vec3 : new Vec3(pos.x, 0, pos.z))\r\n      if (column) {\r\n        // const latency = Math.floor(performance.now() - this.lastTime)\r\n        // this.debugGotChunkLatency.push(latency)\r\n        // this.lastTime = performance.now()\r\n        // todo optimize toJson data, make it clear why it is used\r\n        const chunk = column.toJson()\r\n        // TODO: blockEntities\r\n        const worldConfig = {\r\n          minY: column['minY'] ?? 0,\r\n          worldHeight: column['worldHeight'] ?? 256,\r\n        }\r\n        //@ts-expect-error\r\n        this.emitter.emit('loadChunk', { x: pos.x, z: pos.z, chunk, blockEntities: column.blockEntities, worldConfig, isLightUpdate })\r\n        this.loadedChunks[`${pos.x},${pos.z}`] = true\r\n\r\n        this.debugChunksInfo[`${pos.x},${pos.z}`] ??= {\r\n          loads: []\r\n        }\r\n        this.debugChunksInfo[`${pos.x},${pos.z}`].loads.push({\r\n          dataLength: chunk.length,\r\n          reason,\r\n          time: Date.now(),\r\n        })\r\n      } else if (this.isPlayground) { // don't allow in real worlds pre-flag chunks as loaded to avoid race condition when the chunk might still be loading. In playground it's assumed we always pre-load all chunks first\r\n        this.emitter.emit('markAsLoaded', { x: pos.x, z: pos.z })\r\n      }\r\n    } else {\r\n      // console.debug('skipped loading chunk', dx, dz, '>', this.viewDistance)\r\n    }\r\n  }\r\n\r\n  unloadAllChunks () {\r\n    for (const coords of Object.keys(this.loadedChunks)) {\r\n      const [x, z] = coords.split(',').map(Number)\r\n      this.unloadChunk({ x, z })\r\n    }\r\n  }\r\n\r\n  unloadChunk (pos: ChunkPos) {\r\n    this.emitter.emit('unloadChunk', { x: pos.x, z: pos.z })\r\n    delete this.loadedChunks[`${pos.x},${pos.z}`]\r\n    delete this.debugChunksInfo[`${pos.x},${pos.z}`]\r\n  }\r\n\r\n  lastBiomeId: number | null = null\r\n\r\n  udpateBiome (pos: Vec3) {\r\n    try {\r\n      const biomeId = this.world.getBiome(pos)\r\n      if (biomeId !== this.lastBiomeId) {\r\n        this.lastBiomeId = biomeId\r\n        const biomeData = loadedData.biomes[biomeId]\r\n        if (biomeData) {\r\n          this.emitter.emit('biomeUpdate', {\r\n            biome: biomeData\r\n          })\r\n        } else {\r\n          // unknown biome\r\n          this.emitter.emit('biomeReset')\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('error updating biome', e)\r\n    }\r\n  }\r\n\r\n  lastPosCheck: Vec3 | null = null\r\n  async updatePosition (pos: Vec3, force = false) {\r\n    if (!this.allowPositionUpdate) return\r\n    const posFloored = pos.floored()\r\n    if (!force && this.lastPosCheck && this.lastPosCheck.equals(posFloored)) return\r\n    this.lastPosCheck = posFloored\r\n\r\n    this.udpateBiome(pos)\r\n\r\n    const [lastX, lastZ] = chunkPos(this.lastPos)\r\n    const [botX, botZ] = chunkPos(pos)\r\n    if (lastX !== botX || lastZ !== botZ || force) {\r\n      this.emitter.emit('chunkPosUpdate', { pos })\r\n\r\n      // unload chunks that are no longer in view\r\n      const newViewToUnload = new ViewRect(botX, botZ, this.viewDistance + this.keepChunksDistance)\r\n      const chunksToUnload: Vec3[] = []\r\n      for (const coords of Object.keys(this.loadedChunks)) {\r\n        const x = parseInt(coords.split(',')[0], 10)\r\n        const z = parseInt(coords.split(',')[1], 10)\r\n        const p = new Vec3(x, 0, z)\r\n        const [chunkX, chunkZ] = chunkPos(p)\r\n        if (!newViewToUnload.contains(chunkX, chunkZ)) {\r\n          chunksToUnload.push(p)\r\n        }\r\n      }\r\n      for (const p of chunksToUnload) {\r\n        this.unloadChunk(p)\r\n      }\r\n\r\n      // load new chunks\r\n      const positions = generateSpiralMatrix(this.viewDistance).map(([x, z]) => {\r\n        const pos = new Vec3((botX + x) * 16, 0, (botZ + z) * 16)\r\n        if (!this.loadedChunks[`${pos.x},${pos.z}`]) return pos\r\n        return undefined!\r\n      }).filter(a => !!a)\r\n      this.lastPos.update(pos)\r\n      void this._loadChunks(positions, pos)\r\n    } else {\r\n      this.emitter.emit('chunkPosUpdate', { pos }) // todo-low\r\n      this.lastPos.update(pos)\r\n    }\r\n  }\r\n}\r\n","import { proxy } from 'valtio'\r\nimport { NonReactiveState, RendererReactiveState } from '../../src/appViewer'\r\n\r\nexport const getDefaultRendererState = (): {\r\n  reactive: RendererReactiveState\r\n  nonReactive: NonReactiveState\r\n} => {\r\n  return {\r\n    reactive: proxy({\r\n      world: {\r\n        chunksLoaded: new Set(),\r\n        heightmaps: new Map(),\r\n        allChunksLoaded: true,\r\n        mesherWork: false,\r\n        intersectMedia: null\r\n      },\r\n      renderer: '',\r\n      preventEscapeMenu: false\r\n    }),\r\n    nonReactive: {\r\n      world: {\r\n        chunksLoaded: new Set(),\r\n        chunksTotalNumber: 0,\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { join } from 'path'\r\nimport * as THREE from 'three'\r\nimport { getSyncWorld } from 'renderer/playground/shared'\r\nimport { Vec3 } from 'vec3'\r\nimport * as tweenJs from '@tweenjs/tween.js'\r\nimport type { GraphicsInitOptions } from '../../../src/appViewer'\r\nimport { WorldDataEmitter } from '../lib/worldDataEmitter'\r\nimport { defaultWorldRendererConfig, WorldRendererCommon } from '../lib/worldrendererCommon'\r\nimport { getDefaultRendererState } from '../baseGraphicsBackend'\r\nimport { ResourcesManager } from '../../../src/resourcesManager'\r\nimport { getInitialPlayerStateRenderer } from '../lib/basePlayerState'\r\nimport { loadThreeJsTextureFromUrl, loadThreeJsTextureFromUrlSync } from './threeJsUtils'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\nimport { EntityMesh } from './entity/EntityMesh'\r\nimport { DocumentRenderer } from './documentRenderer'\r\nimport { PANORAMA_VERSION } from './panoramaShared'\r\n\r\nconst date = new Date()\r\nconst isChristmas = date.getMonth() === 11 && date.getDate() >= 24 && date.getDate() <= 26\r\n\r\nconst panoramaFiles = [\r\n  'panorama_3.webp', // right (+x)\r\n  'panorama_1.webp', // left (-x)\r\n  'panorama_4.webp', // top (+y)\r\n  'panorama_5.webp', // bottom (-y)\r\n  'panorama_0.webp', // front (+z)\r\n  'panorama_2.webp', // back (-z)\r\n]\r\n\r\nexport class PanoramaRenderer {\r\n  private readonly camera: THREE.PerspectiveCamera\r\n  private scene: THREE.Scene\r\n  private readonly ambientLight: THREE.AmbientLight\r\n  private readonly directionalLight: THREE.DirectionalLight\r\n  private panoramaGroup: THREE.Object3D | null = null\r\n  private time = 0\r\n  private readonly abortController = new AbortController()\r\n  private worldRenderer: WorldRendererCommon | WorldRendererThree | undefined\r\n  public WorldRendererClass = WorldRendererThree\r\n  public startTimes = new Map<THREE.MeshBasicMaterial, number>()\r\n\r\n  constructor (private readonly documentRenderer: DocumentRenderer, private readonly options: GraphicsInitOptions, private readonly doWorldBlocksPanorama = false) {\r\n    this.scene = new THREE.Scene()\r\n    // #324568\r\n    this.scene.background = new THREE.Color(0x32_45_68)\r\n\r\n    // Add ambient light\r\n    this.ambientLight = new THREE.AmbientLight(0xcc_cc_cc)\r\n    this.scene.add(this.ambientLight)\r\n\r\n    // Add directional light\r\n    this.directionalLight = new THREE.DirectionalLight(0xff_ff_ff, 0.5)\r\n    this.directionalLight.position.set(1, 1, 0.5).normalize()\r\n    this.directionalLight.castShadow = true\r\n    this.scene.add(this.directionalLight)\r\n\r\n    this.camera = new THREE.PerspectiveCamera(85, this.documentRenderer.canvas.width / this.documentRenderer.canvas.height, 0.05, 1000)\r\n    this.camera.position.set(0, 0, 0)\r\n    this.camera.rotation.set(0, 0, 0)\r\n  }\r\n\r\n  async start () {\r\n    if (this.doWorldBlocksPanorama) {\r\n      await this.worldBlocksPanorama()\r\n    } else {\r\n      this.addClassicPanorama()\r\n    }\r\n\r\n\r\n    this.documentRenderer.render = (sizeChanged = false) => {\r\n      if (sizeChanged) {\r\n        this.camera.aspect = this.documentRenderer.canvas.width / this.documentRenderer.canvas.height\r\n        this.camera.updateProjectionMatrix()\r\n      }\r\n      this.documentRenderer.renderer.render(this.scene, this.camera)\r\n    }\r\n  }\r\n\r\n  async debugImageInFrontOfCamera () {\r\n    const image = await loadThreeJsTextureFromUrl(join('background', 'panorama_0.webp'))\r\n    const mesh = new THREE.Mesh(new THREE.PlaneGeometry(1000, 1000), new THREE.MeshBasicMaterial({ map: image }))\r\n    mesh.position.set(0, 0, -500)\r\n    mesh.rotation.set(0, 0, 0)\r\n    this.scene.add(mesh)\r\n  }\r\n\r\n  addClassicPanorama () {\r\n    const panorGeo = new THREE.BoxGeometry(1000, 1000, 1000)\r\n    const panorMaterials = [] as THREE.MeshBasicMaterial[]\r\n    const fadeInDuration = 200\r\n\r\n    // void this.debugImageInFrontOfCamera()\r\n\r\n    for (const file of panoramaFiles) {\r\n      const load = async () => {\r\n        const { texture } = loadThreeJsTextureFromUrlSync(join('background', isChristmas ? 'christmas' : '', file))\r\n\r\n        // Instead of using repeat/offset to flip, we'll use the texture matrix\r\n        texture.matrixAutoUpdate = false\r\n        texture.matrix.set(\r\n          -1, 0, 1, 0, 1, 0, 0, 0, 1\r\n        )\r\n\r\n        texture.wrapS = THREE.ClampToEdgeWrapping\r\n        texture.wrapT = THREE.ClampToEdgeWrapping\r\n        texture.minFilter = THREE.LinearFilter\r\n        texture.magFilter = THREE.LinearFilter\r\n\r\n        const material = new THREE.MeshBasicMaterial({\r\n          map: texture,\r\n          transparent: true,\r\n          side: THREE.DoubleSide,\r\n          depthWrite: false,\r\n          opacity: 0 // Start with 0 opacity\r\n        })\r\n\r\n        // Start fade-in when texture is loaded\r\n        this.startTimes.set(material, Date.now())\r\n        panorMaterials.push(material)\r\n      }\r\n\r\n      void load()\r\n    }\r\n\r\n    const panoramaBox = new THREE.Mesh(panorGeo, panorMaterials)\r\n    panoramaBox.onBeforeRender = () => {\r\n      this.time += 0.01\r\n      panoramaBox.rotation.y = Math.PI + this.time * 0.01\r\n      panoramaBox.rotation.z = Math.sin(-this.time * 0.001) * 0.001\r\n\r\n      // Time-based fade in animation for each material\r\n      for (const material of panorMaterials) {\r\n        const startTime = this.startTimes.get(material)\r\n        if (startTime) {\r\n          const elapsed = Date.now() - startTime\r\n          const progress = Math.min(1, elapsed / fadeInDuration)\r\n          material.opacity = progress\r\n        }\r\n      }\r\n    }\r\n\r\n    const group = new THREE.Object3D()\r\n    group.add(panoramaBox)\r\n\r\n    if (!isChristmas) {\r\n      // Add entities\r\n      for (let i = 0; i < 20; i++) {\r\n        const m = new EntityMesh('1.16.4', 'squid').mesh\r\n        m.position.set(Math.random() * 30 - 15, Math.random() * 20 - 10, Math.random() * 10 - 17)\r\n        m.rotation.set(0, Math.PI + Math.random(), -Math.PI / 4, 'ZYX')\r\n        const v = Math.random() * 0.01\r\n        m.children[0].onBeforeRender = () => {\r\n          m.rotation.y += v\r\n          m.rotation.z = Math.cos(panoramaBox.rotation.y * 3) * Math.PI / 4 - Math.PI / 2\r\n        }\r\n        group.add(m)\r\n      }\r\n    }\r\n\r\n    this.scene.add(group)\r\n    this.panoramaGroup = group\r\n  }\r\n\r\n  async worldBlocksPanorama () {\r\n    const version = PANORAMA_VERSION\r\n    const fullResourceManager = this.options.resourcesManager as ResourcesManager\r\n    fullResourceManager.currentConfig = { version, noInventoryGui: true, }\r\n    await fullResourceManager.updateAssetsData({ })\r\n    if (this.abortController.signal.aborted) return\r\n    console.time('load panorama scene')\r\n    const world = getSyncWorld(version)\r\n    const PrismarineBlock = require('prismarine-block')\r\n    const Block = PrismarineBlock(version)\r\n    const fullBlocks = loadedData.blocksArray.filter(block => {\r\n    // if (block.name.includes('leaves')) return false\r\n      if (/* !block.name.includes('wool') &&  */!block.name.includes('stained_glass')/*  && !block.name.includes('terracotta') */) return false\r\n      const b = Block.fromStateId(block.defaultState, 0)\r\n      if (b.shapes?.length !== 1) return false\r\n      const shape = b.shapes[0]\r\n      return shape[0] === 0 && shape[1] === 0 && shape[2] === 0 && shape[3] === 1 && shape[4] === 1 && shape[5] === 1\r\n    })\r\n    const Z = -15\r\n    const sizeX = 100\r\n    const sizeY = 100\r\n    for (let x = -sizeX; x < sizeX; x++) {\r\n      for (let y = -sizeY; y < sizeY; y++) {\r\n        const block = fullBlocks[Math.floor(Math.random() * fullBlocks.length)]\r\n        world.setBlockStateId(new Vec3(x, y, Z), block.defaultState)\r\n      }\r\n    }\r\n    this.camera.updateProjectionMatrix()\r\n    this.camera.position.set(0.5, sizeY / 2 + 0.5, 0.5)\r\n    this.camera.rotation.set(0, 0, 0)\r\n    const initPos = new Vec3(...this.camera.position.toArray())\r\n    const worldView = new WorldDataEmitter(world, 2, initPos)\r\n    // worldView.addWaitTime = 0\r\n    if (this.abortController.signal.aborted) return\r\n\r\n    this.worldRenderer = new this.WorldRendererClass(\r\n      this.documentRenderer.renderer,\r\n      this.options,\r\n      {\r\n        version,\r\n        worldView,\r\n        inWorldRenderingConfig: defaultWorldRendererConfig,\r\n        playerStateReactive: getInitialPlayerStateRenderer().reactive,\r\n        rendererState: getDefaultRendererState().reactive,\r\n        nonReactiveState: getDefaultRendererState().nonReactive\r\n      }\r\n    )\r\n    if (this.worldRenderer instanceof WorldRendererThree) {\r\n      this.scene = this.worldRenderer.scene\r\n    }\r\n    void worldView.init(initPos)\r\n\r\n    await this.worldRenderer.waitForChunksToRender()\r\n    if (this.abortController.signal.aborted) return\r\n    // add small camera rotation to side on mouse move depending on absolute position of the cursor\r\n    const { camera } = this\r\n    const initX = camera.position.x\r\n    const initY = camera.position.y\r\n    let prevTwin: tweenJs.Tween<THREE.Vector3> | undefined\r\n    document.body.addEventListener('pointermove', (e) => {\r\n      if (e.pointerType !== 'mouse') return\r\n      const pos = new THREE.Vector2(e.clientX, e.clientY)\r\n      const SCALE = 0.2\r\n      /* -0.5 - 0.5 */\r\n      const xRel = pos.x / window.innerWidth - 0.5\r\n      const yRel = -(pos.y / window.innerHeight - 0.5)\r\n      prevTwin?.stop()\r\n      const to = {\r\n        x: initX + (xRel * SCALE),\r\n        y: initY + (yRel * SCALE)\r\n      }\r\n      prevTwin = new tweenJs.Tween(camera.position).to(to, 0) // todo use the number depending on diff // todo use the number depending on diff\r\n      // prevTwin.easing(tweenJs.Easing.Exponential.InOut)\r\n      prevTwin.start()\r\n      camera.updateProjectionMatrix()\r\n    }, {\r\n      signal: this.abortController.signal\r\n    })\r\n\r\n    console.timeEnd('load panorama scene')\r\n  }\r\n\r\n  dispose () {\r\n    this.scene.clear()\r\n    this.worldRenderer?.destroy()\r\n    this.abortController.abort()\r\n  }\r\n}\r\n\r\n// export class ClassicPanoramaRenderer {\r\n//   panoramaGroup: THREE.Object3D\r\n\r\n//   constructor (private readonly backgroundFiles: string[], onRender: Array<(sizeChanged: boolean) => void>, addSquids = true) {\r\n//     const panorGeo = new THREE.BoxGeometry(1000, 1000, 1000)\r\n//     const loader = new THREE.TextureLoader()\r\n//     const panorMaterials = [] as THREE.MeshBasicMaterial[]\r\n\r\n//     for (const file of this.backgroundFiles) {\r\n//       const texture = loader.load(file)\r\n\r\n//       // Instead of using repeat/offset to flip, we'll use the texture matrix\r\n//       texture.matrixAutoUpdate = false\r\n//       texture.matrix.set(\r\n//         -1, 0, 1, 0, 1, 0, 0, 0, 1\r\n//       )\r\n\r\n//       texture.wrapS = THREE.ClampToEdgeWrapping // Changed from RepeatWrapping\r\n//       texture.wrapT = THREE.ClampToEdgeWrapping // Changed from RepeatWrapping\r\n//       texture.minFilter = THREE.LinearFilter\r\n//       texture.magFilter = THREE.LinearFilter\r\n\r\n//       panorMaterials.push(new THREE.MeshBasicMaterial({\r\n//         map: texture,\r\n//         transparent: true,\r\n//         side: THREE.DoubleSide,\r\n//         depthWrite: false,\r\n//       }))\r\n//     }\r\n\r\n//     const panoramaBox = new THREE.Mesh(panorGeo, panorMaterials)\r\n//     panoramaBox.onBeforeRender = () => {\r\n//     }\r\n\r\n//     const group = new THREE.Object3D()\r\n//     group.add(panoramaBox)\r\n\r\n//     if (addSquids) {\r\n//       // Add squids\r\n//       for (let i = 0; i < 20; i++) {\r\n//         const m = new EntityMesh('1.16.4', 'squid').mesh\r\n//         m.position.set(Math.random() * 30 - 15, Math.random() * 20 - 10, Math.random() * 10 - 17)\r\n//         m.rotation.set(0, Math.PI + Math.random(), -Math.PI / 4, 'ZYX')\r\n//         const v = Math.random() * 0.01\r\n//         onRender.push(() => {\r\n//           m.rotation.y += v\r\n//           m.rotation.z = Math.cos(panoramaBox.rotation.y * 3) * Math.PI / 4 - Math.PI / 2\r\n//         })\r\n//         group.add(m)\r\n//       }\r\n//     }\r\n\r\n//     this.panoramaGroup = group\r\n//   }\r\n// }\r\n","export const PANORAMA_VERSION = '1.21.4'\r\n","import { VRButton } from 'three/examples/jsm/webxr/VRButton.js'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\r\nimport { XRControllerModelFactory } from 'three/examples/jsm/webxr/XRControllerModelFactory.js'\r\nimport { buttonMap as standardButtonsMap } from 'contro-max/build/gamepad'\r\nimport * as THREE from 'three'\r\nimport { WorldRendererThree } from '../worldrendererThree'\r\nimport { DocumentRenderer } from '../documentRenderer'\r\n\r\nexport async function initVR (worldRenderer: WorldRendererThree, documentRenderer: DocumentRenderer) {\r\n  if (!('xr' in navigator) || !worldRenderer.worldRendererConfig.vrSupport) return\r\n  const { renderer } = worldRenderer\r\n\r\n  const isSupported = await checkVRSupport()\r\n  if (!isSupported) return\r\n\r\n  enableVr()\r\n\r\n  const vrButtonContainer = createVrButtonContainer(renderer)\r\n  const updateVrButtons = () => {\r\n    const newHidden = !worldRenderer.worldRendererConfig.vrSupport || !worldRenderer.worldRendererConfig.foreground\r\n    if (vrButtonContainer.hidden !== newHidden) {\r\n      vrButtonContainer.hidden = newHidden\r\n    }\r\n  }\r\n\r\n  worldRenderer.onRender.push(updateVrButtons)\r\n\r\n  function enableVr () {\r\n    renderer.xr.enabled = true\r\n    // renderer.xr.setReferenceSpaceType('local-floor')\r\n    worldRenderer.reactiveState.preventEscapeMenu = true\r\n  }\r\n\r\n  function disableVr () {\r\n    renderer.xr.enabled = false\r\n    worldRenderer.cameraGroupVr = undefined\r\n    worldRenderer.reactiveState.preventEscapeMenu = false\r\n    worldRenderer.scene.remove(user)\r\n    vrButtonContainer.hidden = true\r\n  }\r\n\r\n  function createVrButtonContainer (renderer) {\r\n    const container = document.createElement('div')\r\n    const vrButton = VRButton.createButton(renderer)\r\n    styleContainer(container)\r\n\r\n    const closeButton = createCloseButton(container)\r\n\r\n    container.appendChild(vrButton)\r\n    container.appendChild(closeButton)\r\n    document.body.appendChild(container)\r\n\r\n    return container\r\n  }\r\n\r\n  function styleContainer (container: HTMLElement) {\r\n    typedAssign(container.style, {\r\n      position: 'absolute',\r\n      bottom: '80px',\r\n      left: '0',\r\n      right: '0',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      zIndex: '8',\r\n      gap: '8px',\r\n    })\r\n  }\r\n\r\n  function createCloseButton (container: HTMLElement) {\r\n    const closeButton = document.createElement('button')\r\n    closeButton.textContent = 'X'\r\n    typedAssign(closeButton.style, {\r\n      padding: '0 12px',\r\n      color: 'white',\r\n      fontSize: '14px',\r\n      lineHeight: '20px',\r\n      cursor: 'pointer',\r\n      background: 'transparent',\r\n      border: '1px solid rgb(255, 255, 255)',\r\n      borderRadius: '4px',\r\n      opacity: '0.7',\r\n    })\r\n\r\n    closeButton.addEventListener('click', () => {\r\n      container.hidden = true\r\n      worldRenderer.worldRendererConfig.vrSupport = false\r\n    })\r\n\r\n    return closeButton\r\n  }\r\n\r\n\r\n  async function checkVRSupport () {\r\n    try {\r\n      const supported = await navigator.xr?.isSessionSupported('immersive-vr')\r\n      return supported && !!XRSession.prototype.updateRenderState\r\n    } catch (err) {\r\n      console.error('Error checking if VR is supported', err)\r\n      return false\r\n    }\r\n  }\r\n\r\n  // hack for vr camera\r\n  const user = new THREE.Group()\r\n  user.name = 'vr-camera-container'\r\n  worldRenderer.scene.add(user)\r\n  const controllerModelFactory = new XRControllerModelFactory(new GLTFLoader())\r\n  const controller1 = renderer.xr.getControllerGrip(0)\r\n  const controller2 = renderer.xr.getControllerGrip(1)\r\n\r\n  // todo the logic written here can be hard to understand as it was designed to work in gamepad api emulation mode, will be refactored once there is a contro-max rewrite is done\r\n  const virtualGamepadIndex = 4\r\n  let connectedVirtualGamepad\r\n  //@ts-expect-error\r\n  const manageXrInputSource = ({ gamepad, handedness = defaultHandedness }, defaultHandedness, removeAction = false) => {\r\n    if (handedness === 'right') {\r\n      const event: any = new Event(removeAction ? 'gamepaddisconnected' : 'gamepadconnected') // todo need to expose and use external gamepads api in contro-max instead\r\n      event.gamepad = removeAction ? connectedVirtualGamepad : { ...gamepad, mapping: 'standard', index: virtualGamepadIndex }\r\n      connectedVirtualGamepad = event.gamepad\r\n      window.dispatchEvent(event)\r\n    }\r\n  }\r\n  let hand1: any = controllerModelFactory.createControllerModel(controller1)\r\n  controller1.addEventListener('connected', (event) => {\r\n    hand1.xrInputSource = event.data\r\n    manageXrInputSource(event.data, 'left')\r\n    user.add(controller1)\r\n  })\r\n  controller1.add(hand1)\r\n  let hand2: any = controllerModelFactory.createControllerModel(controller2)\r\n  controller2.addEventListener('connected', (event) => {\r\n    hand2.xrInputSource = event.data\r\n    manageXrInputSource(event.data, 'right')\r\n    user.add(controller2)\r\n  })\r\n  controller2.add(hand2)\r\n\r\n  controller1.addEventListener('disconnected', () => {\r\n    // don't handle removal of gamepads for now as is don't affect contro-max\r\n    manageXrInputSource(hand1.xrInputSource, 'left', true)\r\n    hand1.xrInputSource = undefined\r\n  })\r\n  controller2.addEventListener('disconnected', () => {\r\n    manageXrInputSource(hand1.xrInputSource, 'right', true)\r\n    hand2.xrInputSource = undefined\r\n  })\r\n\r\n  const originalGetGamepads = navigator.getGamepads.bind(navigator)\r\n  // is it okay to patch this?\r\n  //@ts-expect-error\r\n  navigator.getGamepads = () => {\r\n    const originalGamepads = originalGetGamepads()\r\n    if (!hand1.xrInputSource || !hand2.xrInputSource) return originalGamepads\r\n    return [\r\n      ...originalGamepads,\r\n      {\r\n        axes: remapAxes(hand2.xrInputSource.gamepad.axes, hand1.xrInputSource.gamepad.axes),\r\n        buttons: remapButtons(hand2.xrInputSource.gamepad.buttons, hand1.xrInputSource.gamepad.buttons),\r\n        connected: true,\r\n        mapping: 'standard',\r\n        id: '',\r\n        index: virtualGamepadIndex\r\n      }\r\n    ]\r\n  }\r\n\r\n  let rotSnapReset = true\r\n  let yawOffset = 0\r\n  renderer.setAnimationLoop(() => {\r\n    if (!renderer.xr.isPresenting) return\r\n    if (hand1.xrInputSource && hand2.xrInputSource) {\r\n      hand1.xAxis = hand1.xrInputSource.gamepad.axes[2]\r\n      hand1.yAxis = hand1.xrInputSource.gamepad.axes[3]\r\n      hand2.xAxis = hand2.xrInputSource.gamepad.axes[2]\r\n      hand2.yAxis = hand2.xrInputSource.gamepad.axes[3]\r\n      // hand2 should be right\r\n      if (hand1.xrInputSource.handedness === 'right') {\r\n        const tmp = hand2\r\n        hand2 = hand1\r\n        hand1 = tmp\r\n      }\r\n    }\r\n\r\n    if (rotSnapReset) {\r\n      if (Math.abs(hand1.xAxis) > 0.8) {\r\n        yawOffset -= Math.PI / 4 * Math.sign(hand1.xAxis)\r\n        rotSnapReset = false\r\n      }\r\n    } else if (Math.abs(hand1.xAxis) < 0.1) {\r\n      rotSnapReset = true\r\n    }\r\n\r\n    // appViewer.backend?.updateCamera(null, yawOffset, 0)\r\n    // worldRenderer.updateCamera(null, bot.entity.yaw, bot.entity.pitch)\r\n\r\n    // todo restore this logic (need to preserve ability to move camera)\r\n    // const xrCamera = renderer.xr.getCamera()\r\n    // const d = xrCamera.getWorldDirection(new THREE.Vector3())\r\n    // bot.entity.yaw = Math.atan2(-d.x, -d.z)\r\n    // bot.entity.pitch = Math.asin(d.y)\r\n\r\n    documentRenderer.frameRender(false)\r\n  })\r\n  renderer.xr.addEventListener('sessionstart', () => {\r\n    user.add(worldRenderer.camera)\r\n    worldRenderer.cameraGroupVr = user\r\n  })\r\n  renderer.xr.addEventListener('sessionend', () => {\r\n    worldRenderer.cameraGroupVr = undefined\r\n    user.remove(worldRenderer.camera)\r\n  })\r\n\r\n  worldRenderer.abortController.signal.addEventListener('abort', disableVr)\r\n}\r\n\r\nconst xrStandardRightButtonsMap = [\r\n  [0 /* trigger */, 'Right Trigger'],\r\n  [1 /* squeeze */, 'Right Bumper'],\r\n  // need to think of a way to support touchpad input\r\n  [3 /* Thumbstick Press */, 'Right Stick'],\r\n  [4 /* A */, 'A'],\r\n  [5 /* B */, 'B'],\r\n]\r\nconst xrStandardLeftButtonsMap = [\r\n  [0 /* trigger */, 'Left Trigger'],\r\n  [1 /* squeeze */, 'Left Bumper'],\r\n  // need to think of a way to support touchpad input\r\n  [3 /* Thumbstick Press */, 'Left Stick'],\r\n  [4 /* A */, 'X'],\r\n  [5 /* B */, 'Y'],\r\n]\r\nconst remapButtons = (rightButtons: any[], leftButtons: any[]) => {\r\n  // return remapped buttons\r\n  const remapped = [] as string[]\r\n  const remapWithMap = (buttons, map) => {\r\n    for (const [index, standardName] of map) {\r\n      const standardMappingIndex = standardButtonsMap.findIndex((aliases) => aliases.find(alias => standardName === alias))\r\n      remapped[standardMappingIndex] = buttons[index]\r\n    }\r\n  }\r\n  remapWithMap(rightButtons, xrStandardRightButtonsMap)\r\n  remapWithMap(leftButtons, xrStandardLeftButtonsMap)\r\n  return remapped\r\n}\r\nconst remapAxes = (axesRight, axesLeft) => {\r\n  // 0, 1 are reserved for touch\r\n  return [\r\n    axesLeft[2],\r\n    axesLeft[3],\r\n    axesRight[2],\r\n    axesRight[3]\r\n  ]\r\n}\r\n\r\nfunction typedAssign<T extends Record<string, any>> (target: T, source: Partial<T>) {\r\n  Object.assign(target, source)\r\n}\r\n","import * as THREE from 'three'\r\nimport { Vec3 } from 'vec3'\r\nimport { GraphicsBackendLoader, GraphicsBackend, GraphicsInitOptions, DisplayWorldOptions } from '../../../src/appViewer'\r\nimport { ProgressReporter } from '../../../src/core/progressReporter'\r\nimport { showNotification } from '../../../src/react/NotificationProvider'\r\nimport { displayEntitiesDebugList } from '../../playground/allEntitiesDebug'\r\nimport supportedVersions from '../../../src/supportedVersions.mjs'\r\nimport { ResourcesManager } from '../../../src/resourcesManager'\r\nimport { WorldRendererThree } from './worldrendererThree'\r\nimport { DocumentRenderer } from './documentRenderer'\r\nimport { PanoramaRenderer } from './panorama'\r\nimport { initVR } from './world/vr'\r\n\r\n// https://discourse.threejs.org/t/updates-to-color-management-in-three-js-r152/50791\r\nTHREE.ColorManagement.enabled = false\r\nglobalThis.THREE = THREE\r\n\r\nconst getBackendMethods = (worldRenderer: WorldRendererThree) => {\r\n  return {\r\n    updateMap: worldRenderer.entities.updateMap.bind(worldRenderer.entities),\r\n    updateCustomBlock: worldRenderer.updateCustomBlock.bind(worldRenderer),\r\n    getBlockInfo: worldRenderer.getBlockInfo.bind(worldRenderer),\r\n    playEntityAnimation: worldRenderer.entities.playAnimation.bind(worldRenderer.entities),\r\n    damageEntity: worldRenderer.entities.handleDamageEvent.bind(worldRenderer.entities),\r\n    updatePlayerSkin: worldRenderer.entities.updatePlayerSkin.bind(worldRenderer.entities),\r\n    changeHandSwingingState: worldRenderer.changeHandSwingingState.bind(worldRenderer),\r\n    getHighestBlocks: worldRenderer.getHighestBlocks.bind(worldRenderer),\r\n    reloadWorld: worldRenderer.reloadWorld.bind(worldRenderer),\r\n\r\n    addMedia: worldRenderer.media.addMedia.bind(worldRenderer.media),\r\n    destroyMedia: worldRenderer.media.destroyMedia.bind(worldRenderer.media),\r\n    setVideoPlaying: worldRenderer.media.setVideoPlaying.bind(worldRenderer.media),\r\n    setVideoSeeking: worldRenderer.media.setVideoSeeking.bind(worldRenderer.media),\r\n    setVideoVolume: worldRenderer.media.setVideoVolume.bind(worldRenderer.media),\r\n    setVideoSpeed: worldRenderer.media.setVideoSpeed.bind(worldRenderer.media),\r\n\r\n    addSectionAnimation (id: string, animation: typeof worldRenderer.sectionsOffsetsAnimations[string]) {\r\n      worldRenderer.sectionsOffsetsAnimations[id] = animation\r\n    },\r\n    removeSectionAnimation (id: string) {\r\n      delete worldRenderer.sectionsOffsetsAnimations[id]\r\n    },\r\n\r\n    shakeFromDamage: worldRenderer.cameraShake.shakeFromDamage.bind(worldRenderer.cameraShake),\r\n    onPageInteraction: worldRenderer.media.onPageInteraction.bind(worldRenderer.media),\r\n    downloadMesherLog: worldRenderer.downloadMesherLog.bind(worldRenderer),\r\n\r\n    addWaypoint: worldRenderer.waypoints.addWaypoint.bind(worldRenderer.waypoints),\r\n    removeWaypoint: worldRenderer.waypoints.removeWaypoint.bind(worldRenderer.waypoints),\r\n\r\n    launchFirework: worldRenderer.fireworks.launchFirework.bind(worldRenderer.fireworks),\r\n\r\n    // New method for updating skybox\r\n    setSkyboxImage: worldRenderer.skyboxRenderer.setSkyboxImage.bind(worldRenderer.skyboxRenderer)\r\n  }\r\n}\r\n\r\nexport type ThreeJsBackendMethods = ReturnType<typeof getBackendMethods>\r\n\r\nconst createGraphicsBackend: GraphicsBackendLoader = (initOptions: GraphicsInitOptions) => {\r\n  // Private state\r\n  const documentRenderer = new DocumentRenderer(initOptions)\r\n  globalThis.renderer = documentRenderer.renderer\r\n\r\n  let panoramaRenderer: PanoramaRenderer | null = null\r\n  let worldRenderer: WorldRendererThree | null = null\r\n\r\n  const startPanorama = async () => {\r\n    if (!documentRenderer) throw new Error('Document renderer not initialized')\r\n    if (worldRenderer) return\r\n    const qs = new URLSearchParams(location.search)\r\n    if (qs.get('debugEntities')) {\r\n      const fullResourceManager = initOptions.resourcesManager as ResourcesManager\r\n      fullResourceManager.currentConfig = { version: qs.get('version') || supportedVersions.at(-1)!, noInventoryGui: true }\r\n      await fullResourceManager.updateAssetsData({ })\r\n\r\n      displayEntitiesDebugList(fullResourceManager.currentConfig.version)\r\n      return\r\n    }\r\n\r\n    if (!panoramaRenderer) {\r\n      panoramaRenderer = new PanoramaRenderer(documentRenderer, initOptions, !!process.env.SINGLE_FILE_BUILD_MODE)\r\n      globalThis.panoramaRenderer = panoramaRenderer\r\n      callModsMethod('panoramaCreated', panoramaRenderer)\r\n      await panoramaRenderer.start()\r\n      callModsMethod('panoramaReady', panoramaRenderer)\r\n    }\r\n  }\r\n\r\n  const startWorld = async (displayOptions: DisplayWorldOptions) => {\r\n    if (panoramaRenderer) {\r\n      panoramaRenderer.dispose()\r\n      panoramaRenderer = null\r\n    }\r\n    worldRenderer = new WorldRendererThree(documentRenderer.renderer, initOptions, displayOptions)\r\n    void initVR(worldRenderer, documentRenderer)\r\n    await worldRenderer.worldReadyPromise\r\n    documentRenderer.render = (sizeChanged: boolean) => {\r\n      worldRenderer?.render(sizeChanged)\r\n    }\r\n    documentRenderer.inWorldRenderingConfig = displayOptions.inWorldRenderingConfig\r\n    window.world = worldRenderer\r\n    callModsMethod('worldReady', worldRenderer)\r\n  }\r\n\r\n  const disconnect = () => {\r\n    if (panoramaRenderer) {\r\n      panoramaRenderer.dispose()\r\n      panoramaRenderer = null\r\n    }\r\n    if (documentRenderer) {\r\n      documentRenderer.dispose()\r\n    }\r\n    if (worldRenderer) {\r\n      worldRenderer.destroy()\r\n      worldRenderer = null\r\n    }\r\n  }\r\n\r\n  // Public interface\r\n  const backend: GraphicsBackend = {\r\n    id: 'threejs',\r\n    displayName: `three.js ${THREE.REVISION}`,\r\n    startPanorama,\r\n    startWorld,\r\n    disconnect,\r\n    setRendering (rendering) {\r\n      documentRenderer.setPaused(!rendering)\r\n      if (worldRenderer) worldRenderer.renderingActive = rendering\r\n    },\r\n    getDebugOverlay: () => ({\r\n      get entitiesString () {\r\n        return worldRenderer?.entities.getDebugString()\r\n      },\r\n    }),\r\n    updateCamera (pos: Vec3 | null, yaw: number, pitch: number) {\r\n      worldRenderer?.setFirstPersonCamera(pos, yaw, pitch)\r\n    },\r\n    get soundSystem () {\r\n      return worldRenderer?.soundSystem\r\n    },\r\n    get backendMethods () {\r\n      if (!worldRenderer) return undefined\r\n      return getBackendMethods(worldRenderer)\r\n    }\r\n  }\r\n\r\n  globalThis.threeJsBackend = backend\r\n  globalThis.resourcesManager = initOptions.resourcesManager\r\n  callModsMethod('default', backend)\r\n\r\n  return backend\r\n}\r\n\r\nconst callModsMethod = (method: string, ...args: any[]) => {\r\n  for (const mod of Object.values((window.loadedMods ?? {}) as Record<string, any>)) {\r\n    try {\r\n      mod.threeJsBackendModule?.[method]?.(...args)\r\n    } catch (err) {\r\n      const errorMessage = `[mod three.js] Error calling ${method} on ${mod.name}: ${err}`\r\n      showNotification(errorMessage, 'error')\r\n      throw new Error(errorMessage)\r\n    }\r\n  }\r\n}\r\n\r\ncreateGraphicsBackend.id = 'threejs'\r\nexport default createGraphicsBackend\r\n","// Import placeholders - replace with actual imports for your environment\r\nimport { ItemRenderer, Identifier, ItemStack, NbtString, Structure, StructureRenderer, ItemRendererResources, BlockDefinition, BlockModel, TextureAtlas, Resources, ItemModel } from 'deepslate'\r\nimport { mat4, vec3 } from 'gl-matrix'\r\nimport { AssetsParser } from 'mc-assets/dist/assetsParser'\r\nimport { getLoadedImage, versionToNumber } from 'mc-assets/dist/utils'\r\nimport { BlockModel as BlockModelMcAssets, AtlasParser } from 'mc-assets'\r\nimport { getLoadedBlockstatesStore, getLoadedModelsStore } from 'mc-assets/dist/stores'\r\nimport { makeTextureAtlas } from 'mc-assets/dist/atlasCreator'\r\nimport { proxy, ref } from 'valtio'\r\nimport { getItemDefinition } from 'mc-assets/dist/itemDefinitions'\r\n\r\nexport const getNonFullBlocksModels = () => {\r\n  let version = appViewer.resourcesManager.currentResources!.version ?? 'latest'\r\n  if (versionToNumber(version) < versionToNumber('1.13')) version = '1.13'\r\n  const itemsDefinitions = appViewer.resourcesManager.itemsDefinitionsStore.data.latest\r\n  const blockModelsResolved = {} as Record<string, any>\r\n  const itemsModelsResolved = {} as Record<string, any>\r\n  const fullBlocksWithNonStandardDisplay = [] as string[]\r\n  const handledItemsWithDefinitions = new Set()\r\n  const assetsParser = new AssetsParser(version, getLoadedBlockstatesStore(appViewer.resourcesManager.currentResources!.blockstatesModels), getLoadedModelsStore(appViewer.resourcesManager.currentResources!.blockstatesModels))\r\n\r\n  const standardGuiDisplay = {\r\n    'rotation': [\r\n      30,\r\n      225,\r\n      0\r\n    ],\r\n    'translation': [\r\n      0,\r\n      0,\r\n      0\r\n    ],\r\n    'scale': [\r\n      0.625,\r\n      0.625,\r\n      0.625\r\n    ]\r\n  }\r\n\r\n  const arrEqual = (a: number[], b: number[]) => a.length === b.length && a.every((x, i) => x === b[i])\r\n  const addModelIfNotFullblock = (name: string, model: BlockModelMcAssets) => {\r\n    if (blockModelsResolved[name]) return\r\n    if (!model?.elements?.length) return\r\n    const isFullBlock = model.elements.length === 1 && arrEqual(model.elements[0].from, [0, 0, 0]) && arrEqual(model.elements[0].to, [16, 16, 16])\r\n    if (isFullBlock) return\r\n    const hasBetterPrerender = assetsParser.blockModelsStore.data.latest[`item/${name}`]?.textures?.['layer0']?.startsWith('invsprite_')\r\n    if (hasBetterPrerender) return\r\n    model['display'] ??= {}\r\n    model['display']['gui'] ??= standardGuiDisplay\r\n    blockModelsResolved[name] = model\r\n  }\r\n\r\n  for (const [name, definition] of Object.entries(itemsDefinitions)) {\r\n    const item = getItemDefinition(appViewer.resourcesManager.itemsDefinitionsStore, {\r\n      version,\r\n      name,\r\n      properties: {\r\n        'minecraft:display_context': 'gui',\r\n      },\r\n    })\r\n    if (item) {\r\n      const { resolvedModel } = assetsParser.getResolvedModelsByModel((item.special ? name : item.model).replace('minecraft:', '')) ?? {}\r\n      if (resolvedModel) {\r\n        handledItemsWithDefinitions.add(name)\r\n      }\r\n      if (resolvedModel?.elements) {\r\n        let hasStandardDisplay = true\r\n        if (resolvedModel['display']?.gui) {\r\n          hasStandardDisplay =\r\n            arrEqual(resolvedModel['display'].gui.rotation, standardGuiDisplay.rotation)\r\n            && arrEqual(resolvedModel['display'].gui.translation, standardGuiDisplay.translation)\r\n            && arrEqual(resolvedModel['display'].gui.scale, standardGuiDisplay.scale)\r\n        }\r\n\r\n        addModelIfNotFullblock(name, resolvedModel)\r\n\r\n        if (!blockModelsResolved[name] && !hasStandardDisplay) {\r\n          fullBlocksWithNonStandardDisplay.push(name)\r\n        }\r\n        const notSideLight = resolvedModel['gui_light'] && resolvedModel['gui_light'] !== 'side'\r\n        if (!hasStandardDisplay || notSideLight) {\r\n          blockModelsResolved[name] = resolvedModel\r\n        }\r\n      }\r\n      if (!blockModelsResolved[name] && item.tints && resolvedModel) {\r\n        resolvedModel['tints'] = item.tints\r\n        if (resolvedModel.elements) {\r\n          blockModelsResolved[name] = resolvedModel\r\n        } else {\r\n          itemsModelsResolved[name] = resolvedModel\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  for (const [name, blockstate] of Object.entries(appViewer.resourcesManager.currentResources!.blockstatesModels.blockstates.latest)) {\r\n    if (handledItemsWithDefinitions.has(name)) {\r\n      continue\r\n    }\r\n    const resolvedModel = assetsParser.getResolvedModelFirst({ name: name.replace('minecraft:', ''), properties: {} }, true)\r\n    if (resolvedModel) {\r\n      addModelIfNotFullblock(name, resolvedModel[0])\r\n    }\r\n  }\r\n\r\n  return {\r\n    blockModelsResolved,\r\n    itemsModelsResolved\r\n  }\r\n}\r\n\r\n// customEvents.on('gameLoaded', () => {\r\n//   const res = getNonFullBlocksModels()\r\n// })\r\n\r\nconst RENDER_SIZE = 64\r\n\r\nconst generateItemsGui = async (models: Record<string, BlockModelMcAssets>, isItems = false) => {\r\n  const { currentResources } = appViewer.resourcesManager\r\n  const imgBitmap = isItems ? currentResources!.itemsAtlasImage : currentResources!.blocksAtlasImage\r\n  const canvasTemp = document.createElement('canvas')\r\n  canvasTemp.width = imgBitmap.width\r\n  canvasTemp.height = imgBitmap.height\r\n  canvasTemp.style.imageRendering = 'pixelated'\r\n  const ctx = canvasTemp.getContext('2d')!\r\n  ctx.imageSmoothingEnabled = false\r\n  ctx.drawImage(imgBitmap, 0, 0)\r\n\r\n  const atlasParser = isItems ? appViewer.resourcesManager.itemsAtlasParser : appViewer.resourcesManager.blocksAtlasParser\r\n  const textureAtlas = new TextureAtlas(\r\n    ctx.getImageData(0, 0, imgBitmap.width, imgBitmap.height),\r\n    Object.fromEntries(Object.entries(atlasParser.atlas.latest.textures).map(([key, value]) => {\r\n      return [key, [\r\n        value.u,\r\n        value.v,\r\n        (value.u + (value.su ?? atlasParser.atlas.latest.suSv)),\r\n        (value.v + (value.sv ?? atlasParser.atlas.latest.suSv)),\r\n      ]] as [string, [number, number, number, number]]\r\n    }))\r\n  )\r\n\r\n  const PREVIEW_ID = Identifier.parse('preview:preview')\r\n  const PREVIEW_DEFINITION = new BlockDefinition({ '': { model: PREVIEW_ID.toString() } }, undefined)\r\n\r\n  let textureWasRequested = false\r\n  let modelData: any\r\n  let currentModelName: string | undefined\r\n  const resources: ItemRendererResources = {\r\n    getBlockModel (id) {\r\n      if (id.equals(PREVIEW_ID)) {\r\n        return BlockModel.fromJson(modelData ?? {})\r\n      }\r\n      return null\r\n    },\r\n    getTextureUV (texture) {\r\n      textureWasRequested = true\r\n      return textureAtlas.getTextureUV(texture.toString().replace('minecraft:', '').replace('block/', '').replace('item/', '').replace('blocks/', '').replace('items/', '') as any)\r\n    },\r\n    getTextureAtlas () {\r\n      return textureAtlas.getTextureAtlas()\r\n    },\r\n    getItemComponents (id) {\r\n      return new Map()\r\n    },\r\n    getItemModel (id) {\r\n      // const isSpecial = currentModelName === 'shield' || currentModelName === 'conduit' || currentModelName === 'trident'\r\n      const isSpecial = false\r\n      if (id.equals(PREVIEW_ID)) {\r\n        return ItemModel.fromJson({\r\n          type: isSpecial ? 'minecraft:special' : 'minecraft:model',\r\n          model: isSpecial ? {\r\n            type: currentModelName,\r\n          } : PREVIEW_ID.toString(),\r\n          base: PREVIEW_ID.toString(),\r\n          tints: modelData?.tints,\r\n        })\r\n      }\r\n      return null\r\n    },\r\n  }\r\n\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = RENDER_SIZE\r\n  canvas.height = RENDER_SIZE\r\n  const gl = canvas.getContext('webgl2', { preserveDrawingBuffer: true })\r\n  if (!gl) {\r\n    throw new Error('Cannot get WebGL2 context')\r\n  }\r\n\r\n  function resetGLContext (gl) {\r\n    gl.clearColor(0, 0, 0, 0)\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT)\r\n  }\r\n\r\n  // const includeOnly = ['powered_repeater', 'wooden_door']\r\n  const includeOnly = [] as string[]\r\n\r\n  const images: Record<string, HTMLImageElement> = {}\r\n  const item = new ItemStack(PREVIEW_ID, 1, new Map(Object.entries({\r\n    'minecraft:item_model': new NbtString(PREVIEW_ID.toString()),\r\n  })))\r\n  const renderer = new ItemRenderer(gl, item, resources, { display_context: 'gui' })\r\n  const missingTextures = new Set()\r\n  for (const [modelName, model] of Object.entries(models)) {\r\n    textureWasRequested = false\r\n    if (includeOnly.length && !includeOnly.includes(modelName)) continue\r\n\r\n    const patchMissingTextures = () => {\r\n      for (const element of model.elements ?? []) {\r\n        for (const [faceName, face] of Object.entries(element.faces)) {\r\n          if (face.texture.startsWith('#')) {\r\n            missingTextures.add(`${modelName} ${faceName}: ${face.texture}`)\r\n            face.texture = 'block/unknown'\r\n          }\r\n        }\r\n      }\r\n    }\r\n    patchMissingTextures()\r\n    // TODO eggs\r\n\r\n    modelData = model\r\n    currentModelName = modelName\r\n    resetGLContext(gl)\r\n    if (!modelData) continue\r\n    renderer.setItem(item, { display_context: 'gui' })\r\n    renderer.drawItem()\r\n    if (!textureWasRequested) continue\r\n    const url = canvas.toDataURL()\r\n    // eslint-disable-next-line no-await-in-loop\r\n    const img = await getLoadedImage(url)\r\n    images[modelName] = img\r\n  }\r\n\r\n  if (missingTextures.size) {\r\n    console.warn(`[guiRenderer] Missing textures in ${[...missingTextures].join(', ')}`)\r\n  }\r\n\r\n  return images\r\n}\r\n\r\n/**\r\n * @mainThread\r\n */\r\nconst generateAtlas = async (images: Record<string, HTMLImageElement>) => {\r\n  const atlas = makeTextureAtlas({\r\n    input: Object.keys(images),\r\n    tileSize: RENDER_SIZE,\r\n    getLoadedImage (name) {\r\n      return {\r\n        image: images[name],\r\n      }\r\n    },\r\n  })\r\n\r\n  // const atlasParser = new AtlasParser({ latest: atlas.json }, atlas.canvas.toDataURL())\r\n  // const a = document.createElement('a')\r\n  // a.href = await atlasParser.createDebugImage(true)\r\n  // a.download = 'blocks_atlas.png'\r\n  // a.click()\r\n\r\n  appViewer.resourcesManager.currentResources!.guiAtlas = {\r\n    json: atlas.json,\r\n    image: await createImageBitmap(atlas.canvas),\r\n  }\r\n\r\n  return atlas\r\n}\r\n\r\nexport const generateGuiAtlas = async () => {\r\n  const { blockModelsResolved, itemsModelsResolved } = getNonFullBlocksModels()\r\n\r\n  // Generate blocks atlas\r\n  console.time('generate blocks gui atlas')\r\n  const blockImages = await generateItemsGui(blockModelsResolved, false)\r\n  console.timeEnd('generate blocks gui atlas')\r\n  console.time('generate items gui atlas')\r\n  const itemImages = await generateItemsGui(itemsModelsResolved, true)\r\n  console.timeEnd('generate items gui atlas')\r\n  await generateAtlas({ ...blockImages, ...itemImages })\r\n  appViewer.resourcesManager.currentResources!.guiAtlasVersion++\r\n  // await generateAtlas(blockImages)\r\n}\r\n","import { EventEmitter } from 'events'\r\nimport TypedEmitter from 'typed-emitter'\r\nimport blocksAtlases from 'mc-assets/dist/blocksAtlases.json'\r\nimport itemsAtlases from 'mc-assets/dist/itemsAtlases.json'\r\nimport itemDefinitionsJson from 'mc-assets/dist/itemDefinitions.json'\r\nimport blocksAtlasLatest from 'mc-assets/dist/blocksAtlasLatest.png'\r\nimport blocksAtlasLegacy from 'mc-assets/dist/blocksAtlasLegacy.png'\r\nimport itemsAtlasLatest from 'mc-assets/dist/itemsAtlasLatest.png'\r\nimport itemsAtlasLegacy from 'mc-assets/dist/itemsAtlasLegacy.png'\r\nimport christmasPack from 'mc-assets/dist/textureReplacements/christmas'\r\nimport { AtlasParser, ItemsAtlasesOutputJson } from 'mc-assets/dist/atlasParser'\r\nimport worldBlockProvider, { WorldBlockProvider } from 'mc-assets/dist/worldBlockProvider'\r\nimport { ItemsRenderer } from 'mc-assets/dist/itemsRenderer'\r\nimport { getLoadedItemDefinitionsStore } from 'mc-assets'\r\nimport { generateGuiAtlas } from 'renderer/viewer/lib/guiRenderer'\r\nimport { importLargeData } from '../generated/large-data-aliases'\r\n\r\ntype ResourceManagerEvents = {\r\n  assetsTexturesUpdated: () => void\r\n  assetsInventoryStarted: () => void\r\n  assetsInventoryReady: () => void\r\n}\r\n\r\nexport class LoadedResourcesTransferrable {\r\n  allReady = false\r\n  // Atlas parsers\r\n  itemsAtlasImage: ImageBitmap\r\n  blocksAtlasImage: ImageBitmap\r\n  blocksAtlasJson: ItemsAtlasesOutputJson\r\n  // User data (specific to current resourcepack/version)\r\n  customBlockStates?: Record<string, any>\r\n  customModels?: Record<string, any>\r\n  /** array where the index represents the custom model data value, and the element at that index is the model path to use */\r\n  customItemModelNames: Record<string, string[]> = {}\r\n  customTextures: {\r\n    items?: { tileSize: number | undefined, textures: Record<string, HTMLImageElement> }\r\n    blocks?: { tileSize: number | undefined, textures: Record<string, HTMLImageElement> }\r\n    armor?: { tileSize: number | undefined, textures: Record<string, HTMLImageElement> }\r\n  } = {}\r\n  guiAtlas: { json: any, image: ImageBitmap } | null = null\r\n  guiAtlasVersion = 0\r\n\r\n  itemsRenderer: ItemsRenderer\r\n  worldBlockProvider?: WorldBlockProvider\r\n  blockstatesModels: any = null\r\n\r\n  version: string\r\n  texturesVersion: string\r\n}\r\n\r\nexport interface ResourcesCurrentConfig {\r\n  version: string\r\n  texturesVersion?: string\r\n  // noBlockstatesModels?: boolean\r\n  noInventoryGui?: boolean\r\n  includeOnlyBlocks?: string[]\r\n}\r\n\r\nexport interface UpdateAssetsRequest {\r\n  _?: false\r\n}\r\n\r\nexport interface ResourcesManagerTransferred extends TypedEmitter<ResourceManagerEvents> {\r\n  currentResources: LoadedResourcesTransferrable\r\n}\r\nexport interface ResourcesManagerCommon extends TypedEmitter<ResourceManagerEvents> {\r\n  currentResources: LoadedResourcesTransferrable | undefined\r\n}\r\n\r\nconst STABLE_MODELS_VERSION = '1.21.4'\r\nexport class ResourcesManager extends (EventEmitter as new () => TypedEmitter<ResourceManagerEvents>) {\r\n  static restorerName = 'ResourcesManager'\r\n\r\n  // Source data (imported, not changing)\r\n  sourceBlockStatesModels: any = null\r\n  readonly sourceBlocksAtlases: any = blocksAtlases\r\n  readonly sourceItemsAtlases: any = itemsAtlases\r\n  readonly sourceItemDefinitionsJson: any = itemDefinitionsJson\r\n  readonly itemsDefinitionsStore = getLoadedItemDefinitionsStore(this.sourceItemDefinitionsJson)\r\n\r\n  currentResources: LoadedResourcesTransferrable | undefined\r\n  itemsAtlasParser: AtlasParser\r\n  blocksAtlasParser: AtlasParser\r\n  currentConfig: ResourcesCurrentConfig | undefined\r\n  abortController = new AbortController()\r\n  _promiseAssetsReadyResolvers = Promise.withResolvers<void>()\r\n  get promiseAssetsReady () {\r\n    return this._promiseAssetsReadyResolvers.promise\r\n  }\r\n\r\n  async loadSourceData (version: string) {\r\n    this.sourceBlockStatesModels ??= await importLargeData('blockStatesModels')\r\n  }\r\n\r\n  resetResources () {\r\n    this.currentResources = new LoadedResourcesTransferrable()\r\n  }\r\n\r\n  async updateAssetsData (request: UpdateAssetsRequest, unstableSkipEvent = false) {\r\n    if (!this.currentConfig) throw new Error('No config loaded')\r\n    this._promiseAssetsReadyResolvers = Promise.withResolvers()\r\n    const abortController = new AbortController()\r\n    await this.loadSourceData(this.currentConfig.version)\r\n    if (abortController.signal.aborted) return\r\n\r\n    const resources = this.currentResources ?? new LoadedResourcesTransferrable()\r\n    resources.version = this.currentConfig.version\r\n    resources.texturesVersion = this.currentConfig.texturesVersion ?? resources.version\r\n\r\n    resources.blockstatesModels = {\r\n      blockstates: {},\r\n      models: {}\r\n    }\r\n    // todo-low resolve version\r\n    resources.blockstatesModels.blockstates.latest = {\r\n      ...this.sourceBlockStatesModels.blockstates.latest,\r\n      ...resources.customBlockStates\r\n    }\r\n\r\n    resources.blockstatesModels.models.latest = {\r\n      ...this.sourceBlockStatesModels.models.latest,\r\n      ...resources.customModels\r\n    }\r\n\r\n    console.time('recreateAtlases')\r\n    await Promise.all([\r\n      this.recreateBlockAtlas(resources),\r\n      this.recreateItemsAtlas(resources)\r\n    ])\r\n    console.timeEnd('recreateAtlases')\r\n\r\n    if (abortController.signal.aborted) return\r\n\r\n    if (resources.version && resources.blockstatesModels && this.itemsAtlasParser && this.blocksAtlasParser) {\r\n      resources.itemsRenderer = new ItemsRenderer(\r\n        resources.version,\r\n        resources.blockstatesModels,\r\n        this.itemsAtlasParser,\r\n        this.blocksAtlasParser\r\n      )\r\n    }\r\n\r\n    if (abortController.signal.aborted) return\r\n\r\n    this.currentResources = resources\r\n    resources.allReady = true\r\n    if (!unstableSkipEvent) { // todo rework resourcepack optimization\r\n      this.emit('assetsTexturesUpdated')\r\n    }\r\n\r\n    if (this.currentConfig.noInventoryGui) {\r\n      this._promiseAssetsReadyResolvers.resolve()\r\n    } else {\r\n      this.emit('assetsInventoryStarted')\r\n      void this.generateGuiTextures().then(() => {\r\n        if (abortController.signal.aborted) return\r\n        if (!unstableSkipEvent) {\r\n          this.emit('assetsInventoryReady')\r\n        }\r\n        this._promiseAssetsReadyResolvers.resolve()\r\n      })\r\n    }\r\n  }\r\n\r\n  async recreateBlockAtlas (resources: LoadedResourcesTransferrable = this.currentResources!) {\r\n    const blockTexturesChanges = {} as Record<string, string>\r\n    const date = new Date()\r\n    if ((date.getMonth() === 11 && date.getDate() >= 24) || (date.getMonth() === 0 && date.getDate() <= 6)) {\r\n      Object.assign(blockTexturesChanges, christmasPack)\r\n    }\r\n\r\n    const blocksAssetsParser = new AtlasParser(this.sourceBlocksAtlases, blocksAtlasLatest, blocksAtlasLegacy)\r\n\r\n    const customBlockTextures = Object.keys(resources.customTextures.blocks?.textures ?? {})\r\n    console.time('createBlocksAtlas')\r\n    const { atlas: blocksAtlas, canvas: blocksCanvas } = await blocksAssetsParser.makeNewAtlas(\r\n      resources.texturesVersion,\r\n      (textureName) => {\r\n        if (this.currentConfig!.includeOnlyBlocks && !this.currentConfig!.includeOnlyBlocks.includes(textureName)) return false\r\n        const texture = resources.customTextures.blocks?.textures[textureName]\r\n        return blockTexturesChanges[textureName] ?? texture\r\n      },\r\n      undefined,\r\n      undefined,\r\n      customBlockTextures,\r\n      {\r\n        needHorizontalIndexes: !!this.currentConfig!.includeOnlyBlocks,\r\n      }\r\n    )\r\n    console.timeEnd('createBlocksAtlas')\r\n\r\n    this.blocksAtlasParser = new AtlasParser({ latest: blocksAtlas }, blocksCanvas.toDataURL())\r\n    resources.blocksAtlasImage = await createImageBitmap(blocksCanvas)\r\n    resources.blocksAtlasJson = this.blocksAtlasParser.atlas.latest\r\n\r\n    resources.worldBlockProvider = worldBlockProvider(\r\n      resources.blockstatesModels,\r\n      this.blocksAtlasParser.atlas,\r\n      STABLE_MODELS_VERSION\r\n    )\r\n  }\r\n\r\n  async recreateItemsAtlas (resources: LoadedResourcesTransferrable = this.currentResources!) {\r\n    const itemsAssetsParser = new AtlasParser(this.sourceItemsAtlases, itemsAtlasLatest, itemsAtlasLegacy)\r\n    const customItemTextures = Object.keys(resources.customTextures.items?.textures ?? {})\r\n    const { atlas: itemsAtlas, canvas: itemsCanvas } = await itemsAssetsParser.makeNewAtlas(\r\n      resources.texturesVersion,\r\n      (textureName) => {\r\n        const texture = resources.customTextures.items?.textures[textureName]\r\n        if (!texture) return\r\n        return texture\r\n      },\r\n      resources.customTextures.items?.tileSize,\r\n      undefined,\r\n      customItemTextures\r\n    )\r\n\r\n    this.itemsAtlasParser = new AtlasParser({ latest: itemsAtlas }, itemsCanvas.toDataURL())\r\n    resources.itemsAtlasImage = await createImageBitmap(itemsCanvas)\r\n  }\r\n\r\n  async generateGuiTextures () {\r\n    await generateGuiAtlas()\r\n  }\r\n\r\n  async downloadDebugAtlas (isItems = false) {\r\n    const resources = this.currentResources\r\n    if (!resources) throw new Error('No resources loaded')\r\n    const atlasParser = (isItems ? this.itemsAtlasParser : this.blocksAtlasParser)!\r\n    const dataUrl = await atlasParser.createDebugImage(true)\r\n    const a = document.createElement('a')\r\n    a.href = dataUrl\r\n    a.download = `atlas-debug-${isItems ? 'items' : 'blocks'}.png`\r\n    a.click()\r\n  }\r\n\r\n  destroy () {\r\n    this.abortController.abort()\r\n    this.currentResources = undefined\r\n    this.abortController = new AbortController()\r\n  }\r\n}\r\n","// not all options are watched here\r\n\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { isMobile } from 'renderer/viewer/lib/simpleUtils'\r\nimport { WorldDataEmitter } from 'renderer/viewer/lib/worldDataEmitter'\r\nimport { setSkinsConfig } from 'renderer/viewer/lib/utils/skins'\r\nimport { options, watchValue } from './optionsStorage'\r\nimport { reloadChunks } from './utils'\r\nimport { miscUiState } from './globalState'\r\nimport { isCypress } from './standaloneUtils'\r\n\r\nsubscribeKey(options, 'renderDistance', reloadChunks)\r\nsubscribeKey(options, 'multiplayerRenderDistance', reloadChunks)\r\n\r\nwatchValue(options, o => {\r\n  document.documentElement.style.setProperty('--chatScale', `${o.chatScale / 100}`)\r\n  document.documentElement.style.setProperty('--chatWidth', `${o.chatWidth}px`)\r\n  document.documentElement.style.setProperty('--chatHeight', `${o.chatHeight}px`)\r\n  // gui scale is set in scaleInterface.ts\r\n})\r\nconst updateTouch = (o) => {\r\n  miscUiState.currentTouch = o.alwaysShowMobileControls || isMobile()\r\n}\r\nwatchValue(options, updateTouch)\r\nwindow.matchMedia('(pointer: coarse)').addEventListener('change', (e) => {\r\n  updateTouch(options)\r\n})\r\n\r\n/** happens once */\r\nexport const watchOptionsAfterViewerInit = () => {\r\n  watchValue(options, o => {\r\n    appViewer.inWorldRenderingConfig.showChunkBorders = o.showChunkBorders\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    appViewer.inWorldRenderingConfig.mesherWorkers = o.lowMemoryMode ? 1 : o.numWorkers\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    appViewer.inWorldRenderingConfig.renderEntities = o.renderEntities\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    const { renderDebug } = o\r\n    if (renderDebug === 'none' || isCypress()) {\r\n      appViewer.config.statsVisible = 0\r\n    } else if (o.renderDebug === 'basic') {\r\n      appViewer.config.statsVisible = 1\r\n    } else if (o.renderDebug === 'advanced') {\r\n      appViewer.config.statsVisible = 2\r\n    }\r\n  })\r\n\r\n  // Track window focus state and update FPS limit accordingly\r\n  let windowFocused = true\r\n  const updateFpsLimit = (o: typeof options) => {\r\n    const backgroundFpsLimit = o.backgroundRendering\r\n    const normalFpsLimit = o.frameLimit\r\n\r\n    if (windowFocused) {\r\n      appViewer.config.fpsLimit = normalFpsLimit || undefined\r\n    } else if (backgroundFpsLimit === '5fps') {\r\n      appViewer.config.fpsLimit = 5\r\n    } else if (backgroundFpsLimit === '20fps') {\r\n      appViewer.config.fpsLimit = 20\r\n    } else {\r\n      appViewer.config.fpsLimit = undefined\r\n    }\r\n  }\r\n\r\n  window.addEventListener('focus', () => {\r\n    windowFocused = true\r\n    updateFpsLimit(options)\r\n  })\r\n  window.addEventListener('blur', () => {\r\n    windowFocused = false\r\n    updateFpsLimit(options)\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    updateFpsLimit(o)\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    appViewer.inWorldRenderingConfig.volume = Math.max(o.volume / 100, 0)\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    appViewer.inWorldRenderingConfig.vrSupport = o.vrSupport\r\n    appViewer.inWorldRenderingConfig.vrPageGameRendering = o.vrPageGameRendering\r\n    appViewer.inWorldRenderingConfig.enableDebugOverlay = o.rendererPerfDebugOverlay\r\n  })\r\n\r\n  watchValue(options, (o, isChanged) => {\r\n    appViewer.inWorldRenderingConfig.clipWorldBelowY = o.clipWorldBelowY\r\n    appViewer.inWorldRenderingConfig.extraBlockRenderers = !o.disableBlockEntityTextures\r\n    appViewer.inWorldRenderingConfig.fetchPlayerSkins = o.loadPlayerSkins\r\n    appViewer.inWorldRenderingConfig.highlightBlockColor = o.highlightBlockColor\r\n    appViewer.inWorldRenderingConfig._experimentalSmoothChunkLoading = o.rendererSharedOptions._experimentalSmoothChunkLoading\r\n    appViewer.inWorldRenderingConfig._renderByChunks = o.rendererSharedOptions._renderByChunks\r\n\r\n    setSkinsConfig({ apiEnabled: o.loadPlayerSkins })\r\n  })\r\n\r\n  appViewer.inWorldRenderingConfig.smoothLighting = options.smoothLighting\r\n  subscribeKey(options, 'smoothLighting', () => {\r\n    appViewer.inWorldRenderingConfig.smoothLighting = options.smoothLighting\r\n  })\r\n\r\n  subscribeKey(options, 'newVersionsLighting', () => {\r\n    appViewer.inWorldRenderingConfig.enableLighting = !bot.supportFeature('blockStateId') || options.newVersionsLighting\r\n  })\r\n\r\n  customEvents.on('mineflayerBotCreated', () => {\r\n    appViewer.inWorldRenderingConfig.enableLighting = !bot.supportFeature('blockStateId') || options.newVersionsLighting\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    appViewer.inWorldRenderingConfig.starfield = o.starfieldRendering\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    appViewer.inWorldRenderingConfig.defaultSkybox = o.defaultSkybox\r\n  })\r\n\r\n  watchValue(options, o => {\r\n    // appViewer.inWorldRenderingConfig.neighborChunkUpdates = o.neighborChunkUpdates\r\n  })\r\n}\r\n\r\nexport const watchOptionsAfterWorldViewInit = (worldView: WorldDataEmitter) => {\r\n  watchValue(options, o => {\r\n    if (!worldView) return\r\n    worldView.keepChunksDistance = o.keepChunksDistance\r\n    appViewer.inWorldRenderingConfig.renderEars = o.renderEars\r\n    appViewer.inWorldRenderingConfig.showHand = o.showHand\r\n    appViewer.inWorldRenderingConfig.viewBobbing = o.viewBobbing\r\n    appViewer.inWorldRenderingConfig.dayCycle = o.dayCycleAndLighting\r\n  })\r\n}\r\n","import { WorldDataEmitter, WorldDataEmitterWorker } from 'renderer/viewer/lib/worldDataEmitter'\r\nimport { getInitialPlayerState, PlayerStateRenderer, PlayerStateReactive } from 'renderer/viewer/lib/basePlayerState'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { defaultWorldRendererConfig, WorldRendererConfig } from 'renderer/viewer/lib/worldrendererCommon'\r\nimport { Vec3 } from 'vec3'\r\nimport { SoundSystem } from 'renderer/viewer/three/threeJsSound'\r\nimport { proxy, subscribe } from 'valtio'\r\nimport { getDefaultRendererState } from 'renderer/viewer/baseGraphicsBackend'\r\nimport { getSyncWorld } from 'renderer/playground/shared'\r\nimport { MaybePromise } from 'contro-max/build/types/store'\r\nimport { PANORAMA_VERSION } from 'renderer/viewer/three/panoramaShared'\r\nimport { playerState } from './mineflayer/playerState'\r\nimport { createNotificationProgressReporter, ProgressReporter } from './core/progressReporter'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { activeModalStack, miscUiState } from './globalState'\r\nimport { options } from './optionsStorage'\r\nimport { ResourcesManager, ResourcesManagerTransferred } from './resourcesManager'\r\nimport { watchOptionsAfterWorldViewInit } from './watchOptions'\r\nimport { loadMinecraftData } from './connect'\r\nimport { reloadChunks } from './utils'\r\nimport { displayClientChat } from './botUtils'\r\nimport { isPlayground } from './playgroundIntegration'\r\n\r\nexport interface RendererReactiveState {\r\n  world: {\r\n    chunksLoaded: Set<string>\r\n    // chunksTotalNumber: number\r\n    heightmaps: Map<string, Uint8Array>\r\n    allChunksLoaded: boolean\r\n    mesherWork: boolean\r\n    intersectMedia: { id: string, x: number, y: number } | null\r\n  }\r\n  renderer: string\r\n  preventEscapeMenu: boolean\r\n}\r\nexport interface NonReactiveState {\r\n  world: {\r\n    chunksLoaded: Set<string>\r\n    chunksTotalNumber: number\r\n  }\r\n}\r\n\r\nexport interface GraphicsBackendConfig {\r\n  fpsLimit?: number\r\n  powerPreference?: 'high-performance' | 'low-power'\r\n  statsVisible?: number\r\n  sceneBackground: string\r\n  timeoutRendering?: boolean\r\n}\r\n\r\nconst defaultGraphicsBackendConfig: GraphicsBackendConfig = {\r\n  fpsLimit: undefined,\r\n  powerPreference: undefined,\r\n  sceneBackground: 'lightblue',\r\n  timeoutRendering: false\r\n}\r\n\r\nexport interface GraphicsInitOptions<S = any> {\r\n  resourcesManager: ResourcesManagerTransferred\r\n  config: GraphicsBackendConfig\r\n  rendererSpecificSettings: S\r\n\r\n  callbacks: {\r\n    displayCriticalError: (error: Error) => void\r\n    setRendererSpecificSettings: (key: string, value: any) => void\r\n\r\n    fireCustomEvent: (eventName: string, ...args: any[]) => void\r\n  }\r\n}\r\n\r\nexport interface DisplayWorldOptions {\r\n  version: string\r\n  worldView: WorldDataEmitterWorker\r\n  inWorldRenderingConfig: WorldRendererConfig\r\n  playerStateReactive: PlayerStateReactive\r\n  rendererState: RendererReactiveState\r\n  nonReactiveState: NonReactiveState\r\n}\r\n\r\nexport type GraphicsBackendLoader = ((options: GraphicsInitOptions) => MaybePromise<GraphicsBackend>) & {\r\n  id: string\r\n}\r\n\r\n// no sync methods\r\nexport interface GraphicsBackend {\r\n  id: string\r\n  displayName?: string\r\n  startPanorama: () => void\r\n  // prepareResources: (version: string, progressReporter: ProgressReporter) => Promise<void>\r\n  startWorld: (options: DisplayWorldOptions) => Promise<void> | void\r\n  disconnect: () => void\r\n  setRendering: (rendering: boolean) => void\r\n  getDebugOverlay?: () => Record<string, any>\r\n  updateCamera: (pos: Vec3 | null, yaw: number, pitch: number) => void\r\n  setRoll?: (roll: number) => void\r\n  soundSystem: SoundSystem | undefined\r\n\r\n  backendMethods: Record<string, unknown> | undefined\r\n}\r\n\r\nexport class AppViewer {\r\n  waitBackendLoadPromises = [] as Array<Promise<void>>\r\n\r\n  resourcesManager = new ResourcesManager()\r\n  worldView: WorldDataEmitter | undefined\r\n  readonly config: GraphicsBackendConfig = {\r\n    ...defaultGraphicsBackendConfig,\r\n    powerPreference: options.gpuPreference === 'default' ? undefined : options.gpuPreference\r\n  }\r\n  backend?: GraphicsBackend\r\n  backendLoader?: GraphicsBackendLoader\r\n  private currentState?: {\r\n    method: string\r\n    args: any[]\r\n  }\r\n  currentDisplay = null as 'menu' | 'world' | null\r\n  inWorldRenderingConfig: WorldRendererConfig = proxy(defaultWorldRendererConfig)\r\n  lastCamUpdate = 0\r\n  playerState = playerState\r\n  rendererState = getDefaultRendererState().reactive\r\n  nonReactiveState: NonReactiveState = getDefaultRendererState().nonReactive\r\n  worldReady: Promise<void>\r\n  private resolveWorldReady: () => void\r\n\r\n  constructor () {\r\n    this.disconnectBackend()\r\n  }\r\n\r\n  async loadBackend (loader: GraphicsBackendLoader) {\r\n    if (this.backend) {\r\n      this.disconnectBackend()\r\n    }\r\n\r\n    await Promise.all(this.waitBackendLoadPromises)\r\n    this.waitBackendLoadPromises = []\r\n\r\n    this.backendLoader = loader\r\n    const rendererSpecificSettings = {} as Record<string, any>\r\n    const rendererSettingsKey = `renderer.${this.backendLoader?.id}`\r\n    for (const key in options) {\r\n      if (key.startsWith(rendererSettingsKey)) {\r\n        rendererSpecificSettings[key.slice(rendererSettingsKey.length + 1)] = options[key]\r\n      }\r\n    }\r\n    const loaderOptions: GraphicsInitOptions = { // todo!\r\n      resourcesManager: this.resourcesManager as ResourcesManagerTransferred,\r\n      config: this.config,\r\n      callbacks: {\r\n        displayCriticalError (error) {\r\n          console.error(error)\r\n          setLoadingScreenStatus(error.message, true)\r\n        },\r\n        setRendererSpecificSettings (key: string, value: any) {\r\n          options[`${rendererSettingsKey}.${key}`] = value\r\n        },\r\n        fireCustomEvent (eventName, ...args) {\r\n          // this.callbacks.fireCustomEvent(eventName, ...args)\r\n        }\r\n      },\r\n      rendererSpecificSettings,\r\n    }\r\n    this.backend = await loader(loaderOptions)\r\n\r\n    // if (this.resourcesManager.currentResources) {\r\n    //   void this.prepareResources(this.resourcesManager.currentResources.version, createNotificationProgressReporter())\r\n    // }\r\n\r\n    // Execute queued action if exists\r\n    if (this.currentState) {\r\n      if (this.currentState.method === 'startPanorama') {\r\n        this.startPanorama()\r\n      } else {\r\n        const { method, args } = this.currentState\r\n        this.backend[method](...args)\r\n        if (method === 'startWorld') {\r\n          // Only auto-init if bot exists (main app mode)\r\n          // Playground mode will call init explicitly with its position\r\n          if (bot?.entity?.position) {\r\n            void this.worldView!.init(bot.entity.position)\r\n          }\r\n          // void this.worldView!.init(args[0].playerState.getPosition())\r\n        }\r\n      }\r\n    }\r\n\r\n    // todo\r\n    modalStackUpdateChecks()\r\n  }\r\n\r\n  async startWithBot () {\r\n    const renderDistance = miscUiState.singleplayer ? options.renderDistance : options.multiplayerRenderDistance\r\n    await this.startWorld(bot.world, renderDistance)\r\n    this.worldView!.listenToBot(bot)\r\n  }\r\n\r\n  appConfigUdpate () {\r\n    if (miscUiState.appConfig) {\r\n      this.inWorldRenderingConfig.skinTexturesProxy = miscUiState.appConfig.skinTexturesProxy\r\n    }\r\n  }\r\n\r\n  async startWorld (world, renderDistance: number, playerStateSend: PlayerStateRenderer = this.playerState.reactive, startPosition?: Vec3) {\r\n    if (this.currentDisplay === 'world') throw new Error('World already started')\r\n    this.currentDisplay = 'world'\r\n    const finalStartPosition = startPosition ?? bot?.entity?.position ?? new Vec3(0, 64, 0)\r\n    this.worldView = new WorldDataEmitter(world, renderDistance, finalStartPosition)\r\n    this.worldView.panicChunksReload = () => {\r\n      if (!options.experimentalClientSelfReload) return\r\n      if (process.env.NODE_ENV === 'development') {\r\n        displayClientChat(`[client] client panicked due to too long loading time. Soft reloading chunks...`)\r\n      }\r\n      void reloadChunks()\r\n    }\r\n    window.worldView = this.worldView\r\n    if (!isPlayground) {\r\n      watchOptionsAfterWorldViewInit(this.worldView)\r\n    }\r\n    this.appConfigUdpate()\r\n\r\n    const displayWorldOptions: DisplayWorldOptions = {\r\n      version: this.resourcesManager.currentConfig!.version,\r\n      worldView: this.worldView,\r\n      inWorldRenderingConfig: this.inWorldRenderingConfig,\r\n      playerStateReactive: playerStateSend,\r\n      rendererState: this.rendererState,\r\n      nonReactiveState: this.nonReactiveState\r\n    }\r\n    let promise: undefined | Promise<void>\r\n    if (this.backend) {\r\n      promise = this.backend.startWorld(displayWorldOptions) ?? undefined\r\n      // void this.worldView.init(startPosition)\r\n    }\r\n    this.currentState = { method: 'startWorld', args: [displayWorldOptions] }\r\n\r\n    await promise\r\n    // Resolve the promise after world is started\r\n    this.resolveWorldReady()\r\n    return !!promise\r\n  }\r\n\r\n  resetBackend (cleanState = false) {\r\n    this.disconnectBackend(cleanState)\r\n    if (this.backendLoader) {\r\n      void this.loadBackend(this.backendLoader)\r\n    }\r\n  }\r\n\r\n  startPanorama () {\r\n    if (this.currentDisplay === 'menu') return\r\n    if (options.disableAssets) return\r\n    if (this.backend && !hasAppStatus()) {\r\n      this.currentDisplay = 'menu'\r\n      if (process.env.SINGLE_FILE_BUILD_MODE) {\r\n        void loadMinecraftData(PANORAMA_VERSION).then(() => {\r\n          this.backend?.startPanorama()\r\n        })\r\n      } else {\r\n        this.backend.startPanorama()\r\n      }\r\n    }\r\n    this.currentState = { method: 'startPanorama', args: [] }\r\n  }\r\n\r\n  // async prepareResources (version: string, progressReporter: ProgressReporter) {\r\n  //   if (this.backend) {\r\n  //     await this.backend.prepareResources(version, progressReporter)\r\n  //   }\r\n  // }\r\n\r\n  destroyAll () {\r\n    this.disconnectBackend()\r\n    this.resourcesManager.destroy()\r\n  }\r\n\r\n  disconnectBackend (cleanState = false) {\r\n    if (cleanState) {\r\n      this.currentState = undefined\r\n      this.currentDisplay = null\r\n      this.worldView = undefined\r\n    }\r\n    if (this.backend) {\r\n      this.backend.disconnect()\r\n      this.backend = undefined\r\n    }\r\n    this.currentDisplay = null\r\n    const { promise, resolve } = Promise.withResolvers<void>()\r\n    this.worldReady = promise\r\n    this.resolveWorldReady = resolve\r\n    this.rendererState = proxy(getDefaultRendererState().reactive)\r\n    this.nonReactiveState = getDefaultRendererState().nonReactive\r\n    // this.queuedDisplay = undefined\r\n  }\r\n\r\n  get utils () {\r\n    return {\r\n      async waitingForChunks () {\r\n        if (this.backend?.worldState.allChunksLoaded) return\r\n        return new Promise((resolve) => {\r\n          const interval = setInterval(() => {\r\n            if (this.backend?.worldState.allChunksLoaded) {\r\n              clearInterval(interval)\r\n              resolve(true)\r\n            }\r\n          }, 100)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// do not import this. Use global appViewer instead (without window prefix).\r\nexport const appViewer = new AppViewer()\r\nwindow.appViewer = appViewer\r\n\r\nconst initialMenuStart = async () => {\r\n  if (appViewer.currentDisplay === 'world') {\r\n    appViewer.resetBackend(true)\r\n  }\r\n  const demo = new URLSearchParams(window.location.search).get('demo')\r\n  if (!demo) {\r\n    appViewer.startPanorama()\r\n    return\r\n  }\r\n\r\n  // const version = '1.18.2'\r\n  const version = '1.21.4'\r\n  const { loadMinecraftData } = await import('./connect')\r\n  const { getSyncWorld } = await import('../renderer/playground/shared')\r\n  await loadMinecraftData(version)\r\n  const world = getSyncWorld(version)\r\n  world.setBlockStateId(new Vec3(0, 64, 0), loadedData.blocksByName.water.defaultState)\r\n  world.setBlockStateId(new Vec3(1, 64, 0), loadedData.blocksByName.water.defaultState)\r\n  world.setBlockStateId(new Vec3(1, 64, 1), loadedData.blocksByName.water.defaultState)\r\n  world.setBlockStateId(new Vec3(0, 64, 1), loadedData.blocksByName.water.defaultState)\r\n  world.setBlockStateId(new Vec3(-1, 64, -1), loadedData.blocksByName.water.defaultState)\r\n  world.setBlockStateId(new Vec3(-1, 64, 0), loadedData.blocksByName.water.defaultState)\r\n  world.setBlockStateId(new Vec3(0, 64, -1), loadedData.blocksByName.water.defaultState)\r\n  appViewer.resourcesManager.currentConfig = { version }\r\n  appViewer.playerState.reactive = getInitialPlayerState()\r\n  await appViewer.resourcesManager.updateAssetsData({})\r\n  await appViewer.startWorld(world, 3)\r\n  appViewer.backend!.updateCamera(new Vec3(0, 65.7, 0), 0, -Math.PI / 2) // Y+1 and pitch = PI/2 to look down\r\n  void appViewer.worldView!.init(new Vec3(0, 64, 0))\r\n}\r\nwindow.initialMenuStart = initialMenuStart\r\n\r\nconst hasAppStatus = () => activeModalStack.some(m => m.reactType === 'app-status')\r\n\r\nconst modalStackUpdateChecks = () => {\r\n  // maybe start panorama\r\n  if (!miscUiState.gameLoaded && !hasAppStatus()) {\r\n    void initialMenuStart()\r\n  }\r\n\r\n  if (appViewer.backend) {\r\n    appViewer.backend.setRendering(!hasAppStatus())\r\n  }\r\n\r\n  appViewer.inWorldRenderingConfig.foreground = activeModalStack.length === 0\r\n}\r\nsubscribe(activeModalStack, modalStackUpdateChecks)\r\n","import { subscribeKey } from 'valtio/utils'\r\nimport createGraphicsBackend from 'renderer/viewer/three/graphicsBackend'\r\nimport { options } from './optionsStorage'\r\nimport { appViewer } from './appViewer'\r\nimport { miscUiState } from './globalState'\r\nimport { watchOptionsAfterViewerInit } from './watchOptions'\r\nimport { showNotification } from './react/NotificationProvider'\r\n\r\nexport const appGraphicBackends = [\r\n  createGraphicsBackend,\r\n]\r\nconst loadBackend = async () => {\r\n  let backend = appGraphicBackends.find(backend => backend.id === options.activeRenderer)\r\n  if (!backend) {\r\n    showNotification(`No backend found for renderer ${options.activeRenderer}`, `Falling back to ${appGraphicBackends[0].id}`, true)\r\n    backend = appGraphicBackends[0]\r\n  }\r\n  await appViewer.loadBackend(backend)\r\n}\r\nwindow.loadBackend = loadBackend\r\n\r\nexport const appLoadBackend = async () => {\r\n  if (process.env.SINGLE_FILE_BUILD_MODE) {\r\n    const unsub = subscribeKey(miscUiState, 'fsReady', () => {\r\n      if (miscUiState.fsReady) {\r\n        // don't do it earlier to load fs and display menu faster\r\n        void loadBackend()\r\n        unsub()\r\n      }\r\n    })\r\n  } else {\r\n    setTimeout(() => {\r\n      void loadBackend()\r\n    })\r\n  }\r\n\r\n  watchOptionsAfterViewerInit()\r\n\r\n  // reset backend when renderer changes\r\n  subscribeKey(options, 'activeRenderer', async () => {\r\n    if (appViewer.currentDisplay === 'world' && bot) {\r\n      appViewer.resetBackend(true)\r\n      await loadBackend()\r\n      void appViewer.startWithBot()\r\n    }\r\n  })\r\n}\r\n\r\nconst animLoop = () => {\r\n  for (const fn of beforeRenderFrame) fn()\r\n  requestAnimationFrame(animLoop)\r\n}\r\nrequestAnimationFrame(animLoop)\r\n","import { subscribeKey } from 'valtio/utils'\r\nimport { options } from './optionsStorage'\r\nimport { isCypress } from './standaloneUtils'\r\nimport { reportWarningOnce } from './utils'\r\n\r\nlet audioContext: AudioContext\r\nconst sounds: Record<string, any> = {}\r\n\r\n// Track currently playing sounds and their gain nodes\r\nconst activeSounds: Array<{\r\n  source: AudioBufferSourceNode;\r\n  gainNode: GainNode;\r\n  volumeMultiplier: number;\r\n  isMusic: boolean;\r\n}> = []\r\nwindow.activeSounds = activeSounds\r\n\r\n// load as many resources on page load as possible instead on demand as user can disable internet connection after he thinks the page is loaded\r\nconst loadingSounds = [] as string[]\r\nconst convertedSounds = [] as string[]\r\n\r\nexport async function loadSound (path: string, contents = path) {\r\n  if (loadingSounds.includes(path)) return true\r\n  loadingSounds.push(path)\r\n\r\n  try {\r\n    audioContext ??= new window.AudioContext()\r\n\r\n    const res = await window.fetch(contents)\r\n    if (!res.ok) {\r\n      const error = `Failed to load sound ${path}`\r\n      if (isCypress()) throw new Error(error)\r\n      else console.warn(error)\r\n      return\r\n    }\r\n    const arrayBuffer = await res.arrayBuffer()\r\n\r\n    // Decode the audio data immediately\r\n    const audioBuffer = await audioContext.decodeAudioData(arrayBuffer)\r\n    sounds[path] = audioBuffer\r\n    convertedSounds.push(path) // Mark as converted immediately\r\n\r\n    loadingSounds.splice(loadingSounds.indexOf(path), 1)\r\n  } catch (err) {\r\n    console.warn(`Failed to load sound ${path}:`, err)\r\n    loadingSounds.splice(loadingSounds.indexOf(path), 1)\r\n    if (isCypress()) throw err\r\n  }\r\n}\r\n\r\nexport const loadOrPlaySound = async (url, soundVolume = 1, loadTimeout = options.remoteSoundsLoadTimeout, loop = false, isMusic = false) => {\r\n  const soundBuffer = sounds[url]\r\n  if (!soundBuffer) {\r\n    const start = Date.now()\r\n    const cancelled = await loadSound(url)\r\n    if (cancelled || Date.now() - start > loadTimeout) return\r\n  }\r\n\r\n  return playSound(url, soundVolume, loop, isMusic)\r\n}\r\n\r\nexport async function playSound (url, soundVolume = 1, loop = false, isMusic = false) {\r\n  const volume = soundVolume * (options.volume / 100) * (isMusic ? options.musicVolume / 100 : 1)\r\n\r\n  if (!volume) return\r\n\r\n  try {\r\n    audioContext ??= new window.AudioContext()\r\n  } catch (err) {\r\n    reportWarningOnce('audioContext', 'Failed to create audio context. Some sounds will not play')\r\n    return\r\n  }\r\n\r\n  const soundBuffer = sounds[url]\r\n  if (!soundBuffer) {\r\n    console.warn(`Sound ${url} not loaded yet`)\r\n    return\r\n  }\r\n\r\n  const gainNode = audioContext.createGain()\r\n  const source = audioContext.createBufferSource()\r\n  source.buffer = soundBuffer\r\n  source.loop = loop\r\n  source.connect(gainNode)\r\n  gainNode.connect(audioContext.destination)\r\n  gainNode.gain.value = volume\r\n  source.start(0)\r\n\r\n  // Add to active sounds\r\n  activeSounds.push({ source, gainNode, volumeMultiplier: soundVolume, isMusic })\r\n\r\n  const callbacks = [] as Array<() => void>\r\n  source.onended = () => {\r\n    // Remove from active sounds when finished\r\n    const index = activeSounds.findIndex(s => s.source === source)\r\n    if (index !== -1) activeSounds.splice(index, 1)\r\n\r\n    for (const callback of callbacks) {\r\n      callback()\r\n    }\r\n    callbacks.length = 0\r\n  }\r\n\r\n  return {\r\n    onEnded (callback: () => void) {\r\n      callbacks.push(callback)\r\n    },\r\n    stop () {\r\n      try {\r\n        source.stop()\r\n        // Remove from active sounds\r\n        const index = activeSounds.findIndex(s => s.source === source)\r\n        if (index !== -1) activeSounds.splice(index, 1)\r\n      } catch (err) {\r\n        console.warn('Failed to stop sound:', err)\r\n      }\r\n    },\r\n    gainNode,\r\n  }\r\n}\r\n\r\nexport function stopAllSounds () {\r\n  for (const { source } of activeSounds) {\r\n    try {\r\n      source.stop()\r\n    } catch (err) {\r\n      console.warn('Failed to stop sound:', err)\r\n    }\r\n  }\r\n  activeSounds.length = 0\r\n}\r\n\r\nexport function stopSound (url: string) {\r\n  const soundIndex = activeSounds.findIndex(s => s.source.buffer === sounds[url])\r\n  if (soundIndex !== -1) {\r\n    const { source } = activeSounds[soundIndex]\r\n    try {\r\n      source.stop()\r\n    } catch (err) {\r\n      console.warn('Failed to stop sound:', err)\r\n    }\r\n    activeSounds.splice(soundIndex, 1)\r\n  }\r\n}\r\n\r\nexport function changeVolumeOfCurrentlyPlayingSounds (newVolume: number, newMusicVolume: number) {\r\n  const normalizedVolume = newVolume / 100\r\n  for (const { gainNode, volumeMultiplier, isMusic } of activeSounds) {\r\n    try {\r\n      gainNode.gain.value = normalizedVolume * volumeMultiplier * (isMusic ? newMusicVolume / 100 : 1)\r\n    } catch (err) {\r\n      console.warn('Failed to change sound volume:', err)\r\n    }\r\n  }\r\n}\r\n\r\nsubscribeKey(options, 'volume', () => {\r\n  changeVolumeOfCurrentlyPlayingSounds(options.volume, options.musicVolume)\r\n})\r\n\r\nsubscribeKey(options, 'musicVolume', () => {\r\n  changeVolumeOfCurrentlyPlayingSounds(options.volume, options.musicVolume)\r\n})\r\n","import { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport * as nbt from 'prismarine-nbt'\r\n\r\nexport const displayClientChat = (text: string) => {\r\n  const message = {\r\n    text\r\n  }\r\n  if (versionToNumber(bot.version) >= versionToNumber('1.19')) {\r\n    bot._client.emit('systemChat', {\r\n      formattedMessage: JSON.stringify(message),\r\n      position: 0,\r\n      sender: 'minecraft:chat'\r\n    })\r\n    return\r\n  }\r\n  bot._client.emit('chat', {\r\n    message: JSON.stringify(message),\r\n    position: 0,\r\n    sender: 'minecraft:chat'\r\n  })\r\n}\r\n\r\nexport const parseFormattedMessagePacket = (arg) => {\r\n  if (typeof arg === 'string') {\r\n    try {\r\n      arg = JSON.parse(arg)\r\n      return {\r\n        formatted: arg,\r\n        plain: ''\r\n      }\r\n    } catch {}\r\n  }\r\n  if (typeof arg === 'object') {\r\n    try {\r\n      return {\r\n        formatted: nbt.simplify(arg),\r\n        plain: ''\r\n      }\r\n    } catch (err) {\r\n      console.warn('Failed to parse formatted message', arg, err)\r\n      return {\r\n        plain: JSON.stringify(arg)\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    plain: String(arg)\r\n  }\r\n}\r\n","import { join } from 'path'\r\nimport { promisify } from 'util'\r\nimport fs from 'fs'\r\nimport sanitizeFilename from 'sanitize-filename'\r\nimport { oneOf } from '@zardoy/utils'\r\nimport * as browserfs from 'browserfs'\r\nimport { options, resetOptions } from './optionsStorage'\r\n\r\nimport { fsState, loadSave } from './loadSave'\r\nimport { installResourcepackPack, installTexturePackFromHandle, updateTexturePackInstalledState } from './resourcePack'\r\nimport { miscUiState } from './globalState'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { VALID_REPLAY_EXTENSIONS, openFile } from './packetsReplay/replayPackets'\r\nimport { getFixedFilesize } from './downloadAndOpenFile'\r\nimport { packetsReplayState } from './react/state/packetsReplayState'\r\nimport { createFullScreenProgressReporter } from './core/progressReporter'\r\nimport { showNotification } from './react/NotificationProvider'\r\nimport { resetAppStorage } from './react/appStorageProvider'\r\nimport { ConnectOptions } from './connect'\r\nconst { GoogleDriveFileSystem } = require('google-drive-browserfs/src/backends/GoogleDrive')\r\n\r\nbrowserfs.install(window)\r\nconst defaultMountablePoints = {\r\n  '/data': { fs: 'IndexedDB' },\r\n  '/resourcepack': { fs: 'InMemory' }, // temporary storage for currently loaded resource pack\r\n  '/temp': { fs: 'InMemory' }\r\n}\r\nconst fallbackMountablePoints = {\r\n  '/resourcepack': { fs: 'InMemory' }, // temporary storage for downloaded server resource pack\r\n  '/temp': { fs: 'InMemory' }\r\n}\r\nbrowserfs.configure({\r\n  fs: 'MountableFileSystem',\r\n  options: defaultMountablePoints,\r\n}, async (e) => {\r\n  if (e) {\r\n    browserfs.configure({\r\n      fs: 'MountableFileSystem',\r\n      options: fallbackMountablePoints,\r\n    }, async (e2) => {\r\n      if (e2) {\r\n        showNotification('Unknown FS error, cannot continue', e2.message, true)\r\n        throw e2\r\n      }\r\n      showNotification('Failed to access device storage', `Check you have free space. ${e.message}`, true)\r\n      miscUiState.fsReady = true\r\n      miscUiState.singleplayerAvailable = false\r\n    })\r\n    return\r\n  }\r\n  await updateTexturePackInstalledState()\r\n  miscUiState.fsReady = true\r\n  miscUiState.singleplayerAvailable = true\r\n})\r\n\r\nexport const forceCachedDataPaths = {}\r\nexport const forceRedirectPaths = {}\r\n\r\nwindow.fs = fs\r\n//@ts-expect-error\r\nfs.promises = new Proxy(Object.fromEntries(['readFile', 'writeFile', 'stat', 'mkdir', 'rmdir', 'unlink', 'rename', /* 'copyFile',  */'readdir'].map(key => [key, promisify(fs[key])])), {\r\n  get (target, p: string, receiver) {\r\n    if (!target[p]) throw new Error(`Not implemented fs.promises.${p}`)\r\n    return (...args) => {\r\n      // browser fs bug: if path doesn't start with / dirname will return . which would cause infinite loop, so we need to normalize paths\r\n      if (typeof args[0] === 'string' && !args[0].startsWith('/')) args[0] = '/' + args[0]\r\n      const toRemap = Object.entries(forceRedirectPaths).find(([from]) => args[0].startsWith(from))\r\n      if (toRemap) {\r\n        args[0] = args[0].replace(toRemap[0], toRemap[1])\r\n      }\r\n      // Write methods\r\n      // todo issue one-time warning (in chat I guess)\r\n      const readonly = fsState.isReadonly && !(args[0].startsWith('/data') && !fsState.inMemorySave) // allow copying worlds from external providers such as zip\r\n      if (readonly) {\r\n        if (oneOf(p, 'readFile', 'writeFile') && forceCachedDataPaths[args[0]]) {\r\n          if (p === 'readFile') {\r\n            return Promise.resolve(forceCachedDataPaths[args[0]])\r\n          } else if (p === 'writeFile') {\r\n            forceCachedDataPaths[args[0]] = args[1]\r\n            console.debug('Skipped writing to readonly fs', args[0])\r\n            return Promise.resolve()\r\n          }\r\n        }\r\n        if (oneOf(p, 'writeFile', 'mkdir', 'rename')) return\r\n      }\r\n      if (p === 'open' && fsState.isReadonly) {\r\n        args[1] = 'r' // read-only, zipfs throw otherwise\r\n      }\r\n      if (p === 'readFile') {\r\n        fsState.openReadOperations++\r\n      } else if (p === 'writeFile') {\r\n        fsState.openWriteOperations++\r\n      }\r\n      return target[p](...args).finally(() => {\r\n        if (p === 'readFile') {\r\n          fsState.openReadOperations--\r\n        } else if (p === 'writeFile') {\r\n          fsState.openWriteOperations--\r\n        }\r\n      })\r\n    }\r\n  }\r\n})\r\n//@ts-expect-error\r\nfs.promises.open = async (...args) => {\r\n  //@ts-expect-error\r\n  const fd = await promisify(fs.open)(...args)\r\n  return {\r\n    ...Object.fromEntries(['read', 'write', 'close'].map(x => [x, async (...args) => {\r\n      return new Promise(resolve => {\r\n        // todo it results in world corruption on interactions eg block placements\r\n        if (x === 'write' && fsState.isReadonly) {\r\n          resolve({ buffer: Buffer.from([]), bytesRead: 0 })\r\n          return\r\n        }\r\n\r\n        if (x === 'read') {\r\n          fsState.openReadOperations++\r\n        } else if (x === 'write' || x === 'close') {\r\n          fsState.openWriteOperations++\r\n        }\r\n        fs[x](fd, ...args, (err, bytesRead, buffer) => {\r\n          if (x === 'read') {\r\n            fsState.openReadOperations--\r\n          } else if (x === 'write' || x === 'close') {\r\n            // todo that's not correct\r\n            fsState.openWriteOperations--\r\n          }\r\n          if (err) throw err\r\n          // todo if readonly probably there is no need to open at all (return some mocked version - check reload)?\r\n          if (x === 'write' && !fsState.isReadonly) {\r\n            // flush data, though alternatively we can rely on close in unload\r\n            fs.fsync(fd, () => { })\r\n          }\r\n          resolve({ buffer, bytesRead })\r\n        })\r\n      })\r\n    }])),\r\n    // for debugging\r\n    fd,\r\n    filename: args[0],\r\n    async close () {\r\n      return new Promise<void>(resolve => {\r\n        fs.close(fd, (err) => {\r\n          if (err) {\r\n            throw err\r\n          } else {\r\n            resolve()\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// for testing purposes, todo move it to core patch\r\nconst removeFileRecursiveSync = (path) => {\r\n  for (const file of fs.readdirSync(path)) {\r\n    const curPath = join(path, file)\r\n    if (fs.lstatSync(curPath).isDirectory()) {\r\n      // recurse\r\n      removeFileRecursiveSync(curPath)\r\n      fs.rmdirSync(curPath)\r\n    } else {\r\n      // delete file\r\n      fs.unlinkSync(curPath)\r\n    }\r\n  }\r\n}\r\n\r\nwindow.removeFileRecursiveSync = removeFileRecursiveSync\r\n\r\nexport const mkdirRecursive = async (path: string) => {\r\n  const parts = path.split('/')\r\n  let current = ''\r\n  for (const part of parts) {\r\n    current += part + '/'\r\n    try {\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await fs.promises.mkdir(current)\r\n    } catch (err) {\r\n    }\r\n  }\r\n}\r\n\r\nexport const uniqueFileNameFromWorldName = async (title: string, savePath: string) => {\r\n  const name = sanitizeFilename(title)\r\n  let resultPath!: string\r\n  // getUniqueFolderName\r\n  let i = 0\r\n  let free = false\r\n  while (!free) {\r\n    try {\r\n      resultPath = `${savePath.replace(/\\$/, '')}/${name}${i === 0 ? '' : `-${i}`}`\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await fs.promises.stat(resultPath)\r\n      i++\r\n    } catch (err) {\r\n      free = true\r\n    }\r\n  }\r\n  return resultPath\r\n}\r\n\r\nexport const mountExportFolder = async () => {\r\n  let handle: FileSystemDirectoryHandle\r\n  try {\r\n    handle = await showDirectoryPicker({\r\n      id: 'world-export',\r\n    })\r\n  } catch (err) {\r\n    if (err instanceof DOMException && err.name === 'AbortError') return\r\n    throw err\r\n  }\r\n  if (!handle) return false\r\n  await new Promise<void>(resolve => {\r\n    browserfs.configure({\r\n      fs: 'MountableFileSystem',\r\n      options: {\r\n        ...defaultMountablePoints,\r\n        '/export': {\r\n          fs: 'FileSystemAccess',\r\n          options: {\r\n            handle\r\n          }\r\n        }\r\n      },\r\n    }, (e) => {\r\n      if (e) throw e\r\n      resolve()\r\n    })\r\n  })\r\n  return true\r\n}\r\n\r\nlet googleDriveFileSystem\r\n\r\n/** Only cached! */\r\nexport const googleDriveGetFileIdFromPath = (path: string) => {\r\n  return googleDriveFileSystem._getExistingFileId(path)\r\n}\r\n\r\nexport const mountGoogleDriveFolder = async (readonly: boolean, rootId: string) => {\r\n  googleDriveFileSystem = new GoogleDriveFileSystem()\r\n  googleDriveFileSystem.rootDirId = rootId\r\n  googleDriveFileSystem.isReadonly = readonly\r\n  await new Promise<void>(resolve => {\r\n    browserfs.configure({\r\n      fs: 'MountableFileSystem',\r\n      options: {\r\n        ...defaultMountablePoints,\r\n        '/google': googleDriveFileSystem\r\n      },\r\n    }, (e) => {\r\n      if (e) throw e\r\n      resolve()\r\n    })\r\n  })\r\n  fsState.isReadonly = readonly\r\n  fsState.syncFs = false\r\n  fsState.inMemorySave = false\r\n  fsState.remoteBackend = true\r\n  return true\r\n}\r\n\r\nexport async function removeFileRecursiveAsync (path, removeDirectoryItself = true) {\r\n  const errors = [] as Array<[string, Error]>\r\n  try {\r\n    const files = await fs.promises.readdir(path)\r\n\r\n    // Use Promise.all to parallelize file/directory removal\r\n    await Promise.all(files.map(async (file) => {\r\n      const curPath = join(path, file)\r\n      const stats = await fs.promises.stat(curPath)\r\n      if (stats.isDirectory()) {\r\n        // Recurse\r\n        await removeFileRecursiveAsync(curPath)\r\n      } else {\r\n        // Delete file\r\n        await fs.promises.unlink(curPath)\r\n      }\r\n    }))\r\n\r\n    // After removing all files/directories, remove the current directory\r\n    if (removeDirectoryItself) {\r\n      await fs.promises.rmdir(path)\r\n    }\r\n  } catch (error) {\r\n    errors.push([path, error])\r\n  }\r\n\r\n  if (errors.length) {\r\n    setTimeout(() => {\r\n      console.error(errors)\r\n      throw new Error(`Error removing directories/files: ${errors.map(([path, err]) => `${path}: ${err.message}`).join(', ')}`)\r\n    })\r\n  }\r\n}\r\n\r\n\r\nconst SUPPORT_WRITE = true\r\n\r\nexport const openWorldDirectory = async (dragndropHandle?: FileSystemDirectoryHandle) => {\r\n  let _directoryHandle: FileSystemDirectoryHandle\r\n  if (dragndropHandle) {\r\n    _directoryHandle = dragndropHandle\r\n  } else {\r\n    try {\r\n      _directoryHandle = await window.showDirectoryPicker({\r\n        id: 'select-world', // important: this is used to remember user choice (start directory)\r\n      })\r\n    } catch (err) {\r\n      if (err instanceof DOMException && err.name === 'AbortError') return\r\n      throw err\r\n    }\r\n  }\r\n  const directoryHandle = _directoryHandle\r\n\r\n  const requestResult = SUPPORT_WRITE && !options.preferLoadReadonly ? await directoryHandle.requestPermission?.({ mode: 'readwrite' }) : undefined\r\n  const writeAccess = requestResult === 'granted'\r\n\r\n  const doContinue = writeAccess || !SUPPORT_WRITE || options.disableLoadPrompts || confirm('Continue in readonly mode?')\r\n  if (!doContinue) return\r\n  await new Promise<void>(resolve => {\r\n    browserfs.configure({\r\n      fs: 'MountableFileSystem',\r\n      options: {\r\n        ...defaultMountablePoints,\r\n        '/world': {\r\n          fs: 'FileSystemAccess',\r\n          options: {\r\n            handle: directoryHandle\r\n          }\r\n        }\r\n      },\r\n    }, (e) => {\r\n      if (e) throw e\r\n      resolve()\r\n    })\r\n  })\r\n\r\n  fsState.isReadonly = !writeAccess\r\n  fsState.syncFs = false\r\n  fsState.inMemorySave = false\r\n  fsState.remoteBackend = false\r\n  await loadSave()\r\n}\r\n\r\nconst tryToDetectResourcePack = async () => {\r\n  const askInstall = async () => {\r\n    // todo investigate browserfs read errors\r\n    return alert('ATM You can install texturepacks only via options menu.')\r\n    // if (confirm('Resource pack detected, do you want to install it?')) {\r\n    //   await installTexturePackFromHandle()\r\n    // }\r\n  }\r\n\r\n  if (fs.existsSync('/world/pack.mcmeta')) {\r\n    await askInstall()\r\n    return true\r\n  }\r\n  // const jszip = new JSZip()\r\n  // let loaded = await jszip.loadAsync(file)\r\n  // if (loaded.file('pack.mcmeta')) {\r\n  //   loaded = null\r\n  //   askInstall()\r\n  //   return true\r\n  // }\r\n  // loaded = null\r\n}\r\n\r\nexport const possiblyCleanHandle = (callback = () => { }) => {\r\n  if (!fsState.saveLoaded) {\r\n    // todo clean handle\r\n    browserfs.configure({\r\n      fs: 'MountableFileSystem',\r\n      options: defaultMountablePoints,\r\n    }, (e) => {\r\n      callback()\r\n      if (e) throw e\r\n    })\r\n  }\r\n}\r\n\r\nconst readdirSafe = async (path: string) => {\r\n  try {\r\n    return await fs.promises.readdir(path)\r\n  } catch (err) {\r\n    return null\r\n  }\r\n}\r\n\r\nexport const collectFilesToCopy = async (basePath: string, safe = false): Promise<string[]> => {\r\n  const result: string[] = []\r\n  const countFiles = async (relPath: string) => {\r\n    const resolvedPath = join(basePath, relPath)\r\n    const files = relPath === '.' && !safe ? await fs.promises.readdir(resolvedPath) : await readdirSafe(resolvedPath)\r\n    if (!files) return null\r\n    await Promise.all(files.map(async file => {\r\n      const res = await countFiles(join(relPath, file))\r\n      if (res === null) {\r\n        // is file\r\n        result.push(join(relPath, file))\r\n      }\r\n    }))\r\n  }\r\n  await countFiles('.')\r\n  return result\r\n}\r\n\r\nexport const copyFilesAsyncWithProgress = async (pathSrc: string, pathDest: string, throwRootNotExist = true, addMsg = '') => {\r\n  const stat = await existsViaStats(pathSrc)\r\n  if (!stat) {\r\n    if (throwRootNotExist) throw new Error(`Cannot copy. Source directory ${pathSrc} does not exist`)\r\n    console.debug('source directory does not exist', pathSrc)\r\n    return\r\n  }\r\n  if (!stat.isDirectory()) {\r\n    await fs.promises.writeFile(pathDest, await fs.promises.readFile(pathSrc) as any)\r\n    console.debug('copied single file', pathSrc, pathDest)\r\n    return\r\n  }\r\n\r\n  try {\r\n    setLoadingScreenStatus('Copying files')\r\n    let filesCount = 0\r\n    const countFiles = async (path: string) => {\r\n      const files = await fs.promises.readdir(path)\r\n      await Promise.all(files.map(async (file) => {\r\n        const curPath = join(path, file)\r\n        const stats = await fs.promises.stat(curPath)\r\n        if (stats.isDirectory()) {\r\n          // Recurse\r\n          await countFiles(curPath)\r\n        } else {\r\n          filesCount++\r\n        }\r\n      }))\r\n    }\r\n    console.debug('Counting files', pathSrc)\r\n    await countFiles(pathSrc)\r\n    console.debug('counted', filesCount)\r\n    let copied = 0\r\n    await copyFilesAsync(pathSrc, pathDest, (name) => {\r\n      copied++\r\n      setLoadingScreenStatus(`Copying files${addMsg} (${copied}/${filesCount}): ${name}`)\r\n    })\r\n  } finally {\r\n    setLoadingScreenStatus(undefined)\r\n  }\r\n}\r\n\r\nexport const existsViaStats = async (path: string) => {\r\n  try {\r\n    return await fs.promises.stat(path)\r\n  } catch (e) {\r\n    return false\r\n  }\r\n}\r\n\r\nexport const fileExistsAsyncOptimized = async (path: string) => {\r\n  try {\r\n    await fs.promises.readdir(path)\r\n  } catch (err) {\r\n    if (err.code === 'ENOTDIR') return true\r\n    // eslint-disable-next-line sonarjs/prefer-single-boolean-return\r\n    if (err.code === 'ENOENT') return false\r\n    // throw err\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nexport const copyFilesAsync = async (pathSrc: string, pathDest: string, fileCopied?: (name) => void) => {\r\n  // query: can't use fs.copy! use fs.promises.writeFile and readFile\r\n  const files = await fs.promises.readdir(pathSrc)\r\n\r\n  if (!await existsViaStats(pathDest)) {\r\n    await fs.promises.mkdir(pathDest, { recursive: true })\r\n  }\r\n\r\n  // Use Promise.all to parallelize file/directory copying\r\n  await Promise.all(files.map(async (file) => {\r\n    const curPathSrc = join(pathSrc, file)\r\n    const curPathDest = join(pathDest, file)\r\n    const stats = await fs.promises.stat(curPathSrc)\r\n    if (stats.isDirectory()) {\r\n      // Recurse\r\n      await fs.promises.mkdir(curPathDest)\r\n      await copyFilesAsync(curPathSrc, curPathDest, fileCopied)\r\n    } else {\r\n      // Copy file\r\n      try {\r\n        await fs.promises.writeFile(curPathDest, await fs.promises.readFile(curPathSrc) as any)\r\n        console.debug('copied file', curPathSrc, curPathDest)\r\n      } catch (err) {\r\n        console.error('Error copying file', curPathSrc, curPathDest, err)\r\n        throw err\r\n      }\r\n      fileCopied?.(curPathDest)\r\n    }\r\n  }))\r\n}\r\n\r\nexport const openWorldFromHttpDir = async (fileDescriptorUrls: string[]/*  | undefined */, baseUrlParam) => {\r\n  // todo try go guess mode\r\n  let index\r\n  let baseUrl\r\n  for (const url of fileDescriptorUrls) {\r\n    let file\r\n    try {\r\n      setLoadingScreenStatus(`Trying to get world descriptor from ${new URL(url).host}`)\r\n      const controller = new AbortController()\r\n      setTimeout(() => {\r\n        controller.abort()\r\n      }, 3000)\r\n      // eslint-disable-next-line no-await-in-loop\r\n      const response = await fetch(url, { signal: controller.signal })\r\n      // eslint-disable-next-line no-await-in-loop\r\n      file = await response.json()\r\n    } catch (err) {\r\n      console.error('Error fetching file descriptor', url, err)\r\n    }\r\n    if (!file) continue\r\n    if (file.baseUrl) {\r\n      baseUrl = new URL(file.baseUrl, baseUrl).toString()\r\n      index = file.index\r\n    } else {\r\n      index = file\r\n      baseUrl = baseUrlParam ?? url.split('/').slice(0, -1).join('/')\r\n    }\r\n    break\r\n  }\r\n  if (!index) throw new Error(`The provided mapDir file is not valid descriptor file! ${fileDescriptorUrls.join(', ')}`)\r\n  await new Promise<void>(async resolve => {\r\n    browserfs.configure({\r\n      fs: 'MountableFileSystem',\r\n      options: {\r\n        ...defaultMountablePoints,\r\n        '/world': {\r\n          fs: 'HTTPRequest',\r\n          options: {\r\n            index,\r\n            baseUrl\r\n          }\r\n        }\r\n      },\r\n    }, (e) => {\r\n      if (e) throw e\r\n      resolve()\r\n    })\r\n  })\r\n\r\n  fsState.saveLoaded = false\r\n  fsState.isReadonly = true\r\n  fsState.syncFs = false\r\n  fsState.inMemorySave = false\r\n  fsState.remoteBackend = true\r\n\r\n  await loadSave()\r\n}\r\n\r\n// todo rename method\r\nconst openWorldZipInner = async (file: File | ArrayBuffer, name = file['name'], connectOptions?: Partial<ConnectOptions>) => {\r\n  await new Promise<void>(async resolve => {\r\n    browserfs.configure({\r\n      // todo\r\n      fs: 'MountableFileSystem',\r\n      options: {\r\n        ...defaultMountablePoints,\r\n        '/world': {\r\n          fs: 'ZipFS',\r\n          options: {\r\n            zipData: Buffer.from(file instanceof File ? (await file.arrayBuffer()) : file),\r\n            name\r\n          }\r\n        }\r\n      },\r\n    }, (e) => {\r\n      if (e) throw e\r\n      resolve()\r\n    })\r\n  })\r\n\r\n  fsState.saveLoaded = false\r\n  fsState.isReadonly = true\r\n  fsState.syncFs = true\r\n  fsState.inMemorySave = false\r\n  fsState.remoteBackend = false\r\n\r\n  if (fs.existsSync('/world/level.dat')) {\r\n    await loadSave()\r\n  } else {\r\n    const dirs = fs.readdirSync('/world')\r\n    const availableWorlds: string[] = []\r\n    for (const dir of dirs) {\r\n      if (fs.existsSync(`/world/${dir}/level.dat`)) {\r\n        availableWorlds.push(dir)\r\n      }\r\n    }\r\n\r\n    if (availableWorlds.length === 0) {\r\n      if (await tryToDetectResourcePack()) return\r\n      alert('No worlds found in the zip')\r\n      return\r\n    }\r\n\r\n    if (availableWorlds.length === 1) {\r\n      await loadSave(`/world/${availableWorlds[0]}`, connectOptions)\r\n      return\r\n    }\r\n\r\n    alert(`Many (${availableWorlds.length}) worlds found in the zip!`)\r\n    // todo prompt picker\r\n    // const selectWorld\r\n  }\r\n}\r\n\r\nexport const openWorldZip = async (...args: Parameters<typeof openWorldZipInner>) => {\r\n  try {\r\n    return await openWorldZipInner(...args)\r\n  } finally {\r\n    possiblyCleanHandle()\r\n  }\r\n}\r\n\r\nexport const resetLocalStorage = () => {\r\n  resetOptions()\r\n  resetAppStorage()\r\n}\r\n\r\nwindow.resetLocalStorage = resetLocalStorage\r\n\r\nexport const openFilePicker = (specificCase?: 'resourcepack') => {\r\n  // create and show input picker\r\n  let picker: HTMLInputElement = document.body.querySelector('input#file-zip-picker')!\r\n  if (!picker) {\r\n    picker = document.createElement('input')\r\n    picker.type = 'file'\r\n    picker.accept = specificCase ? '.zip' : [...VALID_REPLAY_EXTENSIONS, '.zip'].join(',')\r\n\r\n    picker.addEventListener('change', () => {\r\n      const file = picker.files?.[0]\r\n      picker.value = ''\r\n      if (!file) return\r\n      if (specificCase === 'resourcepack') {\r\n        if (!file.name.endsWith('.zip')) {\r\n          const doContinue = confirm(`Are you sure ${file.name.slice(-20)} is .zip file? ONLY .zip files are supported. Continue?`)\r\n          if (!doContinue) return\r\n        }\r\n        void installResourcepackPack(file, createFullScreenProgressReporter()).catch((err) => {\r\n          setLoadingScreenStatus(err.message, true)\r\n        })\r\n      } else {\r\n        // eslint-disable-next-line no-lonely-if\r\n        if (VALID_REPLAY_EXTENSIONS.some(ext => file.name.endsWith(ext)) || file.name.startsWith('packets-replay')) {\r\n          void file.text().then(contents => {\r\n            openFile({\r\n              contents,\r\n              filename: file.name,\r\n              filesize: file.size\r\n            })\r\n          })\r\n        } else {\r\n          void openWorldZip(file)\r\n        }\r\n      }\r\n    })\r\n    picker.hidden = true\r\n    document.body.appendChild(picker)\r\n  }\r\n\r\n  picker.click()\r\n}\r\n\r\nexport const resetStateAfterDisconnect = () => {\r\n  miscUiState.gameLoaded = false\r\n  miscUiState.loadedDataVersion = null\r\n  miscUiState.singleplayer = false\r\n  miscUiState.flyingSquid = false\r\n  miscUiState.wanOpened = false\r\n  miscUiState.currentDisplayQr = null\r\n\r\n  fsState.saveLoaded = false\r\n}\r\n","// this should actually be moved to mineflayer / renderer\r\n\r\nimport { fromFormattedString, TextComponent } from '@xmcl/text-component'\r\nimport type { IndexedData } from 'minecraft-data'\r\nimport { versionToNumber } from 'renderer/viewer/common/utils'\r\n\r\nexport interface MessageFormatOptions {\r\n  doShadow?: boolean\r\n}\r\n\r\nexport type MessageFormatPart = Pick<TextComponent, 'hoverEvent' | 'clickEvent'> & {\r\n  text: string\r\n  color?: string\r\n  bold?: boolean\r\n  italic?: boolean\r\n  underlined?: boolean\r\n  strikethrough?: boolean\r\n  obfuscated?: boolean\r\n}\r\n\r\ntype MessageInput = {\r\n  text?: string\r\n  translate?: string\r\n  with?: Array<MessageInput | string>\r\n  color?: string\r\n  bold?: boolean\r\n  italic?: boolean\r\n  underlined?: boolean\r\n  strikethrough?: boolean\r\n  obfuscated?: boolean\r\n  extra?: MessageInput[]\r\n  json?: any\r\n}\r\n\r\nconst global = globalThis as any\r\n\r\n// todo move to sign-renderer, replace with prismarine-chat, fix mcData issue!\r\nexport const formatMessage = (message: MessageInput, mcData: IndexedData = global.loadedData) => {\r\n  let msglist: MessageFormatPart[] = []\r\n\r\n  const readMsg = (msg: MessageInput) => {\r\n    const styles = {\r\n      color: msg.color,\r\n      bold: !!msg.bold,\r\n      italic: !!msg.italic,\r\n      underlined: !!msg.underlined,\r\n      strikethrough: !!msg.strikethrough,\r\n      obfuscated: !!msg.obfuscated\r\n    }\r\n\r\n    if (!msg.text && typeof msg.json?.[''] === 'string') msg.text = msg.json['']\r\n    if (msg.text) {\r\n      msglist.push({\r\n        ...msg,\r\n        text: msg.text,\r\n        ...styles\r\n      })\r\n    } else if (msg.translate) {\r\n      const tText = mcData?.language[msg.translate] ?? msg.translate\r\n\r\n      if (msg.with) {\r\n        const splitted = tText.split(/%s|%\\d+\\$s/g)\r\n\r\n        let i = 0\r\n        for (const [j, part] of splitted.entries()) {\r\n          msglist.push({ text: part, ...styles })\r\n\r\n          if (j + 1 < splitted.length) {\r\n            if (msg.with[i]) {\r\n              const msgWith = msg.with[i]\r\n              if (typeof msgWith === 'string') {\r\n                readMsg({\r\n                  ...styles,\r\n                  text: msgWith\r\n                })\r\n              } else {\r\n                readMsg({\r\n                  ...styles,\r\n                  ...msgWith\r\n                })\r\n              }\r\n            }\r\n            i++\r\n          }\r\n        }\r\n      } else {\r\n        msglist.push({\r\n          ...msg,\r\n          text: tText,\r\n          ...styles\r\n        })\r\n      }\r\n    }\r\n\r\n    if (msg.extra) {\r\n      for (let ex of msg.extra) {\r\n        if (typeof ex === 'string') {\r\n          ex = { text: ex }\r\n        }\r\n        readMsg({ ...styles, ...ex })\r\n      }\r\n    }\r\n  }\r\n\r\n  readMsg(message)\r\n\r\n  const flat = (msg) => {\r\n    return [msg, msg.extra?.flatMap(flat) ?? []]\r\n  }\r\n\r\n  msglist = msglist.map(msg => {\r\n    // normalize §\r\n    if (!msg.text.includes?.('§')) return msg\r\n    const newMsg = fromFormattedString(msg.text)\r\n    return flat(newMsg)\r\n  }).flat(Infinity)\r\n\r\n  return msglist\r\n}\r\n\r\nexport const messageToString = (message: MessageInput | string) => {\r\n  if (typeof message === 'string') {\r\n    return message\r\n  }\r\n  const msglist = formatMessage(message)\r\n  return msglist.map(msg => msg.text).join('')\r\n}\r\n\r\nconst blockToItemRemaps = {\r\n  water: 'water_bucket',\r\n  lava: 'lava_bucket',\r\n  redstone_wire: 'redstone',\r\n  tripwire: 'tripwire_hook'\r\n}\r\n\r\nexport const getItemFromBlock = (block: import('prismarine-block').Block) => {\r\n  const item = global.loadedData.itemsByName[blockToItemRemaps[block.name] ?? block.name]\r\n  return item\r\n}\r\n\r\nexport function isAllowedChatCharacter (char: string): boolean {\r\n  // if (char.length !== 1) {\r\n  //   throw new Error('Input must be a single character')\r\n  // }\r\n\r\n  const charCode = char.codePointAt(0)!\r\n  return charCode !== 167 && charCode >= 32 && charCode !== 127\r\n}\r\n\r\nexport const isStringAllowed = (str: string) => {\r\n  const invalidChars = new Set<string>()\r\n  for (const [i, char] of [...str].entries()) {\r\n    const isSurrogatePair = str.codePointAt(i) !== str['charCodeAt'](i)\r\n    if (isSurrogatePair) continue\r\n\r\n    if (!isAllowedChatCharacter(char)) {\r\n      invalidChars.add(char)\r\n    }\r\n  }\r\n\r\n  const valid = invalidChars.size === 0\r\n  if (valid) {\r\n    return {\r\n      valid: true\r\n    }\r\n  }\r\n\r\n  return {\r\n    valid,\r\n    clean: [...str].filter(c => !invalidChars.has(c)).join(''),\r\n    invalid: [...invalidChars]\r\n  }\r\n}\r\n","// import { versionsByMinecraftVersion } from 'minecraft-data'\r\n// import minecraftInitialDataJson from '../generated/minecraft-initial-data.json'\r\nimport MinecraftData from 'minecraft-data'\r\nimport PrismarineBlock from 'prismarine-block'\r\nimport PrismarineItem from 'prismarine-item'\r\nimport { miscUiState } from './globalState'\r\nimport supportedVersions from './supportedVersions.mjs'\r\nimport { options } from './optionsStorage'\r\nimport { downloadSoundsIfNeeded } from './sounds/botSoundSystem'\r\nimport { AuthenticatedAccount } from './react/serversStorage'\r\n\r\nexport type ConnectOptions = {\r\n  server?: string\r\n  singleplayer?: any\r\n  username: string\r\n  proxy?: string\r\n  botVersion?: string\r\n  serverOverrides?\r\n  serverOverridesFlat?\r\n  peerId?: string\r\n  ignoreQs?: boolean\r\n  onSuccessfulPlay?: () => void\r\n  serverIndex?: string\r\n  authenticatedAccount?: AuthenticatedAccount | true\r\n  peerOptions?: any\r\n  viewerWsConnect?: string\r\n  saveServerToHistory?: boolean\r\n\r\n  /** Will enable local replay server */\r\n  worldStateFileContents?: string\r\n\r\n  connectEvents?: {\r\n    serverCreated?: () => void\r\n    // connect: () => void;\r\n    // disconnect: () => void;\r\n    // error: (err: any) => void;\r\n    // ready: () => void;\r\n    // end: () => void;\r\n  }\r\n}\r\n\r\nexport const getVersionAutoSelect = (autoVersionSelect = options.serversAutoVersionSelect) => {\r\n  if (autoVersionSelect === 'auto') {\r\n    return '1.19.4'\r\n  }\r\n  if (autoVersionSelect === 'latest') {\r\n    return supportedVersions.at(-1)!\r\n  }\r\n  return autoVersionSelect\r\n}\r\n\r\nexport const loadMinecraftData = async (version: string) => {\r\n  await window._LOAD_MC_DATA()\r\n  // setLoadingScreenStatus(`Loading data for ${version}`)\r\n  // // todo expose cache\r\n  // // const initialDataVersion = Object.keys(minecraftInitialDataJson)[0]!\r\n  // // if (version === initialDataVersion) {\r\n  // //   // ignore cache hit\r\n  // //   versionsByMinecraftVersion.pc[initialDataVersion]!.dataVersion!++\r\n  // // }\r\n\r\n  const mcData = MinecraftData(version)\r\n  window.PrismarineBlock = PrismarineBlock(mcData.version.minecraftVersion!)\r\n  window.PrismarineItem = PrismarineItem(mcData.version.minecraftVersion!)\r\n  window.loadedData = mcData\r\n  window.mcData = mcData\r\n  miscUiState.loadedDataVersion = version\r\n}\r\n\r\nexport type AssetDownloadReporter = (asset: string, isDone: boolean) => void\r\n\r\nexport const downloadAllMinecraftData = async (reporter?: AssetDownloadReporter) => {\r\n  reporter?.('mc-data', false)\r\n  await window._LOAD_MC_DATA()\r\n  reporter?.('mc-data', true)\r\n}\r\n\r\nconst loadFonts = async () => {\r\n  const FONT_FAMILY = 'mojangles'\r\n  if (!document.fonts.check(`1em ${FONT_FAMILY}`)) {\r\n    // todo instead re-render signs on load\r\n    await document.fonts.load(`1em ${FONT_FAMILY}`).catch(() => {\r\n      console.error('Failed to load font, signs wont be rendered correctly')\r\n    })\r\n  }\r\n}\r\n\r\nexport const downloadOtherGameData = async (reporter?: AssetDownloadReporter) => {\r\n  reporter?.('fonts', false)\r\n  reporter?.('sounds', false)\r\n\r\n  await Promise.all([\r\n    loadFonts().then(() => reporter?.('fonts', true)),\r\n    downloadSoundsIfNeeded().then(() => reporter?.('sounds', true))\r\n  ])\r\n}\r\n","import { proxy } from 'valtio'\r\n\r\nexport const ideState = proxy({\r\n  id: '',\r\n  contents: '',\r\n  line: 0,\r\n  column: 0,\r\n  language: 'typescript',\r\n  title: '',\r\n})\r\nglobalThis.ideState = ideState\r\n\r\nexport const registerIdeChannels = () => {\r\n  registerIdeOpenChannel()\r\n  registerIdeSaveChannel()\r\n}\r\n\r\nconst registerIdeOpenChannel = () => {\r\n  const CHANNEL_NAME = 'minecraft-web-client:ide-open'\r\n\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'id',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'language',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'contents',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'line',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'column',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'title',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      }\r\n    ]\r\n  ]\r\n\r\n  bot._client.registerChannel(CHANNEL_NAME, packetStructure, true)\r\n\r\n  bot._client.on(CHANNEL_NAME as any, (data) => {\r\n    const { id, language, contents, line, column, title } = data\r\n\r\n    ideState.contents = contents\r\n    ideState.line = line\r\n    ideState.column = column\r\n    ideState.id = id\r\n    ideState.language = language || 'typescript'\r\n    ideState.title = title\r\n  })\r\n\r\n  console.debug(`registered custom channel ${CHANNEL_NAME} channel`)\r\n}\r\nconst IDE_SAVE_CHANNEL_NAME = 'minecraft-web-client:ide-save'\r\nconst registerIdeSaveChannel = () => {\r\n\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'id',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'contents',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'language',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'line',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'column',\r\n        type: 'i32'\r\n      },\r\n    ]\r\n  ]\r\n  bot._client.registerChannel(IDE_SAVE_CHANNEL_NAME, packetStructure, true)\r\n}\r\n\r\nexport const saveIde = () => {\r\n  bot._client.writeChannel(IDE_SAVE_CHANNEL_NAME, {\r\n    id: ideState.id,\r\n    contents: ideState.contents,\r\n    language: ideState.language,\r\n    // todo: reflect updated\r\n    line: ideState.line,\r\n    column: ideState.column,\r\n  })\r\n}\r\n","import { setLoadingScreenStatus } from '../appStatus'\r\nimport { appStatusState } from '../react/AppStatusProvider'\r\nimport { hideNotification, showNotification } from '../react/NotificationProvider'\r\nimport { pixelartIcons } from '../react/PixelartIcon'\r\n\r\nexport interface ProgressReporter {\r\n  currentMessage: string | undefined\r\n  beginStage (stage: string, title: string): void\r\n  endStage (stage: string): void\r\n  setSubStage (stage: string, subStageTitle: string): void\r\n  reportProgress (stage: string, progress: number): void\r\n  executeWithMessage<T>(message: string, fn: () => Promise<T>): Promise<T>\r\n  executeWithMessage<T>(message: string, stage: string, fn: () => Promise<T>): Promise<T>\r\n\r\n  setMessage (message: string): void\r\n\r\n  end(): void\r\n  error(message: string): void\r\n}\r\n\r\ninterface ReporterDisplayImplementation {\r\n  setMessage (message: string): void\r\n  end (): void\r\n  error(message: string): void\r\n}\r\n\r\ninterface StageInfo {\r\n  title: string\r\n  subStage?: string\r\n  progress?: number\r\n}\r\n\r\nconst NO_STAGES_ACTION_END = false\r\n\r\nconst createProgressReporter = (implementation: ReporterDisplayImplementation): ProgressReporter => {\r\n  const stages = new Map<string, StageInfo>()\r\n  let currentMessage: string | undefined\r\n  let ended = false\r\n\r\n  const end = () => {\r\n    if (ended) return\r\n    ended = true\r\n    stages.clear()\r\n    implementation.end()\r\n  }\r\n\r\n  const updateStatus = () => {\r\n    if (ended) return\r\n    const activeStages = [...stages.entries()]\r\n    if (activeStages.length === 0) {\r\n      if (NO_STAGES_ACTION_END) {\r\n        end()\r\n      } else {\r\n        implementation.setMessage('Waiting for tasks')\r\n      }\r\n      return\r\n    }\r\n\r\n    const [currentStage, info] = activeStages.at(-1)!\r\n    let message = info.title\r\n    if (info.subStage) {\r\n      message += ` - ${info.subStage}`\r\n    }\r\n    if (info.progress !== undefined) {\r\n      const num = Math.round(info.progress * 100)\r\n      if (isFinite(num)) {\r\n        message += `: ${num}%`\r\n      }\r\n    }\r\n\r\n    currentMessage = message\r\n    implementation.setMessage(message)\r\n  }\r\n\r\n  const reporter = {\r\n    beginStage (stage: string, title: string) {\r\n      if (stages.has(stage)) {\r\n        throw new Error(`Stage ${stage} already is running`)\r\n      }\r\n      stages.set(stage, { title })\r\n      updateStatus()\r\n    },\r\n\r\n    endStage (stage: string) {\r\n      stages.delete(stage)\r\n      updateStatus()\r\n    },\r\n\r\n    setSubStage (stage: string, subStageTitle: string) {\r\n      const info = stages.get(stage)\r\n      if (info) {\r\n        info.subStage = subStageTitle\r\n        updateStatus()\r\n      }\r\n    },\r\n\r\n    reportProgress (stage: string, progress: number) {\r\n      const info = stages.get(stage)\r\n      if (info) {\r\n        info.progress = progress\r\n        updateStatus()\r\n      }\r\n    },\r\n\r\n    async executeWithMessage<T>(...args: any[]): Promise<T> {\r\n      const message = args[0]\r\n      const stage = typeof args[1] === 'string' ? args[1] : undefined\r\n      const fn = typeof args[1] === 'string' ? args[2] : args[1]\r\n\r\n      const tempStage = stage ?? 'temp-' + Math.random().toString(36).slice(2)\r\n      reporter.beginStage(tempStage, message)\r\n      try {\r\n        const result = await fn()\r\n        return result\r\n      } finally {\r\n        reporter.endStage(tempStage)\r\n      }\r\n    },\r\n\r\n    end (): void {\r\n      end()\r\n    },\r\n\r\n    setMessage (message: string): void {\r\n      if (ended) return\r\n      implementation.setMessage(message)\r\n    },\r\n\r\n    get currentMessage () {\r\n      return currentMessage\r\n    },\r\n\r\n    error (message: string): void {\r\n      if (ended) return\r\n      implementation.error(message)\r\n    }\r\n  }\r\n\r\n  return reporter\r\n}\r\n\r\nconst fullScreenReporters = [] as ProgressReporter[]\r\nexport const createFullScreenProgressReporter = (): ProgressReporter => {\r\n  const reporter = createProgressReporter({\r\n    setMessage (message: string) {\r\n      if (appStatusState.isError) return\r\n      setLoadingScreenStatus(message)\r\n    },\r\n    end () {\r\n      if (appStatusState.isError) return\r\n      fullScreenReporters.splice(fullScreenReporters.indexOf(reporter), 1)\r\n      if (fullScreenReporters.length === 0) {\r\n        setLoadingScreenStatus(undefined)\r\n      } else {\r\n        setLoadingScreenStatus(fullScreenReporters.at(-1)!.currentMessage)\r\n      }\r\n    },\r\n\r\n    error (message: string): void {\r\n      if (appStatusState.isError) return\r\n      setLoadingScreenStatus(message, true)\r\n    }\r\n  })\r\n  fullScreenReporters.push(reporter)\r\n  return reporter\r\n}\r\n\r\nexport const createNotificationProgressReporter = (endMessage?: string): ProgressReporter => {\r\n  const id = `progress-reporter-${Math.random().toString(36).slice(2)}`\r\n  return createProgressReporter({\r\n    setMessage (message: string) {\r\n      showNotification(`${message}...`, '', false, '', undefined, true, id)\r\n    },\r\n    end () {\r\n      if (endMessage) {\r\n        showNotification(endMessage, '', false, pixelartIcons.check, undefined, true)\r\n      } else {\r\n        hideNotification(id)\r\n      }\r\n    },\r\n\r\n    error (message: string): void {\r\n      showNotification(message, '', true, '', undefined, true)\r\n    }\r\n  })\r\n}\r\n\r\nexport const createConsoleLogProgressReporter = (group?: string): ProgressReporter => {\r\n  return createProgressReporter({\r\n    setMessage (message: string) {\r\n      console.log(group ? `[${group}] ${message}` : message)\r\n    },\r\n    end () {\r\n      console.log(group ? `[${group}] done` : 'done')\r\n    },\r\n\r\n    error (message: string): void {\r\n      console.error(message)\r\n    }\r\n  })\r\n}\r\n\r\nexport const createWrappedProgressReporter = (reporter: ProgressReporter, message?: string) => {\r\n  const stage = `wrapped-${message}`\r\n  if (message) {\r\n    reporter.beginStage(stage, message)\r\n  }\r\n\r\n  return createProgressReporter({\r\n    setMessage (message: string) {\r\n      reporter.setMessage(message)\r\n    },\r\n    end () {\r\n      if (message) {\r\n        reporter.endStage(stage)\r\n      }\r\n    },\r\n\r\n    error (message: string): void {\r\n      reporter.error(message)\r\n    }\r\n  })\r\n}\r\n\r\nexport const createNullProgressReporter = (): ProgressReporter => {\r\n  return createProgressReporter({\r\n    setMessage (message: string) {\r\n    },\r\n    end () {\r\n    },\r\n    error (message: string) {\r\n    }\r\n  })\r\n}\r\n","import PItem from 'prismarine-item'\r\nimport * as THREE from 'three'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { options } from './optionsStorage'\r\nimport { jeiCustomCategories } from './inventoryWindows'\r\nimport { registerIdeChannels } from './core/ideChannels'\r\nimport { serverSafeSettings } from './defaultOptions'\r\n\r\nexport default () => {\r\n  customEvents.on('mineflayerBotCreated', async () => {\r\n    if (!options.customChannels) return\r\n    bot.once('login', () => {\r\n      registerBlockModelsChannel()\r\n      registerMediaChannels()\r\n      registerSectionAnimationChannels()\r\n      registeredJeiChannel()\r\n      registerBlockInteractionsCustomizationChannel()\r\n      registerWaypointChannels()\r\n      registerFireworksChannels()\r\n      registerIdeChannels()\r\n      registerServerSettingsChannel()\r\n    })\r\n  })\r\n}\r\n\r\nconst registerChannel = (channelName: string, packetStructure: any[], handler: (data: any) => void, waitForWorld = true) => {\r\n  bot._client.registerChannel(channelName, packetStructure, true)\r\n  bot._client.on(channelName as any, async (data) => {\r\n    if (waitForWorld) {\r\n      await appViewer.worldReady\r\n      handler(data)\r\n    } else {\r\n      handler(data)\r\n    }\r\n  })\r\n\r\n  console.debug(`registered custom channel ${channelName} channel`)\r\n}\r\n\r\nconst registerBlockInteractionsCustomizationChannel = () => {\r\n  const CHANNEL_NAME = 'minecraft-web-client:block-interactions-customization'\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'newConfiguration',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n    ]\r\n  ]\r\n\r\n  registerChannel(CHANNEL_NAME, packetStructure, (data) => {\r\n    const config = JSON.parse(data.newConfiguration)\r\n    bot.mouse.setConfigFromPacket(config)\r\n  }, true)\r\n}\r\n\r\nconst registerFireworksChannels = () => {\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'x',\r\n        type: 'f32'\r\n      },\r\n      {\r\n        name: 'y',\r\n        type: 'f32'\r\n      },\r\n      {\r\n        name: 'z',\r\n        type: 'f32'\r\n      },\r\n      {\r\n        name: 'optionsJson',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      }\r\n    ]\r\n  ]\r\n\r\n  registerChannel('minecraft-web-client:firework-explode', packetStructure, (data) => {\r\n    // Parse options if provided\r\n    let options: any = {}\r\n    if (data.optionsJson && data.optionsJson.trim() !== '') {\r\n      try {\r\n        options = JSON.parse(data.optionsJson)\r\n      } catch (error) {\r\n        console.warn('Failed to parse firework optionsJson:', error)\r\n      }\r\n    }\r\n\r\n    // Set position from coords\r\n    options.position = new THREE.Vector3(data.x, data.y, data.z)\r\n\r\n    getThreeJsRendererMethods()?.launchFirework(options)\r\n  })\r\n}\r\n\r\nconst registerWaypointChannels = () => {\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'id',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'x',\r\n        type: 'f32'\r\n      },\r\n      {\r\n        name: 'y',\r\n        type: 'f32'\r\n      },\r\n      {\r\n        name: 'z',\r\n        type: 'f32'\r\n      },\r\n      {\r\n        name: 'minDistance',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'label',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'color',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'metadataJson',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      }\r\n    ]\r\n  ]\r\n\r\n  registerChannel('minecraft-web-client:waypoint-add', packetStructure, (data) => {\r\n    // Parse metadata if provided\r\n    let metadata: any = {}\r\n    if (data.metadataJson && data.metadataJson.trim() !== '') {\r\n      try {\r\n        metadata = JSON.parse(data.metadataJson)\r\n      } catch (error) {\r\n        console.warn('Failed to parse waypoint metadataJson:', error)\r\n      }\r\n    }\r\n\r\n    getThreeJsRendererMethods()?.addWaypoint(data.id, data.x, data.y, data.z, {\r\n      minDistance: data.minDistance,\r\n      label: data.label || undefined,\r\n      color: data.color || undefined,\r\n      metadata\r\n    })\r\n  })\r\n\r\n  registerChannel('minecraft-web-client:waypoint-delete', [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'id',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      }\r\n    ]\r\n  ], (data) => {\r\n    getThreeJsRendererMethods()?.removeWaypoint(data.id)\r\n  })\r\n}\r\n\r\nconst registerBlockModelsChannel = () => {\r\n  const CHANNEL_NAME = 'minecraft-web-client:blockmodels'\r\n\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'worldName', // currently not used\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'x',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'y',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'z',\r\n        type: 'i32'\r\n      },\r\n      {\r\n        name: 'model',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      }\r\n    ]\r\n  ]\r\n\r\n  registerChannel(CHANNEL_NAME, packetStructure, (data) => {\r\n    const { worldName, x, y, z, model } = data\r\n\r\n    const chunkX = Math.floor(x / 16) * 16\r\n    const chunkZ = Math.floor(z / 16) * 16\r\n    const chunkKey = `${chunkX},${chunkZ}`\r\n    const blockPosKey = `${x},${y},${z}`\r\n\r\n    getThreeJsRendererMethods()?.updateCustomBlock(chunkKey, blockPosKey, model)\r\n  }, true)\r\n}\r\n\r\nconst registerSectionAnimationChannels = () => {\r\n  const ADD_CHANNEL = 'minecraft-web-client:section-animation-add'\r\n  const REMOVE_CHANNEL = 'minecraft-web-client:section-animation-remove'\r\n\r\n  /**\r\n   * Add a section animation\r\n   * @param id - Section position for animation like `16,32,16`\r\n   * @param offset - Initial offset in blocks\r\n   * @param speedX - Movement speed in blocks per second on X axis\r\n   * @param speedY - Movement speed in blocks per second on Y axis\r\n   * @param speedZ - Movement speed in blocks per second on Z axis\r\n   * @param limitX - Maximum offset in blocks on X axis (0 means no limit)\r\n   * @param limitY - Maximum offset in blocks on Y axis (0 means no limit)\r\n   * @param limitZ - Maximum offset in blocks on Z axis (0 means no limit)\r\n   */\r\n  const addPacketStructure = [\r\n    'container',\r\n    [\r\n      { name: 'id', type: ['pstring', { countType: 'i16' }] },\r\n      { name: 'offset', type: 'f32' },\r\n      { name: 'speedX', type: 'f32' },\r\n      { name: 'speedY', type: 'f32' },\r\n      { name: 'speedZ', type: 'f32' },\r\n      { name: 'limitX', type: 'f32' },\r\n      { name: 'limitY', type: 'f32' },\r\n      { name: 'limitZ', type: 'f32' }\r\n    ]\r\n  ]\r\n\r\n  /**\r\n   * Remove a section animation\r\n   * @param id - Identifier of the animation to remove\r\n   */\r\n  const removePacketStructure = [\r\n    'container',\r\n    [\r\n      { name: 'id', type: ['pstring', { countType: 'i16' }] }\r\n    ]\r\n  ]\r\n\r\n  registerChannel(ADD_CHANNEL, addPacketStructure, (data) => {\r\n    const { id, offset, speedX, speedY, speedZ, limitX, limitY, limitZ } = data\r\n    getThreeJsRendererMethods()?.addSectionAnimation(id, {\r\n      time: performance.now(),\r\n      speedX,\r\n      speedY,\r\n      speedZ,\r\n      currentOffsetX: offset,\r\n      currentOffsetY: offset,\r\n      currentOffsetZ: offset,\r\n      limitX: limitX === 0 ? undefined : limitX,\r\n      limitY: limitY === 0 ? undefined : limitY,\r\n      limitZ: limitZ === 0 ? undefined : limitZ\r\n    })\r\n  }, true)\r\n\r\n  registerChannel(REMOVE_CHANNEL, removePacketStructure, (data) => {\r\n    const { id } = data\r\n    getThreeJsRendererMethods()?.removeSectionAnimation(id)\r\n  }, true)\r\n\r\n  console.debug('Registered section animation channels')\r\n}\r\n\r\nwindow.testSectionAnimation = (speedY = 1) => {\r\n  const pos = bot.entity.position\r\n  const id = `${Math.floor(pos.x / 16) * 16},${Math.floor(pos.y / 16) * 16},${Math.floor(pos.z / 16) * 16}`\r\n  getThreeJsRendererMethods()?.addSectionAnimation(id, {\r\n    time: performance.now(),\r\n    speedX: 0,\r\n    speedY,\r\n    speedZ: 0,\r\n    currentOffsetX: 0,\r\n    currentOffsetY: 0,\r\n    currentOffsetZ: 0,\r\n    // limitX: 10,\r\n    // limitY: 10,\r\n  })\r\n}\r\n\r\nconst registeredJeiChannel = () => {\r\n  const CHANNEL_NAME = 'minecraft-web-client:jei'\r\n  // id - string, categoryTitle - string, items - string (json array)\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'id',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: '_categoryTitle',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n      {\r\n        name: 'items',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n    ]\r\n  ]\r\n\r\n  bot._client.registerChannel(CHANNEL_NAME, packetStructure, true)\r\n\r\n  bot._client.on(CHANNEL_NAME as any, (data) => {\r\n    const { id, categoryTitle, items } = data\r\n    if (items === '') {\r\n      // remove category\r\n      jeiCustomCategories.value = jeiCustomCategories.value.filter(x => x.id !== id)\r\n      return\r\n    }\r\n    const PrismarineItem = PItem(bot.version)\r\n    jeiCustomCategories.value.push({\r\n      id,\r\n      categoryTitle,\r\n      items: JSON.parse(items).map(x => {\r\n        const itemString = x.itemName || x.item_name || x.item || x.itemId\r\n        const itemId = loadedData.itemsByName[itemString.replace('minecraft:', '')]\r\n        if (!itemId) {\r\n          console.warn(`Could not add item ${itemString} to JEI category ${categoryTitle} because it was not found`)\r\n          return null\r\n        }\r\n        // const item = new PrismarineItem(itemId.id, x.itemCount || x.item_count || x.count || 1, x.itemDamage || x.item_damage || x.damage || 0, x.itemNbt || x.item_nbt || x.nbt || null)\r\n        return PrismarineItem.fromNotch({\r\n          ...x,\r\n          itemId: itemId.id,\r\n        })\r\n      })\r\n    })\r\n  })\r\n\r\n  console.debug(`registered custom channel ${CHANNEL_NAME} channel`)\r\n}\r\n\r\nconst registerMediaChannels = () => {\r\n  // Media Add Channel\r\n  const ADD_CHANNEL = 'minecraft-web-client:media-add'\r\n  const addPacketStructure = [\r\n    'container',\r\n    [\r\n      { name: 'id', type: ['pstring', { countType: 'i16' }] },\r\n      { name: 'x', type: 'f32' },\r\n      { name: 'y', type: 'f32' },\r\n      { name: 'z', type: 'f32' },\r\n      { name: 'width', type: 'f32' },\r\n      { name: 'height', type: 'f32' },\r\n      { name: 'rotation', type: 'i16' }, // 0: 0° - towards positive z, 1: 90° - positive x, 2: 180° - negative z, 3: 270° - negative x (3-6 is same but double side)\r\n      { name: 'source', type: ['pstring', { countType: 'i16' }] },\r\n      { name: 'loop', type: 'bool' },\r\n      { name: 'volume', type: 'f32' }, // 0\r\n      { name: '_aspectRatioMode', type: 'i16' }, // 0\r\n      { name: '_background', type: 'i16' }, // 0\r\n      { name: '_opacity', type: 'i16' }, // 1\r\n      { name: '_cropXStart', type: 'f32' }, // 0\r\n      { name: '_cropYStart', type: 'f32' }, // 0\r\n      { name: '_cropXEnd', type: 'f32' }, // 0\r\n      { name: '_cropYEnd', type: 'f32' }, // 0\r\n    ]\r\n  ]\r\n\r\n  // Media Control Channels\r\n  const PLAY_CHANNEL = 'minecraft-web-client:media-play'\r\n  const PAUSE_CHANNEL = 'minecraft-web-client:media-pause'\r\n  const SEEK_CHANNEL = 'minecraft-web-client:media-seek'\r\n  const VOLUME_CHANNEL = 'minecraft-web-client:media-volume'\r\n  const SPEED_CHANNEL = 'minecraft-web-client:media-speed'\r\n  const DESTROY_CHANNEL = 'minecraft-web-client:media-destroy'\r\n\r\n  const noDataPacketStructure = [\r\n    'container',\r\n    [\r\n      { name: 'id', type: ['pstring', { countType: 'i16' }] }\r\n    ]\r\n  ]\r\n\r\n  const setNumberPacketStructure = [\r\n    'container',\r\n    [\r\n      { name: 'id', type: ['pstring', { countType: 'i16' }] },\r\n      { name: 'seconds', type: 'f32' }\r\n    ]\r\n  ]\r\n\r\n  // Register channels\r\n  registerChannel(PLAY_CHANNEL, noDataPacketStructure, (data) => {\r\n    const { id } = data\r\n    getThreeJsRendererMethods()?.setVideoPlaying(id, true)\r\n  }, true)\r\n  registerChannel(PAUSE_CHANNEL, noDataPacketStructure, (data) => {\r\n    const { id } = data\r\n    getThreeJsRendererMethods()?.setVideoPlaying(id, false)\r\n  }, true)\r\n  registerChannel(SEEK_CHANNEL, setNumberPacketStructure, (data) => {\r\n    const { id, seconds } = data\r\n    getThreeJsRendererMethods()?.setVideoSeeking(id, seconds)\r\n  }, true)\r\n  registerChannel(VOLUME_CHANNEL, setNumberPacketStructure, (data) => {\r\n    const { id, volume } = data\r\n    getThreeJsRendererMethods()?.setVideoVolume(id, volume)\r\n  }, true)\r\n  registerChannel(SPEED_CHANNEL, setNumberPacketStructure, (data) => {\r\n    const { id, speed } = data\r\n    getThreeJsRendererMethods()?.setVideoSpeed(id, speed)\r\n  }, true)\r\n  registerChannel(DESTROY_CHANNEL, noDataPacketStructure, (data) => {\r\n    const { id } = data\r\n    getThreeJsRendererMethods()?.destroyMedia(id)\r\n  }, true)\r\n\r\n  // Handle media add\r\n  registerChannel(ADD_CHANNEL, addPacketStructure, (data) => {\r\n    const { id, x, y, z, width, height, rotation, source, loop, volume, background, opacity } = data\r\n\r\n    // Add new video\r\n    getThreeJsRendererMethods()?.addMedia(id, {\r\n      position: { x, y, z },\r\n      size: { width, height },\r\n      // side: 'towards',\r\n      src: source,\r\n      rotation: rotation as 0 | 1 | 2 | 3,\r\n      doubleSide: false,\r\n      background,\r\n      opacity: opacity / 100,\r\n      allowOrigins: options.remoteContentNotSameOrigin === false ? [getCurrentTopDomain()] : options.remoteContentNotSameOrigin,\r\n      loop,\r\n      volume\r\n    })\r\n  })\r\n\r\n  // ---\r\n\r\n  // Video interaction channel\r\n  const interactionPacketStructure = [\r\n    'container',\r\n    [\r\n      { name: 'id', type: ['pstring', { countType: 'i16' }] },\r\n      { name: 'x', type: 'f32' },\r\n      { name: 'y', type: 'f32' },\r\n      { name: 'isRightClick', type: 'bool' }\r\n    ]\r\n  ]\r\n\r\n  bot._client.registerChannel(MEDIA_INTERACTION_CHANNEL, interactionPacketStructure, true)\r\n\r\n  // Media play channel\r\n  bot._client.registerChannel(MEDIA_PLAY_CHANNEL_CLIENTBOUND, noDataPacketStructure, true)\r\n  const mediaStopPacketStructure = [\r\n    'container',\r\n    [\r\n      { name: 'id', type: ['pstring', { countType: 'i16' }] },\r\n      // ended - emitted even when loop is true (will continue playing)\r\n      // error: ...\r\n      // stalled - connection drops, server stops sending data\r\n      // waiting - connection is slow, server is sending data, but not fast enough (buffering)\r\n      // control\r\n      { name: 'reason', type: ['pstring', { countType: 'i16' }] },\r\n      { name: 'time', type: 'f32' }\r\n    ]\r\n  ]\r\n  bot._client.registerChannel(MEDIA_STOP_CHANNEL_CLIENTBOUND, mediaStopPacketStructure, true)\r\n\r\n  console.debug('Registered media channels')\r\n}\r\n\r\nconst MEDIA_INTERACTION_CHANNEL = 'minecraft-web-client:media-interaction'\r\nconst MEDIA_PLAY_CHANNEL_CLIENTBOUND = 'minecraft-web-client:media-play'\r\nconst MEDIA_STOP_CHANNEL_CLIENTBOUND = 'minecraft-web-client:media-stop'\r\n\r\nexport const sendVideoInteraction = (id: string, x: number, y: number, isRightClick: boolean) => {\r\n  bot._client.writeChannel(MEDIA_INTERACTION_CHANNEL, { id, x, y, isRightClick })\r\n}\r\n\r\nexport const sendVideoPlay = (id: string) => {\r\n  bot._client.writeChannel(MEDIA_PLAY_CHANNEL_CLIENTBOUND, { id })\r\n}\r\n\r\nexport const sendVideoStop = (id: string, reason: string, time: number) => {\r\n  bot._client.writeChannel(MEDIA_STOP_CHANNEL_CLIENTBOUND, { id, reason, time })\r\n}\r\n\r\nexport const videoCursorInteraction = () => {\r\n  const { intersectMedia } = appViewer.rendererState.world\r\n  if (!intersectMedia) return null\r\n  return intersectMedia\r\n}\r\nwindow.videoCursorInteraction = videoCursorInteraction\r\n\r\nconst addTestVideo = (rotation = 0 as 0 | 1 | 2 | 3, scale = 1, isImage = false) => {\r\n  const block = window.cursorBlockRel()\r\n  if (!block) return\r\n  const { position: startPosition } = block\r\n\r\n  // Add video with proper positioning\r\n  getThreeJsRendererMethods()?.addMedia('test-video', {\r\n    position: {\r\n      x: startPosition.x,\r\n      y: startPosition.y + 1,\r\n      z: startPosition.z\r\n    },\r\n    size: {\r\n      width: scale,\r\n      height: scale\r\n    },\r\n    src: isImage ? 'https://bucket.mcraft.fun/test_image.png' : 'https://bucket.mcraft.fun/test_video.mp4',\r\n    rotation,\r\n    // doubleSide: true,\r\n    background: 0x00_00_00, // Black color\r\n    // TODO broken\r\n    // uvMapping: {\r\n    //   startU: 0,\r\n    //   endU: 1,\r\n    //   startV: 0,\r\n    //   endV: 1\r\n    // },\r\n    opacity: 1,\r\n    allowOrigins: true,\r\n  })\r\n}\r\nwindow.addTestVideo = addTestVideo\r\n\r\nconst registerServerSettingsChannel = () => {\r\n  const CHANNEL_NAME = 'minecraft-web-client:server-settings'\r\n  const packetStructure = [\r\n    'container',\r\n    [\r\n      {\r\n        name: 'settingsJson',\r\n        type: ['pstring', { countType: 'i16' }]\r\n      },\r\n    ]\r\n  ]\r\n\r\n  registerChannel(CHANNEL_NAME, packetStructure, (data) => {\r\n    try {\r\n      const settings = JSON.parse(data.settingsJson)\r\n\r\n      if (typeof settings !== 'object' || settings === null || Array.isArray(settings)) {\r\n        console.warn('Invalid settings format: expected an object')\r\n        return\r\n      }\r\n\r\n      let appliedCount = 0\r\n      let skippedCount = 0\r\n\r\n      for (const [key, value] of Object.entries(settings)) {\r\n        // Only apply settings that are in the safe list\r\n        if (!(key in serverSafeSettings)) {\r\n          console.warn(`Skipping unsafe setting: ${key}`)\r\n          skippedCount++\r\n          continue\r\n        }\r\n\r\n        // Validate that the setting exists in options\r\n        if (!(key in options)) {\r\n          console.warn(`Setting does not exist: ${key}`)\r\n          skippedCount++\r\n          continue\r\n        }\r\n\r\n        // Validate type matches\r\n        const currentValue = options[key]\r\n\r\n        // For union types, check if value is valid\r\n        if (Array.isArray(currentValue) && !Array.isArray(value)) {\r\n          console.warn(`Type mismatch for setting ${key}: expected array`)\r\n          skippedCount++\r\n          continue\r\n        }\r\n\r\n        // Apply the setting\r\n        options[key] = value\r\n        appliedCount++\r\n      }\r\n\r\n      console.debug(`Applied ${appliedCount} server settings${skippedCount > 0 ? `, skipped ${skippedCount} unsafe/invalid settings` : ''}`)\r\n    } catch (error) {\r\n      console.error('Failed to parse or apply server settings:', error)\r\n    }\r\n  }, false) // Don't wait for world, settings can be applied before world loads\r\n}\r\n\r\nfunction getCurrentTopDomain (): string {\r\n  const { hostname } = location\r\n  // Split hostname into parts\r\n  const parts = hostname.split('.')\r\n\r\n  // Handle special cases like co.uk, com.br, etc.\r\n  if (parts.length > 2) {\r\n    // Check for common country codes with additional segments\r\n    if (parts.at(-2) === 'co' ||\r\n      parts.at(-2) === 'com' ||\r\n      parts.at(-2) === 'org' ||\r\n      parts.at(-2) === 'gov') {\r\n      // Return last 3 parts (e.g., example.co.uk)\r\n      return parts.slice(-3).join('.')\r\n    }\r\n  }\r\n\r\n  // Return last 2 parts (e.g., example.com)\r\n  return parts.slice(-2).join('.')\r\n}\r\n","//@ts-check\r\nimport * as nbt from 'prismarine-nbt'\r\nimport { options } from './optionsStorage'\r\n\r\nconst { EventEmitter } = require('events')\r\nconst debug = require('debug')('minecraft-protocol')\r\nconst states = require('minecraft-protocol/src/states')\r\n\r\nwindow.serverDataChannel ??= {}\r\nexport const customCommunication = {\r\n  sendData(data) {\r\n    setTimeout(() => {\r\n      window.serverDataChannel[this.isServer ? 'emitClient' : 'emitServer'](data)\r\n    })\r\n  },\r\n  receiverSetup(processData) {\r\n    window.serverDataChannel[this.isServer ? 'emitServer' : 'emitClient'] = (data) => {\r\n      processData(data)\r\n    }\r\n  }\r\n}\r\n\r\nclass CustomChannelClient extends EventEmitter {\r\n  constructor(isServer, version) {\r\n    super()\r\n    this.version = version\r\n    this.isServer = !!isServer\r\n    this.state = states.HANDSHAKING\r\n  }\r\n\r\n  get state() {\r\n    return this.protocolState\r\n  }\r\n\r\n  setSerializer(state) {\r\n    customCommunication.receiverSetup.call(this, (/** @type {{name, params, state?}} */parsed) => {\r\n      if (!options.excludeCommunicationDebugEvents.includes(parsed.name)) {\r\n        debug(`receive in ${this.isServer ? 'server' : 'client'}: ${parsed.name}`)\r\n      }\r\n      this.emit(parsed.name, parsed.params, parsed)\r\n      this.emit('packet_name', parsed.name, parsed.params, parsed)\r\n    })\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/adjacent-overload-signatures, grouped-accessor-pairs\r\n  set state(newProperty) {\r\n    const oldProperty = this.protocolState\r\n    this.protocolState = newProperty\r\n\r\n    this.setSerializer(this.protocolState)\r\n\r\n    this.emit('state', newProperty, oldProperty)\r\n  }\r\n\r\n  end(endReason, fullReason) {\r\n    // eslint-disable-next-line unicorn/no-this-assignment\r\n    const client = this\r\n    if (client.state === states.PLAY) {\r\n      fullReason ||= loadedData.supportFeature('chatPacketsUseNbtComponents')\r\n        ? nbt.comp({ text: nbt.string(endReason) })\r\n        : JSON.stringify({ text: endReason })\r\n      client.write('kick_disconnect', { reason: fullReason })\r\n    } else if (client.state === states.LOGIN) {\r\n      fullReason ||= JSON.stringify({ text: endReason })\r\n      client.write('disconnect', { reason: fullReason })\r\n    }\r\n\r\n    this._endReason = endReason\r\n    this.emit('end', this._endReason) // still emits on server side only, doesn't send anything to our client\r\n  }\r\n\r\n  write(name, params) {\r\n    if (!options.excludeCommunicationDebugEvents.includes(name)) {\r\n      debug(`[${this.state}] from ${this.isServer ? 'server' : 'client'}: ` + name)\r\n      debug(params)\r\n    }\r\n\r\n    this.emit('writePacket', name, params)\r\n    customCommunication.sendData.call(this, { name, params, state: this.state })\r\n  }\r\n\r\n  writeBundle(packets) {\r\n    // no-op\r\n  }\r\n\r\n  writeRaw(buffer) {\r\n    // no-op\r\n  }\r\n}\r\n\r\nexport default CustomChannelClient\r\n","import EventEmitter from 'events'\r\n\r\nimport CustomChannelClient from './customClient'\r\n\r\nexport class LocalServer extends EventEmitter.EventEmitter {\r\n  socketServer = null\r\n  cipher = null\r\n  decipher = null\r\n  clients = {}\r\n\r\n  constructor (public version, public customPackets, public hideErrors = false) {\r\n    super()\r\n  }\r\n\r\n  listen () {\r\n    this.emit('connection', new CustomChannelClient(true, this.version))\r\n  }\r\n\r\n  close () { }\r\n}\r\n","module.exports = {\r\n  'motd': 'A Minecraft Server \\nRunning flying-squid',\r\n  // host: '',\r\n  // eslint-disable-next-line unicorn/numeric-separators-style\r\n  'port': 25565,\r\n  'max-players': 10,\r\n  'online-mode': false,\r\n  'gameMode': 0,\r\n  'difficulty': 0,\r\n  'worldFolder': 'world',\r\n  'pluginsFolder': true,\r\n  // todo set sid, disable entities auto-spawn\r\n  'generation': {\r\n    // grass_field\r\n    // diamond_square\r\n    // empty\r\n    // superflat\r\n    // all_the_blocks\r\n    // nether\r\n    'name': 'diamond_square',\r\n    options: {}\r\n    // 'options': {\r\n    //   'worldHeight': 80\r\n    // }\r\n  },\r\n  'kickTimeout': 10_000,\r\n  'plugins': {},\r\n  'modpe': false,\r\n  'view-distance': 2,\r\n  'player-list-text': {\r\n    'header': 'Flying squid',\r\n    'footer': 'Integrated server'\r\n  },\r\n  keepAlive: false,\r\n  'everybody-op': true,\r\n  'max-entities': 100,\r\n  'version': '1.18',\r\n  versionMajor: '1.18'\r\n}\r\n","export const defaultOptions = {\r\n  renderDistance: 3,\r\n  keepChunksDistance: 1,\r\n  multiplayerRenderDistance: 3,\r\n  closeConfirmation: true,\r\n  autoFullScreen: false,\r\n  mouseRawInput: true,\r\n  autoExitFullscreen: false,\r\n  localUsername: 'wanderer',\r\n  mouseSensX: 50,\r\n  mouseSensY: -1,\r\n  chatWidth: 320,\r\n  chatHeight: 180,\r\n  chatScale: 100,\r\n  chatOpacity: 100,\r\n  chatOpacityOpened: 100,\r\n  messagesLimit: 200,\r\n  displayLoadingMessages: true,\r\n  volume: 50,\r\n  enableMusic: true,\r\n  musicVolume: 25,\r\n  fov: 75,\r\n  defaultPerspective: 'first_person' as 'first_person' | 'third_person_back' | 'third_person_front',\r\n  guiScale: 3,\r\n  autoRequestCompletions: true,\r\n  touchButtonsSize: 40,\r\n  touchButtonsOpacity: 80,\r\n  touchButtonsPosition: 12,\r\n  touchControlsPositions: getDefaultTouchControlsPositions(),\r\n  touchControlsSize: getTouchControlsSize(),\r\n  touchMovementType: 'modern' as 'modern' | 'classic',\r\n  touchInteractionType: 'classic' as 'classic' | 'buttons',\r\n  gpuPreference: 'default' as 'default' | 'high-performance' | 'low-power',\r\n  backgroundRendering: '20fps' as 'full' | '20fps' | '5fps',\r\n  /** @unstable */\r\n  disableAssets: false,\r\n  /** @unstable */\r\n  debugLogNotFrequentPackets: false,\r\n  unimplementedContainers: false,\r\n  dayCycleAndLighting: true,\r\n  loadPlayerSkins: true,\r\n  renderEars: true,\r\n  lowMemoryMode: false,\r\n  starfieldRendering: true,\r\n  defaultSkybox: true,\r\n  enabledResourcepack: null as string | null,\r\n  useVersionsTextures: 'latest',\r\n  serverResourcePacks: 'prompt' as 'prompt' | 'always' | 'never',\r\n  showHand: true,\r\n  viewBobbing: true,\r\n  displayRecordButton: true,\r\n  packetsLoggerPreset: 'all' as 'all' | 'no-buffers',\r\n  serversAutoVersionSelect: 'auto' as 'auto' | 'latest' | '1.20.4' | string,\r\n  customChannels: false,\r\n  remoteContentNotSameOrigin: false as boolean | string[],\r\n  packetsRecordingAutoStart: false,\r\n  language: 'auto',\r\n  preciseMouseInput: false,\r\n  // todo ui setting, maybe enable by default?\r\n  waitForChunksRender: false as 'sp-only' | boolean,\r\n  jeiEnabled: true as boolean | Array<'creative' | 'survival' | 'adventure' | 'spectator'>,\r\n  modsSupport: false,\r\n  modsAutoUpdate: 'check' as 'check' | 'never' | 'always',\r\n  modsUpdatePeriodCheck: 24, // hours\r\n  preventBackgroundTimeoutKick: false,\r\n  preventSleep: false,\r\n  debugContro: false,\r\n  debugChatScroll: false,\r\n  chatVanillaRestrictions: true,\r\n  debugResponseTimeIndicator: false,\r\n  chatPingExtension: true,\r\n  chatSpellCheckEnabled: false,\r\n  // antiAliasing: false,\r\n  topRightTimeDisplay: 'only-fullscreen' as 'only-fullscreen' | 'always' | 'never',\r\n\r\n  clipWorldBelowY: undefined as undefined | number, // will be removed\r\n  disableBlockEntityTextures: false,\r\n  singleplayerAutoSave: false,\r\n  showChunkBorders: false, // todo rename option\r\n  frameLimit: false as number | false,\r\n  alwaysBackupWorldBeforeLoading: undefined as boolean | undefined | null,\r\n  alwaysShowMobileControls: false,\r\n  excludeCommunicationDebugEvents: [] as string[],\r\n  preventDevReloadWhilePlaying: false,\r\n  numWorkers: 4,\r\n  localServerOptions: {\r\n    gameMode: 1\r\n  } as any,\r\n  saveLoginPassword: 'prompt' as 'prompt' | 'never' | 'always',\r\n  preferLoadReadonly: false,\r\n  experimentalClientSelfReload: false,\r\n  remoteSoundsSupport: false,\r\n  remoteSoundsLoadTimeout: 500,\r\n  disableLoadPrompts: false,\r\n  guestUsername: 'guest',\r\n  askGuestName: true,\r\n  errorReporting: true,\r\n  /** Actually might be useful */\r\n  showCursorBlockInSpectator: false,\r\n  renderEntities: true,\r\n  smoothLighting: true,\r\n  newVersionsLighting: false,\r\n  chatSelect: true,\r\n  autoJump: 'auto' as 'auto' | 'always' | 'never',\r\n  autoParkour: false,\r\n  vrSupport: true, // doesn't directly affect the VR mode, should only disable the button which is annoying to android users\r\n  vrPageGameRendering: false,\r\n  renderDebug: 'basic' as 'none' | 'advanced' | 'basic',\r\n  rendererPerfDebugOverlay: false,\r\n\r\n  // advanced bot options\r\n  autoRespawn: false,\r\n  mutedSounds: [] as string[],\r\n  plugins: [] as Array<{ enabled: boolean, name: string, description: string, script: string }>,\r\n  /** Wether to popup sign editor on server action */\r\n  autoSignEditor: true,\r\n  wysiwygSignEditor: 'auto' as 'auto' | 'always' | 'never',\r\n  showMinimap: 'never' as 'always' | 'singleplayer' | 'never',\r\n  minimapOptimizations: true,\r\n  displayBossBars: true,\r\n  disabledUiParts: [] as string[],\r\n  neighborChunkUpdates: true,\r\n  highlightBlockColor: 'auto' as 'auto' | 'blue' | 'classic',\r\n  activeRenderer: 'threejs',\r\n  rendererSharedOptions: {\r\n    _experimentalSmoothChunkLoading: true,\r\n    _renderByChunks: false\r\n  }\r\n}\r\n\r\nfunction getDefaultTouchControlsPositions () {\r\n  return {\r\n    action: [\r\n      70,\r\n      76\r\n    ],\r\n    sneak: [\r\n      84,\r\n      76\r\n    ],\r\n    break: [\r\n      70,\r\n      57\r\n    ],\r\n    jump: [\r\n      84,\r\n      57\r\n    ],\r\n  } as Record<string, [number, number]>\r\n}\r\n\r\nfunction getTouchControlsSize () {\r\n  return {\r\n    joystick: 55,\r\n    action: 36,\r\n    break: 36,\r\n    jump: 36,\r\n    sneak: 36,\r\n  }\r\n}\r\n\r\n/**\r\n * Map of settings that are safe to change from the server.\r\n * These are rendering/display/input preferences that don't affect critical client functionality.\r\n * Settings like modsSupport, customChannels, or security-related options are excluded.\r\n */\r\nexport const serverSafeSettings: Partial<Record<keyof typeof defaultOptions, true>> = {\r\n  renderEars: true,\r\n  viewBobbing: true,\r\n  mouseRawInput: true,\r\n  preciseMouseInput: true,\r\n  showHand: true,\r\n  fov: true,\r\n  defaultPerspective: true,\r\n  volume: true,\r\n  musicVolume: true,\r\n  enableMusic: true,\r\n  smoothLighting: true,\r\n  starfieldRendering: true,\r\n  defaultSkybox: true,\r\n  dayCycleAndLighting: true,\r\n  showChunkBorders: true,\r\n  renderDebug: true,\r\n  highlightBlockColor: true,\r\n  displayBossBars: true,\r\n  showMinimap: true,\r\n  autoJump: true,\r\n  chatVanillaRestrictions: true,\r\n  chatPingExtension: true,\r\n  chatSpellCheckEnabled: true,\r\n  renderEntities: true,\r\n  displayRecordButton: true,\r\n  topRightTimeDisplay: true,\r\n  guiScale: true,\r\n  chatWidth: true,\r\n  chatHeight: true,\r\n  chatScale: true,\r\n  loadPlayerSkins: true,\r\n  disableBlockEntityTextures: true,\r\n  neighborChunkUpdates: true,\r\n  newVersionsLighting: true,\r\n  showCursorBlockInSpectator: true,\r\n}\r\n","import * as crypto from 'crypto'\r\nimport UUID from 'uuid-1345'\r\nimport { fsState } from './loadSave'\r\n\r\n\r\n// https://github.com/PrismarineJS/node-minecraft-protocol/blob/cf1f67117d586b5e6e21f0d9602da12e9fcf46b6/src/server/login.js#L170\r\nfunction javaUUID (s: string) {\r\n  const hash = crypto.createHash('md5')\r\n  hash.update(s, 'utf8')\r\n  const buffer = hash.digest()\r\n  buffer[6] = (buffer[6] & 15) | 48\r\n  buffer[8] = (buffer[8] & 63) | 128\r\n  return buffer\r\n}\r\n\r\nexport function nameToMcOfflineUUID (name) {\r\n  return (new UUID(javaUUID('OfflinePlayer:' + name))).toString()\r\n}\r\n\r\nexport async function savePlayers (autoSave: boolean) {\r\n  if (!localServer?.players[0]) return\r\n  if (autoSave && new URL(location.href).searchParams.get('noSave') === 'true') return\r\n  //@ts-expect-error TODO\r\n  await localServer.savePlayersSingleplayer()\r\n}\r\n\r\n// todo flying squid should expose save function instead\r\nexport const saveServer = async (autoSave = true) => {\r\n  if (!localServer || fsState.isReadonly) return\r\n  // todo\r\n  console.time('save server')\r\n  const worlds = [(localServer as any).overworld] as Array<import('prismarine-world').world.World>\r\n  await Promise.all([localServer.writeLevelDat(), savePlayers(autoSave), ...worlds.map(async world => world.saveNow())])\r\n  console.timeEnd('save server')\r\n}\r\nexport const disconnect = async () => {\r\n  if (localServer) {\r\n    await saveServer()\r\n    void localServer.quit() // todo investigate we should await\r\n  }\r\n  window.history.replaceState({}, '', `${window.location.pathname}`) // remove qs\r\n  bot.end('You left the server')\r\n  location.reload()\r\n}\r\n","import latest_gui_title_minecraft from 'mc-assets/dist/other-textures/latest/gui/title/minecraft.png'\nimport other_textures_1_19_gui_icons from 'mc-assets/dist/other-textures/1.19/gui/icons.png'\nimport other_textures_latest_gui_widgets from 'mc-assets/dist/other-textures/latest/gui/widgets.png'\nimport other_textures_latest_gui_bars from 'mc-assets/dist/other-textures/latest/gui/bars.png'\nimport latest_gui_container_inventory from 'mc-assets/dist/other-textures/latest/gui/container/inventory.png'\nimport latest_gui_container_shulker_box from 'mc-assets/dist/other-textures/latest/gui/container/shulker_box.png'\nimport latest_gui_container_generic_54 from 'mc-assets/dist/other-textures/latest/gui/container/generic_54.png'\nimport furnace_gui_texture from 'mc-assets/dist/other-textures/1.20.2/gui/container/furnace.png'\nimport latest_gui_container_crafting_table from 'mc-assets/dist/other-textures/latest/gui/container/crafting_table.png'\nimport latest_gui_container_dispenser from 'mc-assets/dist/other-textures/latest/gui/container/dispenser.png'\nimport latest_gui_container_hopper from 'mc-assets/dist/other-textures/latest/gui/container/hopper.png'\nimport latest_gui_container_horse from 'mc-assets/dist/other-textures/latest/gui/container/horse.png'\nimport latest_gui_container_villager2 from 'mc-assets/dist/other-textures/latest/gui/container/villager2.png'\nimport latest_gui_container_enchanting_table from 'mc-assets/dist/other-textures/latest/gui/container/enchanting_table.png'\nimport latest_gui_container_anvil from 'mc-assets/dist/other-textures/latest/gui/container/anvil.png'\nimport latest_gui_container_beacon from 'mc-assets/dist/other-textures/latest/gui/container/beacon.png'\nimport latest_gui_container_smithing from 'mc-assets/dist/other-textures/latest/gui/container/smithing.png'\nimport _1_19_4_gui_container_smithing from 'mc-assets/dist/other-textures/1.19.4/gui/container/smithing.png'\n\nexport const appReplacableResources: { [key in Keys]: { content: any, resourcePackPath: string, cssVar?: string, cssVarRepeat?: number } } = {\n\n  'latest_gui_title_minecraft': {\n    content: latest_gui_title_minecraft,\n    resourcePackPath: 'minecraft/textures/gui/title/minecraft.png',\n    ...{\"cssVar\":\"--title-gui\"}\n  },\n\n  'other_textures_1_19_gui_icons': {\n    content: other_textures_1_19_gui_icons,\n    resourcePackPath: 'minecraft/textures/gui/icons.png',\n    ...{\"cssVar\":\"--gui-icons\",\"cssVarRepeat\":2}\n  },\n\n  'other_textures_latest_gui_widgets': {\n    content: other_textures_latest_gui_widgets,\n    resourcePackPath: 'minecraft/textures/gui/widgets.png',\n    ...{\"cssVar\":\"--widgets-gui-atlas\"}\n  },\n\n  'other_textures_latest_gui_bars': {\n    content: other_textures_latest_gui_bars,\n    resourcePackPath: 'minecraft/textures/gui/bars.png',\n    ...{\"cssVar\":\"--bars-gui-atlas\"}\n  },\n\n  'latest_gui_container_inventory': {\n    content: latest_gui_container_inventory,\n    resourcePackPath: 'minecraft/textures/gui/container/inventory.png',\n    ...{}\n  },\n\n  'latest_gui_container_shulker_box': {\n    content: latest_gui_container_shulker_box,\n    resourcePackPath: 'minecraft/textures/gui/container/shulker_box.png',\n    ...{}\n  },\n\n  'latest_gui_container_generic_54': {\n    content: latest_gui_container_generic_54,\n    resourcePackPath: 'minecraft/textures/gui/container/generic_54.png',\n    ...{}\n  },\n\n  'furnace_gui_texture': {\n    content: furnace_gui_texture,\n    resourcePackPath: 'minecraft/textures/gui/container/furnace.png',\n    ...{}\n  },\n\n  'latest_gui_container_crafting_table': {\n    content: latest_gui_container_crafting_table,\n    resourcePackPath: 'minecraft/textures/gui/container/crafting_table.png',\n    ...{}\n  },\n\n  'latest_gui_container_dispenser': {\n    content: latest_gui_container_dispenser,\n    resourcePackPath: 'minecraft/textures/gui/container/dispenser.png',\n    ...{}\n  },\n\n  'latest_gui_container_hopper': {\n    content: latest_gui_container_hopper,\n    resourcePackPath: 'minecraft/textures/gui/container/hopper.png',\n    ...{}\n  },\n\n  'latest_gui_container_horse': {\n    content: latest_gui_container_horse,\n    resourcePackPath: 'minecraft/textures/gui/container/horse.png',\n    ...{}\n  },\n\n  'latest_gui_container_villager2': {\n    content: latest_gui_container_villager2,\n    resourcePackPath: 'minecraft/textures/gui/container/villager2.png',\n    ...{}\n  },\n\n  'latest_gui_container_enchanting_table': {\n    content: latest_gui_container_enchanting_table,\n    resourcePackPath: 'minecraft/textures/gui/container/enchanting_table.png',\n    ...{}\n  },\n\n  'latest_gui_container_anvil': {\n    content: latest_gui_container_anvil,\n    resourcePackPath: 'minecraft/textures/gui/container/anvil.png',\n    ...{}\n  },\n\n  'latest_gui_container_beacon': {\n    content: latest_gui_container_beacon,\n    resourcePackPath: 'minecraft/textures/gui/container/beacon.png',\n    ...{}\n  },\n\n  'latest_gui_container_smithing': {\n    content: latest_gui_container_smithing,\n    resourcePackPath: 'minecraft/textures/gui/container/smithing.png',\n    ...{}\n  },\n\n  '_1_19_4_gui_container_smithing': {\n    content: _1_19_4_gui_container_smithing,\n    resourcePackPath: 'minecraft/textures/gui/container/smithing.png',\n    ...{}\n  },\n}\ntype Keys = 'latest_gui_title_minecraft' | 'other_textures_1_19_gui_icons' | 'other_textures_latest_gui_widgets' | 'other_textures_latest_gui_bars' | 'latest_gui_container_inventory' | 'latest_gui_container_shulker_box' | 'latest_gui_container_generic_54' | 'furnace_gui_texture' | 'latest_gui_container_crafting_table' | 'latest_gui_container_dispenser' | 'latest_gui_container_hopper' | 'latest_gui_container_horse' | 'latest_gui_container_villager2' | 'latest_gui_container_enchanting_table' | 'latest_gui_container_anvil' | 'latest_gui_container_beacon' | 'latest_gui_container_smithing' | '_1_19_4_gui_container_smithing'\nexport const resourcesContentOriginal = {\n\n  'latest_gui_title_minecraft': latest_gui_title_minecraft,\n\n  'other_textures_1_19_gui_icons': other_textures_1_19_gui_icons,\n\n  'other_textures_latest_gui_widgets': other_textures_latest_gui_widgets,\n\n  'other_textures_latest_gui_bars': other_textures_latest_gui_bars,\n\n  'latest_gui_container_inventory': latest_gui_container_inventory,\n\n  'latest_gui_container_shulker_box': latest_gui_container_shulker_box,\n\n  'latest_gui_container_generic_54': latest_gui_container_generic_54,\n\n  'furnace_gui_texture': furnace_gui_texture,\n\n  'latest_gui_container_crafting_table': latest_gui_container_crafting_table,\n\n  'latest_gui_container_dispenser': latest_gui_container_dispenser,\n\n  'latest_gui_container_hopper': latest_gui_container_hopper,\n\n  'latest_gui_container_horse': latest_gui_container_horse,\n\n  'latest_gui_container_villager2': latest_gui_container_villager2,\n\n  'latest_gui_container_enchanting_table': latest_gui_container_enchanting_table,\n\n  'latest_gui_container_anvil': latest_gui_container_anvil,\n\n  'latest_gui_container_beacon': latest_gui_container_beacon,\n\n  'latest_gui_container_smithing': latest_gui_container_smithing,\n\n  '_1_19_4_gui_container_smithing': _1_19_4_gui_container_smithing,\n}\n","import { getRenamedData } from 'flying-squid/dist/blockRenames'\r\nimport collisionShapesInit from '../generated/latestBlockCollisionsShapes.json'\r\n\r\n// defining globally to be used in loaded data, not sure of better workaround\r\nwindow.globalGetCollisionShapes = (version) => {\r\n  // todo use the same in resourcepack\r\n  const versionFrom = collisionShapesInit.version\r\n  const renamedBlocks = getRenamedData('blocks', Object.keys(collisionShapesInit.blocks), versionFrom, version)\r\n  const collisionShapes = {\r\n    ...collisionShapesInit,\r\n    blocks: Object.fromEntries(Object.entries(collisionShapesInit.blocks).map(([, shape], i) => [renamedBlocks[i], shape]))\r\n  }\r\n  return collisionShapes\r\n}\r\n","//@ts-check\r\n\r\nimport { proxy, ref, subscribe } from 'valtio'\r\nimport type { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\r\nimport type { OptionsGroupType } from './optionsGuiScheme'\r\nimport { options, disabledSettings } from './optionsStorage'\r\nimport { AppConfig } from './appConfig'\r\n\r\n// todo: refactor structure with support of hideNext=false\r\n\r\nexport const notHideableModalsWithoutForce = new Set([\r\n  'app-status',\r\n  'divkit:nonclosable',\r\n  'only-connect-server',\r\n])\r\n\r\ntype Modal = ({ elem?: HTMLElement & Record<string, any> } & { reactType: string })\r\n\r\ntype ContextMenuItem = { callback; label }\r\n\r\nexport const activeModalStack: Modal[] = proxy([])\r\n\r\nexport const insertActiveModalStack = (name: string, newModalStack = activeModalStacks[name]) => {\r\n  hideModal(undefined, undefined, { restorePrevious: false, force: true })\r\n  activeModalStack.splice(0, activeModalStack.length, ...newModalStack)\r\n  const last = activeModalStack.at(-1)\r\n  if (last) showModalInner(last)\r\n}\r\n\r\nexport const activeModalStacks: Record<string, Modal[]> = {}\r\n\r\nwindow.activeModalStack = activeModalStack\r\n\r\n/**\r\n * @returns true if operation was successful\r\n */\r\nconst showModalInner = (modal: Modal) => {\r\n  const cancel = modal.elem?.show?.()\r\n  return true\r\n}\r\n\r\nexport const showModal = (elem: /* (HTMLElement & Record<string, any>) |  */{ reactType: string } | string) => {\r\n  const resolved = typeof elem === 'string' ? { reactType: elem } : elem\r\n  const curModal = activeModalStack.at(-1)\r\n  if ((resolved.reactType && resolved.reactType === curModal?.reactType) || !showModalInner(resolved)) return\r\n  activeModalStack.push(resolved)\r\n}\r\n\r\nwindow.showModal = showModal\r\n\r\n/**\r\n *\r\n * @returns true if previous modal was restored\r\n */\r\nexport const hideModal = (modal = activeModalStack.at(-1), data: any = undefined, options: { force?: boolean; restorePrevious?: boolean } = {}) => {\r\n  const { force = false, restorePrevious = true } = options\r\n  if (!modal) return\r\n  let cancel = [...notHideableModalsWithoutForce].some(m => modal.reactType.startsWith(m)) ? !force : undefined\r\n  if (force) {\r\n    cancel = undefined\r\n  }\r\n\r\n  if (!cancel) {\r\n    const lastModal = activeModalStack.at(-1)\r\n    for (let i = activeModalStack.length - 1; i >= 0; i--) {\r\n      if (activeModalStack[i].reactType === modal.reactType) {\r\n        activeModalStack.splice(i, 1)\r\n        break\r\n      }\r\n    }\r\n    const newModal = activeModalStack.at(-1)\r\n    if (newModal && lastModal !== newModal && restorePrevious) {\r\n      // would be great to ignore cancel I guess?\r\n      showModalInner(newModal)\r\n    }\r\n    return true\r\n  }\r\n}\r\n\r\nexport const hideCurrentModal = (_data?, onHide?: () => void) => {\r\n  if (hideModal(undefined, undefined)) {\r\n    onHide?.()\r\n  }\r\n}\r\n\r\nexport const hideAllModals = () => {\r\n  while (activeModalStack.length > 0) {\r\n    if (!hideModal()) break\r\n  }\r\n  return activeModalStack.length === 0\r\n}\r\n\r\nexport const openOptionsMenu = (group: OptionsGroupType) => {\r\n  showModal({ reactType: `options-${group}` })\r\n}\r\n\r\nsubscribe(activeModalStack, () => {\r\n  document.body.style.setProperty('--has-modals-z', activeModalStack.length ? '-1' : null)\r\n})\r\n\r\n// ---\r\n\r\nexport const currentContextMenu = proxy({ items: [] as ContextMenuItem[] | null, x: 0, y: 0 })\r\n\r\nexport const showContextmenu = (items: ContextMenuItem[], { clientX, clientY }) => {\r\n  Object.assign(currentContextMenu, {\r\n    items,\r\n    x: clientX,\r\n    y: clientY,\r\n  })\r\n}\r\n\r\n// ---\r\n\r\nexport const miscUiState = proxy({\r\n  currentDisplayQr: null as string | null,\r\n  currentTouch: null as boolean | null,\r\n  hasErrors: false,\r\n  singleplayer: false,\r\n  flyingSquid: false,\r\n  wanOpened: false,\r\n  wanOpening: false,\r\n  /** wether game hud is shown (in playing state) */\r\n  gameLoaded: false,\r\n  showUI: true,\r\n  showDebugHud: false,\r\n  loadedServerIndex: '',\r\n  /** currently trying to load or loaded mc version, after all data is loaded */\r\n  loadedDataVersion: null as string | null,\r\n  fsReady: false,\r\n  singleplayerAvailable: false,\r\n  usingGamepadInput: false,\r\n  appConfig: null as AppConfig | null,\r\n  displaySearchInput: false,\r\n  displayFullmap: false,\r\n  fullscreen: false,\r\n  disconnectedCleanup: null as { callback: () => void, date: number, wasConnected: boolean } | null\r\n})\r\n\r\nexport const maybeCleanupAfterDisconnect = () => {\r\n  if (miscUiState.disconnectedCleanup) {\r\n    miscUiState.disconnectedCleanup.callback()\r\n    miscUiState.disconnectedCleanup = null\r\n  }\r\n}\r\n\r\nwindow.miscUiState = miscUiState\r\n\r\nexport const isGameActive = (foregroundCheck: boolean) => {\r\n  if (foregroundCheck && activeModalStack.length) return false\r\n  return miscUiState.gameLoaded\r\n}\r\n\r\nconst updateFullscreen = () => {\r\n  miscUiState.fullscreen = !!document.fullscreenElement\r\n}\r\ndocument.documentElement.addEventListener('fullscreenchange', () => {\r\n  updateFullscreen()\r\n})\r\nupdateFullscreen()\r\n\r\n// state that is not possible to get via bot and in-game specific\r\nexport const gameAdditionalState = proxy({\r\n  isFlying: false,\r\n  isSprinting: false,\r\n  isSneaking: false,\r\n  isZooming: false,\r\n  warps: [] as WorldWarp[],\r\n  noConnection: false,\r\n  poorConnection: false,\r\n  viewerConnection: false,\r\n\r\n  usingServerResourcePack: false,\r\n})\r\n\r\nwindow.gameAdditionalState = gameAdditionalState\r\n","// workaround for mineflayer\r\nglobalThis.window ??= globalThis\r\nglobalThis.localStorage ??= {}\r\nprocess.versions.node = '18.0.0'\r\n\r\nif (!navigator.getGamepads) {\r\n  console.warn('navigator.getGamepads is not available, adding a workaround')\r\n  navigator.getGamepads ??= () => []\r\n}\r\n","import EventEmitter from 'events'\r\n\r\nwindow.reportError = window.reportError ?? console.error\r\nwindow.bot = undefined\r\nwindow.THREE = undefined\r\nwindow.localServer = undefined\r\nwindow.worldView = undefined\r\nwindow.viewer = undefined // legacy\r\nwindow.appViewer = undefined\r\nwindow.loadedData = undefined\r\nwindow.customEvents = new EventEmitter()\r\nwindow.customEvents.setMaxListeners(10_000)\r\nwindow.translate = (key) => {\r\n  if (typeof key !== 'string') return key\r\n  return window.translateText?.(key) ?? key\r\n}\r\n","import { Entity } from 'prismarine-entity'\r\nimport { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport tracker from '@nxg-org/mineflayer-tracker'\r\nimport { loader as autoJumpPlugin } from '@nxg-org/mineflayer-auto-jump'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { Team } from 'mineflayer'\r\nimport { options, watchValue } from './optionsStorage'\r\nimport { gameAdditionalState, miscUiState } from './globalState'\r\nimport { EntityStatus } from './mineflayer/entityStatus'\r\n\r\n\r\nconst updateAutoJump = () => {\r\n  if (!bot?.autoJumper) return\r\n  const autoJump = options.autoParkour || (options.autoJump === 'auto' ? miscUiState.currentTouch && !miscUiState.usingGamepadInput : options.autoJump === 'always')\r\n  bot.autoJumper.setOpts({\r\n    // jumpIntoWater: options.autoParkour,\r\n    jumpOnAllEdges: options.autoParkour,\r\n    // strictBlockCollision: true,\r\n  })\r\n  if (autoJump === bot.autoJumper.enabled) return\r\n  if (autoJump) {\r\n    bot.autoJumper.enable()\r\n  } else {\r\n    bot.autoJumper.disable()\r\n  }\r\n}\r\nsubscribeKey(options, 'autoJump', () => {\r\n  updateAutoJump()\r\n})\r\nsubscribeKey(options, 'autoParkour', () => {\r\n  updateAutoJump()\r\n})\r\nsubscribeKey(miscUiState, 'usingGamepadInput', () => {\r\n  updateAutoJump()\r\n})\r\nsubscribeKey(miscUiState, 'currentTouch', () => {\r\n  updateAutoJump()\r\n})\r\n\r\ncustomEvents.on('gameLoaded', () => {\r\n  bot.loadPlugin(tracker)\r\n  bot.loadPlugin(autoJumpPlugin)\r\n  updateAutoJump()\r\n\r\n  const playerPerAnimation = {} as Record<string, string>\r\n  const checkEntityData = (e: Entity) => {\r\n    if (!e.username) return\r\n    window.debugEntityMetadata ??= {}\r\n    window.debugEntityMetadata[e.username] = e\r\n    if (e.type === 'player') {\r\n      bot.tracker.trackEntity(e)\r\n    }\r\n  }\r\n\r\n  const trackBotEntity = () => {\r\n    // Always track the bot entity for animations\r\n    if (bot.entity) {\r\n      bot.tracker.trackEntity(bot.entity)\r\n    }\r\n  }\r\n\r\n  let lastCall = 0\r\n  bot.on('physicsTick', () => {\r\n    // throttle, tps: 6\r\n    if (Date.now() - lastCall < 166) return\r\n    lastCall = Date.now()\r\n    for (const [id, { tracking, info }] of Object.entries(bot.tracker.trackingData)) {\r\n      if (!tracking) continue\r\n      const e = bot.entities[id]\r\n      if (!e) continue\r\n      const speed = info.avgVel\r\n      const WALKING_SPEED = 0.03\r\n      const SPRINTING_SPEED = 0.18\r\n      const isCrouched = e === bot.entity ? gameAdditionalState.isSneaking : e['crouching']\r\n      const isWalking = Math.abs(speed.x) > WALKING_SPEED || Math.abs(speed.z) > WALKING_SPEED\r\n      const isSprinting = Math.abs(speed.x) > SPRINTING_SPEED || Math.abs(speed.z) > SPRINTING_SPEED\r\n\r\n      const newAnimation =\r\n        isCrouched ? (isWalking ? 'crouchWalking' : 'crouch')\r\n          : isWalking ? (isSprinting ? 'running' : 'walking')\r\n            : 'idle'\r\n      if (newAnimation !== playerPerAnimation[id]) {\r\n        // Handle bot entity animation specially (for player entity in third person)\r\n        if (e === bot.entity) {\r\n          getThreeJsRendererMethods()?.playEntityAnimation('player_entity', newAnimation)\r\n        } else {\r\n          getThreeJsRendererMethods()?.playEntityAnimation(e.id, newAnimation)\r\n        }\r\n        playerPerAnimation[id] = newAnimation\r\n      }\r\n    }\r\n  })\r\n\r\n  bot.on('entitySwingArm', (e) => {\r\n    getThreeJsRendererMethods()?.playEntityAnimation(e.id, 'oneSwing')\r\n  })\r\n\r\n  bot.on('botArmSwingStart', (hand) => {\r\n    if (hand === 'right') {\r\n      getThreeJsRendererMethods()?.playEntityAnimation('player_entity', 'oneSwing')\r\n    }\r\n  })\r\n\r\n  bot.inventory.on('updateSlot', (slot) => {\r\n    if (slot === 5 || slot === 6 || slot === 7 || slot === 8) {\r\n      const item = bot.inventory.slots[slot]!\r\n      bot.entity.equipment[slot - 3] = item\r\n      appViewer.worldView?.emit('playerEntity', bot.entity)\r\n    }\r\n  })\r\n  bot.on('heldItemChanged', () => {\r\n    const item = bot.inventory.slots[bot.quickBarSlot + 36]!\r\n    bot.entity.equipment[0] = item\r\n    appViewer.worldView?.emit('playerEntity', bot.entity)\r\n  })\r\n\r\n  bot._client.on('damage_event', (data) => {\r\n    const { entityId, sourceTypeId: damage } = data\r\n    getThreeJsRendererMethods()?.damageEntity(entityId, damage)\r\n  })\r\n\r\n  bot._client.on('entity_status', (data) => {\r\n    if (versionToNumber(bot.version) >= versionToNumber('1.19.4')) return\r\n    const { entityId, entityStatus } = data\r\n    if (entityStatus === EntityStatus.HURT) {\r\n      getThreeJsRendererMethods()?.damageEntity(entityId, entityStatus)\r\n    }\r\n\r\n    if (entityStatus === EntityStatus.BURNED) {\r\n      updateEntityStates(entityId, true, true)\r\n    }\r\n  })\r\n\r\n  // on fire events\r\n  bot._client.on('entity_metadata', (data) => {\r\n    if (data.entityId !== bot.entity.id) return\r\n    handleEntityMetadata(data)\r\n  })\r\n\r\n  bot.on('end', () => {\r\n    if (onFireTimeout) {\r\n      clearTimeout(onFireTimeout)\r\n    }\r\n  })\r\n\r\n  bot.on('respawn', () => {\r\n    if (onFireTimeout) {\r\n      clearTimeout(onFireTimeout)\r\n    }\r\n  })\r\n\r\n  const updateCamera = (entity: Entity) => {\r\n    if (bot.game.gameMode !== 'spectator') return\r\n    bot.entity.position = entity.position.clone()\r\n    void bot.look(entity.yaw, entity.pitch, true)\r\n    bot.entity.yaw = entity.yaw\r\n    bot.entity.pitch = entity.pitch\r\n  }\r\n\r\n  bot.on('entityGone', (entity) => {\r\n    bot.tracker.stopTrackingEntity(entity, true)\r\n  })\r\n\r\n  bot.on('entityMoved', (e) => {\r\n    checkEntityData(e)\r\n    if (appViewer.playerState.reactive.cameraSpectatingEntity === e.id) {\r\n      updateCamera(e)\r\n    }\r\n  })\r\n  bot._client.on('entity_velocity', (packet) => {\r\n    const e = bot.entities[packet.entityId]\r\n    if (!e) return\r\n    checkEntityData(e)\r\n  })\r\n\r\n  for (const entity of Object.values(bot.entities)) {\r\n    if (entity !== bot.entity) {\r\n      checkEntityData(entity)\r\n    }\r\n  }\r\n\r\n  // Track bot entity initially\r\n  trackBotEntity()\r\n\r\n  bot.on('entitySpawn', (e) => {\r\n    checkEntityData(e)\r\n    if (appViewer.playerState.reactive.cameraSpectatingEntity === e.id) {\r\n      updateCamera(e)\r\n    }\r\n  })\r\n  bot.on('entityUpdate', checkEntityData)\r\n  bot.on('entityEquip', checkEntityData)\r\n\r\n  // Re-track bot entity after login\r\n  bot.on('login', () => {\r\n    setTimeout(() => {\r\n      trackBotEntity()\r\n    }) // Small delay to ensure bot.entity is properly set\r\n  })\r\n\r\n  bot._client.on('camera', (packet) => {\r\n    if (bot.player.entity.id === packet.cameraId) {\r\n      if (appViewer.playerState.utils.isSpectatingEntity() && appViewer.playerState.reactive.cameraSpectatingEntity) {\r\n        const entity = bot.entities[appViewer.playerState.reactive.cameraSpectatingEntity]\r\n        appViewer.playerState.reactive.cameraSpectatingEntity = undefined\r\n        if (entity) {\r\n          // do a force entity update\r\n          bot.emit('entityUpdate', entity)\r\n        }\r\n      }\r\n    } else if (appViewer.playerState.reactive.gameMode === 'spectator') {\r\n      const entity = bot.entities[packet.cameraId]\r\n      appViewer.playerState.reactive.cameraSpectatingEntity = packet.cameraId\r\n      if (entity) {\r\n        updateCamera(entity)\r\n        // do a force entity update\r\n        bot.emit('entityUpdate', entity)\r\n      }\r\n    }\r\n  })\r\n\r\n  const applySkinTexturesProxy = (url: string | undefined) => {\r\n    const { appConfig } = miscUiState\r\n    if (appConfig?.skinTexturesProxy) {\r\n      return url?.replace('http://textures.minecraft.net/', appConfig.skinTexturesProxy)\r\n        .replace('https://textures.minecraft.net/', appConfig.skinTexturesProxy)\r\n    }\r\n    return url\r\n  }\r\n\r\n  // Texture override from packet properties\r\n  const updateSkin = (player: import('mineflayer').Player) => {\r\n    if (!player.uuid || !player.username || !player.skinData) return\r\n\r\n    try {\r\n      const skinUrl = applySkinTexturesProxy(player.skinData.url)\r\n      const capeUrl = applySkinTexturesProxy((player.skinData as any).capeUrl)\r\n\r\n      // Find entity with matching UUID and update skin\r\n      let entityId = ''\r\n      for (const [entId, entity] of Object.entries(bot.entities)) {\r\n        if (entity.uuid === player.uuid) {\r\n          entityId = entId\r\n          break\r\n        }\r\n      }\r\n      // even if not found, still record to cache\r\n      void getThreeJsRendererMethods()!.updatePlayerSkin(entityId, player.username, player.uuid, skinUrl ?? true, capeUrl)\r\n    } catch (err) {\r\n      reportError(new Error('Error applying skin texture:', { cause: err }))\r\n    }\r\n  }\r\n\r\n  bot.on('playerJoined', updateSkin)\r\n  bot.on('playerUpdated', updateSkin)\r\n  for (const entity of Object.values(bot.players)) {\r\n    updateSkin(entity)\r\n  }\r\n\r\n  const teamUpdated = (team: Team) => {\r\n    for (const entity of Object.values(bot.entities)) {\r\n      if (entity.type === 'player' && entity.username && team.members.includes(entity.username) || entity.uuid && team.members.includes(entity.uuid)) {\r\n        bot.emit('entityUpdate', entity)\r\n      }\r\n    }\r\n  }\r\n  bot.on('teamUpdated', teamUpdated)\r\n  for (const team of Object.values(bot.teams)) {\r\n    teamUpdated(team)\r\n  }\r\n\r\n  const updateEntityNameTags = (team: Team) => {\r\n    for (const entity of Object.values(bot.entities)) {\r\n      const entityTeam = entity.type === 'player' && entity.username ? bot.teamMap[entity.username] : entity.uuid ? bot.teamMap[entity.uuid] : undefined\r\n      if ((entityTeam?.nameTagVisibility === 'hideForOwnTeam' && entityTeam.name === team.name)\r\n        || (entityTeam?.nameTagVisibility === 'hideForOtherTeams' && entityTeam.name !== team.name)) {\r\n        bot.emit('entityUpdate', entity)\r\n      }\r\n    }\r\n  }\r\n\r\n  const doEntitiesNeedUpdating = (team: Team) => {\r\n    return team.nameTagVisibility === 'never'\r\n      || (team.nameTagVisibility === 'hideForOtherTeams' && appViewer.playerState.reactive.team?.team !== team.team)\r\n      || (team.nameTagVisibility === 'hideForOwnTeam' && appViewer.playerState.reactive.team?.team === team.team)\r\n  }\r\n\r\n  bot.on('teamMemberAdded', (team: Team, members: string[]) => {\r\n    if (members.includes(bot.username) && appViewer.playerState.reactive.team?.team !== team.team) {\r\n      appViewer.playerState.reactive.team = team\r\n      // Player was added to a team, need to check if any entities need updating\r\n      updateEntityNameTags(team)\r\n    } else if (doEntitiesNeedUpdating(team)) {\r\n      // Need to update all entities that were added\r\n      for (const entity of Object.values(bot.entities)) {\r\n        if (entity.type === 'player' && entity.username && members.includes(entity.username) || entity.uuid && members.includes(entity.uuid)) {\r\n          bot.emit('entityUpdate', entity)\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n  bot.on('teamMemberRemoved', (team: Team, members: string[]) => {\r\n    if (members.includes(bot.username) && appViewer.playerState.reactive.team?.team === team.team) {\r\n      appViewer.playerState.reactive.team = undefined\r\n      // Player was removed from a team, need to check if any entities need updating\r\n      updateEntityNameTags(team)\r\n    } else if (doEntitiesNeedUpdating(team)) {\r\n      // Need to update all entities that were removed\r\n      for (const entity of Object.values(bot.entities)) {\r\n        if (entity.type === 'player' && entity.username && members.includes(entity.username) || entity.uuid && members.includes(entity.uuid)) {\r\n          bot.emit('entityUpdate', entity)\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n  bot.on('teamRemoved', (team: Team) => {\r\n    if (appViewer.playerState.reactive.team?.team === team?.team) {\r\n      appViewer.playerState.reactive.team = undefined\r\n      // Player's team was removed, need to update all entities that are in a team\r\n      updateEntityNameTags(team)\r\n    }\r\n  })\r\n\r\n})\r\n\r\n// Constants\r\nconst SHARED_FLAGS_KEY = 0\r\nconst ENTITY_FLAGS = {\r\n  ON_FIRE: 0x01, // Bit 0\r\n  SNEAKING: 0x02, // Bit 1\r\n  SPRINTING: 0x08, // Bit 3\r\n  SWIMMING: 0x10, // Bit 4\r\n  INVISIBLE: 0x20, // Bit 5\r\n  GLOWING: 0x40, // Bit 6\r\n  FALL_FLYING: 0x80 // Bit 7 (elytra flying)\r\n}\r\n\r\nlet onFireTimeout: NodeJS.Timeout | undefined\r\nconst updateEntityStates = (entityId: number, onFire: boolean, timeout?: boolean) => {\r\n  if (entityId !== bot.entity.id) return\r\n  appViewer.playerState.reactive.onFire = onFire\r\n  if (onFireTimeout) {\r\n    clearTimeout(onFireTimeout)\r\n  }\r\n  if (timeout) {\r\n    onFireTimeout = setTimeout(() => {\r\n      updateEntityStates(entityId, false, false)\r\n    }, 5000)\r\n  }\r\n}\r\n\r\n// Process entity metadata packet\r\nfunction handleEntityMetadata (packet: { entityId: number, metadata: Array<{ key: number, type: string, value: number }> }) {\r\n  const { entityId, metadata } = packet\r\n\r\n  // Find shared flags in metadata\r\n  const flagsData = metadata.find(meta => meta.key === SHARED_FLAGS_KEY &&\r\n    meta.type === 'byte')\r\n\r\n  // Update fire state if flags were found\r\n  if (flagsData) {\r\n    const wasOnFire = appViewer.playerState.reactive.onFire\r\n    appViewer.playerState.reactive.onFire = (flagsData.value & ENTITY_FLAGS.ON_FIRE) !== 0\r\n  }\r\n}\r\n","import { contro } from './controls'\r\nimport { activeModalStack, isGameActive, miscUiState, showModal } from './globalState'\r\nimport { options } from './optionsStorage'\r\nimport { hideNotification, notificationProxy } from './react/NotificationProvider'\r\nimport { pointerLock } from './utils'\r\nimport { updateMotion, initMotionTracking } from './react/uiMotion'\r\n\r\nlet lastMouseMove: number\r\n\r\nexport type CameraMoveEvent = {\r\n  movementX: number\r\n  movementY: number\r\n  type: string\r\n  stopPropagation?: () => void\r\n}\r\n\r\nexport function onCameraMove (e: MouseEvent | CameraMoveEvent) {\r\n  if (!isGameActive(true)) return\r\n  if (e.type === 'mousemove' && !document.pointerLockElement) return\r\n  e.stopPropagation?.()\r\n  if (appViewer.playerState.utils.isSpectatingEntity()) return\r\n  const now = performance.now()\r\n  // todo: limit camera movement for now to avoid unexpected jumps\r\n  if (now - lastMouseMove < 4 && !options.preciseMouseInput) return\r\n  lastMouseMove = now\r\n  let { mouseSensX, mouseSensY } = options\r\n  if (mouseSensY === -1) mouseSensY = mouseSensX\r\n  moveCameraRawHandler({\r\n    x: e.movementX * mouseSensX * 0.0001,\r\n    y: e.movementY * mouseSensY * 0.0001\r\n  })\r\n  bot.mouse.update()\r\n  updateMotion()\r\n}\r\n\r\nexport const moveCameraRawHandler = ({ x, y }: { x: number; y: number }) => {\r\n  const maxPitch = 0.5 * Math.PI\r\n  const minPitch = -0.5 * Math.PI\r\n\r\n  appViewer.lastCamUpdate = Date.now()\r\n\r\n  // if (viewer.world.freeFlyMode) {\r\n  //   // Update freeFlyState directly\r\n  //   viewer.world.freeFlyState.yaw = (viewer.world.freeFlyState.yaw - x) % (2 * Math.PI)\r\n  //   viewer.world.freeFlyState.pitch = Math.max(minPitch, Math.min(maxPitch, viewer.world.freeFlyState.pitch - y))\r\n  //   return\r\n  // }\r\n\r\n  if (!bot?.entity) return\r\n  const pitch = bot.entity.pitch - y\r\n  void bot.look(bot.entity.yaw - x, Math.max(minPitch, Math.min(maxPitch, pitch)), true)\r\n  appViewer.backend?.updateCamera(null, bot.entity.yaw, pitch)\r\n}\r\n\r\nwindow.addEventListener('mousemove', (e: MouseEvent) => {\r\n  onCameraMove(e)\r\n}, { capture: true })\r\n\r\nexport const onControInit = () => {\r\n  contro.on('stickMovement', ({ stick, vector }) => {\r\n    if (!isGameActive(true)) return\r\n    if (stick !== 'right') return\r\n    let { x, z } = vector\r\n    if (Math.abs(x) < 0.18) x = 0\r\n    if (Math.abs(z) < 0.18) z = 0\r\n    onCameraMove({\r\n      movementX: x * 10,\r\n      movementY: z * 10,\r\n      type: 'stickMovement',\r\n      stopPropagation () {}\r\n    } as CameraMoveEvent)\r\n    miscUiState.usingGamepadInput = true\r\n  })\r\n}\r\n\r\nfunction pointerLockChangeCallback () {\r\n  if (appViewer.rendererState.preventEscapeMenu) return\r\n  if (!pointerLock.hasPointerLock && activeModalStack.length === 0 && miscUiState.gameLoaded) {\r\n    showModal({ reactType: 'pause-screen' })\r\n  }\r\n}\r\n\r\ndocument.addEventListener('pointerlockchange', pointerLockChangeCallback, false)\r\n","import { Command, contro } from '../controls'\r\nimport { hideAllModals, hideCurrentModal, miscUiState } from '../globalState'\r\nimport { gamepadUiCursorState, moveGamepadCursorByPx } from '../react/GamepadUiCursor'\r\n\r\nlet lastHoveredElement: HTMLElement | null = null\r\n\r\ncontro.on('movementUpdate', ({ vector, soleVector, gamepadIndex }) => {\r\n  if (gamepadIndex !== undefined && gamepadUiCursorState.display) {\r\n    const deadzone = 0.1 // TODO make deadzone configurable\r\n    if (Math.abs(soleVector.x) < deadzone && Math.abs(soleVector.z) < deadzone) {\r\n      return\r\n    }\r\n    moveGamepadCursorByPx(soleVector.x, true)\r\n    moveGamepadCursorByPx(soleVector.z, false)\r\n    emitMousemove()\r\n    trackHoveredElement()\r\n  }\r\n})\r\n\r\nconst emitMousemove = () => {\r\n  const { x, y } = gamepadUiCursorState\r\n  const xAbs = x / 100 * window.innerWidth\r\n  const yAbs = y / 100 * window.innerHeight\r\n  const element = document.elementFromPoint(xAbs, yAbs) as HTMLElement | null\r\n  if (!element) return\r\n  element.dispatchEvent(new MouseEvent('mousemove', {\r\n    clientX: xAbs,\r\n    clientY: yAbs\r\n  }))\r\n}\r\n\r\nconst trackHoveredElement = () => {\r\n  const { x, y } = gamepadUiCursorState\r\n  const xAbs = x / 100 * window.innerWidth\r\n  const yAbs = y / 100 * window.innerHeight\r\n  const element = document.elementFromPoint(xAbs, yAbs) as HTMLElement | null\r\n\r\n  if (element !== lastHoveredElement) {\r\n    // Emit mouseout for previous element\r\n    if (lastHoveredElement) {\r\n      const mouseoutEvent = new MouseEvent('mouseout', {\r\n        bubbles: true,\r\n        clientX: xAbs,\r\n        clientY: yAbs\r\n      }) as any\r\n      mouseoutEvent.isGamepadCursor = true\r\n      lastHoveredElement.dispatchEvent(mouseoutEvent)\r\n    }\r\n\r\n    // Emit mouseover for new element\r\n    if (element) {\r\n      const mouseoverEvent = new MouseEvent('mouseover', {\r\n        bubbles: true,\r\n        clientX: xAbs,\r\n        clientY: yAbs\r\n      }) as any\r\n      mouseoverEvent.isGamepadCursor = true\r\n      element.dispatchEvent(mouseoverEvent)\r\n    }\r\n\r\n    lastHoveredElement = element\r\n  }\r\n}\r\n\r\n// Setup right stick scrolling and input value changing for UI mode\r\ncontro.on('stickMovement', ({ stick, vector }) => {\r\n  if (stick !== 'right') return\r\n  if (!gamepadUiCursorState.display) return\r\n\r\n  let { x, z } = vector\r\n  if (Math.abs(x) < 0.18) x = 0\r\n  if (Math.abs(z) < 0.18) z = 0\r\n\r\n  // Handle horizontal movement (for inputs)\r\n  if (x !== 0) {\r\n    emitGamepadInputChange(x, true)\r\n  }\r\n\r\n  // Handle vertical movement (for scrolling)\r\n  if (z !== 0) {\r\n    emulateGamepadScroll(z)\r\n  }\r\n\r\n  miscUiState.usingGamepadInput = true\r\n})\r\n\r\n// todo make also control with left/right\r\n\r\nconst emitGamepadInputChange = (x: number, isStickMovement: boolean) => {\r\n  const cursorX = gamepadUiCursorState.x / 100 * window.innerWidth\r\n  const cursorY = gamepadUiCursorState.y / 100 * window.innerHeight\r\n  const element = document.elementFromPoint(cursorX, cursorY) as HTMLElement | null\r\n\r\n  if (element) {\r\n    // Emit custom event for input value change\r\n    const customEvent = new CustomEvent('gamepadInputChange', {\r\n      bubbles: true,\r\n      detail: { direction: x > 0 ? 1 : -1, value: x, isStickMovement },\r\n    })\r\n    element.dispatchEvent(customEvent)\r\n  }\r\n}\r\n\r\nconst emulateGamepadScroll = (z: number) => {\r\n  // Get element under cursor\r\n  const cursorX = gamepadUiCursorState.x / 100 * window.innerWidth\r\n  const cursorY = gamepadUiCursorState.y / 100 * window.innerHeight\r\n  const element = document.elementFromPoint(cursorX, cursorY) as HTMLElement | null\r\n\r\n  if (!element) return\r\n\r\n  // Find the first scrollable parent\r\n  const scrollableParent = findScrollableParent(element)\r\n\r\n  if (scrollableParent) {\r\n    // Scroll the container directly\r\n    const scrollAmount = z * 30 // Adjust multiplier for scroll speed\r\n    scrollableParent.scrollTop += scrollAmount\r\n  }\r\n}\r\n\r\nconst findScrollableParent = (element: HTMLElement | null): HTMLElement | null => {\r\n  if (!element) return null\r\n\r\n  // Check if current element is scrollable\r\n  const isScrollable = (el: HTMLElement) => {\r\n    const { overflowY } = window.getComputedStyle(el)\r\n    const hasVerticalScroll = el.scrollHeight > el.clientHeight\r\n    return hasVerticalScroll && (overflowY === 'auto' || overflowY === 'scroll' || overflowY === 'overlay')\r\n  }\r\n\r\n  let current: HTMLElement | null = element\r\n\r\n  // Traverse up the DOM tree to find scrollable parent\r\n  while (current && current !== document.body) {\r\n    if (isScrollable(current)) {\r\n      return current\r\n    }\r\n    current = current.parentElement\r\n  }\r\n\r\n  // If no scrollable parent found, try scrolling the body/documentElement\r\n  if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {\r\n    return document.documentElement\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nglobalThis.emulateGamepadScroll = emulateGamepadScroll\r\n\r\nlet lastClickedEl = null as HTMLElement | null\r\nlet lastClickedElTimeout: ReturnType<typeof setTimeout> | undefined\r\n\r\nconst inModalCommand = (command: Command, pressed: boolean) => {\r\n  if (pressed && !gamepadUiCursorState.display) return\r\n\r\n  if (pressed) {\r\n    if (command === 'ui.back') {\r\n      hideCurrentModal()\r\n    }\r\n    if (command === 'ui.pauseMenu') {\r\n      // hide all modals\r\n      hideAllModals()\r\n    }\r\n    if (command === 'ui.leftClick' || command === 'ui.rightClick') {\r\n      emulateMouseClick(command === 'ui.rightClick')\r\n    }\r\n  }\r\n\r\n  if (command === 'ui.speedupCursor') {\r\n    gamepadUiCursorState.multiply = pressed ? 2 : 1\r\n  }\r\n}\r\n\r\ncontro.on('trigger', ({ command }) => {\r\n  inModalCommand(command, true)\r\n})\r\n\r\ncontro.on('release', ({ command }) => {\r\n  inModalCommand(command, false)\r\n})\r\n\r\nexport const emulateMouseClick = (isRightClick: boolean) => {\r\n  // in percent\r\n  const { x, y } = gamepadUiCursorState\r\n  const xAbs = x / 100 * window.innerWidth\r\n  const yAbs = y / 100 * window.innerHeight\r\n  const el = document.elementFromPoint(xAbs, yAbs) as HTMLElement\r\n  if (el) {\r\n    if (el === lastClickedEl && !isRightClick) {\r\n      el.dispatchEvent(new MouseEvent('dblclick', {\r\n        bubbles: true,\r\n        clientX: xAbs,\r\n        clientY: yAbs\r\n      }))\r\n      return\r\n    }\r\n    el.dispatchEvent(new MouseEvent('mousedown', {\r\n      button: isRightClick ? 2 : 0,\r\n      bubbles: true,\r\n      clientX: xAbs,\r\n      clientY: yAbs\r\n    }))\r\n    el.dispatchEvent(new MouseEvent(isRightClick ? 'contextmenu' : 'click', {\r\n      bubbles: true,\r\n      clientX: xAbs,\r\n      clientY: yAbs\r\n    }))\r\n    el.dispatchEvent(new MouseEvent('mouseup', {\r\n      button: isRightClick ? 2 : 0,\r\n      bubbles: true,\r\n      clientX: xAbs,\r\n      clientY: yAbs\r\n    }))\r\n    el.focus()\r\n    lastClickedEl = el\r\n    if (lastClickedElTimeout) clearTimeout(lastClickedElTimeout)\r\n    lastClickedElTimeout = setTimeout(() => {\r\n      lastClickedEl = null\r\n    }, 500)\r\n  }\r\n\r\n}\r\n\r\nglobalThis.emulateMouseClick = emulateMouseClick\r\n","import { Duplex } from 'stream'\r\nimport { Peer, DataConnection } from 'peerjs'\r\nimport Client from 'minecraft-protocol/src/client'\r\nimport { resolveTimeout } from './utils'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { miscUiState } from './globalState'\r\n\r\nclass CustomDuplex extends Duplex {\r\n  constructor (options, public writeAction) {\r\n    super(options)\r\n  }\r\n\r\n  _read () { }\r\n\r\n  _write (chunk, encoding, callback) {\r\n    this.writeAction(chunk)\r\n    callback()\r\n  }\r\n}\r\n\r\nlet peerInstance: Peer | undefined\r\n\r\nlet overridePeerJsServer = null as string | null\r\n\r\nexport const getJoinLink = () => {\r\n  if (!peerInstance) return\r\n  const url = new URL(window.location.href)\r\n  for (const key of url.searchParams.keys()) {\r\n    url.searchParams.delete(key)\r\n  }\r\n  url.searchParams.set('connectPeer', peerInstance.id)\r\n  url.searchParams.set('peerVersion', localServer!.options.version)\r\n  const host = (overridePeerJsServer ?? miscUiState.appConfig?.peerJsServer) ?? undefined\r\n  if (host) {\r\n    // TODO! use miscUiState.appConfig.peerJsServer\r\n    url.searchParams.set('server', host)\r\n  }\r\n  return url.toString()\r\n}\r\n\r\nconst copyJoinLink = async () => {\r\n  miscUiState.wanOpened = true\r\n  const joinLink = getJoinLink()!\r\n  if (navigator.clipboard) {\r\n    await navigator.clipboard.writeText(joinLink)\r\n  } else {\r\n    window.prompt('Copy to clipboard: Ctrl+C, Enter', joinLink)\r\n  }\r\n}\r\n\r\nexport const openToWanAndCopyJoinLink = async (writeText: (text) => void, doCopy = true) => {\r\n  if (!localServer) return\r\n  if (peerInstance) {\r\n    if (doCopy) await copyJoinLink()\r\n    return 'Already opened to wan. Join link copied'\r\n  }\r\n  miscUiState.wanOpening = true\r\n  const host = (overridePeerJsServer ?? miscUiState.appConfig?.peerJsServer) || undefined\r\n  const params = host ? parseUrl(host) : undefined\r\n  const peer = new Peer({\r\n    debug: 3,\r\n    secure: true,\r\n    ...params\r\n  })\r\n  peerInstance = peer\r\n  peer.on('connection', (connection) => {\r\n    console.log('connection')\r\n    const serverDuplex = new CustomDuplex({}, async (data) => connection.send(data))\r\n    const client = new Client(true, localServer.options.version, undefined)\r\n    client.setSocket(serverDuplex)\r\n    localServer._server.emit('connection', client)\r\n\r\n    connection.on('data', (data: any) => {\r\n      serverDuplex.push(Buffer.from(data))\r\n    })\r\n    // our side disconnect\r\n    const endConnection = () => {\r\n      console.log('connection.close')\r\n      serverDuplex.end()\r\n      connection.close()\r\n    }\r\n    serverDuplex.on('end', endConnection)\r\n    serverDuplex.on('force-close', endConnection)\r\n    client.on('end', endConnection)\r\n\r\n    const disconnected = () => {\r\n      serverDuplex.end()\r\n      client.end()\r\n    }\r\n    connection.on('iceStateChanged', (state) => {\r\n      console.log('iceStateChanged', state)\r\n      if (state === 'disconnected') {\r\n        disconnected()\r\n      }\r\n    })\r\n    connection.on('close', disconnected)\r\n    connection.on('error', disconnected)\r\n  })\r\n  const fallbackServer = miscUiState.appConfig?.peerJsServerFallback\r\n  const hasFallback = fallbackServer && peer.options.host !== fallbackServer\r\n  let hadErrorReported = false\r\n  peer.on('error', (error) => {\r\n    console.error('peerJS error', error)\r\n    if (error.type === 'server-error' && hasFallback) {\r\n      return\r\n    }\r\n    hadErrorReported = true\r\n    writeText(error.message || JSON.stringify(error))\r\n  })\r\n  let timeout\r\n  const destroy = () => {\r\n    clearTimeout(timeout)\r\n    timeout = undefined\r\n    peer.destroy()\r\n    peerInstance = undefined\r\n  }\r\n\r\n  const result = await new Promise<string>(resolve => {\r\n    peer.on('open', async () => {\r\n      await copyJoinLink()\r\n      resolve('Copied join link to clipboard')\r\n    })\r\n    timeout = setTimeout(async () => {\r\n      if (!hadErrorReported && timeout !== undefined) {\r\n        if (hasFallback && overridePeerJsServer === null) {\r\n          destroy()\r\n          overridePeerJsServer = fallbackServer\r\n          console.log('Trying fallback server due to timeout', fallbackServer)\r\n          resolve((await openToWanAndCopyJoinLink(writeText, doCopy))!)\r\n        } else {\r\n          writeText('timeout')\r\n          resolve('Failed to open to wan (timeout)')\r\n        }\r\n      }\r\n    }, 6000)\r\n\r\n    // fallback\r\n    peer.on('error', async (error) => {\r\n      if (!peer.open) {\r\n        if (hasFallback) {\r\n          destroy()\r\n\r\n          overridePeerJsServer = fallbackServer\r\n          console.log('Trying fallback server', fallbackServer)\r\n          resolve((await openToWanAndCopyJoinLink(writeText, doCopy))!)\r\n        }\r\n      }\r\n    })\r\n  })\r\n  if (peerInstance && !peerInstance.open) {\r\n    destroy()\r\n  }\r\n  miscUiState.wanOpening = false\r\n  return result\r\n}\r\n\r\nconst parseUrl = (url: string) => {\r\n  // peerJS does this internally for some reason: const url = new URL(`${protocol}://${host}:${port}${path}${key}/${method}`)\r\n  if (!url.startsWith('http')) url = `${location.protocol}//${url}`\r\n  const urlObj = new URL(url)\r\n  const key = urlObj.searchParams.get('key')\r\n  return {\r\n    host: urlObj.hostname,\r\n    path: urlObj.pathname,\r\n    protocol: urlObj.protocol.slice(0, -1),\r\n    ...urlObj.port ? { port: +urlObj.port } : {},\r\n    ...key ? { key } : {},\r\n  }\r\n}\r\n\r\nexport const closeWan = () => {\r\n  peerInstance?.destroy()\r\n  peerInstance = undefined\r\n  miscUiState.wanOpened = false\r\n  return 'Closed WAN'\r\n}\r\n\r\nexport type ConnectPeerOptions = {\r\n  server?: string\r\n}\r\n\r\nexport const connectToPeer = async (peerId: string, options: ConnectPeerOptions = {}) => {\r\n  setLoadingScreenStatus('Connecting to peer server')\r\n  // todo destroy connection on error\r\n  // TODO! use miscUiState.appConfig.peerJsServer\r\n  const host = options.server\r\n  const params = host ? parseUrl(host) : undefined\r\n  const peer = new Peer({\r\n    debug: 3,\r\n    ...params\r\n  })\r\n  await resolveTimeout(new Promise(resolve => {\r\n    peer.once('open', resolve)\r\n  }))\r\n  setLoadingScreenStatus('Connecting to the peer')\r\n  const connection = peer.connect(peerId, {\r\n    serialization: 'raw',\r\n  })\r\n  await resolveTimeout(new Promise<void>((resolve, reject) => {\r\n    connection.once('error', (error) => {\r\n      console.log(error.type, error.name)\r\n      console.log(error)\r\n      reject(error.message)\r\n    })\r\n    connection.once('open', resolve)\r\n  }))\r\n\r\n  const clientDuplex = new CustomDuplex({}, (data) => {\r\n    // todo debug until play state\r\n    // console.debug('sending', data.toString())\r\n    void connection.send(data)\r\n  })\r\n  connection.on('data', (data: any) => {\r\n    console.debug('received', Buffer.from(data).toString())\r\n    clientDuplex.push(Buffer.from(data))\r\n  })\r\n  connection.on('close', () => {\r\n    console.log('connection closed')\r\n    clientDuplex.end()\r\n    // bot._client.end()\r\n    // bot.end()\r\n    bot.emit('end', 'Disconnected.')\r\n  })\r\n  connection.on('error', (error) => {\r\n    console.error(error)\r\n    clientDuplex.end()\r\n  })\r\n\r\n  return clientDuplex\r\n}\r\n","import { useState, useEffect, useRef, createContext, useContext } from 'react'\r\nimport { UserOverridesConfig } from 'contro-max/build/types/store'\r\nimport { AllKeyCodes } from 'contro-max/build/types/keyCodes'\r\nimport { contro as controEx } from '../controls'\r\nimport { hideModal } from '../globalState'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport KeybindingsCustom, { CustomCommandsMap } from './KeybindingsCustom'\r\nimport { BindingActionsContext } from './KeybindingsScreenProvider'\r\nimport Button from './Button'\r\nimport Screen from './Screen'\r\nimport Keybinding from './Keybinding'\r\nimport styles from './KeybindingsScreen.module.css'\r\n\r\n\r\ntype HandleClick = (group: string, action: string, index: number, type: string | null) => void\r\n\r\ntype setBinding = (data: any, group: string, command: string, buttonIndex: number) => void\r\n\r\nexport const Context = createContext({\r\n  isPS: false as boolean | undefined,\r\n  userConfig: controEx?.userConfig ?? {} as UserOverridesConfig | undefined,\r\n  setUserConfig (config) { },\r\n  handleClick: (() => { }) as HandleClick,\r\n  bindsMap: { keyboard: {} as any, gamepad: {} as any }\r\n})\r\n\r\nexport default ({\r\n  contro,\r\n  isPS,\r\n}: {\r\n  contro: typeof controEx,\r\n  isPS?: boolean\r\n}) => {\r\n  const containerRef = useRef<HTMLDivElement | null>(null)\r\n  const bindsMap = useRef({ keyboard: {} as any, gamepad: {} as any })\r\n  const { commands } = contro.inputSchema\r\n  const [userConfig, setUserConfig] = useState(contro.userConfig ?? {})\r\n  const [awaitingInputType, setAwaitingInputType] = useState(null as null | 'keyboard' | 'gamepad')\r\n  const [groupName, setGroupName] = useState('')\r\n  const [actionName, setActionName] = useState('')\r\n  const [buttonNum, setButtonNum] = useState(0)\r\n  const { updateBinds } = useContext(BindingActionsContext)\r\n  const [customCommands, setCustomCommands] = useState<CustomCommandsMap>(userConfig.custom as CustomCommandsMap ?? {})\r\n\r\n  const updateCurrBind = (group: string, action: string) => {\r\n    setGroupName(prev => group)\r\n    setActionName(prev => action)\r\n  }\r\n\r\n  const handleClick: HandleClick = (group, action, index, type) => {\r\n    (document.activeElement as HTMLElement)?.blur()\r\n    setAwaitingInputType(type as any)\r\n    updateCurrBind(group, action)\r\n    setButtonNum(prev => index)\r\n  }\r\n\r\n  const setBinding: setBinding = (data, group, command, buttonIndex) => {\r\n    setUserConfig(prev => {\r\n      const newConfig = { ...prev }\r\n      newConfig[group] ??= {}\r\n      newConfig[group][command] ??= {}\r\n\r\n      // keys and buttons should always exist in commands\r\n      const type = 'code' in data ? 'keys' : 'button' in data ? 'gamepad' : null\r\n      if (type) {\r\n        newConfig[group][command][type] ??= group === 'custom' ? [] : [...contro.inputSchema.commands[group][command][type]]\r\n        newConfig[group][command][type]![buttonIndex] = data.code ?? data.button\r\n      }\r\n\r\n      return newConfig\r\n    })\r\n  }\r\n\r\n  const resetBinding = (group: string, command: string, inputType: string) => {\r\n    if (!userConfig?.[group]?.[command]) return\r\n\r\n    setUserConfig(prev => {\r\n      const newConfig = { ...prev }\r\n      const prop = inputType === 'keyboard' ? 'keys' : 'gamepad'\r\n      newConfig[group][command][prop] = undefined\r\n      return newConfig\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    updateBinds(userConfig)\r\n    setCustomCommands({ ...userConfig.custom as CustomCommandsMap })\r\n\r\n    updateBindMap()\r\n  }, [userConfig])\r\n\r\n  const updateBinding = (data: any) => {\r\n    if ((!data.state && awaitingInputType) || !awaitingInputType) {\r\n      setAwaitingInputType(null)\r\n      return\r\n    }\r\n\r\n\r\n    if ('code' in data) {\r\n      if (data.state && [...contro.pressedKeys].includes(data.code)) return\r\n\r\n      if (data.code === 'Escape' || ['Mouse0', 'Mouse1', 'Mouse2'].includes(data.code)) {\r\n        setAwaitingInputType(null)\r\n        return\r\n      }\r\n      const pressedModifiers = [...contro.pressedKeys].filter(key => /^(Meta|Control|Alt|Shift)?$/.test(key))\r\n      setBinding(\r\n        { code: pressedModifiers.length ? `${pressedModifiers[0]}+${data.code}` : data.code, state: true },\r\n        groupName,\r\n        actionName,\r\n        buttonNum\r\n      )\r\n    }\r\n    if ('button' in data) {\r\n      contro.enabled = false\r\n      void Promise.resolve().then(() => { contro.enabled = true })\r\n      setBinding(data, groupName, actionName, buttonNum)\r\n    }\r\n  }\r\n\r\n  const updateBindMap = () => {\r\n    bindsMap.current = { keyboard: {} as any, gamepad: {} as any }\r\n    if (commands) {\r\n      for (const [group, actions] of Object.entries(commands)) {\r\n        for (const [action, { keys, gamepad }] of Object.entries(actions)) {\r\n          if (keys) {\r\n            let currKeys\r\n            if (userConfig?.[group]?.[action]?.keys) {\r\n              currKeys = userConfig[group][action].keys\r\n            } else {\r\n              currKeys = keys\r\n            }\r\n            for (const [index, key] of currKeys.entries()) {\r\n              bindsMap.current.keyboard[key] ??= []\r\n              if (!bindsMap.current.keyboard[key].some(obj => obj.group === group && obj.action === action && obj.index === index)) {\r\n                bindsMap.current.keyboard[key].push({ group, action, index })\r\n              }\r\n            }\r\n          }\r\n          if (gamepad) {\r\n            let currButtons\r\n            if (userConfig?.[group]?.[action]?.gamepad) {\r\n              currButtons = userConfig[group][action].gamepad\r\n            } else {\r\n              currButtons = gamepad\r\n            }\r\n            if (currButtons.length > 0) {\r\n              bindsMap.current.gamepad[currButtons[0]] ??= []\r\n              bindsMap.current.gamepad[currButtons[0]].push({ group, action, index: 0 })\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // fill binds map\r\n  useEffect(() => {\r\n    updateBindMap()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!awaitingInputType) return\r\n    contro.on('pressedKeyOrButtonChanged', updateBinding)\r\n    const preventDefault = (e) => e.preventDefault()\r\n    document.addEventListener('keydown', preventDefault, { passive: false })\r\n\r\n    return () => {\r\n      contro.off('pressedKeyOrButtonChanged', updateBinding)\r\n      document.removeEventListener('keydown', preventDefault)\r\n    }\r\n  }, [groupName, actionName, awaitingInputType])\r\n\r\n\r\n  return <Context.Provider value={{\r\n    isPS,\r\n    userConfig,\r\n    setUserConfig,\r\n    handleClick,\r\n    bindsMap: bindsMap.current\r\n  }}\r\n  >\r\n    <Screen title=\"Keybindings\" backdrop>\r\n      {awaitingInputType && <AwaitingInputOverlay isGamepad={awaitingInputType === 'gamepad'} />}\r\n      <div\r\n        className={styles.container}\r\n        ref={containerRef}\r\n      >\r\n        <Button\r\n          onClick={() => { hideModal() }}\r\n          style={{ alignSelf: 'center' }}\r\n        >Back\r\n        </Button>\r\n\r\n        {Object.entries(commands).map(([group, actions], index) => {\r\n          if (group === 'custom') return null\r\n          return <div key={`group-container-${group}-${index}`} className={styles.group}>\r\n            <div className={styles['group-category']}>{group}</div>\r\n            {group === 'general' ? (\r\n              <div style={{\r\n                color: 'rgba(255, 255, 255, 0.7)',\r\n                fontSize: '6px',\r\n                textAlign: 'center'\r\n              }}\r\n              >\r\n                Note: Left, right and middle click keybindings are hardcoded and cannot be changed currently.\r\n              </div>\r\n            ) : null}\r\n            {Object.entries(actions).map(([action, { keys, gamepad }]) => {\r\n              return <div key={`action-container-${action}`} className={styles.actionBinds}>\r\n                <div className={styles.actionName}>{parseActionName(action)}</div>\r\n\r\n                <Button\r\n                  onClick={() => {\r\n                    updateCurrBind(group, action)\r\n                    resetBinding(group, action, 'keyboard')\r\n                  }}\r\n                  style={{ opacity: userConfig?.[group]?.[action]?.keys?.length ? 1 : 0 }}\r\n                  className={styles['undo-keyboard']}\r\n                  icon={pixelartIcons.undo}\r\n                />\r\n\r\n                {[0, 1].map((key, index) => <ButtonWithMatchesAlert\r\n                  key={`keyboard-${group}-${action}-${index}`}\r\n                  group={group}\r\n                  action={action}\r\n                  index={index}\r\n                  inputType=\"keyboard\"\r\n                  keys={keys}\r\n                  gamepad={gamepad}\r\n                />)}\r\n\r\n                <Button\r\n                  key={`keyboard-${group}-${action}`}\r\n                  onClick={() => {\r\n                    updateCurrBind(group, action)\r\n                    resetBinding(group, action, 'gamepad')\r\n                  }}\r\n                  style={{\r\n                    opacity: userConfig?.[group]?.[action]?.gamepad?.length ? 1 : 0,\r\n                    width: '0px'\r\n                  }}\r\n                  className={`${styles['undo-gamepad']} ${styles['margin-left']}`}\r\n                  icon={pixelartIcons.undo}\r\n                />\r\n                <ButtonWithMatchesAlert\r\n                  key={`gamepad-${group}-${action}`}\r\n                  group={group}\r\n                  action={action}\r\n                  index={0}\r\n                  inputType=\"gamepad\"\r\n                  keys={keys}\r\n                  gamepad={gamepad}\r\n                />\r\n              </div>\r\n            })}\r\n          </div>\r\n        })}\r\n\r\n        <KeybindingsCustom\r\n          customCommands={customCommands}\r\n          updateCurrBind={updateCurrBind}\r\n          resetBinding={resetBinding}\r\n        />\r\n      </div>\r\n    </Screen>\r\n  </Context.Provider>\r\n}\r\n\r\nexport const ButtonWithMatchesAlert = ({\r\n  group,\r\n  action,\r\n  index,\r\n  inputType,\r\n  keys,\r\n  gamepad,\r\n}) => {\r\n  const { isPS, userConfig, handleClick, bindsMap } = useContext(Context)\r\n  const [buttonSign, setButtonSign] = useState('')\r\n\r\n  useEffect(() => {\r\n    const type = inputType === 'keyboard' ? 'keys' : 'gamepad'\r\n\r\n    const customValue = userConfig?.[group]?.[action]?.[type]?.[index]\r\n    if (customValue) {\r\n      setButtonSign(customValue)\r\n    } else if (type === 'keys') {\r\n      setButtonSign(keys?.length ? keys[index] : '')\r\n    } else {\r\n      setButtonSign(gamepad?.[0] ?? '')\r\n    }\r\n  }, [userConfig, isPS])\r\n\r\n  return <div\r\n    key={`warning-container-${inputType}-${action}`}\r\n    className={`${styles['warning-container']}`}\r\n  >\r\n    <Button\r\n      key={`${inputType}-${group}-${action}-${index}`}\r\n      onClick={() => handleClick(group, action, index, inputType)}\r\n      className={`${styles.button}`}\r\n    >\r\n      <Keybinding type={inputType} val={buttonSign as AllKeyCodes} />\r\n    </Button>\r\n    {userConfig?.[group]?.[action]?.[inputType === 'keyboard' ? 'keys' : 'gamepad']?.some(key => Object.keys(bindsMap[inputType]).includes(key)\r\n      && bindsMap[inputType][key].length > 1\r\n      && bindsMap[inputType][key].some(prop => prop.index === index\r\n        && prop.group === group\r\n        && prop.action === action)) ? (\r\n      //@ts-format-ignore-region\r\n        <div id={`bind-warning-${group}-${action}-${inputType}-${index}`} className={styles['matched-bind-warning']}>\r\n          <PixelartIcon\r\n            iconName=\"alert\"\r\n            width={5}\r\n            styles={{\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              marginRight: '2px'\r\n            }}\r\n          />\r\n          <div>\r\n            This bind is already in use. <span />\r\n          </div>\r\n        </div>\r\n      )\r\n      //@ts-format-ignore-endregion\r\n      : null}\r\n  </div>\r\n}\r\n\r\nexport const AwaitingInputOverlay = ({ isGamepad }) => {\r\n  return <div\r\n    style={{\r\n      position: 'fixed',\r\n      inset: 0,\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      flexDirection: 'column',\r\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n      color: 'white',\r\n      fontSize: 20,\r\n      zIndex: 10,\r\n      textAlign: 'center',\r\n    }}\r\n    onContextMenu={e => e.preventDefault()}\r\n  >\r\n    <div>\r\n      {isGamepad ? 'Press the button on the gamepad ' : 'Press the key, side mouse button '}\r\n      or ESC to cancel.\r\n    </div>\r\n    <Button\r\n      onClick={() => {\r\n        document.dispatchEvent(new KeyboardEvent('keydown', { key: 'Escape' }))\r\n      }}\r\n    >\r\n      Cancel\r\n    </Button>\r\n  </div>\r\n}\r\n\r\nconst parseActionName = (action: string) => {\r\n  const parts = action.split(/(?=[A-Z])/)\r\n  parts[0] = parts[0].charAt(0).toUpperCase() + parts[0].slice(1)\r\n  return parts.join(' ')\r\n}\r\n","//@ts-check\r\nimport { renderToDom, ErrorBoundary } from '@zardoy/react-util'\r\nimport { useSnapshot } from 'valtio'\r\nimport { QRCodeSVG } from 'qrcode.react'\r\nimport { createPortal } from 'react-dom'\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport { activeModalStack, miscUiState } from './globalState'\r\nimport DeathScreenProvider from './react/DeathScreenProvider'\r\nimport OptionsRenderApp from './react/OptionsRenderApp'\r\nimport MainMenuRenderApp from './react/MainMenuRenderApp'\r\nimport SingleplayerProvider from './react/SingleplayerProvider'\r\nimport CreateWorldProvider from './react/CreateWorldProvider'\r\nimport AppStatusProvider from './react/AppStatusProvider'\r\nimport SelectOption from './react/SelectOption'\r\nimport EnterFullscreenButton from './react/EnterFullscreenButton'\r\nimport ChatProvider from './react/ChatProvider'\r\nimport TitleProvider from './react/TitleProvider'\r\nimport ScoreboardProvider from './react/ScoreboardProvider'\r\nimport SignEditorProvider from './react/SignEditorProvider'\r\nimport IndicatorEffectsProvider from './react/IndicatorEffectsProvider'\r\nimport PlayerListOverlayProvider from './react/PlayerListOverlayProvider'\r\nimport MinimapProvider, { DrawerAdapterImpl } from './react/MinimapProvider'\r\nimport HudBarsProvider from './react/HudBarsProvider'\r\nimport XPBarProvider from './react/XPBarProvider'\r\nimport DebugOverlay from './react/DebugOverlay'\r\nimport MobileTopButtons from './react/MobileTopButtons'\r\nimport PauseScreen from './react/PauseScreen'\r\nimport SoundMuffler from './react/SoundMuffler'\r\nimport TouchControls from './react/TouchControls'\r\nimport widgets from './react/widgets'\r\nimport { useIsModalActive, useIsWidgetActive } from './react/utilsApp'\r\nimport GlobalSearchInput from './react/GlobalSearchInput'\r\nimport TouchAreasControlsProvider from './react/TouchAreasControlsProvider'\r\nimport NotificationProvider, { showNotification } from './react/NotificationProvider'\r\nimport HotbarRenderApp from './react/HotbarRenderApp'\r\nimport Crosshair from './react/Crosshair'\r\nimport ButtonAppProvider from './react/ButtonAppProvider'\r\nimport ServersListProvider from './react/ServersListProvider'\r\nimport GamepadUiCursor from './react/GamepadUiCursor'\r\nimport KeybindingsScreenProvider from './react/KeybindingsScreenProvider'\r\nimport HeldMapUi from './react/HeldMapUi'\r\nimport BedTime from './react/BedTime'\r\nimport NoModalFoundProvider from './react/NoModalFoundProvider'\r\nimport SignInMessageProvider from './react/SignInMessageProvider'\r\nimport BookProvider from './react/BookProvider'\r\nimport { options } from './optionsStorage'\r\nimport BossBarOverlayProvider from './react/BossBarOverlayProvider'\r\nimport ModsPage from './react/ModsPage'\r\nimport DebugEdges from './react/DebugEdges'\r\nimport GameInteractionOverlay from './react/GameInteractionOverlay'\r\nimport MineflayerPluginHud from './react/MineflayerPluginHud'\r\nimport MineflayerPluginConsole from './react/MineflayerPluginConsole'\r\nimport { UIProvider } from './react/UIProvider'\r\nimport { useAppScale } from './scaleInterface'\r\nimport PacketsReplayProvider from './react/PacketsReplayProvider'\r\nimport TouchInteractionHint from './react/TouchInteractionHint'\r\nimport { ua } from './react/utils'\r\nimport VoiceMicrophone from './react/VoiceMicrophone'\r\nimport ConnectOnlyServerUi from './react/ConnectOnlyServerUi'\r\nimport ControDebug from './react/ControDebug'\r\nimport ChunksDebug from './react/ChunksDebug'\r\nimport ChunksDebugScreen from './react/ChunksDebugScreen'\r\nimport DebugResponseTimeIndicator from './react/debugs/DebugResponseTimeIndicator'\r\nimport RendererDebugMenu from './react/RendererDebugMenu'\r\nimport CreditsAboutModal from './react/CreditsAboutModal'\r\nimport GlobalOverlayHints from './react/GlobalOverlayHints'\r\nimport FullscreenTime from './react/FullscreenTime'\r\nimport StorageConflictModal from './react/StorageConflictModal'\r\nimport FireRenderer from './react/FireRenderer'\r\nimport MonacoEditor from './react/MonacoEditor'\r\nimport OverlayModelViewer from './react/OverlayModelViewer'\r\nimport CornerIndicatorStats from './react/CornerIndicatorStats'\r\nimport AllSettingsEditor from './react/AllSettingsEditor'\r\nimport { isPlayground, urlParams } from './playgroundIntegration'\r\n\r\nconst isFirefox = ua.getBrowser().name === 'Firefox'\r\nif (isFirefox) {\r\n  // set custom property\r\n  document.body.style.setProperty('--thin-if-firefox', 'thin')\r\n}\r\n\r\nconst isIphone = ua.getDevice().model === 'iPhone' // todo ipad?\r\n\r\nif (isIphone) {\r\n  document.documentElement.style.setProperty('--hud-bottom-max', '21px') // env-safe-aria-inset-bottom\r\n}\r\n\r\nconst RobustPortal = ({ children, to }) => {\r\n  return createPortal(<PerComponentErrorBoundary>{children}</PerComponentErrorBoundary>, to)\r\n}\r\n\r\nconst DisplayQr = () => {\r\n  const { currentDisplayQr } = useSnapshot(miscUiState)\r\n\r\n  if (!currentDisplayQr) return null\r\n\r\n  return <div\r\n    style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      zIndex: 15\r\n    }}\r\n    onClick={() => {\r\n      miscUiState.currentDisplayQr = null\r\n    }}\r\n  >\r\n    <QRCodeSVG size={384} value={currentDisplayQr} style={{ display: 'block', border: '2px solid black' }} />\r\n  </div>\r\n}\r\n\r\n// mounted earlier than ingame ui TODO\r\nconst GameHud = ({ children }) => {\r\n  const { loadedDataVersion } = useSnapshot(miscUiState)\r\n  const [gameLoaded, setGameLoaded] = useState(false)\r\n\r\n  useEffect(() => {\r\n    customEvents.on('mineflayerBotCreated', () => {\r\n      bot.once('inject_allowed', () => {\r\n        setGameLoaded(true)\r\n      })\r\n    })\r\n  }, [])\r\n  useEffect(() => {\r\n    if (!loadedDataVersion) setGameLoaded(false)\r\n  }, [loadedDataVersion])\r\n\r\n  return gameLoaded ? children : null\r\n}\r\n\r\nconst InGameComponent = ({ children }) => {\r\n  const { gameLoaded } = useSnapshot(miscUiState)\r\n  if (!gameLoaded) return null\r\n  return children\r\n}\r\n\r\n// for Fullmap and Minimap in InGameUi\r\nlet adapter: DrawerAdapterImpl\r\n\r\nconst InGameUi = () => {\r\n  const { gameLoaded, showUI: showUIRaw, disconnectedCleanup } = useSnapshot(miscUiState)\r\n  const { disabledUiParts, displayBossBars, showMinimap } = useSnapshot(options)\r\n  const modalsSnapshot = useSnapshot(activeModalStack)\r\n  const hasModals = modalsSnapshot.length > 0\r\n  const showUI = showUIRaw || hasModals\r\n  const displayFullmap = modalsSnapshot.some(modal => modal.reactType === 'full-map') || true\r\n  // bot can't be used here\r\n\r\n  const gameWasLoaded = gameLoaded || disconnectedCleanup?.wasConnected\r\n\r\n  if (!gameWasLoaded || !bot || disabledUiParts.includes('*')) return\r\n\r\n  if (!adapter) adapter = new DrawerAdapterImpl(bot.entity.position)\r\n\r\n  return <>\r\n    <RobustPortal to={document.querySelector('#ui-root')}>\r\n      {/* apply scaling */}\r\n      <div style={{ display: showUI ? 'block' : 'none' }}>\r\n        <PerComponentErrorBoundary>\r\n          <GameInteractionOverlay zIndex={7} />\r\n          {!disabledUiParts.includes('death-screen') && <DeathScreenProvider />}\r\n          {!disabledUiParts.includes('debug-overlay') && <DebugOverlay />}\r\n          {!disabledUiParts.includes('mobile-top-buttons') && <MobileTopButtons />}\r\n          {!disabledUiParts.includes('players-list') && <PlayerListOverlayProvider />}\r\n          {!disabledUiParts.includes('chat') && <ChatProvider />}\r\n          <SoundMuffler />\r\n          {showMinimap !== 'never' && <MinimapProvider adapter={adapter} displayMode='minimapOnly' />}\r\n          {!disabledUiParts.includes('title') && <TitleProvider />}\r\n          {!disabledUiParts.includes('scoreboard') && <ScoreboardProvider />}\r\n          <IndicatorEffectsProvider displayEffects={!disabledUiParts.includes('effects')} displayIndicators={!disabledUiParts.includes('indicators')} />\r\n          {!disabledUiParts.includes('crosshair') && <Crosshair />}\r\n          {!disabledUiParts.includes('books') && <BookProvider />}\r\n          {!disabledUiParts.includes('bossbars') && displayBossBars && <BossBarOverlayProvider />}\r\n          <VoiceMicrophone />\r\n          <ChunksDebugScreen />\r\n          <RendererDebugMenu />\r\n          {!disabledUiParts.includes('fire') && <FireRenderer />}\r\n        </PerComponentErrorBoundary>\r\n      </div>\r\n\r\n      <PerComponentErrorBoundary>\r\n        <PauseScreen />\r\n        <FullscreenTime />\r\n        <MineflayerPluginHud />\r\n        <MineflayerPluginConsole />\r\n        {showUI && <TouchInteractionHint />}\r\n        <GlobalOverlayHints />\r\n        <div style={{ display: showUI ? 'block' : 'none' }}>\r\n          {!disabledUiParts.includes('xp-bar') && <XPBarProvider />}\r\n          {!disabledUiParts.includes('hud-bars') && <HudBarsProvider />}\r\n          <BedTime />\r\n        </div>\r\n        {showUI && !disabledUiParts.includes('hotbar') && <HotbarRenderApp />}\r\n      </PerComponentErrorBoundary>\r\n    </RobustPortal>\r\n    <PerComponentErrorBoundary>\r\n      <SignEditorProvider />\r\n      <DisplayQr />\r\n    </PerComponentErrorBoundary>\r\n    <RobustPortal to={document.body}>\r\n      {displayFullmap && <MinimapProvider adapter={adapter} displayMode='fullmapOnly' />}\r\n      {/* because of z-index */}\r\n      {showUI && <TouchControls />}\r\n      <GlobalSearchInput />\r\n    </RobustPortal>\r\n  </>\r\n}\r\n\r\nconst AllWidgets = () => {\r\n  return widgets.map(widget => <WidgetDisplay key={widget.name} name={widget.name} Component={widget.default} />)\r\n}\r\n\r\nconst WidgetDisplay = ({ name, Component }) => {\r\n  const isWidgetActive = useIsWidgetActive(name)\r\n  if (!isWidgetActive) return null\r\n\r\n  return <Component />\r\n}\r\n\r\nconst App = () => {\r\n  const scale = useAppScale()\r\n  return (\r\n    <UIProvider scale={scale}>\r\n      <div>\r\n        <ButtonAppProvider>\r\n          <RobustPortal to={document.body}>\r\n            <div className='overlay-bottom-scaled'>\r\n              <InGameComponent>\r\n                <HeldMapUi />\r\n              </InGameComponent>\r\n            </div>\r\n            <ControDebug />\r\n            <div />\r\n          </RobustPortal>\r\n          <EnterFullscreenButton />\r\n          <StorageConflictModal />\r\n          <InGameUi />\r\n          <RobustPortal to={document.querySelector('#ui-root')}>\r\n            <AllWidgets />\r\n            <SingleplayerProvider />\r\n            <CreateWorldProvider />\r\n            <AppStatusProvider />\r\n            <KeybindingsScreenProvider />\r\n            <ServersListProvider />\r\n            <OptionsRenderApp />\r\n            <MainMenuRenderApp />\r\n            <ConnectOnlyServerUi />\r\n            <TouchAreasControlsProvider />\r\n            <SignInMessageProvider />\r\n            <PacketsReplayProvider />\r\n            <NotificationProvider />\r\n            <ModsPage />\r\n            <SelectOption />\r\n            <CreditsAboutModal />\r\n            <AllSettingsEditor />\r\n            <NoModalFoundProvider />\r\n          </RobustPortal>\r\n          <RobustPortal to={document.body}>\r\n            <div className='overlay-top-scaled'>\r\n              <GamepadUiCursor />\r\n            </div>\r\n            <div />\r\n            <DebugEdges />\r\n            <OverlayModelViewer />\r\n            <MonacoEditor />\r\n            <DebugResponseTimeIndicator />\r\n            <CornerIndicatorStats />\r\n          </RobustPortal>\r\n        </ButtonAppProvider>\r\n      </div>\r\n    </UIProvider>\r\n  )\r\n}\r\n\r\nconst PerComponentErrorBoundary = ({ children }) => {\r\n  return children.map((child, i) => <ErrorBoundary\r\n    key={i}\r\n    renderError={(error) => {\r\n      const componentNameClean = (child.type.name || child.type.displayName || 'Unknown').replaceAll(/__|_COMPONENT/g, '')\r\n      showNotification(`UI component ${componentNameClean} crashed!`, 'Please report this. Use console for more.', true, undefined)\r\n      return null\r\n    }}\r\n  >\r\n    {child}\r\n  </ErrorBoundary>)\r\n}\r\n\r\nconst noUi = urlParams.get('no-ui') === 'true' || isPlayground\r\n\r\nif (!noUi) {\r\n  renderToDom(<App />, {\r\n    strictMode: false,\r\n    selector: '#react-root',\r\n  })\r\n}\r\n\r\ndisableReactProfiling()\r\nfunction disableReactProfiling () {\r\n  if (window.reactPerfPatchApplied) return\r\n  window.reactPerfPatchApplied = true\r\n  //@ts-expect-error\r\n  window.performance.markOrig = window.performance.mark\r\n  //@ts-expect-error\r\n  window.performance.mark = (name, options) => {\r\n    // ignore react internal marks\r\n    if (!name.startsWith('⚛') && !localStorage.enableReactProfiling) {\r\n      //@ts-expect-error\r\n      window.performance.markOrig(name, options)\r\n    }\r\n  }\r\n}\r\n","/* eslint-disable import/order */\r\nimport './importsWorkaround'\r\nimport './styles.css'\r\nimport './testCrasher'\r\nimport './globals'\r\nimport './devtools'\r\nimport './entities'\r\nimport customChannels from './customChannels'\r\nimport './globalDomListeners'\r\nimport './mineflayer/maps'\r\nimport './mineflayer/cameraShake'\r\nimport './shims/patchShims'\r\nimport './mineflayer/java-tester/index'\r\nimport './external'\r\nimport './appConfig'\r\nimport './mineflayer/timers'\r\nimport './mineflayer/plugins'\r\nimport './app/progressControllers'\r\nimport './app/gamepadCursor'\r\nimport { getServerInfo } from './mineflayer/mc-protocol'\r\nimport { onGameLoad } from './inventoryWindows'\r\nimport initCollisionShapes from './getCollisionInteractionShapes'\r\nimport protocolMicrosoftAuth from 'minecraft-protocol/src/client/microsoftAuth'\r\nimport microsoftAuthflow from './microsoftAuthflow'\r\nimport { Duplex } from 'stream'\r\n\r\nimport './scaleInterface'\r\n\r\nimport { options } from './optionsStorage'\r\nimport './reactUi'\r\nimport { lockUrl, onBotCreate } from './controls'\r\nimport './dragndrop'\r\nimport { possiblyCleanHandle } from './browserfs'\r\nimport downloadAndOpenFile, { isInterestedInDownload } from './downloadAndOpenFile'\r\n\r\nimport fs from 'fs'\r\nimport net, { Socket } from 'net'\r\nimport mineflayer from 'mineflayer'\r\n\r\nimport debug from 'debug'\r\nimport { defaultsDeep } from 'lodash-es'\r\nimport initializePacketsReplay from './packetsReplay/packetsReplayLegacy'\r\n\r\nimport {\r\n  activeModalStack,\r\n  activeModalStacks,\r\n  hideModal,\r\n  insertActiveModalStack,\r\n  isGameActive,\r\n  miscUiState,\r\n  showModal,\r\n  gameAdditionalState,\r\n  maybeCleanupAfterDisconnect,\r\n} from './globalState'\r\n\r\nimport { parseServerAddress } from './parseServerAddress'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { isCypress } from './standaloneUtils'\r\n\r\nimport { startLocalServer, unsupportedLocalServerFeatures } from './createLocalServer'\r\nimport defaultServerOptions from './defaultLocalServerOptions'\r\n\r\nimport { onAppLoad, resourcepackReload, resourcePackState } from './resourcePack'\r\nimport { ConnectPeerOptions, connectToPeer } from './localServerMultiplayer'\r\nimport CustomChannelClient from './customClient'\r\nimport { registerServiceWorker } from './serviceWorker'\r\nimport { appStatusState, lastConnectOptions, quickDevReconnect } from './react/AppStatusProvider'\r\n\r\nimport { fsState } from './loadSave'\r\nimport { watchFov } from './rendererUtils'\r\nimport { loadInMemorySave } from './react/SingleplayerProvider'\r\n\r\nimport { possiblyHandleStateVariable } from './googledrive'\r\nimport flyingSquidEvents from './flyingSquidEvents'\r\nimport { showNotification } from './react/NotificationProvider'\r\nimport { saveToBrowserMemory } from './react/PauseScreen'\r\nimport './devReload'\r\nimport './water'\r\nimport { ConnectOptions, getVersionAutoSelect, downloadOtherGameData, downloadAllMinecraftData, loadMinecraftData } from './connect'\r\nimport { ref, subscribe } from 'valtio'\r\nimport { signInMessageState } from './react/SignInMessageProvider'\r\nimport { findServerPassword, updateAuthenticatedAccountData, updateLoadedServerData, updateServerConnectionHistory } from './react/serversStorage'\r\nimport { mainMenuState } from './react/MainMenuRenderApp'\r\nimport './mobileShim'\r\nimport { parseFormattedMessagePacket } from './botUtils'\r\nimport { appStartup } from './clientMods'\r\nimport { getViewerVersionData, getWsProtocolStream, onBotCreatedViewerHandler } from './viewerConnector'\r\nimport { getWebsocketStream } from './mineflayer/websocket-core'\r\nimport { appQueryParams, appQueryParamsArray } from './appParams'\r\nimport { playerState } from './mineflayer/playerState'\r\nimport { states } from 'minecraft-protocol'\r\nimport { initMotionTracking } from './react/uiMotion'\r\nimport { UserError } from './mineflayer/userError'\r\nimport { startLocalReplayServer } from './packetsReplay/replayPackets'\r\nimport { createFullScreenProgressReporter, createWrappedProgressReporter, ProgressReporter } from './core/progressReporter'\r\nimport { registerOpenBenchmarkListener } from './benchmark'\r\nimport { tryHandleBuiltinCommand } from './builtinCommands'\r\nimport { loadingTimerState } from './react/LoadingTimer'\r\nimport { loadPluginsIntoWorld } from './react/CreateWorldProvider'\r\nimport { getCurrentProxy, getCurrentUsername } from './react/ServersList'\r\nimport { versionToNumber } from 'mc-assets/dist/utils'\r\nimport { isPlayground } from './playgroundIntegration'\r\nimport { appLoadBackend } from './appViewerLoad'\r\n\r\nwindow.debug = debug\r\nwindow.beforeRenderFrame = []\r\n\r\n// ACTUAL CODE\r\n\r\nif (!isPlayground) {\r\n  void appLoadBackend()\r\n}\r\nif (isPlayground) {\r\n  void import('renderer/playground/playground')\r\n}\r\n\r\nvoid registerServiceWorker().then(() => {\r\n  mainMenuState.serviceWorkerLoaded = true\r\n})\r\nwatchFov()\r\ninitCollisionShapes()\r\ninitializePacketsReplay()\r\nonAppLoad()\r\ncustomChannels()\r\n\r\nif (appQueryParams.testCrashApp === '2') throw new Error('test')\r\n\r\nfunction hideCurrentScreens () {\r\n  activeModalStacks['main-menu'] = [...activeModalStack]\r\n  insertActiveModalStack('', [])\r\n}\r\n\r\nconst loadSingleplayer = (serverOverrides = {}, flattenedServerOverrides = {}, connectOptions?: Partial<ConnectOptions>) => {\r\n  const serverSettingsQsRaw = appQueryParamsArray.serverSetting ?? []\r\n  const serverSettingsQs = serverSettingsQsRaw.map(x => x.split(':')).reduce<Record<string, string>>((acc, [key, value]) => {\r\n    acc[key] = JSON.parse(value)\r\n    return acc\r\n  }, {})\r\n  void connect({\r\n    singleplayer: true,\r\n    username: options.localUsername,\r\n    serverOverrides,\r\n    serverOverridesFlat: {\r\n      ...flattenedServerOverrides,\r\n      ...serverSettingsQs\r\n    },\r\n    ...connectOptions\r\n  })\r\n}\r\nfunction listenGlobalEvents () {\r\n  window.addEventListener('connect', e => {\r\n    const options = (e as CustomEvent).detail\r\n    void connect(options)\r\n  })\r\n  window.addEventListener('singleplayer', (e) => {\r\n    const { detail } = (e as CustomEvent)\r\n    const { connectOptions, ...rest } = detail\r\n    loadSingleplayer(rest, {}, connectOptions)\r\n  })\r\n}\r\n\r\nexport async function connect (connectOptions: ConnectOptions) {\r\n  if (miscUiState.gameLoaded) return\r\n\r\n  if (sessionStorage.delayLoadUntilFocus) {\r\n    await new Promise(resolve => {\r\n      if (document.hasFocus()) {\r\n        resolve(undefined)\r\n      } else {\r\n        window.addEventListener('focus', resolve)\r\n      }\r\n    })\r\n  }\r\n  if (sessionStorage.delayLoadUntilClick) {\r\n    await new Promise(resolve => {\r\n      window.addEventListener('click', resolve)\r\n    })\r\n  }\r\n\r\n  maybeCleanupAfterDisconnect()\r\n\r\n  appStatusState.showReconnect = false\r\n  loadingTimerState.loading = true\r\n  loadingTimerState.start = Date.now()\r\n  miscUiState.hasErrors = false\r\n  lastConnectOptions.value = connectOptions\r\n  lastConnectOptions.hadWorldLoaded = false\r\n\r\n  const { singleplayer } = connectOptions\r\n  const p2pMultiplayer = !!connectOptions.peerId\r\n  miscUiState.singleplayer = singleplayer\r\n  miscUiState.flyingSquid = singleplayer || p2pMultiplayer\r\n\r\n  // Track server connection in history\r\n  if (!singleplayer && !p2pMultiplayer && connectOptions.server && connectOptions.saveServerToHistory !== false) {\r\n    const parsedServer = parseServerAddress(connectOptions.server)\r\n    updateServerConnectionHistory(parsedServer.host, connectOptions.botVersion)\r\n  }\r\n\r\n  const { renderDistance: renderDistanceSingleplayer, multiplayerRenderDistance } = options\r\n\r\n  const parsedServer = parseServerAddress(connectOptions.server)\r\n  const server = { host: parsedServer.host, port: parsedServer.port }\r\n  if (connectOptions.proxy?.startsWith(':')) {\r\n    connectOptions.proxy = `${location.protocol}//${location.hostname}${connectOptions.proxy}`\r\n  }\r\n  if (connectOptions.proxy && location.port !== '80' && location.port !== '443' && !/:\\d+$/.test(connectOptions.proxy)) {\r\n    const https = connectOptions.proxy.startsWith('https://') || location.protocol === 'https:'\r\n    connectOptions.proxy = `${connectOptions.proxy}:${https ? 443 : 80}`\r\n  }\r\n  const parsedProxy = parseServerAddress(connectOptions.proxy, false)\r\n  const proxy = { host: parsedProxy.host, port: parsedProxy.port }\r\n  let { username } = connectOptions\r\n\r\n  if (connectOptions.server) {\r\n    console.log(`connecting to ${server.host}:${server.port ?? 25_565}`)\r\n  }\r\n  console.log('using player username', username)\r\n\r\n  hideCurrentScreens()\r\n  const progress = createFullScreenProgressReporter()\r\n  const loggingInMsg = connectOptions.server ? 'Connecting to server' : 'Logging in'\r\n  progress.beginStage('connect', loggingInMsg)\r\n\r\n  let ended = false\r\n  let bot!: typeof __type_bot\r\n  let hadConnected = false\r\n  const handleSessionEnd = (wasKicked = false) => {\r\n    if (ended) return\r\n    loadingTimerState.loading = false\r\n    const { alwaysReconnect } = appQueryParams\r\n    if ((!wasKicked && miscUiState.appConfig?.allowAutoConnect && appQueryParams.autoConnect && lastConnectOptions.hadWorldLoaded) || (alwaysReconnect)) {\r\n      if (alwaysReconnect === 'quick' || alwaysReconnect === 'fast') {\r\n        quickDevReconnect()\r\n      } else {\r\n        location.reload()\r\n      }\r\n    }\r\n    errorAbortController.abort()\r\n    ended = true\r\n    progress.end()\r\n    bot.end()\r\n    // ensure mineflayer plugins receive this event for cleanup\r\n    bot.emit('end', '')\r\n\r\n    miscUiState.disconnectedCleanup = {\r\n      callback () {\r\n        appViewer.resetBackend(true)\r\n        localServer = window.localServer = window.server = undefined\r\n        gameAdditionalState.viewerConnection = false\r\n\r\n        if (bot) {\r\n          bot.removeAllListeners()\r\n          bot._client.removeAllListeners()\r\n          bot._client = {\r\n            //@ts-expect-error\r\n            write (packetName) {\r\n              console.warn('Tried to write packet', packetName, 'after bot was destroyed')\r\n            }\r\n          }\r\n          //@ts-expect-error\r\n          window.bot = bot = undefined\r\n        }\r\n        cleanFs()\r\n      },\r\n      date: Date.now(),\r\n      wasConnected: hadConnected\r\n    }\r\n  }\r\n  const cleanFs = () => {\r\n    if (singleplayer && !fsState.inMemorySave) {\r\n      possiblyCleanHandle(() => {\r\n        // todo: this is not enough, we need to wait for all async operations to finish\r\n      })\r\n    }\r\n  }\r\n  let lastPacket = undefined as string | undefined\r\n  const onPossibleErrorDisconnect = () => {\r\n    if (lastPacket && bot?._client && bot._client.state !== states.PLAY) {\r\n      appStatusState.descriptionHint = `Last Server Packet: ${lastPacket}`\r\n    }\r\n  }\r\n  const handleError = (err) => {\r\n    console.error(err)\r\n    if (err === 'ResizeObserver loop completed with undelivered notifications.') {\r\n      return\r\n    }\r\n    if (isCypress()) throw err\r\n    miscUiState.hasErrors = true\r\n    if (miscUiState.gameLoaded) return\r\n    // close all modals\r\n    for (const modal of activeModalStack) {\r\n      hideModal(modal)\r\n    }\r\n\r\n    setLoadingScreenStatus(`Error encountered. ${err}`, true)\r\n    appStatusState.showReconnect = true\r\n    onPossibleErrorDisconnect()\r\n    handleSessionEnd()\r\n  }\r\n\r\n  // todo(hard): remove it!\r\n  const errorAbortController = new AbortController()\r\n  window.addEventListener('unhandledrejection', (e) => {\r\n    if (e.reason.name === 'ServerPluginLoadFailure') {\r\n      if (confirm(`Failed to load server plugin ${e.reason.pluginName} (invoking ${e.reason.pluginMethod}). Continue?`)) {\r\n        return\r\n      }\r\n    }\r\n    if (e.reason?.stack?.includes('chrome-extension://')) {\r\n      // ignore issues caused by chrome extension\r\n      return\r\n    }\r\n    handleError(e.reason)\r\n  }, {\r\n    signal: errorAbortController.signal\r\n  })\r\n  window.addEventListener('error', (e) => {\r\n    handleError(e.message)\r\n  }, {\r\n    signal: errorAbortController.signal\r\n  })\r\n\r\n  let clientDataStream: Duplex | undefined\r\n\r\n  if (connectOptions.server && !connectOptions.viewerWsConnect && !parsedServer.isWebSocket) {\r\n    console.log(`using proxy ${proxy.host}:${proxy.port || location.port}`)\r\n    net['setProxy']({ hostname: proxy.host, port: proxy.port, headers: { Authorization: `Bearer ${new URLSearchParams(location.search).get('token') ?? ''}` }, artificialDelay: appQueryParams.addPing ? Number(appQueryParams.addPing) : undefined })\r\n  }\r\n\r\n  const renderDistance = singleplayer ? renderDistanceSingleplayer : multiplayerRenderDistance\r\n  let updateDataAfterJoin = () => { }\r\n  let localServer\r\n  let localReplaySession: ReturnType<typeof startLocalReplayServer> | undefined\r\n  let lastKnownKickReason = undefined as string | undefined\r\n  try {\r\n    const serverOptions = defaultsDeep({}, connectOptions.serverOverrides ?? {}, options.localServerOptions, defaultServerOptions)\r\n    Object.assign(serverOptions, connectOptions.serverOverridesFlat ?? {})\r\n\r\n    await progress.executeWithMessage('Downloading Minecraft data', 'download-mcdata', async () => {\r\n      loadingTimerState.networkOnlyStart = Date.now()\r\n\r\n      let downloadingAssets = [] as string[]\r\n      const reportAssetDownload = (asset: string, isDone: boolean) => {\r\n        if (isDone) {\r\n          downloadingAssets = downloadingAssets.filter(a => a !== asset)\r\n        } else {\r\n          downloadingAssets.push(asset)\r\n        }\r\n        progress.setSubStage('download-mcdata', `(${downloadingAssets.join(', ')})`)\r\n      }\r\n\r\n      await Promise.all([\r\n        downloadAllMinecraftData(reportAssetDownload),\r\n        downloadOtherGameData(reportAssetDownload)\r\n      ])\r\n      loadingTimerState.networkOnlyStart = 0\r\n    })\r\n\r\n    let dataDownloaded = false\r\n    const downloadMcData = async (version: string) => {\r\n      if (dataDownloaded) return\r\n      dataDownloaded = true\r\n      appViewer.resourcesManager.currentConfig = { version, texturesVersion: options.useVersionsTextures || undefined }\r\n\r\n      await progress.executeWithMessage(\r\n        'Processing downloaded Minecraft data',\r\n        async () => {\r\n          await loadMinecraftData(version)\r\n          await appViewer.resourcesManager.loadSourceData(version)\r\n        }\r\n      )\r\n\r\n      await progress.executeWithMessage(\r\n        'Applying user-installed resource pack',\r\n        async () => {\r\n          try {\r\n            await resourcepackReload(true)\r\n          } catch (err) {\r\n            console.error(err)\r\n            const doContinue = confirm('Failed to apply texture pack. See errors in the console. Continue?')\r\n            if (!doContinue) {\r\n              throw err\r\n            }\r\n          }\r\n        }\r\n      )\r\n\r\n      await progress.executeWithMessage(\r\n        'Preparing textures',\r\n        async () => {\r\n          await appViewer.resourcesManager.updateAssetsData({})\r\n        }\r\n      )\r\n    }\r\n\r\n    let finalVersion = connectOptions.botVersion || (singleplayer ? serverOptions.version : undefined)\r\n\r\n    // Check for forbidden versions (>= 1.21.7) due to critical world display issues\r\n    const checkForbiddenVersion = (version: string | undefined) => {\r\n      if (!version) return\r\n      const FORBIDDEN_VERSION_THRESHOLD = '1.21.7'\r\n      const versionNum = versionToNumber(version)\r\n      const thresholdNum = versionToNumber(FORBIDDEN_VERSION_THRESHOLD)\r\n      if (versionNum >= thresholdNum) {\r\n        throw new UserError(`Version ${version} is not supported due to critical world display issues. Please use version 1.21.6 or earlier.`)\r\n      }\r\n    }\r\n\r\n    checkForbiddenVersion(finalVersion)\r\n\r\n    if (connectOptions.worldStateFileContents) {\r\n      try {\r\n        localReplaySession = startLocalReplayServer(connectOptions.worldStateFileContents)\r\n      } catch (err) {\r\n        console.error(err)\r\n        throw new UserError(`Failed to start local replay server: ${err}`)\r\n      }\r\n      finalVersion = localReplaySession.version\r\n      checkForbiddenVersion(finalVersion)\r\n    }\r\n\r\n    if (singleplayer) {\r\n      // SINGLEPLAYER EXPLAINER:\r\n      // Note 1: here we have custom sync communication between server Client (flying-squid) and game client (mineflayer)\r\n      // Note 2: custom Server class is used which simplifies communication & Client creation on it's side\r\n      // local server started\r\n      // mineflayer.createBot (see source def)\r\n      // bot._client = bot._client ?? mc.createClient(options) <-- mc-protocol package\r\n      // tcpDns() skipped since we define connect option\r\n      // in setProtocol: we emit 'connect' here below so in that file we send set_protocol and login_start (onLogin handler)\r\n      // Client (class) of flying-squid (in server/login.js of mc-protocol): onLogin handler: skip most logic & go to loginClient() which assigns uuid and sends 'success' back to client (onLogin handler) and emits 'login' on the server (login.js in flying-squid handler)\r\n      // flying-squid: 'login' -> player.login -> now sends 'login' event to the client (handled in many plugins in mineflayer) -> then 'update_health' is sent which emits 'spawn' in mineflayer\r\n\r\n      const serverPlugins = new URLSearchParams(location.search).getAll('serverPlugin')\r\n      if (serverPlugins.length > 0 && !serverOptions.worldFolder) {\r\n        console.log('Placing server plugins', serverPlugins)\r\n\r\n        serverOptions.worldFolder ??= '/temp'\r\n        await loadPluginsIntoWorld('/temp', serverPlugins)\r\n\r\n        console.log('Server plugins placed')\r\n      }\r\n\r\n      localServer = window.localServer = window.server = startLocalServer(serverOptions)\r\n      connectOptions?.connectEvents?.serverCreated?.()\r\n      // todo need just to call quit if started\r\n      // loadingScreen.maybeRecoverable = false\r\n      // init world, todo: do it for any async plugins\r\n      if (!localServer.pluginsReady) {\r\n        await progress.executeWithMessage(\r\n          'Starting local server',\r\n          async () => {\r\n            await new Promise(resolve => {\r\n              localServer.once('pluginsReady', resolve)\r\n            })\r\n          }\r\n        )\r\n      }\r\n\r\n      localServer.on('newPlayer', (player) => {\r\n        player.on('loadingStatus', (newStatus) => {\r\n          progress.setMessage(newStatus)\r\n        })\r\n      })\r\n      flyingSquidEvents()\r\n    }\r\n\r\n    if (connectOptions.authenticatedAccount) username = 'you'\r\n    let initialLoadingText: string\r\n    if (singleplayer) {\r\n      initialLoadingText = 'Local server is still starting'\r\n    } else if (p2pMultiplayer) {\r\n      initialLoadingText = 'Connecting to peer'\r\n    } else if (connectOptions.server) {\r\n      if (!finalVersion) {\r\n        const versionAutoSelect = getVersionAutoSelect()\r\n        const wrapped = createWrappedProgressReporter(progress, `Fetching server version. Preffered: ${versionAutoSelect}`)\r\n        loadingTimerState.networkOnlyStart = Date.now()\r\n        const autoVersionSelect = await getServerInfo(server.host, server.port ? Number(server.port) : undefined, versionAutoSelect)\r\n        wrapped.end()\r\n        finalVersion = autoVersionSelect.version\r\n        checkForbiddenVersion(finalVersion)\r\n      }\r\n      initialLoadingText = `Connecting to server ${server.host}:${server.port ?? 25_565} with version ${finalVersion}`\r\n    } else if (connectOptions.viewerWsConnect) {\r\n      initialLoadingText = `Connecting to Mineflayer WebSocket server ${connectOptions.viewerWsConnect}`\r\n    } else if (connectOptions.worldStateFileContents) {\r\n      initialLoadingText = `Loading local replay server`\r\n    } else {\r\n      initialLoadingText = 'We have no idea what to do'\r\n    }\r\n    progress.setMessage(initialLoadingText)\r\n\r\n    if (parsedServer.isWebSocket) {\r\n      loadingTimerState.networkOnlyStart = Date.now()\r\n      clientDataStream = (await getWebsocketStream(server.host)).mineflayerStream\r\n    }\r\n\r\n    let newTokensCacheResult = null as any\r\n    const cachedTokens = typeof connectOptions.authenticatedAccount === 'object' ? connectOptions.authenticatedAccount.cachedTokens : {}\r\n    let authData: Awaited<ReturnType<typeof microsoftAuthflow>> | undefined\r\n    if (connectOptions.authenticatedAccount) {\r\n      authData = await microsoftAuthflow({\r\n        tokenCaches: cachedTokens,\r\n        proxyBaseUrl: connectOptions.proxy,\r\n        setProgressText (text) {\r\n          progress.setMessage(text)\r\n        },\r\n        setCacheResult (result) {\r\n          newTokensCacheResult = result\r\n        },\r\n        connectingServer: server.host\r\n      })\r\n    }\r\n\r\n    if (p2pMultiplayer) {\r\n      clientDataStream = await connectToPeer(connectOptions.peerId!, connectOptions.peerOptions)\r\n    }\r\n    if (connectOptions.viewerWsConnect) {\r\n      const { version, time, requiresPass } = await getViewerVersionData(connectOptions.viewerWsConnect)\r\n      let password\r\n      if (requiresPass) {\r\n        password = prompt('Enter password')\r\n        if (!password) {\r\n          throw new UserError('Password is required')\r\n        }\r\n      }\r\n      console.log('Latency:', Date.now() - time, 'ms')\r\n      // const version = '1.21.1'\r\n      finalVersion = version\r\n      checkForbiddenVersion(finalVersion)\r\n      await downloadMcData(version)\r\n      setLoadingScreenStatus(`Connecting to WebSocket server ${connectOptions.viewerWsConnect}`)\r\n      clientDataStream = (await getWsProtocolStream(connectOptions.viewerWsConnect)).clientDuplex\r\n      if (password) {\r\n        clientDataStream.write(password)\r\n      }\r\n      gameAdditionalState.viewerConnection = true\r\n    }\r\n\r\n    if (finalVersion) {\r\n      // ensure data is downloaded\r\n      loadingTimerState.networkOnlyStart ??= Date.now()\r\n      await downloadMcData(finalVersion)\r\n    }\r\n\r\n    const brand = clientDataStream ? 'minecraft-web-client' : undefined\r\n    bot = mineflayer.createBot({\r\n      host: server.host,\r\n      port: server.port ? +server.port : undefined,\r\n      brand,\r\n      version: finalVersion || false,\r\n      ...clientDataStream ? {\r\n        stream: clientDataStream as any,\r\n      } : {},\r\n      ...singleplayer || p2pMultiplayer || localReplaySession ? {\r\n        keepAlive: false,\r\n      } : {},\r\n      ...singleplayer ? {\r\n        version: serverOptions.version,\r\n        connect () { },\r\n        Client: CustomChannelClient as any,\r\n      } : {},\r\n      ...localReplaySession ? {\r\n        connect () { },\r\n        Client: CustomChannelClient as any,\r\n      } : {},\r\n      onMsaCode (data) {\r\n        signInMessageState.code = data.user_code\r\n        signInMessageState.link = data.verification_uri\r\n        signInMessageState.expiresOn = Date.now() + data.expires_in * 1000\r\n      },\r\n      sessionServer: authData?.sessionEndpoint?.toString(),\r\n      auth: connectOptions.authenticatedAccount ? async (client, options) => {\r\n        authData!.setOnMsaCodeCallback(options.onMsaCode)\r\n        authData?.setConnectingVersion(client.version)\r\n        //@ts-expect-error\r\n        client.authflow = authData!.authFlow\r\n        try {\r\n          signInMessageState.abortController = ref(new AbortController())\r\n          await Promise.race([\r\n            protocolMicrosoftAuth.authenticate(client, options),\r\n            new Promise((_r, reject) => {\r\n              signInMessageState.abortController.signal.addEventListener('abort', () => {\r\n                reject(new UserError('Aborted by user'))\r\n              })\r\n            })\r\n          ])\r\n          if (signInMessageState.shouldSaveToken) {\r\n            updateAuthenticatedAccountData(accounts => {\r\n              const existingAccount = accounts.find(a => a.username === client.username)\r\n              if (existingAccount) {\r\n                existingAccount.cachedTokens = { ...existingAccount.cachedTokens, ...newTokensCacheResult }\r\n              } else {\r\n                accounts.push({\r\n                  username: client.username,\r\n                  cachedTokens: { ...cachedTokens, ...newTokensCacheResult }\r\n                })\r\n              }\r\n              return accounts\r\n            })\r\n            updateDataAfterJoin = () => {\r\n              updateLoadedServerData(s => ({ ...s, authenticatedAccountOverride: client.username }), connectOptions.serverIndex)\r\n            }\r\n          } else {\r\n            updateDataAfterJoin = () => {\r\n              updateLoadedServerData(s => ({ ...s, authenticatedAccountOverride: undefined }), connectOptions.serverIndex)\r\n            }\r\n          }\r\n          setLoadingScreenStatus('Authentication successful. Logging in to server')\r\n        } finally {\r\n          signInMessageState.code = ''\r\n        }\r\n      } : undefined,\r\n      username,\r\n      viewDistance: renderDistance,\r\n      checkTimeoutInterval: 240 * 1000,\r\n      // noPongTimeout: 240 * 1000,\r\n      closeTimeout: 240 * 1000,\r\n      respawn: options.autoRespawn,\r\n      maxCatchupTicks: 0,\r\n      'mapDownloader-saveToFile': false,\r\n      // \"mapDownloader-saveInternal\": false, // do not save into memory, todo must be implemeneted as we do really care of ram\r\n    }) as unknown as typeof __type_bot\r\n    window.bot = bot\r\n\r\n    if (connectOptions.viewerWsConnect) {\r\n      void onBotCreatedViewerHandler()\r\n    }\r\n    customEvents.emit('mineflayerBotCreated')\r\n    if (singleplayer || p2pMultiplayer || localReplaySession) {\r\n      if (singleplayer || p2pMultiplayer) {\r\n        // in case of p2pMultiplayer there is still flying-squid on the host side\r\n        const _supportFeature = bot.supportFeature\r\n        bot.supportFeature = ((feature) => {\r\n          if (unsupportedLocalServerFeatures.includes(feature)) {\r\n            return false\r\n          }\r\n          return _supportFeature(feature)\r\n        }) as typeof bot.supportFeature\r\n      }\r\n\r\n      bot.emit('inject_allowed')\r\n      bot._client.emit('connect')\r\n    } else if (clientDataStream) {\r\n      // bot.emit('inject_allowed')\r\n      bot._client.emit('connect')\r\n    } else {\r\n      const setupConnectHandlers = () => {\r\n        Socket.prototype['handleStringMessage'] = function (message: string) {\r\n          if (message.startsWith('proxy-message') || message.startsWith('proxy-command:')) { // for future\r\n            return false\r\n          }\r\n          if (message.startsWith('proxy-shutdown:')) {\r\n            lastKnownKickReason = message.slice('proxy-shutdown:'.length)\r\n            return false\r\n          }\r\n          return true\r\n        }\r\n        bot._client.socket.on('connect', () => {\r\n          console.log('Proxy WebSocket connection established')\r\n          //@ts-expect-error\r\n          bot._client.socket._ws.addEventListener('close', () => {\r\n            console.log('WebSocket connection closed')\r\n            setTimeout(() => {\r\n              if (bot) {\r\n                bot.emit('end', 'WebSocket connection closed with unknown reason')\r\n              }\r\n            }, 1000)\r\n          })\r\n          bot._client.socket.on('close', () => {\r\n            setTimeout(() => {\r\n              if (bot) {\r\n                bot.emit('end', 'WebSocket connection closed with unknown reason')\r\n              }\r\n            })\r\n          })\r\n        })\r\n      }\r\n      // socket setup actually can be delayed because of dns lookup\r\n      if (bot._client.socket) {\r\n        setupConnectHandlers()\r\n      } else {\r\n        const originalSetSocket = bot._client.setSocket.bind(bot._client)\r\n        bot._client.setSocket = (socket) => {\r\n          if (!bot) return\r\n          originalSetSocket(socket)\r\n          setupConnectHandlers()\r\n        }\r\n      }\r\n\r\n    }\r\n  } catch (err) {\r\n    handleError(err)\r\n  }\r\n  if (!bot) return\r\n\r\n  const p2pConnectTimeout = p2pMultiplayer ? setTimeout(() => { throw new UserError('Spawn timeout. There might be error on the other side, check console.') }, 20_000) : undefined\r\n\r\n  // bot.on('inject_allowed', () => {\r\n  //   loadingScreen.maybeRecoverable = false\r\n  // })\r\n\r\n  bot.on('error', handleError)\r\n\r\n  bot.on('kicked', (kickReason) => {\r\n    console.log('You were kicked!', kickReason)\r\n    const { formatted: kickReasonFormatted, plain: kickReasonString } = parseFormattedMessagePacket(kickReason)\r\n    // close all modals\r\n    for (const modal of activeModalStack) {\r\n      hideModal(modal)\r\n    }\r\n    setLoadingScreenStatus(`The Minecraft server kicked you. Kick reason: ${kickReasonString}`, true, undefined, undefined, kickReasonFormatted)\r\n    appStatusState.showReconnect = true\r\n    handleSessionEnd(true)\r\n  })\r\n\r\n  const packetBeforePlay = (_, __, ___, fullBuffer) => {\r\n    lastPacket = fullBuffer.toString()\r\n  }\r\n  bot._client.on('packet', packetBeforePlay as any)\r\n  const playStateSwitch = (newState) => {\r\n    if (newState === 'play') {\r\n      bot._client.removeListener('packet', packetBeforePlay)\r\n    }\r\n  }\r\n  bot._client.on('state', playStateSwitch)\r\n\r\n  bot.on('end', (endReason) => {\r\n    if (ended) return\r\n    console.log('disconnected for', endReason)\r\n    if (endReason === 'socketClosed') {\r\n      endReason = lastKnownKickReason ?? 'Connection with proxy server lost'\r\n    }\r\n    // close all modals\r\n    for (const modal of activeModalStack) {\r\n      hideModal(modal)\r\n    }\r\n    setLoadingScreenStatus(`You have been disconnected from the server. End reason:\\n${endReason}`, true)\r\n    appStatusState.showReconnect = true\r\n    onPossibleErrorDisconnect()\r\n    handleSessionEnd()\r\n    if (isCypress()) throw new Error(`disconnected: ${endReason}`)\r\n  })\r\n\r\n  onBotCreate()\r\n\r\n  bot.once('login', () => {\r\n    hadConnected = true\r\n    errorAbortController.abort()\r\n    loadingTimerState.networkOnlyStart = 0\r\n    progress.setMessage('Loading world')\r\n  })\r\n\r\n  let worldWasReady = false\r\n  const waitForChunksToLoad = async (progress?: ProgressReporter) => {\r\n    await new Promise<void>(resolve => {\r\n      if (worldWasReady) {\r\n        resolve()\r\n        return\r\n      }\r\n      const unsub = subscribe(appViewer.rendererState, () => {\r\n        if (appViewer.rendererState.world.allChunksLoaded && appViewer.nonReactiveState.world.chunksTotalNumber) {\r\n          worldWasReady = true\r\n          resolve()\r\n          unsub()\r\n        } else {\r\n          const perc = Math.round(appViewer.rendererState.world.chunksLoaded.size / appViewer.nonReactiveState.world.chunksTotalNumber * 100)\r\n          progress?.reportProgress('chunks', perc / 100)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const spawnEarlier = !singleplayer && !p2pMultiplayer\r\n  const displayWorld = async () => {\r\n    if (resourcePackState.isServerInstalling) {\r\n      await new Promise<void>(resolve => {\r\n        subscribe(resourcePackState, () => {\r\n          if (!resourcePackState.isServerInstalling) {\r\n            resolve()\r\n          }\r\n        })\r\n      })\r\n      await appViewer.resourcesManager.promiseAssetsReady\r\n    }\r\n    if (appStatusState.isError) return\r\n\r\n    if (!appViewer.resourcesManager.currentResources?.itemsRenderer) {\r\n      await appViewer.resourcesManager.updateAssetsData({})\r\n    }\r\n\r\n    const loadWorldStart = Date.now()\r\n    console.log('try to focus window')\r\n    window.focus?.()\r\n    void waitForChunksToLoad().then(() => {\r\n      window.worldLoadTime = (Date.now() - loadWorldStart) / 1000\r\n      console.log('All chunks done and ready! Time from renderer connect to ready', (Date.now() - loadWorldStart) / 1000, 's')\r\n      document.dispatchEvent(new Event('cypress-world-ready'))\r\n    })\r\n\r\n    try {\r\n      if (p2pConnectTimeout) clearTimeout(p2pConnectTimeout)\r\n      playerState.reactive.onlineMode = !!connectOptions.authenticatedAccount\r\n\r\n      progress.setMessage('Placing blocks (starting viewer)')\r\n      if (!connectOptions.worldStateFileContents || connectOptions.worldStateFileContents.length < 3 * 1024 * 1024) {\r\n        localStorage.lastConnectOptions = JSON.stringify(connectOptions)\r\n        if (process.env.NODE_ENV === 'development' && !localStorage.lockUrl && !location.search.slice(1).length) {\r\n          lockUrl()\r\n        }\r\n      } else {\r\n        localStorage.removeItem('lastConnectOptions')\r\n      }\r\n      connectOptions.onSuccessfulPlay?.()\r\n      updateDataAfterJoin()\r\n      const password = findServerPassword()\r\n      if (password) {\r\n        setTimeout(() => {\r\n          bot.chat(`/login ${password}`)\r\n        }, 500)\r\n      }\r\n\r\n\r\n      console.log('bot spawned - starting viewer')\r\n      await appViewer.startWorld(bot.world, renderDistance)\r\n      appViewer.worldView!.listenToBot(bot)\r\n      if (appViewer.backend) {\r\n        void appViewer.worldView!.init(bot.entity.position)\r\n      }\r\n\r\n      initMotionTracking()\r\n\r\n      // Bot position callback\r\n      const botPosition = () => {\r\n        appViewer.lastCamUpdate = Date.now()\r\n        // this might cause lag, but not sure\r\n        appViewer.backend?.updateCamera(bot.entity.position, bot.entity.yaw, bot.entity.pitch)\r\n        void appViewer.worldView?.updatePosition(bot.entity.position)\r\n      }\r\n      bot.on('move', botPosition)\r\n      botPosition()\r\n\r\n      progress.setMessage('Setting callbacks')\r\n\r\n      onGameLoad()\r\n\r\n      if (appStatusState.isError) return\r\n\r\n      const waitForChunks = async () => {\r\n        if (appQueryParams.sp === '1') return //todo\r\n        const waitForChunks = options.waitForChunksRender === 'sp-only' ? !!singleplayer : options.waitForChunksRender\r\n        if (!appViewer.backend || appViewer.rendererState.world.allChunksLoaded || !waitForChunks) {\r\n          return\r\n        }\r\n\r\n        await progress.executeWithMessage(\r\n          'Loading chunks',\r\n          'chunks',\r\n          async () => {\r\n            await waitForChunksToLoad(progress)\r\n          }\r\n        )\r\n      }\r\n\r\n      await waitForChunks()\r\n\r\n      setTimeout(() => {\r\n        if (appQueryParams.suggest_save) {\r\n          showNotification('Suggestion', 'Save the world to keep your progress!', false, undefined, async () => {\r\n            const savePath = await saveToBrowserMemory()\r\n            if (!savePath) return\r\n            const saveName = savePath.split('/').pop()\r\n            bot.end()\r\n            // todo hot reload\r\n            location.search = `loadSave=${saveName}`\r\n          })\r\n        }\r\n      }, 600)\r\n\r\n      miscUiState.gameLoaded = true\r\n      miscUiState.loadedServerIndex = connectOptions.serverIndex ?? ''\r\n      customEvents.emit('gameLoaded')\r\n\r\n      // Test iOS Safari crash by creating memory pressure\r\n      if (appQueryParams.testIosCrash) {\r\n        setTimeout(() => {\r\n          console.log('Starting iOS crash test with memory pressure...')\r\n          // eslint-disable-next-line sonarjs/no-unused-collection\r\n          const arrays: number[][] = []\r\n          try {\r\n            // Create large arrays until we run out of memory\r\n            // eslint-disable-next-line no-constant-condition\r\n            while (true) {\r\n              const arr = Array.from({ length: 1024 * 1024 }).fill(0).map((_, i) => i)\r\n              arrays.push(arr)\r\n            }\r\n          } catch (e) {\r\n            console.error('Memory allocation failed:', e)\r\n          }\r\n        }, 1000)\r\n      }\r\n\r\n      progress.end()\r\n      setLoadingScreenStatus(undefined)\r\n    } catch (err) {\r\n      handleError(err)\r\n    }\r\n    lastConnectOptions.hadWorldLoaded = true\r\n  }\r\n  // don't use spawn event, player can be dead\r\n  bot.once(spawnEarlier ? 'forcedMove' : 'health', displayWorld)\r\n\r\n  if (singleplayer && connectOptions.serverOverrides.worldFolder) {\r\n    fsState.saveLoaded = true\r\n  }\r\n\r\n  if (!connectOptions.ignoreQs || process.env.NODE_ENV === 'development') {\r\n    // todo cleanup\r\n    customEvents.on('gameLoaded', () => {\r\n      const commands = appQueryParamsArray.command ?? []\r\n      for (let command of commands) {\r\n        if (!command.startsWith('/')) command = `/${command}`\r\n        const builtinHandled = tryHandleBuiltinCommand(command)\r\n        if (!builtinHandled) {\r\n          bot.chat(command)\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nlistenGlobalEvents()\r\n\r\n// #region fire click event on touch as we disable default behaviors\r\nlet activeTouch: { touch: Touch, elem: HTMLElement, start: number } | undefined\r\ndocument.body.addEventListener('touchend', (e) => {\r\n  if (!isGameActive(true)) return\r\n  if (activeTouch?.touch.identifier !== e.changedTouches[0].identifier) return\r\n  if (Date.now() - activeTouch.start > 500) {\r\n    activeTouch.elem.dispatchEvent(new Event('longtouch', { bubbles: true }))\r\n  } else {\r\n    activeTouch.elem.click()\r\n  }\r\n  activeTouch = undefined\r\n})\r\ndocument.body.addEventListener('touchstart', (e) => {\r\n  const targetElement = (e.target as HTMLElement).closest('#ui-root')\r\n  if (!isGameActive(true) || !targetElement) return\r\n  // we always prevent default behavior to disable magnifier on ios, but by doing so we also disable click events\r\n  e.preventDefault()\r\n  let firstClickable // todo remove composedPath and this workaround when lit-element is fully dropped\r\n  const path = e.composedPath() as Array<{ click?: () => void }>\r\n  for (const elem of path) {\r\n    if (elem.click) {\r\n      firstClickable = elem\r\n      break\r\n    }\r\n  }\r\n  if (!firstClickable) return\r\n  activeTouch = {\r\n    touch: e.touches[0],\r\n    elem: firstClickable,\r\n    start: Date.now(),\r\n  }\r\n}, { passive: false })\r\n// #endregion\r\n\r\n// immediate game enter actions: reconnect or URL QS\r\nconst maybeEnterGame = () => {\r\n  const waitForConfigFsLoad = (fn: () => void) => {\r\n    let unsubscribe: () => void | undefined\r\n    const checkDone = () => {\r\n      if (miscUiState.fsReady && miscUiState.appConfig) {\r\n        fn()\r\n        unsubscribe?.()\r\n        return true\r\n      }\r\n      return false\r\n    }\r\n\r\n    if (!checkDone()) {\r\n      const text = miscUiState.appConfig ? 'Loading' : 'Loading config'\r\n      setLoadingScreenStatus(text)\r\n      unsubscribe = subscribe(miscUiState, checkDone)\r\n    }\r\n  }\r\n\r\n  const reconnectOptions = sessionStorage.getItem('reconnectOptions') ? JSON.parse(sessionStorage.getItem('reconnectOptions')!) : undefined\r\n\r\n  if (reconnectOptions) {\r\n    sessionStorage.removeItem('reconnectOptions')\r\n    if (Date.now() - reconnectOptions.timestamp < 1000 * 60 * 2) {\r\n      return waitForConfigFsLoad(async () => {\r\n        void connect(reconnectOptions.value)\r\n      })\r\n    }\r\n  }\r\n\r\n  if (appQueryParams.reconnect && localStorage.lastConnectOptions && process.env.NODE_ENV === 'development') {\r\n    const lastConnect = JSON.parse(localStorage.lastConnectOptions ?? {})\r\n    return waitForConfigFsLoad(async () => {\r\n      void connect({\r\n        botVersion: appQueryParams.version ?? undefined,\r\n        ...lastConnect,\r\n        ip: appQueryParams.ip || undefined\r\n      })\r\n    })\r\n  }\r\n\r\n  if (appQueryParams.singleplayer === '1' || appQueryParams.sp === '1') {\r\n    return waitForConfigFsLoad(async () => {\r\n      loadSingleplayer({}, {\r\n        worldFolder: undefined,\r\n        ...appQueryParams.version ? { version: appQueryParams.version } : {}\r\n      })\r\n    })\r\n  }\r\n  if (appQueryParams.loadSave) {\r\n    const enterSave = async () => {\r\n      const savePath = `/data/worlds/${appQueryParams.loadSave}`\r\n      try {\r\n        await fs.promises.stat(savePath)\r\n        await loadInMemorySave(savePath)\r\n      } catch (err) {\r\n        alert(`Save ${savePath} not found`)\r\n      }\r\n    }\r\n    return waitForConfigFsLoad(enterSave)\r\n  }\r\n\r\n  if (appQueryParams.ip || appQueryParams.proxy) {\r\n    const openServerAction = () => {\r\n      if (appQueryParams.autoConnect && miscUiState.appConfig?.allowAutoConnect) {\r\n        void connect({\r\n          server: appQueryParams.ip,\r\n          proxy: getCurrentProxy(),\r\n          botVersion: appQueryParams.version ?? undefined,\r\n          username: getCurrentUsername()!,\r\n        })\r\n        return\r\n      }\r\n\r\n      setLoadingScreenStatus(undefined)\r\n      if (appQueryParams.onlyConnect || process.env.ALWAYS_MINIMAL_SERVER_UI === 'true') {\r\n        showModal({ reactType: 'only-connect-server' })\r\n      } else {\r\n        showModal({ reactType: 'editServer' })\r\n      }\r\n    }\r\n\r\n    // showModal({ reactType: 'empty' })\r\n    return waitForConfigFsLoad(openServerAction)\r\n  }\r\n\r\n  if (appQueryParams.connectPeer) {\r\n    // try to connect to peer\r\n    const peerId = appQueryParams.connectPeer\r\n    const peerOptions = {} as ConnectPeerOptions\r\n    if (appQueryParams.server) {\r\n      peerOptions.server = appQueryParams.server\r\n    }\r\n    const version = appQueryParams.peerVersion\r\n    let username: string | null = options.guestUsername\r\n    if (options.askGuestName) username = prompt('Enter your username to connect to peer', username)\r\n    if (!username) return\r\n    options.guestUsername = username\r\n    void connect({\r\n      username,\r\n      botVersion: version || undefined,\r\n      peerId,\r\n      peerOptions\r\n    })\r\n    return\r\n\r\n  }\r\n\r\n  if (appQueryParams.viewerConnect) {\r\n    void connect({\r\n      username: `viewer-${Math.random().toString(36).slice(2, 10)}`,\r\n      viewerWsConnect: appQueryParams.viewerConnect,\r\n    })\r\n    return\r\n  }\r\n\r\n  if (appQueryParams.modal) {\r\n    const modals = appQueryParams.modal.split(',')\r\n    for (const modal of modals) {\r\n      showModal({ reactType: modal })\r\n    }\r\n    return\r\n  }\r\n\r\n  if (appQueryParams.serversList && !miscUiState.appConfig?.appParams?.serversList) {\r\n    // open UI only if it's in URL\r\n    showModal({ reactType: 'serversList' })\r\n  }\r\n\r\n  if (isInterestedInDownload()) {\r\n    void downloadAndOpenFile()\r\n  }\r\n\r\n  void possiblyHandleStateVariable()\r\n}\r\n\r\n// Skip game connection logic in playground mode\r\nif (!isPlayground) {\r\n  try {\r\n    maybeEnterGame()\r\n  } catch (err) {\r\n    console.error(err)\r\n    alert(`Something went wrong: ${err}`)\r\n  }\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\r\nconst initialLoader = document.querySelector('.initial-loader') as HTMLElement | null\r\nif (initialLoader) {\r\n  initialLoader.style.opacity = '0'\r\n  initialLoader.style.pointerEvents = 'none'\r\n}\r\nwindow.pageLoaded = true\r\n\r\nif (!isPlayground) {\r\n  appViewer.waitBackendLoadPromises.push(appStartup())\r\n}\r\nregisterOpenBenchmarkListener()\r\n","import { appQueryParams } from './appParams'\r\n\r\nif (appQueryParams.testCrashApp === '1') {\r\n  throw new Error('test error')\r\n}\r\n","// global variables useful for debugging\r\n\r\nimport fs from 'fs'\r\nimport { WorldRendererThree } from 'renderer/viewer/three/worldrendererThree'\r\nimport { enable, disable, enabled } from 'debug'\r\nimport { Vec3 } from 'vec3'\r\n\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  window.debugServerPacketNames = Object.fromEntries(Object.keys(loadedData.protocol.play.toClient.types).map(name => {\r\n    name = name.replace('packet_', '')\r\n    return [name, name]\r\n  }))\r\n  window.debugClientPacketNames = Object.fromEntries(Object.keys(loadedData.protocol.play.toServer.types).map(name => {\r\n    name = name.replace('packet_', '')\r\n    return [name, name]\r\n  }))\r\n})\r\n\r\nwindow.Vec3 = Vec3\r\nwindow.cursorBlockRel = (x = 0, y = 0, z = 0) => {\r\n  const newPos = bot.blockAtCursor(5)?.position.offset(x, y, z)\r\n  if (!newPos) return\r\n  return bot.world.getBlock(newPos)\r\n}\r\n\r\nwindow.entityCursor = () => {\r\n  return bot.mouse.getCursorState().entity\r\n}\r\n\r\n// wanderer\r\nwindow.inspectPlayer = () => require('fs').promises.readFile('/world/playerdata/9e487d23-2ffc-365a-b1f8-f38203f59233.dat').then(window.nbt.parse).then(console.log)\r\n\r\nObject.defineProperty(window, 'debugSceneChunks', {\r\n  get () {\r\n    if (!(window.world instanceof WorldRendererThree)) return undefined\r\n    return (window.world)?.getLoadedChunksRelative?.(bot.entity.position, true)\r\n  },\r\n})\r\n\r\nwindow.chunkKey = (xRel = 0, zRel = 0) => {\r\n  const pos = bot.entity.position\r\n  return `${(Math.floor(pos.x / 16) + xRel) * 16},${(Math.floor(pos.z / 16) + zRel) * 16}`\r\n}\r\n\r\nwindow.sectionKey = (xRel = 0, yRel = 0, zRel = 0) => {\r\n  const pos = bot.entity.position\r\n  return `${(Math.floor(pos.x / 16) + xRel) * 16},${(Math.floor(pos.y / 16) + yRel) * 16},${(Math.floor(pos.z / 16) + zRel) * 16}`\r\n}\r\n\r\nwindow.keys = (obj) => Object.keys(obj)\r\nwindow.values = (obj) => Object.values(obj)\r\n\r\nwindow.len = (obj) => Object.keys(obj).length\r\n\r\ncustomEvents.on('gameLoaded', () => {\r\n  bot._client.on('packet', (data, { name }) => {\r\n    if (sessionStorage.ignorePackets?.includes(name)) {\r\n      console.log('ignoring packet', name)\r\n      const oldEmit = bot._client.emit\r\n      let i = 0\r\n      // ignore next 3 emits\r\n      //@ts-expect-error\r\n      bot._client.emit = (...args) => {\r\n        if (i++ === 3) {\r\n          oldEmit.apply(bot._client, args)\r\n          bot._client.emit = oldEmit\r\n        }\r\n      }\r\n    }\r\n  })\r\n})\r\n\r\nwindow.inspectPacket = (packetName, isFromClient = false, fullOrListener: boolean | ((...args) => void) = false) => {\r\n  if (typeof isFromClient === 'function') {\r\n    fullOrListener = isFromClient\r\n    isFromClient = false\r\n  }\r\n  const listener = typeof fullOrListener === 'function'\r\n    ? (name, ...args) => fullOrListener(...args, name)\r\n    : (name, ...args) => {\r\n      const displayName = name === packetName ? name : `${name} (${packetName})`\r\n      console.log('packet', displayName, fullOrListener ? args : args[0])\r\n    }\r\n\r\n  // Pre-compile regex if using wildcards\r\n  const pattern = typeof packetName === 'string' && packetName.includes('*')\r\n    ? new RegExp('^' + packetName.replaceAll('*', '.*') + '$')\r\n    : null\r\n\r\n  const packetNameListener = (name, data) => {\r\n    if (pattern) {\r\n      if (pattern.test(name)) {\r\n        listener(name, data)\r\n      }\r\n    } else if (name === packetName) {\r\n      listener(name, data)\r\n    }\r\n  }\r\n  const packetListener = (data, { name }) => {\r\n    packetNameListener(name, data)\r\n  }\r\n\r\n  const attach = () => {\r\n    if (isFromClient) {\r\n      bot?._client.prependListener('writePacket', packetNameListener)\r\n    } else {\r\n      bot?._client.prependListener('packet_name', packetNameListener)\r\n      bot?._client.prependListener('packet', packetListener)\r\n    }\r\n  }\r\n  const detach = () => {\r\n    if (isFromClient) {\r\n      bot?._client.removeListener('writePacket', packetNameListener)\r\n    } else {\r\n      bot?._client.removeListener('packet_name', packetNameListener)\r\n      bot?._client.removeListener('packet', packetListener)\r\n    }\r\n  }\r\n  attach()\r\n  customEvents.on('mineflayerBotCreated', attach)\r\n\r\n  const returnobj = {}\r\n  Object.defineProperty(returnobj, 'detach', {\r\n    get () {\r\n      detach()\r\n      customEvents.removeListener('mineflayerBotCreated', attach)\r\n      return true\r\n    },\r\n  })\r\n  return returnobj\r\n}\r\n\r\nwindow.downloadFile = async (path: string) => {\r\n  if (!path.startsWith('/') && localServer) path = `${localServer.options.worldFolder}/${path}`\r\n  const data = await fs.promises.readFile(path)\r\n  const blob = new Blob([data], { type: 'application/octet-stream' })\r\n  const url = URL.createObjectURL(blob)\r\n  const a = document.createElement('a')\r\n  a.href = url\r\n  a.download = path.split('/').at(-1)!\r\n  a.click()\r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\nObject.defineProperty(window, 'debugToggle', {\r\n  get () {\r\n    localStorage.debug = localStorage.debug === '*' ? '' : '*'\r\n    if (enabled('*')) {\r\n      disable()\r\n      return 'disabled debug'\r\n    } else {\r\n      enable('*')\r\n      return 'enabled debug'\r\n    }\r\n  },\r\n  set (v) {\r\n    enable(v)\r\n    localStorage.debug = v\r\n    console.log('Enabled debug for', v)\r\n  }\r\n})\r\n\r\ncustomEvents.on('gameLoaded', () => {\r\n  window.holdingBlock = (window.world as WorldRendererThree | undefined)?.holdingBlock\r\n})\r\n\r\nwindow.clearStorage = (...keysToKeep: string[]) => {\r\n  for (let i = 0; i < localStorage.length; i++) {\r\n    const key = localStorage.key(i)\r\n    if (key && !keysToKeep.includes(key)) {\r\n      localStorage.removeItem(key)\r\n    }\r\n  }\r\n  return `Cleared ${localStorage.length - keysToKeep.length} items from localStorage. Kept: ${keysToKeep.join(', ')}`\r\n}\r\n\r\n\r\n// PERF DEBUG\r\n\r\n// for advanced debugging, use with watch expression\r\n\r\nwindow.statsPerSecAvg = {}\r\nlet currentStatsPerSec = {} as Record<string, number[]>\r\nconst waitingStatsPerSec = {}\r\nwindow.markStart = (label) => {\r\n  waitingStatsPerSec[label] ??= []\r\n  waitingStatsPerSec[label][0] = performance.now()\r\n}\r\nwindow.markEnd = (label) => {\r\n  if (!waitingStatsPerSec[label]?.[0]) return\r\n  currentStatsPerSec[label] ??= []\r\n  currentStatsPerSec[label].push(performance.now() - waitingStatsPerSec[label][0])\r\n  delete waitingStatsPerSec[label]\r\n}\r\nconst updateStatsPerSecAvg = () => {\r\n  window.statsPerSecAvg = Object.fromEntries(Object.entries(currentStatsPerSec).map(([key, value]) => {\r\n    return [key, {\r\n      avg: value.reduce((a, b) => a + b, 0) / value.length,\r\n      count: value.length\r\n    }]\r\n  }))\r\n  currentStatsPerSec = {}\r\n}\r\n\r\n\r\nwindow.statsPerSec = {}\r\nlet statsPerSecCurrent = {}\r\nlet lastReset = performance.now()\r\nwindow.addStatPerSec = (name) => {\r\n  statsPerSecCurrent[name] ??= 0\r\n  statsPerSecCurrent[name]++\r\n}\r\nwindow.statsPerSecCurrent = statsPerSecCurrent\r\nsetInterval(() => {\r\n  window.statsPerSec = { duration: Math.floor(performance.now() - lastReset), ...statsPerSecCurrent, }\r\n  statsPerSecCurrent = {}\r\n  window.statsPerSecCurrent = statsPerSecCurrent\r\n  updateStatsPerSecAvg()\r\n  lastReset = performance.now()\r\n}, 1000)\r\n\r\n// ---\r\n\r\n// Add type declaration for performance.memory\r\ndeclare global {\r\n  interface Performance {\r\n    memory?: {\r\n      usedJSHeapSize: number\r\n      totalJSHeapSize: number\r\n      jsHeapSizeLimit: number\r\n    }\r\n  }\r\n}\r\n\r\n// Performance metrics WebSocket client\r\nlet ws: WebSocket | null = null\r\nlet wsReconnectTimeout: NodeJS.Timeout | null = null\r\nlet metricsInterval: NodeJS.Timeout | null = null\r\n\r\n// Start collecting metrics immediately\r\nconst startTime = performance.now()\r\n\r\nfunction collectAndSendMetrics () {\r\n  if (!ws || ws.readyState !== WebSocket.OPEN) return\r\n\r\n  const metrics = {\r\n    loadTime: performance.now() - startTime,\r\n    memoryUsage: (performance.memory?.usedJSHeapSize ?? 0) / 1024 / 1024,\r\n    timestamp: Date.now()\r\n  }\r\n\r\n  ws.send(JSON.stringify(metrics))\r\n}\r\n\r\nfunction getWebSocketUrl () {\r\n  const wsPort = process.env.WS_PORT\r\n  if (!wsPort) return null\r\n\r\n  const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:'\r\n  const { hostname } = window.location\r\n  return `${protocol}//${hostname}:${wsPort}`\r\n}\r\n\r\nfunction connectWebSocket () {\r\n  if (ws) return\r\n\r\n  const wsUrl = getWebSocketUrl()\r\n  if (!wsUrl) {\r\n    return\r\n  }\r\n\r\n  ws = new WebSocket(wsUrl)\r\n\r\n  ws.onopen = () => {\r\n    console.log('Connected to metrics server')\r\n    if (wsReconnectTimeout) {\r\n      clearTimeout(wsReconnectTimeout)\r\n      wsReconnectTimeout = null\r\n    }\r\n\r\n    // Start sending metrics immediately after connection\r\n    collectAndSendMetrics()\r\n\r\n    // Clear existing interval if any\r\n    if (metricsInterval) {\r\n      clearInterval(metricsInterval)\r\n    }\r\n\r\n    // Set new interval\r\n    metricsInterval = setInterval(collectAndSendMetrics, 500)\r\n  }\r\n\r\n  ws.onclose = () => {\r\n    console.log('Disconnected from metrics server')\r\n    ws = null\r\n\r\n    // Clear metrics interval\r\n    if (metricsInterval) {\r\n      clearInterval(metricsInterval)\r\n      metricsInterval = null\r\n    }\r\n\r\n    // Try to reconnect after 3 seconds\r\n    wsReconnectTimeout = setTimeout(connectWebSocket, 3000)\r\n  }\r\n\r\n  ws.onerror = (error) => {\r\n    console.error('WebSocket error:', error)\r\n  }\r\n}\r\n\r\n// Connect immediately\r\nconnectWebSocket()\r\n\r\n// Add command to request current metrics\r\nwindow.requestMetrics = () => {\r\n  const metrics = {\r\n    loadTime: performance.now() - startTime,\r\n    memoryUsage: (performance.memory?.usedJSHeapSize ?? 0) / 1024 / 1024,\r\n    timestamp: Date.now()\r\n  }\r\n  console.log('Current metrics:', metrics)\r\n  return metrics\r\n}\r\n","export const EntityStatus = {\r\n  JUMP: 1,\r\n  HURT: 2, // legacy\r\n  DEATH: 3,\r\n  START_ATTACKING: 4,\r\n  STOP_ATTACKING: 5,\r\n  TAMING_FAILED: 6,\r\n  TAMING_SUCCEEDED: 7,\r\n  SHAKE_WETNESS: 8,\r\n  USE_ITEM_COMPLETE: 9,\r\n  EAT_GRASS: 10,\r\n  OFFER_FLOWER: 11,\r\n  LOVE_HEARTS: 12,\r\n  VILLAGER_ANGRY: 13,\r\n  VILLAGER_HAPPY: 14,\r\n  WITCH_HAT_MAGIC: 15,\r\n  ZOMBIE_CONVERTING: 16,\r\n  FIREWORKS_EXPLODE: 17,\r\n  IN_LOVE_HEARTS: 18,\r\n  SQUID_ANIM_SYNCH: 19,\r\n  SILVERFISH_MERGE_ANIM: 20,\r\n  GUARDIAN_ATTACK_SOUND: 21,\r\n  REDUCED_DEBUG_INFO: 22,\r\n  FULL_DEBUG_INFO: 23,\r\n  PERMISSION_LEVEL_ALL: 24,\r\n  PERMISSION_LEVEL_MODERATORS: 25,\r\n  PERMISSION_LEVEL_GAMEMASTERS: 26,\r\n  PERMISSION_LEVEL_ADMINS: 27,\r\n  PERMISSION_LEVEL_OWNERS: 28,\r\n  ATTACK_BLOCKED: 29,\r\n  SHIELD_DISABLED: 30,\r\n  FISHING_ROD_REEL_IN: 31,\r\n  ARMORSTAND_WOBBLE: 32,\r\n  THORNED: 33, // legacy\r\n  STOP_OFFER_FLOWER: 34,\r\n  TALISMAN_ACTIVATE: 35, // legacy\r\n  DROWNED: 36, // legacy\r\n  BURNED: 37, // legacy\r\n  DOLPHIN_LOOKING_FOR_TREASURE: 38,\r\n  RAVAGER_STUNNED: 39,\r\n  TRUSTING_FAILED: 40,\r\n  TRUSTING_SUCCEEDED: 41,\r\n  VILLAGER_SWEAT: 42,\r\n  BAD_OMEN_TRIGGERED: 43, // legacy\r\n  POKED: 44, // legacy\r\n  FOX_EAT: 45,\r\n  TELEPORT: 46,\r\n  MAINHAND_BREAK: 47,\r\n  OFFHAND_BREAK: 48,\r\n  HEAD_BREAK: 49,\r\n  CHEST_BREAK: 50,\r\n  LEGS_BREAK: 51,\r\n  FEET_BREAK: 52,\r\n  HONEY_SLIDE: 53,\r\n  HONEY_JUMP: 54,\r\n  SWAP_HANDS: 55,\r\n  CANCEL_SHAKE_WETNESS: 56,\r\n  FROZEN: 57, // legacy\r\n  START_RAM: 58,\r\n  END_RAM: 59,\r\n  POOF: 60,\r\n  TENDRILS_SHIVER: 61,\r\n  SONIC_CHARGE: 62,\r\n  SNIFFER_DIGGING_SOUND: 63,\r\n  ARMADILLO_PEEK: 64,\r\n  BODY_BREAK: 65,\r\n  SHAKE: 66\r\n} as const\r\n\r\nexport type EntityStatusName = keyof typeof EntityStatus\r\n","import { saveServer } from './flyingSquidUtils'\r\nimport { isGameActive, activeModalStack } from './globalState'\r\nimport { options } from './optionsStorage'\r\nimport { isInRealGameSession } from './utils'\r\n\r\nwindow.addEventListener('unload', (e) => {\r\n  if (!window.justReloaded) {\r\n    sessionStorage.justReloaded = false\r\n  }\r\n  void saveServer()\r\n})\r\n\r\ndocument.addEventListener('visibilitychange', () => {\r\n  if (document.visibilityState === 'hidden') void saveServer()\r\n})\r\ndocument.addEventListener('blur', () => {\r\n  void saveServer()\r\n})\r\n\r\nwindow.addEventListener('beforeunload', (event) => {\r\n  if (!window.justReloaded) {\r\n    sessionStorage.justReloaded = false\r\n  }\r\n\r\n  // todo-low maybe exclude chat?\r\n  if (!isGameActive(true) && activeModalStack.at(-1)?.elem?.id !== 'chat') return\r\n  if (sessionStorage.lastReload && !options.preventDevReloadWhilePlaying) return\r\n  if (!options.closeConfirmation) return\r\n  if (!isInRealGameSession()) return\r\n\r\n  // For major browsers doning only this is enough\r\n  event.preventDefault()\r\n\r\n  // Display a confirmation prompt\r\n  event.returnValue = '' // Required for some browsers\r\n  return 'The game is running. Are you sure you want to close this page?'\r\n})\r\n\r\nwindow.addEventListener('contextmenu', (e) => {\r\n  const ALLOW_TAGS = ['INPUT', 'TEXTAREA', 'A']\r\n  // allow if target is in ALLOW_TAGS or has selection text\r\n  if (ALLOW_TAGS.includes((e.target as HTMLElement)?.tagName) || window.getSelection()?.toString()) {\r\n    return\r\n  }\r\n  e.preventDefault()\r\n})\r\n","import { mapDownloader } from 'mineflayer-item-map-downloader'\r\nimport { setImageConverter } from 'mineflayer-item-map-downloader/lib/util'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\n\r\nsetImageConverter((buf: Uint8Array) => {\r\n  const canvas = document.createElement('canvas')\r\n  const ctx = canvas.getContext('2d')!\r\n  canvas.width = 128\r\n  canvas.height = 128\r\n  const imageData = ctx.createImageData(canvas.width, canvas.height)\r\n  imageData.data.set(buf)\r\n  ctx.putImageData(imageData, 0, 0)\r\n  // data url\r\n  return canvas.toDataURL('image/png')\r\n})\r\n\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  bot.on('login', () => {\r\n    bot.loadPlugin(mapDownloader)\r\n    bot.mapDownloader.on('new_map', ({ png, id }) => {\r\n      getThreeJsRendererMethods()?.updateMap(id, png)\r\n    })\r\n  })\r\n})\r\n","import { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\n\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  customEvents.on('hurtAnimation', (yaw) => {\r\n    getThreeJsRendererMethods()?.shakeFromDamage()\r\n  })\r\n\r\n  bot._client.on('hurt_animation', ({ entityId, yaw }) => {\r\n    if (entityId === bot.entity.id) {\r\n      customEvents.emit('hurtAnimation', yaw)\r\n    }\r\n  })\r\n  bot.on('entityHurt', ({ id }) => {\r\n    if (id === bot.entity.id) {\r\n      customEvents.emit('hurtAnimation')\r\n    }\r\n  })\r\n  let { health } = bot\r\n  bot.on('health', () => {\r\n    if (bot.health < health) {\r\n      customEvents.emit('hurtAnimation')\r\n    }\r\n    health = bot.health\r\n  })\r\n})\r\n","import { EventEmitter } from 'events'\r\n\r\nEventEmitter.defaultMaxListeners = 200\r\n\r\nconst oldEmit = EventEmitter.prototype.emit\r\nEventEmitter.prototype.emit = function (...args) {\r\n  if (args[0] === 'error' && !this._events.error) {\r\n    console.log('Unhandled error event', args.slice(1))\r\n    args[1] = { message: String(args[1]) }\r\n  }\r\n  return oldEmit.apply(this, args)\r\n}\r\n","import { versionToNumber } from 'flying-squid/dist/utils'\r\n\r\nconst customStickNbt = (tags: Record<string, any>) => {\r\n  let cmd = '/give @p stick'\r\n  const wrapIntoQuotes = versionToNumber(bot.version) < versionToNumber('1.21.5')\r\n  cmd += `[${Object.entries(tags).map(([key, value]) => {\r\n    if (typeof value === 'object') {\r\n      value = JSON.stringify(value)\r\n    }\r\n    return `${key}=${wrapIntoQuotes ? `'${value}'` : value}`\r\n  }).join(',')}]`\r\n  return cmd\r\n}\r\n\r\nconst writeCmd = (cmd: string) => {\r\n  if (!cmd.startsWith('/')) cmd = `/${cmd}`\r\n  console.log('Executing', cmd)\r\n  bot.chat(cmd)\r\n}\r\n\r\nlet msg = 0\r\nconst LIMIT_MSG = 100\r\nexport const javaServerTester = {\r\n  itemCustomLore () {\r\n    const cmd = customStickNbt({\r\n      lore: [{ text: 'This Stick is very sticky.' }]\r\n    })\r\n    writeCmd(cmd)\r\n  },\r\n\r\n  itemCustomModel () {\r\n    const cmd = customStickNbt({\r\n      item_model: 'minecraft:diamond'\r\n    })\r\n    writeCmd(cmd)\r\n  },\r\n  itemCustomModel2 () {\r\n    const cmd = customStickNbt({\r\n      item_model: 'diamond'\r\n    })\r\n    writeCmd(cmd)\r\n  },\r\n\r\n  itemCustomName () {\r\n    const cmd = customStickNbt({\r\n      custom_name: [{ text: 'diamond' }]\r\n    })\r\n    writeCmd(cmd)\r\n  },\r\n  itemCustomName2 () {\r\n    const cmd = customStickNbt({\r\n      custom_name: [{ translate: 'item.diamond.name' }]\r\n    })\r\n    writeCmd(cmd)\r\n  },\r\n\r\n  spamChat () {\r\n    for (let i = msg; i < msg + LIMIT_MSG; i++) {\r\n      bot.chat('Hello, world, ' + i)\r\n    }\r\n    msg += LIMIT_MSG\r\n  },\r\n  spamChatComplexMessage () {\r\n    for (let i = msg; i < msg + LIMIT_MSG; i++) {\r\n      bot.chat('/tell @a ' + i)\r\n    }\r\n  }\r\n}\r\n","import { javaServerTester } from './commands'\r\n\r\nwindow.javaServerTester = javaServerTester\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  //\r\n})\r\n","// Slider.tsx\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport { useFloating, arrow, FloatingArrow, offset as offsetMiddleware } from '@floating-ui/react'\r\nimport styles from './slider.module.css'\r\nimport SharedHudVars from './SharedHudVars'\r\n\r\ninterface Props extends React.ComponentProps<'div'> {\r\n  label: string;\r\n  value: number;\r\n  unit?: string;\r\n  width?: number;\r\n  valueDisplay?: string | number;\r\n  min?: number;\r\n  max?: number;\r\n  disabledReason?: string;\r\n  throttle?: number | false; // milliseconds, default 100, false to disable\r\n\r\n  updateValue?: (value: number) => void;\r\n  updateOnDragEnd?: boolean;\r\n}\r\n\r\nconst ARROW_HEIGHT = 7\r\nconst GAP = 0\r\n\r\nconst Slider: React.FC<Props> = ({\r\n  label,\r\n  unit = '%',\r\n  width,\r\n  value: valueProp,\r\n  valueDisplay,\r\n  min = 0,\r\n  max = 100,\r\n  disabledReason,\r\n  throttle = 0,\r\n\r\n  updateOnDragEnd = false,\r\n  updateValue,\r\n  ...divProps\r\n}) => {\r\n  label = translate(label)\r\n  disabledReason = translate(disabledReason)\r\n  valueDisplay = typeof valueDisplay === 'string' ? translate(valueDisplay) : valueDisplay\r\n\r\n  const [value, setValue] = useState(valueProp)\r\n  const getRatio = (v = value) => Math.max(Math.min((v - min) / (max - min), 1), 0)\r\n  const [ratio, setRatio] = useState(getRatio())\r\n\r\n  // Throttling refs\r\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const lastValueRef = useRef<number>(valueProp)\r\n\r\n  // Gamepad support\r\n  const [showGamepadTooltip, setShowGamepadTooltip] = useState(false)\r\n  const lastChangeTime = useRef(0)\r\n  const containerRef = useRef<HTMLDivElement>(null!)\r\n\r\n  useEffect(() => {\r\n    setValue(valueProp)\r\n  }, [valueProp])\r\n  useEffect(() => {\r\n    setRatio(getRatio())\r\n  }, [value, min, max])\r\n\r\n  const throttledUpdateValue = useCallback((newValue: number, dragEnd: boolean) => {\r\n    if (updateOnDragEnd !== dragEnd) return\r\n    if (!updateValue) return\r\n\r\n    lastValueRef.current = newValue\r\n\r\n    if (!throttle) {\r\n      // No throttling\r\n      updateValue(newValue)\r\n      return\r\n    }\r\n\r\n    // Clear existing timeout\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current)\r\n    }\r\n\r\n    // Set new timeout\r\n    timeoutRef.current = setTimeout(() => {\r\n      updateValue(lastValueRef.current)\r\n      timeoutRef.current = null\r\n    }, throttle)\r\n  }, [updateValue, updateOnDragEnd, throttle])\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current)\r\n        // Fire the last value immediately on cleanup\r\n        if (updateValue && lastValueRef.current !== undefined) {\r\n          updateValue(lastValueRef.current)\r\n        }\r\n      }\r\n    }\r\n  }, [updateValue])\r\n\r\n  // Handle gamepad hover and input changes\r\n  useEffect(() => {\r\n    const element = containerRef.current\r\n    if (!element) return\r\n\r\n    const handleMouseOver = (e: MouseEvent & { isGamepadCursor?: boolean }) => {\r\n      if (e.isGamepadCursor && !disabledReason) {\r\n        setShowGamepadTooltip(true)\r\n      }\r\n    }\r\n\r\n    const handleMouseOut = (e: MouseEvent & { isGamepadCursor?: boolean }) => {\r\n      if (e.isGamepadCursor) {\r\n        setShowGamepadTooltip(false)\r\n      }\r\n    }\r\n\r\n    const handleGamepadInputChange = (e: CustomEvent<{ direction: number, value: number, isStickMovement: boolean }>) => {\r\n      if (disabledReason) return\r\n\r\n      const now = Date.now()\r\n      // Throttle changes to prevent too rapid updates\r\n      if (now - lastChangeTime.current < 200 && e.detail.isStickMovement) return\r\n      lastChangeTime.current = now\r\n\r\n      const step = 1\r\n      const newValue = value + (e.detail.direction * step)\r\n\r\n      // Apply min/max constraints\r\n      const constrainedValue = Math.max(min, Math.min(max, newValue))\r\n\r\n      setValue(constrainedValue)\r\n      fireValueUpdate(false, constrainedValue)\r\n    }\r\n\r\n    element.addEventListener('mouseover', handleMouseOver as EventListener)\r\n    element.addEventListener('mouseout', handleMouseOut as EventListener)\r\n    element.addEventListener('gamepadInputChange', handleGamepadInputChange as EventListener)\r\n\r\n    return () => {\r\n      element.removeEventListener('mouseover', handleMouseOver as EventListener)\r\n      element.removeEventListener('mouseout', handleMouseOut as EventListener)\r\n      element.removeEventListener('gamepadInputChange', handleGamepadInputChange as EventListener)\r\n    }\r\n  }, [disabledReason, value, min, max])\r\n\r\n  const fireValueUpdate = (dragEnd: boolean, v = value) => {\r\n    throttledUpdateValue(v, dragEnd)\r\n  }\r\n\r\n  const labelText = `${label}: ${valueDisplay ?? value} ${unit}`\r\n\r\n  const arrowRef = useRef<any>(null)\r\n  const { refs, floatingStyles, context } = useFloating({\r\n    middleware: [\r\n      arrow({\r\n        element: arrowRef\r\n      }),\r\n      offsetMiddleware(ARROW_HEIGHT + GAP),\r\n    ],\r\n    placement: 'top',\r\n  })\r\n\r\n  return (\r\n    <SharedHudVars>\r\n      <div\r\n        ref={(node) => {\r\n          containerRef.current = node!\r\n          refs.setReference(node)\r\n        }}\r\n        className={`${styles['slider-container']} settings-text-container ${labelText.length > 17 ? 'settings-text-container-long' : ''}`}\r\n        style={{ width }}\r\n        {...divProps}\r\n      >\r\n        <input\r\n          type=\"range\"\r\n          className={styles.slider}\r\n          min={min}\r\n          max={max}\r\n          value={value}\r\n          disabled={!!disabledReason}\r\n          onChange={(e) => {\r\n            const newValue = Number(e.target.value)\r\n            setValue(newValue)\r\n            fireValueUpdate(false, newValue)\r\n          }}\r\n          // todo improve correct handling of drag end\r\n          onLostPointerCapture={() => {\r\n            fireValueUpdate(true)\r\n          }}\r\n          onPointerUp={() => {\r\n            fireValueUpdate(true)\r\n          }}\r\n          onKeyUp={() => {\r\n            fireValueUpdate(true)\r\n          }}\r\n        />\r\n        <div className={styles.disabled} title={disabledReason} />\r\n        <div className={styles['slider-thumb']} style={{ left: `calc((100% * ${ratio}) - (8px * ${ratio}))` }} />\r\n        <label className={styles.label}>\r\n          {labelText}\r\n        </label>\r\n      </div>\r\n      {showGamepadTooltip && (\r\n        <div\r\n          ref={refs.setFloating}\r\n          style={{\r\n            ...floatingStyles,\r\n            background: 'rgba(0, 0, 0, 0.8)',\r\n            fontSize: 10,\r\n            pointerEvents: 'none',\r\n            userSelect: 'none',\r\n            padding: '4px 8px',\r\n            borderRadius: 4,\r\n            textShadow: '1px 1px 2px BLACK',\r\n            zIndex: 1000,\r\n            whiteSpace: 'nowrap'\r\n          }}\r\n        >\r\n          Use right stick left/right to change value\r\n          <FloatingArrow ref={arrowRef} context={context} style={{ fill: 'rgba(0, 0, 0, 0.8)' }} />\r\n        </div>\r\n      )}\r\n    </SharedHudVars>\r\n  )\r\n}\r\n\r\nexport default Slider\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"slider-container\":\"slider-container-k26jGw\",\"sliderContainer\":\"slider-container-k26jGw\",\"slider-thumb\":\"slider-thumb-kWeJYr\",\"sliderThumb\":\"slider-thumb-kWeJYr\",\"slider\":\"slider-pQg1Tc\",\"disabled\":\"disabled-vWN9n8\",\"label\":\"label-My4K1P\"};","import { useSnapshot } from 'valtio'\r\nimport { useState, useMemo, useEffect, useRef } from 'react'\r\nimport { titleCase } from 'title-case'\r\nimport { noCase } from 'change-case'\r\nimport { isMobile } from 'renderer/viewer/lib/simpleUtils'\r\nimport { options, disabledSettings } from '../optionsStorage'\r\nimport { hideCurrentModal, showModal } from '../globalState'\r\nimport Screen from './Screen'\r\nimport Button from './Button'\r\nimport Input from './Input'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\n\r\nexport const showAllSettingsEditor = () => {\r\n  showModal({ reactType: 'all-settings-editor' })\r\n}\r\n\r\nexport default () => {\r\n  const isModalActive = useIsModalActive('all-settings-editor')\r\n  const optionsSnapshot = useSnapshot(options)\r\n  const disabledSettingsSnapshot = useSnapshot(disabledSettings)\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [editingKey, setEditingKey] = useState<string | null>(null)\r\n  const [editingValue, setEditingValue] = useState<string>('')\r\n  const searchInputRef = useRef<HTMLInputElement>(null)\r\n  const dropdownRef = useRef<HTMLDivElement>(null)\r\n\r\n  const filteredOptions = useMemo(() => {\r\n    if (!isModalActive) return []\r\n    const search = searchTerm.toLowerCase()\r\n    return Object.entries(optionsSnapshot)\r\n      .filter(([key]) => {\r\n        const keyLower = key.toLowerCase()\r\n        const titleKey = titleCase(noCase(key)).toLowerCase()\r\n        return keyLower.includes(search) || titleKey.includes(search)\r\n      })\r\n      .sort(([a], [b]) => a.localeCompare(b))\r\n  }, [optionsSnapshot, searchTerm, isModalActive])\r\n\r\n  useEffect(() => {\r\n    if (isModalActive && searchInputRef.current && !isMobile()) {\r\n      // Focus search input on open (but not on mobile to avoid keyboard popup)\r\n      searchInputRef.current.focus()\r\n    }\r\n  }, [isModalActive])\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setEditingKey(null)\r\n      }\r\n    }\r\n    if (editingKey) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [editingKey])\r\n\r\n  if (!isModalActive) return null\r\n\r\n  const handleValueClick = (key: string, value: any, event: React.MouseEvent) => {\r\n    if (disabledSettingsSnapshot.value.has(key)) return\r\n    event.stopPropagation()\r\n    setEditingKey(key)\r\n    setEditingValue(String(value))\r\n  }\r\n\r\n  const handleValueChange = (key: string, newValue: any) => {\r\n    try {\r\n      if (typeof optionsSnapshot[key] === 'boolean') {\r\n        options[key] = newValue === 'true' || newValue === true\r\n      } else if (typeof optionsSnapshot[key] === 'number') {\r\n        const num = parseFloat(String(newValue))\r\n        if (!isNaN(num)) {\r\n          options[key] = num\r\n        }\r\n      } else {\r\n        options[key] = newValue\r\n      }\r\n      setEditingKey(null)\r\n    } catch (err) {\r\n      console.error('Failed to update option:', err)\r\n    }\r\n  }\r\n\r\n  const OptionRow = ({ optionKey, value }: { optionKey: string, value: any }) => {\r\n    const valueButtonRef = useRef<HTMLDivElement>(null)\r\n    const isDisabled = disabledSettingsSnapshot.value.has(optionKey)\r\n    const isEditing = editingKey === optionKey\r\n    const isBoolean = typeof value === 'boolean'\r\n    const isNumber = typeof value === 'number'\r\n    const isString = typeof value === 'string'\r\n\r\n    const renderValueEditor = () => {\r\n      if (!isEditing) return null\r\n\r\n      const dropdownStyle: React.CSSProperties = {\r\n        position: 'fixed',\r\n        backgroundColor: '#2a2a2a',\r\n        border: '1px solid #555',\r\n        borderRadius: '4px',\r\n        padding: '4px',\r\n        zIndex: 10_000,\r\n        minWidth: '120px',\r\n        boxShadow: '0 4px 8px rgba(0, 0, 0, 0.3)',\r\n      }\r\n\r\n      if (valueButtonRef.current) {\r\n        const rect = valueButtonRef.current.getBoundingClientRect()\r\n        dropdownStyle.left = `${rect.left}px`\r\n        dropdownStyle.top = `${rect.bottom + 4}px`\r\n      }\r\n\r\n      return (\r\n        <div ref={dropdownRef} style={dropdownStyle}>\r\n          {isBoolean ? (\r\n            <>\r\n              <div\r\n                style={{\r\n                  padding: '6px 12px',\r\n                  cursor: 'pointer',\r\n                  backgroundColor: '#333',\r\n                  borderRadius: '2px',\r\n                  marginBottom: '4px',\r\n                }}\r\n                onMouseEnter={(e) => { e.currentTarget.style.backgroundColor = '#444' }}\r\n                onMouseLeave={(e) => { e.currentTarget.style.backgroundColor = '#333' }}\r\n                onClick={() => handleValueChange(optionKey, 'true')}\r\n              >\r\n                true\r\n              </div>\r\n              <div\r\n                style={{\r\n                  padding: '6px 12px',\r\n                  cursor: 'pointer',\r\n                  backgroundColor: '#333',\r\n                  borderRadius: '2px',\r\n                }}\r\n                onMouseEnter={(e) => { e.currentTarget.style.backgroundColor = '#444' }}\r\n                onMouseLeave={(e) => { e.currentTarget.style.backgroundColor = '#333' }}\r\n                onClick={() => handleValueChange(optionKey, 'false')}\r\n              >\r\n                false\r\n              </div>\r\n            </>\r\n          ) : isString ? (\r\n            <div style={{ padding: '4px' }}>\r\n              <Input\r\n                defaultValue={String(value)}\r\n                autoFocus\r\n                rootStyles={{ width: '100%' }}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter') {\r\n                    handleValueChange(optionKey, e.currentTarget.value)\r\n                  } else if (e.key === 'Escape') {\r\n                    setEditingKey(null)\r\n                  }\r\n                }}\r\n                onBlur={() => {\r\n                  // Small delay to allow dropdown clicks to register\r\n                  setTimeout(() => {\r\n                    if (editingKey === optionKey) {\r\n                      handleValueChange(optionKey, editingValue)\r\n                    }\r\n                  }, 200)\r\n                }}\r\n                onChange={(e) => setEditingValue(e.target.value)}\r\n              />\r\n            </div>\r\n          ) : isNumber ? (\r\n            <div style={{ padding: '4px' }}>\r\n              <Input\r\n                type=\"number\"\r\n                defaultValue={String(value)}\r\n                autoFocus\r\n                rootStyles={{ width: '100%' }}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter') {\r\n                    handleValueChange(optionKey, e.currentTarget.value)\r\n                  } else if (e.key === 'Escape') {\r\n                    setEditingKey(null)\r\n                  }\r\n                }}\r\n                onBlur={() => {\r\n                  setTimeout(() => {\r\n                    if (editingKey === optionKey) {\r\n                      handleValueChange(optionKey, editingValue)\r\n                    }\r\n                  }, 200)\r\n                }}\r\n                onChange={(e) => setEditingValue(e.target.value)}\r\n              />\r\n            </div>\r\n          ) : (\r\n            <div style={{ padding: '8px', color: '#999', fontSize: '12px' }}>\r\n              Complex type (object/array)\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px',\r\n          padding: '8px 12px',\r\n          backgroundColor: isEditing ? '#333' : isDisabled ? '#1f1f1f' : '#2a2a2a',\r\n          borderRadius: '4px',\r\n          cursor: isDisabled ? 'not-allowed' : 'pointer',\r\n          position: 'relative',\r\n          // Mobile-friendly touch targets\r\n          minHeight: '44px',\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          if (!isDisabled && !isEditing) {\r\n            e.currentTarget.style.backgroundColor = '#333'\r\n          }\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          if (!isDisabled && !isEditing) {\r\n            e.currentTarget.style.backgroundColor = '#2a2a2a'\r\n          }\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            flex: 1,\r\n            minWidth: 0, // Allow text to truncate on mobile\r\n            fontSize: '13px',\r\n            color: isDisabled ? '#666' : '#fff',\r\n            fontWeight: 500,\r\n            wordBreak: 'break-word',\r\n          }}\r\n        >\r\n          {titleCase(noCase(optionKey))}\r\n        </div>\r\n        <div\r\n          ref={valueButtonRef}\r\n          style={{\r\n            fontSize: '12px',\r\n            color: typeof value === 'boolean' ? (value ? '#4caf50' : '#f44336') : '#aaa',\r\n            padding: '4px 8px',\r\n            backgroundColor: isEditing ? '#444' : '#1a1a1a',\r\n            borderRadius: '3px',\r\n            whiteSpace: 'nowrap',\r\n            cursor: isDisabled ? 'not-allowed' : 'pointer',\r\n            border: isEditing ? '1px solid #555' : '1px solid transparent',\r\n            userSelect: 'none',\r\n            // Mobile-friendly touch target\r\n            minWidth: '60px',\r\n            textAlign: 'center',\r\n          }}\r\n          onClick={(e) => handleValueClick(optionKey, value, e)}\r\n          onTouchStart={(e) => {\r\n            // Prevent double-tap zoom on mobile\r\n            if (e.touches.length > 1) {\r\n              e.preventDefault()\r\n            }\r\n          }}\r\n        >\r\n          {typeof value === 'boolean' ? String(value)\r\n            : typeof value === 'object' ? JSON.stringify(value).slice(0, 30) + (JSON.stringify(value).length > 30 ? '...' : '')\r\n              : String(value)}\r\n        </div>\r\n        {renderValueEditor()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Screen title=\"All Settings\" backdrop titleMarginTop={5}>\r\n      <div style={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        height: '100%',\r\n        width: '100%',\r\n        maxHeight: 'calc(100vh - 100px)',\r\n        gap: '8px',\r\n      }}>\r\n        {/* Search input */}\r\n        <div style={{\r\n          position: 'sticky',\r\n          top: 0,\r\n          zIndex: 100,\r\n          backgroundColor: '#1a1a1a',\r\n          padding: '8px 0',\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n            <PixelartIcon iconName={pixelartIcons['search']} styles={{ width: '16px', height: '16px', flexShrink: 0 }} />\r\n            <Input\r\n              ref={searchInputRef}\r\n              placeholder=\"Search options...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              rootStyles={{\r\n                flex: 1,\r\n                minWidth: 0, // Allow flexbox to shrink properly on mobile\r\n              }}\r\n            />\r\n            {searchTerm && (\r\n              <Button\r\n                icon={pixelartIcons['close']}\r\n                onClick={() => setSearchTerm('')}\r\n                style={{ width: '20px', flexShrink: 0 }}\r\n              />\r\n            )}\r\n          </div>\r\n          <div style={{ fontSize: '11px', color: '#888', marginTop: '4px' }}>\r\n            {filteredOptions.length} option{(filteredOptions.length === 1) ? '' : 's'} found\r\n          </div>\r\n        </div>\r\n\r\n        {/* Options list */}\r\n        <div style={{\r\n          overflowY: 'auto',\r\n          flex: 1,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          gap: '2px',\r\n          paddingRight: '4px',\r\n          // Mobile-friendly scrolling\r\n          WebkitOverflowScrolling: 'touch',\r\n        }}>\r\n          {filteredOptions.length === 0 ? (\r\n            <div style={{\r\n              padding: '20px',\r\n              textAlign: 'center',\r\n              color: '#888',\r\n              fontSize: '14px',\r\n            }}>\r\n              No options found matching \"{searchTerm}\"\r\n            </div>\r\n          ) : (\r\n            filteredOptions.map(([key, value]) => (\r\n              <OptionRow key={key} optionKey={key} value={value} />\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* Close button */}\r\n        <div style={{\r\n          position: 'sticky',\r\n          bottom: 0,\r\n          paddingTop: '8px',\r\n          backgroundColor: '#1a1a1a',\r\n        }}>\r\n          <Button onClick={hideCurrentModal} style={{ width: '100%' }}>\r\n            Close\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Screen>\r\n  )\r\n}\r\n","import { useSnapshot } from 'valtio'\r\nimport { noCase } from 'change-case'\r\nimport { titleCase } from 'title-case'\r\nimport { useMemo } from 'react'\r\nimport { disabledSettings, options, qsOptions } from '../optionsStorage'\r\nimport { hideAllModals, miscUiState } from '../globalState'\r\nimport { reloadChunksAction } from '../controls'\r\nimport Button from './Button'\r\nimport Slider from './Slider'\r\nimport Screen from './Screen'\r\nimport { showOptionsModal } from './SelectOption'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport { reconnectReload } from './AppStatusProvider'\r\nimport { showAllSettingsEditor } from './AllSettingsEditor'\r\n\r\ntype GeneralItem<T extends string | number | boolean> = {\r\n  id?: string\r\n  text?: string,\r\n  disabledReason?: string,\r\n  disabledDuringGame?: boolean\r\n  tooltip?: string\r\n  // description?: string\r\n  enableWarning?: string\r\n  requiresRestart?: boolean\r\n  requiresChunksReload?: boolean\r\n  values?: Array<T | [T, string]>\r\n  disableIf?: [option: keyof typeof options, value: any]\r\n}\r\n\r\nexport type OptionMeta<T = any> = GeneralItem<T & string> & ({\r\n  type: 'toggle',\r\n} | {\r\n  type: 'slider'\r\n  min?: number,\r\n  max?: number,\r\n  valueText?: (value: number) => string,\r\n  unit?: string,\r\n  delayApply?: boolean,\r\n} | {\r\n  type: 'element'\r\n  render: () => React.ReactNode,\r\n})\r\n\r\n// todo not reactive\r\nconst isLocked = (item: GeneralItem<any>) => {\r\n  return disabledSettings.value.has(item.id!)\r\n}\r\n\r\nconst useCommonComponentsProps = (item: OptionMeta) => {\r\n  let disabledBecauseOfSetting = false\r\n\r\n  if (item.disableIf) {\r\n    // okay to use hook conditionally as disableIf must be a constant\r\n    const disableIfSetting = useSnapshot(options)[item.disableIf[0]]\r\n    disabledBecauseOfSetting = disableIfSetting === item.disableIf[1]\r\n  }\r\n\r\n  return {\r\n    disabledBecauseOfSetting\r\n  }\r\n}\r\n\r\nconst ignoreReloadWarningsCache = new Set<string>()\r\n\r\nexport const OptionButton = ({ item, onClick, valueText, cacheKey }: {\r\n  item: Extract<OptionMeta, { type: 'toggle' }>,\r\n  onClick?: () => void,\r\n  valueText?: string,\r\n  cacheKey?: string,\r\n}) => {\r\n  const { disabledBecauseOfSetting } = useCommonComponentsProps(item)\r\n\r\n  const optionValue = useSnapshot(options)[item.id!]\r\n\r\n  const valuesTitlesMap = useMemo(() => {\r\n    if (!item.values) {\r\n      return {\r\n        // true: <span style={{ color: 'lime' }}>ON</span>,\r\n        // false: <span style={{ color: 'red' }}>OFF</span>,\r\n        true: 'ON',\r\n        false: 'OFF',\r\n      }\r\n    }\r\n    return Object.fromEntries(item.values.map((value) => {\r\n      if (typeof value === 'string') {\r\n        return [value, titleCase(noCase(value))]\r\n      } else {\r\n        return [value[0], value[1]]\r\n      }\r\n    }))\r\n  }, [item.values])\r\n\r\n  let { disabledReason } = item\r\n  if (disabledBecauseOfSetting) disabledReason = `Disabled because ${item.disableIf![0]} is ${item.disableIf![1]}`\r\n\r\n  return <Button\r\n    data-setting={item.id}\r\n    label={`${translate(item.text)}: ${translate(valueText ?? valuesTitlesMap[optionValue])}`}\r\n    onClick={async (event) => {\r\n      if (disabledReason) {\r\n        await showOptionsModal(`${translate('The option is not available')}: ${disabledReason}`, [])\r\n        return\r\n      }\r\n      if (item.enableWarning && !options[item.id!]) {\r\n        const result = await showOptionsModal(item.enableWarning, ['Enable'])\r\n        if (!result) return\r\n      }\r\n      onClick?.()\r\n      if (item.id) {\r\n        const { values } = item\r\n        if (values) {\r\n          const getOptionValue = (arrItem) => {\r\n            if (typeof arrItem === 'string') {\r\n              return arrItem\r\n            } else {\r\n              return arrItem[0]\r\n            }\r\n          }\r\n          const currentIndex = values.findIndex((value) => {\r\n            return getOptionValue(value) === optionValue\r\n          })\r\n          if (currentIndex === -1) {\r\n            options[item.id] = getOptionValue(values[0])\r\n          } else {\r\n            const nextIndex = event.shiftKey\r\n              ? (currentIndex - 1 + values.length) % values.length\r\n              : (currentIndex + 1) % values.length\r\n            options[item.id] = getOptionValue(values[nextIndex])\r\n          }\r\n        } else {\r\n          options[item.id] = !options[item.id]\r\n        }\r\n      }\r\n\r\n      const toCacheKey = cacheKey ?? item.id ?? ''\r\n      if (toCacheKey && !ignoreReloadWarningsCache.has(toCacheKey)) {\r\n        ignoreReloadWarningsCache.add(toCacheKey)\r\n\r\n        if (item.requiresRestart) {\r\n          const result = await showOptionsModal(translate('The option requires a restart to take effect'), ['Restart', 'I will do it later'], {\r\n            cancel: false,\r\n          })\r\n          if (result) {\r\n            reconnectReload()\r\n          }\r\n        }\r\n        if (item.requiresChunksReload) {\r\n          const result = await showOptionsModal(translate('The option requires a chunks reload to take effect'), ['Reload', 'I will do it later'], {\r\n            cancel: false,\r\n          })\r\n          if (result) {\r\n            reloadChunksAction()\r\n          }\r\n        }\r\n      }\r\n    }}\r\n    title={disabledReason ? `${disabledReason} | ${item.tooltip}` : item.tooltip}\r\n    disabled={disabledBecauseOfSetting || !!item.disabledReason || isLocked(item)}\r\n    style={{\r\n      width: 150,\r\n    }}\r\n  />\r\n}\r\n\r\nexport const OptionSlider = ({\r\n  item,\r\n  onChange,\r\n  valueOverride\r\n}: {\r\n  item: Extract<OptionMeta, { type: 'slider' }>\r\n  onChange?: (value: number) => void\r\n  valueOverride?: number\r\n}) => {\r\n  const { disabledBecauseOfSetting } = useCommonComponentsProps(item)\r\n\r\n  const optionValue = useSnapshot(options)[item.id!]\r\n\r\n  const valueDisplay = useMemo(() => {\r\n    if (item.valueText) return item.valueText(optionValue)\r\n    return undefined // default display\r\n  }, [optionValue])\r\n\r\n  return (\r\n    <Slider\r\n      label={item.text!}\r\n      value={valueOverride ?? options[item.id!]}\r\n      data-setting={item.id}\r\n      disabledReason={isLocked(item) ? 'qs' : disabledBecauseOfSetting ? `Disabled because ${item.disableIf![0]} is ${item.disableIf![1]}` : item.disabledReason}\r\n      min={item.min}\r\n      max={item.max}\r\n      unit={item.unit}\r\n      valueDisplay={valueDisplay}\r\n      updateOnDragEnd={item.delayApply}\r\n      updateValue={(value) => {\r\n        options[item.id!] = value\r\n        onChange?.(value)\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nconst OptionElement = ({ item }: { item: Extract<OptionMeta, { type: 'element' }> }) => {\r\n  return item.render()\r\n}\r\n\r\nconst RenderOption = ({ item }: { item: OptionMeta }) => {\r\n  const { gameLoaded } = useSnapshot(miscUiState)\r\n  if (item.id) {\r\n    item.text ??= titleCase(noCase(item.id))\r\n  }\r\n  if (item.disabledDuringGame && gameLoaded) {\r\n    item.disabledReason = 'Cannot be changed during game'\r\n  }\r\n\r\n  let baseElement = null as React.ReactNode | null\r\n  if (item.type === 'toggle') baseElement = <OptionButton item={item} />\r\n  if (item.type === 'slider') baseElement = <OptionSlider item={item} />\r\n  if (item.type === 'element') baseElement = <OptionElement item={item} />\r\n  return baseElement\r\n  // if (!item.description && item.type === 'element') return baseElement\r\n\r\n  // return <div>\r\n  //   {baseElement}\r\n  //   {item.description && <div style={{ fontSize: 9, color: 'gray' }}>{item.description}</div>}\r\n  // </div>\r\n}\r\n\r\ninterface Props {\r\n  readonly items: OptionMeta[]\r\n  title: string\r\n  backButtonAction?: () => void\r\n}\r\n\r\nexport default ({ items, title, backButtonAction }: Props) => {\r\n\r\n  return <Screen\r\n    title={title}\r\n  >\r\n    <div className='screen-items'>\r\n      <div style={{ position: 'fixed', marginLeft: '-30px', display: 'flex', flexDirection: 'column', gap: 1, }}>\r\n        <Button icon={pixelartIcons['close']} onClick={hideAllModals} style={{ color: '#ff5d5d', }} />\r\n        <Button icon={pixelartIcons['chevron-left']} onClick={backButtonAction} style={{ color: 'yellow', }} />\r\n        <Button icon={pixelartIcons['search']} onClick={showAllSettingsEditor} style={{ color: '#4caf50', }} title=\"Search all settings\" />\r\n      </div>\r\n\r\n      {items.map((element, i) => {\r\n        // make sure its unique!\r\n        return <RenderOption key={element.id ?? `${title}-${i}`} item={element} />\r\n      })}\r\n    </div>\r\n    {backButtonAction && <Button onClick={() => backButtonAction()}>Back</Button>}\r\n  </Screen>\r\n}\r\n","/* eslint-disable no-await-in-loop */\r\nimport { openDB } from 'idb'\r\nimport * as React from 'react'\r\nimport * as valtio from 'valtio'\r\nimport * as valtioUtils from 'valtio/utils'\r\nimport { gt } from 'semver'\r\nimport { proxy } from 'valtio'\r\nimport { options } from './optionsStorage'\r\nimport { appStorage } from './react/appStorageProvider'\r\nimport { showInputsModal, showOptionsModal } from './react/SelectOption'\r\nimport { ProgressReporter } from './core/progressReporter'\r\nimport { showNotification } from './react/NotificationProvider'\r\n\r\nlet sillyProtection = false\r\nconst protectRuntime = () => {\r\n  if (sillyProtection) return\r\n  sillyProtection = true\r\n  const sensetiveKeys = new Set(['authenticatedAccounts', 'serversList', 'username'])\r\n  const proxy = new Proxy(window.localStorage, {\r\n    get (target, prop) {\r\n      if (typeof prop === 'string') {\r\n        if (sensetiveKeys.has(prop)) {\r\n          console.warn(`Access to sensitive key \"${prop}\" was blocked`)\r\n          return null\r\n        }\r\n        if (prop === 'getItem') {\r\n          return (key: string) => {\r\n            if (sensetiveKeys.has(key)) {\r\n              console.warn(`Access to sensitive key \"${key}\" via getItem was blocked`)\r\n              return null\r\n            }\r\n            return target.getItem(key)\r\n          }\r\n        }\r\n        if (prop === 'setItem') {\r\n          return (key: string, value: string) => {\r\n            if (sensetiveKeys.has(key)) {\r\n              console.warn(`Attempt to set sensitive key \"${key}\" via setItem was blocked`)\r\n              return\r\n            }\r\n            target.setItem(key, value)\r\n          }\r\n        }\r\n        if (prop === 'removeItem') {\r\n          return (key: string) => {\r\n            if (sensetiveKeys.has(key)) {\r\n              console.warn(`Attempt to delete sensitive key \"${key}\" via removeItem was blocked`)\r\n              return\r\n            }\r\n            target.removeItem(key)\r\n          }\r\n        }\r\n        if (prop === 'clear') {\r\n          console.warn('Attempt to clear localStorage was blocked')\r\n          return () => {}\r\n        }\r\n      }\r\n      return Reflect.get(target, prop)\r\n    },\r\n    set (target, prop, value) {\r\n      if (typeof prop === 'string' && sensetiveKeys.has(prop)) {\r\n        console.warn(`Attempt to set sensitive key \"${prop}\" was blocked`)\r\n        return false\r\n      }\r\n      return Reflect.set(target, prop, value)\r\n    },\r\n    deleteProperty (target, prop) {\r\n      if (typeof prop === 'string' && sensetiveKeys.has(prop)) {\r\n        console.warn(`Attempt to delete sensitive key \"${prop}\" was blocked`)\r\n        return false\r\n      }\r\n      return Reflect.deleteProperty(target, prop)\r\n    }\r\n  })\r\n  Object.defineProperty(window, 'localStorage', {\r\n    value: proxy,\r\n    writable: false,\r\n    configurable: false,\r\n  })\r\n}\r\n\r\n// #region Database\r\nconst dbPromise = openDB('mods-db', 1, {\r\n  upgrade (db) {\r\n    db.createObjectStore('mods', {\r\n      keyPath: 'name',\r\n    })\r\n    db.createObjectStore('repositories', {\r\n      keyPath: 'url',\r\n    })\r\n  },\r\n})\r\n\r\nexport interface ModSetting {\r\n  label?: string\r\n  type: 'toggle' | 'choice' | 'input' | 'slider'\r\n  hidden?: boolean\r\n  values?: string[]\r\n  inputType?: string\r\n  hint?: string\r\n  default?: any\r\n}\r\n\r\nexport interface ModSettingsDict {\r\n  [settingId: string]: ModSetting\r\n}\r\n\r\nexport interface ModAction {\r\n  method?: string\r\n  label?: string\r\n  /** @default false */\r\n  gameGlobal?: boolean\r\n  /** @default false */\r\n  onlyForeground?: boolean\r\n}\r\n\r\n// mcraft-repo.json\r\nexport interface McraftRepoFile {\r\n  packages: ClientModDefinition[]\r\n  /** @default true */\r\n  prefix?: string | boolean\r\n  name?: string // display name\r\n  description?: string\r\n  mirrorUrls?: string[]\r\n  autoUpdateOverride?: boolean\r\n  lastUpdated?: number\r\n}\r\nexport interface Repository extends McraftRepoFile {\r\n  url: string\r\n}\r\n\r\nexport interface ClientMod {\r\n  name: string; // unique identifier like owner.name\r\n  version: string\r\n  enabled?: boolean\r\n\r\n  scriptMainUnstable?: string;\r\n  serverPlugin?: string\r\n  // serverPlugins?: string[]\r\n  // mesherThread?: string\r\n  stylesGlobal?: string\r\n  threeJsBackend?: string // three.js\r\n  // stylesLocal?: string\r\n\r\n  requiresNetwork?: boolean\r\n  fullyOffline?: boolean\r\n  description?: string\r\n  author?: string\r\n  section?: string\r\n  autoUpdateOverride?: boolean\r\n  lastUpdated?: number\r\n  wasModifiedLocally?: boolean\r\n  // todo depends, hashsum\r\n\r\n  settings?: ModSettingsDict\r\n  actionsMain?: Record<string, ModAction>\r\n}\r\n\r\nconst cleanupFetchedModData = (mod: ClientModDefinition | Record<string, any>) => {\r\n  delete mod['enabled']\r\n  delete mod['repo']\r\n  delete mod['autoUpdateOverride']\r\n  delete mod['lastUpdated']\r\n  delete mod['wasModifiedLocally']\r\n  return mod\r\n}\r\n\r\nexport type ClientModDefinition = Omit<ClientMod, 'enabled' | 'wasModifiedLocally'> & {\r\n  scriptMainUnstable?: boolean\r\n  stylesGlobal?: boolean\r\n  serverPlugin?: boolean\r\n  threeJsBackend?: boolean\r\n}\r\n\r\nexport async function saveClientModData (data: ClientMod) {\r\n  const db = await dbPromise\r\n  data.lastUpdated = Date.now()\r\n  await db.put('mods', data)\r\n  modsReactiveUpdater.counter++\r\n}\r\n\r\nasync function getPlugin (name: string) {\r\n  const db = await dbPromise\r\n  return db.get('mods', name) as Promise<ClientMod | undefined>\r\n}\r\n\r\nexport async function getAllMods () {\r\n  const db = await dbPromise\r\n  return db.getAll('mods') as Promise<ClientMod[]>\r\n}\r\n\r\nasync function deletePlugin (name) {\r\n  const db = await dbPromise\r\n  await db.delete('mods', name)\r\n  modsReactiveUpdater.counter++\r\n}\r\n\r\nasync function removeAllMods () {\r\n  const db = await dbPromise\r\n  await db.clear('mods')\r\n  modsReactiveUpdater.counter++\r\n}\r\n\r\n// ---\r\n\r\nasync function saveRepository (data: Repository) {\r\n  const db = await dbPromise\r\n  data.lastUpdated = Date.now()\r\n  await db.put('repositories', data)\r\n}\r\n\r\nasync function getRepository (url: string) {\r\n  const db = await dbPromise\r\n  return db.get('repositories', url) as Promise<Repository | undefined>\r\n}\r\n\r\nasync function getAllRepositories () {\r\n  const db = await dbPromise\r\n  return db.getAll('repositories') as Promise<Repository[]>\r\n}\r\nwindow.getAllRepositories = getAllRepositories\r\n\r\nasync function deleteRepository (url) {\r\n  const db = await dbPromise\r\n  await db.delete('repositories', url)\r\n}\r\n\r\n// ---\r\n\r\n// #endregion\r\n\r\nwindow.mcraft = {\r\n  version: process.env.RELEASE_TAG,\r\n  build: process.env.BUILD_VERSION,\r\n  ui: {},\r\n  React,\r\n  valtio: {\r\n    ...valtio,\r\n    ...valtioUtils,\r\n  },\r\n  // openDB\r\n}\r\n\r\nconst activateMod = async (mod: ClientMod, reason: string) => {\r\n  if (mod.enabled === false) return false\r\n  protectRuntime()\r\n  console.debug(`Activating mod ${mod.name} (${reason})...`)\r\n  window.loadedMods ??= {}\r\n  if (window.loadedMods[mod.name]) {\r\n    console.warn(`Mod is ${mod.name} already loaded, skipping activation...`)\r\n    return false\r\n  }\r\n  if (mod.stylesGlobal) {\r\n    const style = document.createElement('style')\r\n    style.textContent = mod.stylesGlobal\r\n    style.id = `mod-${mod.name}`\r\n    document.head.appendChild(style)\r\n  }\r\n  if (mod.scriptMainUnstable) {\r\n    const blob = new Blob([mod.scriptMainUnstable], { type: 'text/javascript' })\r\n    const url = URL.createObjectURL(blob)\r\n    // eslint-disable-next-line no-useless-catch\r\n    try {\r\n      const module = await import(/* webpackIgnore: true */ url)\r\n      module.default?.(structuredClone(mod), { settings: getModSettingsProxy(mod) })\r\n      window.loadedMods[mod.name] ??= {}\r\n      window.loadedMods[mod.name].mainUnstableModule = module\r\n    } catch (e) {\r\n      throw e\r\n    }\r\n    URL.revokeObjectURL(url)\r\n  }\r\n  if (mod.threeJsBackend) {\r\n    const blob = new Blob([mod.threeJsBackend], { type: 'text/javascript' })\r\n    const url = URL.createObjectURL(blob)\r\n    // eslint-disable-next-line no-useless-catch\r\n    try {\r\n      const module = await import(/* webpackIgnore: true */ url)\r\n      // todo\r\n      window.loadedMods[mod.name] ??= {}\r\n      // for accessing global world var\r\n      window.loadedMods[mod.name].threeJsBackendModule = module\r\n    } catch (e) {\r\n      throw e\r\n    }\r\n    URL.revokeObjectURL(url)\r\n  }\r\n  mod.enabled = true\r\n  return true\r\n}\r\n\r\nexport const appStartup = async () => {\r\n  void checkModsUpdates()\r\n\r\n  const mods = await getAllMods()\r\n  for (const mod of mods) {\r\n    await activateMod(mod, 'autostart').catch(e => {\r\n      modsErrors[mod.name] ??= []\r\n      modsErrors[mod.name].push(`startup: ${String(e)}`)\r\n      console.error(`Error activating mod on startup ${mod.name}:`, e)\r\n    })\r\n  }\r\n}\r\n\r\nexport const modsUpdateStatus = proxy({} as Record<string, [string, string]>)\r\nexport const modsWaitingReloadStatus = proxy({} as Record<string, boolean>)\r\nexport const modsErrors = proxy({} as Record<string, string[]>)\r\n\r\nconst normalizeRepoUrl = (url: string) => {\r\n  if (url.startsWith('https://')) return url\r\n  if (url.startsWith('http://')) return url\r\n  if (url.startsWith('//')) return `https:${url}`\r\n  return `https://raw.githubusercontent.com/${url}/master`\r\n}\r\n\r\nconst installOrUpdateMod = async (repo: Repository, mod: ClientModDefinition, activate = true, progress?: ProgressReporter) => {\r\n  // eslint-disable-next-line no-useless-catch\r\n  try {\r\n    const fetchData = async (urls: string[]) => {\r\n      const errored = [] as string[]\r\n      // eslint-disable-next-line no-unreachable-loop\r\n      for (const urlTemplate of urls) {\r\n        const modNameOnly = mod.name.split('.').pop()\r\n        const modFolder = repo.prefix === false ? modNameOnly : typeof repo.prefix === 'string' ? `${repo.prefix}/${modNameOnly}` : mod.name\r\n        const url = new URL(`${modFolder}/${urlTemplate}`, normalizeRepoUrl(repo.url).replace(/\\/$/, '') + '/').href\r\n        // eslint-disable-next-line no-useless-catch\r\n        try {\r\n          const response = await fetch(url)\r\n          if (!response.ok) throw new Error(`Failed to fetch ${url}: ${response.status} ${response.statusText}`)\r\n          return await response.text()\r\n        } catch (e) {\r\n          // errored.push(String(e))\r\n          throw e\r\n        }\r\n      }\r\n      console.warn(`[${mod.name}] Error installing component of ${urls[0]}: ${errored.join(', ')}`)\r\n      return undefined\r\n    }\r\n    if (mod.stylesGlobal) {\r\n      await progress?.executeWithMessage(\r\n        `Downloading ${mod.name} styles`,\r\n        async () => {\r\n          mod.stylesGlobal = await fetchData(['global.css']) as any\r\n        }\r\n      )\r\n    }\r\n    if (mod.scriptMainUnstable) {\r\n      await progress?.executeWithMessage(\r\n        `Downloading ${mod.name} script`,\r\n        async () => {\r\n          mod.scriptMainUnstable = await fetchData(['mainUnstable.js']) as any\r\n        }\r\n      )\r\n    }\r\n    if (mod.threeJsBackend) {\r\n      await progress?.executeWithMessage(\r\n        `Downloading ${mod.name} three.js backend`,\r\n        async () => {\r\n          mod.threeJsBackend = await fetchData(['three.js']) as any\r\n        }\r\n      )\r\n    }\r\n    if (mod.serverPlugin) {\r\n      if (mod.name.endsWith('.disabled')) throw new Error(`Mod name ${mod.name} can't end with .disabled`)\r\n      await progress?.executeWithMessage(\r\n        `Downloading ${mod.name} server plugin`,\r\n        async () => {\r\n          mod.serverPlugin = await fetchData(['serverPlugin.js']) as any\r\n        }\r\n      )\r\n    }\r\n    if (activate) {\r\n      // todo try to de-activate mod if it's already loaded\r\n      if (window.loadedMods?.[mod.name]) {\r\n        modsWaitingReloadStatus[mod.name] = true\r\n      } else {\r\n        await activateMod(mod as ClientMod, 'install')\r\n      }\r\n    }\r\n    await saveClientModData(mod as ClientMod)\r\n    delete modsUpdateStatus[mod.name]\r\n  } catch (e) {\r\n    // console.error(`Error installing mod ${mod.name}:`, e)\r\n    throw e\r\n  }\r\n}\r\n\r\nconst checkRepositoryUpdates = async (repo: Repository) => {\r\n  for (const mod of repo.packages) {\r\n\r\n    const modExisting = await getPlugin(mod.name)\r\n    if (modExisting?.version && gt(mod.version, modExisting.version)) {\r\n      modsUpdateStatus[mod.name] = [modExisting.version, mod.version]\r\n      if (options.modsAutoUpdate === 'always' && (!repo.autoUpdateOverride && !modExisting.autoUpdateOverride)) {\r\n        void installOrUpdateMod(repo, mod).catch(e => {\r\n          console.error(`Error updating mod ${mod.name}:`, e)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport const fetchRepository = async (urlOriginal: string, url: string, hasMirrors = false) => {\r\n  const fetchUrl = normalizeRepoUrl(url).replace(/\\/$/, '') + '/mcraft-repo.json'\r\n  try {\r\n    const response = await fetch(fetchUrl).then(async res => res.json())\r\n    if (!response.packages) throw new Error(`No packages field in the response json of the repository: ${fetchUrl}`)\r\n    response.autoUpdateOverride = (await getRepository(urlOriginal))?.autoUpdateOverride\r\n    response.url = urlOriginal\r\n    void saveRepository(response)\r\n    modsReactiveUpdater.counter++\r\n    return true\r\n  } catch (e) {\r\n    console.warn(`Error fetching repository (trying other mirrors) ${url}:`, e)\r\n    return false\r\n  }\r\n}\r\n\r\nexport const fetchAllRepositories = async () => {\r\n  const repositories = await getAllRepositories()\r\n  await Promise.all(repositories.map(async (repo) => {\r\n    const allUrls = [repo.url, ...(repo.mirrorUrls || [])]\r\n    for (const [i, url] of allUrls.entries()) {\r\n      const isLast = i === allUrls.length - 1\r\n\r\n      if (await fetchRepository(repo.url, url, !isLast)) break\r\n    }\r\n  }))\r\n  appStorage.modsAutoUpdateLastCheck = Date.now()\r\n}\r\n\r\nconst checkModsUpdates = async () => {\r\n  await autoRefreshModRepositories()\r\n  for (const repo of await getAllRepositories()) {\r\n\r\n    await checkRepositoryUpdates(repo)\r\n  }\r\n}\r\n\r\nconst autoRefreshModRepositories = async () => {\r\n  if (options.modsAutoUpdate === 'never') return\r\n  const lastCheck = appStorage.modsAutoUpdateLastCheck\r\n  if (lastCheck && Date.now() - lastCheck < 1000 * 60 * 60 * options.modsUpdatePeriodCheck) return\r\n  await fetchAllRepositories()\r\n  // todo think of not updating check timestamp on offline access\r\n}\r\n\r\nexport const installModByName = async (repoUrl: string, name: string, progress?: ProgressReporter) => {\r\n  progress?.beginStage('main', `Installing ${name}`)\r\n  const repo = await getRepository(repoUrl)\r\n  if (!repo) throw new Error(`Repository ${repoUrl} not found`)\r\n  const mod = repo.packages.find(m => m.name === name)\r\n  if (!mod) throw new Error(`Mod ${name} not found in repository ${repoUrl}`)\r\n  await installOrUpdateMod(repo, mod, undefined, progress)\r\n  progress?.endStage('main')\r\n}\r\n\r\nexport const uninstallModAction = async (name: string) => {\r\n  const choice = await showOptionsModal(`Uninstall mod ${name}?`, ['Yes'])\r\n  if (!choice) return\r\n  await deletePlugin(name)\r\n  window.loadedMods ??= {}\r\n  if (window.loadedMods[name]) {\r\n    // window.loadedMods[name].default?.(null)\r\n    delete window.loadedMods[name]\r\n    modsWaitingReloadStatus[name] = true\r\n  }\r\n  // Clear any errors associated with the mod\r\n  delete modsErrors[name]\r\n}\r\n\r\nexport const setEnabledModAction = async (name: string, newEnabled: boolean) => {\r\n  const mod = await getPlugin(name)\r\n  if (!mod) throw new Error(`Mod ${name} not found`)\r\n  if (newEnabled) {\r\n    mod.enabled = true\r\n    if (!window.loadedMods?.[mod.name]) {\r\n      await activateMod(mod, 'manual')\r\n    }\r\n  } else {\r\n    // todo deactivate mod\r\n    mod.enabled = false\r\n    if (window.loadedMods?.[mod.name]) {\r\n      if (window.loadedMods[mod.name]?.threeJsBackendModule) {\r\n        window.loadedMods[mod.name].threeJsBackendModule.deactivate()\r\n        delete window.loadedMods[mod.name].threeJsBackendModule\r\n      }\r\n      if (window.loadedMods[mod.name]?.mainUnstableModule) {\r\n        window.loadedMods[mod.name].mainUnstableModule.deactivate()\r\n        delete window.loadedMods[mod.name].mainUnstableModule\r\n      }\r\n\r\n      if (Object.keys(window.loadedMods[mod.name]).length === 0) {\r\n        delete window.loadedMods[mod.name]\r\n      }\r\n    }\r\n  }\r\n  await saveClientModData(mod)\r\n}\r\n\r\nexport const modsReactiveUpdater = proxy({\r\n  counter: 0\r\n})\r\n\r\nexport const getAllModsDisplayList = async () => {\r\n  const repos = await getAllRepositories()\r\n  const installedMods = await getAllMods()\r\n  const modsWithoutRepos = installedMods.filter(mod => !repos.some(repo => repo.packages.some(m => m.name === mod.name)))\r\n  const mapMods = (mapMods: ClientMod[]) => mapMods.map(mod => ({\r\n    ...mod,\r\n    installed: installedMods.find(m => m.name === mod.name),\r\n    activated: !!window.loadedMods?.[mod.name],\r\n    installedVersion: installedMods.find(m => m.name === mod.name)?.version,\r\n    canBeActivated: mod.scriptMainUnstable || mod.stylesGlobal,\r\n  }))\r\n  return {\r\n    repos: repos.map(repo => ({\r\n      ...repo,\r\n      packages: mapMods(repo.packages as ClientMod[]),\r\n    })),\r\n    modsWithoutRepos: mapMods(modsWithoutRepos),\r\n  }\r\n}\r\n\r\nexport const removeRepositoryAction = async (url: string) => {\r\n  // todo remove mods\r\n  const choice = await showOptionsModal('Remove repository? Installed mods wont be automatically removed.', ['Yes'])\r\n  if (!choice) return\r\n  await deleteRepository(url)\r\n  modsReactiveUpdater.counter++\r\n}\r\n\r\nexport const selectAndRemoveRepository = async () => {\r\n  const repos = await getAllRepositories()\r\n  const choice = await showOptionsModal('Select repository to remove', repos.map(repo => repo.url))\r\n  if (!choice) return\r\n  await removeRepositoryAction(choice)\r\n}\r\n\r\nexport const addRepositoryAction = async () => {\r\n  const { url } = await showInputsModal('Add repository', {\r\n    url: {\r\n      type: 'text',\r\n      label: 'Repository URL or slug',\r\n      placeholder: 'github-owner/repo-name',\r\n    },\r\n  })\r\n  if (!url) return\r\n  await fetchRepository(url, url)\r\n}\r\n\r\nexport const getServerPlugin = async (plugin: string) => {\r\n  const mod = await getPlugin(plugin)\r\n  if (!mod) return null\r\n  if (mod.serverPlugin) {\r\n    return {\r\n      content: mod.serverPlugin,\r\n      version: mod.version\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nexport const getAvailableServerPlugins = async () => {\r\n  const mods = await getAllMods()\r\n  return mods.filter(mod => mod.serverPlugin)\r\n}\r\n\r\nwindow.inspectInstalledMods = getAllMods\r\n\r\ntype ModifiableField = {\r\n  field: string\r\n  label: string\r\n  language: string\r\n  getContent?: () => string\r\n}\r\n\r\n// ---\r\n\r\nexport const getAllModsModifiableFields = () => {\r\n  const fields: ModifiableField[] = [\r\n    {\r\n      field: 'scriptMainUnstable',\r\n      label: 'Main Thread Script (unstable)',\r\n      language: 'js'\r\n    },\r\n    {\r\n      field: 'stylesGlobal',\r\n      label: 'Global CSS Styles',\r\n      language: 'css'\r\n    },\r\n    {\r\n      field: 'threeJsBackend',\r\n      label: 'Three.js Renderer Backend Thread',\r\n      language: 'js'\r\n    },\r\n    {\r\n      field: 'serverPlugin',\r\n      label: 'Built-in server plugin',\r\n      language: 'js'\r\n    }\r\n  ]\r\n  return fields\r\n}\r\n\r\nexport const getModModifiableFields = (mod: ClientMod): ModifiableField[] => {\r\n  return getAllModsModifiableFields().filter(field => mod[field.field])\r\n}\r\n\r\nexport const getModSettingsProxy = (mod: ClientMod) => {\r\n  if (!mod.settings) return valtio.proxy({})\r\n\r\n  const proxy = valtio.proxy({})\r\n  for (const [key, setting] of Object.entries(mod.settings)) {\r\n    proxy[key] = options[`mod-${mod.name}-${key}`] ?? setting.default\r\n  }\r\n\r\n  valtio.subscribe(proxy, (ops) => {\r\n    for (const op of ops) {\r\n      const [type, path, value] = op\r\n      const key = path[0] as string\r\n      options[`mod-${mod.name}-${key}`] = value\r\n    }\r\n  })\r\n\r\n  return proxy\r\n}\r\n\r\nexport const callMethodAction = async (modName: string, type: 'main', method: string) => {\r\n  try {\r\n    const mod = window.loadedMods?.[modName]\r\n    await mod[method]()\r\n  } catch (err) {\r\n    showNotification(`Failed to execute ${method}`, `Problem in ${type} js script of ${modName}`, true)\r\n  }\r\n}\r\n","import { appStorage } from '../react/appStorageProvider'\r\nimport { getChangedSettings, options } from '../optionsStorage'\r\nimport { customKeymaps } from '../controls'\r\nimport { showInputsModal } from '../react/SelectOption'\r\n\r\ninterface ExportedFile {\r\n  _about: string\r\n  options?: Record<string, any>\r\n  keybindings?: Record<string, any>\r\n  servers?: any[]\r\n  username?: string\r\n  proxy?: string\r\n  proxies?: string[]\r\n  accountTokens?: any[]\r\n}\r\n\r\nexport const importData = async () => {\r\n  try {\r\n    const input = document.createElement('input')\r\n    input.type = 'file'\r\n    input.accept = '.json'\r\n    input.click()\r\n\r\n    const file = await new Promise<File>((resolve) => {\r\n      input.onchange = () => {\r\n        if (!input.files?.[0]) return\r\n        resolve(input.files[0])\r\n      }\r\n    })\r\n\r\n    const text = await file.text()\r\n    const data = JSON.parse(text)\r\n\r\n    if (!data._about?.includes('Minecraft Web Client')) {\r\n      const doContinue = confirm('This file does not appear to be a Minecraft Web Client profile. Continue anyway?')\r\n      if (!doContinue) return\r\n    }\r\n\r\n    // Build available data types for selection\r\n    const availableData: Record<keyof Omit<ExportedFile, '_about'>, { present: boolean, description: string }> = {\r\n      options: { present: !!data.options, description: 'Game settings and preferences' },\r\n      keybindings: { present: !!data.keybindings, description: 'Custom key mappings' },\r\n      servers: { present: !!data.servers, description: 'Saved server list' },\r\n      username: { present: !!data.username, description: 'Username' },\r\n      proxy: { present: !!data.proxy, description: 'Selected proxy server' },\r\n      proxies: { present: !!data.proxies, description: 'Global proxies list' },\r\n      accountTokens: { present: !!data.accountTokens, description: 'Account authentication tokens' },\r\n    }\r\n\r\n    // Filter to only present data types\r\n    const presentTypes = Object.fromEntries(Object.entries(availableData)\r\n      .filter(([_, info]) => info.present)\r\n      .map<any>(([key, info]) => [key, info]))\r\n\r\n    if (Object.keys(presentTypes).length === 0) {\r\n      alert('No compatible data found in the imported file.')\r\n      return\r\n    }\r\n\r\n    const importChoices = await showInputsModal('Select Data to Import', {\r\n      mergeData: {\r\n        type: 'checkbox',\r\n        label: 'Merge with existing data (uncheck to remove old data)',\r\n        defaultValue: true,\r\n      },\r\n      ...Object.fromEntries(Object.entries(presentTypes).map(([key, info]) => [key, {\r\n        type: 'checkbox',\r\n        label: info.description,\r\n        defaultValue: true,\r\n      }]))\r\n    }) as { mergeData: boolean } & Record<keyof ExportedFile, boolean>\r\n\r\n    if (!importChoices) return\r\n\r\n    const importedTypes: string[] = []\r\n    const shouldMerge = importChoices.mergeData\r\n\r\n    if (importChoices.options && data.options) {\r\n      if (shouldMerge) {\r\n        Object.assign(options, data.options)\r\n      } else {\r\n        for (const key of Object.keys(options)) {\r\n          if (key in data.options) {\r\n            options[key as any] = data.options[key]\r\n          }\r\n        }\r\n      }\r\n      importedTypes.push('settings')\r\n    }\r\n\r\n    if (importChoices.keybindings && data.keybindings) {\r\n      if (shouldMerge) {\r\n        Object.assign(customKeymaps, data.keybindings)\r\n      } else {\r\n        for (const key of Object.keys(customKeymaps)) delete customKeymaps[key]\r\n        Object.assign(customKeymaps, data.keybindings)\r\n      }\r\n      importedTypes.push('keybindings')\r\n    }\r\n\r\n    if (importChoices.servers && data.servers) {\r\n      if (shouldMerge && appStorage.serversList) {\r\n        // Merge by IP, update existing entries and add new ones\r\n        const existingIps = new Set(appStorage.serversList.map(s => s.ip))\r\n        const newServers = data.servers.filter(s => !existingIps.has(s.ip))\r\n        appStorage.serversList = [...appStorage.serversList, ...newServers]\r\n      } else {\r\n        appStorage.serversList = data.servers\r\n      }\r\n      importedTypes.push('servers')\r\n    }\r\n\r\n    if (importChoices.username && data.username) {\r\n      appStorage.username = data.username\r\n      importedTypes.push('username')\r\n    }\r\n\r\n    if ((importChoices.proxy && data.proxy) || (importChoices.proxies && data.proxies)) {\r\n      if (!appStorage.proxiesData) {\r\n        appStorage.proxiesData = { proxies: [], selected: '' }\r\n      }\r\n\r\n      if (importChoices.proxies && data.proxies) {\r\n        if (shouldMerge) {\r\n          // Merge unique proxies\r\n          const uniqueProxies = new Set([...appStorage.proxiesData.proxies, ...data.proxies])\r\n          appStorage.proxiesData.proxies = [...uniqueProxies]\r\n        } else {\r\n          appStorage.proxiesData.proxies = data.proxies\r\n        }\r\n        importedTypes.push('proxies list')\r\n      }\r\n\r\n      if (importChoices.proxy && data.proxy) {\r\n        appStorage.proxiesData.selected = data.proxy\r\n        importedTypes.push('selected proxy')\r\n      }\r\n    }\r\n\r\n    if (importChoices.accountTokens && data.accountTokens) {\r\n      if (shouldMerge && appStorage.authenticatedAccounts) {\r\n        // Merge by unique identifier (assuming accounts have some unique ID or username)\r\n        const existingAccounts = new Set(appStorage.authenticatedAccounts.map(a => a.username))\r\n        const newAccounts = data.accountTokens.filter(a => !existingAccounts.has(a.username))\r\n        appStorage.authenticatedAccounts = [...appStorage.authenticatedAccounts, ...newAccounts]\r\n      } else {\r\n        appStorage.authenticatedAccounts = data.accountTokens\r\n      }\r\n      importedTypes.push('account tokens')\r\n    }\r\n\r\n    alert(`Profile imported successfully! Imported data: ${importedTypes.join(', ')}.\\nYou may need to reload the page for some changes to take effect.`)\r\n  } catch (err) {\r\n    console.error('Failed to import profile:', err)\r\n    alert('Failed to import profile: ' + (err.message || err))\r\n  }\r\n}\r\n\r\nexport const exportData = async () => {\r\n  const data = await showInputsModal('Export Profile', {\r\n    profileName: {\r\n      type: 'text',\r\n    },\r\n    exportSettings: {\r\n      type: 'checkbox',\r\n      defaultValue: true,\r\n    },\r\n    exportKeybindings: {\r\n      type: 'checkbox',\r\n      defaultValue: true,\r\n    },\r\n    exportServers: {\r\n      type: 'checkbox',\r\n      defaultValue: true,\r\n    },\r\n    saveUsernameAndProxy: {\r\n      type: 'checkbox',\r\n      defaultValue: true,\r\n    },\r\n    exportGlobalProxiesList: {\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n    },\r\n    exportAccountTokens: {\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n    },\r\n  })\r\n  const fileName = `${data.profileName ? `${data.profileName}-` : ''}web-client-profile.json`\r\n  const json: ExportedFile = {\r\n    _about: 'Minecraft Web Client (mcraft.fun) Profile',\r\n    ...data.exportSettings ? {\r\n      options: getChangedSettings(),\r\n    } : {},\r\n    ...data.exportKeybindings ? {\r\n      keybindings: customKeymaps,\r\n    } : {},\r\n    ...data.exportServers ? {\r\n      servers: appStorage.serversList,\r\n    } : {},\r\n    ...data.saveUsernameAndProxy ? {\r\n      username: appStorage.username,\r\n      proxy: appStorage.proxiesData?.selected,\r\n    } : {},\r\n    ...data.exportGlobalProxiesList ? {\r\n      proxies: appStorage.proxiesData?.proxies,\r\n    } : {},\r\n    ...data.exportAccountTokens ? {\r\n      accountTokens: appStorage.authenticatedAccounts,\r\n    } : {},\r\n  }\r\n  const blob = new Blob([JSON.stringify(json, null, 2)], { type: 'application/json' })\r\n  const url = URL.createObjectURL(blob)\r\n  const a = document.createElement('a')\r\n  a.href = url\r\n  a.download = fileName\r\n  a.click()\r\n  URL.revokeObjectURL(url)\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { openURL } from 'renderer/viewer/lib/simpleUtils'\r\nimport { noCase } from 'change-case'\r\nimport { versionToNumber } from 'mc-assets/dist/utils'\r\nimport { gameAdditionalState, miscUiState, openOptionsMenu, showModal } from './globalState'\r\nimport { AppOptions, getChangedSettings, options, resetOptions } from './optionsStorage'\r\nimport Button from './react/Button'\r\nimport { OptionMeta, OptionSlider } from './react/OptionsItems'\r\nimport Slider from './react/Slider'\r\nimport { getScreenRefreshRate } from './utils'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { openFilePicker, resetLocalStorage } from './browserfs'\r\nimport { completeResourcepackPackInstall, getResourcePackNames, resourcepackReload, resourcePackState, uninstallResourcePack } from './resourcePack'\r\nimport { downloadPacketsReplay, packetsRecordingState } from './packetsReplay/packetsReplayLegacy'\r\nimport { showInputsModal, showOptionsModal } from './react/SelectOption'\r\nimport { ClientMod, getAllMods, modsUpdateStatus } from './clientMods'\r\nimport supportedVersions from './supportedVersions.mjs'\r\nimport { getVersionAutoSelect } from './connect'\r\nimport { createNotificationProgressReporter } from './core/progressReporter'\r\nimport { customKeymaps } from './controls'\r\nimport { appStorage } from './react/appStorageProvider'\r\nimport { exportData, importData } from './core/importExport'\r\n\r\nexport const guiOptionsScheme: {\r\n  [t in OptionsGroupType]: Array<{ [K in keyof AppOptions]?: Partial<OptionMeta<AppOptions[K]>> } & { custom? }>\r\n} = {\r\n  render: [\r\n    {\r\n      custom () {\r\n        const frameLimitValue = useSnapshot(options).frameLimit\r\n        const [frameLimitMax, setFrameLimitMax] = useState(null as number | null)\r\n\r\n        return <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <Slider\r\n            style={{ width: 130 }}\r\n            label='Frame Limit'\r\n            disabledReason={frameLimitMax ? undefined : 'press lock button first'}\r\n            unit={frameLimitValue ? 'fps' : ''}\r\n            valueDisplay={frameLimitValue || 'VSync'}\r\n            value={frameLimitValue || frameLimitMax! + 1} min={20}\r\n            max={frameLimitMax! + 1} updateValue={(newVal) => {\r\n              options.frameLimit = newVal > frameLimitMax! ? false : newVal\r\n            }}\r\n          />\r\n          <Button\r\n            style={{ width: 20 }} icon='pixelarticons:lock-open' onClick={async () => {\r\n              const rate = await getScreenRefreshRate()\r\n              setFrameLimitMax(rate)\r\n            }}\r\n          />\r\n        </div>\r\n      }\r\n    },\r\n    {\r\n      gpuPreference: {\r\n        text: 'GPU Preference',\r\n        tooltip: 'You will need to reload the page for this to take effect.',\r\n        values: [['default', 'Auto'], ['high-performance', 'Dedicated'], ['low-power', 'Low Power']]\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Guide: Disable VSync' onClick={() => openURL('https://gist.github.com/zardoy/6e5ce377d2b4c1e322e660973da069cd')} inScreen />\r\n      },\r\n      backgroundRendering: {\r\n        text: 'Background FPS limit',\r\n        values: [\r\n          ['full', 'NO'],\r\n          ['5fps', '5 FPS'],\r\n          ['20fps', '20 FPS'],\r\n        ],\r\n      },\r\n      activeRenderer: {\r\n        text: 'Renderer',\r\n        values: [\r\n          ['threejs', 'Three.js (stable)'],\r\n        ],\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Experimental</Category>\r\n      },\r\n      dayCycleAndLighting: {\r\n        text: 'Day Cycle',\r\n      },\r\n      smoothLighting: {},\r\n      newVersionsLighting: {\r\n        text: 'Lighting in Newer Versions',\r\n      },\r\n      lowMemoryMode: {\r\n        text: 'Low Memory Mode',\r\n        enableWarning: 'Enabling it will make chunks load ~4x slower. When in the game, app needs to be reloaded to apply this setting.',\r\n      },\r\n      starfieldRendering: {},\r\n      renderEntities: {},\r\n      keepChunksDistance: {\r\n        max: 5,\r\n        unit: '',\r\n        tooltip: 'Additional distance to keep the chunks loading before unloading them by marking them as too far',\r\n      },\r\n      renderEars: {\r\n        tooltip: 'Enable rendering Deadmau5 ears for all players if their skin contains textures for it',\r\n      },\r\n      renderDebug: {\r\n        values: [\r\n          'advanced',\r\n          'basic',\r\n          'none'\r\n        ],\r\n      },\r\n      rendererPerfDebugOverlay: {\r\n        text: 'Performance Debug',\r\n      },\r\n      disableBlockEntityTextures: {\r\n        tooltip: 'Disables rendering of textures for block entities like signs, banners, heads, and maps',\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        const { _renderByChunks } = useSnapshot(options).rendererSharedOptions\r\n        return <Button\r\n          inScreen\r\n          label={`Batch Chunks Display ${_renderByChunks ? 'ON' : 'OFF'}`}\r\n          onClick={() => {\r\n            options.rendererSharedOptions._renderByChunks = !_renderByChunks\r\n          }}\r\n        />\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Resource Packs</Category>\r\n      },\r\n      serverResourcePacks: {\r\n        text: 'Download From Server',\r\n        values: [\r\n          'prompt',\r\n          'always',\r\n          'never'\r\n        ],\r\n      }\r\n    }\r\n  ],\r\n  main: [\r\n    {\r\n      fov: {\r\n        min: 30,\r\n        max: 110,\r\n        unit: '',\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        const sp = miscUiState.singleplayer || !miscUiState.gameLoaded\r\n        const id = sp ? 'renderDistance' : 'multiplayerRenderDistance' // cant be changed when settings are open\r\n        return <OptionSlider item={{\r\n          type: 'slider',\r\n          id,\r\n          text: 'Render Distance',\r\n          unit: '',\r\n          max: sp ? 16 : 12,\r\n          min: 1\r\n        }}\r\n        />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Render...' onClick={() => openOptionsMenu('render')} inScreen />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Interface...' onClick={() => openOptionsMenu('interface')} inScreen />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Controls...' onClick={() => openOptionsMenu('controls')} inScreen />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Sound...' onClick={() => openOptionsMenu('sound')} inScreen />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        const { resourcePackInstalled } = useSnapshot(resourcePackState)\r\n        const { usingServerResourcePack } = useSnapshot(gameAdditionalState)\r\n        const { enabledResourcepack } = useSnapshot(options)\r\n        return <Button\r\n          label={`Resource Pack: ${usingServerResourcePack ? 'SERVER ON' : resourcePackInstalled ? enabledResourcepack ? 'ON' : 'OFF' : 'NO'}`} inScreen onClick={async () => {\r\n            if (resourcePackState.resourcePackInstalled) {\r\n              const names = Object.keys(await getResourcePackNames())\r\n              const name = names[0]\r\n              const choices = [\r\n                options.enabledResourcepack ? 'Disable' : 'Enable',\r\n                'Uninstall',\r\n              ]\r\n              const choice = await showOptionsModal(`Resource Pack ${name} action`, choices)\r\n              if (!choice) return\r\n              if (choice === 'Disable') {\r\n                options.enabledResourcepack = null\r\n                await resourcepackReload()\r\n                return\r\n              }\r\n              if (choice === 'Enable') {\r\n                options.enabledResourcepack = name\r\n                await completeResourcepackPackInstall(name, name, false, createNotificationProgressReporter())\r\n                return\r\n              }\r\n              if (choice === 'Uninstall') {\r\n              // todo make hidable\r\n                setLoadingScreenStatus('Uninstalling texturepack')\r\n                await uninstallResourcePack()\r\n                setLoadingScreenStatus(undefined)\r\n              }\r\n            } else {\r\n            // if (!fsState.inMemorySave && isGameActive(false)) {\r\n            //   alert('Unable to install resource pack in loaded save for now')\r\n            //   return\r\n            // }\r\n              openFilePicker('resourcepack')\r\n            }\r\n          }}\r\n        />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Advanced...' onClick={() => openOptionsMenu('advanced')} inScreen />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        const { appConfig } = useSnapshot(miscUiState)\r\n        const modsUpdateSnapshot = useSnapshot(modsUpdateStatus)\r\n        const [clientMods, setClientMods] = useState<ClientMod[]>([])\r\n        useEffect(() => {\r\n          void getAllMods().then(setClientMods)\r\n        }, [])\r\n\r\n        if (appConfig?.showModsButton === false) return null\r\n        const enabledModsCount = Object.keys(clientMods.filter(mod => mod.enabled)).length\r\n        return <Button label={`Client Mods: ${enabledModsCount} (${Object.keys(modsUpdateSnapshot).length})`} onClick={() => showModal({ reactType: 'mods' })} inScreen />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='VR...' onClick={() => openOptionsMenu('VR')} inScreen />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        const { appConfig } = useSnapshot(miscUiState)\r\n        if (!appConfig?.displayLanguageSelector) return null\r\n        return <Button\r\n          label='Language...' onClick={async () => {\r\n            const newLang = await showOptionsModal('Set Language', (appConfig.supportedLanguages ?? []) as string[])\r\n            if (!newLang) return\r\n            options.language = newLang.split(' - ')[0]\r\n          }} inScreen />\r\n      },\r\n    }\r\n  ],\r\n  interface: [\r\n    {\r\n      guiScale: {\r\n        max: 4,\r\n        min: 1,\r\n        unit: '',\r\n        delayApply: true,\r\n      },\r\n      custom () {\r\n        return <Category>Chat</Category>\r\n      },\r\n      chatWidth: {\r\n        max: 320,\r\n        unit: 'px',\r\n      },\r\n      chatHeight: {\r\n        max: 180,\r\n        unit: 'px',\r\n      },\r\n      chatOpacity: {\r\n      },\r\n      chatOpacityOpened: {\r\n      },\r\n      chatSelect: {\r\n        text: 'Text Select',\r\n      },\r\n      chatPingExtension: {\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Map</Category>\r\n      },\r\n      showMinimap: {\r\n        text: 'Enable Minimap',\r\n        enableWarning: 'App reload is required to apply this setting',\r\n        values: [\r\n          'always',\r\n          'singleplayer',\r\n          'never'\r\n        ],\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>World</Category>\r\n      },\r\n      highlightBlockColor: {\r\n        text: 'Block Highlight Color',\r\n        values: [\r\n          ['auto', 'Auto'],\r\n          ['blue', 'Blue'],\r\n          ['classic', 'Classic']\r\n        ],\r\n      },\r\n      showHand: {\r\n        text: 'Show Hand',\r\n      },\r\n      viewBobbing: {\r\n        text: 'View Bobbing',\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Sign Editor</Category>\r\n      },\r\n      autoSignEditor: {\r\n        text: 'Enable Sign Editor',\r\n      },\r\n      wysiwygSignEditor: {\r\n        text: 'WYSIWG Editor',\r\n        values: [\r\n          'auto',\r\n          'always',\r\n          'never'\r\n        ],\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Experimental</Category>\r\n      },\r\n      displayBossBars: {\r\n        text: 'Boss Bars',\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <UiToggleButton name='title' addUiText />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <UiToggleButton name='chat' addUiText />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <UiToggleButton name='scoreboard' addUiText />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <UiToggleButton name='effects' label='Effects' />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <UiToggleButton name='indicators' label='Game Indicators' />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <UiToggleButton name='hotbar' />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Other</Category>\r\n      },\r\n      displayLoadingMessages: {}\r\n    }\r\n  ],\r\n  controls: [\r\n    {\r\n      custom () {\r\n        return <Category>Keyboard & Mouse</Category>\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button\r\n          inScreen\r\n          onClick={() => {\r\n            showModal({ reactType: 'keybindings' })\r\n          }}\r\n        >Keybindings\r\n        </Button>\r\n      },\r\n      mouseSensX: {},\r\n      mouseSensY: {\r\n        min: -1,\r\n        valueText (value) {\r\n          return value === -1 ? 'Same as X' : `${value}`\r\n        },\r\n      },\r\n      mouseRawInput: {\r\n        tooltip: 'Wether to disable any mouse acceleration (MC does it by default). Most probably it is still supported only by Chrome.',\r\n        // eslint-disable-next-line no-extra-boolean-cast\r\n        disabledReason: Boolean(document.documentElement.requestPointerLock) ? undefined : 'Your browser does not support pointer lock.',\r\n      },\r\n      autoFullScreen: {\r\n        tooltip: 'Auto Fullscreen allows you to use Ctrl+W and Escape having to wait/click on screen again.',\r\n        disabledReason: navigator['keyboard'] ? undefined : 'Your browser doesn\\'t support keyboard lock API'\r\n      },\r\n      autoExitFullscreen: {\r\n        tooltip: 'Exit fullscreen on escape (pause menu open). But note you can always do it with F11.',\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Touch Controls</Category>\r\n      },\r\n      alwaysShowMobileControls: {\r\n        text: 'Always Mobile Controls',\r\n      },\r\n      touchButtonsSize: {\r\n        min: 40,\r\n        disableIf: [\r\n          'touchMovementType',\r\n          'modern'\r\n        ],\r\n      },\r\n      touchButtonsOpacity: {\r\n        min: 10,\r\n        max: 90,\r\n        disableIf: [\r\n          'touchMovementType',\r\n          'modern'\r\n        ],\r\n      },\r\n      touchButtonsPosition: {\r\n        max: 80,\r\n        disableIf: [\r\n          'touchMovementType',\r\n          'modern'\r\n        ],\r\n      },\r\n      touchMovementType: {\r\n        text: 'Movement Controls',\r\n        values: [['modern', 'Modern'], ['classic', 'Classic']],\r\n      },\r\n      touchInteractionType: {\r\n        text: 'Interaction Controls',\r\n        values: [['classic', 'Classic'], ['buttons', 'Buttons']],\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        const { touchInteractionType, touchMovementType } = useSnapshot(options)\r\n        return <Button label='Setup Touch Buttons' onClick={() => showModal({ reactType: 'touch-buttons-setup' })} inScreen disabled={touchInteractionType === 'classic' && touchMovementType === 'classic'} />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Auto Jump</Category>\r\n      },\r\n      autoJump: {\r\n        values: [\r\n          'always',\r\n          'auto',\r\n          'never'\r\n        ],\r\n        disableIf: [\r\n          'autoParkour',\r\n          true\r\n        ],\r\n      },\r\n      autoParkour: {},\r\n    }\r\n  ],\r\n  sound: [\r\n    { volume: {} },\r\n    {\r\n      custom () {\r\n        return <OptionSlider\r\n          valueOverride={options.enableMusic ? undefined : 0}\r\n          onChange={(value) => {\r\n            options.musicVolume = value\r\n          }}\r\n          item={{\r\n            type: 'slider',\r\n            id: 'musicVolume',\r\n            text: 'Music Volume',\r\n            min: 0,\r\n            max: 100,\r\n            unit: '%',\r\n          }}\r\n        />\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Sound Muffler' onClick={() => showModal({ reactType: 'sound-muffler' })} inScreen />\r\n      },\r\n    }\r\n    // { ignoreSilentSwitch: {} },\r\n  ],\r\n\r\n  VR: [\r\n    {\r\n      custom () {\r\n        return (\r\n          <>\r\n            <span style={{ fontSize: 9, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n              VR currently has basic support\r\n            </span>\r\n            <div />\r\n          </>\r\n        )\r\n      },\r\n      vrSupport: {},\r\n      vrPageGameRendering: {\r\n        text: 'Page Game Rendering',\r\n        tooltip: 'Wether to continue rendering page even when vr is active.',\r\n      }\r\n    },\r\n  ],\r\n  advanced: [\r\n    {\r\n      custom () {\r\n        return <Button\r\n          inScreen\r\n          onClick={() => {\r\n            if (confirm('Are you sure you want to reset all settings?')) resetOptions()\r\n          }}\r\n        >Reset settings</Button>\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button\r\n          inScreen\r\n          onClick={() => {\r\n            if (confirm('Are you sure you want to remove all data (settings, keybindings, servers, username, auth, proxies)?')) resetLocalStorage()\r\n          }}\r\n        >Remove all data</Button>\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button label='Export/Import...' onClick={() => openOptionsMenu('export-import')} inScreen />\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        const { cookieStorage } = useSnapshot(appStorage)\r\n        return <Button\r\n          label={`Storage: ${cookieStorage ? 'Synced Cookies' : 'Local Storage'}`} onClick={() => {\r\n            appStorage.cookieStorage = !cookieStorage\r\n            alert('Reload the page to apply this change')\r\n          }}\r\n          inScreen\r\n        />\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Server Connection</Category>\r\n      },\r\n    },\r\n    {\r\n      saveLoginPassword: {\r\n        tooltip: 'Controls whether to save login passwords for servers in this browser memory.',\r\n        values: [\r\n          'prompt',\r\n          'always',\r\n          'never'\r\n        ]\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        const { serversAutoVersionSelect } = useSnapshot(options)\r\n        const allVersions = [...[...supportedVersions].sort((a, b) => versionToNumber(a) - versionToNumber(b)), 'latest', 'auto']\r\n        const currentIndex = allVersions.indexOf(serversAutoVersionSelect)\r\n\r\n        const getDisplayValue = (version: string) => {\r\n          const versionAutoSelect = getVersionAutoSelect(version)\r\n          if (version === 'latest') return `latest (${versionAutoSelect})`\r\n          if (version === 'auto') return `auto (${versionAutoSelect})`\r\n          return version\r\n        }\r\n\r\n        return <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <Slider\r\n            style={{ width: 150 }}\r\n            label='Default Version'\r\n            title='First version to try to connect with'\r\n            value={currentIndex}\r\n            min={0}\r\n            max={allVersions.length - 1}\r\n            unit=''\r\n            valueDisplay={getDisplayValue(serversAutoVersionSelect)}\r\n            updateValue={(newVal) => {\r\n              options.serversAutoVersionSelect = allVersions[newVal]\r\n            }}\r\n          />\r\n        </div>\r\n      },\r\n    },\r\n    {\r\n      preventBackgroundTimeoutKick: {},\r\n      preventSleep: {\r\n        text: 'Prevent Device Sleep',\r\n        disabledReason: navigator.wakeLock ? undefined : 'Your browser does not support wake lock API',\r\n        enableWarning: 'When connected to a server, prevent PC from sleeping or screen dimming. Useful for purpusely staying AFK for long time. Some events might still prevent this like loosing tab focus or going low power mode.',\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        return <Category>Developer</Category>\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        const { active } = useSnapshot(packetsRecordingState)\r\n        return <Button\r\n          inScreen\r\n          onClick={() => {\r\n            packetsRecordingState.active = !active\r\n          }}\r\n        >{active ? 'Stop' : 'Start'} Packets Replay Logging</Button>\r\n      },\r\n    },\r\n    {\r\n      custom () {\r\n        const { active, hasRecordedPackets } = useSnapshot(packetsRecordingState)\r\n        return <Button\r\n          disabled={!hasRecordedPackets}\r\n          inScreen\r\n          onClick={() => {\r\n            void downloadPacketsReplay()\r\n          }}\r\n        >Download Packets Replay</Button>\r\n      },\r\n    },\r\n    {\r\n      packetsLoggerPreset: {\r\n        text: 'Packets Logger Preset',\r\n        values: [\r\n          ['all', 'All'],\r\n          ['no-buffers', 'No Buffers']\r\n        ],\r\n      },\r\n    },\r\n    {\r\n      debugContro: {\r\n        text: 'Debug Controls',\r\n      },\r\n    },\r\n    {\r\n      debugResponseTimeIndicator: {\r\n        text: 'Debug Input Lag',\r\n      },\r\n    },\r\n    {\r\n      debugChatScroll: {\r\n      },\r\n    }\r\n  ],\r\n  'export-import': [\r\n    {\r\n      custom () {\r\n        return <Category>Export/Import Data</Category>\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button\r\n          inScreen\r\n          onClick={importData}\r\n        >Import Data</Button>\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button\r\n          inScreen\r\n          onClick={exportData}\r\n        >Export Data</Button>\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button\r\n          inScreen\r\n          disabled\r\n        >Export Worlds</Button>\r\n      }\r\n    },\r\n    {\r\n      custom () {\r\n        return <Button\r\n          inScreen\r\n          disabled\r\n        >Export Resource Pack</Button>\r\n      }\r\n    }\r\n  ],\r\n}\r\nexport type OptionsGroupType = 'main' | 'render' | 'interface' | 'controls' | 'sound' | 'advanced' | 'VR' | 'export-import'\r\n\r\nconst Category = ({ children }) => <div style={{\r\n  fontSize: 9,\r\n  textAlign: 'center',\r\n  gridColumn: 'span 2'\r\n}}>{children}</div>\r\n\r\nconst UiToggleButton = ({ name, addUiText = false, label = noCase(name) }: { name: string, addUiText?: boolean, label?: string }) => {\r\n  const { disabledUiParts } = useSnapshot(options)\r\n\r\n  const currentlyDisabled = disabledUiParts.includes(name)\r\n  if (addUiText) label = `${label} UI`\r\n  return <Button\r\n    inScreen\r\n    onClick={() => {\r\n      const newDisabledUiParts = currentlyDisabled ? disabledUiParts.filter(x => x !== name) : [...disabledUiParts, name]\r\n      options.disabledUiParts = newDisabledUiParts\r\n    }}\r\n  >{currentlyDisabled ? 'Enable' : 'Disable'} {label}</Button>\r\n}\r\n\r\nexport const tryFindOptionConfig = (option: keyof AppOptions) => {\r\n  for (const group of Object.values(guiOptionsScheme)) {\r\n    for (const optionConfig of group) {\r\n      if (option in optionConfig) {\r\n        return optionConfig[option]\r\n      }\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n","import { guiOptionsScheme, tryFindOptionConfig } from './optionsGuiScheme'\r\nimport { options } from './optionsStorage'\r\n\r\nexport const customCommandsConfig = {\r\n  chat: {\r\n    input: [\r\n      {\r\n        type: 'text',\r\n        placeholder: 'Command to send e.g. gamemode creative'\r\n      }\r\n    ],\r\n    handler ([command]) {\r\n      bot.chat(`/${command.replace(/^\\//, '')}`)\r\n    }\r\n  },\r\n  setOrToggleSetting: {\r\n    input: [\r\n      {\r\n        type: 'select',\r\n        // maybe title case?\r\n        options: Object.keys(options)\r\n      },\r\n      {\r\n        type: 'select',\r\n        options: ['toggle', 'set']\r\n      },\r\n      ([setting = '', action = ''] = []) => {\r\n        const value = options[setting]\r\n        if (!action || value === undefined || action === 'toggle') return null\r\n        if (action === 'set') {\r\n          const getBase = () => {\r\n            const config = tryFindOptionConfig(setting as any)\r\n            if (config && 'values' in config) {\r\n              return {\r\n                type: 'select',\r\n                options: config.values\r\n              }\r\n            }\r\n            if (config?.type === 'toggle' || typeof value === 'boolean') {\r\n              return {\r\n                type: 'select',\r\n                options: ['true', 'false']\r\n              }\r\n            }\r\n            if (config?.type === 'slider' || value.type === 'number') {\r\n              return {\r\n                type: 'number',\r\n              }\r\n            }\r\n            return {\r\n              type: 'text'\r\n            }\r\n          }\r\n          return {\r\n            ...getBase(),\r\n            placeholder: value\r\n          }\r\n        }\r\n      }\r\n    ],\r\n    handler ([setting, action, value]) {\r\n      if (action === 'toggle' || action === undefined) {\r\n        const value = options[setting]\r\n        const config = tryFindOptionConfig(setting)\r\n        if (config && 'values' in config && config.values) {\r\n          const { values } = config\r\n          const currentIndex = values.indexOf(value)\r\n          const nextIndex = (currentIndex + 1) % values.length\r\n          options[setting] = values[nextIndex]\r\n        } else {\r\n          options[setting] = typeof value === 'boolean' ? !value : typeof value === 'number' ? value + 1 : value\r\n        }\r\n      } else {\r\n        options[setting] = value\r\n      }\r\n    }\r\n  },\r\n  jsScripts: {\r\n    input: [\r\n      {\r\n        type: 'text',\r\n        placeholder: 'JavaScript code to run in main thread (sensitive!)'\r\n      }\r\n    ],\r\n    handler ([code]) {\r\n      // eslint-disable-next-line no-new-func -- this is a feature, not a bug\r\n      new Function(code)()\r\n    }\r\n  },\r\n  // openCommandsScreen: {}\r\n}\r\n","import Screen from './Screen'\r\nimport { useIsWidgetActive } from './utilsApp'\r\n\r\nexport default ({ name, title, children }) => {\r\n  const isWidgetActive = useIsWidgetActive(name)\r\n\r\n  if (!isWidgetActive) return null\r\n\r\n  return <Screen backdrop title={title}>{children}</Screen>\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { WorldRendererThree } from 'renderer/viewer/three/worldrendererThree'\r\nimport FullScreenWidget from './FullScreenWidget'\r\n\r\nexport const name = 'loaded world signs'\r\n\r\nexport default () => {\r\n  const [selected, setSelected] = useState([] as string[])\r\n  const allSignsPos = [] as string[]\r\n  const signs = []\r\n  // const signs = viewer.world instanceof WorldRendererThree ? [...viewer.world.chunkTextures.values()].flatMap(textures => {\r\n  //   return Object.entries(textures).map(([signPosKey, texture]) => {\r\n  //     allSignsPos.push(signPosKey)\r\n  //     const pos = signPosKey.split(',').map(Number)\r\n  //     const isSelected = selected.includes(signPosKey)\r\n  //     return <div key={signPosKey}>\r\n  //       <div style={{ color: 'white', userSelect: 'text', fontSize: 8, }}>{pos.join(', ')}</div>\r\n  //       <div\r\n  //         style={{ background: isSelected ? 'rgba(255, 255, 255, 0.8)' : 'rgba(255, 255, 255, 0.5)', padding: 5, borderRadius: 5, cursor: 'pointer' }}\r\n  //         onClick={() => setSelected(selected.includes(signPosKey) ? selected.filter(x => x !== signPosKey) : [...selected, signPosKey])}>\r\n  //         <AddElem elem={texture.image} />\r\n  //       </div>\r\n  //     </div>\r\n  //   })\r\n  // }) : []\r\n\r\n  return <FullScreenWidget name={name} title='Loaded Signs'>\r\n    <div>\r\n      {signs.length} signs currently in the scene:\r\n    </div>\r\n    <div\r\n      style={{ cursor: 'pointer', }} onClick={() => {\r\n        // toggle all\r\n        if (selected.length === allSignsPos.length) {\r\n          setSelected([])\r\n          return\r\n        }\r\n        setSelected([...allSignsPos])\r\n      }}>Select All</div>\r\n    {selected.length && <div\r\n      style={{ cursor: 'pointer', }} onClick={() => {\r\n        void navigator.clipboard.writeText(selected.join('\\n'))\r\n      }}>Copy Selected Signs</div>}\r\n    {signs}\r\n  </FullScreenWidget>\r\n}\r\n\r\nconst AddElem = ({ elem }) => {\r\n  const ref = useRef<HTMLDivElement>(null)\r\n  useEffect(() => {\r\n    elem.style.width = '100%'\r\n    elem.style.height = '100%'\r\n    ref.current!.appendChild(elem)\r\n    return () => {\r\n      elem.remove()\r\n    }\r\n  }, [])\r\n\r\n  return <div\r\n    ref={ref} style={{\r\n      height: '35px',\r\n    }} />\r\n}\r\n\r\n// for (const key of Object.keys(viewer.world.sectionObjects)) {\r\n//   const section = viewer.world.sectionObjects[key]\r\n//   for (const child of section.children) {\r\n//     if (child.name === 'mesh') child.visible = false\r\n//   }\r\n// }\r\n","import * as ModuleSignsViewer from './ModuleSignsViewer'\r\n\r\nexport default [ModuleSignsViewer]\r\n","import { proxy, subscribe } from 'valtio'\r\nimport * as THREE from 'three'\r\nimport { useEffect } from 'react'\r\n\r\nexport const motionState = proxy({\r\n  offset: { x: 0, y: 0 }\r\n})\r\n\r\nconst MOTION_DAMPING = 0.92\r\nconst MAX_MOTION_OFFSET = 100\r\nconst motionVelocity = { x: 0, y: 0 }\r\nlet lastUpdate = performance.now()\r\nlet lastYaw = 0\r\nlet lastPitch = 0\r\n\r\nexport function updateMotion () {\r\n  if (!bot?.entity) return\r\n  const now = performance.now()\r\n  const deltaTime = (now - lastUpdate) / 1000 // Convert to seconds\r\n  lastUpdate = now\r\n\r\n  // Get camera movement contribution\r\n  const yawDiff = (bot.entity.yaw - lastYaw)\r\n  const pitchDiff = (bot.entity.pitch - lastPitch)\r\n  lastYaw = bot.entity.yaw\r\n  lastPitch = bot.entity.pitch\r\n\r\n  // Create a vector for velocity in world space\r\n  const { velocity } = bot.entity\r\n  const velocityVector = new THREE.Vector3(velocity.x, 0, velocity.z)\r\n\r\n  // Get camera's forward direction\r\n  const cameraQuat = new THREE.Quaternion()\r\n  cameraQuat.setFromEuler(new THREE.Euler(0, -bot.entity.yaw, 0))\r\n\r\n  // Transform velocity to camera space\r\n  velocityVector.applyQuaternion(cameraQuat)\r\n\r\n  // Calculate motion contribution\r\n  const velocityContribution = {\r\n    x: -velocityVector.x * 150,\r\n    y: -velocityVector.z * 150\r\n  }\r\n\r\n  // Combine camera and velocity effects\r\n  motionVelocity.x += (yawDiff * 300 + velocityContribution.x) * deltaTime\r\n  motionVelocity.y += (pitchDiff * 300 + velocityContribution.y) * deltaTime\r\n\r\n  // Apply damping\r\n  motionVelocity.x *= MOTION_DAMPING\r\n  motionVelocity.y *= MOTION_DAMPING\r\n\r\n  // Clamp values\r\n  motionVelocity.x = Math.max(-MAX_MOTION_OFFSET, Math.min(MAX_MOTION_OFFSET, motionVelocity.x))\r\n  motionVelocity.y = Math.max(-MAX_MOTION_OFFSET, Math.min(MAX_MOTION_OFFSET, motionVelocity.y))\r\n\r\n  // Update the motion state\r\n  motionState.offset = {\r\n    x: motionVelocity.x,\r\n    y: motionVelocity.y\r\n  }\r\n}\r\n\r\nlet motionEnabled = false\r\nexport function initMotionTracking () {\r\n  if (motionEnabled) return\r\n  motionEnabled = true\r\n\r\n  function animate () {\r\n    updateMotion()\r\n    requestAnimationFrame(animate)\r\n  }\r\n  animate()\r\n}\r\n\r\nexport function useUiMotion (ref: React.RefObject<HTMLElement>, enabled = true) {\r\n  useEffect(() => {\r\n    if (!enabled || !ref.current) return\r\n\r\n    const unsubscribe = subscribe(motionState, () => {\r\n      const el = ref.current\r\n      if (!el) return\r\n      el.style.transform = `translate(${motionState.offset.x.toFixed(2)}px, ${motionState.offset.y.toFixed(2)}px)`\r\n    })\r\n\r\n    return () => unsubscribe()\r\n  }, [enabled, ref])\r\n}\r\n","import MessageFormattedString from './MessageFormattedString'\r\nimport './PlayerListOverlay.css'\r\n\r\n\r\ntype PlayersLists = Array<Array<Pick<import('mineflayer').Player, 'uuid' | 'displayName' | 'username' | 'ping'>>>\r\n\r\ntype PlayerListOverlayProps = {\r\n  playersLists: PlayersLists,\r\n  clientId: string,\r\n  tablistHeader: string | Record<string, any> | null,\r\n  tablistFooter: string | Record<string, any> | null,\r\n  serverIP: string\r\n  style?: React.CSSProperties\r\n}\r\n\r\nexport default ({ playersLists, clientId, tablistHeader, tablistFooter, serverIP, style }: PlayerListOverlayProps) => {\r\n\r\n  return <div className=\"playerlist-container\" id=\"playerlist-container\" style={style}>\r\n    <span className=\"playerlist-title\">Server IP: {serverIP}</span>\r\n    <div className='playerlist-header'>\r\n      <MessageFormattedString message={tablistHeader} />\r\n    </div>\r\n    <div className=\"player-lists\">\r\n      {playersLists.map((list, index) => (\r\n        <div key={index} className=\"player-list\">\r\n          {list.map(player => (\r\n            <div key={player.uuid ?? player.username} className={`playerlist-entry${clientId === player.uuid ? ' active-player' : ''}`} id={`plist-player-${player.uuid}`}>\r\n              <MessageFormattedString message={player.displayName ?? player.username} />\r\n              <div className=\"playerlist-ping\">\r\n                <p className=\"playerlist-ping-value\">{player.ping}</p>\r\n                <p className=\"playerlist-ping-label\">ms</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n    <div className='playerlist-footer'>\r\n      <MessageFormattedString message={tablistFooter} />\r\n    </div>\r\n  </div>\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport { isGameActive } from '../globalState'\r\nimport PlayerListOverlay from './PlayerListOverlay'\r\nimport './PlayerListOverlay.css'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\n\r\nconst MAX_COLUMNS = 4\r\nconst MAX_ROWS_PER_COL = 10\r\n\r\ntype Players = typeof bot.players\r\n\r\nexport const tabListState = proxy({\r\n  isOpen: false,\r\n})\r\n\r\nexport default () => {\r\n  const { isOpen } = useSnapshot(tabListState)\r\n\r\n  const serverIp = lastConnectOptions.value?.server\r\n  const [clientId, setClientId] = useState(bot._client.uuid)\r\n  const [players, setPlayers] = useState<Players>({})\r\n  const [counter, setCounter] = useState(0)\r\n\r\n  useEffect(() => {\r\n    function requestUpdate () {\r\n      setPlayers(bot?.players ?? {})\r\n    }\r\n\r\n    bot.on('playerUpdated', () => requestUpdate())\r\n    bot.on('playerJoined', () => requestUpdate())\r\n    bot.on('playerLeft', () => requestUpdate())\r\n    requestUpdate()\r\n    const interval = setInterval(() => {\r\n      requestUpdate()\r\n    }, 1000)\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setPlayers(bot.players)\r\n    if (bot.player) {\r\n      setClientId(bot.player.uuid)\r\n    } else {\r\n      bot._client.on('player_info', () => {\r\n        if (bot.player?.uuid) {\r\n          setClientId(bot.player?.uuid)\r\n        }\r\n      })\r\n    }\r\n\r\n    const playerlistHeader = () => setCounter(prev => prev + 1)\r\n    bot._client.on('playerlist_header', playerlistHeader)\r\n\r\n    return () => {\r\n      bot?._client.removeListener('playerlist_header', playerlistHeader)\r\n    }\r\n  }, [serverIp])\r\n\r\n  const playersArray = Object.values(players).sort((a, b) => {\r\n    if (a.username > b.username) return 1\r\n    if (a.username < b.username) return -1\r\n    return 0\r\n  })\r\n\r\n  // Calculate optimal column distribution\r\n  const totalPlayers = playersArray.length\r\n  const numColumns = Math.min(MAX_COLUMNS, Math.ceil(totalPlayers / MAX_ROWS_PER_COL))\r\n  const playersPerColumn = Math.ceil(totalPlayers / numColumns)\r\n\r\n  const lists = [] as Array<typeof playersArray>\r\n\r\n  for (let i = 0; i < numColumns; i++) {\r\n    const startIdx = i * playersPerColumn\r\n    const endIdx = Math.min(startIdx + playersPerColumn, totalPlayers)\r\n    if (startIdx < totalPlayers) {\r\n      lists.push(playersArray.slice(startIdx, endIdx))\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return <PlayerListOverlay\r\n    playersLists={lists}\r\n    clientId={clientId}\r\n    tablistHeader={bot.tablist.header}\r\n    tablistFooter={bot.tablist.footer}\r\n    serverIP={serverIp ?? ''}\r\n  />\r\n}\r\n","//@ts-check\r\n\r\nimport { Vec3 } from 'vec3'\r\nimport { proxy, subscribe } from 'valtio'\r\n\r\nimport { ControMax } from 'contro-max/build/controMax'\r\nimport { CommandEventArgument, SchemaCommandInput } from 'contro-max/build/types'\r\nimport { stringStartsWith } from 'contro-max/build/stringUtils'\r\nimport { GameMode } from 'mineflayer'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { isGameActive, showModal, gameAdditionalState, activeModalStack, hideCurrentModal, miscUiState, hideModal, hideAllModals } from './globalState'\r\nimport { goFullscreen, isInRealGameSession, pointerLock, reloadChunks } from './utils'\r\nimport { options } from './optionsStorage'\r\nimport { openPlayerInventory } from './inventoryWindows'\r\nimport { chatInputValueGlobal } from './react/Chat'\r\nimport { fsState } from './loadSave'\r\nimport { customCommandsConfig } from './customCommands'\r\nimport type { CustomCommand } from './react/KeybindingsCustom'\r\nimport { showOptionsModal } from './react/SelectOption'\r\nimport widgets from './react/widgets'\r\nimport { getItemFromBlock } from './chatUtils'\r\nimport { gamepadUiCursorState } from './react/GamepadUiCursor'\r\nimport { completeResourcepackPackInstall, copyServerResourcePackToRegular, resourcePackState } from './resourcePack'\r\nimport { showNotification } from './react/NotificationProvider'\r\nimport { lastConnectOptions } from './react/AppStatusProvider'\r\nimport { onCameraMove, onControInit } from './cameraRotationControls'\r\nimport { createNotificationProgressReporter } from './core/progressReporter'\r\nimport { appStorage } from './react/appStorageProvider'\r\nimport { switchGameMode } from './packetsReplay/replayPackets'\r\nimport { tabListState } from './react/PlayerListOverlayProvider'\r\nimport { type ActionType, type ActionHoldConfig, type CustomAction } from './appConfig'\r\nimport { playerState } from './mineflayer/playerState'\r\nimport { emulateMouseClick } from './app/gamepadCursor'\r\n\r\nexport const customKeymaps = proxy(appStorage.keybindings)\r\nsubscribe(customKeymaps, () => {\r\n  appStorage.keybindings = customKeymaps\r\n})\r\n\r\nconst controlOptions = {\r\n  preventDefault: true\r\n}\r\n\r\nexport const contro = new ControMax({\r\n  commands: {\r\n    movement: {\r\n      forward: ['KeyW'],\r\n      back: ['KeyS'],\r\n      left: ['KeyA'],\r\n      right: ['KeyD'],\r\n      jump: ['Space', 'A'],\r\n      sneak: ['ShiftLeft', 'Down'],\r\n      toggleSneakOrDown: [null, 'Right Stick'],\r\n      sprint: ['ControlLeft', 'Left Stick'],\r\n    },\r\n    general: {\r\n      inventory: ['KeyE', 'X'],\r\n      drop: ['KeyQ', 'B'],\r\n      dropStack: [null],\r\n      // game interactions\r\n      nextHotbarSlot: [null, 'Right Bumper'],\r\n      prevHotbarSlot: [null, 'Left Bumper'],\r\n      attackDestroy: [null, 'Right Trigger'],\r\n      interactPlace: [null, 'Left Trigger'],\r\n      swapHands: ['KeyF'],\r\n      selectItem: ['KeyH'],\r\n      rotateCameraLeft: [null],\r\n      rotateCameraRight: [null],\r\n      rotateCameraUp: [null],\r\n      rotateCameraDown: [null],\r\n      // ui?\r\n      chat: [['KeyT', 'Enter'], 'Right'],\r\n      command: ['Slash'],\r\n      playersList: ['Tab', 'Left'],\r\n      debugOverlay: ['F3'],\r\n      debugOverlayHelpMenu: [null],\r\n      // client side\r\n      zoom: ['KeyC'],\r\n      viewerConsole: ['Backquote'],\r\n      togglePerspective: ['F5', 'Up'],\r\n    },\r\n    ui: {\r\n      toggleFullscreen: ['F11'],\r\n      back: [null/* 'Escape' */, 'B'],\r\n      toggleMap: ['KeyJ'],\r\n      leftClick: [null, 'A'],\r\n      rightClick: [null, 'X'],\r\n      speedupCursor: [null, 'Left Stick'],\r\n      pauseMenu: [null, 'Start']\r\n    },\r\n    communication: {\r\n      toggleMicrophone: ['KeyM'],\r\n    },\r\n    advanced: {\r\n      lockUrl: ['KeyY'],\r\n    },\r\n    custom: {} as Record<string, SchemaCommandInput & { type: string, input: any[] }>,\r\n    // waila: {\r\n    //   showLookingBlockRecipe: ['Numpad3'],\r\n    //   showLookingBlockUsages: ['Numpad4']\r\n    // }\r\n  } satisfies Record<string, Record<string, SchemaCommandInput>>,\r\n  movementVector: '2d',\r\n  groupedCommands: {\r\n    general: {\r\n      switchSlot: ['Digits', []]\r\n    }\r\n  },\r\n}, {\r\n  defaultControlOptions: controlOptions,\r\n  target: document,\r\n  captureEvents () {\r\n    return true\r\n  },\r\n  storeProvider: {\r\n    load: () => customKeymaps,\r\n    save () { },\r\n  },\r\n  gamepadPollingInterval: 10\r\n})\r\nwindow.controMax = contro\r\nexport type Command = CommandEventArgument<typeof contro['_commandsRaw']>['command']\r\n\r\nexport const isCommandDisabled = (command: Command) => {\r\n  return miscUiState.appConfig?.disabledCommands?.includes(command)\r\n}\r\n\r\nonControInit()\r\n\r\nupdateBinds(customKeymaps)\r\n\r\nconst updateDoPreventDefault = () => {\r\n  controlOptions.preventDefault = miscUiState.gameLoaded && !activeModalStack.length\r\n}\r\n\r\nsubscribe(miscUiState, updateDoPreventDefault)\r\nsubscribe(activeModalStack, updateDoPreventDefault)\r\nupdateDoPreventDefault()\r\n\r\nconst setSprinting = (state: boolean) => {\r\n  bot.setControlState('sprint', state)\r\n  gameAdditionalState.isSprinting = state\r\n}\r\n\r\nconst isSpectatingEntity = () => {\r\n  return appViewer.playerState.utils.isSpectatingEntity()\r\n}\r\n\r\ncontro.on('movementUpdate', ({ vector, soleVector, gamepadIndex }) => {\r\n  miscUiState.usingGamepadInput = gamepadIndex !== undefined\r\n  if (!bot || !isGameActive(false) || isSpectatingEntity()) return\r\n\r\n  // if (viewer.world.freeFlyMode) {\r\n  //   // Create movement vector from input\r\n  //   const direction = new THREE.Vector3(0, 0, 0)\r\n  //   if (vector.z !== undefined) direction.z = vector.z\r\n  //   if (vector.x !== undefined) direction.x = vector.x\r\n\r\n  //   // Apply camera rotation to movement direction\r\n  //   direction.applyQuaternion(viewer.camera.quaternion)\r\n\r\n  //   // Update freeFlyState position with normalized direction\r\n  //   const moveSpeed = 1\r\n  //   direction.multiplyScalar(moveSpeed)\r\n  //   viewer.world.freeFlyState.position.add(new Vec3(direction.x, direction.y, direction.z))\r\n  //   return\r\n  // }\r\n\r\n  // gamepadIndex will be used for splitscreen in future\r\n  const coordToAction = [\r\n    ['z', -1, 'forward'],\r\n    ['z', 1, 'back'],\r\n    ['x', -1, 'left'],\r\n    ['x', 1, 'right'],\r\n  ] as const\r\n\r\n  const newState: Partial<typeof bot.controlState> = {}\r\n  for (const [coord, v] of Object.entries(vector)) {\r\n    if (v === undefined || Math.abs(v) < 0.3) continue\r\n    // todo use raw values eg for slow movement\r\n    const mappedValue = v < 0 ? -1 : 1\r\n    // eslint-disable-next-line @typescript-eslint/no-non-null-asserted-optional-chain\r\n    const foundAction = coordToAction.find(([c, mapV]) => c === coord && mapV === mappedValue)?.[2]!\r\n    newState[foundAction] = true\r\n  }\r\n\r\n  for (const key of ['forward', 'back', 'left', 'right'] as const) {\r\n    if (!!(newState[key]) === !!(bot.controlState[key])) continue\r\n    const action = !!newState[key]\r\n    if (action && !isGameActive(true)) continue\r\n    bot.setControlState(key, action)\r\n\r\n    if (key === 'forward') {\r\n      // todo workaround: need to refactor\r\n      if (!action) {\r\n        setSprinting(false)\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nlet lastCommandTrigger = null as { command: string, time: number } | null\r\n\r\nconst secondActionActivationTimeout = 300\r\nconst secondActionCommands: Partial<Record<Command, () => void>> = {\r\n  'movement.jump' () {\r\n    // if (bot.game.gameMode === 'spectator') return\r\n    toggleFly()\r\n  },\r\n  'movement.forward' () {\r\n    setSprinting(true)\r\n  }\r\n}\r\n\r\n// detect pause open, as ANY keyup event is not fired when you exit pointer lock (esc)\r\nsubscribe(activeModalStack, () => {\r\n  if (activeModalStack.length) {\r\n    // iterate over pressedKeys\r\n    for (const key of contro.pressedKeys) {\r\n      contro.pressedKeyOrButtonChanged({ code: key }, false)\r\n    }\r\n  }\r\n})\r\n\r\n// Camera rotation controls\r\nconst cameraRotationControls = {\r\n  activeDirections: new Set<'left' | 'right' | 'up' | 'down'>(),\r\n  interval: null as ReturnType<typeof setInterval> | null,\r\n  config: {\r\n    speed: 1, // movement per interval\r\n    interval: 5 // ms between movements\r\n  },\r\n  movements: {\r\n    left: { movementX: -0.5, movementY: 0 },\r\n    right: { movementX: 0.5, movementY: 0 },\r\n    up: { movementX: 0, movementY: -0.5 },\r\n    down: { movementX: 0, movementY: 0.5 }\r\n  },\r\n  updateMovement () {\r\n    if (cameraRotationControls.activeDirections.size === 0) {\r\n      if (cameraRotationControls.interval) {\r\n        clearInterval(cameraRotationControls.interval)\r\n        cameraRotationControls.interval = null\r\n      }\r\n      return\r\n    }\r\n\r\n    if (!cameraRotationControls.interval) {\r\n      cameraRotationControls.interval = setInterval(() => {\r\n        // Combine all active movements\r\n        const movement = { movementX: 0, movementY: 0 }\r\n        for (const direction of cameraRotationControls.activeDirections) {\r\n          movement.movementX += cameraRotationControls.movements[direction].movementX\r\n          movement.movementY += cameraRotationControls.movements[direction].movementY\r\n        }\r\n\r\n        onCameraMove({\r\n          ...movement,\r\n          type: 'keyboardRotation',\r\n          stopPropagation () {}\r\n        })\r\n      }, cameraRotationControls.config.interval)\r\n    }\r\n  },\r\n  start (direction: 'left' | 'right' | 'up' | 'down') {\r\n    cameraRotationControls.activeDirections.add(direction)\r\n    cameraRotationControls.updateMovement()\r\n  },\r\n  stop (direction: 'left' | 'right' | 'up' | 'down') {\r\n    cameraRotationControls.activeDirections.delete(direction)\r\n    cameraRotationControls.updateMovement()\r\n  },\r\n  handleCommand (command: string, pressed: boolean) {\r\n    // Don't allow movement while spectating an entity\r\n    if (isSpectatingEntity()) return\r\n\r\n    const directionMap = {\r\n      'general.rotateCameraLeft': 'left',\r\n      'general.rotateCameraRight': 'right',\r\n      'general.rotateCameraUp': 'up',\r\n      'general.rotateCameraDown': 'down'\r\n    } as const\r\n\r\n    const direction = directionMap[command]\r\n    if (direction) {\r\n      if (pressed) cameraRotationControls.start(direction)\r\n      else cameraRotationControls.stop(direction)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n}\r\nwindow.cameraRotationControls = cameraRotationControls\r\n\r\nconst setSneaking = (state: boolean) => {\r\n  gameAdditionalState.isSneaking = state\r\n  bot.setControlState('sneak', state)\r\n\r\n}\r\n\r\nconst onTriggerOrReleased = (command: Command, pressed: boolean) => {\r\n  // always allow release!\r\n  if (!bot || !isGameActive(false)) return\r\n\r\n  if (stringStartsWith(command, 'movement')) {\r\n    switch (command) {\r\n      case 'movement.jump':\r\n        if (isSpectatingEntity()) break\r\n        // if (viewer.world.freeFlyMode) {\r\n        //   const moveSpeed = 0.5\r\n        //   viewer.world.freeFlyState.position.add(new Vec3(0, pressed ? moveSpeed : 0, 0))\r\n        // } else {\r\n        bot.setControlState('jump', pressed)\r\n        // }\r\n        break\r\n      case 'movement.sneak':\r\n        // if (viewer.world.freeFlyMode) {\r\n        //   const moveSpeed = 0.5\r\n        //   viewer.world.freeFlyState.position.add(new Vec3(0, pressed ? -moveSpeed : 0, 0))\r\n        // } else {\r\n        setSneaking(pressed)\r\n        // }\r\n        break\r\n      case 'movement.sprint':\r\n        // todo add setting to change behavior\r\n        if (pressed) {\r\n          setSprinting(pressed)\r\n        }\r\n        break\r\n      case 'movement.toggleSneakOrDown':\r\n        if (gameAdditionalState.isFlying) {\r\n          setSneaking(pressed)\r\n        } else if (pressed) {\r\n          setSneaking(!gameAdditionalState.isSneaking)\r\n        }\r\n        break\r\n      case 'movement.forward':\r\n        contro.setMovement('forward', pressed)\r\n        break\r\n      case 'movement.back':\r\n        contro.setMovement('backward', pressed)\r\n        break\r\n      case 'movement.left':\r\n        contro.setMovement('left', pressed)\r\n        break\r\n      case 'movement.right':\r\n        contro.setMovement('right', pressed)\r\n        break\r\n    }\r\n  }\r\n  if (stringStartsWith(command, 'general')) {\r\n    // handle general commands\r\n    // eslint-disable-next-line @typescript-eslint/switch-exhaustiveness-check\r\n    switch (command) {\r\n      case 'general.attackDestroy':\r\n        document.dispatchEvent(new MouseEvent(pressed ? 'mousedown' : 'mouseup', { button: 0 }))\r\n        break\r\n      case 'general.interactPlace':\r\n        document.dispatchEvent(new MouseEvent(pressed ? 'mousedown' : 'mouseup', { button: 2 }))\r\n        break\r\n      case 'general.zoom':\r\n        gameAdditionalState.isZooming = pressed\r\n        break\r\n      case 'general.debugOverlay':\r\n        if (pressed) {\r\n          miscUiState.showDebugHud = !miscUiState.showDebugHud\r\n        }\r\n        break\r\n      case 'general.debugOverlayHelpMenu':\r\n        if (pressed) {\r\n          void onF3LongPress()\r\n        }\r\n        break\r\n      case 'general.rotateCameraLeft':\r\n      case 'general.rotateCameraRight':\r\n      case 'general.rotateCameraUp':\r\n      case 'general.rotateCameraDown':\r\n        cameraRotationControls.handleCommand(command, pressed)\r\n        break\r\n      case 'general.playersList':\r\n        tabListState.isOpen = pressed\r\n        break\r\n      case 'general.viewerConsole':\r\n        if (lastConnectOptions.value?.viewerWsConnect) {\r\n          showModal({ reactType: 'console' })\r\n        }\r\n        break\r\n      case 'general.togglePerspective':\r\n        if (pressed) {\r\n          const currentPerspective = playerState.reactive.perspective\r\n          // eslint-disable-next-line sonarjs/no-nested-switch\r\n          switch (currentPerspective) {\r\n            case 'first_person':\r\n              playerState.reactive.perspective = 'third_person_back'\r\n              break\r\n            case 'third_person_back':\r\n              playerState.reactive.perspective = 'third_person_front'\r\n              break\r\n            case 'third_person_front':\r\n              playerState.reactive.perspective = 'first_person'\r\n              break\r\n          }\r\n        }\r\n        break\r\n    }\r\n  } else if (stringStartsWith(command, 'ui')) {\r\n    switch (command) {\r\n      case 'ui.pauseMenu':\r\n        if (pressed) {\r\n          if (activeModalStack.length) {\r\n            hideCurrentModal()\r\n          } else {\r\n            showModal({ reactType: 'pause-screen' })\r\n          }\r\n        }\r\n        break\r\n      case 'ui.back':\r\n      case 'ui.toggleFullscreen':\r\n      case 'ui.toggleMap':\r\n      case 'ui.leftClick':\r\n      case 'ui.rightClick':\r\n      case 'ui.speedupCursor':\r\n        // These are handled elsewhere\r\n        break\r\n    }\r\n  }\r\n}\r\n\r\n// im still not sure, maybe need to refactor to handle in inventory instead\r\nconst alwaysPressedHandledCommand = (command: Command) => {\r\n  // triggered even outside of the game\r\n  if (command === 'general.inventory') {\r\n    if (activeModalStack.at(-1)?.reactType?.startsWith?.('player_win:')) { // todo?\r\n      hideCurrentModal()\r\n    }\r\n  }\r\n  if (command === 'advanced.lockUrl') {\r\n    lockUrl()\r\n  }\r\n  if (command === 'communication.toggleMicrophone') {\r\n    toggleMicrophoneMuted?.()\r\n  }\r\n}\r\n\r\nexport function lockUrl () {\r\n  let newQs = ''\r\n  if (fsState.saveLoaded && fsState.inMemorySave) {\r\n    const worldFolder = fsState.inMemorySavePath\r\n    const save = worldFolder.split('/').at(-1)\r\n    newQs = `loadSave=${save}`\r\n  } else if (process.env.NODE_ENV === 'development') {\r\n    newQs = `reconnect=1`\r\n  } else if (lastConnectOptions.value?.server) {\r\n    const qs = new URLSearchParams()\r\n    const { server, botVersion, proxy, username } = lastConnectOptions.value\r\n    qs.set('ip', server)\r\n    if (botVersion) qs.set('version', botVersion)\r\n    if (proxy) qs.set('proxy', proxy)\r\n    if (username) qs.set('username', username)\r\n    newQs = String(qs.toString())\r\n  }\r\n\r\n  if (newQs) {\r\n    window.history.replaceState({}, '', `${window.location.pathname}?${newQs}`)\r\n  }\r\n}\r\n\r\nfunction cycleHotbarSlot (dir: 1 | -1) {\r\n  const newHotbarSlot = (bot.quickBarSlot + dir + 9) % 9\r\n  bot.setQuickBarSlot(newHotbarSlot)\r\n}\r\n\r\n// custom commands handler\r\nconst customCommandsHandler = ({ command }) => {\r\n  const [section, name] = command.split('.')\r\n  if (!isGameActive(true) || section !== 'custom') return\r\n\r\n  if (contro.userConfig?.custom) {\r\n    customCommandsConfig[(contro.userConfig.custom[name] as CustomCommand).type].handler((contro.userConfig.custom[name] as CustomCommand).inputs)\r\n  }\r\n}\r\ncontro.on('trigger', customCommandsHandler)\r\n\r\nconst isCommandAvailableAfterDisconnect = (command: Command) => {\r\n  if (!miscUiState.disconnectedCleanup?.wasConnected) return false\r\n  return command === 'general.chat' || command === 'general.inventory'\r\n}\r\n\r\ncontro.on('trigger', ({ command }) => {\r\n  if (isCommandDisabled(command)) return\r\n\r\n  const willContinue = !isGameActive(true)\r\n  alwaysPressedHandledCommand(command)\r\n  if (willContinue && !isCommandAvailableAfterDisconnect(command)) return\r\n\r\n  const secondActionCommand = secondActionCommands[command]\r\n  if (secondActionCommand) {\r\n    if (command === lastCommandTrigger?.command && Date.now() - lastCommandTrigger.time < secondActionActivationTimeout) {\r\n      const commandToTrigger = secondActionCommands[lastCommandTrigger.command]\r\n      commandToTrigger?.()\r\n      lastCommandTrigger = null\r\n    } else {\r\n      lastCommandTrigger = {\r\n        command,\r\n        time: Date.now(),\r\n      }\r\n    }\r\n  }\r\n\r\n  onTriggerOrReleased(command, true)\r\n\r\n  if (stringStartsWith(command, 'general')) {\r\n    switch (command) {\r\n      case 'general.attackDestroy':\r\n      case 'general.rotateCameraLeft':\r\n      case 'general.rotateCameraRight':\r\n      case 'general.rotateCameraUp':\r\n      case 'general.rotateCameraDown':\r\n      case 'general.debugOverlay':\r\n      case 'general.debugOverlayHelpMenu':\r\n      case 'general.playersList':\r\n      case 'general.togglePerspective':\r\n        // no-op\r\n        break\r\n      case 'general.swapHands': {\r\n        if (isSpectatingEntity()) break\r\n        bot._client.write('block_dig', {\r\n          'status': 6,\r\n          'location': {\r\n            'x': 0,\r\n            'z': 0,\r\n            'y': 0\r\n          },\r\n          'face': 0,\r\n        })\r\n        break\r\n      }\r\n      case 'general.interactPlace':\r\n        // handled in onTriggerOrReleased\r\n        break\r\n      case 'general.inventory':\r\n        if (isSpectatingEntity()) break\r\n        document.exitPointerLock?.()\r\n        openPlayerInventory()\r\n        break\r\n      case 'general.drop': {\r\n        if (isSpectatingEntity()) break\r\n        // protocol 1.9+\r\n        bot._client.write('block_dig', {\r\n          'status': 4,\r\n          'location': {\r\n            'x': 0,\r\n            'z': 0,\r\n            'y': 0\r\n          },\r\n          'face': 0,\r\n          sequence: 0\r\n        })\r\n        const slot = bot.inventory.hotbarStart + bot.quickBarSlot\r\n        const item = bot.inventory.slots[slot]\r\n        if (item) {\r\n          item.count--\r\n          bot.inventory.updateSlot(slot, item.count > 0 ? item : null!)\r\n        }\r\n        break\r\n      }\r\n      case 'general.dropStack': {\r\n        if (bot.heldItem) {\r\n          void bot.tossStack(bot.heldItem)\r\n        }\r\n        break\r\n      }\r\n      case 'general.chat':\r\n        showModal({ reactType: 'chat' })\r\n        break\r\n      case 'general.command':\r\n        chatInputValueGlobal.value = '/'\r\n        showModal({ reactType: 'chat' })\r\n        break\r\n      case 'general.selectItem':\r\n        if (isSpectatingEntity()) break\r\n        void selectItem()\r\n        break\r\n      case 'general.nextHotbarSlot':\r\n        if (isSpectatingEntity()) break\r\n        cycleHotbarSlot(1)\r\n        break\r\n      case 'general.prevHotbarSlot':\r\n        if (isSpectatingEntity()) break\r\n        cycleHotbarSlot(-1)\r\n        break\r\n      case 'general.zoom':\r\n        break\r\n      case 'general.viewerConsole':\r\n        if (lastConnectOptions.value?.viewerWsConnect) {\r\n          showModal({ reactType: 'console' })\r\n        }\r\n        break\r\n    }\r\n  }\r\n\r\n  if (command === 'ui.toggleFullscreen') {\r\n    void goFullscreen(true)\r\n  }\r\n})\r\n\r\n// show-hide Fullmap\r\ncontro.on('trigger', ({ command }) => {\r\n  if (command !== 'ui.toggleMap') return\r\n  const isActive = isGameActive(true)\r\n  if (activeModalStack.at(-1)?.reactType === 'full-map') {\r\n    miscUiState.displayFullmap = false\r\n    hideModal({ reactType: 'full-map' })\r\n  } else if (isActive && !activeModalStack.length) {\r\n    miscUiState.displayFullmap = true\r\n    showModal({ reactType: 'full-map' })\r\n  }\r\n})\r\n\r\ncontro.on('release', ({ command }) => {\r\n  if (isCommandDisabled(command)) return\r\n\r\n  onTriggerOrReleased(command, false)\r\n})\r\n\r\n// hard-coded keybindings\r\n\r\nexport const f3Keybinds: Array<{\r\n  key?: string,\r\n  action: () => void | Promise<void>,\r\n  mobileTitle: string\r\n  enabled?: () => boolean\r\n}> = [\r\n  {\r\n    key: 'KeyA',\r\n    action () {\r\n      //@ts-expect-error\r\n      const loadedChunks = Object.entries(worldView.loadedChunks).filter(([, v]) => v).map(([key]) => key.split(',').map(Number))\r\n      for (const [x, z] of loadedChunks) {\r\n        worldView!.unloadChunk({ x, z })\r\n      }\r\n      // for (const child of viewer.scene.children) {\r\n      //   if (child.name === 'chunk') { // should not happen\r\n      //     viewer.scene.remove(child)\r\n      //     console.warn('forcefully removed chunk from scene')\r\n      //   }\r\n      // }\r\n      if (localServer) {\r\n        //@ts-expect-error not sure why it is private... maybe revisit api?\r\n        localServer.players[0].world.columns = {}\r\n      }\r\n      void reloadChunks()\r\n      if (appViewer.backend?.backendMethods && typeof appViewer.backend.backendMethods.reloadWorld === 'function') {\r\n        appViewer.backend.backendMethods.reloadWorld()\r\n      }\r\n    },\r\n    mobileTitle: 'Reload chunks',\r\n  },\r\n  {\r\n    key: 'KeyG',\r\n    action () {\r\n      options.showChunkBorders = !options.showChunkBorders\r\n    },\r\n    mobileTitle: 'Toggle chunk borders',\r\n  },\r\n  {\r\n    key: 'KeyH',\r\n    action () {\r\n      showModal({ reactType: 'chunks-debug' })\r\n    },\r\n    mobileTitle: 'Show Chunks Debug',\r\n  },\r\n  {\r\n    action () {\r\n      showModal({ reactType: 'renderer-debug' })\r\n    },\r\n    mobileTitle: 'Renderer Debug Menu',\r\n  },\r\n  {\r\n    key: 'KeyY',\r\n    async action () {\r\n      // waypoints\r\n      const widgetNames = widgets.map(widget => widget.name)\r\n      const widget = await showOptionsModal('Open Widget', widgetNames)\r\n      if (!widget) return\r\n      showModal({ reactType: `widget-${widget}` })\r\n    },\r\n    mobileTitle: 'Open Widget'\r\n  },\r\n  {\r\n    key: 'KeyT',\r\n    async action () {\r\n      // TODO!\r\n      if (resourcePackState.resourcePackInstalled || gameAdditionalState.usingServerResourcePack) {\r\n        showNotification('Reloading textures...')\r\n        await completeResourcepackPackInstall('default', 'default', gameAdditionalState.usingServerResourcePack, createNotificationProgressReporter())\r\n      }\r\n    },\r\n    mobileTitle: 'Reload Textures'\r\n  },\r\n  {\r\n    key: 'F4',\r\n    async action () {\r\n      let nextGameMode: GameMode\r\n      switch (bot.game.gameMode) {\r\n        case 'creative': {\r\n          nextGameMode = 'survival'\r\n\r\n          break\r\n        }\r\n        case 'survival': {\r\n          nextGameMode = 'adventure'\r\n\r\n          break\r\n        }\r\n        case 'adventure': {\r\n          nextGameMode = 'spectator'\r\n\r\n          break\r\n        }\r\n        case 'spectator': {\r\n          nextGameMode = 'creative'\r\n\r\n          break\r\n        }\r\n      // No default\r\n      }\r\n      if (lastConnectOptions.value?.worldStateFileContents) {\r\n        switchGameMode(nextGameMode)\r\n      } else {\r\n        bot.chat(`/gamemode ${nextGameMode}`)\r\n      }\r\n    },\r\n    mobileTitle: 'Cycle Game Mode'\r\n  },\r\n  {\r\n    key: 'KeyP',\r\n    async action () {\r\n      const { uuid, ping: playerPing, username } = bot.player\r\n      const proxyPing = await bot['pingProxy']()\r\n      void showOptionsModal(`${username}: last known total latency (ping): ${playerPing}. Connected to ${lastConnectOptions.value?.proxy} with current ping ${proxyPing}. Player UUID: ${uuid}`, [])\r\n    },\r\n    mobileTitle: 'Show Player & Ping Details',\r\n    enabled: () => !lastConnectOptions.value?.singleplayer && !!bot.player\r\n  },\r\n  {\r\n    action () {\r\n      void copyServerResourcePackToRegular()\r\n    },\r\n    mobileTitle: 'Copy Server Resource Pack',\r\n    enabled: () => !!gameAdditionalState.usingServerResourcePack\r\n  }\r\n]\r\n\r\nexport const reloadChunksAction = () => {\r\n  const action = f3Keybinds.find(f3Keybind => f3Keybind.key === 'KeyA')\r\n  void action!.action()\r\n}\r\n\r\ndocument.addEventListener('keydown', (e) => {\r\n  if (!isGameActive(false)) return\r\n  if (contro.pressedKeys.has('F3')) {\r\n    const keybind = f3Keybinds.find((v) => v.key === e.code)\r\n    if (keybind && (keybind.enabled?.() ?? true)) {\r\n      void keybind.action()\r\n      e.stopPropagation()\r\n    }\r\n  }\r\n}, {\r\n  capture: true,\r\n})\r\n\r\nconst isFlying = () => (bot as any).physicsEngineCtx?.state?.flying ?? false\r\n\r\nconst startFlying = (sendAbilities = true) => {\r\n  if (sendAbilities) {\r\n    bot._client.write('abilities', {\r\n      flags: 2,\r\n    })\r\n  }\r\n  (bot.entity as any).flying = true\r\n}\r\n\r\nconst endFlying = (sendAbilities = true) => {\r\n  if (!isFlying()) return\r\n  if (sendAbilities) {\r\n    bot._client.write('abilities', {\r\n      flags: 0,\r\n    })\r\n  }\r\n  (bot.entity as any).flying = false\r\n}\r\n\r\nexport const onBotCreate = () => {\r\n}\r\n\r\nconst toggleFly = (newState = !isFlying(), sendAbilities?: boolean) => {\r\n  if (!bot.entity.canFly) return\r\n\r\n  if (newState) {\r\n    startFlying(sendAbilities)\r\n  } else {\r\n    endFlying(sendAbilities)\r\n  }\r\n}\r\n\r\nconst physicsFlyingCheck = () => {\r\n  bot.on('physicsTick', () => {\r\n    gameAdditionalState.isFlying = isFlying()\r\n  })\r\n}\r\n\r\ncustomEvents.on('gameLoaded', physicsFlyingCheck)\r\n\r\nconst selectItem = async () => {\r\n  const block = bot.blockAtCursor(5)\r\n  if (!block) return\r\n  const itemId = getItemFromBlock(block)?.id\r\n  if (!itemId) return\r\n  const Item = require('prismarine-item')(bot.version)\r\n  const item = new Item(itemId, 1, 0)\r\n  await bot.creative.setInventorySlot(bot.inventory.hotbarStart + bot.quickBarSlot, item)\r\n  bot.updateHeldItem()\r\n}\r\n\r\naddEventListener('mousedown', async (e) => {\r\n  // always prevent default for side buttons (back / forward navigation)\r\n  if (e.button === 3 || e.button === 4) {\r\n    e.preventDefault()\r\n  }\r\n\r\n  if ((e.target as HTMLElement).matches?.('#VRButton')) return\r\n  if (!isInRealGameSession() && !(e.target as HTMLElement).id.includes('ui-root')) return\r\n  void pointerLock.requestPointerLock()\r\n  if (!bot) return\r\n  getThreeJsRendererMethods()?.onPageInteraction()\r\n  // wheel click\r\n  // todo support ctrl+wheel (+nbt)\r\n  if (e.button === 1) {\r\n    await selectItem()\r\n  }\r\n})\r\n\r\nwindow.addEventListener('keydown', (e) => {\r\n  if (e.code !== 'Escape') return\r\n  if (!activeModalStack.length) {\r\n    getThreeJsRendererMethods()?.onPageInteraction()\r\n  }\r\n\r\n  if (activeModalStack.length) {\r\n    const hideAll = e.ctrlKey || e.metaKey\r\n    if (hideAll) {\r\n      hideAllModals()\r\n    } else {\r\n      hideCurrentModal()\r\n    }\r\n    if (activeModalStack.length === 0) {\r\n      getThreeJsRendererMethods()?.onPageInteraction()\r\n      pointerLock.justHitEscape = true\r\n    }\r\n  } else if (pointerLock.hasPointerLock) {\r\n    document.exitPointerLock?.()\r\n    if (options.autoExitFullscreen) {\r\n      void document.exitFullscreen()\r\n    }\r\n  } else {\r\n    document.dispatchEvent(new Event('pointerlockchange'))\r\n  }\r\n})\r\n\r\nwindow.addEventListener('keydown', (e) => {\r\n  if (e.code !== 'F2' || e.repeat || !isGameActive(true)) return\r\n  e.preventDefault()\r\n  const canvas = document.getElementById('viewer-canvas') as HTMLCanvasElement\r\n  if (!canvas) return\r\n  const link = document.createElement('a')\r\n  link.href = canvas.toDataURL('image/png')\r\n  const date = new Date()\r\n  link.download = `screenshot ${date.toLocaleString().replaceAll('.', '-').replace(',', '')}.png`\r\n  link.click()\r\n})\r\n\r\nwindow.addEventListener('keydown', (e) => {\r\n  if (e.code !== 'F1' || e.repeat || !isGameActive(true)) return\r\n  e.preventDefault()\r\n  miscUiState.showUI = !miscUiState.showUI\r\n})\r\n\r\n// #region experimental debug things\r\nwindow.addEventListener('keydown', (e) => {\r\n  if (e.code === 'KeyL' && e.altKey && !e.shiftKey && !e.ctrlKey && !e.metaKey) {\r\n    console.clear()\r\n  }\r\n  if (e.code === 'KeyK' && e.altKey && e.shiftKey && !e.ctrlKey && !e.metaKey) {\r\n    if (sessionStorage.delayLoadUntilFocus) {\r\n      sessionStorage.removeItem('delayLoadUntilFocus')\r\n    } else {\r\n      sessionStorage.setItem('delayLoadUntilFocus', 'true')\r\n    }\r\n  }\r\n  if (e.code === 'KeyK' && e.altKey && !e.shiftKey && !e.ctrlKey && !e.metaKey) {\r\n    // eslint-disable-next-line no-debugger\r\n    debugger\r\n  }\r\n})\r\n// #endregion\r\n\r\nexport function updateBinds (commands: any) {\r\n  contro.inputSchema.commands.custom = Object.fromEntries(Object.entries(commands?.custom ?? {}).map(([key, value]) => {\r\n    return [key, {\r\n      keys: [],\r\n      gamepad: [],\r\n      type: '',\r\n      inputs: []\r\n    }]\r\n  }))\r\n\r\n  for (const [group, actions] of Object.entries(commands)) {\r\n    contro.userConfig![group] = Object.fromEntries(Object.entries(actions).map(([key, value]) => {\r\n      const newValue = {\r\n        keys: value?.keys ?? undefined,\r\n        gamepad: value?.gamepad ?? undefined,\r\n      }\r\n\r\n      if (group === 'custom') {\r\n        newValue['type'] = (value).type\r\n        newValue['inputs'] = (value).inputs\r\n      }\r\n\r\n      return [key, newValue]\r\n    }))\r\n  }\r\n}\r\n\r\nexport const onF3LongPress = async () => {\r\n  const actions = f3Keybinds.filter(f3Keybind => {\r\n    return f3Keybind.mobileTitle && (f3Keybind.enabled?.() ?? true)\r\n  })\r\n  const actionNames = actions.map(f3Keybind => {\r\n    return `${f3Keybind.mobileTitle}${f3Keybind.key ? ` (F3+${f3Keybind.key})` : ''}`\r\n  })\r\n  const select = await showOptionsModal('', actionNames)\r\n  if (!select) return\r\n  const actionIndex = actionNames.indexOf(select)\r\n  const f3Keybind = actions[actionIndex]!\r\n  void f3Keybind.action()\r\n}\r\n\r\nexport const handleMobileButtonCustomAction = (action: CustomAction) => {\r\n  const handler = customCommandsConfig[action.type]?.handler\r\n  if (handler) {\r\n    handler([...action.input])\r\n  }\r\n}\r\n\r\nexport const triggerCommand = (command: Command, isDown: boolean) => {\r\n  handleMobileButtonActionCommand(command, isDown)\r\n}\r\n\r\nexport const handleMobileButtonActionCommand = (command: ActionType | ActionHoldConfig, isDown: boolean) => {\r\n  const commandValue = typeof command === 'string' ? command : 'command' in command ? command.command : command\r\n\r\n  // Check if command is disabled before proceeding\r\n  if (typeof commandValue === 'string' && isCommandDisabled(commandValue as Command)) return\r\n\r\n  if (typeof commandValue === 'string' && !stringStartsWith(commandValue, 'custom')) {\r\n    const event: CommandEventArgument<typeof contro['_commandsRaw']> = {\r\n      command: commandValue as Command,\r\n    }\r\n    if (isDown) {\r\n      contro.emit('trigger', event)\r\n    } else {\r\n      contro.emit('release', event)\r\n    }\r\n  } else if (typeof commandValue === 'object') {\r\n    if (isDown) {\r\n      handleMobileButtonCustomAction(commandValue)\r\n    }\r\n  }\r\n}\r\n\r\nexport const handleMobileButtonLongPress = (actionHold: ActionHoldConfig) => {\r\n  if (typeof actionHold.longPressAction === 'string' && actionHold.longPressAction === 'general.debugOverlayHelpMenu') {\r\n    void onF3LongPress()\r\n  } else if (actionHold.longPressAction) {\r\n    handleMobileButtonActionCommand(actionHold.longPressAction, true)\r\n  }\r\n}\r\n","import { defaultsDeep } from 'lodash'\r\nimport { disabledSettings, options, qsOptions } from './optionsStorage'\r\nimport { miscUiState } from './globalState'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { setStorageDataOnAppConfigLoad } from './react/appStorageProvider'\r\nimport { customKeymaps, updateBinds } from './controls'\r\n\r\nexport type CustomAction = {\r\n  readonly type: string\r\n  readonly input: readonly any[]\r\n}\r\n\r\nexport type ActionType = string | CustomAction\r\n\r\nexport type ActionHoldConfig = {\r\n  readonly command: ActionType\r\n  readonly longPressAction?: ActionType\r\n  readonly duration?: number\r\n  readonly threshold?: number\r\n}\r\n\r\nexport type MobileButtonConfig = {\r\n  readonly label?: string\r\n  readonly icon?: string\r\n  readonly action?: ActionType\r\n  readonly actionHold?: ActionType | ActionHoldConfig\r\n  readonly iconStyle?: React.CSSProperties\r\n}\r\n\r\nexport type AppConfig = {\r\n  // defaultHost?: string\r\n  // defaultHostSave?: string\r\n  defaultProxy?: string\r\n  // defaultProxySave?: string\r\n  // defaultVersion?: string\r\n  peerJsServer?: string\r\n  peerJsServerFallback?: string\r\n  promoteServers?: Array<{ ip, description, name?, version?, }>\r\n  mapsProvider?: string\r\n\r\n  appParams?: Record<string, any> // query string params\r\n  rightSideText?: string\r\n\r\n  defaultSettings?: Record<string, any>\r\n  forceSettings?: Record<string, boolean>\r\n  // hideSettings?: Record<string, boolean>\r\n  allowAutoConnect?: boolean\r\n  splashText?: string\r\n  splashTextFallback?: string\r\n  pauseLinks?: Array<Array<Record<string, any>>>\r\n  mobileButtons?: MobileButtonConfig[]\r\n  keybindings?: Record<string, any>\r\n  defaultLanguage?: string\r\n  displayLanguageSelector?: boolean\r\n  supportedLanguages?: string[]\r\n  showModsButton?: boolean\r\n  defaultUsername?: string\r\n  skinTexturesProxy?: string\r\n  alwaysReconnectButton?: boolean\r\n  reportBugButtonWithReconnect?: boolean\r\n  disabledCommands?: string[] // Array of command IDs to disable (e.g. ['general.jump', 'general.chat'])\r\n}\r\n\r\nexport const loadAppConfig = (appConfig: AppConfig) => {\r\n\r\n  if (miscUiState.appConfig) {\r\n    Object.assign(miscUiState.appConfig, appConfig)\r\n  } else {\r\n    miscUiState.appConfig = appConfig\r\n  }\r\n\r\n  if (appConfig.forceSettings) {\r\n    for (const [key, value] of Object.entries(appConfig.forceSettings)) {\r\n      if (value) {\r\n        disabledSettings.value.add(key)\r\n        // since the setting is forced, we need to set it to that value\r\n        if (appConfig.defaultSettings && key in appConfig.defaultSettings && !qsOptions[key]) {\r\n          options[key] = appConfig.defaultSettings[key]\r\n        }\r\n      } else {\r\n        disabledSettings.value.delete(key)\r\n      }\r\n    }\r\n  }\r\n  // todo apply defaultSettings to defaults even if not forced in case of remote config\r\n\r\n  if (appConfig.keybindings) {\r\n    Object.assign(customKeymaps, defaultsDeep(appConfig.keybindings, customKeymaps))\r\n    updateBinds(customKeymaps)\r\n  }\r\n\r\n  appViewer?.appConfigUdpate()\r\n\r\n  setStorageDataOnAppConfigLoad(appConfig)\r\n}\r\n\r\nexport const isBundledConfigUsed = !!process.env.INLINED_APP_CONFIG\r\n\r\nif (isBundledConfigUsed) {\r\n  loadAppConfig(process.env.INLINED_APP_CONFIG as AppConfig ?? {})\r\n} else {\r\n  void window.fetch('config.json').then(async res => res.json()).then(c => c, (error) => {\r\n  // console.warn('Failed to load optional app config.json', error)\r\n  // return {}\r\n    setLoadingScreenStatus('Failed to load app config.json', true)\r\n  }).then((config: AppConfig) => {\r\n    loadAppConfig(config)\r\n  })\r\n}\r\n","import { options } from '../optionsStorage'\r\n\r\ninterface Timer {\r\n  id: number\r\n  callback: () => void\r\n  targetTime: number\r\n  isInterval: boolean\r\n  interval?: number\r\n  cleanup?: () => void\r\n}\r\n\r\nlet nextTimerId = 1\r\nconst timers: Timer[] = []\r\n\r\n// TODO implementation breaks tps (something is wrong with intervals)\r\nconst fixBrowserTimers = () => {\r\n  const originalSetTimeout = window.setTimeout\r\n  //@ts-expect-error\r\n  window.setTimeout = (callback: () => void, delay: number) => {\r\n    if (!delay) {\r\n      return originalSetTimeout(callback)\r\n    }\r\n    const id = nextTimerId++\r\n    const targetTime = performance.now() + delay\r\n    timers.push({ id, callback, targetTime, isInterval: false })\r\n    originalSetTimeout(() => {\r\n      checkTimers()\r\n    }, delay)\r\n    return id\r\n  }\r\n\r\n  const originalSetInterval = window.setInterval\r\n  //@ts-expect-error\r\n  window.setInterval = (callback: () => void, interval: number) => {\r\n    if (!interval) {\r\n      return originalSetInterval(callback, interval)\r\n    }\r\n    const id = nextTimerId++\r\n    const targetTime = performance.now() + interval\r\n    const originalInterval = originalSetInterval(() => {\r\n      checkTimers()\r\n    }, interval)\r\n    timers.push({\r\n      id,\r\n      callback,\r\n      targetTime,\r\n      isInterval: true,\r\n      interval,\r\n      cleanup () {\r\n        originalClearInterval(originalInterval)\r\n      },\r\n    })\r\n    return id\r\n  }\r\n\r\n  const originalClearTimeout = window.clearTimeout\r\n  //@ts-expect-error\r\n  window.clearTimeout = (id: number) => {\r\n    const index = timers.findIndex(t => t.id === id)\r\n    if (index !== -1) {\r\n      timers.splice(index, 1)\r\n    }\r\n    return originalClearTimeout(id)\r\n  }\r\n\r\n  const originalClearInterval = window.clearInterval\r\n  //@ts-expect-error\r\n  window.clearInterval = (id: number) => {\r\n    const index = timers.findIndex(t => t.id === id)\r\n    if (index !== -1) {\r\n      const timer = timers[index]\r\n      if (timer.cleanup) {\r\n        timer.cleanup()\r\n      }\r\n      timers.splice(index, 1)\r\n    }\r\n    return originalClearInterval(id)\r\n  }\r\n}\r\n\r\nexport const checkTimers = () => {\r\n  const now = performance.now()\r\n\r\n  let triggered = false\r\n  for (let i = timers.length - 1; i >= 0; i--) {\r\n    const timer = timers[i]\r\n\r\n    if (now >= timer.targetTime) {\r\n      triggered = true\r\n      timer.callback()\r\n\r\n      if (timer.isInterval && timer.interval) {\r\n        // Reschedule interval\r\n        timer.targetTime = now + timer.interval\r\n      } else {\r\n        // Remove one-time timer\r\n        timers.splice(i, 1)\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!triggered) {\r\n    console.log('No timers triggered!')\r\n  }\r\n}\r\n\r\n// workaround for browser timers throttling after 5 minutes of tab inactivity\r\nexport const preventThrottlingWithSound = () => {\r\n  try {\r\n    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)()\r\n    const oscillator = audioContext.createOscillator()\r\n    const gainNode = audioContext.createGain()\r\n\r\n    // Unfortunatelly cant use 0\r\n    gainNode.gain.value = 0.001\r\n\r\n    // Connect nodes\r\n    oscillator.connect(gainNode)\r\n    gainNode.connect(audioContext.destination)\r\n\r\n    // Use a very low frequency\r\n    oscillator.frequency.value = 1\r\n\r\n    // Start playing\r\n    oscillator.start()\r\n\r\n    return async () => {\r\n      try {\r\n        oscillator.stop()\r\n        await audioContext.close()\r\n      } catch (err) {\r\n        console.warn('Error stopping silent audio:', err)\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.error('Error creating silent audio:', err)\r\n    return () => {}\r\n  }\r\n}\r\n","import { subscribeKey } from 'valtio/utils'\r\nimport { preventThrottlingWithSound } from '../core/timers'\r\nimport { options } from '../optionsStorage'\r\n\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  const abortController = new AbortController()\r\n\r\n  const maybeGoBackgroundKickPrevention = () => {\r\n    if (options.preventBackgroundTimeoutKick && !bot.backgroundKickPrevention) {\r\n      const unsub = preventThrottlingWithSound()\r\n      bot.on('end', unsub)\r\n      bot.backgroundKickPrevention = true\r\n    }\r\n  }\r\n  maybeGoBackgroundKickPrevention()\r\n  subscribeKey(options, 'preventBackgroundTimeoutKick', (value) => {\r\n    maybeGoBackgroundKickPrevention()\r\n  })\r\n\r\n  // wake lock\r\n  const requestWakeLock = async () => {\r\n    if (!('wakeLock' in navigator)) {\r\n      console.warn('Wake Lock API is not supported in this browser')\r\n      return\r\n    }\r\n\r\n    if (options.preventSleep && !bot.wakeLock && !bot.lockRequested) {\r\n      bot.lockRequested = true\r\n      bot.wakeLock = await navigator.wakeLock.request('screen').finally(() => {\r\n        bot.lockRequested = false\r\n      })\r\n\r\n      bot.wakeLock.addEventListener('release', () => {\r\n        bot.wakeLock = undefined\r\n      }, {\r\n        once: true,\r\n      })\r\n    }\r\n\r\n    if (!options.preventSleep && bot.wakeLock) {\r\n      void bot.wakeLock.release()\r\n    }\r\n  }\r\n  document.addEventListener('visibilitychange', () => {\r\n    if (document.visibilityState === 'visible') {\r\n      // we are back to the tab, request wake lock again\r\n      void requestWakeLock()\r\n    }\r\n  }, {\r\n    signal: abortController.signal,\r\n  })\r\n  void requestWakeLock()\r\n  subscribeKey(options, 'preventSleep', (value) => {\r\n    void requestWakeLock()\r\n  })\r\n\r\n  bot.on('end', () => {\r\n    if (bot.wakeLock) {\r\n      void bot.wakeLock.release()\r\n    }\r\n    abortController.abort()\r\n  })\r\n})\r\n\r\ndeclare module 'mineflayer' {\r\n  interface Bot {\r\n    backgroundKickPrevention?: boolean\r\n    wakeLock?: WakeLockSentinel\r\n    lockRequested?: boolean\r\n  }\r\n}\r\n","import { createMouse } from 'mineflayer-mouse'\r\nimport { Bot } from 'mineflayer'\r\nimport { Block } from 'prismarine-block'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { isGameActive, showModal } from '../../globalState'\r\n\r\nimport { isCypress } from '../../standaloneUtils'\r\nimport { playerState } from '../playerState'\r\nimport { sendVideoInteraction, videoCursorInteraction } from '../../customChannels'\r\n\r\nfunction cursorBlockDisplay (bot: Bot) {\r\n  const updateCursorBlock = (data?: { block: Block }) => {\r\n    if (!data?.block || bot.game.gameMode === 'spectator') {\r\n      playerState.reactive.lookingAtBlock = undefined\r\n      return\r\n    }\r\n\r\n    const { block } = data\r\n    playerState.reactive.lookingAtBlock = {\r\n      x: block.position.x,\r\n      y: block.position.y,\r\n      z: block.position.z,\r\n      shapes: bot.mouse.getBlockCursorShapes(block).map(shape => {\r\n        return bot.mouse.getDataFromShape(shape)\r\n      })\r\n    }\r\n  }\r\n\r\n  bot.on('highlightCursorBlock', updateCursorBlock)\r\n  bot.on('game', () => {\r\n    const block = bot.mouse.getCursorState().cursorBlock\r\n    updateCursorBlock(block ? { block } : undefined)\r\n  })\r\n\r\n  bot.on('blockBreakProgressStage', (block, stage) => {\r\n    const mergedShape = bot.mouse.getMergedCursorShape(block)\r\n    playerState.reactive.diggingBlock = stage === null ? undefined : {\r\n      x: block.position.x,\r\n      y: block.position.y,\r\n      z: block.position.z,\r\n      stage,\r\n      mergedShape: mergedShape ? bot.mouse.getDataFromShape(mergedShape) : undefined\r\n    }\r\n  })\r\n}\r\n\r\nexport default (bot: Bot) => {\r\n  bot.loadPlugin(createMouse({}))\r\n\r\n  domListeners(bot)\r\n  cursorBlockDisplay(bot)\r\n\r\n  otherListeners()\r\n}\r\n\r\nconst otherListeners = () => {\r\n  bot.on('startDigging', (block) => {\r\n    customEvents.emit('digStart')\r\n  })\r\n\r\n  bot.on('goingToSleep', () => {\r\n    showModal({ reactType: 'bed' })\r\n  })\r\n\r\n  bot.on('botArmSwingStart', (hand) => {\r\n    getThreeJsRendererMethods()?.changeHandSwingingState(true, hand === 'left')\r\n  })\r\n\r\n  bot.on('botArmSwingEnd', (hand) => {\r\n    getThreeJsRendererMethods()?.changeHandSwingingState(false, hand === 'left')\r\n  })\r\n\r\n  bot.on('startUsingItem', (item, slot, isOffhand, duration) => {\r\n    customEvents.emit('activateItem', item, isOffhand ? 45 : bot.quickBarSlot, isOffhand)\r\n    playerState.startUsingItem()\r\n  })\r\n\r\n  bot.on('stopUsingItem', () => {\r\n    playerState.stopUsingItem()\r\n  })\r\n}\r\n\r\nconst domListeners = (bot: Bot) => {\r\n  const abortController = new AbortController()\r\n  document.addEventListener('mousedown', (e) => {\r\n    if (e.isTrusted && !document.pointerLockElement && !isCypress()) return\r\n    if (!isGameActive(true)) return\r\n\r\n    getThreeJsRendererMethods()?.onPageInteraction()\r\n\r\n    const videoInteraction = videoCursorInteraction()\r\n    if (videoInteraction) {\r\n      sendVideoInteraction(videoInteraction.id, videoInteraction.x, videoInteraction.y, e.button === 0)\r\n      return\r\n    }\r\n\r\n    if (e.button === 0) {\r\n      bot.leftClickStart()\r\n    } else if (e.button === 2) {\r\n      bot.rightClickStart()\r\n    }\r\n  }, { signal: abortController.signal })\r\n\r\n  document.addEventListener('mouseup', (e) => {\r\n    if (e.button === 0) {\r\n      bot.leftClickEnd()\r\n    } else if (e.button === 2) {\r\n      bot.rightClickEnd()\r\n    }\r\n  }, { signal: abortController.signal })\r\n\r\n  bot.mouse.beforeUpdateChecks = () => {\r\n    if (!document.hasFocus() || !isGameActive(true)) {\r\n      // deactive all buttons\r\n      bot.mouse.buttons.fill(false)\r\n    }\r\n  }\r\n\r\n  bot.on('end', () => {\r\n    abortController.abort()\r\n  })\r\n}\r\n","export default () => {\r\n  // not plugin so its loaded earlier\r\n  customEvents.on('mineflayerBotCreated', () => {\r\n    botInit()\r\n  })\r\n}\r\n\r\nconst waitingPackets = {} as Record<string, Array<{ name: string, data: any }>>\r\n\r\nconst botInit = () => {\r\n  // PATCH READING\r\n  bot._client.on('packet', (data, meta) => {\r\n    if (meta.name === 'map_chunk') {\r\n      if (data.groundUp && data.bitMap === 1 && data.chunkData.every(x => x === 0)) {\r\n        data.chunkData = Buffer.from(Array.from({ length: 12_544 }).fill(0) as any)\r\n      }\r\n    }\r\n  })\r\n\r\n  // PATCH WRITING\r\n\r\n  const clientWrite = bot._client.write.bind(bot._client)\r\n  const sendAllPackets = (name: string, data: any) => {\r\n    for (const packet of waitingPackets[name]) {\r\n      clientWrite(packet.name, packet.data)\r\n    }\r\n    delete waitingPackets[name]\r\n  }\r\n\r\n  //@ts-expect-error\r\n  bot._client.write = (name: string, data: any) => {\r\n    // if (name === 'position' || name === 'position_look' || name === 'look' || name === 'teleport_confirm') {\r\n    //   const chunkX = Math.floor(bot.entity.position.x / 16)\r\n    //   const chunkZ = Math.floor(bot.entity.position.z / 16)\r\n    //   const loadedColumns = bot.world.getColumns()\r\n    //   if (loadedColumns.some((c) => c.chunkX === chunkX && c.chunkZ === chunkZ)) {\r\n    //     sendAllPackets('position', data)\r\n    //   } else {\r\n    //     waitingPackets['position'] = [...(waitingPackets['position'] || []), { name, data }]\r\n    //     return\r\n    //   }\r\n    // }\r\n    if (name === 'settings') {\r\n      data['viewDistance'] = Math.max(data['viewDistance'], 3)\r\n    }\r\n    return clientWrite(name, data)\r\n  }\r\n\r\n  // PATCH INTERACTIONS\r\n}\r\n","import { versionToNumber } from 'renderer/viewer/common/utils'\r\n\r\nexport default () => {\r\n  let i = 0\r\n  bot.pingProxy = async () => {\r\n    const curI = ++i\r\n    return new Promise(resolve => {\r\n      //@ts-expect-error\r\n      bot._client.socket._ws.send(`ping:${curI}`)\r\n      const date = Date.now()\r\n      const onPong = (received) => {\r\n        if (received !== curI.toString()) return\r\n        bot._client.socket.off('pong' as any, onPong)\r\n        resolve(Date.now() - date)\r\n      }\r\n      bot._client.socket.on('pong' as any, onPong)\r\n    })\r\n  }\r\n\r\n  let pingId = 0\r\n  bot.pingServer = async () => {\r\n    if (versionToNumber(bot.version) < versionToNumber('1.20.2')) return bot.player?.ping ?? -1\r\n    return new Promise<number>((resolve) => {\r\n      const curId = pingId++\r\n      bot._client.write('ping_request', { id: BigInt(curId) })\r\n      const date = Date.now()\r\n      const onPong = (data: { id: bigint }) => {\r\n        if (BigInt(data.id) !== BigInt(curId)) return\r\n        bot._client.off('ping_response' as any, onPong)\r\n        resolve(Date.now() - date)\r\n      }\r\n      bot._client.on('ping_response' as any, onPong)\r\n    })\r\n  }\r\n}\r\n\r\ndeclare module 'mineflayer' {\r\n  interface Bot {\r\n    pingProxy: () => Promise<number>\r\n    pingServer: () => Promise<number | undefined>\r\n  }\r\n}\r\n","import { Bot } from 'mineflayer'\r\nimport { getAppLanguage } from '../../optionsStorage'\r\n\r\nexport default () => {\r\n  customEvents.on('mineflayerBotCreated', () => {\r\n    bot.loadPlugin(plugin)\r\n  })\r\n}\r\n\r\nconst plugin = (bot: Bot) => {\r\n  bot.settings['locale'] = getAppLanguage()\r\n}\r\n","import { lastConnectOptions } from '../../react/AppStatusProvider'\r\nimport mouse from './mouse'\r\nimport packetsPatcher from './packetsPatcher'\r\nimport { localRelayServerPlugin } from './packetsRecording'\r\nimport ping from './ping'\r\nimport webFeatures from './webFeatures'\r\n\r\n// register\r\nwebFeatures()\r\npacketsPatcher()\r\n\r\n\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  if (lastConnectOptions.value!.server) {\r\n    bot.loadPlugin(ping)\r\n  }\r\n  bot.loadPlugin(mouse)\r\n  if (!lastConnectOptions.value!.worldStateFileContents) {\r\n    bot.loadPlugin(localRelayServerPlugin)\r\n  }\r\n})\r\n","import { miscUiState } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\nimport { progressNotificationsProxy, setNotificationProgress } from '../react/NotificationProvider'\r\n\r\nconst loadingChunksProgress = () => {\r\n  if (!appViewer) return\r\n  let gameStopped = false\r\n\r\n  const checkStartProgress = () => {\r\n    if (!bot.entity || !options.displayLoadingMessages) return\r\n\r\n    let lastChunksLoaded = {\r\n      count: 0,\r\n      time: 0,\r\n    }\r\n    const update = () => {\r\n      if (!appViewer) return\r\n      const chunksTotal = appViewer.nonReactiveState.world.chunksTotalNumber\r\n      if (chunksTotal === 0) return\r\n\r\n      const currentChunksLoaded = appViewer.rendererState.world.chunksLoaded.size\r\n\r\n      const deleteProgress = () => {\r\n        setNotificationProgress('loadingChunks', {\r\n          delete: true,\r\n        })\r\n        clearInterval(intervalId)\r\n      }\r\n\r\n      if (appViewer.rendererState.world.allChunksLoaded || gameStopped) {\r\n        deleteProgress()\r\n        return\r\n      }\r\n\r\n      if (currentChunksLoaded === lastChunksLoaded.count && lastChunksLoaded.count) {\r\n        if (Date.now() - lastChunksLoaded.time > 1000 * 5) {\r\n          deleteProgress()\r\n          return\r\n        }\r\n      } else {\r\n        lastChunksLoaded = {\r\n          count: currentChunksLoaded,\r\n          time: Date.now(),\r\n        }\r\n      }\r\n\r\n      setNotificationProgress('loadingChunks', {\r\n        message: 'Loading world chunks',\r\n        current: currentChunksLoaded,\r\n        total: chunksTotal,\r\n        priority: 1,\r\n      })\r\n    }\r\n\r\n    const intervalId = setInterval(update, 500)\r\n    update()\r\n  }\r\n\r\n  const startInventoryTexturesProgress = () => {\r\n    if (!miscUiState.gameLoaded) return\r\n    setNotificationProgress('inventoryTextures', {\r\n      message: 'Processing GUI textures',\r\n    })\r\n  }\r\n\r\n  customEvents.on('gameLoaded', () => {\r\n    checkStartProgress()\r\n    if (!appViewer.resourcesManager.currentResources?.guiAtlas) {\r\n      startInventoryTexturesProgress()\r\n    }\r\n\r\n    bot._client.on('login', () => {\r\n      checkStartProgress()\r\n    })\r\n    bot._client.on('respawn', () => {\r\n      checkStartProgress()\r\n    })\r\n\r\n    bot.on('end', () => {\r\n      gameStopped = true\r\n      // remove all progress notifications\r\n      progressNotificationsProxy.loaders = []\r\n    })\r\n  })\r\n\r\n  appViewer.resourcesManager.on('assetsInventoryStarted', () => {\r\n    startInventoryTexturesProgress()\r\n  })\r\n  appViewer.resourcesManager.on('assetsInventoryReady', () => {\r\n    setNotificationProgress('inventoryTextures', {\r\n      delete: true,\r\n    })\r\n  })\r\n}\r\n\r\nsetTimeout(() => {\r\n  loadingChunksProgress()\r\n})\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"crosshair\":\"crosshair-eLqfh9\"};","import { proxy, useSnapshot } from 'valtio'\r\nimport { useEffect } from 'react'\r\nimport { activeModalStack, miscUiState } from '../globalState'\r\nimport SharedHudVars from './SharedHudVars'\r\nimport styles from './GamepadUiCursor.module.css'\r\n\r\nexport const gamepadUiCursorState = proxy({\r\n  x: 50,\r\n  y: 50,\r\n  multiply: 1,\r\n  display: false\r\n})\r\nglobalThis.gamepadUiCursorState = gamepadUiCursorState\r\n\r\nexport const moveGamepadCursorByPx = (value: number, isX: boolean) => {\r\n  value *= gamepadUiCursorState.multiply * 3\r\n  const valueToPercentage = value / (isX ? window.innerWidth : window.innerHeight) * 100\r\n  gamepadUiCursorState[isX ? 'x' : 'y'] += valueToPercentage\r\n}\r\n\r\nexport default () => {\r\n  const hasModals = useSnapshot(activeModalStack).length > 0\r\n  const { x, y } = useSnapshot(gamepadUiCursorState)\r\n  const { usingGamepadInput, gameLoaded } = useSnapshot(miscUiState)\r\n\r\n  const doDisplay = usingGamepadInput && (hasModals || !gameLoaded)\r\n\r\n  useEffect(() => {\r\n    document.body.style.cursor = gameLoaded && !hasModals && usingGamepadInput ? 'none' : 'auto'\r\n  }, [usingGamepadInput, hasModals, gameLoaded])\r\n\r\n  useEffect(() => {\r\n    gamepadUiCursorState.display = doDisplay\r\n  }, [doDisplay])\r\n\r\n  if (!doDisplay) return null\r\n\r\n  return <SharedHudVars>\r\n    <div className={styles.crosshair} style={{ left: `${x}%`, top: `${y}%` }} />\r\n  </SharedHudVars>\r\n}\r\n","\r\n\r\nexport const parseServerAddress = (address: string | undefined, removeHttp = true): ParsedServerAddress => {\r\n  if (!address) {\r\n    return { host: '', isWebSocket: false, serverIpFull: '' }\r\n  }\r\n\r\n  if (/^ws:[^/]/.test(address)) address = address.replace('ws:', 'ws://')\r\n  if (/^wss:[^/]/.test(address)) address = address.replace('wss:', 'wss://')\r\n  const isWebSocket = address.startsWith('ws://') || address.startsWith('wss://')\r\n  if (isWebSocket) {\r\n    return { host: address, isWebSocket: true, serverIpFull: address }\r\n  }\r\n\r\n  if (removeHttp) {\r\n    address = address.replace(/^https?:\\/\\//, '')\r\n  }\r\n\r\n  const parts = address.split(':')\r\n\r\n  let version: string | null = null\r\n  let port: string | null = null\r\n\r\n  for (let i = 0; i < parts.length; i++) {\r\n    const part = parts[i]\r\n    if (/^\\d+\\.\\d+(\\.\\d+)?$/.test(part)) {\r\n      version = part\r\n      parts.splice(i, 1)\r\n      i--\r\n    }\r\n    if (/^\\d+$/.test(part)) {\r\n      port = part\r\n      parts.splice(i, 1)\r\n      i--\r\n    }\r\n  }\r\n\r\n  const host = parts.join(':')\r\n  return {\r\n    host,\r\n    ...(port ? { port } : {}),\r\n    ...(version ? { version } : {}),\r\n    isWebSocket: false,\r\n    serverIpFull: port ? `${host}:${port}` : host\r\n  }\r\n}\r\n\r\nexport interface ParsedServerAddress {\r\n  host: string\r\n  port?: string\r\n  version?: string\r\n  isWebSocket: boolean\r\n  serverIpFull: string\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"root\":\"root-HBZyzP\",\"content\":\"content-C05XsQ\",\"content_loading\":\"content_loading-whQTDO\",\"contentLoading\":\"content_loading-whQTDO\",\"world_root\":\"world_root-HUO6kD\",\"worldRoot\":\"world_root-HUO6kD\",\"world_title\":\"world_title-ZeGEbR\",\"worldTitle\":\"world_title-ZeGEbR\",\"world_title_right\":\"world_title_right-_QaLaq\",\"worldTitleRight\":\"world_title_right-_QaLaq\",\"world_info\":\"world_info-aesWwe\",\"worldInfo\":\"world_info-aesWwe\",\"world_info_formatted\":\"world_info_formatted-T9yz4t\",\"worldInfoFormatted\":\"world_info_formatted-T9yz4t\",\"world_info_description_line\":\"world_info_description_line-m_UAFX\",\"worldInfoDescriptionLine\":\"world_info_description_line-m_UAFX\",\"world_image\":\"world_image-RCHVi3\",\"worldImage\":\"world_image-RCHVi3\",\"image_missing\":\"image_missing-kzcgld\",\"imageMissing\":\"image_missing-kzcgld\",\"world_focused\":\"world_focused-KhkWMT\",\"worldFocused\":\"world_focused-KhkWMT\",\"title\":\"title-zNQMwq\"};","import Button from './Button'\r\n\r\ninterface Props {\r\n  tabs: string[]\r\n  activeTab: string\r\n  onTabChange: (tab: string) => void\r\n\r\n  disabledTabs?: string[]\r\n  labels?: Record<string, string>\r\n  fullSize?: boolean\r\n  style?: React.CSSProperties\r\n}\r\n\r\nexport default ({ tabs, activeTab, labels, onTabChange, fullSize, style, disabledTabs }: Props) => {\r\n  return <div style={{\r\n    width: fullSize ? '100%' : undefined,\r\n    display: fullSize ? 'flex' : undefined,\r\n    ...style,\r\n  }}\r\n  >\r\n    {tabs.map(tab => {\r\n      const active = tab === activeTab\r\n      return <div\r\n        key={tab} style={{\r\n          position: 'relative',\r\n          width: fullSize ? '100%' : 150,\r\n        }}\r\n      >\r\n        <Button\r\n          disabled={active || disabledTabs?.includes(tab)} style={{\r\n            width: '100%',\r\n            height: '100%',\r\n            // background: active ? 'rgb(77, 77, 77)' : 'rgb(114, 114, 114)',\r\n            color: 'white',\r\n            cursor: 'pointer',\r\n            fontSize: 9,\r\n            padding: '2px 0px',\r\n          }} onClick={() => {\r\n            onTabChange(tab)\r\n          }}\r\n        >{labels?.[tab] ?? tab}\r\n        </Button>\r\n        {active && <div style={{\r\n          position: 'absolute',\r\n          bottom: 0,\r\n          left: 0,\r\n          right: 0,\r\n          height: 1,\r\n          background: 'white',\r\n          width: '50%',\r\n          margin: 'auto',\r\n        }}\r\n        />}\r\n      </div>\r\n    })}\r\n  </div>\r\n}\r\n","import { useUtilsEffect } from '@zardoy/react-util'\r\nimport { useEffect, useState } from 'react'\r\n\r\nconst SMALL_SCREEN_WIDTH = 440\r\nexport const useIsSmallWidth = () => {\r\n  const [isSmall, setIsSmall] = useState(() => document.documentElement.clientWidth <= SMALL_SCREEN_WIDTH)\r\n\r\n  useEffect(() => {\r\n    const checkWidth = () => {\r\n      setIsSmall(document.documentElement.clientWidth <= SMALL_SCREEN_WIDTH)\r\n    }\r\n    addEventListener('resize', checkWidth)\r\n    return () => {\r\n      removeEventListener('resize', checkWidth)\r\n    }\r\n  }, [])\r\n\r\n  return isSmall\r\n}\r\n\r\nexport const usePassesWindowDimensions = (minWidth: number | null = null, minHeight: number | null = null) => {\r\n  const [passes, setPasses] = useState(() => {\r\n    const width = document.documentElement.clientWidth\r\n    const height = document.documentElement.clientHeight\r\n    return (minWidth === null || width >= minWidth) && (minHeight === null || height >= minHeight)\r\n  })\r\n\r\n  useEffect(() => {\r\n    const checkDimensions = () => {\r\n      const width = document.documentElement.clientWidth\r\n      const height = document.documentElement.clientHeight\r\n      setPasses((minWidth === null || width >= minWidth) && (minHeight === null || height >= minHeight))\r\n    }\r\n    addEventListener('resize', checkDimensions)\r\n    return () => {\r\n      removeEventListener('resize', checkDimensions)\r\n    }\r\n  }, [minWidth, minHeight])\r\n\r\n  return passes\r\n}\r\n\r\nexport const useCopyKeybinding = (getCopyText: () => string | undefined) => {\r\n  useUtilsEffect(({ signal }) => {\r\n    addEventListener('keydown', (e) => {\r\n      if (e.code === 'KeyC' && (e.ctrlKey || e.metaKey) && !e.shiftKey && !e.altKey) {\r\n        const { activeElement } = document\r\n        if (activeElement instanceof HTMLInputElement || activeElement instanceof HTMLTextAreaElement) {\r\n          return\r\n        }\r\n        if (window.getSelection()?.toString()) {\r\n          return\r\n        }\r\n        e.preventDefault()\r\n        const copyText = getCopyText()\r\n        if (!copyText) return\r\n        void navigator.clipboard.writeText(copyText)\r\n      }\r\n    }, { signal })\r\n  }, [getCopyText])\r\n}\r\n\r\nexport const useIsHashActive = (hash: `#${string}`) => {\r\n  const [isActive, setIsActive] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const checkHash = () => {\r\n      setIsActive(location.hash === hash)\r\n    }\r\n    checkHash()\r\n    addEventListener('hashchange', checkHash)\r\n    return () => {\r\n      removeEventListener('hashchange', checkHash)\r\n    }\r\n  }, [])\r\n  return isActive\r\n}\r\n","import classNames from 'classnames'\r\nimport React, { Fragment, useEffect, useMemo, useRef, useState } from 'react'\r\n\r\n// todo optimize size\r\nimport missingWorldPreview from 'mc-assets/dist/other-textures/latest/gui/presets/isles.png'\r\nimport { filesize } from 'filesize'\r\nimport useTypedEventListener from 'use-typed-event-listener'\r\nimport { focusable } from 'tabbable'\r\nimport styles from './singleplayer.module.css'\r\nimport Input from './Input'\r\nimport Button from './Button'\r\nimport Tabs from './Tabs'\r\nimport MessageFormattedString from './MessageFormattedString'\r\nimport { useIsSmallWidth } from './simpleHooks'\r\nimport PixelartIcon from './PixelartIcon'\r\n\r\nexport interface WorldProps {\r\n  name: string\r\n  title: string\r\n  size?: number\r\n  lastPlayed?: number\r\n  isFocused?: boolean\r\n  iconSrc?: string\r\n  detail?: string\r\n  formattedTextOverride?: string\r\n  worldNameRight?: string\r\n  worldNameRightGrayed?: string\r\n  afterTitleUi?: React.ReactNode\r\n  onFocus?: (name: string) => void\r\n  onInteraction?(interaction: 'enter' | 'space')\r\n  elemRef?: React.Ref<HTMLDivElement>\r\n  offline?: boolean\r\n  group?: string\r\n}\r\n\r\nconst GroupHeader = ({ name, count, expanded, onToggle }: { name: string, count: number, expanded: boolean, onToggle: () => void }) => {\r\n  return <div\r\n    className={styles.world_root}\r\n    style={{ background: 'none', cursor: 'pointer', height: 'auto', fontSize: '8px' }}\r\n    onClick={onToggle}\r\n  >\r\n    <div style={{ display: 'flex', alignItems: 'center', gap: '4px', color: '#bcbcbc' }}>\r\n      <span>{expanded ? '▼' : '▶'}</span>\r\n      <span>{name}</span>\r\n      <span>({count})</span>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nconst World = ({ name, isFocused, title, lastPlayed, size, detail = '', onFocus, onInteraction, iconSrc, formattedTextOverride, worldNameRight, worldNameRightGrayed, afterTitleUi, elemRef, offline }: WorldProps & { ref?: React.Ref<HTMLDivElement> }) => {\r\n  const timeRelativeFormatted = useMemo(() => {\r\n    if (!lastPlayed) return ''\r\n    const formatter = new Intl.RelativeTimeFormat('en', { numeric: 'auto' })\r\n    const diff = Date.now() - lastPlayed\r\n    const minutes = Math.floor(diff / 1000 / 60)\r\n    const hours = Math.floor(minutes / 60)\r\n    const days = Math.floor(hours / 24)\r\n    // const weeks = Math.floor(days / 7)\r\n    // const months = Math.floor(days / 30)\r\n    if (days > 0) return formatter.format(-days, 'day')\r\n    if (hours > 0) return formatter.format(-hours, 'hour')\r\n    return formatter.format(-minutes, 'minute')\r\n  }, [lastPlayed])\r\n  const sizeFormatted = useMemo(() => {\r\n    if (!size) return ''\r\n    return filesize(size)\r\n  }, [size])\r\n\r\n  return <div\r\n    ref={elemRef}\r\n    className={classNames(styles.world_root, isFocused ? styles.world_focused : undefined)}\r\n    style={{ position: 'relative' }}\r\n    tabIndex={0}\r\n    onFocus={() => onFocus?.(name)}\r\n    onKeyDown={(e) => {\r\n      if (e.code === 'Enter' || e.code === 'Space') {\r\n        e.preventDefault()\r\n        onInteraction?.(e.code === 'Enter' ? 'enter' : 'space')\r\n      }\r\n    }}\r\n    onDoubleClick={() => onInteraction?.('enter')}\r\n  >\r\n    <img className={`${styles.world_image} ${iconSrc ? '' : styles.image_missing}`} src={iconSrc ?? missingWorldPreview} alt='' />\r\n    <div className={styles.world_info}>\r\n      <div className={styles.world_title}>\r\n        <div>{title}</div>\r\n        <div className={styles.world_title_right}>\r\n          {worldNameRightGrayed && <span style={{ color: '#878787', fontSize: 8 }}>{worldNameRightGrayed}</span>}\r\n          {offline ? (\r\n            <span style={{ color: 'red', display: 'flex', alignItems: 'center', gap: 4 }}>\r\n              <PixelartIcon iconName=\"signal-off\" width={12} />\r\n              Offline\r\n            </span>\r\n          ) : worldNameRight?.startsWith('ws') ? (\r\n            <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\r\n              <PixelartIcon iconName=\"cellular-signal-3\" width={12} />\r\n              {worldNameRight.slice(3)}\r\n            </span>\r\n          ) : worldNameRight}\r\n        </div>\r\n      </div>\r\n      {formattedTextOverride ? <div className={styles.world_info_formatted}>\r\n        <MessageFormattedString message={formattedTextOverride} />\r\n      </div> :\r\n        <>\r\n          <div className={styles.world_info_description_line}>{timeRelativeFormatted} {detail.slice(-30)}</div>\r\n          <div className={styles.world_info_description_line}>{sizeFormatted}</div>\r\n        </>}\r\n    </div>\r\n    <div style={{ position: 'absolute', left: '100%', top: '50%', transform: 'translateY(-50%)', marginLeft: 4, display: 'flex', alignItems: 'center' }}>\r\n      {afterTitleUi}\r\n    </div>\r\n  </div>\r\n}\r\n\r\ninterface Props {\r\n  worldData: WorldProps[] | null // null means loading\r\n  serversLayout?: boolean\r\n  firstRowChildrenOverride?: React.ReactNode\r\n  searchRowChildrenOverride?: React.ReactNode\r\n  providers?: Record<string, string>\r\n  activeProvider?: string\r\n  setActiveProvider?: (provider: string) => void\r\n  providerActions?: Record<string, (() => void) | undefined | JSX.Element>\r\n  disabledProviders?: string[]\r\n  isReadonly?: boolean\r\n  error?: string\r\n  warning?: string\r\n  warningAction?: () => void\r\n  warningActionLabel?: string\r\n  hidden?: boolean\r\n\r\n  onWorldAction (action: 'load' | 'export' | 'delete' | 'edit', worldName: string): void\r\n  onGeneralAction (action: 'cancel' | 'create'): void\r\n  onRowSelect? (name: string, index: number): void\r\n  defaultSelectedRow?: number\r\n  selectedRow?: number\r\n  listStyle?: React.CSSProperties\r\n  setListHovered?: (hovered: boolean) => void\r\n  secondRowStyles?: React.CSSProperties\r\n  lockedEditing?: boolean\r\n  retriggerFocusCounter?: number\r\n}\r\n\r\nexport default ({\r\n  worldData,\r\n  onGeneralAction,\r\n  onWorldAction,\r\n  firstRowChildrenOverride,\r\n  serversLayout,\r\n  searchRowChildrenOverride,\r\n  activeProvider,\r\n  setActiveProvider,\r\n  providerActions,\r\n  providers = {},\r\n  disabledProviders,\r\n  error,\r\n  isReadonly,\r\n  warning, warningAction, warningActionLabel,\r\n  hidden,\r\n  onRowSelect,\r\n  defaultSelectedRow,\r\n  selectedRow,\r\n  listStyle,\r\n  setListHovered,\r\n  secondRowStyles,\r\n  lockedEditing,\r\n  retriggerFocusCounter\r\n}: Props) => {\r\n  const containerRef = useRef<any>()\r\n  const firstButton = useRef<HTMLButtonElement>(null)\r\n  const worldRefs = useRef<Record<string, HTMLDivElement | null>>({})\r\n\r\n  useTypedEventListener(window, 'keydown', (e) => {\r\n    if ((e.code === 'ArrowDown' || e.code === 'ArrowUp')) {\r\n      e.preventDefault()\r\n      const dir = e.code === 'ArrowDown' ? 1 : -1\r\n      const elements = focusable(containerRef.current).filter(e => e.getAttribute('tabindex') !== '-1')\r\n      const focusedElemIndex = elements.indexOf(document.activeElement as HTMLElement)\r\n      if (focusedElemIndex === -1) return\r\n      const nextElem = elements[focusedElemIndex + dir]\r\n      nextElem?.focus()\r\n    }\r\n  })\r\n\r\n  const [search, setSearch] = useState('')\r\n  const [focusedWorld, setFocusedWorld] = useState(defaultSelectedRow === undefined ? '' : worldData?.[defaultSelectedRow]?.name ?? '')\r\n  const [expandedGroups, setExpandedGroups] = useState<Record<string, boolean>>({})\r\n\r\n  useEffect(() => {\r\n    setFocusedWorld('')\r\n  }, [activeProvider])\r\n\r\n  useEffect(() => {\r\n    if (selectedRow === undefined) return\r\n    const worldName = worldData?.[selectedRow]?.name\r\n    setFocusedWorld(worldName ?? '')\r\n    if (worldName) {\r\n      worldRefs.current[worldName]?.focus()\r\n    }\r\n  }, [selectedRow, worldData?.[selectedRow as any]?.name, retriggerFocusCounter])\r\n\r\n  const onRowSelectHandler = (name: string, index: number) => {\r\n    onRowSelect?.(name, index)\r\n    setFocusedWorld(name)\r\n  }\r\n  const isSmallWidth = useIsSmallWidth()\r\n\r\n  const toggleGroup = (groupName: string) => {\r\n    setExpandedGroups(prev => ({\r\n      ...prev,\r\n      [groupName]: prev[groupName] === undefined ? false : !prev[groupName]\r\n    }))\r\n  }\r\n\r\n  return <div ref={containerRef} hidden={hidden}>\r\n    <div className=\"dirt-bg\" />\r\n    <div className={classNames('fullscreen', styles.root)}>\r\n      <span className={classNames('screen-title', styles.title)}>{serversLayout ? 'Join Java Servers' : 'Select Saved World'}</span>\r\n      {searchRowChildrenOverride || <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n        <Input autoFocus value={search} onChange={({ target: { value } }) => setSearch(value)} />\r\n      </div>}\r\n      <div className={classNames(styles.content, !worldData && styles.content_loading)}>\r\n        <Tabs\r\n          tabs={Object.keys(providers)} disabledTabs={disabledProviders} activeTab={activeProvider ?? ''} labels={providers} onTabChange={(tab) => {\r\n            setActiveProvider?.(tab as any)\r\n          }} fullSize\r\n        />\r\n        <div\r\n          style={{\r\n            marginTop: 3,\r\n            ...listStyle\r\n          }}\r\n          onMouseEnter={() => setListHovered?.(true)}\r\n          onMouseLeave={() => setListHovered?.(false)}\r\n        >\r\n          {\r\n            providerActions && <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              // overflow: 'auto',\r\n            }}\r\n            >\r\n              <span style={{ fontSize: 9, marginRight: 3 }}>Actions: </span> {Object.entries(providerActions).map(([label, action]) => (\r\n                typeof action === 'function' ? <Button key={label} onClick={action} style={{ width: 100 }}>{label}</Button> : <Fragment key={label}>{action}</Fragment>\r\n              ))}\r\n            </div>\r\n          }\r\n          {\r\n            worldData\r\n              ? (() => {\r\n                const filtered = worldData.filter(data => data.title.toLowerCase().includes(search.toLowerCase()))\r\n                const groups = filtered.reduce<Record<string, WorldProps[]>>((acc, world) => {\r\n                  const group = world.group || ''\r\n                  if (!acc[group]) acc[group] = []\r\n                  acc[group].push(world)\r\n                  return acc\r\n                }, {})\r\n\r\n                return Object.entries(groups).map(([groupName, worlds]) => (\r\n                  <React.Fragment key={groupName}>\r\n                    <GroupHeader\r\n                      name={groupName}\r\n                      count={worlds.length}\r\n                      expanded={expandedGroups[groupName] ?? true}\r\n                      onToggle={() => toggleGroup(groupName)}\r\n                    />\r\n                    {(expandedGroups[groupName] ?? true) && worlds.map(({ name, size, detail, ...rest }, index) => {\r\n                      const key = name\r\n                      return (\r\n                        <World\r\n                          data-key={key}\r\n                          key={key}\r\n                          {...rest}\r\n                          size={size}\r\n                          name={name}\r\n                          elemRef={el => { worldRefs.current[name] = el }}\r\n                          onFocus={row => onRowSelectHandler(row, index)}\r\n                          isFocused={focusedWorld === name}\r\n                          onInteraction={(interaction) => {\r\n                            if (interaction === 'enter') onWorldAction('load', name)\r\n                            else if (interaction === 'space') firstButton.current?.focus()\r\n                          }}\r\n                          detail={detail}\r\n                        />\r\n                      )\r\n                    })}\r\n                  </React.Fragment>\r\n                ))\r\n              })()\r\n              : <div style={{\r\n                fontSize: 10,\r\n                color: error ? 'red' : 'lightgray',\r\n              }}>{error || 'Loading (check #dev console if loading too long)...'}\r\n              </div>\r\n          }\r\n          {\r\n            warning && <div style={{\r\n              fontSize: 8,\r\n              color: '#ffa500ba',\r\n              marginTop: 5,\r\n              textAlign: 'center',\r\n            }}\r\n            >\r\n              {warning} {warningAction && <a onClick={warningAction}>{warningActionLabel}</a>}\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n      <div style={{ display: 'flex', flexDirection: 'column', minWidth: 400, paddingBottom: 3, alignItems: 'center', }}>\r\n        {firstRowChildrenOverride || <div>\r\n          <Button rootRef={firstButton} disabled={!focusedWorld} onClick={() => onWorldAction('load', focusedWorld)}>Load World</Button>\r\n          <Button onClick={() => onGeneralAction('create')} disabled={isReadonly}>Create New World</Button>\r\n        </div>}\r\n        <div style={{\r\n          ...secondRowStyles,\r\n          ...isSmallWidth ? { display: 'grid', gridTemplateColumns: '1fr 1fr' } : {}\r\n        }}>\r\n          {serversLayout ? <Button style={{ width: 100 }} disabled={!focusedWorld || lockedEditing} onClick={() => onWorldAction('edit', focusedWorld)}>Edit</Button> : <Button style={{ width: 100 }} disabled={!focusedWorld} onClick={() => onWorldAction('export', focusedWorld)}>Export</Button>}\r\n          <Button style={{ width: 100 }} disabled={!focusedWorld || lockedEditing} onClick={() => onWorldAction('delete', focusedWorld)}>Delete</Button>\r\n          {serversLayout ?\r\n            <Button style={{ width: 100 }} onClick={() => onGeneralAction('create')} disabled={lockedEditing}>Add</Button> :\r\n            <Button style={{ width: 100 }} onClick={() => onWorldAction('edit', focusedWorld)} disabled>Edit</Button>}\r\n          <Button style={{ width: 100 }} onClick={() => onGeneralAction('cancel')}>Cancel</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-Y5gFld\",\"input\":\"input-Vt4rMm\"};","import { useState, CSSProperties } from 'react'\r\nimport Creatable from 'react-select/creatable'\r\nimport Input from './Input'\r\nimport './Select.css'\r\nimport styles from './select.module.css'\r\n\r\n\r\nexport interface OptionStorage {\r\n  value: string,\r\n  label: string\r\n}\r\n\r\ninterface Props {\r\n  initialOptions: OptionStorage[]\r\n  updateOptions: (options: string) => void\r\n  getCssOnInput?: (input: string) => CSSProperties | undefined\r\n  onValueChange?: (newVal: string) => void\r\n  defaultValue?: { value: string, label: string }\r\n  placeholder?: string\r\n  containerStyle?: CSSProperties\r\n  disabled?: boolean\r\n}\r\n\r\nexport default ({\r\n  initialOptions,\r\n  updateOptions,\r\n  getCssOnInput,\r\n  onValueChange,\r\n  defaultValue,\r\n  containerStyle,\r\n  placeholder,\r\n  disabled\r\n}: Props) => {\r\n  const [inputValue, setInputValue] = useState<string | undefined>(defaultValue?.label ?? '')\r\n  const [currValue, setCurrValue] = useState<string | undefined>(defaultValue?.label ?? '')\r\n  const [inputStyle, setInputStyle] = useState<CSSProperties>({})\r\n  const [isFirstClick, setIsFirstClick] = useState(true)\r\n\r\n  return <Creatable\r\n    options={initialOptions}\r\n    defaultValue={defaultValue}\r\n    blurInputOnSelect={true}\r\n    hideSelectedOptions={false}\r\n    maxMenuHeight={100}\r\n    isClearable={true}\r\n    formatCreateLabel={(value) => {\r\n      return 'Use \"' + value + '\"'\r\n    }}\r\n    isDisabled={disabled}\r\n    placeholder={placeholder ?? ''}\r\n    onChange={(e, action) => {\r\n      console.log('value:', e?.value)\r\n      setCurrValue(e?.label)\r\n      setInputValue(e?.label)\r\n      onValueChange?.(e?.value ?? '')\r\n      updateOptions?.(e?.value ?? '')\r\n      setInputStyle(getCssOnInput?.(e?.value ?? '') ?? {})\r\n    }}\r\n    onInputChange={(e) => {\r\n      setIsFirstClick(false)\r\n      setInputValue(e)\r\n    }}\r\n    inputValue={inputValue}\r\n    onFocus={(state) => {\r\n      setInputValue(currValue)\r\n    }}\r\n    filterOption={(option, value) => {\r\n      return isFirstClick || option.label.includes(value)\r\n    }}\r\n    onMenuOpen={() => {\r\n      setIsFirstClick(true)\r\n    }}\r\n    menuPortalTarget={document.body}\r\n    classNames={{\r\n      control (state) {\r\n        return styles.container\r\n      },\r\n      input (state) {\r\n        return styles.input\r\n      },\r\n      option (state) {\r\n        return styles.container\r\n      }\r\n    }}\r\n    styles={{\r\n      menuPortal (base, state) { return { ...base, zIndex: 10, transform: 'scale(var(--guiScale))', transformOrigin: 'top left' } },\r\n      container (base, state) { return { ...base, position: 'relative', zIndex: 10 } },\r\n      control (base, state) { return { ...containerStyle, ...inputStyle } },\r\n      menu (base, state) { return { position: 'absolute', zIndex: 10 } },\r\n      option (base, state) {\r\n        return {\r\n          boxSizing: 'border-box',\r\n          padding: '3px',\r\n          backgroundColor: 'black',\r\n          border: state.isFocused ? '1px solid white' : '1px solid grey',\r\n          height: 'fit-content',\r\n          ...containerStyle\r\n        }\r\n      },\r\n      input (base, state) { return {} },\r\n      indicatorsContainer (base, state) { return { display: 'none' } },\r\n      placeholder (base, state) { return { ...base, padding: '3px', position: 'absolute' } },\r\n      singleValue (base, state) { return { ...base, margin: '0px', position: 'absolute', color: 'white' } },\r\n      valueContainer (base, state) { return { ...base, padding: '3px' } },\r\n      noOptionsMessage (base, state) { return { display: 'none' } }\r\n    }}\r\n  />\r\n}\r\n","import React, { useMemo } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { miscUiState } from '../globalState'\r\nimport { appQueryParams } from '../appParams'\r\nimport Singleplayer from './Singleplayer'\r\nimport Input from './Input'\r\nimport Button from './Button'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport Select from './Select'\r\nimport { BaseServerInfo } from './AddServerOrConnect'\r\nimport { useIsSmallWidth } from './simpleHooks'\r\nimport { appStorage, SavedProxiesData, ServerHistoryEntry } from './appStorageProvider'\r\n\r\nconst getInitialProxies = () => {\r\n  const proxies = [] as string[]\r\n  if (miscUiState.appConfig?.defaultProxy) {\r\n    proxies.push(miscUiState.appConfig.defaultProxy)\r\n  }\r\n  return proxies\r\n}\r\n\r\nexport const getCurrentProxy = (): string | undefined => {\r\n  return appQueryParams.proxy ?? appStorage.proxiesData?.selected ?? getInitialProxies()[0]\r\n}\r\n\r\nexport const getCurrentUsername = () => {\r\n  return appQueryParams.username ?? appStorage.username\r\n}\r\n\r\ninterface Props extends React.ComponentProps<typeof Singleplayer> {\r\n  joinServer: (info: BaseServerInfo | string, additional: {\r\n    shouldSave?: boolean\r\n    index?: number\r\n  }) => void\r\n  onProfileClick?: () => void\r\n  setQuickConnectIp?: (ip: string) => void\r\n}\r\n\r\nexport default ({\r\n  joinServer,\r\n  onProfileClick,\r\n  setQuickConnectIp,\r\n  ...props\r\n}: Props) => {\r\n  const snap = useSnapshot(appStorage)\r\n  const username = useMemo(() => getCurrentUsername(), [appQueryParams.username, appStorage.username])\r\n  const [serverIp, setServerIp] = React.useState('')\r\n  const [save, setSave] = React.useState(true)\r\n  const [activeHighlight, setActiveHighlight] = React.useState(undefined as 'quick-connect' | 'server-list' | undefined)\r\n\r\n  const updateProxies = (newData: SavedProxiesData) => {\r\n    appStorage.proxiesData = newData\r\n  }\r\n\r\n  const setUsername = (username: string) => {\r\n    appStorage.username = username\r\n  }\r\n\r\n  const getActiveHighlightStyles = (type: typeof activeHighlight) => {\r\n    const styles: React.CSSProperties = {\r\n      transition: 'filter 0.2s',\r\n    }\r\n    if (activeHighlight && activeHighlight !== type) {\r\n      styles.filter = 'brightness(0.7)'\r\n    }\r\n    return styles\r\n  }\r\n\r\n  const isSmallWidth = useIsSmallWidth()\r\n\r\n  const initialProxies = getInitialProxies()\r\n  const proxiesData = snap.proxiesData ?? { proxies: initialProxies, selected: initialProxies[0] }\r\n  return <Singleplayer\r\n    {...props}\r\n    worldData={props.worldData ? props.worldData.map(world => ({\r\n      ...world\r\n    })) : null}\r\n    firstRowChildrenOverride={<form\r\n      style={{ width: '100%', display: 'flex', justifyContent: 'center' }} onSubmit={(e) => {\r\n        e.preventDefault()\r\n        joinServer(serverIp, { shouldSave: save })\r\n      }}\r\n    >\r\n      <div\r\n        style={{ display: 'flex', gap: 5, alignItems: 'center', ...getActiveHighlightStyles('quick-connect') }}\r\n        className='quick-connect-row'\r\n        onMouseEnter={() => setActiveHighlight('quick-connect')}\r\n        onMouseLeave={() => setActiveHighlight(undefined)}\r\n      >\r\n        <Input\r\n          required\r\n          placeholder='Quick Connect IP (:version)'\r\n          value={serverIp}\r\n          onChange={({ target: { value } }) => {\r\n            setQuickConnectIp?.(value)\r\n            setServerIp(value)\r\n          }}\r\n          width={isSmallWidth ? 120 : 180}\r\n          list=\"server-history\"\r\n          autoComplete=\"on\"\r\n          autoCorrect=\"off\"\r\n          autoCapitalize=\"off\"\r\n          spellCheck=\"false\"\r\n        />\r\n        <datalist id=\"server-history\">\r\n          {[...(snap.serversHistory ?? [])].sort((a, b) => b.numConnects - a.numConnects).map((server) => (\r\n            <option key={server.ip} value={`${server.ip}${server.version ? `:${server.version}` : ''}`} />\r\n          ))}\r\n        </datalist>\r\n        <label style={{ fontSize: 10, display: 'flex', alignItems: 'center', gap: 5, height: '100%', marginTop: '-1px' }}>\r\n          <input\r\n            type='checkbox' checked={save}\r\n            style={{ borderRadius: 0 }}\r\n            onChange={({ target: { checked } }) => setSave(checked)}\r\n          /> Save\r\n        </label>\r\n        <Button style={{ width: 90 }} type='submit'>Connect</Button>\r\n      </div>\r\n    </form>}\r\n    searchRowChildrenOverride={\r\n      <div style={{\r\n        // marginTop: 12,\r\n      }}\r\n      >\r\n        <div style={{ display: 'flex', gap: 3, alignItems: 'center' }}>\r\n          {isSmallWidth\r\n            ? <PixelartIcon iconName={pixelartIcons.server} styles={{ fontSize: 14, color: 'lightgray', marginLeft: 2 }} onClick={onProfileClick} />\r\n            : <span style={{ color: 'lightgray', fontSize: 14 }}>Proxy:</span>}\r\n          <Select\r\n            initialOptions={proxiesData.proxies.map(p => { return { value: p, label: p } })}\r\n            defaultValue={{ value: proxiesData.selected, label: proxiesData.selected }}\r\n            updateOptions={(newSel) => {\r\n              updateProxies({ proxies: [...proxiesData.proxies], selected: newSel })\r\n            }}\r\n            containerStyle={{\r\n              width: isSmallWidth ? 140 : 180,\r\n            }}\r\n          />\r\n          <PixelartIcon iconName='user' styles={{ fontSize: 14, color: 'lightgray', marginLeft: 2 }} onClick={onProfileClick} />\r\n          <Input\r\n            rootStyles={{ width: 80 }}\r\n            value={username}\r\n            disabled={appQueryParams.username !== undefined}\r\n            onChange={({ target: { value } }) => setUsername(value)}\r\n            autoCorrect=\"off\"\r\n            autoCapitalize=\"off\"\r\n            spellCheck=\"false\"\r\n          />\r\n        </div>\r\n      </div>\r\n    }\r\n    serversLayout\r\n    onWorldAction={(action, serverName) => {\r\n      if (action === 'load') {\r\n        joinServer({\r\n          ip: serverName,\r\n        }, {})\r\n      }\r\n      props.onWorldAction?.(action, serverName)\r\n    }}\r\n    setListHovered={(hovered) => {\r\n      setActiveHighlight(hovered ? 'server-list' : undefined)\r\n    }}\r\n    listStyle={getActiveHighlightStyles('server-list')}\r\n    secondRowStyles={getActiveHighlightStyles('server-list')}\r\n  />\r\n}\r\n","import EventEmitter from 'events'\r\nimport clientAutoVersion from 'minecraft-protocol/src/client/autoVersion'\r\n\r\nexport const pingServerVersion = async (ip: string, port?: number, mergeOptions: Record<string, any> = {}) => {\r\n  const fakeClient = new EventEmitter() as any\r\n  const options = {\r\n    host: ip,\r\n    port,\r\n    noPongTimeout: 10_000,\r\n    closeTimeout: 20_000,\r\n    ...mergeOptions,\r\n  }\r\n  let latency = 0\r\n  let fullInfo: any = null\r\n  fakeClient.autoVersionHooks = [(res) => {\r\n    latency = res.latency\r\n    fullInfo = res\r\n  }]\r\n\r\n  // TODO use client.socket.destroy() instead of client.end() for faster cleanup\r\n  clientAutoVersion(fakeClient, options)\r\n  await Promise.race([\r\n    new Promise<void>((resolve, reject) => {\r\n      fakeClient.once('connect_allowed', () => {\r\n        resolve()\r\n      })\r\n    }),\r\n    new Promise<void>((resolve, reject) => {\r\n      fakeClient.on('error', (err) => {\r\n        reject(new Error(err.message ?? err))\r\n      })\r\n      if (mergeOptions.stream) {\r\n        mergeOptions.stream.on('end', (err) => {\r\n          setTimeout(() => {\r\n            reject(new Error('Connection closed. Please report if you see this but the server is actually fine.'))\r\n          })\r\n        })\r\n      }\r\n    })\r\n  ])\r\n\r\n  return {\r\n    version: fakeClient.version,\r\n    latency,\r\n    fullInfo,\r\n  }\r\n}\r\n\r\nconst MAX_PACKET_SIZE = 2_097_152 // 2mb\r\nconst CHAT_MAX_PACKET_DEPTH = 200 // todo improve perf\r\n\r\nconst CHAT_VALIDATE_PACKETS = new Set([\r\n  'chat',\r\n  'system_chat',\r\n  'player_chat',\r\n  'profileless_chat',\r\n  'kick_disconnect',\r\n  'resource_pack_send',\r\n  'action_bar',\r\n  'set_title_text',\r\n  'set_title_subtitle',\r\n  'title',\r\n  'death_combat_event',\r\n  'server_data',\r\n  'scoreboard_objective',\r\n  'scoreboard_team',\r\n  'playerlist_header',\r\n  'boss_bar'\r\n])\r\n\r\nexport const validatePacket = (name: string, data: any, fullBuffer: Buffer, isFromServer: boolean) => {\r\n  // todo find out why chat is so slow with react\r\n  if (!isFromServer) return\r\n\r\n  if (fullBuffer.length > MAX_PACKET_SIZE) {\r\n    console.groupCollapsed(`Packet ${name} is too large: ${fullBuffer.length} bytes`)\r\n    console.log(data)\r\n    console.groupEnd()\r\n    throw new Error(`Packet ${name} is too large: ${fullBuffer.length} bytes`)\r\n  }\r\n\r\n  if (CHAT_VALIDATE_PACKETS.has(name)) {\r\n    // todo count total number of objects instead of max depth\r\n    const maxDepth = getObjectMaxDepth(data)\r\n    if (maxDepth > CHAT_MAX_PACKET_DEPTH) {\r\n      console.groupCollapsed(`Packet ${name} have too many nested objects: ${maxDepth}`)\r\n      console.log(data)\r\n      console.groupEnd()\r\n      throw new Error(`Packet ${name} have too many nested objects: ${maxDepth}`)\r\n    }\r\n  }\r\n}\r\n\r\nfunction getObjectMaxDepth (obj: unknown, currentDepth = 0): number {\r\n  // Base case: null or primitive types have depth 0\r\n  if (obj === null || typeof obj !== 'object' || obj instanceof Buffer) {\r\n    return currentDepth\r\n  }\r\n\r\n  // Handle arrays and objects\r\n  let maxDepth = currentDepth\r\n\r\n  if (Array.isArray(obj)) {\r\n    // For arrays, check each element\r\n    for (const item of obj) {\r\n      const depth = getObjectMaxDepth(item, currentDepth + 1)\r\n      maxDepth = Math.max(maxDepth, depth)\r\n    }\r\n  } else {\r\n    // For objects, check each value\r\n    // eslint-disable-next-line guard-for-in\r\n    for (const key in obj) {\r\n      const depth = getObjectMaxDepth(obj[key], currentDepth + 1)\r\n      maxDepth = Math.max(maxDepth, depth)\r\n    }\r\n  }\r\n\r\n  return maxDepth\r\n}\r\n","import { Duplex } from 'stream'\r\nimport { UserError } from './userError'\r\n\r\nclass CustomDuplex extends Duplex {\r\n  constructor (options, public writeAction) {\r\n    super(options)\r\n  }\r\n\r\n  override _read () {}\r\n\r\n  override _write (chunk, encoding, callback) {\r\n    this.writeAction(chunk)\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const getWebsocketStream = async (host: string) => {\r\n  const baseProtocol = host.startsWith('ws://') ? 'ws' : 'wss'\r\n  const hostClean = host.replace('ws://', '').replace('wss://', '')\r\n  const hostURL = new URL(`${baseProtocol}://${hostClean}`)\r\n  const hostParams = hostURL.searchParams\r\n  hostParams.append('client_mcraft', '')\r\n  const ws = new WebSocket(`${baseProtocol}://${hostURL.host}${hostURL.pathname}?${hostParams.toString()}`)\r\n  const clientDuplex = new CustomDuplex(undefined, data => {\r\n    ws.send(data)\r\n  })\r\n\r\n  clientDuplex.on('error', () => {})\r\n\r\n  ws.addEventListener('message', async message => {\r\n    let { data } = message\r\n    if (data instanceof Blob) {\r\n      data = await data.arrayBuffer()\r\n    }\r\n    clientDuplex.push(Buffer.from(data))\r\n  })\r\n\r\n  ws.addEventListener('close', () => {\r\n    console.log('ws closed')\r\n    clientDuplex.end()\r\n    setTimeout(() => {\r\n      clientDuplex.emit('end', 'Connection lost')\r\n    }, 500)\r\n  })\r\n\r\n  ws.addEventListener('error', err => {\r\n    console.log('ws error', err)\r\n    clientDuplex.emit('error', err)\r\n  })\r\n\r\n  await new Promise((resolve, reject) => {\r\n    ws.addEventListener('open', resolve)\r\n    ws.addEventListener('error', err => {\r\n      console.log('ws error', err)\r\n      reject(new UserError('Failed to open websocket connection'))\r\n    })\r\n  })\r\n\r\n  return {\r\n    mineflayerStream: clientDuplex,\r\n    ws,\r\n  }\r\n}\r\n","import net from 'net'\r\nimport { Client } from 'minecraft-protocol'\r\nimport { appQueryParams } from '../appParams'\r\nimport { downloadAllMinecraftData, getVersionAutoSelect } from '../connect'\r\nimport { gameAdditionalState } from '../globalState'\r\nimport { ProgressReporter } from '../core/progressReporter'\r\nimport { parseServerAddress } from '../parseServerAddress'\r\nimport { getCurrentProxy } from '../react/ServersList'\r\nimport { pingServerVersion, validatePacket } from './minecraft-protocol-extra'\r\nimport { getWebsocketStream } from './websocket-core'\r\n\r\nlet lastPacketTime = 0\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  // const oldParsePacketBuffer = bot._client.deserializer.parsePacketBuffer\r\n  //   try {\r\n  //     const parsed = oldParsePacketBuffer(buffer)\r\n  //   } catch (err) {\r\n  //     debugger\r\n  //     reportError(new Error(`Error parsing packet ${buffer.subarray(0, 30).toString('hex')}`, { cause: err }))\r\n  //     throw err\r\n  //   }\r\n  // }\r\n  class MinecraftProtocolError extends Error {\r\n    constructor (message: string, cause?: Error, public data?: any) {\r\n      if (data?.customPayload) {\r\n        message += ` (Custom payload: ${data.customPayload.channel})`\r\n      }\r\n      super(message, { cause })\r\n      this.name = 'MinecraftProtocolError'\r\n    }\r\n  }\r\n\r\n  const onClientError = (err, data) => {\r\n    const error = new MinecraftProtocolError(`Minecraft protocol client error: ${String(err)}`, err, data)\r\n    reportError(error)\r\n  }\r\n  if (typeof bot._client['_events'].error === 'function') {\r\n    // dont report to bot for more explicit error\r\n    bot._client['_events'].error = onClientError\r\n  } else {\r\n    bot._client.on('error' as any, onClientError)\r\n  }\r\n\r\n  // todo move more code here\r\n  if (!appQueryParams.noPacketsValidation) {\r\n    (bot._client as unknown as Client).on('packet', (data, packetMeta, buffer, fullBuffer) => {\r\n      validatePacket(packetMeta.name, data, fullBuffer, true)\r\n      lastPacketTime = performance.now()\r\n    });\r\n    (bot._client as unknown as Client).on('writePacket', (name, params) => {\r\n      validatePacket(name, params, Buffer.alloc(0), false)\r\n    })\r\n  }\r\n})\r\n\r\nsetInterval(() => {\r\n  if (!bot || !lastPacketTime) return\r\n  if (bot.player?.ping > 500) { // TODO: we cant rely on server ping 1. weird calculations 2. available with delays instead patch minecraft-protocol to get latency of keep_alive packet\r\n    gameAdditionalState.poorConnection = true\r\n  } else {\r\n    gameAdditionalState.poorConnection = false\r\n  }\r\n  if (performance.now() - lastPacketTime < 2000) {\r\n    gameAdditionalState.noConnection = false\r\n    return\r\n  }\r\n  gameAdditionalState.noConnection = true\r\n}, 1000)\r\n\r\n\r\nexport const getServerInfo = async (ip: string, port?: number, preferredVersion = getVersionAutoSelect(), ping = false, progressReporter?: ProgressReporter, setProxyParams?: ProxyParams) => {\r\n  await downloadAllMinecraftData()\r\n  const isWebSocket = ip.startsWith('ws://') || ip.startsWith('wss://')\r\n  let stream\r\n  if (isWebSocket) {\r\n    progressReporter?.setMessage('Connecting to WebSocket server')\r\n    stream = (await getWebsocketStream(ip)).mineflayerStream\r\n    progressReporter?.setMessage('WebSocket connected. Ping packet sent, waiting for response')\r\n  } else if (setProxyParams) {\r\n    setProxy(setProxyParams)\r\n  }\r\n  window.setLoadingMessage = (message?: string) => {\r\n    if (message === undefined) {\r\n      progressReporter?.endStage('dns')\r\n    } else {\r\n      progressReporter?.beginStage('dns', message)\r\n    }\r\n  }\r\n  return pingServerVersion(ip, port, {\r\n    ...(stream ? { stream } : {}),\r\n    ...(ping ? { noPongTimeout: 3000 } : {}),\r\n    ...(preferredVersion ? { version: preferredVersion } : {}),\r\n  }).finally(() => {\r\n    window.setLoadingMessage = undefined\r\n  })\r\n}\r\n\r\nglobalThis.debugTestPing = async (ip: string) => {\r\n  const parsed = parseServerAddress(ip, false)\r\n  const result = await getServerInfo(parsed.host, parsed.port ? Number(parsed.port) : undefined, undefined, true, undefined, { address: getCurrentProxy(), })\r\n  console.log('result', result)\r\n  return result\r\n}\r\n\r\nexport const getDefaultProxyParams = () => {\r\n  return {\r\n    headers: {\r\n      Authorization: `Bearer ${new URLSearchParams(location.search).get('token') ?? ''}`\r\n    }\r\n  }\r\n}\r\n\r\nexport type ProxyParams = {\r\n  address?: string\r\n  headers?: Record<string, string>\r\n}\r\n\r\nexport const setProxy = (proxyParams: ProxyParams) => {\r\n  if (proxyParams.address?.startsWith(':')) {\r\n    proxyParams.address = `${location.protocol}//${location.hostname}${proxyParams.address}`\r\n  }\r\n  if (proxyParams.address && location.port !== '80' && location.port !== '443' && !/:\\d+$/.test(proxyParams.address)) {\r\n    const https = proxyParams.address.startsWith('https://') || location.protocol === 'https:'\r\n    proxyParams.address = `${proxyParams.address}:${https ? 443 : 80}`\r\n  }\r\n\r\n  const parsedProxy = parseServerAddress(proxyParams.address, false)\r\n  const proxy = { host: parsedProxy.host, port: parsedProxy.port }\r\n  proxyParams.headers ??= getDefaultProxyParams().headers\r\n  net['setProxy']({\r\n    hostname: proxy.host,\r\n    port: proxy.port,\r\n    headers: proxyParams.headers,\r\n    artificialDelay: appQueryParams.addPing ? Number(appQueryParams.addPing) : undefined\r\n  })\r\n  return {\r\n    proxy\r\n  }\r\n}\r\n","import { getRenamedData } from 'flying-squid/dist/blockRenames'\r\nimport outputInteractionShapesJson from './interactionShapesGenerated.json'\r\nimport './getCollisionShapes'\r\n\r\nexport default () => {\r\n  customEvents.on('gameLoaded', () => {\r\n    // todo also remap block states (e.g. redstone)!\r\n    const renamedBlocksInteraction = getRenamedData('blocks', Object.keys(outputInteractionShapesJson), '1.20.2', bot.version)\r\n    const interactionShapes = {\r\n      ...outputInteractionShapesJson,\r\n      ...Object.fromEntries(Object.entries(outputInteractionShapesJson).map(([block, shape], i) => [renamedBlocksInteraction[i], shape]))\r\n    }\r\n    interactionShapes[''] = interactionShapes['air']\r\n    // todo make earlier\r\n    window.interactionShapes = interactionShapes\r\n  })\r\n}\r\n","import './deathScreen.css'\r\nimport type { MessageFormatPart } from '../chatUtils'\r\nimport MessageFormatted from './MessageFormatted'\r\nimport Button from './Button'\r\n\r\ntype Props = {\r\n  dieReasonMessage: MessageFormatPart[]\r\n  respawnCallback: () => void\r\n  disconnectCallback: () => void\r\n}\r\n\r\nexport default ({ dieReasonMessage, respawnCallback, disconnectCallback }: Props) => {\r\n  return (\r\n    <div className='deathScreen-container'>\r\n      <div className=\"deathScreen\">\r\n        <h1 className='deathScreen-title'>You Died!</h1>\r\n        <h5 className='deathScreen-reason'>\r\n          <MessageFormatted parts={dieReasonMessage} />\r\n        </h5>\r\n        <div className='deathScreen-buttons-grouped'>\r\n          <Button\r\n            label=\"Respawn\" onClick={() => {\r\n              respawnCallback()\r\n            }}\r\n          />\r\n          <Button\r\n            label=\"Disconnect\" onClick={() => {\r\n              disconnectCallback()\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\nimport { proxy, useSnapshot } from 'valtio'\r\nimport { disconnect } from '../flyingSquidUtils'\r\nimport { MessageFormatPart, formatMessage } from '../chatUtils'\r\nimport { showModal, hideModal } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\nimport DeathScreen from './DeathScreen'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nconst dieReasonProxy = proxy({ value: null as MessageFormatPart[] | null })\r\n\r\nexport default () => {\r\n  const { value: dieReasonMessage } = useSnapshot(dieReasonProxy)\r\n  const isModalActive = useIsModalActive('death-screen')\r\n\r\n  useEffect(() => {\r\n    bot._client.on('death_combat_event', (data) => {\r\n      try {\r\n        if (data.playerId !== bot.entity.id) return\r\n        const messageParsed = JSON.parse(data.message)\r\n        const parts = formatMessage(messageParsed)\r\n        dieReasonProxy.value = parts\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    })\r\n    bot.on('health', () => { // bot.isAlive can be already false so can't use death event (respawn packet)\r\n      if (dieReasonProxy.value || bot.health > 0) return\r\n      dieReasonProxy.value = []\r\n    })\r\n\r\n    bot.on('respawn', () => {\r\n      // todo don't close too early, instead wait for health event and make button disabled?\r\n      dieReasonProxy.value = null\r\n    })\r\n\r\n    if (bot.health === 0) {\r\n      dieReasonProxy.value = []\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (dieReasonProxy.value) {\r\n      if (!isModalActive) showModal({ reactType: 'death-screen' })\r\n    } else if (isModalActive) {\r\n      hideModal({ reactType: 'death-screen' })\r\n    }\r\n  }, [dieReasonMessage, isModalActive])\r\n\r\n  if (!isModalActive || !dieReasonMessage || options.autoRespawn) return null\r\n\r\n  return <DeathScreen\r\n    dieReasonMessage={dieReasonMessage as MessageFormatPart[]}\r\n    respawnCallback={() => {\r\n      bot._client.write('client_command', bot.supportFeature('respawnIsPayload') ? { payload: 0 } : { actionId: 0 })\r\n    }}\r\n    disconnectCallback={() => {\r\n      void disconnect()\r\n    }}\r\n  />\r\n}\r\n","import { titleCase } from 'title-case'\r\nimport { options } from '../optionsStorage'\r\nimport { OptionsGroupType, guiOptionsScheme } from '../optionsGuiScheme'\r\nimport OptionsItems, { OptionMeta } from './OptionsItems'\r\n\r\nexport const optionValueToType = (optionValue: any, item: OptionMeta) => {\r\n  if (typeof optionValue === 'boolean' || item.values) return 'toggle'\r\n  if (typeof optionValue === 'number') return 'slider'\r\n  if (typeof optionValue === 'string') return 'element'\r\n}\r\n\r\nconst finalItemsScheme: Record<keyof typeof guiOptionsScheme, OptionMeta[]> = Object.fromEntries(Object.entries(guiOptionsScheme).map(([groupName, optionsArr]) => {\r\n  return [groupName, optionsArr.flatMap((optionsObj) => {\r\n    return Object.entries(optionsObj).map(([optionKey, metaMerge]) => {\r\n      const optionValue = options[optionKey]\r\n\r\n      const type = optionValueToType(optionValue, metaMerge)\r\n      const meta: OptionMeta = {\r\n        id: optionKey === 'custom' ? undefined : optionKey,\r\n        type,\r\n        // todo I don't like the whole idea of custom. Why it is even here?\r\n        ...optionKey === 'custom' ? {\r\n          type: 'element',\r\n          render: metaMerge\r\n        } : {\r\n          ...metaMerge,\r\n        }\r\n      }\r\n      return meta\r\n    })\r\n  })]\r\n}))\r\n\r\nexport default ({ group, backButtonAction }: { group: OptionsGroupType, backButtonAction? }) => {\r\n  const items = finalItemsScheme[group]\r\n\r\n  const title = group === 'main' ? 'Settings' : `${titleCase(group)} Settings`\r\n  return <OptionsItems items={items} title={title} backButtonAction={backButtonAction} />\r\n}\r\n","import { useSnapshot } from 'valtio'\r\nimport { activeModalStack, hideCurrentModal } from '../globalState'\r\nimport { OptionsGroupType } from '../optionsGuiScheme'\r\nimport OptionsGroup from './OptionsGroup'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nexport default () => {\r\n  useIsModalActive('options-*')\r\n  const { reactType } = useSnapshot(activeModalStack).at(-1) ?? {}\r\n  if (!reactType?.startsWith('options-')) return\r\n  const settingsGroup = reactType.slice('options-'.length) as OptionsGroupType\r\n\r\n  return <OptionsGroup group={settingsGroup} backButtonAction={hideCurrentModal} />\r\n}\r\n","const MAX_WORDS = 5\r\nconst HTTPS_REGEX = /^https?:\\/\\//\r\nconst TIMEOUT_MS = 5000\r\nconst SPLASH_CACHE_KEY = 'minecraft_splash_text_cache'\r\nconst SPLASH_URL_KEY = 'minecraft_splash_url'\r\n\r\nconst limitWords = (text: string): string => {\r\n  const words = text.split(/\\s+/)\r\n  if (words.length <= MAX_WORDS) {\r\n    return text\r\n  }\r\n  return words.slice(0, MAX_WORDS).join(' ') + '...'\r\n}\r\n\r\nexport const isRemoteSplashText = (text: string): boolean => {\r\n  if (!text) return false\r\n  return HTTPS_REGEX.test(text)\r\n}\r\n\r\nexport const loadRemoteSplashText = async (url: string): Promise<string> => {\r\n  try {\r\n    const controller = new AbortController()\r\n    const timeoutId = setTimeout(() => controller.abort(), TIMEOUT_MS)\r\n    const response = await fetch(url, { signal: controller.signal })\r\n    clearTimeout(timeoutId)\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to fetch splash text: ${response.statusText}`)\r\n    }\r\n\r\n    const clonedResponse = response.clone()\r\n    try {\r\n      const json = await response.json()\r\n\r\n      if (typeof json === 'object' && json !== null) {\r\n        if (json.title) return limitWords(json.title)\r\n        if (json.text) return limitWords(json.text)\r\n        if (json.message) return limitWords(json.message)\r\n\r\n        return limitWords(JSON.stringify(json))\r\n      }\r\n\r\n      return limitWords(String(json))\r\n    } catch (jsonError) {\r\n      const text = await clonedResponse.text()\r\n      return limitWords(text.trim())\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading remote splash text:', error)\r\n    return 'Failed to load splash text!'\r\n  }\r\n}\r\n\r\nexport const cacheSourceUrl = (url: string): void => {\r\n  localStorage.setItem(SPLASH_URL_KEY, url)\r\n}\r\n\r\nexport const clearSplashCache = (): void => {\r\n  localStorage.removeItem(SPLASH_CACHE_KEY)\r\n}\r\n\r\nexport const getCachedSplashText = (): string | null => {\r\n  return localStorage.getItem(SPLASH_CACHE_KEY)\r\n}\r\n\r\nexport const cacheSplashText = (text: string): void => {\r\n  localStorage.setItem(SPLASH_CACHE_KEY, text)\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"root\":\"root-ZQcBnP\",\"game-title\":\"game-title-HS2Boh\",\"gameTitle\":\"game-title-HS2Boh\",\"minec\":\"minec-LtvUe5\",\"minecraft\":\"minecraft-WAwwet\",\"raft\":\"raft-pGttvN\",\"edition\":\"edition-X71qt9\",\"splash\":\"splash-T86ZOq\",\"splashAnim\":\"splashAnim-hJpV1p\",\"menu\":\"menu-AViyuB\",\"menu-row\":\"menu-row-Ua3i92\",\"menuRow\":\"menu-row-Ua3i92\",\"bottom-info\":\"bottom-info-XUJ4_b\",\"bottomInfo\":\"bottom-info-XUJ4_b\",\"product-description\":\"product-description-mpFNW4\",\"productDescription\":\"product-description-mpFNW4\",\"product-link\":\"product-link-iL2GHi\",\"productLink\":\"product-link-iL2GHi\",\"maps-provider\":\"maps-provider-JGaNCh\",\"mapsProvider\":\"maps-provider-JGaNCh\"};","import { useEffect, useRef, useState } from 'react'\r\nimport { useFloating, arrow, FloatingArrow, offset as offsetMiddleware, Placement } from '@floating-ui/react'\r\nimport Button from './Button'\r\n\r\ninterface Props extends React.ComponentProps<typeof Button> {\r\n  initialTooltip: {\r\n    content: string\r\n    placement?: Placement\r\n    localStorageKey?: string | null\r\n    offset?: number\r\n  }\r\n  alwaysTooltip?: string\r\n}\r\n\r\nconst ARROW_HEIGHT = 7\r\nconst GAP = 0\r\n\r\nexport default ({ initialTooltip, alwaysTooltip, ...args }: Props) => {\r\n  const { localStorageKey = 'firstTimeTooltip', offset = 0 } = initialTooltip\r\n  const [showTooltips, setShowTooltips] = useState(alwaysTooltip || (localStorageKey ? localStorage[localStorageKey] !== 'false' : true))\r\n\r\n  useEffect(() => {\r\n    let timeout\r\n    function hide () {\r\n      if (!localStorageKey) return\r\n      localStorage[localStorageKey] = 'false'\r\n      setShowTooltips(false)\r\n    }\r\n    if (showTooltips && localStorageKey) {\r\n      // todo wait for user interaction mouseoe\r\n      timeout = setTimeout(() => {\r\n        hide()\r\n      }, 10_000)\r\n    }\r\n\r\n    return () => {\r\n      // unmounted, probably switched view\r\n      if (timeout) clearTimeout(timeout)\r\n      hide()\r\n    }\r\n  }, [])\r\n\r\n  const arrowRef = useRef<any>(null)\r\n  const { refs, floatingStyles, context } = useFloating({\r\n    middleware: [\r\n      arrow({\r\n        element: arrowRef\r\n      }),\r\n      offsetMiddleware(ARROW_HEIGHT + GAP + offset),\r\n    ],\r\n    placement: initialTooltip.placement,\r\n  })\r\n\r\n  return <>\r\n    <Button {...args} rootRef={refs.setReference} />\r\n    <div\r\n      ref={refs.setFloating}\r\n      style={{\r\n        ...floatingStyles,\r\n        background: 'rgba(0, 0, 0, 0.3)',\r\n        fontSize: 8,\r\n        pointerEvents: 'none',\r\n        userSelect: 'text',\r\n        padding: '2px 4px',\r\n        opacity: showTooltips ? 1 : 0,\r\n        transition: 'opacity 0.3s ease-in-out',\r\n        textShadow: '1px 1px 2px BLACK',\r\n        zIndex: 11\r\n      }}\r\n    >\r\n      {alwaysTooltip || initialTooltip.content}\r\n      <FloatingArrow ref={arrowRef} context={context} style={{ opacity: 0.7 }} />\r\n    </div>\r\n  </>\r\n}\r\n","import { useFloating, arrow, FloatingArrow, offset as offsetMiddleware, Placement, autoPlacement } from '@floating-ui/react'\r\nimport { openURL } from 'renderer/viewer/lib/simpleUtils'\r\nimport { CSSProperties, useState } from 'react'\r\nimport Button from './Button'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\n\r\nexport const DiscordButton = ({ text, style }: { text?: string, style?: Record<string, any> }) => {\r\n  const links: DropdownButtonItem[] = [\r\n    {\r\n      text: 'Pro Enthusiasts Server (ask for invite)',\r\n      clickHandler: () => openURL('https://discord.mcraft.fun')\r\n    },\r\n    {\r\n      text: 'Community Server (PrismarineJS)',\r\n      clickHandler: () => openURL('https://discord.gg/prismarinejs-413438066984747026')\r\n    }\r\n  ]\r\n\r\n  return <DropdownButton text={text ?? 'Discord'} style={style} links={links} />\r\n}\r\n\r\nexport type DropdownButtonItem = {\r\n  text: string,\r\n  clickHandler: () => void\r\n}\r\n\r\nexport const DropdownButton = ({ text, style, links }: { text: string, style?: Record<string, any>, links: DropdownButtonItem[] }) => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const { refs, floatingStyles } = useFloating({\r\n    open: isOpen,\r\n    onOpenChange: setIsOpen,\r\n    middleware: [\r\n      autoPlacement()\r\n    ],\r\n  })\r\n\r\n  const styles: CSSProperties = {\r\n    ...floatingStyles,\r\n    background: 'rgba(0, 0, 0, 0.3)',\r\n    fontSize: 8,\r\n    userSelect: 'text',\r\n    padding: '2px 4px',\r\n    opacity: 1,\r\n    transition: 'opacity 0.3s ease-in-out',\r\n    textShadow: '1px 1px 2px BLACK',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    zIndex: 11\r\n  }\r\n\r\n  return <>\r\n    <Button\r\n      style={style ?? { position: 'relative', width: '98px' }}\r\n      rootRef={refs.setReference}\r\n      onClick={() => {\r\n        setIsOpen(!isOpen)\r\n      }}\r\n    >{text}<PixelartIcon\r\n        styles={{ position: 'absolute', top: '5px', right: '5px' }}\r\n        iconName={isOpen ? pixelartIcons['chevron-up'] : pixelartIcons['chevron-down']}\r\n      />\r\n    </Button>\r\n    {\r\n      isOpen && <div ref={refs.setFloating} style={styles}>\r\n        {links.map(el => {\r\n          return <Button\r\n            key={el.text}\r\n            style={{ width: '98px', fontSize: '7px' }}\r\n            onClick={el.clickHandler}\r\n          >{el.text}\r\n          </Button>\r\n        })}\r\n      </div>\r\n    }\r\n  </>\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"title\":\"title-rz05ZX\",\"pause_container\":\"pause_container-lI8D2f\",\"pauseContainer\":\"pause_container-lI8D2f\",\"row\":\"row-IKim4t\"};","import { useSnapshot } from 'valtio'\r\nimport { openURL } from 'renderer/viewer/lib/simpleUtils'\r\nimport { ErrorBoundary } from '@zardoy/react-util'\r\nimport { miscUiState } from '../globalState'\r\nimport { openGithub } from '../utils'\r\nimport Button from './Button'\r\nimport { DiscordButton } from './DiscordButton'\r\nimport styles from './PauseScreen.module.css'\r\n\r\nfunction PauseLinkButtonsInner () {\r\n  const { appConfig } = useSnapshot(miscUiState)\r\n  const pauseLinksConfig = appConfig?.pauseLinks\r\n\r\n  if (!pauseLinksConfig) return null\r\n\r\n  const renderButton = (button: Record<string, any>, style: React.CSSProperties, key: number) => {\r\n    if (button.type === 'discord') {\r\n      return <DiscordButton key={key} style={style} text={button.text}/>\r\n    }\r\n    if (button.type === 'github') {\r\n      return <Button key={key} className=\"button\" style={style} onClick={() => openGithub()}>{button.text ?? 'GitHub'}</Button>\r\n    }\r\n    if (button.type === 'url' && button.text) {\r\n      return <Button key={key} className=\"button\" style={style} onClick={() => openURL(button.url)}>{button.text}</Button>\r\n    }\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {pauseLinksConfig.map((row, i) => {\r\n        const style = { width: (204 / row.length - (row.length > 1 ? 4 : 0)) + 'px' }\r\n        return (\r\n          <div key={i} className={styles.row}>\r\n            {row.map((button, k) => renderButton(button, style, k))}\r\n          </div>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default () => {\r\n  return <ErrorBoundary renderError={(error) => {\r\n    console.error(error)\r\n    return null\r\n  }}>\r\n    <PauseLinkButtonsInner />\r\n  </ErrorBoundary>\r\n}\r\n","import { showModal } from '../globalState'\r\nimport styles from './CreditsBookButton.module.css'\r\n\r\nexport default () => {\r\n  const handleClick = () => {\r\n    showModal({ reactType: 'credits-about' })\r\n  }\r\n\r\n  return (\r\n    <button\r\n      className={styles.creditsButton}\r\n      onClick={handleClick}\r\n      aria-label=\"Credits\"\r\n      title=\"Credits\"\r\n    >\r\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path d=\"M15.4375 15.1238L15.625 15.3113V16.8113L15.4375 16.9988H14.6875L14.5 16.8113V16.4363L14.3125 16.2488H12.8125L12.625 16.0613V15.3113L12.4375 15.1238H10.9375L10.75 14.9363V14.1863L10.5625 13.9988H7.9375L7.75 14.1863V14.9363L7.5625 15.1238H6.0625L5.875 15.3113V16.0613L5.6875 16.2488H4.1875L4 16.4363V16.8113L3.8125 16.9988H3.0625L2.875 16.8113V15.3113L3.0625 15.1238H3.4375L3.625 14.9363V13.8113L3.8125 13.6238H4.1875L4.375 13.4363V11.9363L4.5625 11.7488H4.9375L5.125 11.5613V10.0613L4.9375 9.87384H4.1875L4 9.68634V8.93634L3.8125 8.74884H2.6875L2.5 8.56134V7.81134L2.3125 7.62384H1.1875L1 7.43634V6.68634L1.1875 6.49884H6.63738L6.82488 6.31134V5.61543V4.60586L7.01238 4.41836H7.5625L7.75 4.23086V2.6875L7.9375 2.5H8.43022L8.61772 2.3125V1.1875L8.80522 1H9.66735L9.85485 1.1875V2.3125L10.0424 2.5H10.5625L10.75 2.6875V4.23086L10.9375 4.41836H11.4375L11.625 4.60586V6.31134L11.8125 6.49884H17.3125L17.5 6.68634V7.43634L17.3125 7.62384H16.1875L16 7.81134V8.56134L15.8125 8.74884H14.6875L14.5 8.93634V9.68634L14.3125 9.87384H13.5625L13.375 10.0613V11.5613L13.5625 11.7488H13.9375L14.125 11.9363V13.4363L14.3125 13.6238H14.6875L14.875 13.8113V14.9363L15.0625 15.1238H15.4375Z\" fill=\"#FFD700\" />\r\n      </svg>\r\n\r\n    </button>\r\n  )\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"creditsButton\":\"creditsButton-u6wIA8\"};","import React, { useEffect, useMemo } from 'react'\r\nimport { openURL } from 'renderer/viewer/lib/simpleUtils'\r\nimport { useSnapshot } from 'valtio'\r\nimport { haveDirectoryPicker } from '../utils'\r\nimport { ConnectOptions } from '../connect'\r\nimport { miscUiState } from '../globalState'\r\nimport {\r\n  isRemoteSplashText,\r\n  loadRemoteSplashText,\r\n  getCachedSplashText,\r\n  cacheSplashText,\r\n  cacheSourceUrl,\r\n  clearSplashCache\r\n} from '../utils/splashText'\r\nimport styles from './mainMenu.module.css'\r\nimport Button from './Button'\r\nimport ButtonWithTooltip from './ButtonWithTooltip'\r\nimport { pixelartIcons } from './PixelartIcon'\r\nimport useLongPress from './useLongPress'\r\nimport PauseLinkButtons from './PauseLinkButtons'\r\nimport CreditsBookButton from './CreditsBookButton'\r\n\r\ntype Action = (e: React.MouseEvent<HTMLButtonElement>) => void\r\n\r\ninterface Props {\r\n  connectToServerAction?: Action\r\n  singleplayerAction?: Action\r\n  optionsAction?: Action\r\n  githubAction?: Action\r\n  openFileAction?: Action\r\n  mapsProvider?: string\r\n  versionStatus?: string\r\n  versionTitle?: string\r\n  onVersionStatusClick?: () => void\r\n  bottomRightLinks?: string\r\n  versionText?: string\r\n  onVersionTextClick?: () => void\r\n  singleplayerAvailable?: boolean\r\n}\r\n\r\nconst httpsRegex = /^https?:\\/\\//\r\n\r\nexport default ({\r\n  connectToServerAction,\r\n  mapsProvider,\r\n  singleplayerAction,\r\n  optionsAction,\r\n  githubAction,\r\n  openFileAction,\r\n  versionText,\r\n  onVersionTextClick,\r\n  versionStatus,\r\n  versionTitle,\r\n  onVersionStatusClick,\r\n  bottomRightLinks,\r\n  singleplayerAvailable = true,\r\n}: Props) => {\r\n  const { appConfig } = useSnapshot(miscUiState)\r\n\r\n  const splashText = useMemo(() => {\r\n    const cachedText = getCachedSplashText()\r\n\r\n    const configSplashFromApp = appConfig?.splashText\r\n    const isRemote = configSplashFromApp && isRemoteSplashText(configSplashFromApp)\r\n    const sourceKey = isRemote ? configSplashFromApp : (configSplashFromApp || '')\r\n    const storedSourceKey = localStorage.getItem('minecraft_splash_url')\r\n\r\n    if (storedSourceKey !== sourceKey) {\r\n      clearSplashCache()\r\n      cacheSourceUrl(sourceKey)\r\n    } else if (cachedText) {\r\n      return cachedText\r\n    }\r\n\r\n    if (!isRemote && configSplashFromApp && configSplashFromApp.trim() !== '') {\r\n      cacheSplashText(configSplashFromApp)\r\n      return configSplashFromApp\r\n    }\r\n\r\n    return appConfig?.splashTextFallback || ''\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const configSplashFromApp = appConfig?.splashText\r\n    if (configSplashFromApp && isRemoteSplashText(configSplashFromApp)) {\r\n      loadRemoteSplashText(configSplashFromApp)\r\n        .then(fetchedText => {\r\n          if (fetchedText && fetchedText.trim() !== '' && !fetchedText.includes('Failed to load')) {\r\n            cacheSplashText(fetchedText)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Failed to preload splash text for next session:', error)\r\n        })\r\n    }\r\n  }, [appConfig?.splashText])\r\n\r\n  if (!bottomRightLinks?.trim()) bottomRightLinks = undefined\r\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\r\n  const linksParsed = bottomRightLinks?.split(/;|\\n/g).map(l => {\r\n    const parts = l.split(':')\r\n    return [parts[0], parts.slice(1).join(':')]\r\n  }) as Array<[string, string]> | undefined\r\n\r\n  const singleplayerLongPress = useLongPress(\r\n    () => {\r\n      window.location.href = window.location.pathname + '?sp=1'\r\n    },\r\n    () => singleplayerAction?.(null as any),\r\n    { delay: 500 }\r\n  )\r\n\r\n  const versionLongPress = useLongPress(\r\n    () => {\r\n      const buildDate = process.env.BUILD_VERSION ? new Date(process.env.BUILD_VERSION + ':00:00.000Z') : null\r\n      const hoursAgo = buildDate ? Math.round((Date.now() - buildDate.getTime()) / (1000 * 60 * 60)) : null\r\n      alert(`BUILD DATE:\\n${buildDate?.toLocaleString() || 'Development build'}${hoursAgo ? `\\nBuilt ${hoursAgo} hours ago` : ''}`)\r\n    },\r\n    () => onVersionTextClick?.(),\r\n  )\r\n\r\n  const connectToServerLongPress = useLongPress(\r\n    () => {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        // Connect to <origin>:25565\r\n        const origin = window.location.hostname\r\n        const connectOptions: ConnectOptions = {\r\n          server: `${origin}:25565`,\r\n          username: 'test',\r\n        }\r\n        dispatchEvent(new CustomEvent('connect', { detail: connectOptions }))\r\n      }\r\n    },\r\n    () => connectToServerAction?.(null as any),\r\n    { delay: 500 }\r\n  )\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      <div className={styles['game-title']}>\r\n        <div className={styles.minecraft}>\r\n          <div className={styles.edition} />\r\n          <span className={styles.splash}>{splashText}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.menu}>\r\n        <ButtonWithTooltip\r\n          initialTooltip={{\r\n            content: 'Connect to Java servers!',\r\n            placement: 'top',\r\n          }}\r\n          {...connectToServerLongPress}\r\n          data-test-id='servers-screen-button'\r\n        >\r\n          Connect to server\r\n        </ButtonWithTooltip>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <ButtonWithTooltip\r\n            style={{ width: 150 }}\r\n            {...singleplayerLongPress}\r\n            data-test-id='singleplayer-button'\r\n            disabled={!singleplayerAvailable}\r\n            initialTooltip={{\r\n              content: 'Create worlds and play offline',\r\n              placement: 'left',\r\n              offset: -40\r\n            }}\r\n          >\r\n            Singleplayer\r\n          </ButtonWithTooltip>\r\n\r\n          <ButtonWithTooltip\r\n            disabled={!mapsProvider}\r\n            // className={styles['maps-provider']}\r\n            icon={pixelartIcons.map}\r\n            initialTooltip={{ content: 'Explore maps to play from provider!', placement: 'top-start' }}\r\n            onClick={() => mapsProvider && openURL(httpsRegex.test(mapsProvider) ? mapsProvider : 'https://' + mapsProvider, false)}\r\n          />\r\n\r\n          <ButtonWithTooltip\r\n            data-test-id='select-file-folder'\r\n            icon={pixelartIcons.folder}\r\n            onClick={openFileAction}\r\n            initialTooltip={{\r\n              content: 'Load any Java world save' + (haveDirectoryPicker() ? '' : ' (zip)!'),\r\n              placement: 'bottom-start',\r\n            }}\r\n          />\r\n        </div>\r\n        <Button\r\n          onClick={optionsAction}\r\n        >\r\n          Options\r\n        </Button>\r\n        <div className={styles['menu-row']}>\r\n          <PauseLinkButtons />\r\n        </div>\r\n        <CreditsBookButton />\r\n      </div>\r\n\r\n      <div className={styles['bottom-info']}>\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n          <span style={{ fontSize: 10, color: 'gray' }} {...versionLongPress}>{versionText}</span>\r\n          <span\r\n            title={`${versionTitle} (click to reload)`}\r\n            onClick={onVersionStatusClick}\r\n            className={styles['product-info']}\r\n          >\r\n            Prismarine Web Client {versionStatus}\r\n          </span>\r\n        </div>\r\n        <span className={styles['product-description']}>\r\n          <div className={styles['product-link']}>\r\n            {linksParsed?.map(([name, link], i, arr) => {\r\n              if (!link.startsWith('http')) link = `https://${link}`\r\n              return <div style={{\r\n                color: 'lightgray',\r\n                fontSize: 8,\r\n              }}>\r\n                <a\r\n                  key={name}\r\n                  style={{\r\n                    whiteSpace: 'nowrap',\r\n                  }} href={link}\r\n                >{name}\r\n                </a>\r\n                {i < arr.length - 1 && <span style={{ marginLeft: 2 }}>·</span>}\r\n              </div>\r\n            })}\r\n          </div>\r\n          <span>{appConfig?.rightSideText}</span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import fs from 'fs'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { proxy, subscribe, useSnapshot } from 'valtio'\r\nimport { useEffect, useState } from 'react'\r\nimport { activeModalStack, miscUiState, openOptionsMenu, showModal } from '../globalState'\r\nimport { openGithub } from '../utils'\r\nimport { setLoadingScreenStatus } from '../appStatus'\r\nimport { openFilePicker, copyFilesAsync, mkdirRecursive, openWorldDirectory, removeFileRecursiveAsync } from '../browserfs'\r\n\r\nimport MainMenu from './MainMenu'\r\n\r\nconst isMainMenu = () => {\r\n  return activeModalStack.length === 0 && !miscUiState.gameLoaded\r\n}\r\n\r\nconst refreshApp = async (failedUpdate = false) => {\r\n  try {\r\n    const registration = await navigator.serviceWorker.getRegistration()\r\n    if (registration) {\r\n      // First, disconnect all clients\r\n      const clients = await window.clients?.matchAll() || []\r\n      await Promise.all(clients.map(client => client.postMessage('SKIP_WAITING')))\r\n\r\n      // Force the waiting service worker to become active\r\n      if (registration.waiting) {\r\n        registration.waiting.postMessage('SKIP_WAITING')\r\n      }\r\n\r\n      // Add timeout to prevent infinite waiting\r\n      const unregisterPromise = registration.unregister()\r\n      const timeoutPromise = new Promise((_, reject) => {\r\n        setTimeout(() => reject(new Error('SW unregister timeout')), 3000)\r\n      })\r\n\r\n      await Promise.race([unregisterPromise, timeoutPromise])\r\n        .catch(err => {\r\n          console.warn('SW unregister error:', err)\r\n          if (isMainMenu()) {\r\n            alert('Failed to unregister SW: ' + err)\r\n          }\r\n        })\r\n    }\r\n\r\n    if (failedUpdate) {\r\n      await new Promise(resolve => { setTimeout(resolve, 2000) })\r\n    }\r\n\r\n    if (!isMainMenu()) return\r\n\r\n    if (failedUpdate) {\r\n      sessionStorage.justReloaded = false\r\n      // try to force bypass cache\r\n      location.search = '?update=true'\r\n    } else {\r\n      window.justReloaded = true\r\n      sessionStorage.justReloaded = true\r\n      window.location.reload()\r\n    }\r\n  } catch (err) {\r\n    console.error('Failed to refresh app:', err)\r\n    if (!isMainMenu()) {\r\n      alert('Critical error on refreshApp: ' + err)\r\n      // Fallback to force reload if something goes wrong\r\n      window.location.reload()\r\n    }\r\n  }\r\n}\r\n\r\nexport const mainMenuState = proxy({\r\n  serviceWorkerLoaded: false,\r\n})\r\n\r\n// todo clean\r\nlet disableAnimation = false\r\nexport default () => {\r\n  const haveModals = useSnapshot(activeModalStack).length\r\n  const { gameLoaded, fsReady, appConfig, singleplayerAvailable } = useSnapshot(miscUiState)\r\n\r\n  const noDisplay = haveModals || gameLoaded || !fsReady\r\n\r\n  useEffect(() => {\r\n    if (noDisplay && fsReady) disableAnimation = true\r\n  }, [noDisplay])\r\n\r\n  const [versionStatus, setVersionStatus] = useState('')\r\n  const [versionTitle, setVersionTitle] = useState('')\r\n\r\n  useEffect(() => {\r\n    if (process.env.SINGLE_FILE_BUILD_MODE) {\r\n      setVersionStatus('(single file build)')\r\n    } else if (process.env.NODE_ENV === 'development') {\r\n      setVersionStatus('(dev)')\r\n    } else {\r\n      fetch('./version.txt').then(async (f) => {\r\n        if (f.status === 404) return\r\n        const contents = await f.text()\r\n        const isLatest = contents === process.env.BUILD_VERSION\r\n        if (!isLatest && sessionStorage.justReloaded) {\r\n          setVersionStatus('(force reloading, wait)')\r\n          void refreshApp(true)\r\n          return\r\n        }\r\n        const upStatus = () => {\r\n          setVersionStatus(`(${isLatest ? 'latest' : 'new version available'}${mainMenuState.serviceWorkerLoaded ? ', Downloaded' : ''})`)\r\n        }\r\n        subscribe(mainMenuState, upStatus)\r\n        upStatus()\r\n        setVersionTitle(`Loaded: ${process.env.BUILD_VERSION}. Remote: ${contents}`)\r\n      }, () => {\r\n        setVersionStatus('(offline)')\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  const mapsProviderUrl = appConfig?.mapsProvider && new URL(appConfig?.mapsProvider)\r\n  if (mapsProviderUrl && location.origin !== 'https://mcraft.fun') {\r\n    mapsProviderUrl.searchParams.set('to', location.href)\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {!noDisplay && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          transition={{\r\n            duration: disableAnimation ? 0 : 0.1,\r\n            ease: 'easeInOut'\r\n          }}\r\n        >\r\n          <MainMenu\r\n            singleplayerAvailable={singleplayerAvailable}\r\n            connectToServerAction={() => showModal({ reactType: 'serversList' })}\r\n            singleplayerAction={async () => {\r\n              showModal({ reactType: 'singleplayer' })\r\n            }}\r\n            githubAction={() => openGithub()}\r\n            optionsAction={() => openOptionsMenu('main')}\r\n            bottomRightLinks={process.env.MAIN_MENU_LINKS}\r\n            openFileAction={e => {\r\n              if (!!window.showDirectoryPicker && !e.shiftKey) {\r\n                void openWorldDirectory()\r\n              } else {\r\n                openFilePicker()\r\n              }\r\n            }}\r\n            mapsProvider={mapsProviderUrl?.toString()}\r\n            versionStatus={versionStatus}\r\n            versionTitle={versionTitle}\r\n            onVersionStatusClick={async () => {\r\n              setVersionStatus('(reloading)')\r\n              await refreshApp()\r\n            }}\r\n            onVersionTextClick={async () => {\r\n              openGithub(process.env.RELEASE_LINK)\r\n            }}\r\n            versionText={process.env.RELEASE_TAG}\r\n          />\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n","import fs from 'fs'\r\nimport { join } from 'path'\r\nimport JSZip from 'jszip'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { fsState, readLevelDat } from './loadSave'\r\nimport { closeWan, openToWanAndCopyJoinLink } from './localServerMultiplayer'\r\nimport { copyFilesAsync, uniqueFileNameFromWorldName } from './browserfs'\r\nimport { saveServer } from './flyingSquidUtils'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { displayClientChat } from './botUtils'\r\nimport { miscUiState } from './globalState'\r\n\r\nconst notImplemented = () => {\r\n  return 'Not implemented yet'\r\n}\r\n\r\nasync function addFolderToZip (folderPath, zip, relativePath) {\r\n  const entries = await fs.promises.readdir(folderPath)\r\n\r\n  for (const entry of entries) {\r\n    const entryPath = join(folderPath, entry)\r\n    const stats = await fs.promises.stat(entryPath)\r\n\r\n    const zipEntryPath = join(relativePath, entry)\r\n\r\n    if (stats.isDirectory()) {\r\n      const subZip = zip.folder(zipEntryPath)\r\n      await addFolderToZip(entryPath, subZip, zipEntryPath)\r\n    } else {\r\n      const fileData = await fs.promises.readFile(entryPath)\r\n      zip.file(entry, fileData)\r\n    }\r\n  }\r\n}\r\n\r\nexport const exportWorld = async (path: string, type: 'zip' | 'folder', zipName = 'world-prismarine-exported') => {\r\n  try {\r\n    if (type === 'zip') {\r\n      setLoadingScreenStatus('Generating zip, this may take a few minutes')\r\n      const zip = new JSZip()\r\n      await addFolderToZip(path, zip, '')\r\n\r\n      // Generate the ZIP archive content\r\n      const zipContent = await zip.generateAsync({ type: 'blob' })\r\n\r\n      // Create a download link and trigger the download\r\n      const downloadLink = document.createElement('a')\r\n      downloadLink.href = URL.createObjectURL(zipContent)\r\n      // todo use loaded zip/folder name\r\n      downloadLink.download = `${zipName}.zip`\r\n      downloadLink.click()\r\n\r\n      // Clean up the URL object after download\r\n      URL.revokeObjectURL(downloadLink.href)\r\n    } else {\r\n      setLoadingScreenStatus('Preparing export folder')\r\n      let dest = '/'\r\n      if ((await fs.promises.readdir('/export')).length) {\r\n        const { levelDat } = (await readLevelDat(path))!\r\n        dest = await uniqueFileNameFromWorldName(levelDat.LevelName, path)\r\n      }\r\n      setLoadingScreenStatus(`Copying files to ${dest} of selected folder`)\r\n      await copyFilesAsync(path, '/export' + dest)\r\n    }\r\n  } finally {\r\n    setLoadingScreenStatus(undefined)\r\n  }\r\n}\r\n\r\n// todo include in help\r\nconst exportLoadedWorld = async () => {\r\n  await saveServer()\r\n  let worldFolder = fsState.inMemorySavePath\r\n  if (!worldFolder.startsWith('/')) worldFolder = `/${worldFolder}`\r\n  await exportWorld(worldFolder, 'zip')\r\n}\r\n\r\nwindow.exportWorld = exportLoadedWorld\r\n\r\nconst writeText = (text) => {\r\n  displayClientChat(text)\r\n}\r\n\r\nexport const commands: Array<{\r\n  command: string[],\r\n  alwaysAvailable?: boolean,\r\n  invoke (args: string[]): Promise<void> | void\r\n  //@ts-format-ignore-region\r\n}> = [\r\n  {\r\n    command: ['/download', '/export'],\r\n    invoke: exportLoadedWorld\r\n  },\r\n  {\r\n    command: ['/publish', '/share'],\r\n    async invoke () {\r\n      const text = await openToWanAndCopyJoinLink(writeText)\r\n      if (text) writeText(text)\r\n    }\r\n  },\r\n  {\r\n    command: ['/close'],\r\n    invoke () {\r\n      const text = closeWan()\r\n      if (text) writeText(text)\r\n    }\r\n  },\r\n  {\r\n    command: ['/save'],\r\n    async invoke () {\r\n      await saveServer(false)\r\n      writeText('Saved to browser memory')\r\n    }\r\n  },\r\n  {\r\n    command: ['/pos'],\r\n    alwaysAvailable: true,\r\n    async invoke ([type]) {\r\n      let pos: { x: number, y: number, z: number } | undefined\r\n      if (type === 'block') {\r\n        const blockPos = window.cursorBlockRel()?.position\r\n        if (blockPos) {\r\n          pos = { x: blockPos.x, y: blockPos.y, z: blockPos.z }\r\n        }\r\n      } else {\r\n        const playerPos = bot.entity.position\r\n        pos = { x: playerPos.x, y: playerPos.y, z: playerPos.z }\r\n      }\r\n      if (!pos) return\r\n      const formatted = `${pos.x.toFixed(2)} ${pos.y.toFixed(2)} ${pos.z.toFixed(2)}`\r\n      await navigator.clipboard.writeText(formatted)\r\n      writeText(`Copied position to clipboard: ${formatted}`)\r\n    }\r\n  },\r\n  {\r\n    command: ['/mesherlog'],\r\n    alwaysAvailable: true,\r\n    invoke () {\r\n      getThreeJsRendererMethods()?.downloadMesherLog()\r\n    }\r\n  }\r\n]\r\n//@ts-format-ignore-endregion\r\n\r\nexport const getBuiltinCommandsList = () => commands.filter(command => command.alwaysAvailable || miscUiState.singleplayer).flatMap(command => command.command)\r\n\r\nexport const tryHandleBuiltinCommand = (message: string) => {\r\n  const [userCommand, ...args] = message.split(' ')\r\n\r\n  for (const command of commands.filter(command => command.alwaysAvailable || miscUiState.singleplayer)) {\r\n    if (command.command.includes(userCommand)) {\r\n      void command.invoke(args) // ignoring for now\r\n      return true\r\n    }\r\n  }\r\n}\r\n","import { GoogleOAuthProvider, useGoogleLogin } from '@react-oauth/google'\r\nimport { proxy, ref, subscribe } from 'valtio'\r\nimport React from 'react'\r\nimport { loadScript } from 'renderer/viewer/lib/utils'\r\nimport { loadGoogleDriveApi, loadInMemorySave } from './react/SingleplayerProvider'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { showOptionsModal } from './react/SelectOption'\r\nimport { appQueryParams } from './appParams'\r\n\r\nconst CLIENT_ID = '137156026346-igv2gkjsj2hlid92rs3q7cjjnc77s132.apps.googleusercontent.com'\r\n// const CLIENT_ID = process.env.GOOGLE_CLIENT_ID\r\nconst SCOPES = 'https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.install'\r\nexport const APP_ID = CLIENT_ID.split('-')[0]\r\n\r\nexport const GoogleDriveProvider = ({ children }) => {\r\n  return React.createElement(GoogleOAuthProvider, { clientId: CLIENT_ID } as any, children)\r\n  // return <GoogleOAuthProvider clientId={CLIENT_ID}><Root /></GoogleOAuthProvider>\r\n}\r\n\r\nexport const isGoogleDriveAvailable = () => {\r\n  return !!CLIENT_ID\r\n}\r\n\r\nexport const useGoogleLogIn = () => {\r\n  const login = useGoogleLogin({\r\n    onSuccess (tokenResponse) {\r\n      localStorage.hasEverLoggedIn = true\r\n      googleProviderState.accessToken = tokenResponse.access_token\r\n      googleProviderState.expiresIn = ref(new Date(Date.now() + tokenResponse.expires_in * 1000))\r\n      googleProviderState.hasEverLoggedIn = true\r\n    },\r\n    // prompt: hasEverLoggedIn ? 'none' : 'consent',\r\n    scope: SCOPES,\r\n    flow: 'implicit',\r\n    onError (error) {\r\n      const accessDenied = error.error === 'access_denied' || error.error === 'invalid_scope' || (error as any).error_subtype === 'access_denied'\r\n      if (accessDenied) {\r\n        googleProviderState.hasEverLoggedIn = false\r\n      }\r\n    }\r\n  })\r\n  return () => login({\r\n    prompt: googleProviderState.hasEverLoggedIn ? 'none' : 'consent'\r\n  })\r\n}\r\n\r\nexport const possiblyHandleStateVariable = async () => {\r\n  const stateParam = appQueryParams.state\r\n  if (!stateParam) return\r\n  setLoadingScreenStatus('Opening world in read only mode, waiting for login...')\r\n  await loadGoogleDriveApi()\r\n  await loadScript('https://accounts.google.com/gsi/client')\r\n  const parsed = JSON.parse(stateParam) as {\r\n    ids: [string]\r\n    action: 'open'\r\n    userId: string\r\n  }\r\n  const tokenClient = window.google.accounts.oauth2.initTokenClient({\r\n    client_id: CLIENT_ID,\r\n    scope: SCOPES,\r\n    async callback (response) {\r\n      if (response.error) {\r\n        setLoadingScreenStatus('Error: ' + response.error, true)\r\n        googleProviderState.hasEverLoggedIn = false\r\n        return\r\n      }\r\n      setLoadingScreenStatus('Opening world in read only mode...')\r\n      googleProviderState.accessToken = response.access_token\r\n      // await mountGoogleDriveFolder(true, parsed.ids[0])\r\n      await loadInMemorySave('/google')\r\n    }\r\n  })\r\n  const choice = await showOptionsModal('Select an action...', ['Login'])\r\n  if (choice === 'Login') {\r\n    tokenClient.requestAccessToken({\r\n      prompt: googleProviderState.hasEverLoggedIn ? '' : 'consent',\r\n    })\r\n  } else {\r\n    window.close()\r\n  }\r\n}\r\n\r\nexport const googleProviderState = proxy({\r\n  accessToken: (localStorage.saveAccessToken ? localStorage.accessToken : null) as string | null,\r\n  hasEverLoggedIn: !!(localStorage.hasEverLoggedIn),\r\n  isReady: false,\r\n  expiresIn: localStorage.saveAccessToken ? ref(new Date(Date.now() + 1000 * 60 * 60)) : null,\r\n  readonlyMode: localStorage.googleReadonlyMode ? localStorage.googleReadonlyMode === 'true' : true,\r\n  lastSelectedFolder: (localStorage.lastSelectedFolder ? JSON.parse(localStorage.lastSelectedFolder) : null) as {\r\n    id: string\r\n    name: string\r\n  } | null\r\n})\r\n\r\nsubscribe(googleProviderState, () => {\r\n  localStorage.googleReadonlyMode = googleProviderState.readonlyMode\r\n  localStorage.lastSelectedFolder = googleProviderState.lastSelectedFolder ? JSON.stringify(googleProviderState.lastSelectedFolder) : null\r\n  if (googleProviderState.hasEverLoggedIn) {\r\n    localStorage.hasEverLoggedIn = true\r\n  } else {\r\n    delete localStorage.hasEverLoggedIn\r\n  }\r\n\r\n  if (localStorage.saveAccessToken && googleProviderState) {\r\n    // For testing only\r\n    localStorage.accessToken = googleProviderState.accessToken || null\r\n  } else {\r\n    delete localStorage.accessToken\r\n  }\r\n})\r\n","import './GoogleButton.css'\r\n\r\nexport default ({ onClick }) => {\r\n  return <button\r\n    className=\"gsi-material-button\" onClick={onClick} style={{\r\n      transform: 'scale(0.55) translate(-20%)',\r\n    }}\r\n  >\r\n    <div className=\"gsi-material-button-state\" />\r\n    <div className=\"gsi-material-button-content-wrapper\">\r\n      <div className=\"gsi-material-button-icon\">\r\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n          <path fill=\"#EA4335\" d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\" />\r\n          <path fill=\"#4285F4\" d=\"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\" />\r\n          <path fill=\"#FBBC05\" d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\" />\r\n          <path fill=\"#34A853\" d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\" />\r\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" />\r\n        </svg>\r\n      </div>\r\n      <span className=\"gsi-material-button-contents\">Continue with Google</span>\r\n      <span style={{ display: 'none' }}>Continue with Google</span>\r\n    </div>\r\n  </button>\r\n}\r\n","import fs from 'fs'\r\nimport { proxy, subscribe, useSnapshot } from 'valtio'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { loadScript } from 'renderer/viewer/lib/utils'\r\nimport { fsState, loadSave, longArrayToNumber, readLevelDat } from '../loadSave'\r\nimport { googleDriveGetFileIdFromPath, mountExportFolder, mountGoogleDriveFolder, removeFileRecursiveAsync } from '../browserfs'\r\nimport { hideCurrentModal, showModal } from '../globalState'\r\nimport { haveDirectoryPicker } from '../utils'\r\nimport { setLoadingScreenStatus } from '../appStatus'\r\nimport { exportWorld } from '../builtinCommands'\r\nimport { googleProviderState, useGoogleLogIn, GoogleDriveProvider, isGoogleDriveAvailable, APP_ID } from '../googledrive'\r\nimport Singleplayer, { WorldProps } from './Singleplayer'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport { showOptionsModal } from './SelectOption'\r\nimport Input from './Input'\r\nimport GoogleButton from './GoogleButton'\r\n\r\nconst worldsProxy = proxy({\r\n  value: null as null | WorldProps[],\r\n  brokenWorlds: [] as string[],\r\n  selectedProvider: 'local' as 'local' | 'google',\r\n  selectedGoogleId: '',\r\n  error: '',\r\n})\r\n\r\nexport const getWorldsPath = () => {\r\n  return worldsProxy.selectedProvider === 'local' ? `/data/worlds` : worldsProxy.selectedProvider === 'google' ? `/google/${'/'.replace(/\\/$/, '')}` : ''\r\n}\r\n\r\nconst providersEnableFeatures = {\r\n  local: {\r\n    calculateSize: true,\r\n    delete: true,\r\n    export: true,\r\n    icon: true\r\n  },\r\n  google: {\r\n    calculateSize: false,\r\n    // TODO\r\n    delete: false,\r\n    export: false,\r\n    icon: true\r\n  }\r\n}\r\n\r\nexport const readWorlds = (abortController: AbortController) => {\r\n  if (abortController.signal.aborted) return\r\n  worldsProxy.error = ''\r\n  worldsProxy.brokenWorlds = [];\r\n  (async () => {\r\n    const brokenWorlds = [] as string[]\r\n    try {\r\n      const loggedIn = !!googleProviderState.accessToken\r\n      worldsProxy.value = null\r\n      if (worldsProxy.selectedProvider === 'google' && !loggedIn) {\r\n        worldsProxy.value = []\r\n        return\r\n      }\r\n      const worldsPath = getWorldsPath()\r\n      const provider = worldsProxy.selectedProvider\r\n\r\n      const worlds = await fs.promises.readdir(worldsPath)\r\n\r\n      const newMappedWorlds = (await Promise.allSettled(worlds.map(async (folder) => {\r\n        const { levelDat } = (await readLevelDat(`${worldsPath}/${folder}`))!\r\n        const levelDatStat = await fs.promises.stat(`${worldsPath}/${folder}/level.dat`)\r\n        let size = 0\r\n        if (providersEnableFeatures[provider].calculateSize) {\r\n          // todo use whole dir size\r\n          for (const region of await fs.promises.readdir(`${worldsPath}/${folder}/region`)) {\r\n            // eslint-disable-next-line no-await-in-loop -- it's still fast enough, nobody complains about it\r\n            const stat = await fs.promises.stat(`${worldsPath}/${folder}/region/${region}`)\r\n            size += stat.size\r\n          }\r\n        }\r\n        let iconBase64 = ''\r\n        if (providersEnableFeatures[provider].icon) {\r\n          const iconPath = `${worldsPath}/${folder}/icon.png`\r\n          try {\r\n            iconBase64 = await fs.promises.readFile(iconPath, 'base64')\r\n          } catch {\r\n            // ignore\r\n          }\r\n        }\r\n        const levelName = levelDat.LevelName as string | undefined\r\n        return {\r\n          name: folder,\r\n          title: levelName ?? folder,\r\n          lastPlayed: levelDat.LastPlayed && longArrayToNumber(levelDat.LastPlayed),\r\n          detail: `${levelDat.Version?.Name ?? 'unknown version'}, ${folder}`,\r\n          iconSrc: iconBase64 ? `data:image/png;base64,${iconBase64}` : undefined,\r\n          size,\r\n          lastModified: levelDatStat.mtimeMs,\r\n          group: 'IndexedDB Memory Worlds'\r\n        } satisfies WorldProps & { lastModified?: number }\r\n      }))).filter((x, i) => {\r\n        if (x.status === 'rejected') {\r\n          console.warn(x.reason)\r\n          brokenWorlds.push(worlds[i])\r\n          return false\r\n        }\r\n        return true\r\n      }).map(x => (x as Extract<typeof x, { value }>).value).sort((a, b) => {\r\n        const getScore = (x: typeof a) => {\r\n          return x.lastModified ?? 0\r\n        }\r\n        return getScore(b) - getScore(a)\r\n      })\r\n      if (abortController.signal.aborted) return\r\n      worldsProxy.value = newMappedWorlds\r\n    } catch (err) {\r\n      if (err.name === 'AbortError') return\r\n      console.warn(err)\r\n      worldsProxy.value = null\r\n      worldsProxy.error = err.message\r\n    }\r\n    worldsProxy.brokenWorlds = brokenWorlds\r\n  })().catch((err) => {\r\n    // todo it still doesn't work for some reason!\r\n    worldsProxy.error = err.message\r\n  })\r\n}\r\n\r\nexport const loadInMemorySave = async (worldPath: string) => {\r\n  fsState.saveLoaded = false\r\n  fsState.isReadonly = false\r\n  fsState.syncFs = false\r\n  fsState.inMemorySave = true\r\n  await loadSave(worldPath)\r\n}\r\n\r\nexport default () => {\r\n  const active = useIsModalActive('singleplayer')\r\n\r\n  if (!active) return null\r\n\r\n  return <GoogleDriveProvider>\r\n    <Inner />\r\n  </GoogleDriveProvider>\r\n}\r\n\r\nexport const loadGoogleDriveApi = async () => {\r\n  const scriptEl = await loadScript('https://apis.google.com/js/api.js')\r\n  if (!scriptEl) return // already loaded\r\n  return new Promise<void>((resolve) => {\r\n    gapi.load('client', () => {\r\n      gapi.load('client:picker', () => {\r\n        void gapi.client.load('https://www.googleapis.com/discovery/v1/apis/drive/v3/rest').then(() => {\r\n          googleProviderState.isReady = true\r\n          resolve()\r\n        })\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\nconst Inner = () => {\r\n  const worlds = useSnapshot(worldsProxy).value as WorldProps[] | null\r\n  const { selectedProvider, error, brokenWorlds, selectedGoogleId } = useSnapshot(worldsProxy)\r\n  const readWorldsAbortController = useRef(new AbortController())\r\n\r\n  // 3rd party providers\r\n  useEffect(() => {\r\n    if (selectedProvider !== 'google') return\r\n    void loadGoogleDriveApi()\r\n  }, [selectedProvider])\r\n\r\n  const loggedIn = !!useSnapshot(googleProviderState).accessToken\r\n  const googleDriveReadonly = useSnapshot(googleProviderState).readonlyMode\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (selectedProvider === 'google') {\r\n        if (!selectedGoogleId) {\r\n          worldsProxy.value = []\r\n          return\r\n        }\r\n        await mountGoogleDriveFolder(googleProviderState.readonlyMode, selectedGoogleId)\r\n        const exists = async (path) => {\r\n          try {\r\n            await fs.promises.stat(path)\r\n            return true\r\n          } catch {\r\n            return false\r\n          }\r\n        }\r\n        if (await exists(`${getWorldsPath()}/level.dat`)) {\r\n          await loadInMemorySave(getWorldsPath())\r\n          return\r\n        }\r\n      }\r\n      if (selectedProvider === 'local' && !(await fs.promises.stat('/data/worlds').catch(() => false))) {\r\n        await fs.promises.mkdir('/data/worlds')\r\n      }\r\n      readWorlds(readWorldsAbortController.current)\r\n    })()\r\n\r\n    return () => {\r\n      readWorldsAbortController.current.abort()\r\n      readWorldsAbortController.current = new AbortController()\r\n    }\r\n  }, [selectedProvider, loggedIn, googleDriveReadonly, selectedGoogleId])\r\n\r\n  const googleLogIn = useGoogleLogIn()\r\n\r\n  const googlePicker = useRef/* <google.picker.Picker | null> */(null as any)\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      googlePicker.current?.dispose()\r\n    }\r\n  })\r\n\r\n  const selectGoogleFolder = async () => {\r\n    if (googleProviderState.lastSelectedFolder) {\r\n      // ask to use saved previous fodler\r\n      const choice = await showOptionsModal(`Use previously selected folder \"${googleProviderState.lastSelectedFolder.name}\"?`, ['Yes', 'No'])\r\n      if (!choice) return\r\n      if (choice === 'Yes') {\r\n        worldsProxy.selectedGoogleId = googleProviderState.lastSelectedFolder.id\r\n        return\r\n      }\r\n    }\r\n\r\n    const { google } = window\r\n\r\n    const view = new google.picker.DocsView(google.picker.ViewId.FOLDERS)\r\n      .setIncludeFolders(true)\r\n      .setMimeTypes('application/vnd.google-apps.folder')\r\n      .setSelectFolderEnabled(true)\r\n      .setParent('root')\r\n\r\n\r\n    googlePicker.current = new google.picker.PickerBuilder()\r\n      .enableFeature(google.picker.Feature.NAV_HIDDEN)\r\n      .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)\r\n      .setDeveloperKey('AIzaSyBTiHpEqaLL7mEcrsnSS4M-z8cpRH5UwY0')\r\n      .setAppId(APP_ID)\r\n      .setOAuthToken(googleProviderState.accessToken)\r\n      .addView(view)\r\n      .addView(new google.picker.DocsUploadView())\r\n      .setTitle('Select a folder with your worlds')\r\n      .setCallback((data) => {\r\n        if (data.action === google.picker.Action.PICKED) {\r\n          googleProviderState.lastSelectedFolder = {\r\n            id: data.docs[0].id,\r\n            name: data.docs[0].name,\r\n          }\r\n          worldsProxy.selectedGoogleId = data.docs[0].id\r\n        }\r\n      })\r\n      .build()\r\n    googlePicker.current.setVisible(true)\r\n  }\r\n\r\n  const isGoogleProviderReady = useSnapshot(googleProviderState).isReady\r\n  const providerActions = loggedIn && selectedProvider === 'google' && isGoogleProviderReady && !selectedGoogleId ? {\r\n    'Select Folder': selectGoogleFolder\r\n  } : selectedProvider === 'google' ? isGoogleProviderReady ? loggedIn ? {\r\n    'Log Out' () {\r\n      googleProviderState.hasEverLoggedIn = false\r\n      googleProviderState.accessToken = null\r\n      googleProviderState.lastSelectedFolder = null\r\n      window.google.accounts.oauth2.revoke(googleProviderState.accessToken)\r\n    },\r\n    async [`Read Only: ${googleDriveReadonly ? 'ON' : 'OFF'}`] () {\r\n      if (googleProviderState.readonlyMode) {\r\n        const choice = await showOptionsModal('[Unstable Feature] Enabling world save might corrupt your worlds, eg remove entities (note: you can always restore previous version of files in Drive)', ['Continue'])\r\n        if (choice !== 'Continue') return\r\n      }\r\n      googleProviderState.readonlyMode = !googleProviderState.readonlyMode\r\n    },\r\n    'Select Folder': selectGoogleFolder,\r\n    // 'Worlds Path': <Input rootStyles={{ width: 100 }} placeholder='Worlds path' defaultValue={worldsPath} onBlur={(e) => {\r\n    //   googleProviderData.worldsPath = e.target.value\r\n    // }} />\r\n  } : {\r\n    'Log In': <GoogleButton onClick={googleLogIn} />\r\n  } : {\r\n    'Loading...' () { }\r\n  } : undefined\r\n  // end\r\n\r\n  return <Singleplayer\r\n    error={error}\r\n    isReadonly={selectedProvider === 'google' && (googleDriveReadonly || !isGoogleProviderReady || !selectedGoogleId)}\r\n    // providers={{\r\n    //   local: 'Local',\r\n    //   google: 'Google Drive',\r\n    // }}\r\n    disabledProviders={[...isGoogleDriveAvailable() ? [] : ['google']]}\r\n    worldData={worlds}\r\n    providerActions={providerActions}\r\n    activeProvider={selectedProvider}\r\n    setActiveProvider={(provider) => {\r\n      worldsProxy.selectedProvider = provider as any\r\n    }}\r\n    warning={brokenWorlds.length ? `Some worlds are broken: ${brokenWorlds.join(', ')}` : undefined}\r\n    warningAction={async () => {\r\n      for (const brokenWorld of worldsProxy.brokenWorlds) {\r\n        setLoadingScreenStatus(`Removing broken world ${brokenWorld}`)\r\n        // eslint-disable-next-line no-await-in-loop\r\n        await removeFileRecursiveAsync(`${getWorldsPath()}/${brokenWorld}`)\r\n      }\r\n      setLoadingScreenStatus(undefined)\r\n    }}\r\n    warningActionLabel='Remove broken worlds'\r\n    onWorldAction={async (action, worldName) => {\r\n      const worldPath = `${getWorldsPath()}/${worldName}`\r\n      const openInGoogleDrive = () => {\r\n        const fileId = googleDriveGetFileIdFromPath(worldPath.replace('/google/', ''))\r\n        if (!fileId) return alert('File not found')\r\n        window.open(`https://drive.google.com/drive/folders/${fileId}`)\r\n      }\r\n\r\n      if (action === 'load') {\r\n        setLoadingScreenStatus(`Starting loading world ${worldName}`)\r\n        await loadInMemorySave(worldPath)\r\n        return\r\n      }\r\n      if (action === 'delete') {\r\n        if (selectedProvider === 'google') {\r\n          openInGoogleDrive()\r\n          return\r\n        }\r\n\r\n        if (!confirm('Are you sure you want to delete current world')) return\r\n        setLoadingScreenStatus(`Removing world ${worldName}`)\r\n        await removeFileRecursiveAsync(worldPath)\r\n        setLoadingScreenStatus(undefined)\r\n        readWorlds(readWorldsAbortController.current)\r\n      }\r\n      if (action === 'export') {\r\n        if (selectedProvider === 'google') {\r\n          openInGoogleDrive()\r\n          return\r\n        }\r\n\r\n        const selectedVariant =\r\n          haveDirectoryPicker()\r\n            ? await showOptionsModal('Select export type', ['Select folder (recommended)', 'Download ZIP file'])\r\n            : await showOptionsModal('Select export type', ['Download ZIP file'])\r\n        if (!selectedVariant) return\r\n        if (selectedVariant === 'Select folder (recommended)') {\r\n          const success = await mountExportFolder()\r\n          if (!success) return\r\n        }\r\n        await exportWorld(worldPath, selectedVariant === 'Select folder (recommended)' ? 'folder' : 'zip', worldName)\r\n      }\r\n    }}\r\n    onGeneralAction={(action) => {\r\n      if (action === 'cancel') {\r\n        hideCurrentModal()\r\n      }\r\n      if (action === 'create') {\r\n        showModal({ reactType: 'create-world' })\r\n      }\r\n    }}\r\n  />\r\n}\r\n","import React, { CSSProperties } from 'react'\r\nimport Select from './Select'\r\n\r\ntype Version = { value: string, label: string }\r\n\r\nexport default (\r\n  { versions, selected, onChange, updateOptions, containerStyle }:\r\n    {\r\n      versions: Version[],\r\n      selected?: Version,\r\n      onChange?: (newValue: string) => void,\r\n      updateOptions?: (newSel: string) => void,\r\n    } & Pick<React.ComponentProps<typeof Select>, 'containerStyle' | 'placeholder' | 'disabled'>\r\n) => {\r\n  return <Select\r\n    initialOptions={versions}\r\n    defaultValue={selected}\r\n    updateOptions={(newSel) => {\r\n      updateOptions?.(newSel)\r\n    }}\r\n    onValueChange={onChange}\r\n    containerStyle={containerStyle ?? { width: '190px' }}\r\n    getCssOnInput={(value) => {\r\n      if (!versions || !value) return {}\r\n      const parsedsupportedVersions = versions.map(x => x.value.split('.').map(Number))\r\n      const parsedValue = value.split('.').map(Number)\r\n\r\n      const compareVersions = (v1, v2) => {\r\n        for (let i = 0; i < Math.max(v1.length, v2.length); i++) {\r\n          const num1 = v1[i] || 0\r\n          const num2 = v2[i] || 0\r\n          if (num1 > num2) return 1\r\n          if (num1 < num2) return -1\r\n        }\r\n        return 0\r\n      }\r\n\r\n      parsedsupportedVersions.sort(compareVersions)\r\n      const minVersion = parsedsupportedVersions[0]\r\n      const maxVersion = parsedsupportedVersions.at(-1)\r\n\r\n      const isWithinRange = compareVersions(parsedValue, minVersion) >= 0 && compareVersions(parsedValue, maxVersion) <= 0\r\n      if (!isWithinRange) return { border: '1px solid red' }\r\n      if (!versions.some(x => x.value === value)) return { border: '1px solid yellow' }\r\n    }}\r\n  />\r\n\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { proxy, useSnapshot } from 'valtio'\r\nimport { filesize } from 'filesize'\r\nimport { getAvailableServerPlugins } from '../clientMods'\r\nimport { showModal } from '../globalState'\r\nimport Input from './Input'\r\nimport Screen from './Screen'\r\nimport Button from './Button'\r\nimport SelectGameVersion from './SelectGameVersion'\r\nimport styles from './createWorld.module.css'\r\nimport { InputOption, showInputsModal, showOptionsModal } from './SelectOption'\r\n\r\n// const worldTypes = ['default', 'flat', 'largeBiomes', 'amplified', 'customized', 'buffet', 'debug_all_block_states']\r\nconst worldTypes = ['default', 'flat', 'empty', 'nether', 'all_the_blocks']\r\nconst gameModes = ['survival', 'creative'/* , 'adventure', 'spectator' */]\r\n\r\nexport const creatingWorldState = proxy({\r\n  title: '',\r\n  type: worldTypes[0],\r\n  gameMode: gameModes[0],\r\n  version: '',\r\n  plugins: [] as string[]\r\n})\r\n\r\nexport default ({ cancelClick, createClick, customizeClick, versions, defaultVersion }) => {\r\n  const [quota, setQuota] = useState('')\r\n\r\n  const { title, type, version, gameMode, plugins } = useSnapshot(creatingWorldState)\r\n  useEffect(() => {\r\n    creatingWorldState.version = defaultVersion\r\n    void navigator.storage?.estimate?.().then(({ quota, usage }) => {\r\n      setQuota(`Storage usage: ${usage === undefined ? '?' : filesize(usage)} / ${quota ? filesize(quota) : '?'}`)\r\n    })\r\n  }, [])\r\n\r\n  return <Screen title=\"Create world\" backdrop=\"dirt\">\r\n    <form\r\n      style={{ display: 'flex' }} onSubmit={(e) => {\r\n        e.preventDefault()\r\n        createClick()\r\n      }}\r\n    >\r\n      <Input\r\n        autoFocus\r\n        value={title}\r\n        onChange={({ target: { value } }) => {\r\n          creatingWorldState.title = value\r\n        }}\r\n        placeholder='World name'\r\n      />\r\n      <SelectGameVersion\r\n        versions={versions.map((obj) => { return { value: obj.version, label: obj.version } })}\r\n        selected={{ value: defaultVersion, label: defaultVersion }}\r\n        onChange={(value) => {\r\n          creatingWorldState.version = value ?? defaultVersion\r\n        }}\r\n        containerStyle={{ width: '100px' }}\r\n      />\r\n      <button type='submit' style={{ visibility: 'hidden' }} />\r\n    </form>\r\n    <div style={{ display: 'flex' }}>\r\n      <Button onClick={() => {\r\n        const index = worldTypes.indexOf(type)\r\n        creatingWorldState.type = worldTypes[index === worldTypes.length - 1 ? 0 : index + 1]\r\n      }}\r\n      >World Type: {type}\r\n      </Button>\r\n      {/* <Button onClick={() => customizeClick()} disabled>\r\n        Customize\r\n      </Button> */}\r\n      <Button onClick={() => {\r\n        const index = gameModes.indexOf(gameMode)\r\n        creatingWorldState.gameMode = gameModes[index === gameModes.length - 1 ? 0 : index + 1]\r\n      }}\r\n      >\r\n        Game Mode: {gameMode}\r\n      </Button>\r\n    </div>\r\n    <div style={{ display: 'flex' }}>\r\n      <Button onClick={async () => {\r\n        const availableServerPlugins = await getAvailableServerPlugins()\r\n        const availableModNames = availableServerPlugins.map(mod => mod.name)\r\n        const choices: Record<string, InputOption> = Object.fromEntries(availableServerPlugins.map(mod => [mod.name, {\r\n          type: 'checkbox' as const,\r\n          defaultValue: creatingWorldState.plugins.includes(mod.name),\r\n          label: mod.name\r\n        }]))\r\n        choices.installMore = {\r\n          type: 'button' as const,\r\n          onButtonClick () {\r\n            showModal({ reactType: 'mods' })\r\n          }\r\n        }\r\n        const choice = await showInputsModal('Select server plugins from mods to install:', choices)\r\n        if (!choice) return\r\n        creatingWorldState.plugins = availableModNames.filter(modName => choice[modName])\r\n      }}\r\n      >Use Mods ({plugins.length})\r\n      </Button>\r\n      <Button\r\n        onClick={() => {\r\n          const index = gameModes.indexOf(gameMode)\r\n          creatingWorldState.gameMode = gameModes[index === gameModes.length - 1 ? 0 : index + 1]\r\n        }}\r\n        disabled\r\n      >\r\n        Save Type: Java\r\n      </Button>\r\n    </div>\r\n    <div className='muted' style={{ fontSize: 8 }}>Default and other world types are WIP</div>\r\n\r\n    <div style={{ display: 'flex' }}>\r\n      <Button onClick={() => {\r\n        cancelClick()\r\n      }}\r\n      >Cancel\r\n      </Button>\r\n      <Button disabled={!title} onClick={createClick}>\r\n        <b>\r\n          Create\r\n        </b>\r\n      </Button>\r\n    </div>\r\n    <div className='muted' style={{ fontSize: 9 }}>Note: save important worlds in folders on your hard drive!</div>\r\n    <div className='muted' style={{ fontSize: 9 }}>{quota}</div>\r\n  </Screen>\r\n}\r\n\r\nexport const WorldCustomize = ({ backClick }) => {\r\n  const { type } = useSnapshot(creatingWorldState)\r\n\r\n  return <Screen title='Customize world' backdrop='dirt'>\r\n    <div className={styles.world_layers_container}>\r\n      <div className=\"world_layer\" />\r\n    </div>\r\n    <Button onClick={backClick}>Back</Button>\r\n  </Screen>\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"world_layers_container\":\"world_layers_container-YYXzJi\",\"worldLayersContainer\":\"world_layers_container-YYXzJi\"};","import fs from 'fs'\r\nimport path from 'path'\r\nimport { hideCurrentModal, showModal } from '../globalState'\r\nimport defaultLocalServerOptions from '../defaultLocalServerOptions'\r\nimport { mkdirRecursive, uniqueFileNameFromWorldName } from '../browserfs'\r\nimport supportedVersions from '../supportedVersions.mjs'\r\nimport { getServerPlugin } from '../clientMods'\r\nimport CreateWorld, { WorldCustomize, creatingWorldState } from './CreateWorld'\r\nimport { getWorldsPath } from './SingleplayerProvider'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nexport default () => {\r\n  const activeCreate = useIsModalActive('create-world')\r\n  const activeCustomize = useIsModalActive('customize-world')\r\n  if (activeCreate) {\r\n    const versionsPerMinor = Object.fromEntries(supportedVersions.map(x => [x.split('.').slice(0, 2), x]))\r\n    const versions = Object.values(versionsPerMinor).map(x => {\r\n      return {\r\n        version: x,\r\n        label: x === defaultLocalServerOptions.version ? `${x} (default)` : x\r\n      }\r\n    })\r\n    return <CreateWorld\r\n      defaultVersion={defaultLocalServerOptions.version}\r\n      cancelClick={() => {\r\n        hideCurrentModal()\r\n      }}\r\n      createClick={async () => {\r\n        // create new world\r\n        const { title, type, version, gameMode, plugins } = creatingWorldState\r\n        // todo display path in ui + disable if exist\r\n        const savePath = await uniqueFileNameFromWorldName(title, getWorldsPath())\r\n        await mkdirRecursive(savePath)\r\n        await loadPluginsIntoWorld(savePath, plugins)\r\n        hideCurrentModal()\r\n        window.dispatchEvent(new CustomEvent('singleplayer', {\r\n          detail: {\r\n            levelName: title,\r\n            version,\r\n            generation: {\r\n              name: type\r\n            },\r\n            'worldFolder': savePath,\r\n            gameMode: gameMode === 'survival' ? 0 : 1,\r\n          },\r\n        }))\r\n      }}\r\n      customizeClick={() => {\r\n        showModal({ reactType: 'customize-world' })\r\n      }}\r\n      versions={versions}\r\n    />\r\n  }\r\n  if (activeCustomize) {\r\n    return <WorldCustomize backClick={() => hideCurrentModal()} />\r\n  }\r\n  return null\r\n}\r\n\r\nexport const loadPluginsIntoWorld = async (worldPath: string, plugins: string[]) => {\r\n  for (const plugin of plugins) {\r\n    // eslint-disable-next-line no-await-in-loop\r\n    const { content, version } = await getServerPlugin(plugin) ?? {}\r\n    if (content) {\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await mkdirRecursive(path.join(worldPath, 'plugins'))\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await fs.promises.writeFile(path.join(worldPath, 'plugins', `${plugin}-${version}.js`), content)\r\n    }\r\n  }\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { activeModalStack, miscUiState } from '../globalState'\r\nimport Button from './Button'\r\nimport { useUsingTouch } from './utilsApp'\r\nimport { pixelartIcons } from './PixelartIcon'\r\nimport { showNotification } from './NotificationProvider'\r\n\r\nconst hideOnModals = new Set(['chat'])\r\n\r\nexport default () => {\r\n  const [fullScreen, setFullScreen] = useState(false)\r\n  useEffect(() => {\r\n    document.documentElement.addEventListener('fullscreenchange', () => {\r\n      setFullScreen(!!document.fullscreenElement)\r\n    })\r\n  }, [])\r\n  const { gameLoaded } = useSnapshot(miscUiState)\r\n\r\n  const activeStack = useSnapshot(activeModalStack)\r\n\r\n  const inMainMenu = activeStack.length === 0 && !gameLoaded\r\n\r\n  const usingTouch = useUsingTouch()\r\n  const hideButton = activeStack.some(x => hideOnModals.has(x.reactType))\r\n\r\n  if (hideButton || !usingTouch || !document.documentElement.requestFullscreen || fullScreen) return null\r\n\r\n  return <Button\r\n    icon={pixelartIcons.scale}\r\n    style={{\r\n      position: 'fixed',\r\n      top: 5,\r\n      left: inMainMenu ? 35 : 5,\r\n      width: 22,\r\n    }}\r\n    onClick={async () => {\r\n      try {\r\n        await document.documentElement.requestFullscreen()\r\n      } catch (err) {\r\n        showNotification(`${err.message ?? err}`, undefined, true)\r\n      }\r\n    }}\r\n  />\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport { useEffect, useRef, Fragment } from 'react'\r\nimport type { UIDefinition } from 'mcraft-fun-mineflayer/build/customChannel'\r\nimport MessageFormattedString from './MessageFormattedString'\r\nimport { useUiMotion } from './uiMotion'\r\nimport PixelartIcon from './PixelartIcon'\r\n\r\nexport const mineflayerPluginHudState = proxy({\r\n  ui: [] as Array<UIDefinition & { id: string }>,\r\n})\r\n\r\ntype TextPart = { type: 'text'; content: string } | { type: 'icon'; iconName: string }\r\n\r\nconst parseTextWithIcons = (text: string): TextPart[] => {\r\n  const parts: TextPart[] = []\r\n  let currentText = ''\r\n  let i = 0\r\n\r\n  while (i < text.length) {\r\n    if (text[i] === '{' && text.slice(i, i + 6) === '{icon:') {\r\n      // If we have accumulated text before the icon, add it\r\n      if (currentText) {\r\n        parts.push({ type: 'text', content: currentText })\r\n        currentText = ''\r\n      }\r\n\r\n      // Find the end of the icon placeholder\r\n      const endBrace = text.indexOf('}', i)\r\n      if (endBrace !== -1) {\r\n        const iconName = text.slice(i + 6, endBrace)\r\n        parts.push({ type: 'icon', iconName })\r\n        i = endBrace + 1\r\n        continue\r\n      }\r\n    }\r\n    currentText += text[i]\r\n    i++\r\n  }\r\n\r\n  // Add any remaining text\r\n  if (currentText) {\r\n    parts.push({ type: 'text', content: currentText })\r\n  }\r\n\r\n  return parts\r\n}\r\n\r\nconst TextElement = ({ text, x, y, motion = true, formatted = true, css = '', onTab = false }: UIDefinition & { type: 'text' }) => {\r\n  const motionRef = useRef<HTMLDivElement>(null)\r\n  const innerRef = useRef<HTMLDivElement>(null)\r\n\r\n  useUiMotion(motionRef, motion)\r\n\r\n  useEffect(() => {\r\n    if (!css) return\r\n    innerRef.current!.style.cssText = css\r\n  }, [css])\r\n\r\n  if (onTab && !document.hidden) return null\r\n\r\n  const parts = parseTextWithIcons(text)\r\n\r\n  return (\r\n    <div\r\n      ref={motionRef}\r\n      style={{\r\n        position: 'absolute',\r\n        left: x,\r\n        top: y,\r\n        transition: motion ? 'transform 0.1s ease-out' : 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '2px'\r\n      }}\r\n    >\r\n      <div ref={innerRef}>\r\n        {parts.map((part, index) => (\r\n          <Fragment key={index}>\r\n            {part.type === 'text' ? (\r\n              formatted ? <MessageFormattedString message={part.content} /> : part.content\r\n            ) : (\r\n              <PixelartIcon iconName={part.iconName} width={12} styles={{ display: 'inline-block' }} />\r\n            )}\r\n          </Fragment>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ImageElement = ({ url, x, y, width, height }: UIDefinition & { type: 'image' }) => {\r\n  return (\r\n    <img\r\n      src={url}\r\n      style={{\r\n        position: 'absolute',\r\n        left: x,\r\n        top: y,\r\n        width,\r\n        height\r\n      }}\r\n      alt=\"\"\r\n    />\r\n  )\r\n}\r\n\r\nexport default () => {\r\n  const { ui } = useSnapshot(mineflayerPluginHudState)\r\n\r\n  return (\r\n    <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', pointerEvents: 'none' }} className='mineflayer-plugin-hud'>\r\n      {ui.map((element, index) => {\r\n        if (element.type === 'lil') return null // Handled elsewhere\r\n        if (element.type === 'text') return <TextElement key={index} {...element} />\r\n        if (element.type === 'image') return <ImageElement key={index} {...element} />\r\n        return null\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import { proxy, subscribe, useSnapshot } from 'valtio'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport './MineflayerPluginConsole.css'\r\nimport { miscUiState } from '../globalState'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport { useScrollBehavior } from './hooks/useScrollBehavior'\r\n\r\nexport type ConsoleMessage = {\r\n  text: string\r\n  isRepl?: boolean\r\n  level?: 'log' | 'warn' | 'error'\r\n  id: number\r\n}\r\n\r\nexport const mineflayerConsoleState = proxy({\r\n  onExecute: null as ((code: string) => void) | null,\r\n  messages: [] as ConsoleMessage[],\r\n  replEnabled: false,\r\n  consoleEnabled: false,\r\n  takeoverMode: false\r\n})\r\n\r\nconst MessageLine = ({ message }: { message: ConsoleMessage }) => {\r\n  const messageClass = message.isRepl ? 'console-message-repl' : message.level ? `console-message-${message.level}` : ''\r\n  return (\r\n    <li className={`console-message ${messageClass}`}>\r\n      <span className=\"console-message-prefix\">&gt;</span>\r\n      {message.text}\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default () => {\r\n  const opened = useIsModalActive('console')\r\n  const usingTouch = useSnapshot(miscUiState).currentTouch\r\n  const { messages, replEnabled, consoleEnabled, onExecute } = useSnapshot(mineflayerConsoleState)\r\n\r\n  const consoleInput = useRef<HTMLInputElement>(null!)\r\n  const consoleMessages = useRef<HTMLDivElement>(null)\r\n\r\n  const { scrollToBottom } = useScrollBehavior(consoleMessages, { messages, opened })\r\n\r\n  // Add useEffect to focus input when opened\r\n  useEffect(() => {\r\n    if (opened && replEnabled) {\r\n      consoleInput.current?.focus()\r\n    }\r\n  }, [opened, replEnabled])\r\n\r\n  const updateInputValue = (newValue: string) => {\r\n    consoleInput.current.value = newValue\r\n    setTimeout(() => {\r\n      consoleInput.current.setSelectionRange(newValue.length, newValue.length)\r\n    }, 0)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={`console-wrapper console-messages-wrapper ${usingTouch ? 'display-mobile' : ''}`}>\r\n        <div ref={consoleMessages} className={`console ${opened ? 'opened' : ''}`} id=\"console-messages\">\r\n          {!consoleEnabled && (\r\n            <MessageLine\r\n              key=\"console-disabled\"\r\n              message={{\r\n                id: -1,\r\n                text: 'Console is not enabled. Enable it in the plugin initialization settings.',\r\n                level: 'error'\r\n              }}\r\n            />\r\n          )}\r\n          {messages.map((m) => (\r\n            <MessageLine key={m.id} message={m} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`console-wrapper console-input-wrapper ${usingTouch ? 'input-mobile' : ''}`} hidden={!opened}>\r\n        <form\r\n          className='console-input'\r\n          onSubmit={(e) => {\r\n            e.preventDefault()\r\n            const code = consoleInput.current.value\r\n            if (code) {\r\n              onExecute?.(code)\r\n              updateInputValue('')\r\n              // Scroll to bottom after sending command\r\n              scrollToBottom()\r\n            }\r\n          }}\r\n        >\r\n          <div className=\"console-input-container\">\r\n            <span className=\"console-input-prefix\">&gt;</span>\r\n            <input\r\n              defaultValue=''\r\n              ref={consoleInput}\r\n              type=\"text\"\r\n              className=\"console-input-field\"\r\n              id=\"consoleinput\"\r\n              spellCheck={false}\r\n              autoComplete=\"off\"\r\n              disabled={!replEnabled}\r\n              placeholder={replEnabled ? 'Enter JavaScript code (bot variable is available)' : 'REPL is not enabled'}\r\n            />\r\n          </div>\r\n          <button type='submit' style={{ visibility: 'hidden', position: 'absolute' }} />\r\n        </form>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import { EventEmitter } from 'events'\r\nimport { Duplex } from 'stream'\r\nimport states from 'minecraft-protocol/src/states'\r\nimport { createClient } from 'minecraft-protocol'\r\nimport { proxy, subscribe } from 'valtio'\r\nimport * as Gui from 'lil-gui'\r\nimport { CustomChannelPacketFromClient, CustomChannelPacketFromServer, UIDefinition } from 'mcraft-fun-mineflayer/build/customChannel'\r\nimport { activeModalStack } from './globalState'\r\nimport { mineflayerPluginHudState } from './react/MineflayerPluginHud'\r\nimport { mineflayerConsoleState } from './react/MineflayerPluginConsole'\r\nimport { showNotification } from './react/NotificationProvider'\r\n\r\nexport const viewerVersionState = proxy({\r\n  forwardChat: true,\r\n  version: '',\r\n  time: 0,\r\n  replEnabled: false,\r\n  consoleEnabled: false,\r\n  requiresPass: false,\r\n  clientIgnoredPackets: [] as string[]\r\n})\r\n\r\nclass CustomDuplex extends Duplex {\r\n  constructor (options, public writeAction) {\r\n    super(options)\r\n  }\r\n\r\n  override _read () {}\r\n\r\n  override _write (chunk, encoding, callback) {\r\n    this.writeAction(chunk)\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const getViewerVersionData = async (url: string) => {\r\n  const ws = await openWebsocket(url)\r\n  ws.send('version')\r\n  const result = await new Promise<{\r\n    version: string\r\n    time: number,\r\n    replEnabled: boolean,\r\n    consoleEnabled: boolean,\r\n    requiresPass: boolean,\r\n    forwardChat: boolean,\r\n    clientIgnoredPackets?: string[]\r\n    takeoverMode?: boolean\r\n  }>((resolve, reject) => {\r\n    ws.addEventListener('message', async (message) => {\r\n      const { data } = message\r\n      const parsed = JSON.parse(data.toString())\r\n      resolve(parsed)\r\n      ws.close()\r\n      // Update viewer version state\r\n      Object.assign(viewerVersionState, parsed)\r\n      // todo\r\n      customEvents.on('mineflayerBotCreated', () => {\r\n        const client = bot._client as any\r\n        const oldWrite = client.write.bind(client)\r\n        client.write = (...args) => {\r\n          const [name] = args\r\n          if (parsed?.clientIgnoredPackets?.includes(name)) {\r\n            return\r\n          }\r\n          oldWrite(...args)\r\n        }\r\n      })\r\n    })\r\n  })\r\n  mineflayerConsoleState.consoleEnabled = result.consoleEnabled\r\n  mineflayerConsoleState.replEnabled = result.replEnabled\r\n  mineflayerConsoleState.takeoverMode = result.takeoverMode ?? false\r\n  return result\r\n}\r\n\r\nconst openWebsocket = async (url: string) => {\r\n  if (url.startsWith(':')) url = `ws://localhost${url}`\r\n  if (!url.startsWith('ws')) url = `ws://${url}`\r\n  const ws = new WebSocket(url)\r\n  await new Promise<void>((resolve, reject) => {\r\n    ws.onopen = () => resolve()\r\n    ws.onerror = (err) => reject(new Error(`[websocket] Failed to connect to ${url}`))\r\n    ws.onclose = (ev) => reject(ev.reason)\r\n  })\r\n  return ws\r\n}\r\n\r\nexport const getWsProtocolStream = async (url: string) => {\r\n  const ws = await openWebsocket(url)\r\n  const clientDuplex = new CustomDuplex(undefined, data => {\r\n    // console.log('send', Buffer.from(data).toString('hex'))\r\n    ws.send(data)\r\n  })\r\n  // todo use keep alive instead?\r\n  let lastMessageTime = performance.now()\r\n  ws.addEventListener('message', async (message) => {\r\n    let { data } = message\r\n    if (data instanceof Blob) {\r\n      data = await data.arrayBuffer()\r\n    }\r\n    clientDuplex.push(Buffer.from(data))\r\n    lastMessageTime = performance.now()\r\n  })\r\n  setInterval(() => {\r\n    // if (clientDuplex.destroyed) return\r\n    // if (performance.now() - lastMessageTime > 10_000) {\r\n    //   console.log('no packats received in 10s!')\r\n    //   clientDuplex.end()\r\n    // }\r\n  }, 5000)\r\n\r\n  ws.addEventListener('close', () => {\r\n    console.log('ws closed')\r\n    clientDuplex.end()\r\n    setTimeout(() => {\r\n      bot?.emit('end', 'Connection lost')\r\n    }, 500)\r\n  })\r\n\r\n  ws.addEventListener('error', err => {\r\n    console.log('ws error', err)\r\n  })\r\n\r\n  return {\r\n    clientDuplex\r\n  }\r\n}\r\n\r\nconst CHANNEL_NAME = 'minecraft-web-client:data'\r\n\r\nconst handleCustomChannel = () => {\r\n  bot._client.registerChannel(CHANNEL_NAME, ['string', []])\r\n  const toCleanup = [] as Array<() => void>\r\n  subscribe(activeModalStack, () => {\r\n    if (activeModalStack.length === 1 && activeModalStack[0].reactType === 'main-menu') {\r\n      for (const fn of toCleanup) fn()\r\n      toCleanup.length = 0\r\n      // Clear console state when disconnecting\r\n      mineflayerConsoleState.messages = []\r\n      mineflayerConsoleState.replEnabled = false\r\n      mineflayerConsoleState.consoleEnabled = false\r\n    }\r\n  })\r\n\r\n  const send = (data: CustomChannelPacketFromClient) => {\r\n    bot._client.writeChannel(CHANNEL_NAME, JSON.stringify(data))\r\n  }\r\n\r\n  // Set up console execution handler\r\n  mineflayerConsoleState.onExecute = (code) => {\r\n    send({\r\n      type: 'eval',\r\n      code\r\n    })\r\n  }\r\n\r\n  const on = (callback: (data: CustomChannelPacketFromServer) => void) => {\r\n    bot._client.on(CHANNEL_NAME as any, (data) => {\r\n      const parsed = JSON.parse(data.toString())\r\n      callback(parsed)\r\n    })\r\n  }\r\n\r\n  const lils = {} as Record<string, Gui.GUI>\r\n\r\n  on((data) => {\r\n    switch (data.type) {\r\n      case 'eval': {\r\n        // Handle eval results\r\n        mineflayerConsoleState.messages.push({\r\n          id: Date.now(),\r\n          text: data.isError ? `${data.result}` : JSON.stringify(data.result),\r\n          isRepl: true,\r\n          level: data.isError ? 'error' : undefined\r\n        })\r\n        // Limit to 500 messages by removing oldest ones\r\n        if (mineflayerConsoleState.messages.length > 500) {\r\n          mineflayerConsoleState.messages = mineflayerConsoleState.messages.slice(-500)\r\n        }\r\n        break\r\n      }\r\n      case 'console': {\r\n        // Handle console messages\r\n        mineflayerConsoleState.messages.push({\r\n          id: Date.now(),\r\n          text: data.message,\r\n          level: data.level\r\n        })\r\n        // Limit to 500 messages by removing oldest ones\r\n        if (mineflayerConsoleState.messages.length > 500) {\r\n          mineflayerConsoleState.messages = mineflayerConsoleState.messages.slice(-500)\r\n        }\r\n        break\r\n      }\r\n      // todo\r\n      case 'kick' as any: {\r\n        bot.emit('end', (data as any).reason)\r\n        break\r\n      }\r\n      case 'ui': {\r\n        const { update } = data\r\n        if (update.data === null) {\r\n          // Remove UI element\r\n          mineflayerPluginHudState.ui = mineflayerPluginHudState.ui.filter(ui => ui.id !== update.id)\r\n\r\n          const gui = lils[update.id]\r\n          if (gui) {\r\n            gui.destroy()\r\n            delete lils[update.id]\r\n          }\r\n        } else {\r\n        // Add or update UI element\r\n          const existingIndex = mineflayerPluginHudState.ui.findIndex(ui => ui.id === update.id)\r\n          if (existingIndex === -1) {\r\n            mineflayerPluginHudState.ui.push({ ...update.data, id: update.id })\r\n          } else {\r\n            mineflayerPluginHudState.ui[existingIndex] = { ...update.data, id: update.id }\r\n          }\r\n\r\n          if (update.data.type === 'lil') {\r\n            let gui = lils[update.id]\r\n            if (!gui) {\r\n              gui = new Gui.GUI({\r\n                title: update.data.title,\r\n              })\r\n              lils[update.id] = gui\r\n            }\r\n\r\n            // Update or add controllers\r\n            const { params, buttons } = update.data\r\n            for (const button of buttons ?? []) {\r\n              params[button] = (() => {\r\n                send({\r\n                  type: 'ui',\r\n                  id: update.id,\r\n                  param: button,\r\n                  value: true\r\n                })\r\n              }) as any\r\n            }\r\n            // eslint-disable-next-line guard-for-in\r\n            for (const paramName in params) {\r\n              const value = params[paramName]\r\n              const controller = gui.controllers.find(c => c.property === paramName)\r\n\r\n              if (controller) {\r\n                // Update existing controller value\r\n                controller.object[paramName] = value\r\n                controller.updateDisplay()\r\n              } else {\r\n                // Add new controller if doesn't exist\r\n                const obj = { [paramName]: value }\r\n                const controller = gui.add(obj, paramName)\r\n                if (!buttons?.includes(paramName)) {\r\n                  controller.onChange((value) => {\r\n                    send({\r\n                      type: 'ui',\r\n                      id: update.id,\r\n                      param: paramName,\r\n                      value\r\n                    })\r\n                  })\r\n                }\r\n              }\r\n            }\r\n\r\n            // Remove controllers that are no longer in params\r\n            const paramNames = Object.keys(params)\r\n            gui.controllers = gui.controllers.filter(c => {\r\n              if (!paramNames.includes(c.property)) {\r\n                c.destroy()\r\n                return false\r\n              }\r\n              return true\r\n            })\r\n          }\r\n        }\r\n\r\n        break\r\n      }\r\n\r\n      case 'stats': {\r\n        globalThis.botStats = data\r\n        break\r\n      }\r\n\r\n      case 'method': {\r\n        console.log('Method result', data.result)\r\n        break\r\n      }\r\n      // No default\r\n    }\r\n  })\r\n\r\n  return {\r\n    send\r\n  }\r\n}\r\n\r\nexport const onBotCreatedViewerHandler = async () => {\r\n  const { send } = handleCustomChannel()\r\n  bot.physicsEnabled = false\r\n\r\n  await new Promise<void>(resolve => {\r\n    bot.once('inject_allowed', resolve)\r\n  })\r\n\r\n  const originalSetControlState = bot.setControlState.bind(bot)\r\n  bot.setControlState = (control, state) => {\r\n    if (bot.controlState[control] === state) {\r\n      return\r\n    }\r\n    if (!mineflayerConsoleState.takeoverMode) {\r\n      showNotification('Remote control is not enabled', 'Enable takeoverMode in bot plugin settings first')\r\n      return\r\n    }\r\n    // send command to viewer\r\n    send({\r\n      type: 'setControlState',\r\n      control,\r\n      value: state\r\n    })\r\n    originalSetControlState(control, state)\r\n  }\r\n}\r\n","import { useEffect, useMemo, useRef, useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { formatMessage, isStringAllowed } from '../chatUtils'\r\nimport { getBuiltinCommandsList, tryHandleBuiltinCommand } from '../builtinCommands'\r\nimport { gameAdditionalState, hideCurrentModal, miscUiState } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\nimport { viewerVersionState } from '../viewerConnector'\r\nimport Chat, { Message } from './Chat'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport { hideNotification, notificationProxy, showNotification } from './NotificationProvider'\r\nimport { getServerIndex, updateLoadedServerData } from './serversStorage'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\nimport { showOptionsModal } from './SelectOption'\r\n\r\nexport default () => {\r\n  const [messages, setMessages] = useState([] as Message[])\r\n  const isChatActive = useIsModalActive('chat')\r\n  const lastMessageId = useRef(0)\r\n  const lastPingTime = useRef(0)\r\n  const {\r\n    currentTouch: usingTouch,\r\n    disconnectedCleanup\r\n  } = useSnapshot(miscUiState)\r\n  const {\r\n    chatSelect,\r\n    messagesLimit,\r\n    chatOpacity,\r\n    chatOpacityOpened,\r\n    chatVanillaRestrictions,\r\n    debugChatScroll,\r\n    chatPingExtension,\r\n    chatSpellCheckEnabled\r\n  } = useSnapshot(options)\r\n  const isUsingMicrosoftAuth = useMemo(() => !!lastConnectOptions.value?.authenticatedAccount, [])\r\n  const { forwardChat } = useSnapshot(viewerVersionState)\r\n  const { viewerConnection } = useSnapshot(gameAdditionalState)\r\n\r\n  useEffect(() => {\r\n    bot.addListener('message', (jsonMsg, position) => {\r\n      if (position === 'game_info') return // ignore action bar messages, they are handled by the TitleProvider\r\n      if (jsonMsg['unsigned']) {\r\n        jsonMsg = jsonMsg['unsigned']\r\n      }\r\n      const parts = formatMessage(jsonMsg)\r\n      const messageText = parts.map(part => part.text).join('')\r\n\r\n      // Handle ping response\r\n      if (messageText === 'Pong!' && lastPingTime.current > 0) {\r\n        const latency = Date.now() - lastPingTime.current\r\n        parts.push({ text: ` Latency: ${latency}ms`, color: '#00ff00' })\r\n        lastPingTime.current = 0\r\n      }\r\n\r\n      setMessages(m => {\r\n        lastMessageId.current++\r\n        const newMessage: Message = {\r\n          parts,\r\n          id: lastMessageId.current,\r\n          timestamp: Date.now()\r\n        }\r\n\r\n        return [...m, newMessage].slice(-messagesLimit)\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const disabledReason = disconnectedCleanup ? 'You have been disconnected from the server on ' + new Date(disconnectedCleanup.date).toLocaleString() : undefined\r\n\r\n  return <Chat\r\n    chatVanillaRestrictions={chatVanillaRestrictions}\r\n    debugChatScroll={debugChatScroll}\r\n    allowSelection={chatSelect}\r\n    usingTouch={!!usingTouch}\r\n    opacity={(isChatActive ? chatOpacityOpened : chatOpacity) / 100}\r\n    messages={messages}\r\n    opened={isChatActive}\r\n    placeholder={forwardChat || !viewerConnection ? undefined : 'Chat forwarding is not enabled in the plugin settings'}\r\n    inputDisabled={disabledReason}\r\n    currentPlayerName={chatPingExtension ? bot.username : undefined}\r\n    spellCheckEnabled={chatSpellCheckEnabled}\r\n    onSpellCheckEnabledChange={(enabled) => {\r\n      options.chatSpellCheckEnabled = enabled\r\n    }}\r\n    getPingComplete={async (value) => {\r\n      const players = Object.keys(bot.players)\r\n      return players.filter(name => (!value || name.toLowerCase().includes(value.toLowerCase())) && name !== bot.username).map(name => `@${name}`)\r\n    }}\r\n    sendMessage={async (message) => {\r\n      // Record ping command time\r\n      if (message === '/ping') {\r\n        lastPingTime.current = Date.now()\r\n      }\r\n\r\n      const builtinHandled = tryHandleBuiltinCommand(message)\r\n      if (getServerIndex() !== undefined && (message.startsWith('/login') || message.startsWith('/register')) && options.saveLoginPassword !== 'never') {\r\n        const savePassword = () => {\r\n          let hadPassword = false\r\n          updateLoadedServerData((server) => {\r\n            server.autoLogin ??= {}\r\n            const password = message.split(' ')[1]\r\n            hadPassword = !!server.autoLogin[bot.username]\r\n            server.autoLogin[bot.username] = password\r\n            return { ...server }\r\n          })\r\n          if (options.saveLoginPassword === 'always') {\r\n            const message = hadPassword ? 'Password updated in browser for auto-login' : 'Password saved in browser for auto-login'\r\n            showNotification(message, undefined, false, undefined)\r\n          } else {\r\n            hideNotification()\r\n          }\r\n        }\r\n        if (options.saveLoginPassword === 'prompt') {\r\n          showNotification('Click here to save your password in browser for auto-login', undefined, false, undefined, savePassword)\r\n        } else {\r\n          savePassword()\r\n        }\r\n        notificationProxy.id = 'auto-login'\r\n        const listener = () => {\r\n          hideNotification()\r\n        }\r\n        bot.on('kicked', listener)\r\n        setTimeout(() => {\r\n          bot.removeListener('kicked', listener)\r\n        }, 2000)\r\n      }\r\n      if (!builtinHandled) {\r\n        if (chatVanillaRestrictions && !miscUiState.flyingSquid) {\r\n          const validation = isStringAllowed(message)\r\n          if (!validation.valid) {\r\n            const choice = await showOptionsModal(`Can't send invalid characters to vanilla server (${validation.invalid?.join(', ')}). You can use them only in command blocks.`, [\r\n              'Remove Them & Send'\r\n            ])\r\n            if (!choice) return\r\n            message = validation.clean!\r\n          }\r\n        }\r\n\r\n        if (message) {\r\n          bot.chat(message)\r\n        }\r\n      }\r\n    }}\r\n    onClose={() => {\r\n      hideCurrentModal()\r\n    }}\r\n    fetchCompletionItems={async (triggerKind, completeValue) => {\r\n      if ((triggerKind === 'explicit' || options.autoRequestCompletions)) {\r\n        let items = [] as string[]\r\n        try {\r\n          items = await bot.tabComplete(completeValue, true, true)\r\n        } catch (err) { }\r\n        if (typeof items[0] === 'object') {\r\n          // @ts-expect-error\r\n          if (items[0].match) items = items.map(i => i.match)\r\n        }\r\n        if (completeValue === '/') {\r\n          if (!items[0]?.startsWith('/')) {\r\n            // normalize\r\n            items = items.map(item => `/${item}`)\r\n          }\r\n          if (items.length) {\r\n            items = [...items, ...getBuiltinCommandsList()]\r\n          }\r\n        }\r\n        return items\r\n      }\r\n    }}\r\n  />\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport MessageFormattedString from './MessageFormattedString'\r\nimport './Title.css'\r\n\r\nexport type AnimationTimes = {\r\n  fadeIn: number,\r\n  stay: number,\r\n  fadeOut: number\r\n}\r\n\r\ntype TitleProps = {\r\n  title: string | Record<string, any>,\r\n  subtitle: string | Record<string, any>,\r\n  actionBar: string | Record<string, any>,\r\n  transitionTimes: AnimationTimes,\r\n  openTitle: boolean,\r\n  openActionBar: boolean\r\n}\r\n\r\nconst Title = ({\r\n  title,\r\n  subtitle,\r\n  actionBar,\r\n  transitionTimes,\r\n  openTitle = false,\r\n  openActionBar = false\r\n}: TitleProps) => {\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  const defaultFadeIn = 0.5\r\n  const defaultFadeOut = 1\r\n\r\n  useEffect(() => {\r\n    if (!mounted && (openTitle || openActionBar)) {\r\n      setMounted(true)\r\n    }\r\n  }, [openTitle, openActionBar])\r\n\r\n  return (\r\n    <div className='title-container'>\r\n      <AnimatePresence>\r\n        {openTitle && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{\r\n              duration: transitionTimes?.fadeIn ? transitionTimes.fadeIn / 1000 : defaultFadeIn,\r\n              exit: { duration: transitionTimes?.fadeOut ? transitionTimes.fadeOut / 1000 : defaultFadeOut }\r\n            }}\r\n          >\r\n            <h1 className='message-title'>\r\n              <MessageFormattedString message={title} />\r\n            </h1>\r\n            <h4 className='message-subtitle'>\r\n              <MessageFormattedString message={subtitle} />\r\n            </h4>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n      <AnimatePresence>\r\n        {openActionBar && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{\r\n              duration: transitionTimes?.fadeIn ? transitionTimes.fadeIn / 1000 : defaultFadeIn,\r\n              exit: { duration: transitionTimes?.fadeOut ? transitionTimes.fadeOut / 1000 : defaultFadeOut }\r\n            }}\r\n          >\r\n            <div className='message-action-bar'>\r\n              <MessageFormattedString message={actionBar} />\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Title\r\n","import { useEffect, useMemo, useState } from 'react'\r\nimport mojangson from 'mojangson'\r\nimport nbt from 'prismarine-nbt'\r\nimport type { ClientOnMap } from '../generatedServerPackets'\r\nimport Title from './Title'\r\nimport type { AnimationTimes } from './Title'\r\n\r\n\r\nconst defaultText: Record<string, any> = { 'text': '' }\r\nconst defaultTimings: AnimationTimes = { fadeIn: 500, stay: 3500, fadeOut: 1000 }\r\n\r\nconst ticksToMs = (ticks: AnimationTimes) => {\r\n  ticks.fadeIn *= 50\r\n  ticks.stay *= 50\r\n  ticks.fadeOut *= 50\r\n  return ticks\r\n}\r\n\r\nconst getComponent = (input: string | any) => {\r\n  if (typeof input === 'string') {\r\n    // raw json is sent\r\n    return mojangson.simplify(mojangson.parse(input))\r\n  } else if (input.type === 'string') {\r\n    // this is used for simple chat components without any special properties\r\n    return { 'text': input.value }\r\n  } else if (input.type === 'compound') {\r\n    // this is used for complex chat components with special properties\r\n    return nbt.simplify(input)\r\n  }\r\n  return input\r\n}\r\n\r\nexport default () => {\r\n  const [title, setTitle] = useState<string | Record<string, any>>(defaultText)\r\n  const [subtitle, setSubtitle] = useState<string | Record<string, any>>(defaultText)\r\n  const [actionBar, setActionBar] = useState<string | Record<string, any>>(defaultText)\r\n  const [animTimes, setAnimTimes] = useState<AnimationTimes>(defaultTimings)\r\n  const [openTitle, setOpenTitle] = useState(false)\r\n  const [openActionBar, setOpenActionBar] = useState(false)\r\n\r\n  useMemo(() => {\r\n    // todo move to mineflayer\r\n    bot._client.on('set_title_text', (packet) => {\r\n      setTitle(getComponent(packet.text))\r\n      setOpenTitle(true)\r\n    })\r\n    bot._client.on('set_title_subtitle', (packet) => {\r\n      setSubtitle(getComponent(packet.text))\r\n    })\r\n    bot._client.on('action_bar', (packet) => {\r\n      setActionBar(getComponent(packet.text))\r\n      setOpenActionBar(true)\r\n    })\r\n    bot._client.on('set_title_time', (packet) => {\r\n      setAnimTimes(ticksToMs(packet))\r\n    })\r\n    bot._client.on('clear_titles', (mes) => {\r\n      setOpenTitle(false)\r\n      setOpenActionBar(false)\r\n      if (mes.reset) {\r\n        setTitle(defaultText)\r\n        setSubtitle(defaultText)\r\n        setActionBar(defaultText)\r\n        setAnimTimes(defaultTimings)\r\n      }\r\n    })\r\n\r\n\r\n    bot.on('actionBar', (packet) => {\r\n      setAnimTimes({ fadeIn: 0, stay: 2000, fadeOut: 1000 })\r\n      setActionBar(packet)\r\n      setOpenActionBar(true)\r\n    })\r\n\r\n    // before 1.17\r\n    bot._client.on('title', (packet: ClientOnMap['title'] | string) => {\r\n      let mes: ClientOnMap['title']\r\n      if (typeof packet === 'string') {\r\n        mes = JSON.parse(packet)\r\n      } else {\r\n        mes = packet\r\n      }\r\n      switch (mes.action) {\r\n        case 0:\r\n          setTitle(JSON.parse(mes.text))\r\n          setOpenTitle(true)\r\n          break\r\n        case 1:\r\n          setSubtitle(JSON.parse(mes.text))\r\n          break\r\n        case 2:\r\n          setActionBar(JSON.parse(mes.text))\r\n          setOpenActionBar(true)\r\n          break\r\n        case 3:\r\n          setAnimTimes(ticksToMs({ fadeIn: mes.fadeIn, stay: mes.stay, fadeOut: mes.fadeOut }))\r\n          break\r\n        case 4:\r\n          setOpenTitle(false)\r\n          setOpenActionBar(false)\r\n          break\r\n        case 5:\r\n          setOpenTitle(false)\r\n          setOpenActionBar(false)\r\n          setTitle(defaultText)\r\n          setSubtitle(defaultText)\r\n          setActionBar(defaultText)\r\n          setAnimTimes(defaultTimings)\r\n          break\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const id = setTimeout(() => {\r\n      setOpenTitle(false)\r\n    }, animTimes.stay) // only initial stay time is used for title\r\n\r\n    return () => {\r\n      clearTimeout(id)\r\n    }\r\n  }, [title, subtitle])\r\n\r\n  useEffect(() => {\r\n    let id: any = null\r\n    if (!openTitle) {\r\n      id = setTimeout(() => {\r\n        setSubtitle(defaultText)\r\n      }, animTimes.fadeOut)\r\n    }\r\n\r\n    return () => {\r\n      if (id) {\r\n        clearTimeout(id)\r\n      }\r\n    }\r\n  }, [openTitle])\r\n\r\n  useEffect(() => {\r\n    const id = setTimeout(() => {\r\n      setOpenActionBar(false)\r\n    }, animTimes.stay)\r\n\r\n    return () => {\r\n      clearTimeout(id)\r\n    }\r\n  }, [actionBar])\r\n\r\n  return <Title\r\n    title={title}\r\n    subtitle={subtitle}\r\n    actionBar={actionBar}\r\n    transitionTimes={animTimes}\r\n    openTitle={openTitle}\r\n    openActionBar={openActionBar}\r\n  />\r\n}\r\n","import './Scoreboard.css'\r\nimport MessageFormattedString from './MessageFormattedString'\r\nimport { reactKeyForMessage } from './utils'\r\n\r\n\r\nexport type ScoreboardItems = Array<{ name: string, value: number, displayName?: any }>\r\n\r\ntype ScoreboardProps = {\r\n  title: string,\r\n  items: ScoreboardItems,\r\n  open: boolean\r\n  style?: React.CSSProperties\r\n}\r\n\r\nexport default function Scoreboard ({ title, items, open, style }: ScoreboardProps) {\r\n\r\n  if (!open) return null\r\n  return (\r\n    <div className='scoreboard-container' style={style}>\r\n      <div className='scoreboard-title'>\r\n        <MessageFormattedString message={title} />\r\n      </div>\r\n      {\r\n        items.map((item) => {\r\n          const message = item.displayName ?? item.name\r\n          return <div key={reactKeyForMessage(message) + '_' + item.value} className='item-container'>\r\n            <div className='item-name'>\r\n              <MessageFormattedString message={message} />\r\n            </div>\r\n            <div className='item-value'>\r\n              {item.value}\r\n            </div>\r\n          </div>\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import { useMemo, useState } from 'react'\r\nimport Scoreboard from './Scoreboard'\r\nimport type { ScoreboardItems } from './Scoreboard'\r\n\r\n\r\nexport default function ScoreboardProvider () {\r\n  const [title, setTitle] = useState('Scoreboard')\r\n  const [items, setItems] = useState<ScoreboardItems>([])\r\n  const [open, setOpen] = useState(false)\r\n\r\n  useMemo(() => { // useMemo instead of useEffect to register them asap and not after the initial dom render\r\n    const updateSidebarScoreboard = () => {\r\n      addStatPerSec('scoreboard')\r\n      if (bot.scoreboard.sidebar) {\r\n        setTitle(bot.scoreboard.sidebar.title)\r\n        setItems([...bot.scoreboard.sidebar.items])\r\n        setOpen(true)\r\n      } else {\r\n        setOpen(false)\r\n      }\r\n    }\r\n\r\n    bot.on('scoreboardCreated', updateSidebarScoreboard) // not used atm but still good to have\r\n    bot.on('scoreboardTitleChanged', updateSidebarScoreboard)\r\n    bot.on('scoreUpdated', updateSidebarScoreboard)\r\n    bot.on('scoreRemoved', updateSidebarScoreboard)\r\n    bot.on('scoreboardDeleted', updateSidebarScoreboard)\r\n    bot.on('scoreboardPosition', () => {\r\n      void Promise.resolve().then(() => {\r\n        updateSidebarScoreboard()\r\n      }) // mineflayer bug: wait for the next tick to get the correct scoreboard position\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <Scoreboard\r\n      title={title}\r\n      items={items}\r\n      open={open}\r\n    />\r\n  )\r\n}\r\n","import { remark } from 'remark'\r\n\r\nexport default (markdown: string) => {\r\n  const arr = markdown.split('\\n\\n')\r\n  const lines = ['', '', '', ''] as any[]\r\n  for (const [i, ast] of arr.map(md => remark().parse(md)).entries()) {\r\n    lines[i] = transformToMinecraftJSON(ast as Element)\r\n  }\r\n  return lines\r\n}\r\n\r\nfunction transformToMinecraftJSON (element: Element): any {\r\n  switch (element.type) {\r\n    case 'root': {\r\n      if (!element.children) return\r\n      return element.children.map(child => transformToMinecraftJSON(child)).filter(Boolean)\r\n    }\r\n    case 'paragraph': {\r\n      if (!element.children) return\r\n      const transformedChildren = element.children.map(child => transformToMinecraftJSON(child)).filter(Boolean)\r\n      return transformedChildren.flat()\r\n    }\r\n    case 'strong': {\r\n      if (!element.children) return\r\n      return [{ bold: true, text: element.children[0].value }]\r\n    }\r\n    case 'text': {\r\n      return { text: element.value }\r\n    }\r\n    case 'emphasis': {\r\n      if (!element.children) return\r\n      return [{ italic: true, text: element.children[0].value }]\r\n    }\r\n    default:\r\n      // todo leave untouched eg links\r\n      return element.value\r\n  }\r\n}\r\n\r\ninterface Position {\r\n  start: {\r\n    line: number;\r\n    column: number;\r\n    offset: number;\r\n  };\r\n  end: {\r\n    line: number;\r\n    column: number;\r\n    offset: number;\r\n  };\r\n}\r\n\r\ninterface Element {\r\n  type: string;\r\n  children?: Element[];\r\n  value?: string;\r\n  position: Position;\r\n}\r\n","import { useEffect, useRef } from 'react'\r\nimport { focusable } from 'tabbable'\r\nimport markdownToFormattedText from '../markdownToFormattedText'\r\nimport type { ProseMirrorView } from './prosemirror-markdown'\r\nimport Button from './Button'\r\nimport 'prosemirror-view/style/prosemirror.css'\r\nimport 'prosemirror-menu/style/menu.css'\r\nimport './SignEditor.css'\r\n\r\n\r\nconst imageSource = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAMCAYAAAB4MH11AAABbElEQVR4AY3BQY6cMBBA0Q+yQZZVi+ndcJVcKGfMgegdvShKVtuokzGSWwwiUd7rfv388Vst0UgMXCobmgsSA5VaQmKgUks0EgNHji8SA9W8GJCQwVNpLhzJ4KFs4B1HEgPVvBiQkMFTaS44tYTEQDXdIkfiHbuyobmguaDPFzIWGrWExEA13SJH4h1uzS/WbPyvroM1v6jWbFRrNv7GfX5EdmXjzTvUEjJ4zjQXjiQGdmXjzTvUEjJ4HF/UEt/kQqW5UEkMzIshY08jg6dRS3yTC5XmgpsXY7pFztQSEgPNJCNv3lGpJVSfTLfImVpCYsB1HdwfxpU1G9eeNF0H94dxZc2G+/yI7MoG3vEv82LI2NNIDLyVDbzjzFE2mnkxZOy5IoNnkpFGc2FXNpp5MWTsOXJ4h1qikrGnkhjYlY1m1icy9lQSA+TCzjvUEpWMPZXEwK5suPvDOFuzcdZ1sOYX1ZqNas3GlTUbzR+jQbEAcs8ZQAAAAABJRU5ErkJggg=='\r\n\r\ntype Props = {\r\n  handleInput: (target: HTMLInputElement) => void,\r\n  ProseMirrorView: typeof ProseMirrorView,\r\n  handleClick?: (view: ResultType) => void\r\n}\r\n\r\nexport type ResultType = {\r\n  plainText: string[]\r\n  dataText?: string[]\r\n}\r\n\r\nexport default ({ handleInput, ProseMirrorView, handleClick }: Props) => {\r\n  const isWysiwyg = !!ProseMirrorView\r\n  const prosemirrorContainer = useRef(null)\r\n  const editorView = useRef<ProseMirrorView | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (isWysiwyg) {\r\n      editorView.current = new ProseMirrorView(prosemirrorContainer.current, '')\r\n    }\r\n  }, [isWysiwyg])\r\n\r\n  return <div\r\n    className='signs-editor-container'\r\n    onKeyDown={(e) => {\r\n      // arrow down/up, Enter to navigate between lines\r\n      if (isWysiwyg) return // todo\r\n      let { code } = e\r\n      if ((e.target as HTMLElement).matches('input') && e.key === 'Enter') code = 'ArrowDown'\r\n      if (code === 'ArrowDown' || code === 'ArrowUp') {\r\n        e.preventDefault()\r\n        const dir = code === 'ArrowDown' ? 1 : -1\r\n        const elements = focusable(e.currentTarget)\r\n        const focusedElemIndex = elements.indexOf(document.activeElement as HTMLElement)\r\n        if (focusedElemIndex === -1) return\r\n        const nextElem = elements[focusedElemIndex + dir]\r\n        nextElem?.focus()\r\n      }\r\n    }}\r\n  >\r\n    <div className='signs-editor-inner-container'>\r\n      <img className='signs-editor-bg-image' src={imageSource} alt='' />\r\n      {isWysiwyg ? (\r\n        <p ref={prosemirrorContainer} className='wysiwyg-editor' />\r\n      ) : [1, 2, 3, 4].map((value, index) => {\r\n        return <input\r\n          className='sign-editor'\r\n          key={index}\r\n          data-key={index}\r\n          maxLength={15} // overriden by handleInput\r\n          onChange={(e) => {\r\n            handleInput(e.currentTarget)\r\n          }}\r\n        />\r\n      })}\r\n      <Button\r\n        onClick={async () => {\r\n          if (handleClick) {\r\n            if (isWysiwyg) {\r\n              const formattedText = markdownToFormattedText(editorView.current!.content)\r\n              const plainText = formattedText\r\n                .map((t) => (Array.isArray(t) && Array.isArray(t[0]) ? t.map((t) => t[0]) : t))\r\n                .map((t) => (Array.isArray(t) ? t.map((t) => t.text).join('') : t))\r\n              handleClick({ dataText: formattedText, plainText })\r\n            } else {\r\n              const text = [] as string[]\r\n              for (const input of document.getElementsByClassName('sign-editor')) {\r\n                text.push((input as HTMLInputElement).value)\r\n              }\r\n              handleClick({ plainText: text })\r\n            }\r\n          }\r\n        }} className='sign-editor-button' label=\"Done\"\r\n      />\r\n    </div>\r\n  </div>\r\n}\r\n","import { useMemo, useEffect, useState, useRef } from 'react'\r\nimport { showModal, hideModal } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport SignEditor, { ResultType } from './SignEditor'\r\n\r\n\r\nconst isWysiwyg = async () => {\r\n  const items = await bot.tabComplete('/data ', true, true)\r\n  const commands = new Set<string>(['merge'])\r\n  for (const item of items) {\r\n    if (commands.has((item.match ?? item) as unknown as string)) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport default () => {\r\n  const [location, setLocation] = useState<{ x: number, y: number, z: number } | null>(null)\r\n  const [isFrontText, setIsFrontText] = useState(true)\r\n  const text = useRef<string[]>(['', '', '', ''])\r\n  const [enableWysiwyg, setEnableWysiwyg] = useState(false)\r\n  const isModalActive = useIsModalActive('signs-editor-screen')\r\n  const [proseMirrorView, setProseMirrorView] = useState(null as any)\r\n\r\n  const handleClick = (result: ResultType) => {\r\n    hideModal({ reactType: 'signs-editor-screen' })\r\n    bot._client.write('update_sign', {\r\n      location,\r\n      isFrontText,\r\n      text1: result.plainText[0],\r\n      text2: result.plainText[1],\r\n      text3: result.plainText[2],\r\n      text4: result.plainText[3]\r\n    })\r\n\r\n    if (result.dataText) {\r\n      if (!location) return\r\n      const command = `/data merge block ${location.x} ${location.y} ${location.z} {Text1:'` + JSON.stringify(result.dataText[0]) + '\\',Text2: \\'' + JSON.stringify(result.dataText[1]) + '\\',Text3:\\'' + JSON.stringify(result.dataText[2]) + '\\',Text4:\\'' + JSON.stringify(result.dataText[3]) + '\\'}' // mojangson\r\n      bot.chat(command)\r\n    }\r\n  }\r\n\r\n  const handleInput = (target: HTMLInputElement) => {\r\n    const smallSymbols = /[()[\\]{} ]/\r\n    const largeSymbols = /[;|',.]/\r\n    let addLength = 0\r\n    for (const letter of target.value) {\r\n      if (smallSymbols.test(letter)) {\r\n        addLength += 1 - 1 / 1.46\r\n      } else if (largeSymbols.test(letter)) {\r\n        addLength += 1 - 1 / 3\r\n      }\r\n    }\r\n    text.current[Number(target.dataset.key)] = target.value\r\n    target.setAttribute('maxlength', `${15 + Math.ceil(addLength)}`)\r\n  }\r\n\r\n  useMemo(() => {\r\n    bot._client.on('open_sign_entity', (packet) => {\r\n      if (!options.autoSignEditor) return\r\n      setIsFrontText((packet as any).isFrontText ?? true)\r\n      setLocation(prev => packet.location)\r\n      showModal({ reactType: 'signs-editor-screen' })\r\n      if (options.wysiwygSignEditor === 'auto') {\r\n        void isWysiwyg().then((value) => {\r\n          setEnableWysiwyg(value)\r\n        })\r\n      } else if (options.wysiwygSignEditor === 'always') {\r\n        setEnableWysiwyg(true)\r\n      } else {\r\n        setEnableWysiwyg(false)\r\n      }\r\n    })\r\n\r\n    if (!process.env.SINGLE_FILE_BUILD) {\r\n      void import('./prosemirror-markdown').then(({ ProseMirrorView }) => {\r\n        setProseMirrorView(() => ProseMirrorView)\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  if (!isModalActive) return null\r\n  return <SignEditor ProseMirrorView={enableWysiwyg ? proseMirrorView : undefined} handleInput={handleInput} handleClick={handleClick} />\r\n}\r\n","import { useMemo, useEffect, useRef, useState } from 'react'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport './IndicatorEffects.css'\r\n\r\n\r\n\r\nfunction formatTime (seconds: number): string {\r\n  if (seconds < 0) return ''\r\n  const minutes = Math.floor(seconds / 60)\r\n  const remainingSeconds = Math.floor(seconds % 60)\r\n  const formattedMinutes = String(minutes).padStart(2, '0')\r\n  const formattedSeconds = String(remainingSeconds).padStart(2, '0')\r\n  return `${formattedMinutes}:${formattedSeconds}`\r\n}\r\n\r\nexport type EffectType = {\r\n  id: number,\r\n  image: string,\r\n  level: number,\r\n  initialTime: number,\r\n  duration: number,\r\n  name: string,\r\n}\r\n\r\nconst EffectBox = ({ image, level, name, initialTime, duration }: Pick<EffectType, 'image' | 'level' | 'initialTime' | 'name' | 'duration'>) => {\r\n  const [currentTime, setCurrentTime] = useState(Date.now())\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrentTime(Date.now())\r\n    }, 100)\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  const timeElapsed = (currentTime - initialTime) / 1000\r\n  const timeRemaining = Math.max(0, duration - timeElapsed)\r\n  const progress = duration > 0 ? Math.max(0, Math.min(1, timeRemaining / duration)) : 0\r\n  const formattedTime = useMemo(() => formatTime(timeRemaining), [timeRemaining])\r\n\r\n  // Convert level to Roman numerals\r\n  const toRomanNumeral = (num: number): string => {\r\n    if (num <= 0) return ''\r\n    const romanNumerals = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X']\r\n    return romanNumerals[num - 1] || `${num}`\r\n  }\r\n\r\n  const levelText = level > 0 && level < 256 ? ` ${toRomanNumeral(level + 1)}` : ''\r\n\r\n  return (\r\n    <div className='effect-box'>\r\n      <div className='effect-box__progress-bg' style={{ width: `${progress * 100}%` }} />\r\n      <img className='effect-box__image' src={image} alt='' />\r\n      <div className='effect-box__content'>\r\n        <div className='effect-box__title'>{name}{levelText}</div>\r\n        {formattedTime && (\r\n          <div className='effect-box__time'>{formattedTime}</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const defaultIndicatorsState = {\r\n  chunksLoading: false,\r\n  readingFiles: false,\r\n  readonlyFiles: false,\r\n  writingFiles: false, // saving\r\n  appHasErrors: false,\r\n  connectionIssues: 0,\r\n  preventSleep: false,\r\n}\r\n\r\nconst indicatorIcons: Record<keyof typeof defaultIndicatorsState, string> = {\r\n  chunksLoading: 'add-grid',\r\n  readingFiles: 'arrow-bar-down',\r\n  writingFiles: 'arrow-bar-up',\r\n  appHasErrors: 'alert',\r\n  readonlyFiles: 'file-off',\r\n  connectionIssues: pixelartIcons['cellular-signal-off'],\r\n  preventSleep: pixelartIcons.moon,\r\n}\r\n\r\nconst colorOverrides = {\r\n  connectionIssues: {\r\n    0: false,\r\n    1: 'orange',\r\n    2: 'red'\r\n  }\r\n}\r\n\r\nexport default ({\r\n  indicators,\r\n  effects,\r\n  displayIndicators,\r\n  displayEffects\r\n}: {\r\n  indicators: typeof defaultIndicatorsState,\r\n  effects: readonly EffectType[]\r\n  displayIndicators: boolean\r\n  displayEffects: boolean\r\n}) => {\r\n  const indicatorsMapped = Object.entries(defaultIndicatorsState).map(([key]) => {\r\n    const state = indicators[key]\r\n    return {\r\n      icon: indicatorIcons[key],\r\n      // preserve order\r\n      state,\r\n      key\r\n    }\r\n  })\r\n  return <div className='indicators-container-outer'>\r\n    <div className='indicators-container'>\r\n      {\r\n        displayIndicators && indicatorsMapped.map((indicator) => <div\r\n          key={indicator.icon}\r\n          style={{\r\n            opacity: indicator.state ? 1 : 0,\r\n            transition: 'opacity color 0.1s',\r\n            color: colorOverrides[indicator.key]?.[indicator.state]\r\n          }}\r\n        >\r\n          <PixelartIcon iconName={indicator.icon} />\r\n        </div>)\r\n      }\r\n    </div>\r\n    {displayEffects && <EffectsInner effects={effects} />}\r\n  </div>\r\n}\r\n\r\nconst EffectsInner = ({ effects }: { effects: readonly EffectType[] }) => {\r\n  return <div className='effects-container'>\r\n    {effects.map((effect) => (\r\n      <EffectBox\r\n        key={`effectBox-${effect.id}`}\r\n        {...effect}\r\n      />\r\n    ))}\r\n  </div>\r\n}\r\n","import absorption from 'mc-assets/dist/other-textures/latest/mob_effect/absorption.png'\r\nimport glowing from 'mc-assets/dist/other-textures/latest/mob_effect/glowing.png'\r\nimport instant_health from 'mc-assets/dist/other-textures/latest/mob_effect/instant_health.png'\r\nimport nausea from 'mc-assets/dist/other-textures/latest/mob_effect/nausea.png'\r\nimport slow_falling from 'mc-assets/dist/other-textures/latest/mob_effect/slow_falling.png'\r\nimport weakness from 'mc-assets/dist/other-textures/latest/mob_effect/weakness.png'\r\nimport bad_omen from 'mc-assets/dist/other-textures/latest/mob_effect/bad_omen.png'\r\nimport haste from 'mc-assets/dist/other-textures/latest/mob_effect/haste.png'\r\nimport invisibility from 'mc-assets/dist/other-textures/latest/mob_effect/invisibility.png'\r\nimport night_vision from 'mc-assets/dist/other-textures/latest/mob_effect/night_vision.png'\r\nimport slowness from 'mc-assets/dist/other-textures/latest/mob_effect/slowness.png'\r\nimport wither from 'mc-assets/dist/other-textures/latest/mob_effect/wither.png'\r\nimport blindness from 'mc-assets/dist/other-textures/latest/mob_effect/blindness.png'\r\nimport health_boost from 'mc-assets/dist/other-textures/latest/mob_effect/health_boost.png'\r\nimport jump_boost from 'mc-assets/dist/other-textures/latest/mob_effect/jump_boost.png'\r\nimport poison from 'mc-assets/dist/other-textures/latest/mob_effect/poison.png'\r\nimport speed from 'mc-assets/dist/other-textures/latest/mob_effect/speed.png'\r\nimport conduit_power from 'mc-assets/dist/other-textures/latest/mob_effect/conduit_power.png'\r\nimport hero_of_the_village from 'mc-assets/dist/other-textures/latest/mob_effect/hero_of_the_village.png'\r\nimport levitation from 'mc-assets/dist/other-textures/latest/mob_effect/levitation.png'\r\nimport regeneration from 'mc-assets/dist/other-textures/latest/mob_effect/regeneration.png'\r\nimport strength from 'mc-assets/dist/other-textures/latest/mob_effect/strength.png'\r\nimport dolphins_grace from 'mc-assets/dist/other-textures/latest/mob_effect/dolphins_grace.png'\r\nimport hunger from 'mc-assets/dist/other-textures/latest/mob_effect/hunger.png'\r\nimport luck from 'mc-assets/dist/other-textures/latest/mob_effect/luck.png'\r\nimport resistance from 'mc-assets/dist/other-textures/latest/mob_effect/resistance.png'\r\nimport unluck from 'mc-assets/dist/other-textures/latest/mob_effect/unluck.png'\r\nimport fire_resistance from 'mc-assets/dist/other-textures/latest/mob_effect/fire_resistance.png'\r\nimport instant_damage from 'mc-assets/dist/other-textures/latest/mob_effect/instant_damage.png'\r\nimport mining_fatigue from 'mc-assets/dist/other-textures/latest/mob_effect/mining_fatigue.png'\r\nimport saturation from 'mc-assets/dist/other-textures/latest/mob_effect/saturation.png'\r\nimport water_breathing from 'mc-assets/dist/other-textures/latest/mob_effect/water_breathing.png'\r\nimport darkness from 'mc-assets/dist/other-textures/latest/mob_effect/darkness.png'\r\n\r\ninterface Images {\r\n  [key: string]: string;\r\n}\r\n\r\n// Export an object containing image URLs\r\nexport const images: Images = {\r\n  absorption,\r\n  glowing,\r\n  instant_health,\r\n  nausea,\r\n  slow_falling,\r\n  weakness,\r\n  bad_omen,\r\n  haste,\r\n  invisibility,\r\n  night_vision,\r\n  slowness,\r\n  wither,\r\n  blindness,\r\n  health_boost,\r\n  jump_boost,\r\n  poison,\r\n  speed,\r\n  conduit_power,\r\n  hero_of_the_village,\r\n  levitation,\r\n  regeneration,\r\n  strength,\r\n  dolphins_grace,\r\n  hunger,\r\n  luck,\r\n  resistance,\r\n  unluck,\r\n  bad_luck: unluck,\r\n  good_luck: luck,\r\n  fire_resistance,\r\n  instant_damage,\r\n  mining_fatigue,\r\n  saturation,\r\n  water_breathing,\r\n  darkness\r\n}\r\n","import { proxy, subscribe, useSnapshot } from 'valtio'\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { Effect } from 'mineflayer'\r\nimport { inGameError } from '../utils'\r\nimport { fsState } from '../loadSave'\r\nimport { gameAdditionalState, miscUiState } from '../globalState'\r\nimport IndicatorEffects, { EffectType, defaultIndicatorsState } from './IndicatorEffects'\r\nimport { images } from './effectsImages'\r\n\r\nexport const state = proxy({\r\n  indicators: {\r\n  },\r\n  effects: [] as EffectType[]\r\n})\r\n\r\nexport const addEffect = (newEffect: Effect) => {\r\n  const effectData = loadedData.effectsArray.find(e => e.id === newEffect.id)\r\n  const name = effectData?.name ?? `unknown: ${newEffect.id}`\r\n  const nameKebab = name.replaceAll(/[A-Z]/g, (letter) => `_${letter.toLowerCase()}`).slice(1)\r\n  const image = images[nameKebab] ?? null\r\n  if (!image) {\r\n    inGameError(`received unknown effect id ${newEffect.id}`)\r\n    return\r\n  }\r\n\r\n  const effectIndex = getEffectIndex({ id: newEffect.id })\r\n  if (typeof effectIndex === 'number') {\r\n    state.effects[effectIndex].initialTime = Date.now()\r\n    state.effects[effectIndex].level = newEffect.amplifier\r\n    state.effects[effectIndex].duration = newEffect.duration / 20 // convert ticks to seconds\r\n  } else {\r\n    const effect: EffectType = {\r\n      id: newEffect.id,\r\n      name,\r\n      image,\r\n      level: newEffect.amplifier,\r\n      initialTime: Date.now(),\r\n      duration: newEffect.duration / 20, // convert ticks to seconds\r\n    }\r\n    state.effects.push(effect)\r\n  }\r\n}\r\n\r\nconst removeEffect = (id: number) => {\r\n  for (const [index, effect] of (state.effects).entries()) {\r\n    if (effect.id === id) {\r\n      state.effects.splice(index, 1)\r\n    }\r\n  }\r\n}\r\n\r\nconst getEffectIndex = (newEffect: Pick<EffectType, 'id'>) => {\r\n  for (const [index, effect] of (state.effects).entries()) {\r\n    if (effect.id === newEffect.id) {\r\n      return index\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nexport default ({ displayEffects = true, displayIndicators = true }: { displayEffects?: boolean, displayIndicators?: boolean }) => {\r\n  const [dummyState, setDummyState] = useState(false)\r\n  const stateIndicators = useSnapshot(state.indicators)\r\n  const chunksLoading = !useSnapshot(appViewer.rendererState).world.allChunksLoaded\r\n  const { mesherWork } = useSnapshot(appViewer.rendererState).world\r\n\r\n  const { hasErrors } = useSnapshot(miscUiState)\r\n  const { isReadonly, openReadOperations, openWriteOperations } = useSnapshot(fsState)\r\n  const { noConnection, poorConnection } = useSnapshot(gameAdditionalState)\r\n  const allIndicators: typeof defaultIndicatorsState = {\r\n    readonlyFiles: isReadonly,\r\n    writingFiles: openWriteOperations > 0,\r\n    readingFiles: openReadOperations > 0,\r\n    appHasErrors: hasErrors,\r\n    connectionIssues: poorConnection ? 1 : noConnection ? 2 : 0,\r\n    chunksLoading,\r\n    preventSleep: !!bot?.wakeLock,\r\n    // mesherWork,\r\n    ...stateIndicators,\r\n  }\r\n\r\n  const effects = useSnapshot(state.effects)\r\n\r\n  useEffect(() => {\r\n    // update bot related states\r\n    const interval = setInterval(() => {\r\n      setDummyState(s => !s)\r\n    }, 1000)\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  useMemo(() => {\r\n    const effectsImages = Object.fromEntries(loadedData.effectsArray.map((effect) => {\r\n      const nameKebab = effect.name.replaceAll(/[A-Z]/g, (letter) => `_${letter.toLowerCase()}`).slice(1)\r\n      return [effect.id, images[nameKebab]]\r\n    }))\r\n    const gotEffect = (entity: import('prismarine-entity').Entity, effect: Effect) => {\r\n      if (entity.id !== bot.entity.id) return\r\n      addEffect(effect)\r\n    }\r\n    bot.on('entityEffect', gotEffect)\r\n\r\n    // gotEffect(bot.entity, {\r\n    //   id: 1,\r\n    //   amplifier: 1,\r\n    //   duration: 100,\r\n    // })\r\n\r\n    for (const effect of Object.values(bot.entity.effects ?? {})) {\r\n      gotEffect(bot.entity, effect)\r\n    }\r\n\r\n    bot.on('entityEffectEnd', (entity, effect) => {\r\n      if (entity.id !== bot.entity.id) return\r\n      removeEffect(effect.id)\r\n    })\r\n  }, [])\r\n\r\n  return <IndicatorEffects\r\n    indicators={allIndicators}\r\n    effects={effects}\r\n    displayIndicators={displayIndicators}\r\n    displayEffects={displayEffects}\r\n  />\r\n}\r\n","export const INVISIBLE_BLOCKS = new Set(['air', 'void_air', 'cave_air', 'barrier', 'light', 'moving_piston'])\r\n","import { Vec3 } from 'vec3'\r\nimport { useRef, useEffect, useState, CSSProperties, Dispatch, SetStateAction } from 'react'\r\nimport { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\r\nimport { TransformWrapper, TransformComponent, ReactZoomPanPinchRef } from 'react-zoom-pan-pinch'\r\nimport { DrawerAdapter } from './MinimapDrawer'\r\nimport Button from './Button'\r\nimport Input from './Input'\r\nimport './Fullmap.css'\r\n\r\n\r\ntype FullmapProps = {\r\n  adapter: DrawerAdapter,\r\n  toggleFullMap?: () => void,\r\n}\r\n\r\nexport default ({ adapter, toggleFullMap }: FullmapProps) => {\r\n  const [grid, setGrid] = useState(() => new Set<string>())\r\n  const zoomRef = useRef<ReactZoomPanPinchRef>(null)\r\n  const [redraw, setRedraw] = useState<Set<string> | null>(null)\r\n  const [lastWarpPos, setLastWarpPos] = useState({ x: 0, y: 0, z: 0 })\r\n  const stateRef = useRef({ scale: 1, positionX: 0, positionY: 0 })\r\n  const cells = useRef({ columns: 0, rows: 0 })\r\n  const [isWarpInfoOpened, setIsWarpInfoOpened] = useState(false)\r\n  const [initWarp, setInitWarp] = useState<WorldWarp | undefined>(undefined)\r\n  const [warpPreview, setWarpPreview] = useState<{ name: string, x: number, z: number, clientX: number, clientY: number } | undefined>(undefined)\r\n\r\n  const updateGrid = () => {\r\n    const wrapperRect = zoomRef.current?.instance.wrapperComponent?.getBoundingClientRect()\r\n    if (!wrapperRect) return\r\n    const cellSize = 64\r\n    const columns = Math.ceil(wrapperRect.width / (cellSize * stateRef.current.scale))\r\n    const rows = Math.ceil(wrapperRect.height / (cellSize * stateRef.current.scale))\r\n    cells.current.rows = rows\r\n    cells.current.columns = columns\r\n    const leftBorder = - Math.floor(stateRef.current.positionX / (stateRef.current.scale * cellSize)) * cellSize\r\n    const topBorder = - Math.floor(stateRef.current.positionY / (stateRef.current.scale * cellSize)) * cellSize\r\n    const newGrid = new Set<string>()\r\n    for (let row = -1; row < rows; row += 1) {\r\n      for (let col = -1; col < columns; col += 1) {\r\n        const x = leftBorder + col * cellSize\r\n        const y = topBorder + row * cellSize\r\n        newGrid.add(`${x},${y}`)\r\n      }\r\n    }\r\n    setGrid(newGrid)\r\n  }\r\n\r\n  useEffect(() => {\r\n    adapter.full = true\r\n    console.log('[fullmap] set full property to true')\r\n    updateGrid()\r\n  }, [])\r\n\r\n  return <div\r\n    style={{\r\n      position: 'fixed',\r\n      isolation: 'isolate',\r\n      inset: '0px',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      backgroundColor: 'rgba(0, 0, 0, 0.4)',\r\n      zIndex: 100\r\n    }}\r\n  >\r\n    {window.screen.width > 500 ? <div\r\n      style={{\r\n        position: 'absolute',\r\n        width: '100%',\r\n        height: '100%',\r\n        zIndex: '-1'\r\n      }}\r\n      onClick={toggleFullMap}\r\n    > </div>\r\n      : <Button\r\n        icon=\"close-box\"\r\n        onClick={toggleFullMap}\r\n        style={{\r\n          position: 'absolute',\r\n          top: '20px',\r\n          right: '20px',\r\n          zIndex: 1\r\n        }}\r\n      />}\r\n    <TransformWrapper\r\n      limitToBounds={false}\r\n      ref={zoomRef}\r\n      minScale={0.1}\r\n      doubleClick={{\r\n        disabled: false\r\n      }}\r\n      panning={{\r\n        allowLeftClickPan: true,\r\n        allowRightClickPan: false\r\n      }}\r\n      onTransformed={(ref, state) => {\r\n        stateRef.current = { ...state }\r\n      }}\r\n      onPanningStop={() => {\r\n        updateGrid()\r\n      }}\r\n      onZoomStop={() => {\r\n        updateGrid()\r\n      }}\r\n    >\r\n      <TransformComponent\r\n        wrapperClass=\"map\"\r\n        wrapperStyle={{\r\n          willChange: 'transform',\r\n        }}\r\n      >\r\n        {[...grid].map((cellCoords) => {\r\n          const [x, y] = cellCoords.split(',').map(Number)\r\n          const playerChunkLeft = Math.floor(adapter.playerPosition.x / 16) * 16\r\n          const playerChunkTop = Math.floor(adapter.playerPosition.z / 16) * 16\r\n          const wrapperRect = zoomRef.current?.instance.wrapperComponent?.getBoundingClientRect()\r\n          const offsetX = Math.floor((wrapperRect?.width ?? 0) / (8 * 16)) * 16\r\n          const offsetY = Math.floor((wrapperRect?.height ?? 0) / (8 * 16)) * 16\r\n\r\n          return <MapChunk\r\n            key={'mapcell:' + cellCoords}\r\n            x={x}\r\n            y={y}\r\n            scale={stateRef.current.scale}\r\n            adapter={adapter}\r\n            worldX={playerChunkLeft + x / 4 - offsetX}\r\n            worldZ={playerChunkTop + y / 4 - offsetY}\r\n            setIsWarpInfoOpened={setIsWarpInfoOpened}\r\n            setLastWarpPos={setLastWarpPos}\r\n            redraw={redraw}\r\n            setInitWarp={setInitWarp}\r\n            setWarpPreview={setWarpPreview}\r\n          />\r\n        })}\r\n      </TransformComponent>\r\n    </TransformWrapper>\r\n    {warpPreview && <div\r\n      style={{\r\n        position: 'absolute',\r\n        top: warpPreview.clientY - 70,\r\n        left: warpPreview.clientX - 70,\r\n        textAlign: 'center',\r\n        fontSize: '1.5em',\r\n        textShadow: '0.1em 0 black, 0 0.1em black, -0.1em 0 black, 0 -0.1em black, -0.1em -0.1em black, -0.1em 0.1em black, 0.1em -0.1em black, 0.1em 0.1em black'\r\n      } as any}\r\n    >\r\n      {warpPreview.name}\r\n      <div>\r\n        {warpPreview.x} {warpPreview.z}\r\n      </div>\r\n    </div>}\r\n    {\r\n      isWarpInfoOpened && <WarpInfo\r\n        adapter={adapter}\r\n        warpPos={lastWarpPos}\r\n        setIsWarpInfoOpened={setIsWarpInfoOpened}\r\n        setRedraw={setRedraw}\r\n        initWarp={initWarp}\r\n        setInitWarp={setInitWarp}\r\n        toggleFullMap={toggleFullMap}\r\n      />\r\n    }\r\n  </div>\r\n}\r\n\r\n\r\nconst MapChunk = (\r\n  { x, y, scale, adapter, worldX, worldZ, setIsWarpInfoOpened, setLastWarpPos, redraw, setInitWarp, setWarpPreview }:\r\n  {\r\n    x: number,\r\n    y: number,\r\n    scale: number,\r\n    adapter: DrawerAdapter,\r\n    worldX: number,\r\n    worldZ: number,\r\n    setIsWarpInfoOpened: (x: boolean) => void,\r\n    setLastWarpPos: (obj: { x: number, y: number, z: number }) => void,\r\n    redraw?: Set<string> | null\r\n    setInitWarp?: (warp: WorldWarp | undefined) => void\r\n    setWarpPreview?: (warpInfo) => void\r\n  }\r\n) => {\r\n  const containerRef = useRef(null)\r\n  const touchTimer = useRef<ReturnType<typeof setTimeout> | null>(null)\r\n  const canvasRef = useRef<HTMLCanvasElement>(null)\r\n\r\n  const longPress = (e) => {\r\n    touchTimer.current = setTimeout(() => {\r\n      touchTimer.current = null\r\n      handleClick(e)\r\n    }, 500)\r\n  }\r\n\r\n  const cancel = () => {\r\n    if (touchTimer.current) clearTimeout(touchTimer.current)\r\n  }\r\n\r\n  const handleClick = (e: MouseEvent | TouchEvent) => {\r\n    if (!adapter.mapDrawer) return\r\n    console.log('click:', e)\r\n    let clientX: number\r\n    let clientY: number\r\n    if ('buttons' in e && e.button === 2) {\r\n      clientX = e.clientX\r\n      clientY = e.clientY\r\n    } else if ('changedTouches' in e) {\r\n      clientX = (e).changedTouches[0].clientX\r\n      clientY = (e).changedTouches[0].clientY\r\n    } else { return }\r\n    const [x, z] = getXZ(clientX, clientY)\r\n    const mapX = Math.floor(x + worldX)\r\n    const mapZ = Math.floor(z + worldZ)\r\n    const y = adapter.getHighestBlockY(mapX, mapZ)\r\n    adapter.mapDrawer.setWarpPosOnClick(new Vec3(mapX, y, mapZ))\r\n    setLastWarpPos(adapter.mapDrawer.lastWarpPos)\r\n    const { lastWarpPos } = adapter.mapDrawer\r\n    const initWarp = adapter.warps.find(warp => Math.hypot(lastWarpPos.x - warp.x, lastWarpPos.z - warp.z) < 2)\r\n    setInitWarp?.(initWarp)\r\n    setIsWarpInfoOpened(true)\r\n  }\r\n\r\n  const getXZ = (clientX: number, clientY: number) => {\r\n    const rect = canvasRef.current!.getBoundingClientRect()\r\n    const factor = scale * (adapter.mapDrawer.mapPixel ?? 1)\r\n    const x = (clientX - rect.left) / factor\r\n    const y = (clientY - rect.top) / factor\r\n    return [x, y]\r\n  }\r\n\r\n  const handleMouseMove = (e: MouseEvent) => {\r\n    const [x, z] = getXZ(e.clientX, e.clientY)\r\n    const warp = adapter.warps.find(w => Math.hypot(w.x - x - worldX, w.z - z - worldZ) < 2)\r\n    setWarpPreview?.(\r\n      warp ? { name: warp.name, x: warp.x, z: warp.z, clientX: e.clientX, clientY: e.clientY } : undefined\r\n    )\r\n  }\r\n\r\n  const handleRedraw = (key?: string) => {\r\n    if (key !== `${worldX / 16},${worldZ / 16}`) return\r\n    adapter.mapDrawer.canvas = canvasRef.current!\r\n    adapter.mapDrawer.full = true\r\n    console.log('[mapChunk] update', key, `${worldX / 16},${worldZ / 16}`)\r\n    const timeout = setTimeout(() => {\r\n      if (canvasRef.current) void adapter.drawChunkOnCanvas(`${worldX / 16},${worldZ / 16}`, canvasRef.current)\r\n      clearTimeout(timeout)\r\n    }, 100)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (canvasRef.current) void adapter.drawChunkOnCanvas(`${worldX / 16},${worldZ / 16}`, canvasRef.current)\r\n  }, [canvasRef.current])\r\n\r\n  useEffect(() => {\r\n    canvasRef.current?.addEventListener('contextmenu', handleClick)\r\n    canvasRef.current?.addEventListener('touchstart', longPress)\r\n    canvasRef.current?.addEventListener('touchend', cancel)\r\n    canvasRef.current?.addEventListener('touchmove', cancel)\r\n    canvasRef.current?.addEventListener('mousemove', handleMouseMove)\r\n\r\n    return () => {\r\n      canvasRef.current?.removeEventListener('contextmenu', handleClick)\r\n      canvasRef.current?.removeEventListener('touchstart', longPress)\r\n      canvasRef.current?.removeEventListener('touchend', cancel)\r\n      canvasRef.current?.removeEventListener('touchmove', cancel)\r\n      canvasRef.current?.removeEventListener('mousemove', handleMouseMove)\r\n    }\r\n  }, [canvasRef.current])\r\n\r\n  useEffect(() => {\r\n    if (redraw) {\r\n      for (const key of redraw) {\r\n        handleRedraw(key)\r\n      }\r\n    }\r\n  }, [redraw])\r\n\r\n  return <div\r\n    ref={containerRef}\r\n    style={{\r\n      position: 'absolute',\r\n      width: '64px',\r\n      height: '64px',\r\n      top: `${y}px`,\r\n      left: `${x}px`,\r\n    }}\r\n  >\r\n    <canvas\r\n      ref={canvasRef}\r\n      style={{\r\n        width: '100%',\r\n        height: '100%',\r\n        imageRendering: 'pixelated'\r\n      }}\r\n      width={64}\r\n      height={64}\r\n    />\r\n  </div>\r\n}\r\n\r\nconst WarpInfo = (\r\n  { adapter, warpPos, setIsWarpInfoOpened, afterWarpIsSet, initWarp, toggleFullMap, setRedraw }:\r\n  {\r\n    adapter: DrawerAdapter,\r\n    warpPos: { x: number, y: number, z: number },\r\n    setIsWarpInfoOpened: Dispatch<SetStateAction<boolean>>,\r\n    afterWarpIsSet?: () => void\r\n    initWarp?: WorldWarp,\r\n    setInitWarp?: React.Dispatch<React.SetStateAction<WorldWarp | undefined>>,\r\n    toggleFullMap?: () => void,\r\n    setRedraw?: React.Dispatch<React.SetStateAction<Set<string> | null>>\r\n  }\r\n) => {\r\n  const [warp, setWarp] = useState<WorldWarp>(initWarp ?? {\r\n    name: '',\r\n    x: warpPos?.x ?? 100,\r\n    y: warpPos?.y ?? 100,\r\n    z: warpPos?.z ?? 100,\r\n    color: '',\r\n    disabled: false,\r\n    world: adapter.world\r\n  })\r\n\r\n  const posInputStyle: CSSProperties = {\r\n    flexGrow: '1',\r\n  }\r\n  const fieldCont: CSSProperties = {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '5px'\r\n  }\r\n\r\n  const updateChunk = () => {\r\n    const redraw = new Set<string>()\r\n    for (let i = -1; i < 2; i += 1) {\r\n      for (let j = -1; j < 2; j += 1) {\r\n        redraw.add(`${Math.floor(warp.x / 16) + j},${Math.floor(warp.z / 16) + i}`)\r\n      }\r\n    }\r\n    setRedraw?.(redraw)\r\n    console.log('[warpInfo] update', redraw)\r\n  }\r\n\r\n  const tpNow = () => {\r\n    adapter.off('updateChunk', tpNow)\r\n  }\r\n\r\n  const quickTp = () => {\r\n    toggleFullMap?.()\r\n    adapter.quickTp?.(warp.x, warp.z)\r\n  }\r\n\r\n  return <div\r\n    style={{\r\n      position: 'absolute',\r\n      inset: '0px',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      flexDirection: 'column',\r\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n      fontSize: '0.8em',\r\n      transform: 'scale(2)'\r\n    }}\r\n  >\r\n    <form\r\n      style={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '10px',\r\n        width: window.screen.width > 500 ? '100%' : '50%',\r\n        minWidth: '100px',\r\n        maxWidth: '300px',\r\n        padding: '20px',\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n        border: '2px solid black'\r\n      }}\r\n    >\r\n      <h2 style={{ alignSelf: 'center' }}>Point on the map</h2>\r\n      <div style={fieldCont}>\r\n        <div>\r\n          Name:\r\n        </div>\r\n        <Input\r\n          defaultValue={warp.name}\r\n          onChange={(e) => {\r\n            if (!e.target) return\r\n            setWarp(prev => { return { ...prev, name: e.target.value } })\r\n          }}\r\n          autoFocus\r\n        />\r\n      </div>\r\n      <div style={fieldCont}>\r\n        <div>\r\n          X:\r\n        </div>\r\n        <Input\r\n          rootStyles={posInputStyle}\r\n          defaultValue={warp.x ?? 100}\r\n          onChange={(e) => {\r\n            if (!e.target) return\r\n            setWarp(prev => { return { ...prev, x: Number(e.target.value) } })\r\n          }}\r\n        />\r\n        <div>\r\n          Z:\r\n        </div>\r\n        <Input\r\n          rootStyles={posInputStyle}\r\n          defaultValue={warp.z ?? 100}\r\n          onChange={(e) => {\r\n            if (!e.target) return\r\n            setWarp(prev => { return { ...prev, z: Number(e.target.value) } })\r\n          }}\r\n        />\r\n      </div>\r\n      <div style={fieldCont}>\r\n        <div>Color:</div>\r\n        <Input\r\n          type='color'\r\n          defaultValue={warp.color === '' ? '#232323' : warp.color}\r\n          onChange={(e) => {\r\n            if (!e.target) return\r\n            setWarp(prev => { return { ...prev, color: e.target.value } })\r\n          }}\r\n          rootStyles={{ width: '30px', }}\r\n          style={{ left: '0px' }}\r\n        />\r\n      </div>\r\n      <div style={fieldCont} >\r\n        <label htmlFor='warp-disabled'>Disabled:</label>\r\n        <input\r\n          id='warp-disabled'\r\n          type=\"checkbox\"\r\n          checked={warp.disabled ?? false}\r\n          onChange={(e) => {\r\n            if (!e.target) return\r\n            setWarp(prev => { return { ...prev, disabled: e.target.checked } })\r\n          }}\r\n        />\r\n      </div>\r\n      <Button\r\n        style={{ alignSelf: 'center' }}\r\n        onClick={() => {\r\n          quickTp()\r\n        }}\r\n      >Quick TP</Button>\r\n      <div style={fieldCont}>\r\n        <Button\r\n          onClick={() => {\r\n            setIsWarpInfoOpened(false)\r\n          }}\r\n        >Cancel</Button>\r\n        <Button\r\n          onClick={(e) => {\r\n            e.preventDefault()\r\n            adapter.setWarp({ ...warp })\r\n            console.log(adapter.warps)\r\n            setIsWarpInfoOpened(false)\r\n            updateChunk()\r\n            afterWarpIsSet?.()\r\n          }}\r\n          type='submit'\r\n        >Add Warp</Button>\r\n        {initWarp && <Button\r\n          onClick={() => {\r\n            const index = adapter.warps.findIndex(thisWarp => thisWarp.name === warp.name)\r\n            if (index !== -1) {\r\n              adapter.setWarp({ name: warp.name, x: 0, y: 0, z: 0, color: '', disabled: false, world: '' }, true)\r\n              setIsWarpInfoOpened(false)\r\n              updateChunk()\r\n              afterWarpIsSet?.()\r\n            }\r\n          }}\r\n        >Delete</Button>}\r\n      </div>\r\n    </form>\r\n  </div>\r\n}\r\n","import { useRef, useEffect, useState } from 'react'\r\nimport { miscUiState } from '../globalState'\r\nimport { DrawerAdapter } from './MinimapDrawer'\r\nimport Fullmap from './Fullmap'\r\n\r\n\r\nexport type DisplayMode = 'fullmapOnly' | 'minimapOnly'\r\n\r\nexport default (\r\n  { adapter, showMinimap, showFullmap, singleplayer, fullMap, toggleFullMap, displayMode }:\r\n  {\r\n    adapter: DrawerAdapter,\r\n    showMinimap: string,\r\n    showFullmap: string,\r\n    singleplayer: boolean,\r\n    fullMap?: boolean,\r\n    toggleFullMap?: () => void\r\n    displayMode?: DisplayMode\r\n  }\r\n) => {\r\n  const full = useRef(false)\r\n  const canvasTick = useRef(0)\r\n  const canvasRef = useRef<HTMLCanvasElement>(null)\r\n  const [position, setPosition] = useState({ x: 0, y: 0, z: 0 })\r\n  const lastUpdate = useRef(0)\r\n  const THROTTLE_MS = 50 // 20fps\r\n\r\n  const updateMap = () => {\r\n    const now = Date.now()\r\n    if (now - lastUpdate.current < THROTTLE_MS) return\r\n    lastUpdate.current = now\r\n\r\n    setPosition({ x: adapter.playerPosition.x, y: adapter.playerPosition.y, z: adapter.playerPosition.z })\r\n    if (adapter.mapDrawer) {\r\n      if (!full.current) {\r\n        rotateMap()\r\n        adapter.mapDrawer.draw(adapter.playerPosition)\r\n        adapter.mapDrawer.drawPlayerPos()\r\n        adapter.mapDrawer.drawWarps()\r\n      }\r\n      if (canvasTick.current % 300 === 0 && !fullMap) {\r\n        if ('requestIdleCallback' in window) {\r\n          requestIdleCallback(() => {\r\n            adapter.mapDrawer?.clearChunksStore()\r\n          })\r\n        } else {\r\n          adapter.mapDrawer.clearChunksStore()\r\n        }\r\n        canvasTick.current = 0\r\n      }\r\n    }\r\n    canvasTick.current += 1\r\n  }\r\n\r\n  const updateWarps = () => { }\r\n\r\n  const rotateMap = () => {\r\n    if (!adapter.mapDrawer) return\r\n    adapter.mapDrawer.canvas.style.transform = `rotate(${adapter.yaw}rad)`\r\n    adapter.mapDrawer.yaw = adapter.yaw\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (canvasRef.current && adapter.mapDrawer && !miscUiState.displayFullmap) {\r\n      adapter.mapDrawer.canvas = canvasRef.current\r\n      adapter.mapDrawer.full = false\r\n    }\r\n  }, [canvasRef.current, miscUiState.displayFullmap])\r\n\r\n  useEffect(() => {\r\n    adapter.on('updateMap', updateMap)\r\n    adapter.on('updateWaprs', updateWarps)\r\n\r\n    return () => {\r\n      adapter.off('updateMap', updateMap)\r\n      adapter.off('updateWaprs', updateWarps)\r\n    }\r\n  }, [adapter])\r\n\r\n  return fullMap && displayMode !== 'minimapOnly' && (showFullmap === 'singleplayer' && singleplayer || showFullmap === 'always')\r\n    ? <Fullmap\r\n      toggleFullMap={toggleFullMap}\r\n      adapter={adapter}\r\n    />\r\n    : displayMode !== 'fullmapOnly' && (showMinimap === 'singleplayer' && singleplayer || showMinimap === 'always')\r\n      ? <div\r\n        className='minimap'\r\n        style={{\r\n          position: 'absolute',\r\n          right: '0px',\r\n          top: '0px',\r\n          padding: '5px 5px 0px 0px',\r\n          textAlign: 'center',\r\n          zIndex: 7,\r\n        }}\r\n        onClick={() => {\r\n          toggleFullMap?.()\r\n        }}\r\n      >\r\n        <canvas\r\n          style={{\r\n            transition: '0.5s',\r\n            transitionTimingFunction: 'ease-out',\r\n            borderRadius: '1000px'\r\n          }}\r\n          width={80}\r\n          height={80}\r\n          ref={canvasRef}\r\n        />\r\n        <div\r\n          style={{\r\n            fontSize: '0.5em',\r\n            textShadow: '0.1em 0 black, 0 0.1em black, -0.1em 0 black, 0 -0.1em black, -0.1em -0.1em black, -0.1em 0.1em black, 0.1em -0.1em black, 0.1em 0.1em black'\r\n          }}\r\n        >\r\n          {Math.round(position.x)} {Math.round(position.y)} {Math.round(position.z)}\r\n        </div>\r\n      </div> : null\r\n}\r\n","import { Vec3 } from 'vec3'\r\nimport { TypedEventEmitter } from 'contro-max/build/typedEventEmitter'\r\nimport { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\r\nimport { Chunk } from 'prismarine-world/types/world'\r\n\r\nexport type MapUpdates = {\r\n  updateBlockColor: (pos: Vec3) => void\r\n  updatePlayerPosition: () => void\r\n  updateWarps: () => void\r\n}\r\n\r\nexport interface DrawerAdapter extends TypedEventEmitter<MapUpdates> {\r\n  getHighestBlockY: (x: number, z: number, chunk?: Chunk) => number\r\n  clearChunksStore: (x: number, z: number) => void\r\n  chunksStore: Map<string, undefined | null | 'requested' | ChunkInfo >\r\n  playerPosition: Vec3\r\n  warps: WorldWarp[]\r\n  loadingChunksQueue: Set<string>\r\n  mapDrawer: MinimapDrawer\r\n  yaw: number\r\n  full: boolean\r\n  world: string\r\n  setWarp: (warp: WorldWarp, remove?: boolean) => void\r\n  quickTp?: (x: number, z: number) => void\r\n  loadChunk: (key: string) => Promise<void>\r\n  drawChunkOnCanvas: (key: string, canvas: HTMLCanvasElement) => Promise<void>\r\n}\r\n\r\nexport type ChunkInfo = {\r\n  heightmap: Uint8Array,\r\n  colors: string[],\r\n}\r\n\r\nexport class MinimapDrawer {\r\n  canvasWidthCenterX: number\r\n  canvasWidthCenterY: number\r\n  _mapSize: number\r\n  radius: number\r\n  ctx: CanvasRenderingContext2D\r\n  _canvas: HTMLCanvasElement\r\n  chunksInView = new Set<string>()\r\n  lastBotPos: Vec3\r\n  lastWarpPos: Vec3\r\n  mapPixel: number\r\n  yaw: number\r\n  _full = false\r\n\r\n  constructor (\r\n    public loadChunk: undefined | ((key: string) => Promise<void>),\r\n    public warps: WorldWarp[],\r\n    public loadingChunksQueue: undefined | Set<string>,\r\n    public chunksStore: Map<string, undefined | null | 'requested' | ChunkInfo >\r\n  ) {\r\n    this.loadChunk = loadChunk\r\n    this.warps = warps\r\n    this.loadingChunksQueue = loadingChunksQueue\r\n    this.chunksStore = chunksStore\r\n  }\r\n\r\n  setMapPixel () {\r\n    if (this.full) {\r\n      this.radius = Math.floor(Math.min(this.canvas.width, this.canvas.height) / 2)\r\n      this._mapSize = 16\r\n    } else {\r\n      this.radius = Math.floor(Math.min(this.canvas.width, this.canvas.height) / 2.2)\r\n      this._mapSize = this.radius * 2\r\n    }\r\n    this.mapPixel = Math.floor(this.radius * 2 / this.mapSize)\r\n  }\r\n\r\n  get full () {\r\n    return this._full\r\n  }\r\n\r\n  set full (full: boolean) {\r\n    this._full = full\r\n    this.setMapPixel()\r\n  }\r\n\r\n  get canvas () {\r\n    return this._canvas\r\n  }\r\n\r\n  set canvas (canvas: HTMLCanvasElement) {\r\n    this.ctx = canvas.getContext('2d', { willReadFrequently: true })!\r\n    this.ctx.imageSmoothingEnabled = false\r\n    this.canvasWidthCenterX = canvas.width / 2\r\n    this.canvasWidthCenterY = canvas.height / 2\r\n    this._canvas = canvas\r\n    this.setMapPixel()\r\n  }\r\n\r\n  get mapSize () {\r\n    return this._mapSize\r\n  }\r\n\r\n  set mapSize (mapSize: number) {\r\n    this._mapSize = mapSize\r\n    this.mapPixel = Math.floor(this.radius * 2 / this.mapSize)\r\n    this.draw(this.lastBotPos)\r\n  }\r\n\r\n  draw (botPos: Vec3,) {\r\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n\r\n    this.lastBotPos = botPos\r\n    this.updateChunksInView()\r\n    for (const key of this.chunksInView) {\r\n      if (!this.chunksStore.has(key) && !this.loadingChunksQueue?.has(key)) {\r\n        void this.loadChunk?.(key)\r\n      }\r\n      // case when chunk is not present is handled in drawChunk\r\n      this.drawChunk(key)\r\n    }\r\n    if (!this.full) this.drawPartsOfWorld()\r\n  }\r\n\r\n  updateChunksInView (viewX?: number, viewZ?: number) {\r\n    const worldCenterX = viewX ?? this.lastBotPos.x\r\n    const worldCenterZ = viewZ ?? this.lastBotPos.z\r\n\r\n    const radius = this.mapSize / 2\r\n    const leftViewBorder = Math.floor((worldCenterX - radius) / 16) - 1\r\n    const rightViewBorder = Math.ceil((worldCenterX + radius) / 16)\r\n    const topViewBorder = Math.floor((worldCenterZ - radius) / 16) - 1\r\n    const bottomViewBorder = Math.ceil((worldCenterZ + radius) / 16)\r\n\r\n    this.chunksInView.clear()\r\n    for (let i = topViewBorder; i <= bottomViewBorder; i += 1) {\r\n      for (let j = leftViewBorder; j <= rightViewBorder; j += 1) {\r\n        this.chunksInView.add(`${j},${i}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  drawChunk (key: string, chunkInfo?: ChunkInfo | null) {\r\n    const [chunkX, chunkZ] = key.split(',').map(Number)\r\n    const chunkWorldX = chunkX * 16\r\n    const chunkWorldZ = chunkZ * 16\r\n    const chunkCanvasX = Math.floor((chunkWorldX - this.lastBotPos.x) * this.mapPixel + this.canvasWidthCenterX)\r\n    const chunkCanvasY = Math.floor((chunkWorldZ - this.lastBotPos.z) * this.mapPixel + this.canvasWidthCenterY)\r\n    const chunk = chunkInfo ?? this.chunksStore.get(key)\r\n    // if chunk is not ready then draw waiting color (grey) or none (half transparent black)\r\n    if (typeof chunk !== 'object') {\r\n      const chunkSize = this.mapPixel * 16\r\n      this.ctx.fillStyle = chunk === 'requested' ? 'rgb(200, 200, 200)' : 'rgba(0, 0, 0, 0.5)'\r\n      this.ctx.fillRect(chunkCanvasX, chunkCanvasY, chunkSize, chunkSize)\r\n      return\r\n    }\r\n    for (let row = 0; row < 16; row += 1) {\r\n      for (let col = 0; col < 16; col += 1) {\r\n        const index = row * 16 + col\r\n        const color = chunk?.colors[index] ?? 'rgb(255, 0, 0)'\r\n        const pixelX = chunkCanvasX + this.mapPixel * col\r\n        const pixelY = chunkCanvasY + this.mapPixel * row\r\n        this.drawPixel(pixelX, pixelY, color)\r\n      }\r\n    }\r\n  }\r\n\r\n  drawPixel (pixelX: number, pixelY: number, color: string) {\r\n    if (!this.full && Math.hypot(pixelX - this.canvasWidthCenterX, pixelY - this.canvasWidthCenterY) > this.radius) {\r\n      this.ctx.clearRect(pixelX, pixelY, this.mapPixel, this.mapPixel)\r\n      return\r\n    }\r\n    this.ctx.fillStyle = color\r\n    this.ctx.fillRect(\r\n      pixelX,\r\n      pixelY,\r\n      this.mapPixel,\r\n      this.mapPixel\r\n    )\r\n  }\r\n\r\n  clearChunksStore () {\r\n    for (const key of this.chunksStore.keys()) {\r\n      const [x, z] = key.split(',').map(x => Number(x) * 16)\r\n      if (Math.hypot((this.lastBotPos.x - x), (this.lastBotPos.z - z)) > this.radius * 5) {\r\n        this.chunksStore.delete(key)\r\n      }\r\n    }\r\n  }\r\n\r\n  setWarpPosOnClick (mousePos: Vec3) {\r\n    this.lastWarpPos = new Vec3(mousePos.x, mousePos.y, mousePos.z)\r\n  }\r\n\r\n  drawWarps (centerPos?: Vec3) {\r\n    for (const warp of this.warps) {\r\n      if (!this.full) {\r\n        const distance = Math.hypot(\r\n          centerPos?.x ?? this.lastBotPos.x - warp.x,\r\n          centerPos?.z ?? this.lastBotPos.z - warp.z\r\n        )\r\n        if (distance > this.mapSize) continue\r\n      }\r\n      const offset = this.full ? 0 : this.radius * 0.1\r\n      const z = Math.floor(\r\n        (this.mapSize / 2 - (centerPos?.z ?? this.lastBotPos.z) + warp.z) * this.mapPixel\r\n      ) + offset\r\n      const x = Math.floor(\r\n        (this.mapSize / 2 - (centerPos?.x ?? this.lastBotPos.x) + warp.x) * this.mapPixel\r\n      ) + offset\r\n      const dz = z - this.canvasWidthCenterX\r\n      const dx = x - this.canvasWidthCenterY\r\n      const circleDist = Math.hypot(dx, dz)\r\n\r\n      const angle = Math.atan2(dz, dx)\r\n      const circleZ = circleDist > this.mapSize / 2 && !this.full ?\r\n        this.canvasWidthCenterX + this.mapSize / 2 * Math.sin(angle)\r\n        : z\r\n      const circleX = circleDist > this.mapSize / 2 && !this.full ?\r\n        this.canvasWidthCenterY + this.mapSize / 2 * Math.cos(angle)\r\n        : x\r\n      this.ctx.beginPath()\r\n      this.ctx.arc(\r\n        circleX,\r\n        circleZ,\r\n        circleDist > this.mapSize / 2 && !this.full\r\n          ? this.mapPixel * 1.5\r\n          : this.full ? this.mapPixel : this.mapPixel * 2,\r\n        0,\r\n        Math.PI * 2,\r\n        false\r\n      )\r\n      this.ctx.strokeStyle = 'black'\r\n      this.ctx.lineWidth = this.mapPixel\r\n      this.ctx.stroke()\r\n      this.ctx.fillStyle = warp.disabled ? 'rgba(255, 255, 255, 0.4)' : warp.color ?? '#d3d3d3'\r\n      this.ctx.fill()\r\n      this.ctx.closePath()\r\n    }\r\n  }\r\n\r\n  drawPartsOfWorld () {\r\n    this.ctx.fillStyle = 'white'\r\n    this.ctx.shadowOffsetX = 1\r\n    this.ctx.shadowOffsetY = 1\r\n    this.ctx.shadowColor = 'black'\r\n    this.ctx.font = `${this.radius / 4}px serif`\r\n    this.ctx.textAlign = 'center'\r\n    this.ctx.textBaseline = 'middle'\r\n    this.ctx.strokeStyle = 'black'\r\n    this.ctx.lineWidth = 1\r\n\r\n    const angle = - Math.PI / 2\r\n    const angleS = angle + Math.PI\r\n    const angleW = angle + Math.PI * 3 / 2\r\n    const angleE = angle + Math.PI / 2\r\n\r\n    this.ctx.strokeText(\r\n      'N',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angle),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angle)\r\n    )\r\n    this.ctx.strokeText(\r\n      'S',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angleS),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angleS)\r\n    )\r\n    this.ctx.strokeText(\r\n      'W',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angleW),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angleW)\r\n    )\r\n    this.ctx.strokeText(\r\n      'E',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angleE),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angleE)\r\n    )\r\n    this.ctx.fillText(\r\n      'N',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angle),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angle)\r\n    )\r\n    this.ctx.fillText(\r\n      'S',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angleS),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angleS)\r\n    )\r\n    this.ctx.fillText(\r\n      'W',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angleW),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angleW)\r\n    )\r\n    this.ctx.fillText(\r\n      'E',\r\n      this.canvasWidthCenterX + this.radius * Math.cos(angleE),\r\n      this.canvasWidthCenterY + this.radius * Math.sin(angleE)\r\n    )\r\n\r\n    this.ctx.shadowOffsetX = 0\r\n    this.ctx.shadowOffsetY = 0\r\n  }\r\n\r\n  drawPlayerPos (canvasWorldCenterX?: number, canvasWorldCenterZ?: number, disableTurn?: boolean) {\r\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0)\r\n\r\n    const x = (this.lastBotPos.x - (canvasWorldCenterX ?? this.lastBotPos.x)) * this.mapPixel - (this.full ? 30 : 0)\r\n    const z = (this.lastBotPos.z - (canvasWorldCenterZ ?? this.lastBotPos.z)) * this.mapPixel - (this.full ? 30 : 0)\r\n    const center = this.mapSize / 2 * this.mapPixel + (this.full ? 0 : this.radius * 0.1)\r\n    this.ctx.translate(center + x, center + z)\r\n    if (!disableTurn) this.ctx.rotate(-this.yaw)\r\n\r\n    const size = 3\r\n    const factor = this.full ? 2 : 1\r\n    const width = size * factor\r\n    const height = size * factor\r\n\r\n    this.ctx.beginPath()\r\n    this.ctx.moveTo(0, -height)\r\n    this.ctx.lineTo(-width, height)\r\n    this.ctx.lineTo(width, height)\r\n    this.ctx.closePath()\r\n\r\n    this.ctx.strokeStyle = '#000000'\r\n    this.ctx.lineWidth = this.full ? 2 : 1\r\n    this.ctx.stroke()\r\n    this.ctx.fillStyle = '#FFFFFF'\r\n    this.ctx.fill()\r\n\r\n    // Reset transformations\r\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0)\r\n  }\r\n\r\n  rotateMap (angle: number) {\r\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0)\r\n    this.ctx.translate(this.canvasWidthCenterX, this.canvasWidthCenterY)\r\n    this.ctx.rotate(angle)\r\n    this.ctx.translate(-this.canvasWidthCenterX, -this.canvasWidthCenterY)\r\n  }\r\n}\r\n","import { useEffect } from 'react'\r\nimport { simplify } from 'prismarine-nbt'\r\nimport RegionFile from 'prismarine-provider-anvil/src/region'\r\nimport { Vec3 } from 'vec3'\r\nimport { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport { WorldWarp } from 'flying-squid/dist/lib/modules/warps'\r\nimport { TypedEventEmitter } from 'contro-max/build/typedEventEmitter'\r\nimport { PCChunk } from 'prismarine-chunk'\r\nimport { Chunk } from 'prismarine-world/types/world'\r\nimport { Block } from 'prismarine-block'\r\nimport { INVISIBLE_BLOCKS } from 'renderer/viewer/lib/mesher/worldConstants'\r\nimport { getRenamedData } from 'flying-squid/dist/blockRenames'\r\nimport { useSnapshot, subscribe } from 'valtio'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport BlockData from '../../renderer/viewer/lib/moreBlockDataGenerated.json'\r\nimport preflatMap from '../preflatMap.json'\r\nimport { contro } from '../controls'\r\nimport { gameAdditionalState, miscUiState } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\nimport Minimap, { DisplayMode } from './Minimap'\r\nimport { ChunkInfo, DrawerAdapter, MapUpdates, MinimapDrawer } from './MinimapDrawer'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\n\r\nconst findHeightMap = (obj: PCChunk): number[] | undefined => {\r\n  function search (obj: any): any | undefined {\r\n    for (const key in obj) {\r\n      if (['heightmap', 'heightmaps'].includes(key.toLowerCase())) {\r\n        return obj[key]\r\n      } else if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n        const result = search(obj[key])\r\n        return result\r\n      }\r\n    }\r\n  }\r\n  return search(obj)\r\n}\r\n\r\nexport class DrawerAdapterImpl extends TypedEventEmitter<MapUpdates> implements DrawerAdapter {\r\n  playerPosition: Vec3\r\n  yaw: number\r\n  world: string\r\n  warps: WorldWarp[] = gameAdditionalState.warps\r\n  chunksStore = new Map<string, undefined | null | 'requested' | ChunkInfo>()\r\n  loadingChunksQueue = new Set<string>()\r\n  loadChunk: (key: string) => Promise<void> = this.loadChunkMinimap\r\n  mapDrawer = new MinimapDrawer(this.loadChunk.bind(this), this.warps, this.loadingChunksQueue, this.chunksStore)\r\n  currChunk: PCChunk | undefined\r\n  currChunkPos: { x: number, z: number } = { x: 0, z: 0 }\r\n  isOldVersion: boolean\r\n  blockData: Map<string | string[], string>\r\n  heightMap: Record<string, number> = {}\r\n  regions = new Map<string, RegionFile>()\r\n  chunksHeightmaps: Record<string, any> = {}\r\n  loadChunkFullmap: (key: string) => Promise<ChunkInfo | null | undefined>\r\n  _full = false\r\n  isBuiltinHeightmapAvailable = false\r\n  unsubscribers: Array<() => void> = []\r\n\r\n  constructor (pos?: Vec3) {\r\n    super()\r\n    this.playerPosition = pos ?? new Vec3(0, 0, 0)\r\n\r\n    // check if should use heightmap.\r\n    // As there is no simple way to check if heightmap is present in region file, making an attempt to load one\r\n    if (localServer) {\r\n      const chunkX = Math.floor(this.playerPosition.x / 16)\r\n      const chunkZ = Math.floor(this.playerPosition.z / 16)\r\n      const regionX = Math.floor(chunkX / 32)\r\n      const regionZ = Math.floor(chunkZ / 32)\r\n      const regionKey = `${regionX},${regionZ}`\r\n      const { worldFolder } = localServer.options\r\n      if (worldFolder) {\r\n        const path = `${worldFolder}/region/r.${regionX}.${regionZ}.mca`\r\n        const region = new RegionFile(path)\r\n        void region.initialize()\r\n        this.regions.set(regionKey, region)\r\n        const readX = chunkX % 32 < 0 ? 32 + chunkX % 32 : chunkX % 32\r\n        const readZ = chunkZ % 32 < 0 ? 32 + chunkZ % 32 : chunkZ % 32\r\n        console.log('heightmap check begun', readX, readZ)\r\n        void this.regions.get(regionKey)?.read(readX, readZ)?.then((rawChunk) => {\r\n          let heightmap: number[] | undefined\r\n          try {\r\n            const chunk = simplify(rawChunk as any)\r\n            heightmap = findHeightMap(chunk)\r\n          } catch (err) {\r\n            console.warn('error getting heightmap', err)\r\n          }\r\n          if (heightmap) {\r\n            this.isBuiltinHeightmapAvailable = true\r\n            this.loadChunkFullmap = this.loadChunkFromRegion\r\n            console.log('using heightmap')\r\n          } else {\r\n            this.isBuiltinHeightmapAvailable = false\r\n            this.loadChunkFullmap = this.loadChunkNoRegion\r\n            console.log('dont use heightmap')\r\n          }\r\n        })\r\n      } else {\r\n        this.isBuiltinHeightmapAvailable = false\r\n        this.loadChunkFullmap = this.loadChunkNoRegion\r\n        console.log('dont use heightmap')\r\n      }\r\n    } else {\r\n      this.isBuiltinHeightmapAvailable = false\r\n      this.loadChunkFullmap = this.loadChunkFromViewer\r\n    }\r\n    if (localServer) {\r\n      this.overwriteWarps(localServer.warps)\r\n    } else {\r\n      const storageWarps = localStorage.getItem(`warps: ${lastConnectOptions.value?.server ?? 'server'} ${lastConnectOptions.value?.username ?? 'username'}`)\r\n      this.overwriteWarps(JSON.parse(storageWarps ?? '[]'))\r\n    }\r\n    this.isOldVersion = versionToNumber(bot.version) < versionToNumber('1.13')\r\n    this.blockData = new Map<string, string>()\r\n    for (const blockKey of Object.keys(BlockData.colors)) {\r\n      const renamedKey = getRenamedData('blocks', blockKey, '1.20.2', bot.version)\r\n      this.blockData.set(renamedKey, BlockData.colors[blockKey])\r\n    }\r\n\r\n    subscribe(appViewer.rendererState.world, () => {\r\n      for (const key of this.loadingChunksQueue) {\r\n        if (appViewer.rendererState.world.chunksLoaded.has(key)) {\r\n          this.loadingChunksQueue.delete(key)\r\n          void this.loadChunk(key)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  destroy () {\r\n    for (const unsubscriber of this.unsubscribers) {\r\n      unsubscriber()\r\n    }\r\n  }\r\n\r\n  get full () {\r\n    return this._full\r\n  }\r\n\r\n  set full (full: boolean) {\r\n    if (!full) {\r\n      console.log('this is minimap')\r\n      this.loadChunk = this.loadChunkMinimap\r\n      this.mapDrawer.loadChunk = this.loadChunk\r\n    }\r\n    this._full = full\r\n  }\r\n\r\n  overwriteWarps (newWarps: WorldWarp[]) {\r\n    this.warps.splice(0, this.warps.length)\r\n    for (const warp of newWarps) {\r\n      this.warps.push({ ...warp })\r\n    }\r\n  }\r\n\r\n  setWarp (warp: WorldWarp, remove?: boolean): void {\r\n    this.world = bot.game.dimension\r\n    const index = this.warps.findIndex(w => w.name === warp.name)\r\n    if (!remove && index === -1) {\r\n      this.warps.push(warp)\r\n    } else if (remove && index !== -1) {\r\n      this.warps.splice(index, 1)\r\n    } else {\r\n      this.warps[index] = warp\r\n    }\r\n    if (localServer) {\r\n      // type suppressed until server is updated. It works fine\r\n      void (localServer as any).setWarp(warp, remove)\r\n    } else if (remove) {\r\n      localStorage.removeItem(`warps: ${bot.username} ${lastConnectOptions.value!.server}`)\r\n    } else {\r\n      localStorage.setItem(`warps: ${bot.username} ${lastConnectOptions.value!.server}`, JSON.stringify(this.warps))\r\n    }\r\n    this.emit('updateWarps')\r\n  }\r\n\r\n  getHighestBlockY (x: number, z: number, chunk?: Chunk) {\r\n    const chunkX = Math.floor(x / 16) * 16\r\n    const chunkZ = Math.floor(z / 16) * 16\r\n    if (this.chunksHeightmaps[`${chunkX},${chunkZ}`]) {\r\n      return this.chunksHeightmaps[`${chunkX},${chunkZ}`][x - chunkX + (z - chunkZ) * 16] - 1\r\n    }\r\n    const source = chunk ?? bot.world\r\n    const { height, minY } = (bot.game as any)\r\n    for (let i = height; i > 0; i -= 1) {\r\n      const block = source.getBlock(new Vec3(x & 15, minY + i, z & 15))\r\n      if (block && !INVISIBLE_BLOCKS.has(block.name)) {\r\n        return minY + i\r\n      }\r\n    }\r\n    return minY\r\n  }\r\n\r\n  async getChunkSingleplayer (chunkX: number, chunkZ: number) {\r\n    // absolute coords\r\n    const region = (localServer!.overworld.storageProvider as any).getRegion(chunkX * 16, chunkZ * 16)\r\n    if (!region) return 'unavailable'\r\n    const chunk = await localServer!.players[0]!.world.getColumn(chunkX, chunkZ)\r\n    return chunk\r\n  }\r\n\r\n  async loadChunkMinimap (key: string) {\r\n    const [chunkX, chunkZ] = key.split(',').map(Number)\r\n    const chunkWorldX = chunkX * 16\r\n    const chunkWorldZ = chunkZ * 16\r\n    if (appViewer.rendererState.world.chunksLoaded.has(key)) {\r\n      // console.log('[MinimapProvider] loading chunk for minimap', key)\r\n      const heightmap = appViewer.rendererState.world.heightmaps.get(key)\r\n      if (heightmap) {\r\n        // console.log('[MinimapProvider] did get highest blocks')\r\n      } else {\r\n        console.warn('[MinimapProvider] no highestBlocks from renderMethods')\r\n        return undefined\r\n      }\r\n      const colors = Array.from({ length: 256 }).fill('') as string[]\r\n      // avoid creating new object every time\r\n      const blockPos = new Vec3(0, 0, 0)\r\n      // filling up colors\r\n      for (let z = 0; z < 16; z += 1) {\r\n        for (let x = 0; x < 16; x += 1) {\r\n          const blockX = chunkWorldX + x\r\n          const blockZ = chunkWorldZ + z\r\n          const index = z * 16 + x\r\n          blockPos.x = blockX; blockPos.z = blockZ; blockPos.y = heightmap[index]\r\n          const block = bot.world.getBlock(blockPos)\r\n          // blocks which are not set are shown as half transparent\r\n          if (!block) {\r\n            colors[index] = 'rgba(0, 0, 0, 0.5)'\r\n            continue\r\n          }\r\n          colors[index] = this.setColor(block)\r\n        }\r\n      }\r\n      const chunk = { heightmap, colors }\r\n      this.applyShadows(chunk)\r\n      this.chunksStore.set(key, chunk)\r\n      this.emit(`chunkReady`, `${chunkX},${chunkZ}`)\r\n    } else {\r\n      this.loadingChunksQueue.add(`${chunkX},${chunkZ}`)\r\n      this.chunksStore.set(key, 'requested')\r\n      // console.log('[MinimapProvider] requested new chunk', key)\r\n    }\r\n  }\r\n\r\n  async loadChunkNoRegion (key: string) {\r\n    const [chunkX, chunkZ] = key.split(',').map(Number)\r\n    const chunkWorldX = chunkX * 16\r\n    const chunkWorldZ = chunkZ * 16\r\n    const chunkInfo = await this.getChunkSingleplayer(chunkX, chunkZ)\r\n    if (chunkInfo === 'unavailable') return null\r\n    const heightmap = new Uint8Array(256)\r\n    const colors = Array.from({ length: 256 }).fill('') as string[]\r\n    for (let z = 0; z < 16; z += 1) {\r\n      for (let x = 0; x < 16; x += 1) {\r\n        const blockX = chunkWorldX + x\r\n        const blockZ = chunkWorldZ + z\r\n        const blockY = this.getHighestBlockY(blockX, blockZ, chunkInfo)\r\n        const blockPos = new Vec3(blockX & 15, blockY, blockZ & 15)\r\n        let block = chunkInfo.getBlock(blockPos)\r\n        while (block?.name.includes('air')) {\r\n          blockPos.y -= 1\r\n          block = chunkInfo.getBlock(blockPos)\r\n        }\r\n        if (!block) {\r\n          console.warn(`[cannot get the block] ${chunkX}, ${chunkZ}, ${chunkWorldX + x}, ${chunkWorldZ + z}`)\r\n          return null\r\n        }\r\n        const index = z * 16 + x\r\n        heightmap[index] = blockPos.y\r\n        colors[index] = this.setColor(block)\r\n      }\r\n    }\r\n    const chunk: ChunkInfo = { heightmap, colors }\r\n    this.applyShadows(chunk)\r\n    return chunk\r\n  }\r\n\r\n  async loadChunkFromRegion (key: string): Promise<ChunkInfo | null | undefined> {\r\n    const [chunkX, chunkZ] = key.split(',').map(Number)\r\n    const chunkWorldX = chunkX * 16\r\n    const chunkWorldZ = chunkZ * 16\r\n    const heightmap = await this.getChunkHeightMapFromRegion(chunkX, chunkZ) as unknown as Uint8Array\r\n    if (!heightmap) return null\r\n    const chunkInfo = await this.getChunkSingleplayer(chunkX, chunkZ)\r\n    if (chunkInfo === 'unavailable') return null\r\n    const colors = Array.from({ length: 256 }).fill('') as string[]\r\n    for (let z = 0; z < 16; z += 1) {\r\n      for (let x = 0; x < 16; x += 1) {\r\n        const blockX = chunkWorldX + x\r\n        const blockZ = chunkWorldZ + z\r\n        const index = z * 16 + x\r\n        heightmap[index] -= 1\r\n        if (heightmap[index] < 0) heightmap[index] = 0\r\n        const blockY = heightmap[index]\r\n        const blockPos = new Vec3(blockX & 15, blockY, blockZ & 15)\r\n        let block = chunkInfo.getBlock(blockPos)\r\n        while (block?.name.includes('air')) {\r\n          blockPos.y -= 1\r\n          block = chunkInfo.getBlock(blockPos)\r\n        }\r\n        if (!block) {\r\n          console.warn(`[cannot get the block] ${chunkX}, ${chunkZ}, ${chunkWorldX + x}, ${chunkWorldZ + z}`)\r\n          return null\r\n        }\r\n        colors[index] = this.setColor(block)\r\n      }\r\n    }\r\n    const chunk: ChunkInfo = { heightmap, colors }\r\n    this.applyShadows(chunk)\r\n    return chunk\r\n  }\r\n\r\n  async getChunkHeightMapFromRegion (chunkX: number, chunkZ: number, cb?: (hm: number[]) => void) {\r\n    const regionX = Math.floor(chunkX / 32)\r\n    const regionZ = Math.floor(chunkZ / 32)\r\n    const regionKey = `${regionX},${regionZ}`\r\n    if (!this.regions.has(regionKey)) {\r\n      const { worldFolder } = localServer!.options\r\n      const path = `${worldFolder}/region/r.${regionX}.${regionZ}.mca`\r\n      const region = new RegionFile(path)\r\n      await region.initialize()\r\n      this.regions.set(regionKey, region)\r\n    }\r\n    const rawChunk = await this.regions.get(regionKey)!.read(chunkX % 32, chunkZ % 32)\r\n    const chunk = simplify(rawChunk as any)\r\n    console.log(`chunk ${chunkX}, ${chunkZ}:`, chunk)\r\n    const heightmap = findHeightMap(chunk)\r\n    console.log(`heightmap ${chunkX}, ${chunkZ}:`, heightmap)\r\n    cb?.(heightmap!)\r\n    return heightmap\r\n    // this.chunksHeightmaps[`${chunkX},${chunkZ}`] = heightmap\r\n  }\r\n\r\n  async loadChunkFromViewer (key: string) {\r\n    const [chunkX, chunkZ] = key.split(',').map(Number)\r\n    const chunkWorldX = chunkX * 16\r\n    const chunkWorldZ = chunkZ * 16\r\n    const highestBlocks = await getThreeJsRendererMethods()?.getHighestBlocks(`${chunkWorldX},${chunkWorldZ}`)\r\n    if (appViewer.rendererState.world.chunksLoaded.has(`${chunkWorldX},${chunkWorldZ}`)) {\r\n      const heightmap = new Uint8Array(256)\r\n      const colors = Array.from({ length: 256 }).fill('') as string[]\r\n      if (!highestBlocks) return null\r\n      for (let z = 0; z < 16; z += 1) {\r\n        for (let x = 0; x < 16; x += 1) {\r\n          const blockX = chunkWorldX + x\r\n          const blockZ = chunkWorldZ + z\r\n          const hBlock = highestBlocks[`${blockX},${blockZ}`]\r\n          const block = bot.world.getBlock(new Vec3(blockX, hBlock?.y ?? 0, blockZ))\r\n          // const block = Block.fromStateId(hBlock?.stateId ?? -1, hBlock?.biomeId ?? -1)\r\n          const index = z * 16 + x\r\n          if (!block || !hBlock) {\r\n            console.warn(`[loadChunk] ${chunkX}, ${chunkZ}, ${chunkWorldX + x}, ${chunkWorldZ + z}`)\r\n            heightmap[index] = 0\r\n            colors[index] = 'rgba(0, 0, 0, 0.5)'\r\n            continue\r\n          }\r\n          heightmap[index] = hBlock.y\r\n          colors[index] = this.setColor(block)\r\n        }\r\n      }\r\n      const chunk = { heightmap, colors }\r\n      this.applyShadows(chunk)\r\n      return chunk\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  applyShadows (chunk: ChunkInfo) {\r\n    for (let j = 0; j < 16; j += 1) {\r\n      for (let i = 0; i < 16; i += 1) {\r\n        const index = j * 16 + i\r\n        const color = chunk.colors[index]\r\n        // if (i === 0 || j === 0 || i === 15 || j === 16) {\r\n        //   const r = Math.floor(Math.random() * 2)\r\n        //   chunk.colors[index] = r===0 ? this.makeDarker(color) : this.makeLighter(color)\r\n        //   continue\r\n        // }\r\n\r\n        const h = chunk.heightmap[index]\r\n        let isLighterOrDarker = 0\r\n\r\n        const r = chunk.heightmap[index + 1] ?? 0\r\n        const u = chunk.heightmap[index - 16] ?? 0\r\n        const ur = chunk.heightmap[index - 15] ?? 0\r\n        if (r > h || u > h || ur > h) {\r\n          chunk.colors[index] = this.makeDarker(color)\r\n          isLighterOrDarker -= 1\r\n        }\r\n\r\n        const l = chunk.heightmap[index - 1] ?? 0\r\n        const d = chunk.heightmap[index + 16] ?? 0\r\n        const dl = chunk.heightmap[index + 15] ?? 0\r\n        if (l > h || d > h || dl > h) {\r\n          chunk.colors[index] = this.makeLighter(color)\r\n          isLighterOrDarker += 1\r\n        }\r\n\r\n        let linkedIndex: number | undefined\r\n        if (i === 1) {\r\n          linkedIndex = index - 1\r\n        } else if (i === 14) {\r\n          linkedIndex = index + 1\r\n        } else if (j === 1) {\r\n          linkedIndex = index - 16\r\n        } else if (j === 14) {\r\n          linkedIndex = index + 16\r\n        }\r\n        if (linkedIndex !== undefined) {\r\n          const linkedColor = chunk.colors[linkedIndex]\r\n          switch (isLighterOrDarker) {\r\n            case 1:\r\n              chunk.colors[linkedIndex] = this.makeLighter(linkedColor)\r\n              break\r\n            case -1:\r\n              chunk.colors[linkedIndex] = this.makeDarker(linkedColor)\r\n              break\r\n            default:\r\n              break\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  makeDarker (color: string) {\r\n    let rgbArray = color.match(/\\d+/g)?.map(Number) ?? []\r\n    if (rgbArray.length !== 3) return color\r\n    rgbArray = rgbArray.map(element => {\r\n      let newColor = element - 20\r\n      if (newColor < 0) newColor = 0\r\n      return newColor\r\n    })\r\n    return `rgb(${rgbArray.join(',')})`\r\n  }\r\n\r\n  makeLighter (color: string) {\r\n    let rgbArray = color.match(/\\d+/g)?.map(Number) ?? []\r\n    if (rgbArray.length !== 3) return color\r\n    rgbArray = rgbArray.map(element => {\r\n      let newColor = element + 20\r\n      if (newColor > 255) newColor = 255\r\n      return newColor\r\n    })\r\n    return `rgb(${rgbArray.join(',')})`\r\n  }\r\n\r\n  clearChunksStore (x: number, z: number) {\r\n    for (const key of Object.keys(this.chunksStore)) {\r\n      const [chunkX, chunkZ] = key.split(',').map(Number)\r\n      if (Math.hypot((chunkX - x), (chunkZ - z)) > 300) {\r\n        delete this.chunksStore[key]\r\n        delete this.chunksHeightmaps[key]\r\n        for (let i = 0; i < 16; i += 1) {\r\n          for (let j = 0; j < 16; j += 1) {\r\n            delete this.heightMap[`${chunkX + i},${chunkZ + j}`]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setColor (block: Block) {\r\n    let color: string\r\n    if (this.isOldVersion) {\r\n      color = BlockData.colors[preflatMap.blocks[`${block.type}:${block.metadata}`]?.replaceAll(/\\[.*?]/g, '')]\r\n        ?? 'rgb(0, 0, 255)'\r\n    } else {\r\n      color = this.blockData.get(block.name) ?? 'rgb(0, 255, 0)'\r\n    }\r\n    if (color === 'rgb(0, 255, 0)' || color === 'rgb(0, 0, 255)') {\r\n      // this should never happen\r\n      // console.warn('[MinimapProvider] did not find block name,', block.name)\r\n      // hack to find close color. Problem with colors should be fixed differently in the future\r\n      const blockNamePieces = block.name.split('_')\r\n      const keys = [...this.blockData.keys()]\r\n      for (const piece of blockNamePieces) {\r\n        const match = keys.find(x => x.includes(piece))\r\n        if (match) {\r\n          color = this.blockData.get(match) ?? 'rgb(255, 0, 0)'\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    return color\r\n  }\r\n\r\n  quickTp (x: number, z: number) {\r\n    const y = this.getHighestBlockY(x, z)\r\n    bot.chat(`/tp ${x} ${y + 20} ${z}`)\r\n    const timeout = setTimeout(() => {\r\n      const y = this.getHighestBlockY(x, z)\r\n      bot.chat(`/tp ${x} ${y + 20} ${z}`)\r\n      clearTimeout(timeout)\r\n    }, 500)\r\n  }\r\n\r\n  async drawChunkOnCanvas (key: string, canvas: HTMLCanvasElement) {\r\n    const chunk = await this.loadChunkFullmap(key)\r\n    const [worldX, worldZ] = key.split(',').map(x => Number(x) * 16)\r\n    const center = new Vec3(worldX + 8, 0, worldZ + 8)\r\n    this.mapDrawer.lastBotPos = center\r\n    this.mapDrawer.canvas = canvas\r\n    this.mapDrawer.full = true\r\n    this.mapDrawer.drawChunk(key, chunk)\r\n    this.mapDrawer.drawWarps(center)\r\n    this.mapDrawer.lastBotPos = this.playerPosition\r\n    this.mapDrawer.yaw = this.yaw\r\n    this.mapDrawer.drawPlayerPos(worldX, worldZ)\r\n  }\r\n}\r\n\r\nconst Inner = (\r\n  { adapter, displayMode, toggleFullMap }:\r\n  {\r\n    adapter: DrawerAdapterImpl\r\n    displayMode?: DisplayMode,\r\n    toggleFullMap?: () => void\r\n  }\r\n) => {\r\n\r\n  const updateWarps = (newWarps: WorldWarp[] | Error) => {\r\n    if (newWarps instanceof Error) {\r\n      console.error('An error occurred:', newWarps.message)\r\n      return\r\n    }\r\n\r\n    adapter.overwriteWarps(newWarps)\r\n  }\r\n\r\n  const updateMap = () => {\r\n    if (!adapter || miscUiState.displayFullmap) return\r\n    adapter.playerPosition = bot.entity.position\r\n    adapter.yaw = bot.entity.yaw\r\n    adapter.emit('updateMap')\r\n  }\r\n\r\n  useEffect(() => {\r\n    bot.on('move', updateMap)\r\n    localServer?.on('warpsUpdated' as keyof ServerEvents, updateWarps)\r\n\r\n    return () => {\r\n      bot?.off('move', updateMap)\r\n      localServer?.off('warpsUpdated' as keyof ServerEvents, updateWarps)\r\n    }\r\n  }, [])\r\n\r\n  return <div>\r\n    <Minimap\r\n      adapter={adapter}\r\n      showMinimap={options.showMinimap}\r\n      showFullmap='always'\r\n      singleplayer={miscUiState.singleplayer}\r\n      fullMap={displayMode === 'fullmapOnly'}\r\n      toggleFullMap={toggleFullMap}\r\n      displayMode={displayMode}\r\n    />\r\n  </div>\r\n}\r\n\r\nexport default ({ adapter, displayMode }: { adapter: DrawerAdapterImpl, displayMode?: DisplayMode }) => {\r\n\r\n  const { showMinimap } = useSnapshot(options)\r\n  const fullMapOpened = useIsModalActive('full-map')\r\n\r\n  const toggleFullMap = () => {\r\n    void contro.emit('trigger', { command: 'ui.toggleMap', schema: null as any })\r\n  }\r\n\r\n  if (\r\n    displayMode === 'minimapOnly'\r\n      ? showMinimap === 'never' || (showMinimap === 'singleplayer' && !miscUiState.singleplayer)\r\n      : !fullMapOpened\r\n  ) {\r\n    return null\r\n  }\r\n\r\n  return <Inner adapter={adapter} displayMode={displayMode} toggleFullMap={toggleFullMap} />\r\n}\r\n","interface Armor {\r\n  'helmet': number;\r\n  'chestplate': number | null;\r\n  'leggings': number | null;\r\n  'boots': number | null;\r\n}\r\n\r\nexport const armor: { [material: string]: Armor } = {\r\n  'turtle': {\r\n    'helmet': 2,\r\n    'chestplate': null,\r\n    'leggings': null,\r\n    'boots': null\r\n  },\r\n  'leather': {\r\n    'helmet': 1,\r\n    'chestplate': 3,\r\n    'leggings': 2,\r\n    'boots': 1\r\n  },\r\n  'golden': {\r\n    'helmet': 2,\r\n    'chestplate': 5,\r\n    'leggings': 3,\r\n    'boots': 1\r\n  },\r\n  'chainmail': {\r\n    'helmet': 2,\r\n    'chestplate': 5,\r\n    'leggings': 4,\r\n    'boots': 1\r\n  },\r\n  'iron': {\r\n    'helmet': 2,\r\n    'chestplate': 6,\r\n    'leggings': 5,\r\n    'boots': 2\r\n  },\r\n  'diamond': {\r\n    'helmet': 3,\r\n    'chestplate': 8,\r\n    'leggings': 6,\r\n    'boots': 3\r\n  },\r\n  'netherite': {\r\n    'helmet': 3,\r\n    'chestplate': 8,\r\n    'leggings': 6,\r\n    'boots': 3\r\n  }\r\n}\r\n\r\n","const getEffectClass = (effect) => {\r\n  switch (effect.id) {\r\n    case 19:\r\n      return 'poisoned'\r\n    case 20:\r\n      return 'withered'\r\n    case 22:\r\n      return 'absorption'\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n\r\nexport const barEffectAdded = (htmlElement, effect) => {\r\n  const effectClass = getEffectClass(effect)\r\n  if (effectClass) {\r\n    htmlElement.classList.add(effectClass)\r\n  }\r\n}\r\n\r\nexport const barEffectEnded = (htmlElement, effect) => {\r\n  const effectClass = getEffectClass(effect)\r\n  if (effectClass) {\r\n    htmlElement.classList.remove(effectClass)\r\n  }\r\n}\r\n","import { useRef, useEffect } from 'react'\r\nimport SharedHudVars from './SharedHudVars'\r\nimport './HealthBar.css'\r\nimport { barEffectAdded, barEffectEnded } from './BarsCommon'\r\n\r\n\r\nexport type HealthBarProps = {\r\n  gameMode?: string,\r\n  isHardcore: boolean,\r\n  damaged: boolean,\r\n  healthValue: number,\r\n  effectToAdd?: number | null,\r\n  effectToRemove?: number | null,\r\n  resetEffects?: () => void\r\n  style?: React.CSSProperties\r\n}\r\n\r\nexport default ({\r\n  gameMode,\r\n  isHardcore,\r\n  damaged,\r\n  healthValue,\r\n  effectToAdd,\r\n  effectToRemove,\r\n  resetEffects,\r\n  style\r\n}: HealthBarProps) => {\r\n  const healthRef = useRef<HTMLDivElement | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (healthRef.current) {\r\n      healthRef.current.classList.toggle('creative', gameMode === 'creative' || gameMode === 'spectator')\r\n    }\r\n  }, [gameMode])\r\n\r\n  useEffect(() => {\r\n    if (healthRef.current) {\r\n      if (isHardcore) {\r\n        healthRef.current.classList.add('hardcore')\r\n      } else {\r\n        healthRef.current.classList.remove('hardcore')\r\n      }\r\n    }\r\n  }, [isHardcore])\r\n\r\n  useEffect(() => {\r\n    if (healthRef.current) {\r\n      if (damaged) {\r\n        healthRef.current.classList.add('damaged')\r\n        console.log('damage')\r\n      } else {\r\n        healthRef.current.classList.remove('damaged')\r\n      }\r\n    }\r\n  }, [damaged])\r\n\r\n  useEffect(() => {\r\n    if (healthRef.current) {\r\n      if (healthValue <= 4) {\r\n        healthRef.current.classList.add('low')\r\n      } else {\r\n        healthRef.current.classList.remove('low')\r\n      }\r\n\r\n      const healthElement = healthRef.current\r\n      const hearts = healthElement.children\r\n\r\n      for (const heart of hearts) {\r\n        heart.classList.remove('full')\r\n        heart.classList.remove('half')\r\n      }\r\n\r\n      for (let i = 0; i < Math.ceil(healthValue / 2); i++) {\r\n        if (i >= hearts.length) break\r\n\r\n        if (healthValue % 2 !== 0 && Math.ceil(healthValue / 2) === i + 1) {\r\n          hearts[i].classList.add('half')\r\n        } else {\r\n          hearts[i].classList.add('full')\r\n        }\r\n      }\r\n    }\r\n  }, [healthValue])\r\n\r\n  useEffect(() => {\r\n    if (effectToAdd) {\r\n      barEffectAdded(healthRef.current, effectToAdd)\r\n    }\r\n    if (effectToRemove) {\r\n      barEffectEnded(healthRef.current, effectToRemove)\r\n    }\r\n    resetEffects?.()\r\n  }, [effectToAdd, effectToRemove])\r\n\r\n  return <SharedHudVars>\r\n    <div ref={healthRef} className='health' style={style}>\r\n      {\r\n        Array.from({ length: 10 }, () => 0)\r\n          .map((num, index) => <div\r\n            key={`heart-${index}`}\r\n            className='heart'\r\n          />)\r\n      }\r\n    </div>\r\n  </SharedHudVars>\r\n}\r\n","import { useRef, useState, useEffect } from 'react'\r\nimport SharedHudVars from './SharedHudVars'\r\nimport './FoodBar.css'\r\nimport { barEffectAdded, barEffectEnded } from './BarsCommon'\r\n\r\n\r\nexport type FoodBarProps = {\r\n  gameMode?: string,\r\n  food: number,\r\n  effectToAdd?: number | null,\r\n  effectToRemove?: number | null,\r\n  resetEffects?: () => void,\r\n  style?: React.CSSProperties\r\n}\r\n\r\nexport default ({\r\n  gameMode,\r\n  food,\r\n  effectToAdd,\r\n  effectToRemove,\r\n  resetEffects,\r\n  style\r\n}: FoodBarProps) => {\r\n  const foodRef = useRef<HTMLDivElement | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (foodRef.current) {\r\n      foodRef.current.classList.toggle('creative', gameMode === 'creative' || gameMode === 'spectator')\r\n    }\r\n  }, [gameMode])\r\n\r\n  useEffect(() => {\r\n    const foodbar = foodRef.current\r\n    if (foodbar) {\r\n      foodbar.classList.toggle('low', food <= 5)\r\n\r\n      const foods = foodbar.children\r\n\r\n      for (const food of foods) {\r\n        food.classList.remove('full')\r\n        food.classList.remove('half')\r\n      }\r\n\r\n      for (let i = 0; i < Math.ceil(food / 2); i++) {\r\n        if (i >= foods.length) break\r\n\r\n        if (food % 2 !== 0 && Math.ceil(food / 2) === i + 1) {\r\n          foods[i].classList.add('half')\r\n        } else {\r\n          foods[i].classList.add('full')\r\n        }\r\n      }\r\n    }\r\n  }, [food])\r\n\r\n  useEffect(() => {\r\n    if (effectToAdd) {\r\n      barEffectAdded(foodRef.current, effectToAdd)\r\n    }\r\n    if (effectToRemove) {\r\n      barEffectEnded(foodRef.current, effectToRemove)\r\n    }\r\n    resetEffects?.()\r\n  }, [effectToAdd, effectToRemove])\r\n\r\n  return <SharedHudVars>\r\n    <div ref={foodRef} className='foodbar' style={style}>\r\n      {\r\n        Array.from({ length: 10 }, () => 0)\r\n          .map((num, index) => <div\r\n            key={`food-${index}`}\r\n            className='food'\r\n          />)\r\n      }\r\n    </div>\r\n  </SharedHudVars>\r\n}\r\n","import { useRef, useState, useEffect, CSSProperties } from 'react'\r\nimport SharedHudVars from './SharedHudVars'\r\nimport './ArmorBar.css'\r\n\r\n\r\nexport type ArmorBarProps = {\r\n  armorValue: number,\r\n  style?: CSSProperties\r\n}\r\n\r\nexport default ({\r\n  armorValue,\r\n  style\r\n}: ArmorBarProps) => {\r\n  const armorRef = useRef<HTMLDivElement>(null!)\r\n\r\n  useEffect(() => {\r\n    const armorElement = armorRef.current\r\n    const armors = armorElement.children\r\n\r\n    for (const armor of armors) {\r\n      armor.classList.remove('full')\r\n      armor.classList.remove('half')\r\n    }\r\n\r\n    for (let i = 0; i < Math.ceil(armorValue / 2); i++) {\r\n      if (i >= armors.length) break\r\n\r\n      if (armorValue % 2 !== 0 && Math.ceil(armorValue / 2) === i + 1) {\r\n        armors[i].classList.add('half')\r\n      } else {\r\n        armors[i].classList.add('full')\r\n      }\r\n    }\r\n  }, [armorValue])\r\n\r\n  return <SharedHudVars>\r\n    <div style={style ?? {}} ref={armorRef} className='armor_container' >\r\n      {\r\n        Array.from({ length: 10 }, () => 0)\r\n          .map((num, index) => <div\r\n            key={`armor-${index}`}\r\n            className='armor'\r\n          />)\r\n      }\r\n    </div>\r\n  </SharedHudVars>\r\n}\r\n","import { useRef, useEffect } from 'react'\r\nimport SharedHudVars from './SharedHudVars'\r\nimport './BreathBar.css'\r\n\r\nexport type BreathBarProps = {\r\n  oxygen: number,\r\n}\r\n\r\nexport default ({\r\n  oxygen,\r\n}: BreathBarProps) => {\r\n  const breathRef = useRef<HTMLDivElement | null>(null)\r\n\r\n  useEffect(() => {\r\n    const breathbar = breathRef.current\r\n    if (breathbar && oxygen < 20) {\r\n      breathbar.style.display = 'flex'\r\n      breathbar.classList.toggle('low', oxygen <= 5)\r\n\r\n      const breaths = breathbar.children\r\n\r\n      for (const breath of breaths) {\r\n        breath.classList.remove('full')\r\n        breath.classList.remove('half')\r\n      }\r\n\r\n      for (let i = 0; i < Math.ceil(oxygen / 2); i++) {\r\n        if (i >= breaths.length) break\r\n\r\n        if (oxygen % 2 !== 0 && Math.ceil(oxygen / 2) === i + 1) {\r\n          breaths[i].classList.add('half')\r\n        } else {\r\n          breaths[i].classList.add('full')\r\n        }\r\n      }\r\n    } else if (breathbar && oxygen >= 20) {\r\n      breathbar.style.display = 'none'\r\n    }\r\n  }, [oxygen])\r\n\r\n  return <SharedHudVars>\r\n    <div ref={breathRef} className='breathbar'>\r\n      {\r\n        Array.from({ length: 10 }, () => 0)\r\n          .map((num, index) => <div\r\n            key={`breath-${index}`}\r\n            className='breath'\r\n          />)\r\n      }\r\n    </div>\r\n  </SharedHudVars>\r\n}\r\n","import { useRef, useState, useMemo } from 'react'\r\nimport { GameMode } from 'mineflayer'\r\nimport { useSnapshot } from 'valtio'\r\nimport { options } from '../optionsStorage'\r\nimport { armor } from './armorValues'\r\nimport HealthBar from './HealthBar'\r\nimport FoodBar from './FoodBar'\r\nimport ArmorBar from './ArmorBar'\r\nimport BreathBar from './BreathBar'\r\nimport './HealthBar.css'\r\n\r\nexport default () => {\r\n  const { disabledUiParts } = useSnapshot(options)\r\n\r\n  const [damaged, setDamaged] = useState(false)\r\n  const [healthValue, setHealthValue] = useState(bot.health)\r\n  const [food, setFood] = useState(bot.food)\r\n  const [oxygen, setOxygen] = useState(bot.oxygenLevel)\r\n  const [armorValue, setArmorValue] = useState(0)\r\n  const [gameMode, setGameMode] = useState<GameMode | ''>(bot.game.gameMode)\r\n  const [isHardcore, setIsHardcore] = useState(false)\r\n  const [effectToAdd, setEffectToAdd] = useState<number | null>(null)\r\n  const [effectToRemove, setEffectToRemove] = useState<number | null>(null)\r\n  const hurtTimeout = useRef<ReturnType<typeof setTimeout> | null>(null)\r\n\r\n  const getEffectClass = (effect) => {\r\n    switch (effect) {\r\n      case 19:\r\n        return 'poisoned'\r\n      case 20:\r\n        return 'withered'\r\n      case 22:\r\n        return 'absorption'\r\n      default:\r\n        return ''\r\n    }\r\n  }\r\n\r\n  const onDamage = () => {\r\n    setDamaged(prev => true)\r\n    if (hurtTimeout.current) clearTimeout(hurtTimeout.current)\r\n    hurtTimeout.current = setTimeout(() => {\r\n      setDamaged(prev => false)\r\n    }, 1000)\r\n  }\r\n\r\n  const updateHealth = (hValue) => {\r\n    setHealthValue(prev => hValue)\r\n  }\r\n\r\n  useMemo(() => {\r\n    bot.on('entityHurt', (entity) => {\r\n      if (entity !== bot.entity) return\r\n      onDamage()\r\n    })\r\n\r\n    bot.on('game', () => {\r\n      setGameMode(prev => bot.game.gameMode)\r\n      setIsHardcore(prev => bot.game.hardcore)\r\n    })\r\n\r\n    bot.on('entityEffect', (entity, effect) => {\r\n      if (entity !== bot.entity) return\r\n      setEffectToAdd(prev => effect.id)\r\n    })\r\n\r\n    bot.on('entityEffectEnd', (entity, effect) => {\r\n      if (entity !== bot.entity) return\r\n      setEffectToRemove(prev => effect.id)\r\n    })\r\n\r\n    bot.on('health', () => {\r\n      if (bot.health < healthValue) onDamage()\r\n      updateHealth(bot.health)\r\n      setFood(prev => bot.food)\r\n    })\r\n\r\n    bot.on('breath', () => {\r\n      setOxygen(prev => bot.oxygenLevel)\r\n    })\r\n\r\n    const upArmour = () => {\r\n      const armorSlots = new Set([5, 6, 7, 8])\r\n      let points = 0\r\n      for (const slotIndex of armorSlots) {\r\n        const item = bot.inventory.slots[slotIndex] ?? null\r\n        if (!item) continue\r\n        const armorName = item.name.split('_')\r\n        points += armor[armorName[0]]?.[armorName[1]] ?? 0\r\n      }\r\n      setArmorValue(points)\r\n    }\r\n    bot.inventory.on('updateSlot', upArmour)\r\n    upArmour()\r\n  }, [])\r\n\r\n  return <div className='hud-bars-container'>\r\n    {!disabledUiParts.includes('health-bar') && <HealthBar\r\n      gameMode={gameMode}\r\n      isHardcore={isHardcore}\r\n      damaged={damaged}\r\n      healthValue={healthValue}\r\n      effectToAdd={effectToAdd}\r\n      effectToRemove={effectToRemove}\r\n      resetEffects={() => {\r\n        setEffectToAdd(null)\r\n        setEffectToRemove(null)\r\n      }}\r\n    />}\r\n    {!disabledUiParts.includes('armor-bar') && <ArmorBar\r\n      armorValue={armorValue}\r\n      style={gameMode !== 'survival' && gameMode !== 'adventure' ? { display: 'none' } : { display: 'flex' }}\r\n    />}\r\n    {!disabledUiParts.includes('food-bar') && <FoodBar\r\n      gameMode={gameMode}\r\n      food={food}\r\n      effectToAdd={effectToAdd}\r\n      effectToRemove={effectToRemove}\r\n      resetEffects={() => {\r\n        setEffectToAdd(null)\r\n        setEffectToRemove(null)\r\n      }}\r\n    />}\r\n    {!disabledUiParts.includes('breath-bar') && <BreathBar\r\n      oxygen={gameMode !== 'survival' && gameMode !== 'adventure' ? 0 : oxygen}\r\n    />}\r\n  </div>\r\n}\r\n","import SharedHudVars from './SharedHudVars'\r\nimport styles from './XPBar.module.css'\r\n\r\nexport default ({ progress, level, gamemode }: { progress: number; level: number, gamemode: string }) => (\r\n  <SharedHudVars>\r\n    <div\r\n      id=\"xp-bar-bg\"\r\n      className={styles['xp-bar-bg']}\r\n      style={{ display: gamemode === 'creative' || gamemode === 'spectator' ? 'none' : 'block' }}\r\n    >\r\n      <div className={styles['xp-bar']} style={{ width: `${182 * progress}px` }} />\r\n      <span className={styles['xp-label']} style={{ display: level > 0 ? 'block' : 'none' }}>{level}</span>\r\n    </div>\r\n  </SharedHudVars>\r\n)\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"xp-bar-bg\":\"xp-bar-bg-Ugs21v\",\"xpBarBg\":\"xp-bar-bg-Ugs21v\",\"xp-bar\":\"xp-bar-Vg4hn0\",\"xpBar\":\"xp-bar-Vg4hn0\",\"xp-label\":\"xp-label-omcEHZ\",\"xpLabel\":\"xp-label-omcEHZ\"};","import { useState, useMemo } from 'react'\r\nimport { GameMode } from 'mineflayer'\r\nimport XPBar from './XPBar'\r\n\r\n\r\nexport default () => {\r\n  const [progress, setProgress] = useState(0)\r\n  const [level, setLevel] = useState(0)\r\n  const [gamemode, setGamemode] = useState<GameMode | ''>(bot.game.gameMode)\r\n\r\n  useMemo(() => {\r\n    const onXpUpdate = () => {\r\n      setProgress(bot.experience.progress)\r\n      setLevel(bot.experience.level)\r\n    }\r\n    onXpUpdate()\r\n\r\n    bot.on('experience', onXpUpdate)\r\n\r\n    bot.on('game', () => {\r\n      setGamemode(prev => bot.game.gameMode)\r\n    })\r\n  }, [])\r\n\r\n  return <XPBar progress={progress} level={level} gamemode={gamemode} />\r\n}\r\n","import prettyBytes from 'pretty-bytes'\r\nimport { openWorldFromHttpDir, openWorldZip } from './browserfs'\r\nimport { getResourcePackNames, installResourcepackPack, resourcePackState, updateTexturePackInstalledState } from './resourcePack'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\nimport { appQueryParams, appQueryParamsArray } from './appParams'\r\nimport { VALID_REPLAY_EXTENSIONS, openFile } from './packetsReplay/replayPackets'\r\nimport { createFullScreenProgressReporter } from './core/progressReporter'\r\nimport { ConnectOptions } from './connect'\r\n\r\nexport const getFixedFilesize = (bytes: number) => {\r\n  return prettyBytes(bytes, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n}\r\n\r\nexport const isInterestedInDownload = () => {\r\n  const { map, texturepack, replayFileUrl } = appQueryParams\r\n  const { mapDir } = appQueryParamsArray\r\n  return !!map || !!texturepack || !!replayFileUrl || !!mapDir\r\n}\r\n\r\nconst inner = async () => {\r\n  const { map, texturepack, replayFileUrl } = appQueryParams\r\n  const { mapDir } = appQueryParamsArray\r\n  return downloadAndOpenMapFromUrl(map, texturepack, mapDir, replayFileUrl)\r\n}\r\n\r\nexport const downloadAndOpenMapFromUrl = async (mapUrl: string | undefined, texturepackUrl: string | undefined, mapUrlDir: string[] | undefined, replayFileUrl: string | undefined, connectOptions?: Partial<ConnectOptions>) => {\r\n  if (replayFileUrl) {\r\n    setLoadingScreenStatus('Downloading replay file')\r\n    const response = await fetch(replayFileUrl)\r\n    const contentLength = response.headers?.get('Content-Length')\r\n    const size = contentLength ? +contentLength : undefined\r\n    const filename = replayFileUrl.split('/').pop()\r\n\r\n    let downloadedBytes = 0\r\n    const buffer = await new Response(new ReadableStream({\r\n      async start (controller) {\r\n        if (!response.body) throw new Error('Server returned no response!')\r\n        const reader = response.body.getReader()\r\n\r\n        // eslint-disable-next-line no-constant-condition\r\n        while (true) {\r\n          const { done, value } = await reader.read()\r\n\r\n          if (done) {\r\n            controller.close()\r\n            break\r\n          }\r\n\r\n          downloadedBytes += value.byteLength\r\n\r\n          // Calculate download progress as a percentage\r\n          const progress = size ? (downloadedBytes / size) * 100 : undefined\r\n          setLoadingScreenStatus(`Download replay file progress: ${progress === undefined ? '?' : Math.floor(progress)}% (${getFixedFilesize(downloadedBytes)} / ${size && getFixedFilesize(size)})`, false, true)\r\n\r\n          // Pass the received data to the controller\r\n          controller.enqueue(value)\r\n        }\r\n      },\r\n    })).arrayBuffer()\r\n\r\n    // Convert buffer to text, handling any compression automatically\r\n    const decoder = new TextDecoder()\r\n    const contents = decoder.decode(buffer)\r\n\r\n    openFile({\r\n      contents,\r\n      filename,\r\n      filesize: size\r\n    })\r\n    return true\r\n  }\r\n\r\n  const mapUrlDirGuess = appQueryParams.mapDirGuess\r\n  const mapUrlDirBaseUrl = appQueryParams.mapDirBaseUrl\r\n  if (mapUrlDir?.length) {\r\n    await openWorldFromHttpDir(mapUrlDir, mapUrlDirBaseUrl ?? undefined)\r\n    return true\r\n  }\r\n\r\n  if (mapUrlDirGuess) {\r\n    // await openWorldFromHttpDir(undefined, mapUrlDirGuess)\r\n    return true\r\n  }\r\n\r\n  // fixme\r\n  if (texturepackUrl) mapUrl = texturepackUrl\r\n  if (!mapUrl) return false\r\n\r\n  if (texturepackUrl) {\r\n    await updateTexturePackInstalledState()\r\n    if (resourcePackState.resourcePackInstalled) {\r\n      if (!confirm(`You are going to install a new resource pack, which will REPLACE the current one: ${await getResourcePackNames()[0]} Continue?`)) return\r\n    }\r\n  }\r\n  const name = mapUrl.slice(mapUrl.lastIndexOf('/') + 1).slice(-25)\r\n  const downloadThing = texturepackUrl ? 'texturepack' : 'world'\r\n  setLoadingScreenStatus(`Downloading ${downloadThing} ${name}...`)\r\n\r\n  const response = await fetch(mapUrl)\r\n  const contentType = response.headers.get('Content-Type')\r\n  if (!contentType || !contentType.startsWith('application/zip')) {\r\n    alert('Invalid map file')\r\n  }\r\n  const contentLengthStr = response.headers?.get('Content-Length')\r\n  const contentLength = contentLengthStr && +contentLengthStr\r\n  setLoadingScreenStatus(`Downloading ${downloadThing} ${name}: have to download ${contentLength && getFixedFilesize(contentLength)}...`)\r\n\r\n  let downloadedBytes = 0\r\n  const buffer = await new Response(new ReadableStream({\r\n    async start (controller) {\r\n      if (!response.body) throw new Error('Server returned no response!')\r\n      const reader = response.body.getReader()\r\n\r\n      // eslint-disable-next-line no-constant-condition\r\n      while (true) {\r\n        const { done, value } = await reader.read()\r\n\r\n        if (done) {\r\n          controller.close()\r\n          break\r\n        }\r\n\r\n        downloadedBytes += value.byteLength\r\n\r\n        // Calculate download progress as a percentage\r\n        const progress = contentLength ? (downloadedBytes / contentLength) * 100 : undefined\r\n        setLoadingScreenStatus(`Download ${downloadThing} progress: ${progress === undefined ? '?' : Math.floor(progress)}% (${getFixedFilesize(downloadedBytes)} / ${contentLength && getFixedFilesize(contentLength)})`, false, true)\r\n\r\n        // Pass the received data to the controller\r\n        controller.enqueue(value)\r\n      }\r\n    },\r\n  })).arrayBuffer()\r\n  if (texturepackUrl) {\r\n    const name = mapUrl.slice(mapUrl.lastIndexOf('/') + 1).slice(-30)\r\n    await installResourcepackPack(buffer, createFullScreenProgressReporter(), name)\r\n  } else {\r\n    await openWorldZip(buffer, undefined, connectOptions)\r\n  }\r\n  return true\r\n}\r\n\r\nexport default async () => {\r\n  try {\r\n    return await inner()\r\n  } catch (err) {\r\n    setLoadingScreenStatus(`Failed to download/open. Either refresh page or remove map param from URL. Reason: ${err.message}`)\r\n    return true\r\n  }\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"debug-left-side\":\"debug-left-side-L_D95v\",\"debugLeftSide\":\"debug-left-side-L_D95v\",\"debug-right-side\":\"debug-right-side-mFhvHG\",\"debugRightSide\":\"debug-right-side-mFhvHG\",\"empty\":\"empty-x7G63G\"};","import { useEffect, useRef, useState } from 'react'\r\nimport type { Entity } from 'prismarine-entity'\r\nimport { useSnapshot } from 'valtio'\r\nimport type { Block } from 'prismarine-block'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { miscUiState } from '../globalState'\r\nimport { getFixedFilesize } from '../downloadAndOpenFile'\r\nimport { options } from '../optionsStorage'\r\nimport { BlockStateModelInfo } from '../../renderer/viewer/lib/mesher/shared'\r\nimport styles from './DebugOverlay.module.css'\r\n\r\nexport default () => {\r\n  const received = useRef({ ...defaultPacketsCount })\r\n  const sent = useRef({ ...defaultPacketsCount })\r\n  const customEntries = useRef({} as any)\r\n  const receivedTotal = useRef(0)\r\n  const packetsCountByNamePerSec = useRef({\r\n    received: {} as { [key: string]: number },\r\n    sent: {} as { [key: string]: number }\r\n  })\r\n  window.packetsCountByNamePerSec = packetsCountByNamePerSec\r\n  const packetsCountByNamePer10Sec = useRef({\r\n    received: {} as { [key: string]: number },\r\n    sent: {} as { [key: string]: number }\r\n  })\r\n  window.packetsCountByNamePer10Sec = packetsCountByNamePer10Sec\r\n  const packetsCountByName = useRef({\r\n    received: {} as { [key: string]: number },\r\n    sent: {} as { [key: string]: number }\r\n  })\r\n  window.packetsCountByName = packetsCountByName\r\n  const ignoredPackets = useRef(new Set([] as any[]))\r\n  const [packetsString, setPacketsString] = useState('')\r\n  const { showDebugHud } = useSnapshot(miscUiState)\r\n  const [pos, setPos] = useState<{ x: number, y: number, z: number }>({ x: 0, y: 0, z: 0 })\r\n  const [skyL, setSkyL] = useState(0)\r\n  const [blockL, setBlockL] = useState(0)\r\n  const [biomeId, setBiomeId] = useState(0)\r\n  const [day, setDay] = useState(0)\r\n  const [timeOfDay, setTimeOfDay] = useState(0)\r\n  const [dimension, setDimension] = useState('')\r\n  const [cursorBlock, setCursorBlock] = useState<Block | null>(null)\r\n  const [cursorEntity, setCursorEntity] = useState<Entity | null>(null)\r\n  const [blockInfo, setBlockInfo] = useState<{ customBlockName?: string, modelInfo?: BlockStateModelInfo } | null>(null)\r\n  const [clientTps, setClientTps] = useState(0)\r\n  const [serverTps, setServerTps] = useState(null as null | { value: number, frozen: boolean })\r\n  const minecraftYaw = useRef(0)\r\n  const minecraftQuad = useRef(0)\r\n  const rendererDevice = appViewer.rendererState.renderer ?? 'No render backend'\r\n\r\n  const quadsDescription = [\r\n    'north (towards negative Z)',\r\n    'east (towards positive X)',\r\n    'south (towards positive Z)',\r\n    'west (towards negative X)'\r\n  ]\r\n\r\n  const viewDegToMinecraft = (yaw) => yaw % 360 - 180 * (yaw < 0 ? -1 : 1)\r\n\r\n  const shortenUuid = (uuid: string | undefined): string | undefined => {\r\n    if (!uuid) return undefined\r\n    // Format: 2383-*-3243 (first 4 chars, *, last 4 chars)\r\n    const cleaned = uuid.replaceAll('-', '')\r\n    if (cleaned.length < 8) return uuid\r\n    return `${cleaned.slice(0, 4)}-*-${cleaned.slice(-4)}`\r\n  }\r\n\r\n  const readPacket = (data, { name }, _buf, fullBuffer) => {\r\n    if (fullBuffer) {\r\n      const size = fullBuffer.byteLength\r\n      receivedTotal.current += size\r\n      received.current.size += size\r\n    }\r\n    received.current.count++\r\n    managePackets('received', name, data)\r\n  }\r\n\r\n  const managePackets = (type, name, data) => {\r\n    packetsCountByName.current[type][name] ??= 0\r\n    packetsCountByName.current[type][name]++\r\n    packetsCountByNamePerSec.current[type][name] ??= 0\r\n    packetsCountByNamePerSec.current[type][name]++\r\n    packetsCountByNamePer10Sec.current[type][name] ??= 0\r\n    packetsCountByNamePer10Sec.current[type][name]++\r\n    if (options.debugLogNotFrequentPackets && !ignoredPackets.current.has(name) && !hardcodedListOfDebugPacketsToIgnore[type].includes(name)) {\r\n      if (packetsCountByNamePerSec.current[type][name] > 5 || packetsCountByName.current[type][name] > 100) { // todo think of tracking the count within 10s\r\n        console.info(`[packet ${name} was ${type} too frequent] Ignoring...`)\r\n        ignoredPackets.current.add(name)\r\n      } else {\r\n        console.info(`[packet ${type}] ${name}`, /* ${JSON.stringify(data, null, 2)}` */ data)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let lastTpsReset = 0\r\n    let lastTps = 0\r\n    let lastTickDate = 0\r\n    const updateTps = (increment = false) => {\r\n      if (Date.now() - lastTpsReset >= 1000) {\r\n        setClientTps(lastTps)\r\n        window.lastTpsArray ??= []\r\n        window.lastTpsArray.push(lastTps)\r\n        lastTps = 0\r\n        lastTpsReset = Date.now()\r\n      }\r\n      if (increment) {\r\n        lastTickDate = Date.now()\r\n        lastTps++\r\n      }\r\n    }\r\n\r\n    let update = 0\r\n    const packetsUpdateInterval = setInterval(() => {\r\n      setPacketsString(`↓ ${received.current.count} (${(received.current.size / 1024).toFixed(2)} KB/s, ${getFixedFilesize(receivedTotal.current)}) ↑ ${sent.current.count}`)\r\n      received.current = { ...defaultPacketsCount }\r\n      sent.current = { ...defaultPacketsCount }\r\n      packetsCountByNamePerSec.current.received = {}\r\n      packetsCountByNamePerSec.current.sent = {}\r\n      if (update++ % 10 === 0) {\r\n        packetsCountByNamePer10Sec.current.received = {}\r\n        packetsCountByNamePer10Sec.current.sent = {}\r\n      }\r\n      updateTps(false)\r\n    }, 1000)\r\n\r\n    bot.on('physicsTick', () => {\r\n      updateTps(true)\r\n    })\r\n    bot._client.on('packet', () => {\r\n      updateTps(false)\r\n    })\r\n\r\n    const freqUpdateInterval = setInterval(() => {\r\n      setPos({ ...bot.entity.position })\r\n      setSkyL(bot.world.getSkyLight(bot.entity.position))\r\n      setBlockL(bot.world.getBlockLight(bot.entity.position))\r\n      setBiomeId(bot.world.getBiome(bot.entity.position))\r\n      setDimension(bot.game.dimension)\r\n      setDay(bot.time.day)\r\n      setTimeOfDay(bot.time.timeOfDay)\r\n      const cursorState = bot.mouse.getCursorState()\r\n      setCursorBlock(cursorState.cursorBlock)\r\n      setCursorEntity(cursorState.entity)\r\n    }, 100)\r\n\r\n    const notFrequentUpdateInterval = setInterval(async () => {\r\n      const block = bot.mouse.cursorBlock\r\n      if (!block) {\r\n        setBlockInfo(null)\r\n        return\r\n      }\r\n      const { customBlockName, modelInfo } = await getThreeJsRendererMethods()?.getBlockInfo(block.position, block.stateId) ?? {}\r\n      setBlockInfo({ customBlockName, modelInfo })\r\n    }, 300)\r\n\r\n    // @ts-expect-error\r\n    bot._client.on('packet', readPacket)\r\n    // @ts-expect-error\r\n    bot._client.on('packet_name' as any, (name, data) => readPacket(data, { name })) // custom client\r\n    bot._client.on('writePacket' as any, (name, data) => {\r\n      sent.current.count++\r\n      managePackets('sent', name, data)\r\n    })\r\n    bot._client.on('set_ticking_state' as any, (data) => {\r\n      setServerTps({ value: data.tick_rate, frozen: data.is_frozen })\r\n    })\r\n\r\n    return () => {\r\n      clearInterval(packetsUpdateInterval)\r\n      clearInterval(freqUpdateInterval)\r\n      clearInterval(notFrequentUpdateInterval)\r\n      console.log('Last physics tick before disconnect was', Date.now() - lastTickDate, 'ms ago')\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    minecraftYaw.current = viewDegToMinecraft(bot.entity.yaw * -180 / Math.PI)\r\n    minecraftQuad.current = Math.floor(((minecraftYaw.current + 180) / 90 + 0.5) % 4)\r\n  }, [bot.entity.yaw])\r\n\r\n  if (!showDebugHud) return null\r\n\r\n  return <>\r\n    <div className={`debug-left-side ${styles['debug-left-side']}`}>\r\n      <p>Prismarine Web Client ({bot.version})</p>\r\n      {appViewer.backend?.getDebugOverlay?.().entitiesString && <p>E: {appViewer.backend.getDebugOverlay().entitiesString}</p>}\r\n      <p>{dimension}</p>\r\n      <div className={styles.empty} />\r\n      <p>XYZ: {pos.x.toFixed(3)} / {pos.y.toFixed(3)} / {pos.z.toFixed(3)}</p>\r\n      <p>Chunk: {Math.floor(pos.x % 16)} ~ {Math.floor(pos.z % 16)} in {Math.floor(pos.x / 16)} ~ {Math.floor(pos.z / 16)}</p>\r\n      <p>Section: {Math.floor(pos.x / 16) * 16}, {Math.floor(pos.y / 16) * 16}, {Math.floor(pos.z / 16) * 16}</p>\r\n      <p>Packets: {packetsString}</p>\r\n      <p>Client TPS: {clientTps} {serverTps ? `Server TPS: ${serverTps.value} ${serverTps.frozen ? '(frozen)' : ''}` : ''}</p>\r\n      <p>Facing (viewer): {bot.entity.yaw.toFixed(3)} {bot.entity.pitch.toFixed(3)}</p>\r\n      <p>Facing (minecraft): {quadsDescription[minecraftQuad.current]} ({minecraftYaw.current.toFixed(1)} {(bot.entity.pitch * -180 / Math.PI).toFixed(1)})</p>\r\n      <p>Light: {blockL} ({skyL} sky)</p>\r\n\r\n      <p>Biome: minecraft:{loadedData.biomesArray[biomeId]?.name ?? 'unknown biome'}</p>\r\n      <p>Day: {day} Time: {timeOfDay}</p>\r\n      <div className={styles.empty} />\r\n      {Object.entries(appViewer.backend?.getDebugOverlay?.().left ?? {}).map(([name, value]) => <p key={name}>{name}: {value}</p>)}\r\n    </div>\r\n\r\n    <div className={`debug-right-side ${styles['debug-right-side']}`}>\r\n      <p>Backend: {appViewer.backend?.displayName}</p>\r\n      <p>Renderer: {rendererDevice}</p>\r\n      <div className={styles.empty} />\r\n      {cursorBlock ? (<>\r\n        <p>{cursorBlock.name}</p>\r\n        {\r\n          Object.entries(cursorBlock.getProperties()).map(([name, value], idx, arr) => {\r\n            return <p key={name}>\r\n              {name}: {\r\n                typeof value === 'boolean' ? (\r\n                  <span style={{ color: value ? 'lightgreen' : 'red' }}>{String(value)}</span>\r\n                ) : value\r\n              }\r\n            </p>\r\n          })\r\n        }\r\n      </>)\r\n        : ''}\r\n      {cursorBlock ? (\r\n        <p>Looking at: {cursorBlock.position.x} {cursorBlock.position.y} {cursorBlock.position.z}</p>\r\n      ) : ''}\r\n      {cursorBlock?.blockEntity && <p>Block Entity Data:</p>}\r\n      {cursorBlock?.blockEntity && (<>\r\n        <div className={styles.empty} />\r\n        {Object.entries(cursorBlock.blockEntity).map(([key, value]: [string, any]) => {\r\n          const stringified = JSON.stringify(value)\r\n          return (\r\n            <p key={key}>\r\n              {key}: {stringified.length}\r\n            </p>\r\n          )\r\n        })}\r\n      </>)}\r\n      {cursorEntity ? (<>\r\n        <div className={styles.empty} />\r\n        <p>E: {cursorEntity.name}</p>\r\n        {cursorEntity.displayName && <p>{cursorEntity.displayName}</p>}\r\n        {cursorEntity.id !== undefined && <p>ID: {cursorEntity.id}</p>}\r\n        {shortenUuid(cursorEntity.uuid) && <p>UUID: {shortenUuid(cursorEntity.uuid)}</p>}\r\n        {cursorEntity.username && <p>Username: {cursorEntity.username}</p>}\r\n        {cursorEntity.position && (\r\n          <p>{cursorEntity.position.x.toFixed(2)} {cursorEntity.position.y.toFixed(2)} {cursorEntity.position.z.toFixed(2)}</p>\r\n        )}\r\n        {cursorEntity.yaw !== undefined && <p>Yaw: {cursorEntity.yaw.toFixed(1)}</p>}\r\n        {cursorEntity.pitch !== undefined && <p>Pitch: {cursorEntity.pitch.toFixed(1)}</p>}\r\n        {cursorEntity.type && <p>Type: {cursorEntity.type}</p>}\r\n        {cursorEntity.health !== undefined && <p>Health: {cursorEntity.health.toFixed(1)}</p>}\r\n      </>)\r\n        : ''}\r\n      <div className={styles.empty} />\r\n      {blockInfo && (() => {\r\n        const { customBlockName, modelInfo } = blockInfo\r\n        return modelInfo && (\r\n          <>\r\n            {customBlockName && <p style={{ fontSize: 7, }}>Custom block: {customBlockName}</p>}\r\n            {modelInfo.issues.map((issue, i) => (\r\n              <p key={i} style={{ color: 'yellow', fontSize: 7, }}>{issue}</p>\r\n            ))}\r\n            {/* <p style={{ fontSize: 7, }}>Resolved models chain: {modelInfo.modelNames.join(' -> ')}</p> */}\r\n            <p style={{ fontSize: 7, }}>Resolved model: {modelInfo.modelNames[0] ?? '-'}</p>\r\n            <p style={{ fontSize: 7, whiteSpace: 'nowrap', maxWidth: '100px', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n              {modelInfo.conditions.join(', ')}\r\n            </p>\r\n          </>\r\n        )\r\n      })()}\r\n      {Object.entries(appViewer.backend?.getDebugOverlay?.().right ?? {}).map(([name, value]) => <p key={name}>{name}: {value}</p>)}\r\n    </div>\r\n  </>\r\n}\r\n\r\nconst hardcodedListOfDebugPacketsToIgnore = {\r\n  received: [\r\n    'entity_velocity',\r\n    'sound_effect',\r\n    'rel_entity_move',\r\n    'entity_head_rotation',\r\n    'entity_metadata',\r\n    'entity_move_look',\r\n    'teams',\r\n    'entity_teleport',\r\n    'entity_look',\r\n    'ping',\r\n    'entity_update_attributes',\r\n    'player_info',\r\n    'update_time',\r\n    'animation',\r\n    'entity_equipment',\r\n    'entity_destroy',\r\n    'named_entity_spawn',\r\n    'update_light',\r\n    'set_slot',\r\n    'block_break_animation',\r\n    'map_chunk',\r\n    'spawn_entity',\r\n    'world_particles',\r\n    'keep_alive',\r\n    'chat',\r\n    'playerlist_header',\r\n    'scoreboard_objective',\r\n    'scoreboard_score',\r\n    'entity_status',\r\n    'set_ticking_state',\r\n    'ping_response',\r\n    'block_change',\r\n    'damage_event'\r\n  ],\r\n  sent: [\r\n    'pong',\r\n    'position',\r\n    'look',\r\n    'keep_alive',\r\n    'position_look',\r\n    'ping_request'\r\n  ]\r\n}\r\n\r\nconst defaultPacketsCount = {\r\n  count: 0,\r\n  size: 0\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"mobile-top-btns\":\"mobile-top-btns-LkVyKp\",\"mobileTopBtns\":\"mobile-top-btns-LkVyKp\",\"pause-btn\":\"pause-btn-tfjBzl\",\"pauseBtn\":\"pause-btn-tfjBzl\",\"chat-btn\":\"chat-btn-BNyPws\",\"chatBtn\":\"chat-btn-BNyPws\",\"debug-btn\":\"debug-btn-aSsISO\",\"debugBtn\":\"debug-btn-aSsISO\",\"tab-btn\":\"tab-btn-hqoRrR\",\"tabBtn\":\"tab-btn-hqoRrR\"};","import { useEffect, useRef } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { handleMobileButtonActionCommand, handleMobileButtonLongPress } from '../controls'\r\nimport { watchValue } from '../optionsStorage'\r\nimport { type MobileButtonConfig, type ActionHoldConfig, type ActionType, type CustomAction } from '../appConfig'\r\nimport { miscUiState } from '../globalState'\r\nimport PixelartIcon from './PixelartIcon'\r\nimport styles from './MobileTopButtons.module.css'\r\n\r\nexport default () => {\r\n  const elRef = useRef<HTMLDivElement | null>(null)\r\n  const { appConfig } = useSnapshot(miscUiState)\r\n  const mobileButtonsConfig = appConfig?.mobileButtons\r\n\r\n  const longPressTimerIdRef = useRef<number | null>(null)\r\n  const actionToShortPressRef = useRef<ActionType | null>(null)\r\n\r\n  const showMobileControls = (visible: boolean) => {\r\n    if (elRef.current) {\r\n      elRef.current.style.display = visible ? 'flex' : 'none'\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    watchValue(miscUiState, o => {\r\n      showMobileControls(Boolean(o.currentTouch))\r\n    })\r\n  }, [])\r\n\r\n  const getButtonClassName = (button: MobileButtonConfig): string => {\r\n    const actionForStyle = button.action || (button.actionHold && typeof button.actionHold === 'object' && 'command' in button.actionHold ? button.actionHold.command : undefined)\r\n\r\n    if (typeof actionForStyle === 'string') {\r\n      switch (actionForStyle) {\r\n        case 'general.chat':\r\n          return styles['chat-btn']\r\n        case 'ui.pauseMenu':\r\n          return styles['pause-btn']\r\n        case 'general.playersList':\r\n          return styles['tab-btn']\r\n        default:\r\n          return styles['debug-btn']\r\n      }\r\n    }\r\n    return styles['debug-btn']\r\n  }\r\n\r\n  const renderConfigButtons = () => {\r\n    return mobileButtonsConfig?.map((button, index) => {\r\n      const className = getButtonClassName(button)\r\n      let label: string | JSX.Element = button.icon || button.label || ''\r\n\r\n      if (typeof label === 'string' && label.startsWith('pixelarticons:')) {\r\n        const iconName = label.replace('pixelarticons:', '')\r\n        label = <PixelartIcon iconName={iconName} />\r\n      }\r\n\r\n      const onPointerDown = (e: React.PointerEvent) => {\r\n        const elem = e.currentTarget as HTMLElement\r\n        elem.setPointerCapture(e.pointerId)\r\n\r\n        if (longPressTimerIdRef.current) {\r\n          clearTimeout(longPressTimerIdRef.current)\r\n          longPressTimerIdRef.current = null\r\n        }\r\n        actionToShortPressRef.current = null\r\n\r\n        const { actionHold, action } = button\r\n\r\n        if (actionHold) {\r\n          if (typeof actionHold === 'object' && 'command' in actionHold) {\r\n            const config = actionHold\r\n            if (config.longPressAction) {\r\n              actionToShortPressRef.current = config.command\r\n              longPressTimerIdRef.current = window.setTimeout(() => {\r\n                handleMobileButtonLongPress(config)\r\n                actionToShortPressRef.current = null\r\n                longPressTimerIdRef.current = null\r\n              }, config.duration || 500)\r\n            } else {\r\n              handleMobileButtonActionCommand(config.command, true)\r\n            }\r\n          } else if (action) {\r\n            actionToShortPressRef.current = action\r\n            longPressTimerIdRef.current = window.setTimeout(() => {\r\n              handleMobileButtonActionCommand(actionHold, true)\r\n              actionToShortPressRef.current = null\r\n              longPressTimerIdRef.current = null\r\n            }, 500)\r\n          } else {\r\n            handleMobileButtonActionCommand(actionHold, true)\r\n          }\r\n        } else if (action) {\r\n          handleMobileButtonActionCommand(action, true)\r\n        }\r\n      }\r\n\r\n      const onPointerUp = (e: React.PointerEvent) => {\r\n        const elem = e.currentTarget as HTMLElement\r\n        elem.releasePointerCapture(e.pointerId)\r\n\r\n        const { actionHold, action } = button\r\n        let wasShortPressHandled = false\r\n\r\n        if (longPressTimerIdRef.current) {\r\n          clearTimeout(longPressTimerIdRef.current)\r\n          longPressTimerIdRef.current = null\r\n          if (actionToShortPressRef.current) {\r\n            handleMobileButtonActionCommand(actionToShortPressRef.current, true)\r\n            handleMobileButtonActionCommand(actionToShortPressRef.current, false)\r\n            wasShortPressHandled = true\r\n          }\r\n        }\r\n\r\n        if (!wasShortPressHandled) {\r\n          if (actionHold) {\r\n            if (typeof actionHold === 'object' && 'command' in actionHold) {\r\n              const config = actionHold\r\n              if (config.longPressAction) {\r\n                if (actionToShortPressRef.current === null) {\r\n                  if (typeof config.longPressAction === 'string') {\r\n                    handleMobileButtonActionCommand(config.longPressAction, false)\r\n                  }\r\n                }\r\n              } else {\r\n                handleMobileButtonActionCommand(config.command, false)\r\n              }\r\n            } else if (action) {\r\n              if (actionToShortPressRef.current === null) {\r\n                handleMobileButtonActionCommand(actionHold, false)\r\n              }\r\n            } else {\r\n              handleMobileButtonActionCommand(actionHold, false)\r\n            }\r\n          } else if (action) {\r\n            handleMobileButtonActionCommand(action, false)\r\n          }\r\n        }\r\n        actionToShortPressRef.current = null\r\n      }\r\n\r\n      return (\r\n        <div\r\n          key={index}\r\n          className={className}\r\n          onPointerDown={onPointerDown}\r\n          onPointerUp={onPointerUp}\r\n          onLostPointerCapture={onPointerUp}\r\n        >\r\n          {label}\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  // ios note: just don't use <button>\r\n  return (\r\n    <div ref={elRef} className={styles['mobile-top-btns']} id=\"mobile-top\">\r\n      {mobileButtonsConfig && mobileButtonsConfig.length > 0 ? renderConfigButtons() : null}\r\n    </div>\r\n  )\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-CbtoYq\",\"websocket\":\"websocket-ukuvQ1\",\"iconRow\":\"iconRow-Rj9AHI\",\"arrowRow\":\"arrowRow-mPYqMH\",\"dataRow\":\"dataRow-vkErq6\",\"ping\":\"ping-axxvVG\",\"totalRow\":\"totalRow-tXKyyD\",\"stale\":\"stale-QydKzb\"};","import { useEffect, useMemo, useState, useRef } from 'react'\r\nimport { parseServerAddress } from '../parseServerAddress'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport styles from './NetworkStatus.module.css'\r\n\r\nexport default () => {\r\n  const [proxyPing, setProxyPing] = useState<number | null>(null)\r\n  const [serverPing, setServerPing] = useState<number | null>(null)\r\n  const [isProxyStale, setIsProxyStale] = useState(false)\r\n  const [isServerStale, setIsServerStale] = useState(false)\r\n\r\n  const proxyTimeoutRef = useRef<NodeJS.Timeout>()\r\n  const serverTimeoutRef = useRef<NodeJS.Timeout>()\r\n\r\n  const isWebSocket = useMemo(() => parseServerAddress(lastConnectOptions.value?.server).isWebSocket, [lastConnectOptions.value?.server])\r\n  const serverIp = useMemo(() => lastConnectOptions.value?.server, [])\r\n\r\n  const setProxyPingWithTimeout = (ping: number | null) => {\r\n    setProxyPing(ping)\r\n    setIsProxyStale(false)\r\n    if (proxyTimeoutRef.current) clearTimeout(proxyTimeoutRef.current)\r\n    proxyTimeoutRef.current = setTimeout(() => setIsProxyStale(true), 1000)\r\n  }\r\n\r\n  const setServerPingWithTimeout = (ping: number | null) => {\r\n    setServerPing(ping)\r\n    setIsServerStale(false)\r\n    if (serverTimeoutRef.current) clearTimeout(serverTimeoutRef.current)\r\n    serverTimeoutRef.current = setTimeout(() => setIsServerStale(true), 1000)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!serverIp) return\r\n\r\n    const updatePing = async () => {\r\n      const updateServerPing = async () => {\r\n        const ping = await bot.pingServer()\r\n        if (ping) {\r\n          setServerPingWithTimeout(ping)\r\n        }\r\n      }\r\n\r\n      const updateProxyPing = async () => {\r\n        if (!isWebSocket) {\r\n          const ping = await bot.pingProxy()\r\n          setProxyPingWithTimeout(ping)\r\n        }\r\n      }\r\n\r\n      try {\r\n        await Promise.all([updateServerPing(), updateProxyPing()])\r\n      } catch (err) {\r\n        console.error('Failed to ping:', err)\r\n      }\r\n    }\r\n\r\n    void updatePing()\r\n    const interval = setInterval(updatePing, 1000)\r\n    return () => {\r\n      clearInterval(interval)\r\n      if (proxyTimeoutRef.current) clearTimeout(proxyTimeoutRef.current)\r\n      if (serverTimeoutRef.current) clearTimeout(serverTimeoutRef.current)\r\n    }\r\n  }, [])\r\n\r\n  if (!serverIp) return null\r\n\r\n  const { username } = bot\r\n  const { proxy: proxyUrl } = lastConnectOptions.value!\r\n  const pingTotal = serverPing\r\n\r\n  const ICON_SIZE = 18\r\n\r\n  return (\r\n    <div className={`${styles.container} ${isWebSocket ? styles.websocket : ''}`}>\r\n      <PixelartIcon className={styles.iconRow} iconName={pixelartIcons.user} width={ICON_SIZE} />\r\n      {!isWebSocket && (\r\n        <>\r\n          <PixelartIcon className={`${styles.iconRow} ${styles.arrowRow}`} iconName={pixelartIcons['arrow-right']} width={16} />\r\n          <PixelartIcon className={styles.iconRow} iconName={pixelartIcons.server} width={ICON_SIZE} />\r\n        </>\r\n      )}\r\n      <PixelartIcon className={`${styles.iconRow} ${styles.arrowRow}`} iconName={pixelartIcons['arrow-right']} width={16} />\r\n      <PixelartIcon className={styles.iconRow} iconName={pixelartIcons['list-box']} width={ICON_SIZE} />\r\n\r\n      <span className={styles.dataRow}>{username}</span>\r\n      {!isWebSocket && (\r\n        <>\r\n          <span className={`${styles.dataRow} ${styles.ping} ${isProxyStale ? styles.stale : ''}`}>{proxyPing}ms</span>\r\n          <span className={styles.dataRow}>{proxyUrl}</span>\r\n        </>\r\n      )}\r\n      <span className={`${styles.dataRow} ${styles.ping} ${isServerStale ? styles.stale : ''}`}>\r\n        {isWebSocket ? (pingTotal || '?') : (pingTotal ? pingTotal - (proxyPing ?? 0) : '...')}ms\r\n      </span>\r\n      <span className={styles.dataRow}>{serverIp}</span>\r\n\r\n      <span className={styles.totalRow}>Ping: {pingTotal || '?'}ms</span>\r\n    </div>\r\n  )\r\n}\r\n","import { join } from 'path'\r\nimport fs from 'fs'\r\nimport { useEffect } from 'react'\r\nimport { subscribe, useSnapshot } from 'valtio'\r\nimport { usedServerPathsV1 } from 'flying-squid/dist/lib/modules/world'\r\nimport { openURL } from 'renderer/viewer/lib/simpleUtils'\r\nimport { Vec3 } from 'vec3'\r\nimport { generateSpiralMatrix } from 'flying-squid/dist/utils'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { ErrorBoundary } from '@zardoy/react-util'\r\nimport {\r\n  activeModalStack,\r\n  showModal,\r\n  hideModal,\r\n  miscUiState,\r\n  openOptionsMenu,\r\n  gameAdditionalState\r\n} from '../globalState'\r\nimport { fsState } from '../loadSave'\r\nimport { disconnect } from '../flyingSquidUtils'\r\nimport { openGithub, pointerLock } from '../utils'\r\nimport { setLoadingScreenStatus } from '../appStatus'\r\nimport { closeWan, openToWanAndCopyJoinLink, getJoinLink } from '../localServerMultiplayer'\r\nimport { collectFilesToCopy, fileExistsAsyncOptimized, mkdirRecursive, uniqueFileNameFromWorldName } from '../browserfs'\r\nimport { appQueryParams } from '../appParams'\r\nimport { downloadPacketsReplay, packetsRecordingState } from '../packetsReplay/packetsReplayLegacy'\r\nimport { options } from '../optionsStorage'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport { showOptionsModal } from './SelectOption'\r\nimport Button from './Button'\r\nimport Screen from './Screen'\r\nimport styles from './PauseScreen.module.css'\r\nimport { DiscordButton } from './DiscordButton'\r\nimport { showNotification } from './NotificationProvider'\r\nimport { appStatusState, lastConnectOptions, reconnectReload } from './AppStatusProvider'\r\nimport NetworkStatus from './NetworkStatus'\r\nimport PauseLinkButtons from './PauseLinkButtons'\r\nimport { pixelartIcons } from './PixelartIcon'\r\nimport LoadingTimer from './LoadingTimer'\r\n\r\nconst waitForPotentialRender = async () => {\r\n  return new Promise<void>(resolve => {\r\n    requestAnimationFrame(() => requestAnimationFrame(resolve as any))\r\n  })\r\n}\r\n\r\nexport const saveToBrowserMemory = async () => {\r\n  setLoadingScreenStatus('Saving world')\r\n  try {\r\n    await new Promise<void>(resolve => {\r\n      subscribeKey(appStatusState, 'isDisplaying', () => {\r\n        if (appStatusState.isDisplaying) {\r\n          resolve()\r\n        }\r\n      })\r\n    })\r\n    const worldFolder = fsState.inMemorySavePath\r\n    const saveRootPath = await uniqueFileNameFromWorldName(worldFolder.split('/').pop()!, `/data/worlds`)\r\n    await mkdirRecursive(saveRootPath)\r\n    console.log('made world folder', saveRootPath)\r\n    const allRootPaths = [...usedServerPathsV1]\r\n    const allFilesToCopy = [] as string[]\r\n    for (const dirBase of allRootPaths) {\r\n      // eslint-disable-next-line no-await-in-loop\r\n      if (dirBase.includes('.') && await fileExistsAsyncOptimized(join(worldFolder, dirBase))) {\r\n        allFilesToCopy.push(dirBase)\r\n        continue\r\n      }\r\n      // eslint-disable-next-line no-await-in-loop\r\n      let res = await collectFilesToCopy(join(worldFolder, dirBase), true)\r\n      if (dirBase === 'region') {\r\n        res = res.filter(x => x.endsWith('.mca'))\r\n      }\r\n      allFilesToCopy.push(...res.map(x => join(dirBase, x)))\r\n    }\r\n    console.log('paths collected')\r\n    const pathsSplitBasic = allFilesToCopy.filter(path => {\r\n      if (!path.startsWith('region/')) return true\r\n      const [x, z] = path.split('/').at(-1)!.split('.').slice(1, 3).map(Number)\r\n      return Math.abs(x) > 50 || Math.abs(z) > 50 // HACK: otherwise it's too big and we can't handle it in visual display\r\n    })\r\n    let copied = 0\r\n    let isRegionFiles = false\r\n    const upProgress = (totalSize: number) => {\r\n      copied++\r\n      let action = fsState.remoteBackend ? 'Downloading & copying' : 'Copying'\r\n      action += isRegionFiles ? ' region files (world chunks)' : ' basic save files'\r\n      setLoadingScreenStatus(`${action} files (${copied}/${totalSize})`)\r\n    }\r\n    const copyFiles = async (copyPaths: string[][]) => {\r\n      const totalSIze = copyPaths.flat().length\r\n      for (const copyFileGroup of copyPaths) {\r\n        // eslint-disable-next-line no-await-in-loop, @typescript-eslint/no-loop-func\r\n        await Promise.all(copyFileGroup.map(async (copyPath) => {\r\n          const srcPath = join(worldFolder, copyPath)\r\n          const savePath = join(saveRootPath, copyPath)\r\n          await mkdirRecursive(savePath)\r\n          await fs.promises.writeFile(savePath, await fs.promises.readFile(srcPath) as any)\r\n          upProgress(totalSIze)\r\n          if (isRegionFiles) {\r\n            const regionFile = copyPath.split('/').at(-1)!\r\n            appStatusState.loadingChunksData![regionFile] = 'done'\r\n          }\r\n        }))\r\n        // eslint-disable-next-line no-await-in-loop\r\n        await waitForPotentialRender()\r\n      }\r\n    }\r\n    // basic save files\r\n    await copyFiles(splitByCopySize(pathsSplitBasic))\r\n    setLoadingScreenStatus('Preparing world chunks copying')\r\n    await waitForPotentialRender()\r\n\r\n    // region files\r\n    isRegionFiles = true\r\n    copied = 0\r\n    const regionFiles = allFilesToCopy.filter(x => !pathsSplitBasic.includes(x))\r\n    const regionFilesNumbers = regionFiles.map(x => x.split('/').at(-1)!.split('.').slice(1, 3).map(Number))\r\n    const xMin = Math.min(...regionFilesNumbers.flatMap(x => x[0]))\r\n    const zMin = Math.min(...regionFilesNumbers.flatMap(x => x[1]))\r\n    const xMax = Math.max(...regionFilesNumbers.flatMap(x => x[0]))\r\n    const zMax = Math.max(...regionFilesNumbers.flatMap(x => x[1]))\r\n    const playerPosRegion = bot.entity.position.divide(new Vec3(32 * 16, 32 * 16, 32 * 16)).floored()\r\n    const maxDistantRegion = Math.max(\r\n      Math.abs(playerPosRegion.x - xMin),\r\n      Math.abs(playerPosRegion.z - zMin),\r\n      Math.abs(playerPosRegion.x - xMax),\r\n      Math.abs(playerPosRegion.z - zMax)\r\n    )\r\n    const spiral = generateSpiralMatrix(maxDistantRegion)\r\n    const filesWithSpiral = spiral.filter(x => allFilesToCopy.includes(`region/r.${x[0]}.${x[1]}.mca`)).map(x => `region/r.${x[0]}.${x[1]}.mca`)\r\n    if (filesWithSpiral.length !== regionFiles.length) throw new Error('Something went wrong with region files')\r\n\r\n    appStatusState.loadingChunksData = Object.fromEntries(regionFiles.map(x => [x.split('/').at(-1)!, 'loading']))\r\n    appStatusState.loadingChunksDataPlayerChunk = { x: playerPosRegion.x, z: playerPosRegion.z }\r\n    await copyFiles(splitByCopySize(filesWithSpiral, 10))\r\n\r\n    return saveRootPath\r\n  } catch (err) {\r\n    console.error(err)\r\n    void showOptionsModal(`Error while saving the world: ${err.message}`, [])\r\n  } finally {\r\n    setLoadingScreenStatus(undefined)\r\n  }\r\n}\r\n\r\nconst splitByCopySize = (files: string[], copySize = 15) => {\r\n  return files.reduce<string[][]>((acc, cur, i) => {\r\n    if (i % copySize === 0) {\r\n      acc.push([])\r\n    }\r\n    acc.at(-1)!.push(cur)\r\n    return acc\r\n  }, [])\r\n}\r\n\r\nexport default () => {\r\n  const lockConnect = appQueryParams.lockConnect === 'true'\r\n  const isModalActive = useIsModalActive('pause-screen')\r\n  const fsStateSnap = useSnapshot(fsState)\r\n  const activeModalStackSnap = useSnapshot(activeModalStack)\r\n  const { singleplayer, wanOpened, wanOpening } = useSnapshot(miscUiState)\r\n  const { noConnection } = useSnapshot(gameAdditionalState)\r\n  const { active: packetsReplaceActive, hasRecordedPackets: packetsReplaceHasRecordedPackets } = useSnapshot(packetsRecordingState)\r\n  const { displayRecordButton: displayPacketsButtons } = useSnapshot(options)\r\n  const { appConfig } = useSnapshot(miscUiState)\r\n\r\n  const handlePointerLockChange = () => {\r\n    if (!pointerLock.hasPointerLock && activeModalStack.length === 0) {\r\n      showModal({ reactType: 'pause-screen' })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('pointerlockchange', handlePointerLockChange)\r\n\r\n    return () => {\r\n      document.removeEventListener('pointerlockchange', handlePointerLockChange)\r\n    }\r\n  }, [])\r\n\r\n  const onReturnPress = () => {\r\n    hideModal({ reactType: 'pause-screen' })\r\n  }\r\n\r\n  const clickWebShareButton = async () => {\r\n    if (!wanOpened) return\r\n    try {\r\n      const url = getJoinLink()\r\n      const shareData = { url }\r\n      await navigator.share?.(shareData)\r\n    } catch (err) {\r\n      console.log(`Error: ${err}`)\r\n    }\r\n  }\r\n\r\n  const clickJoinLinkButton = async (qr = false) => {\r\n    if (!qr && wanOpened) {\r\n      closeWan()\r\n      return\r\n    }\r\n    if (!wanOpened || !qr) {\r\n      await openToWanAndCopyJoinLink((err) => {\r\n        if (!miscUiState.wanOpening) return\r\n        alert(`Something went wrong: ${err}`)\r\n      }, !qr)\r\n    }\r\n    if (qr) {\r\n      const joinLink = getJoinLink()\r\n      miscUiState.currentDisplayQr = joinLink ?? null\r\n    }\r\n  }\r\n\r\n  const openWorldActions = async () => {\r\n    if (fsStateSnap.inMemorySave || !singleplayer) {\r\n      return showOptionsModal('World actions...', [])\r\n    }\r\n    const action = await showOptionsModal('World actions...', ['Save to browser memory'])\r\n    if (action === 'Save to browser memory') {\r\n      const path = await saveToBrowserMemory()\r\n      if (!path) return\r\n      const saveName = path.split('/').at(-1)\r\n      showNotification(`World saved to ${saveName}`, 'Load it to keep your progress!')\r\n      // fsState.inMemorySave = true\r\n      // fsState.syncFs = false\r\n      // fsState.isReadonly = false\r\n      // fsState.remoteBackend = false\r\n    }\r\n  }\r\n\r\n  if (!isModalActive) return null\r\n\r\n  return <Screen title='Game Menu'>\r\n    <div style={{ position: 'fixed', top: '5px', left: 'calc(env(safe-area-inset-left) + 5px)', display: 'flex', flexDirection: 'column', gap: '5px' }}>\r\n      <Button\r\n        icon=\"pixelarticons:folder\"\r\n        onClick={async () => openWorldActions()}\r\n      />\r\n      {displayPacketsButtons && (\r\n        <>\r\n          <Button\r\n            icon={packetsReplaceActive ? 'pixelarticons:debug-stop' : 'pixelarticons:circle'}\r\n            onClick={() => {\r\n              packetsRecordingState.active = !packetsRecordingState.active\r\n            }}\r\n          />\r\n          {packetsReplaceHasRecordedPackets && (\r\n            <Button\r\n              icon={pixelartIcons['briefcase-download']}\r\n              onClick={async () => downloadPacketsReplay()}\r\n            />\r\n          )}\r\n          <Button\r\n            icon={pixelartIcons['download']}\r\n            onClick={async () => bot.downloadCurrentWorldState()}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n    <ErrorBoundary renderError={() => <div>error</div>}>\r\n      <div style={{ position: 'fixed', top: '5px', left: 'calc(env(safe-area-inset-left) + 35px)' }}>\r\n        <NetworkStatus />\r\n      </div>\r\n    </ErrorBoundary>\r\n    <div className={styles.pause_container}>\r\n      <Button className=\"button\" style={{ width: '204px' }} onClick={onReturnPress}>Back to Game</Button>\r\n      <PauseLinkButtons />\r\n      <Button className=\"button\" style={{ width: '204px' }} onClick={() => openOptionsMenu('main')}>Options...</Button>\r\n      {singleplayer ? (\r\n        <div className={styles.row}>\r\n          <Button className=\"button\" style={{ width: '170px' }} onClick={async () => clickJoinLinkButton()}>\r\n            {wanOpening ? 'Opening, wait...' : wanOpened ? 'Close Wan' : 'Copy Join Link'}\r\n          </Button>\r\n          {(navigator.share as typeof navigator.share | undefined) ? (\r\n            <Button\r\n              title=\"Share Join Link\"\r\n              className=\"button\"\r\n              icon=\"pixelarticons:arrow-up\"\r\n              style={{ width: '20px' }}\r\n              onClick={async () => clickWebShareButton()}\r\n            />\r\n          ) : null}\r\n          <Button\r\n            title='Display QR for the Join Link'\r\n            className=\"button\"\r\n            icon=\"pixelarticons:dice\"\r\n            style={{ width: '20px' }}\r\n            onClick={async () => clickJoinLinkButton(true)}\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {(noConnection || appConfig?.alwaysReconnectButton) && (\r\n        <div className={styles.row}>\r\n          <Button className=\"button\" style={{ width: appConfig?.reportBugButtonWithReconnect ? '98px' : '204px' }} onClick={reconnectReload}>\r\n            Reconnect\r\n          </Button>\r\n          {appConfig?.reportBugButtonWithReconnect && (\r\n            <Button\r\n              label=\"Report Problem\"\r\n              className=\"button\"\r\n              style={{ width: '98px' }}\r\n              onClick={async () => {\r\n                const platform = (navigator as any).userAgentData?.platform ?? navigator.platform\r\n                const body = `Version: ${window.location.hostname}\\nServer: ${lastConnectOptions.value?.server ?? '<not a server>'}\\nPlatform: ${platform}\\nWebsite: ${window.location.href}`\r\n                const currentHost = window.location.hostname\r\n                const options = [\r\n                  'GitHub (please use it if you can)',\r\n                  'Email',\r\n                  ...((currentHost === 'mcraft.fun' || currentHost === 'ru.mcraft.fun') ? ['Try Beta Version'] : []),\r\n                  // 'Use previous versions of client'\r\n                ]\r\n                const action = await showOptionsModal('Report client issue', options)\r\n                if (!action) return\r\n\r\n                switch (action) {\r\n                  case 'GitHub (please use it if you can)':\r\n                    openGithub(`/issues/new?body=${encodeURIComponent(body)}&title=${encodeURIComponent('[Bug Report] <describe your issue here>')}&labels=bug`)\r\n                    break\r\n                  case 'Email': {\r\n                    window.location.href = `mailto:support@mcraft.fun?body=${encodeURIComponent(body)}`\r\n                    break\r\n                  }\r\n                  case 'Try Beta Version': {\r\n                    if (currentHost === 'mcraft.fun') {\r\n                      window.location.href = 'https://s.mcraft.fun'\r\n                    }\r\n                    break\r\n                  }\r\n                  case 'Use previous versions of client':\r\n                    // TODO: Implement versions screen\r\n                    void showOptionsModal('Previous versions', [])\r\n                    break\r\n                }\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n      {!lockConnect && <>\r\n        <Button className=\"button\" style={{ width: '204px' }} onClick={disconnect}>\r\n          {fsState.inMemorySave && !fsState.syncFs && !fsState.isReadonly ? 'Save & Quit' : 'Disconnect & Reset'}\r\n        </Button>\r\n      </>}\r\n    </div>\r\n    <LoadingTimer />\r\n  </Screen>\r\n}\r\n","import { useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { hideCurrentModal } from '../globalState'\r\nimport { lastPlayedSounds } from '../sounds/botSoundSystem'\r\nimport { options } from '../optionsStorage'\r\nimport Button from './Button'\r\nimport Screen from './Screen'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nconst SoundRow = ({ sound, children }) => {\r\n  const { mutedSounds } = useSnapshot(options)\r\n\r\n  const isMuted = mutedSounds.includes(sound)\r\n\r\n  return <div style={{ display: 'flex', justifyContent: 'space-between', gap: 15 }}>\r\n    <div>\r\n      <span style={{ fontSize: 12, marginRight: 2, ...isMuted ? { color: '#af1c1c' } : {} }}>{sound}</span>\r\n      {children}\r\n    </div>\r\n    <Button\r\n      icon={isMuted ? 'pixelarticons:music' : 'pixelarticons:close'} onClick={() => {\r\n        if (isMuted) {\r\n          options.mutedSounds.splice(options.mutedSounds.indexOf(sound), 1)\r\n        } else {\r\n          options.mutedSounds.push(sound)\r\n        }\r\n      }}\r\n    />\r\n  </div>\r\n}\r\n\r\nexport default () => {\r\n  const isModalActive = useIsModalActive('sound-muffler')\r\n\r\n  const [showMuted, setShowMuted] = useState(true)\r\n  const [i, setI] = useState(0)\r\n  const { mutedSounds } = useSnapshot(options)\r\n\r\n  if (!isModalActive) return null\r\n\r\n  return <Screen title='Sound Muffler' backdrop>\r\n    <div style={{ display: 'flex', gap: 5, flexDirection: 'column' }}>\r\n      <Button onClick={() => setI(i => i + 1)}>Refresh</Button>\r\n      <Button onClick={() => setShowMuted(s => !s)}>Show Muted: {showMuted ? 'ON' : 'OFF'}</Button>\r\n      <span style={{ padding: '3px 0' }}>Last World Played</span>\r\n      {Object.entries(lastPlayedSounds.lastServerPlayed).map(([key, value]) => {\r\n        if (!showMuted && mutedSounds.includes(key)) return null\r\n        return [key, value.count] as const\r\n      }).filter(a => !!a).sort((a, b) => b[1] - a[1]).slice(0, 20).map(([key, count]) => {\r\n        return <SoundRow key={key} sound={key}>\r\n          <span style={{ fontSize: 12, fontWeight: 'bold' }}>{count}</span>\r\n        </SoundRow>\r\n      })}\r\n      <span style={{ padding: '3px 0' }}>Last Client Played</span>\r\n      {lastPlayedSounds.lastClientPlayed.map((key) => {\r\n        if (!showMuted && mutedSounds.includes(key)) return null\r\n        return <SoundRow key={key} sound={key} children={undefined} />\r\n      })}\r\n      <Button onClick={() => hideCurrentModal()}>Back</Button>\r\n    </div>\r\n  </Screen>\r\n}\r\n","import { LeftTouchArea, RightTouchArea, useInterfaceState } from '@dimaka/interface'\r\nimport { css } from '@emotion/css'\r\nimport { useSnapshot } from 'valtio'\r\nimport { contro } from '../controls'\r\nimport { miscUiState, activeModalStack } from '../globalState'\r\nimport { watchValue, options } from '../optionsStorage'\r\nimport { useUsingTouch } from './utilsApp'\r\n\r\n// todo\r\nuseInterfaceState.setState({\r\n  isFlying: false,\r\n  uiCustomization: {\r\n    touchButtonSize: 40,\r\n  },\r\n  updateCoord ([coord, state]) {\r\n    const coordToAction = [\r\n      ['z', -1, 'KeyW'],\r\n      ['z', 1, 'KeyS'],\r\n      ['x', -1, 'KeyA'],\r\n      ['x', 1, 'KeyD'],\r\n      ['y', 1, 'Space'], // todo jump\r\n      ['y', -1, 'ShiftLeft'], // todo jump\r\n    ]\r\n    // todo refactor\r\n    const actionAndState = state === 0 ? coordToAction.filter(([axis]) => axis === coord) : coordToAction.find(([axis, value]) => axis === coord && value === state)\r\n    if (!bot) return\r\n    if (state === 0) {\r\n      // @ts-expect-error\r\n      for (const action of actionAndState) {\r\n        contro.pressedKeyOrButtonChanged({ code: action[2] }, false)\r\n      }\r\n    } else {\r\n      //@ts-expect-error\r\n      contro.pressedKeyOrButtonChanged({ code: actionAndState[2] }, true)\r\n    }\r\n  }\r\n})\r\n\r\nwatchValue(options, (o) => {\r\n  useInterfaceState.setState({\r\n    uiCustomization: {\r\n      touchButtonSize: o.touchButtonsSize,\r\n    },\r\n  })\r\n})\r\n\r\nexport default () => {\r\n  // todo setting\r\n  const usingTouch = useUsingTouch()\r\n  const { usingGamepadInput } = useSnapshot(miscUiState)\r\n  const modals = useSnapshot(activeModalStack)\r\n  const { touchMovementType } = useSnapshot(options)\r\n\r\n  if (!usingTouch || usingGamepadInput || touchMovementType !== 'classic') return null\r\n  return (\r\n    <div\r\n      style={{ zIndex: modals.length ? 7 : 8 }}\r\n      className={css`\r\n        position: fixed;\r\n        bottom: 0;\r\n        /* height: 100%; */\r\n        display: flex;\r\n        width: 100%;\r\n        justify-content: space-between;\r\n        align-items: flex-end;\r\n        pointer-events: none;\r\n        touch-action: none;\r\n        & > div {\r\n            pointer-events: auto;\r\n        }\r\n    `}\r\n    >\r\n      <LeftTouchArea />\r\n      <div />\r\n      <RightTouchArea />\r\n    </div>\r\n  )\r\n}\r\n","import { useSnapshot } from 'valtio'\r\nimport { miscUiState } from '../globalState'\r\nimport Input from './Input'\r\n\r\nfunction InnerSearch () {\r\n  const { currentTouch } = useSnapshot(miscUiState)\r\n\r\n  return <div style={{\r\n    position: 'fixed',\r\n    top: 5,\r\n    left: 0,\r\n    right: 0,\r\n    margin: 'auto',\r\n    zIndex: 11,\r\n    width: 'min-content',\r\n    transform: 'scale(1.5)'\r\n  }}\r\n  >\r\n    <Input\r\n      autoFocus={currentTouch === false}\r\n      placeholder='Search...'\r\n      onChange={({ target: { value } }) => {\r\n        customEvents.emit('search', value)\r\n      }}\r\n    />\r\n  </div>\r\n}\r\n\r\n// todo remove component as its not possible to reuse this component atm\r\nexport default () => {\r\n  const { displaySearchInput } = useSnapshot(miscUiState)\r\n\r\n  return displaySearchInput ? <InnerSearch /> : null\r\n}\r\n","import { CSSProperties, PointerEvent, useEffect, useRef, useState } from 'react'\r\nimport { proxy, ref, useSnapshot } from 'valtio'\r\nimport activatableItemsMobile from 'mineflayer-mouse/dist/activatableItemsMobile'\r\nimport { contro } from '../controls'\r\nimport { options } from '../optionsStorage'\r\nimport PixelartIcon from './PixelartIcon'\r\nimport Button from './Button'\r\nimport Slider from './Slider'\r\n\r\nexport type ButtonName = 'action' | 'sneak' | 'break' | 'jump'\r\n\r\ntype ButtonsPositions = Record<ButtonName, [number, number]>\r\n\r\nconst getCurrentAppScaling = () => {\r\n  // body has css property --guiScale\r\n  const guiScale = getComputedStyle(document.body).getPropertyValue('--guiScale')\r\n  return parseFloat(guiScale)\r\n}\r\n\r\nexport const joystickPointer = proxy({\r\n  pointer: null as { x: number, y: number, pointerId: number } | null,\r\n  joystickInner: null as HTMLDivElement | null,\r\n})\r\n\r\nexport const handleMovementStickDelta = (e?: { clientX, clientY }) => {\r\n  const max = 32\r\n  let x = 0\r\n  let y = 0\r\n  if (e) {\r\n    const scale = getCurrentAppScaling()\r\n    x = e.clientX - joystickPointer.pointer!.x\r\n    y = e.clientY - joystickPointer.pointer!.y\r\n    x = Math.min(Math.max(x, -max), max) / scale\r\n    y = Math.min(Math.max(y, -max), max) / scale\r\n  }\r\n\r\n  joystickPointer.joystickInner!.style.transform = `translate(${x}px, ${y}px)`\r\n  const vector = {\r\n    x: x / max,\r\n    y: 0,\r\n    z: y / max,\r\n  }\r\n  void contro.emit('movementUpdate', {\r\n    vector,\r\n    soleVector: vector\r\n  })\r\n}\r\n\r\ntype Props = {\r\n  setupActive: boolean\r\n  closeButtonsSetup: (newPositions?: ButtonsPositions) => void\r\n  foregroundGameActive: boolean\r\n}\r\n\r\nconst Z_INDEX_INTERACTIBLE = 8\r\n\r\nexport default ({ setupActive, closeButtonsSetup, foregroundGameActive }: Props) => {\r\n  const bot = window.bot as typeof __type_bot | undefined\r\n  const { touchControlsPositions, touchMovementType, touchInteractionType, touchControlsSize } = useSnapshot(options)\r\n  const buttonsPositions = touchControlsPositions as ButtonsPositions\r\n  const [selectedButton, setSelectedButton] = useState<ButtonName | 'joystick' | null>(null)\r\n\r\n  const joystickOuter = useRef<HTMLDivElement>(null)\r\n  const joystickInner = useRef<HTMLDivElement>(null)\r\n\r\n  const { pointer } = useSnapshot(joystickPointer)\r\n  const newButtonPositions = { ...buttonsPositions }\r\n\r\n  const buttonProps = (name: ButtonName) => {\r\n    let active = {\r\n      action: false,\r\n      sneak: bot?.getControlState('sneak'),\r\n      break: false,\r\n      jump: bot?.getControlState('jump'),\r\n    }[name]\r\n    const RIGHT_MOUSE_BUTTON = 2\r\n    const LEFT_MOUSE_BUTTON = 0\r\n    const holdDown = {\r\n      action () {\r\n        if (!bot) return\r\n        document.dispatchEvent(new MouseEvent('mousedown', { button: RIGHT_MOUSE_BUTTON }))\r\n        bot.mouse.update()\r\n      },\r\n      sneak () {\r\n        void contro.emit('trigger', {\r\n          command: 'general.toggleSneakOrDown',\r\n          schema: null as any,\r\n        })\r\n        active = bot?.getControlState('sneak')\r\n      },\r\n      break () {\r\n        if (!bot) return\r\n        document.dispatchEvent(new MouseEvent('mousedown', { button: LEFT_MOUSE_BUTTON }))\r\n        bot.mouse.update()\r\n        active = true\r\n      },\r\n      jump () {\r\n        void contro.emit('trigger', {\r\n          command: 'general.jump',\r\n          schema: null as any,\r\n        })\r\n        active = bot?.controlState.jump\r\n      }\r\n    }\r\n    const holdUp = {\r\n      action () {\r\n        document.dispatchEvent(new MouseEvent('mouseup', { button: RIGHT_MOUSE_BUTTON }))\r\n      },\r\n      sneak () {\r\n        void contro.emit('release', {\r\n          command: 'general.toggleSneakOrDown',\r\n          schema: null as any,\r\n        })\r\n        active = bot?.getControlState('sneak')\r\n      },\r\n      break () {\r\n        if (!bot) return\r\n        document.dispatchEvent(new MouseEvent('mouseup', { button: LEFT_MOUSE_BUTTON }))\r\n        bot.mouse.update()\r\n        active = false\r\n      },\r\n      jump () {\r\n        void contro.emit('release', {\r\n          command: 'general.jump',\r\n          schema: null as any,\r\n        })\r\n        active = bot?.controlState.jump\r\n      }\r\n    }\r\n\r\n    type PType = PointerEvent<HTMLDivElement>\r\n    const pointerup = (e: PType) => {\r\n      const elem = e.currentTarget as HTMLElement\r\n      console.log(e.type, elem.hasPointerCapture(e.pointerId))\r\n      elem.releasePointerCapture(e.pointerId)\r\n      if (!setupActive) {\r\n        holdUp[name]()\r\n        pointerToggledUpdate(e)\r\n      }\r\n    }\r\n    const pointerToggledUpdate = (e) => {\r\n      e.currentTarget.style.background = active ? 'rgba(0, 0, 0, 0.8)' : 'rgba(0, 0, 0, 0.5)'\r\n    }\r\n    let setupPointer = null as { x, y } | null\r\n    return {\r\n      style: {\r\n        position: 'fixed',\r\n        left: `${buttonsPositions[name][0]}%`,\r\n        top: `${buttonsPositions[name][1]}%`,\r\n        borderRadius: '50%',\r\n        width: `${touchControlsSize[name]}px`,\r\n        height: `${touchControlsSize[name]}px`,\r\n        background: active ? 'rgba(0, 0, 0, 0.8)' : 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        transition: 'background 0.1s',\r\n        zIndex: Z_INDEX_INTERACTIBLE,\r\n        ...(setupActive && selectedButton === name ? {\r\n          border: '2px solid white',\r\n        } : {}),\r\n      } satisfies CSSProperties,\r\n      onPointerDown (e: PType) {\r\n        const elem = e.currentTarget as HTMLElement\r\n        elem.setPointerCapture(e.pointerId)\r\n        if (setupActive) {\r\n          setSelectedButton(name)\r\n          setupPointer = { x: e.clientX, y: e.clientY }\r\n        } else {\r\n          holdDown[name]()\r\n          pointerToggledUpdate(e)\r\n        }\r\n      },\r\n      onPointerMove (e: PType) {\r\n        if (setupPointer) {\r\n          const elem = e.currentTarget as HTMLElement\r\n          const size = 32\r\n          const scale = getCurrentAppScaling()\r\n          const xPerc = (e.clientX - (size * scale) / 2) / window.innerWidth * 100\r\n          const yPerc = (e.clientY - (size * scale) / 2) / window.innerHeight * 100\r\n          elem.style.left = `${xPerc}%`\r\n          elem.style.top = `${yPerc}%`\r\n          newButtonPositions[name] = [xPerc, yPerc]\r\n        }\r\n      },\r\n      onPointerUp: pointerup,\r\n      // onPointerCancel: pointerup,\r\n      onLostPointerCapture: pointerup,\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    joystickPointer.joystickInner = joystickInner.current && ref(joystickInner.current)\r\n    // todo antipattern\r\n  }, [foregroundGameActive])\r\n\r\n  if (!foregroundGameActive && !setupActive) return null\r\n\r\n  return <div>\r\n    {setupActive && (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: '0',\r\n        left: '50%',\r\n        transform: 'translateX(-50%)',\r\n        zIndex: Z_INDEX_INTERACTIBLE + 1,\r\n      }}>\r\n        <Slider\r\n          label={selectedButton ? `Size: ${selectedButton}` : 'Change button size'}\r\n          value={selectedButton ? touchControlsSize[selectedButton] : 32}\r\n          min={15}\r\n          max={100}\r\n          disabledReason={selectedButton ? undefined : 'Select a button first'}\r\n          updateValue={(value) => {\r\n            if (selectedButton) {\r\n              options.touchControlsSize[selectedButton] = value\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n    )}\r\n    {touchMovementType === 'modern' && (\r\n      <div\r\n        className='movement_joystick_outer'\r\n        ref={joystickOuter}\r\n        style={{\r\n          display: pointer || setupActive ? 'flex' : 'none',\r\n          borderRadius: '50%',\r\n          width: touchControlsSize.joystick,\r\n          height: touchControlsSize.joystick,\r\n          border: '2px solid rgba(0, 0, 0, 0.5)',\r\n          backgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n          position: 'fixed',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          translate: '-50% -50%',\r\n          ...(setupActive ? {\r\n            left: '20%',\r\n            top: '50%',\r\n            cursor: 'pointer',\r\n            ...(selectedButton === 'joystick' ? {\r\n              border: '2px solid white',\r\n            } : {}),\r\n          } : pointer ? {\r\n            left: `${pointer.x / window.innerWidth * 100}%`,\r\n            top: `${pointer.y / window.innerHeight * 100}%`\r\n          } : {}),\r\n        }}\r\n        onClick={() => {\r\n          if (setupActive) {\r\n            setSelectedButton('joystick')\r\n          }\r\n        }}\r\n      >\r\n        <div\r\n          className='movement_joystick_inner'\r\n          style={{\r\n            borderRadius: '50%',\r\n            width: touchControlsSize.joystick * 0.35,\r\n            height: touchControlsSize.joystick * 0.35,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n            position: 'absolute',\r\n          }}\r\n          ref={joystickInner}\r\n        />\r\n      </div>\r\n    )}\r\n    {touchMovementType === 'modern' && (\r\n      <>\r\n        <div {...buttonProps('sneak')}>\r\n          <PixelartIcon iconName='arrow-down' />\r\n        </div>\r\n        <div {...buttonProps('jump')}>\r\n          <PixelartIcon iconName='arrow-up' />\r\n        </div>\r\n      </>\r\n    )}\r\n    {touchInteractionType === 'buttons' && (\r\n      <>\r\n        <div {...buttonProps('action')}>\r\n          <PixelartIcon iconName='circle' />\r\n        </div>\r\n        <div {...buttonProps('break')}>\r\n          <MineIcon />\r\n        </div>\r\n      </>\r\n    )}\r\n    {setupActive && <div style={{\r\n      position: 'fixed',\r\n      bottom: 0,\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      gap: 3\r\n    }}\r\n    >\r\n      <Button onClick={() => {\r\n        closeButtonsSetup()\r\n      }}\r\n      >Cancel\r\n      </Button>\r\n      <Button onClick={() => {\r\n        closeButtonsSetup(newButtonPositions)\r\n      }}\r\n      >Apply\r\n      </Button>\r\n    </div>}\r\n  </div>\r\n}\r\n\r\nconst MineIcon = () => {\r\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26 26\" width={22} height={22}>\r\n    <path d=\"M 8 0 L 8 2 L 18 2 L 18 0 L 8 0 z M 18 2 L 18 4 L 20 4 L 20 6 L 22 6 L 22 8 L 24 8 L 24 2 L 22 2 L 18 2 z M 24 8 L 24 18 L 26 18 L 26 8 L 24 8 z M 24 18 L 22 18 L 22 20 L 24 20 L 24 18 z M 22 18 L 22 10 L 20 10 L 20 18 L 22 18 z M 20 10 L 20 8 L 18 8 L 18 10 L 20 10 z M 18 10 L 16 10 L 16 12 L 18 12 L 18 10 z M 16 12 L 14 12 L 14 14 L 16 14 L 16 12 z M 14 14 L 12 14 L 12 16 L 14 16 L 14 14 z M 12 16 L 10 16 L 10 18 L 12 18 L 12 16 z M 10 18 L 8 18 L 8 20 L 10 20 L 10 18 z M 8 20 L 6 20 L 6 22 L 8 22 L 8 20 z M 6 22 L 4 22 L 4 24 L 6 24 L 6 22 z M 4 24 L 2 24 L 2 22 L 0 22 L 0 24 L 0 26 L 2 26 L 4 26 L 4 24 z M 2 22 L 4 22 L 4 20 L 2 20 L 2 22 z M 4 20 L 6 20 L 6 18 L 4 18 L 4 20 z M 6 18 L 8 18 L 8 16 L 6 16 L 6 18 z M 8 16 L 10 16 L 10 14 L 8 14 L 8 16 z M 10 14 L 12 14 L 12 12 L 10 12 L 10 14 z M 12 12 L 14 12 L 14 10 L 12 10 L 12 12 z M 14 10 L 16 10 L 16 8 L 14 8 L 14 10 z M 16 8 L 18 8 L 18 6 L 16 6 L 16 8 z M 16 6 L 16 4 L 8 4 L 8 6 L 16 6 z M 8 4 L 8 2 L 6 2 L 6 4 L 8 4 z\" stroke='white' />\r\n  </svg>\r\n}\r\n","import { useSnapshot } from 'valtio'\r\nimport { activeModalStack, hideModal } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\nimport TouchAreasControls from './TouchAreasControls'\r\nimport { useIsModalActive, useUsingTouch } from './utilsApp'\r\n\r\nexport default () => {\r\n  const usingTouch = useUsingTouch()\r\n  const hasModals = useSnapshot(activeModalStack).length !== 0\r\n  const setupActive = useIsModalActive('touch-buttons-setup')\r\n\r\n  return <TouchAreasControls\r\n    foregroundGameActive={!!bot && !!usingTouch && !hasModals}\r\n    setupActive={setupActive}\r\n    closeButtonsSetup={(newPositions) => {\r\n      if (newPositions) {\r\n        options.touchControlsPositions = newPositions\r\n      }\r\n      hideModal()\r\n    }}\r\n  />\r\n}\r\n","import { subscribe } from 'valtio'\r\nimport { miscUiState } from './globalState'\r\n\r\nlet toCleanup = [] as Array<() => void>\r\n\r\nexport const watchUnloadForCleanup = (func: () => void) => {\r\n  toCleanup.push(func)\r\n}\r\n\r\nsubscribe(miscUiState, () => {\r\n  if (!miscUiState.gameLoaded) {\r\n    for (const func of toCleanup) {\r\n      func()\r\n    }\r\n    toCleanup = []\r\n  }\r\n})\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { createPortal } from 'react-dom'\r\nimport { subscribe, useSnapshot } from 'valtio'\r\nimport { openItemsCanvas, upInventoryItems } from '../inventoryWindows'\r\nimport { activeModalStack, isGameActive, miscUiState } from '../globalState'\r\nimport { currentScaling } from '../scaleInterface'\r\nimport { watchUnloadForCleanup } from '../gameUnload'\r\nimport { getItemNameRaw } from '../mineflayer/items'\r\nimport { isInRealGameSession } from '../utils'\r\nimport { triggerCommand } from '../controls'\r\nimport MessageFormattedString from './MessageFormattedString'\r\nimport SharedHudVars from './SharedHudVars'\r\n\r\n\r\nconst ItemName = ({ itemKey }: { itemKey: string }) => {\r\n  const [show, setShow] = useState(false)\r\n  const [itemName, setItemName] = useState<Record<string, any> | string>('')\r\n\r\n  const duration = 0.3\r\n\r\n  const defaultStyle: React.CSSProperties = {\r\n    position: 'fixed',\r\n    bottom: `calc(env(safe-area-inset-bottom) + ${bot ? bot.game.gameMode === 'creative' ? '40px' : '50px' : '50px'})`,\r\n    left: 0,\r\n    right: 0,\r\n    fontSize: 10,\r\n    textAlign: 'center',\r\n    pointerEvents: 'none',\r\n  }\r\n\r\n  useEffect(() => {\r\n    const item = bot.heldItem\r\n    if (item) {\r\n      const customDisplay = getItemNameRaw(item, appViewer.resourcesManager)\r\n      if (customDisplay) {\r\n        setItemName(customDisplay)\r\n      } else {\r\n        setItemName(item.displayName)\r\n      }\r\n    } else {\r\n      setItemName('')\r\n    }\r\n    setShow(true)\r\n    const id = setTimeout(() => {\r\n      setShow(false)\r\n    }, 1500)\r\n    return () => {\r\n      setShow(false)\r\n      clearTimeout(id)\r\n    }\r\n  }, [itemKey])\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {show && (\r\n        <SharedHudVars>\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration }}\r\n            style={defaultStyle}\r\n            className='item-display-name'\r\n          >\r\n            <MessageFormattedString message={itemName} />\r\n          </motion.div>\r\n        </SharedHudVars>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n\r\nconst HotbarInner = () => {\r\n  const container = useRef<HTMLDivElement>(null!)\r\n  const [itemKey, setItemKey] = useState('')\r\n  const hasModals = useSnapshot(activeModalStack).length\r\n  const { currentTouch, appConfig } = useSnapshot(miscUiState)\r\n  const mobileOpenInventory = currentTouch && !appConfig?.disabledCommands?.includes('general.inventory')\r\n\r\n  useEffect(() => {\r\n    const controller = new AbortController()\r\n\r\n    const inv = openItemsCanvas('HotbarWin', {\r\n      _client: {\r\n        write () {}\r\n      },\r\n      clickWindow (slot, mouseButton, mode) {\r\n        if (mouseButton === 1) {\r\n          console.log('right click')\r\n          return\r\n        }\r\n        const hotbarSlot = slot - bot.inventory.hotbarStart\r\n        if (hotbarSlot < 0 || hotbarSlot > 8) return\r\n        bot.setQuickBarSlot(hotbarSlot)\r\n      },\r\n    } as any)\r\n    const { canvasManager } = inv\r\n    inv.inventory.supportsOffhand = !bot.supportFeature('doesntHaveOffHandSlot')\r\n    inv.pwindow.disablePicking = true\r\n\r\n    canvasManager.children[0].disableHighlight = true\r\n    canvasManager.minimizedWindow = true\r\n    canvasManager.minimizedWindow = true\r\n\r\n    function setSize () {\r\n      canvasManager.setScale(currentScaling.scale)\r\n\r\n      canvasManager.windowHeight = 25 * canvasManager.scale\r\n      canvasManager.windowWidth = (210 - (inv.inventory.supportsOffhand ? 0 : 25) + (mobileOpenInventory ? 28 : 0)) * canvasManager.scale\r\n    }\r\n    setSize()\r\n    watchUnloadForCleanup(subscribe(currentScaling, setSize))\r\n    inv.canvas.style.pointerEvents = 'auto'\r\n    container.current.appendChild(inv.canvas)\r\n    const upHotbarItems = () => {\r\n      if (!appViewer.resourcesManager?.itemsAtlasParser) return\r\n      globalThis.debugHotbarItems = upInventoryItems(true, inv)\r\n    }\r\n\r\n    canvasManager.canvas.onclick = (e) => {\r\n      if (!isGameActive(true)) return\r\n      const pos = inv.canvasManager.getMousePos(inv.canvas, e)\r\n      if (canvasManager.canvas.width - pos.x < 35 * inv.canvasManager.scale && mobileOpenInventory) {\r\n        triggerCommand('general.inventory', true)\r\n        triggerCommand('general.inventory', false)\r\n      }\r\n    }\r\n\r\n    globalThis.debugUpHotbarItems = upHotbarItems\r\n    upHotbarItems()\r\n    bot.inventory.on('updateSlot', upHotbarItems)\r\n    appViewer.resourcesManager.on('assetsTexturesUpdated', upHotbarItems)\r\n    appViewer.resourcesManager.on('assetsInventoryReady', () => {\r\n      upHotbarItems()\r\n    })\r\n\r\n    const setSelectedSlot = (index: number) => {\r\n      if (index === bot.quickBarSlot) return\r\n      bot.setQuickBarSlot(index)\r\n      if (!bot.inventory.slots?.[bot.quickBarSlot + 36]) setItemKey('')\r\n    }\r\n    const heldItemChanged = () => {\r\n      inv.inventory.activeHotbarSlot = bot.quickBarSlot\r\n\r\n      if (!bot.inventory.slots?.[bot.quickBarSlot + 36]) {\r\n        setItemKey('')\r\n        return\r\n      }\r\n      const item = bot.inventory.slots[bot.quickBarSlot + 36]!\r\n      const itemNbt = item.nbt ? JSON.stringify(item.nbt) : ''\r\n      setItemKey(`${item.name}_split_${item.type}_split_${item.metadata}_split_${itemNbt}_split_${JSON.stringify(item['components'] ?? [])}`)\r\n    }\r\n    heldItemChanged()\r\n    bot.on('heldItemChanged' as any, heldItemChanged)\r\n\r\n    document.addEventListener('wheel', (e) => {\r\n      if (!isInRealGameSession()) return\r\n      e.preventDefault()\r\n      const newSlot = ((bot.quickBarSlot + Math.sign(e.deltaY)) % 9 + 9) % 9\r\n      setSelectedSlot(newSlot)\r\n    }, {\r\n      passive: false,\r\n      signal: controller.signal\r\n    })\r\n\r\n    document.addEventListener('keydown', (e) => {\r\n      if (!isInRealGameSession()) return\r\n      const numPressed = +((/Digit(\\d)/.exec(e.code))?.[1] ?? -1)\r\n      if (numPressed < 1 || numPressed > 9) return\r\n      setSelectedSlot(numPressed - 1)\r\n    }, {\r\n      passive: false,\r\n      signal: controller.signal\r\n    })\r\n\r\n    let touchStart = 0\r\n    document.addEventListener('touchstart', (e) => {\r\n      if ((e.target as HTMLElement).closest('.hotbar')) {\r\n        touchStart = Date.now()\r\n      } else {\r\n        touchStart = 0\r\n      }\r\n    })\r\n    document.addEventListener('touchend', (e) => {\r\n      if (touchStart && (e.target as HTMLElement).closest('.hotbar') && Date.now() - touchStart > 700) {\r\n        triggerCommand('general.dropStack', true)\r\n        triggerCommand('general.dropStack', false)\r\n      }\r\n      touchStart = 0\r\n    })\r\n\r\n    return () => {\r\n      inv.destroy()\r\n      controller.abort()\r\n      appViewer.resourcesManager.off('assetsTexturesUpdated', upHotbarItems)\r\n    }\r\n  }, [])\r\n\r\n  return <SharedHudVars>\r\n    <ItemName itemKey={itemKey} />\r\n    <Portal>\r\n      <div\r\n        className='hotbar-fullscreen-container'\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100dvw',\r\n          height: '100dvh',\r\n          zIndex: hasModals ? 1 : 8,\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          pointerEvents: 'none',\r\n        }}>\r\n        <div\r\n          className='hotbar'\r\n          ref={container}\r\n          style={{\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            bottom: 'var(--hud-bottom-raw)'\r\n          }}\r\n        />\r\n      </div>\r\n    </Portal>\r\n  </SharedHudVars>\r\n}\r\n\r\nexport default () => {\r\n  const [gameMode, setGameMode] = useState(bot.game?.gameMode ?? 'creative')\r\n  useEffect(() => {\r\n    bot.on('game', () => {\r\n      setGameMode(bot.game.gameMode)\r\n    })\r\n  }, [])\r\n\r\n  return gameMode === 'spectator' ? null : <HotbarInner />\r\n}\r\n\r\nconst Portal = ({ children, to = document.body }) => {\r\n  return createPortal(children, to)\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport './Crosshair.css'\r\nimport { proxy, useSnapshot } from 'valtio'\r\nimport SharedHudVars from './SharedHudVars'\r\n\r\n// todo move to mineflayer\r\nexport const itemBeingUsed = proxy({\r\n  name: null as string | null,\r\n  hand: 0 as 0 | 1\r\n})\r\n\r\nexport default () => {\r\n  const { name: usingItem, hand } = useSnapshot(itemBeingUsed)\r\n\r\n  const [displayIndicator, setDisplayIndicator] = useState(false)\r\n  const [indicatorProgress, setIndicatorProgress] = useState(0)\r\n  const [alternativeIndicator, setAlternativeIndicator] = useState(false)\r\n  const boxMaxTimeMs = 1000\r\n  // todo add sword indicator\r\n  const indicatorSize = 20\r\n\r\n  useEffect(() => {\r\n    bot.on('heldItemChanged' as any, () => {\r\n      const displayBar = (item: import('prismarine-item').Item | null) => {\r\n        const itemName = item?.name\r\n        if (!itemName) return\r\n        return loadedData.foodsArray.map((food) => food.name).includes(itemName) || itemName === 'bow' || itemName === 'shield' || itemName === 'crossbow'\r\n      }\r\n      setDisplayIndicator(displayBar(bot.heldItem) || displayBar(bot.inventory.slots[45]) || false)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setAlternativeIndicator(usingItem === 'shield')\r\n    if (!usingItem) return\r\n    const startTime = Date.now()\r\n    let maxTime = 0\r\n    if (usingItem === 'bow' || usingItem === 'crossbow') {\r\n      maxTime = 1000\r\n    }\r\n    const isFood = loadedData.foodsArray.some((food) => food.name === usingItem)\r\n    if (isFood) {\r\n      maxTime = 32 * 50\r\n    }\r\n    if (!maxTime) return\r\n\r\n    const id = setInterval(() => {\r\n      const progress = (Date.now() - startTime) / boxMaxTimeMs\r\n      if (progress >= 1) {\r\n        clearInterval(id)\r\n      } else {\r\n        setIndicatorProgress(progress)\r\n      }\r\n    }, 1000 / 60)\r\n    return () => {\r\n      setIndicatorProgress(0)\r\n      clearInterval(id)\r\n    }\r\n  }, [usingItem])\r\n\r\n  return <SharedHudVars>\r\n    <div className='crosshair' />\r\n    {displayIndicator && <div\r\n      className='crosshair-indicator' style={{\r\n      //@ts-expect-error\r\n        '--crosshair-indicator-size': `${indicatorSize}px`,\r\n        borderLeft: `solid ${indicatorSize * indicatorProgress}px white`,\r\n        backgroundColor: alternativeIndicator ? 'dodgerblue' : undefined,\r\n      }}\r\n    />}\r\n  </SharedHudVars>\r\n}\r\n","import { loadSound, playSound } from '../basicSounds'\r\nimport buttonClickMp3 from '../../assets/button_click.mp3'\r\nimport { ButtonProvider } from './Button'\r\n\r\nvoid loadSound('button_click.mp3', buttonClickMp3)\r\n\r\nexport default ({ children }) => {\r\n  return <ButtonProvider onClick={() => {\r\n    void playSound('button_click.mp3')\r\n  }}>{children}</ButtonProvider>\r\n}\r\n","globalThis.resolveDnsFallback = async (hostname: string) => {\r\n  const response = await fetchServerStatus(hostname)\r\n  return response?.raw.srv_record ?? undefined\r\n}\r\n\r\nexport const isServerValid = (ip: string, allowLocalhost = false) => {\r\n  const isInLocalNetwork = ip.startsWith('192.168.') ||\r\n    ip.startsWith('10.') ||\r\n    ip.startsWith('172.') ||\r\n    ip.startsWith('127.') ||\r\n    ip.startsWith('localhost') ||\r\n    ip.startsWith(':')\r\n  const VALID_IP_OR_DOMAIN = ip.includes('.') || ip.includes('localhost')\r\n\r\n  return (!isInLocalNetwork || allowLocalhost) && VALID_IP_OR_DOMAIN\r\n}\r\n\r\nexport async function fetchServerStatus (ip: string, signal?: AbortSignal, versionOverride?: string) {\r\n  if (!isServerValid(ip)) return\r\n\r\n  const response = await fetch(`https://api.mcstatus.io/v2/status/java/${ip}`, { signal })\r\n  const data: ServerResponse = await response.json()\r\n  const versionClean = data.version?.name_raw.replace(/^[^\\d.]+/, '')\r\n\r\n  return {\r\n    formattedText: data.motd?.raw ?? '',\r\n    textNameRight: data.online ?\r\n      `${versionOverride ?? versionClean} ${data.players?.online ?? '??'}/${data.players?.max ?? '??'}` :\r\n      '',\r\n    icon: data.icon,\r\n    offline: !data.online,\r\n    raw: data\r\n  }\r\n}\r\n\r\nexport type ServerResponse = {\r\n  online: boolean\r\n  version?: {\r\n    name_raw: string\r\n  }\r\n  // display tooltip\r\n  players?: {\r\n    online: number\r\n    max: number\r\n    list: Array<{\r\n      name_raw: string\r\n      name_clean: string\r\n    }>\r\n  }\r\n  icon?: string\r\n  motd?: {\r\n    raw: string\r\n  }\r\n  // todo circle error icon\r\n  mods?: Array<{ name: string, version: string }>\r\n  // todo display via hammer icon\r\n  software?: string\r\n  plugins?: Array<{ name, version }>\r\n  // port?: number\r\n  srv_record?: {\r\n    host: string\r\n    port: number\r\n  }\r\n}\r\n","import { createContext, useContext, useEffect, useState } from 'react'\r\nimport { useMedia } from 'react-use'\r\n\r\nexport const ScaleContext = createContext<number>(1)\r\n\r\nexport const useScale = () => useContext(ScaleContext)\r\n\r\nexport const UIProvider = ({ children, scale = 1 }) => {\r\n  return (\r\n    <ScaleContext.Provider value={scale}>\r\n      {children}\r\n    </ScaleContext.Provider>\r\n  )\r\n}\r\n\r\n\r\nexport const usePassesScaledDimensions = (minWidth: number | null = null, minHeight: number | null = null) => {\r\n  const scale = useScale()\r\n  const conditions: string[] = []\r\n\r\n  if (minWidth !== null) {\r\n    conditions.push(`(min-width: ${minWidth * scale}px)`)\r\n  }\r\n  if (minHeight !== null) {\r\n    conditions.push(`(min-height: ${minHeight * scale}px)`)\r\n  }\r\n\r\n  const media = conditions.join(' and ') || 'all'\r\n  return useMedia(media)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { appQueryParams } from '../appParams'\r\nimport { fetchServerStatus, isServerValid } from '../api/mcStatusApi'\r\nimport { parseServerAddress } from '../parseServerAddress'\r\nimport Screen from './Screen'\r\nimport Input, { INPUT_LABEL_WIDTH, InputWithLabel } from './Input'\r\nimport Button from './Button'\r\nimport SelectGameVersion from './SelectGameVersion'\r\nimport { usePassesScaledDimensions } from './UIProvider'\r\n\r\nexport interface BaseServerInfo {\r\n  ip: string\r\n  name?: string\r\n  versionOverride?: string\r\n  proxyOverride?: string\r\n  usernameOverride?: string\r\n  /** Username or always use new if true */\r\n  authenticatedAccountOverride?: string | true\r\n}\r\n\r\ninterface Props {\r\n  onBack: () => void\r\n  onConfirm: (info: BaseServerInfo) => void\r\n  title?: string\r\n  initialData?: BaseServerInfo\r\n  parseQs?: boolean\r\n  onQsConnect?: (server: BaseServerInfo) => void\r\n  placeholders?: Pick<BaseServerInfo, 'proxyOverride' | 'usernameOverride'>\r\n  accounts?: string[]\r\n  authenticatedAccounts?: number\r\n  versions?: string[]\r\n}\r\n\r\nexport default ({ onBack, onConfirm, title = 'Add a Server', initialData, parseQs, onQsConnect, placeholders, accounts, versions }: Props) => {\r\n  const isSmallHeight = !usePassesScaledDimensions(null, 350)\r\n  const qsParamName = parseQs ? appQueryParams.name : undefined\r\n  const qsParamIp = parseQs ? appQueryParams.ip : undefined\r\n  const qsParamVersion = parseQs ? appQueryParams.version : undefined\r\n  const qsParamProxy = parseQs ? appQueryParams.proxy : undefined\r\n  const qsParamUsername = parseQs ? appQueryParams.username : undefined\r\n  const qsParamLockConnect = parseQs ? appQueryParams.lockConnect : undefined\r\n\r\n  const parsedQsIp = parseServerAddress(qsParamIp)\r\n  const parsedInitialIp = parseServerAddress(initialData?.ip)\r\n\r\n  const [serverName, setServerName] = React.useState(initialData?.name ?? qsParamName ?? '')\r\n  const [serverIp, setServerIp] = React.useState(parsedQsIp.serverIpFull || parsedInitialIp.serverIpFull || '')\r\n  const [versionOverride, setVersionOverride] = React.useState(initialData?.versionOverride ?? /* legacy */ initialData?.['version'] ?? qsParamVersion ?? '')\r\n  const [proxyOverride, setProxyOverride] = React.useState(initialData?.proxyOverride ?? qsParamProxy ?? '')\r\n  const [usernameOverride, setUsernameOverride] = React.useState(initialData?.usernameOverride ?? qsParamUsername ?? '')\r\n  const lockConnect = qsParamLockConnect === 'true'\r\n\r\n  const smallWidth = !usePassesScaledDimensions(400)\r\n  const initialAccount = initialData?.authenticatedAccountOverride\r\n  const [accountIndex, setAccountIndex] = React.useState(initialAccount === true ? -2 : initialAccount ? (accounts?.includes(initialAccount) ? accounts.indexOf(initialAccount) : -2) : -1)\r\n\r\n  const freshAccount = accountIndex === -2\r\n  const noAccountSelected = accountIndex === -1\r\n  const authenticatedAccountOverride = noAccountSelected ? undefined : freshAccount ? true : accounts?.[accountIndex]\r\n\r\n  let ipFinal = serverIp\r\n  ipFinal = ipFinal.replace(/:$/, '')\r\n  const commonUseOptions: BaseServerInfo = {\r\n    name: serverName,\r\n    ip: ipFinal,\r\n    versionOverride: versionOverride || undefined,\r\n    proxyOverride: proxyOverride || undefined,\r\n    usernameOverride: usernameOverride || undefined,\r\n    authenticatedAccountOverride,\r\n  }\r\n\r\n  const [fetchedServerInfoIp, setFetchedServerInfoIp] = React.useState<string | undefined>(undefined)\r\n  const [serverOnline, setServerOnline] = React.useState(null as boolean | null)\r\n  const [onlinePlayersList, setOnlinePlayersList] = React.useState<string[]>([])\r\n\r\n  useEffect(() => {\r\n    const controller = new AbortController()\r\n\r\n    const checkServer = async () => {\r\n      if (!qsParamIp || !isServerValid(qsParamIp)) return\r\n\r\n      try {\r\n        const status = await fetchServerStatus(qsParamIp)\r\n        if (!status) return\r\n\r\n        setServerOnline(status.raw.online)\r\n        setOnlinePlayersList(status.raw.players?.list.map(p => p.name_raw) ?? [])\r\n        setFetchedServerInfoIp(qsParamIp)\r\n      } catch (err) {\r\n        console.error('Failed to fetch server status:', err)\r\n      }\r\n    }\r\n\r\n    void checkServer()\r\n    return () => controller.abort()\r\n  }, [qsParamIp])\r\n\r\n  const validateUsername = (username: string) => {\r\n    if (!username) return undefined\r\n    if (onlinePlayersList.includes(username)) {\r\n      return { border: 'red solid 1px' }\r\n    }\r\n    const MINECRAFT_USERNAME_REGEX = /^\\w{3,16}$/\r\n    if (!MINECRAFT_USERNAME_REGEX.test(username)) {\r\n      return { border: 'red solid 1px' }\r\n    }\r\n    return undefined\r\n  }\r\n\r\n  const validateServerIp = () => {\r\n    if (!serverIp) return undefined\r\n    if (serverOnline) {\r\n      return { border: 'lightgreen solid 1px' }\r\n    } else {\r\n      return { border: 'red solid 1px' }\r\n    }\r\n  }\r\n\r\n  const displayConnectButton = qsParamIp\r\n  const serverExamples = ['example.com:25565', 'play.hypixel.net', 'ws://play.mcraft.fun', 'wss://play.webmc.fun']\r\n  // pick random example\r\n  const example = serverExamples[Math.floor(Math.random() * serverExamples.length)]\r\n\r\n  return <Screen title={qsParamIp ? 'Connect to Server' : title} backdrop>\r\n    <form\r\n      style={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        height: '100%'\r\n      }}\r\n      onSubmit={(e) => {\r\n        e.preventDefault()\r\n        onConfirm(commonUseOptions)\r\n      }}\r\n    >\r\n      <div style={{\r\n        display: smallWidth ? 'flex' : 'grid',\r\n        gap: 3,\r\n        ...(smallWidth ? {\r\n          flexDirection: 'column',\r\n        } : {\r\n          gridTemplateColumns: '1fr 1fr'\r\n        })\r\n      }}\r\n      >\r\n        <InputWithLabel\r\n          required\r\n          label=\"Server IP\"\r\n          autoFocus={!lockConnect}\r\n          value={serverIp}\r\n          disabled={lockConnect && parsedQsIp.host !== null}\r\n          onChange={({ target: { value } }) => {\r\n            setServerIp(value)\r\n            setServerOnline(false)\r\n          }}\r\n          validateInput={serverOnline === null || fetchedServerInfoIp !== serverIp ? undefined : validateServerIp}\r\n          placeholder={example}\r\n        />\r\n        {!lockConnect && <>\r\n          <div style={{ display: 'flex' }}>\r\n            <InputWithLabel label=\"Server Name\" value={serverName} onChange={({ target: { value } }) => setServerName(value)} placeholder='Defaults to IP' />\r\n          </div>\r\n        </>}\r\n        {isSmallHeight ? <div style={{ gridColumn: 'span 2', marginTop: 10, }} /> : <div style={{ gridColumn: smallWidth ? '' : 'span 2' }}>Overrides:</div>}\r\n        <div style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n        }}>\r\n          <label style={{ fontSize: 12, marginBottom: 1, color: 'lightgray' }}>Version Override</label>\r\n          <SelectGameVersion\r\n            selected={{ value: versionOverride, label: versionOverride }}\r\n            versions={versions?.map(v => { return { value: v, label: v } }) ?? []}\r\n            onChange={(value) => {\r\n              setVersionOverride(value)\r\n            }}\r\n            placeholder=\"Optional, but recommended to specify\"\r\n            disabled={lockConnect}\r\n          />\r\n        </div>\r\n\r\n        <InputWithLabel\r\n          label=\"Proxy Override\"\r\n          value={proxyOverride}\r\n          disabled={lockConnect && (qsParamProxy !== null || !!placeholders?.proxyOverride) || serverIp.startsWith('ws://') || serverIp.startsWith('wss://')}\r\n          onChange={({ target: { value } }) => setProxyOverride(value)}\r\n          placeholder={serverIp.startsWith('ws://') || serverIp.startsWith('wss://') ? 'Not needed for websocket servers' : placeholders?.proxyOverride}\r\n        />\r\n        <InputWithLabel\r\n          label=\"Username Override\"\r\n          value={usernameOverride}\r\n          disabled={!noAccountSelected || (lockConnect && qsParamUsername !== null)}\r\n          onChange={({ target: { value } }) => setUsernameOverride(value)}\r\n          placeholder={placeholders?.usernameOverride}\r\n          validateInput={!serverOnline || fetchedServerInfoIp !== serverIp ? undefined : validateUsername}\r\n        />\r\n        <label style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n        }}\r\n        >\r\n          <span style={{ fontSize: 12, marginBottom: 1, color: 'lightgray' }}>Account Override</span>\r\n          <select\r\n            onChange={({ target: { value } }) => setAccountIndex(Number(value))}\r\n            style={{\r\n              background: 'gray',\r\n              color: 'white',\r\n              height: 20,\r\n              fontSize: 13,\r\n            }}\r\n            defaultValue={initialAccount === true ? -2 : initialAccount === undefined ? -1 : (fallbackIfNotFound((accounts ?? []).indexOf(initialAccount)) ?? -2)}\r\n            disabled={lockConnect && qsParamUsername !== null}\r\n          >\r\n            <option value={-1}>Offline Account (Username)</option>\r\n            {accounts?.map((account, i) => <option key={i} value={i}>{account} (Logged In)</option>)}\r\n            <option value={-2}>Any other MS account</option>\r\n          </select>\r\n        </label>\r\n\r\n        {!lockConnect && <>\r\n          <ButtonWrapper onClick={() => {\r\n            onBack()\r\n          }}>\r\n            Cancel\r\n          </ButtonWrapper>\r\n          <ButtonWrapper type='submit'>\r\n            {displayConnectButton ? translate('Save') : <strong>{translate('Save')}</strong>}\r\n          </ButtonWrapper>\r\n        </>}\r\n        {displayConnectButton && (\r\n          <div style={{\r\n            gridColumn: smallWidth ? '' : 'span 2',\r\n            display: 'flex',\r\n            justifyContent: 'center'\r\n          }}>\r\n            <ButtonWrapper\r\n              data-test-id='connect-qs'\r\n              onClick={() => {\r\n                onQsConnect?.(commonUseOptions)\r\n              }}\r\n            >\r\n              <strong>{translate('Connect')}</strong>\r\n            </ButtonWrapper>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </form>\r\n  </Screen>\r\n}\r\n\r\nconst ButtonWrapper = ({ ...props }: React.ComponentProps<typeof Button>) => {\r\n  props.style ??= {}\r\n  props.style.width = INPUT_LABEL_WIDTH\r\n  return <Button {...props} />\r\n}\r\n\r\nconst fallbackIfNotFound = (index: number) => (index === -1 ? undefined : index)\r\n","import { useEffect, useMemo, useState } from 'react'\r\nimport { useUtilsEffect } from '@zardoy/react-util'\r\nimport { useSnapshot } from 'valtio'\r\nimport { supportedVersions } from 'minecraft-protocol'\r\nimport { versionToNumber } from 'mc-assets/dist/utils'\r\nimport { ConnectOptions } from '../connect'\r\nimport { activeModalStack, hideCurrentModal, miscUiState, notHideableModalsWithoutForce, showModal } from '../globalState'\r\nimport appSupportedVersions from '../supportedVersions.mjs'\r\nimport { appQueryParams } from '../appParams'\r\nimport { fetchServerStatus, isServerValid } from '../api/mcStatusApi'\r\nimport { getServerInfo } from '../mineflayer/mc-protocol'\r\nimport { parseServerAddress } from '../parseServerAddress'\r\nimport ServersList, { getCurrentProxy, getCurrentUsername } from './ServersList'\r\nimport AddServerOrConnect, { BaseServerInfo } from './AddServerOrConnect'\r\nimport { useDidUpdateEffect } from './utils'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport { showOptionsModal } from './SelectOption'\r\nimport { useCopyKeybinding } from './simpleHooks'\r\nimport { AuthenticatedAccount, setNewServersList } from './serversStorage'\r\nimport { appStorage, StoreServerItem } from './appStorageProvider'\r\nimport Button from './Button'\r\nimport { pixelartIcons } from './PixelartIcon'\r\nimport { showNotification } from './NotificationProvider'\r\n\r\nconst firstProtocolVersion = versionToNumber(supportedVersions[0])\r\nconst lastProtocolVersion = versionToNumber(supportedVersions.at(-1)!)\r\nconst protocolSupportedVersions = appSupportedVersions.filter(v => versionToNumber(v) >= firstProtocolVersion && versionToNumber(v) <= lastProtocolVersion)\r\n\r\nconst EXPLICIT_SHARE_SERVER_MODE = false\r\n\r\nif (appQueryParams.lockConnect) {\r\n  notHideableModalsWithoutForce.add('editServer')\r\n}\r\n\r\ntype AdditionalDisplayData = {\r\n  textNameRightGrayed: string\r\n  formattedText: string\r\n  textNameRight: string\r\n  icon?: string\r\n  offline?: boolean\r\n}\r\n\r\n// todo move to base\r\nconst normalizeIp = (ip: string) => ip.replace(/https?:\\/\\//, '').replace(/\\/(:|$)/, '')\r\n\r\nconst FETCH_DELAY = 100 // ms between each request\r\nconst MAX_CONCURRENT_REQUESTS = 10\r\n\r\nconst Inner = ({ hidden, customServersList }: { hidden?: boolean, customServersList?: string[] }) => {\r\n  const [serverEditScreen, setServerEditScreen] = useState<StoreServerItem | true | null>(null) // true for add\r\n  const { authenticatedAccounts } = useSnapshot(appStorage)\r\n  const [quickConnectIp, setQuickConnectIp] = useState('')\r\n  const [selectedIndex, setSelectedIndex] = useState(0)\r\n  const [retriggerFocusCounter, setRetriggerFocusCounter] = useState(0)\r\n\r\n  useEffect(() => {\r\n    if (!hidden) {\r\n      setRetriggerFocusCounter(x => x + 1)\r\n    }\r\n  }, [hidden])\r\n\r\n  const _savedServersListWatchOnly = useSnapshot(appStorage).serversList\r\n\r\n  const serversListProvided = useMemo(() => {\r\n    return (\r\n      customServersList\r\n        ? customServersList.map((row): StoreServerItem => {\r\n          const [ip, name] = row.split(' ')\r\n          const [_ip, _port, version] = ip.split(':')\r\n          return {\r\n            ip,\r\n            versionOverride: version,\r\n            name,\r\n          }\r\n        })\r\n        : [...(appStorage.serversList?.filter(server => server) ?? [])]\r\n    )\r\n  }, [customServersList, _savedServersListWatchOnly])\r\n\r\n  const [additionalServerData, setAdditionalServerData] = useState<Record<string, AdditionalDisplayData>>({})\r\n\r\n  // Add keyboard handler for moving servers\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (['input', 'textarea', 'select'].includes((e.target as HTMLElement)?.tagName?.toLowerCase())) return\r\n      if (!e.shiftKey || selectedIndex === undefined) return\r\n      if (e.key !== 'ArrowUp' && e.key !== 'ArrowDown') return\r\n      if (customServersList) return\r\n      e.preventDefault()\r\n      e.stopImmediatePropagation()\r\n\r\n      const newIndex = e.key === 'ArrowUp'\r\n        ? Math.max(0, selectedIndex - 1)\r\n        : Math.min(serversListProvided.length - 1, selectedIndex + 1)\r\n\r\n      if (newIndex === selectedIndex) return\r\n      if (newIndex < 0 || newIndex >= serversListProvided.length) return\r\n\r\n      // Move server in the list\r\n      const newList = [...serversListProvided]\r\n      const oldItem = newList[selectedIndex]\r\n      const newItem = newList[newIndex]\r\n      if (oldItem.isRecommended || newItem.isRecommended) {\r\n        return\r\n      }\r\n\r\n      newList[selectedIndex] = newItem\r\n      newList[newIndex] = oldItem\r\n\r\n      appStorage.serversList = newList\r\n      setSelectedIndex(newIndex)\r\n    }\r\n\r\n    document.addEventListener('keydown', handleKeyDown)\r\n    return () => document.removeEventListener('keydown', handleKeyDown)\r\n  }, [selectedIndex, serversListProvided])\r\n\r\n  const serversListSorted: Array<StoreServerItem & { index: number }> = useMemo(() => [\r\n    ...serversListProvided,\r\n    ...(customServersList ? [] : (miscUiState.appConfig?.promoteServers ?? [])).map((server): StoreServerItem => ({\r\n      ip: server.ip,\r\n      name: server.name,\r\n      versionOverride: server.version,\r\n      description: server.description,\r\n      isRecommended: true\r\n    }))\r\n  ].map((server, index) => ({ ...server, index })), [serversListProvided])\r\n  // by lastJoined\r\n  // const serversListSorted = useMemo(() => {\r\n  //   return serversList.map((server, index) => ({ ...server, index })).sort((a, b) => (b.lastJoined ?? 0) - (a.lastJoined ?? 0))\r\n  // }, [serversList])\r\n\r\n  const isEditScreenModal = useIsModalActive('editServer')\r\n\r\n  useUtilsEffect(({ signal }) => {\r\n    if (isEditScreenModal) return\r\n    const update = async () => {\r\n      const queue = serversListSorted\r\n        .map(server => {\r\n          if (!isServerValid(server.ip, true) || signal.aborted) return null\r\n\r\n          return server\r\n        })\r\n        .filter(x => x !== null)\r\n\r\n      const activeRequests = new Set<Promise<void>>()\r\n\r\n      let lastRequestStart = 0\r\n      for (const server of queue) {\r\n        // Wait if at concurrency limit\r\n        if (activeRequests.size >= MAX_CONCURRENT_REQUESTS) {\r\n          // eslint-disable-next-line no-await-in-loop\r\n          await Promise.race(activeRequests)\r\n        }\r\n\r\n        // Create and track new request\r\n        // eslint-disable-next-line @typescript-eslint/no-loop-func\r\n        const request = new Promise<void>(resolve => {\r\n          setTimeout(async () => {\r\n            try {\r\n              lastRequestStart = Date.now()\r\n              if (signal.aborted) return\r\n              const isWebSocket = server.ip.startsWith('ws://') || server.ip.startsWith('wss://')\r\n              let data\r\n              if (isWebSocket) {\r\n                try {\r\n                  const pingResult = await getServerInfo(server.ip, undefined, undefined, true)\r\n                  console.log('pingResult.fullInfo.description', pingResult.fullInfo.description)\r\n                  data = {\r\n                    formattedText: pingResult.fullInfo.description,\r\n                    icon: pingResult.fullInfo.favicon,\r\n                    textNameRight: `ws ${pingResult.latency}ms`,\r\n                    textNameRightGrayed: `${pingResult.fullInfo.players?.online ?? '??'}/${pingResult.fullInfo.players?.max ?? '??'}`,\r\n                    offline: false\r\n                  }\r\n                } catch (err) {\r\n                  data = {\r\n                    formattedText: 'Failed to connect',\r\n                    textNameRight: '',\r\n                    textNameRightGrayed: '',\r\n                    offline: true\r\n                  }\r\n                }\r\n              } else {\r\n                data = await fetchServerStatus(server.ip, /* signal */undefined, server.versionOverride) // DONT ADD SIGNAL IT WILL CRUSH JS RUNTIME\r\n              }\r\n              if (data) {\r\n                setAdditionalServerData(old => ({\r\n                  ...old,\r\n                  [server.ip]: data\r\n                }))\r\n              }\r\n            } catch (err) {\r\n              console.warn('Failed to fetch server status', err)\r\n            } finally {\r\n              activeRequests.delete(request)\r\n              resolve()\r\n            }\r\n          }, lastRequestStart ? Math.max(0, FETCH_DELAY - (Date.now() - lastRequestStart)) : 0)\r\n        })\r\n\r\n        activeRequests.add(request)\r\n      }\r\n\r\n      await Promise.all(activeRequests)\r\n    }\r\n\r\n    void update()\r\n  }, [serversListSorted, isEditScreenModal])\r\n\r\n  useDidUpdateEffect(() => {\r\n    if (serverEditScreen && !isEditScreenModal) {\r\n      showModal({ reactType: 'editServer' })\r\n    }\r\n    if (!serverEditScreen && isEditScreenModal) {\r\n      hideCurrentModal()\r\n    }\r\n  }, [serverEditScreen])\r\n\r\n  useDidUpdateEffect(() => {\r\n    if (!isEditScreenModal) {\r\n      setServerEditScreen(null)\r\n    }\r\n  }, [isEditScreenModal])\r\n\r\n  useCopyKeybinding(() => {\r\n    const item = serversListProvided[selectedIndex]\r\n    if (!item) return\r\n    let str = `${item.ip}`\r\n    if (item.versionOverride) {\r\n      str += `:${item.versionOverride}`\r\n    }\r\n    return str\r\n  })\r\n\r\n  const editModalJsx = isEditScreenModal ? <AddServerOrConnect\r\n    placeholders={{\r\n      proxyOverride: getCurrentProxy(),\r\n      usernameOverride: getCurrentUsername(),\r\n    }}\r\n    parseQs={!serverEditScreen}\r\n    onBack={() => {\r\n      hideCurrentModal()\r\n    }}\r\n    onConfirm={(info) => {\r\n      if (!serverEditScreen) return\r\n      if (serverEditScreen === true) {\r\n        const server: StoreServerItem = { ...info, lastJoined: Date.now() } // so it appears first\r\n        appStorage.serversList = [server, ...(appStorage.serversList ?? serversListProvided)]\r\n      } else {\r\n        const index = appStorage.serversList?.indexOf(serverEditScreen)\r\n        if (index !== undefined) {\r\n          const { lastJoined } = appStorage.serversList![index]\r\n          appStorage.serversList![index] = { ...info, lastJoined }\r\n        }\r\n      }\r\n      setServerEditScreen(null)\r\n    }}\r\n    accounts={authenticatedAccounts.map(a => a.username)}\r\n    initialData={!serverEditScreen || serverEditScreen === true ? {\r\n      ip: quickConnectIp\r\n    } : serverEditScreen}\r\n    onQsConnect={(info) => {\r\n      const connectOptions: ConnectOptions = {\r\n        username: info.usernameOverride || getCurrentUsername() || '',\r\n        server: normalizeIp(info.ip),\r\n        proxy: info.proxyOverride || getCurrentProxy(),\r\n        botVersion: info.versionOverride,\r\n        ignoreQs: true,\r\n      }\r\n      dispatchEvent(new CustomEvent('connect', { detail: connectOptions }))\r\n    }}\r\n    versions={protocolSupportedVersions}\r\n  /> : null\r\n\r\n  const serversListJsx = <ServersList\r\n    joinServer={(overridesOrIp, { shouldSave }) => {\r\n      let overrides: BaseServerInfo\r\n      if (typeof overridesOrIp === 'string') {\r\n        let msAuth = false\r\n        const parts = overridesOrIp.split(':')\r\n        if (parts.at(-1) === 'ms') {\r\n          msAuth = true\r\n          parts.pop()\r\n        }\r\n        const parsed = parseServerAddress(parts.join(':'))\r\n        overrides = {\r\n          ip: parsed.serverIpFull,\r\n          versionOverride: parsed.version,\r\n          authenticatedAccountOverride: msAuth ? true : undefined, // todo popup selector\r\n        }\r\n      } else {\r\n        overrides = overridesOrIp\r\n      }\r\n\r\n      const indexOrIp = overrides.ip\r\n      let ip = indexOrIp\r\n      let server: StoreServerItem | undefined\r\n      if (shouldSave === undefined) {\r\n        // hack: inner component doesn't know of overrides for existing servers\r\n        server = serversListSorted.find(s => s.index.toString() === indexOrIp)!\r\n        ip = server.ip\r\n        overrides = server\r\n      }\r\n\r\n      const lastJoinedUsername = serversListProvided.find(s => s.usernameOverride)?.usernameOverride\r\n      let username = overrides.usernameOverride || getCurrentUsername() || ''\r\n      if (!username) {\r\n        const promptUsername = prompt('Enter username', lastJoinedUsername || '')\r\n        if (!promptUsername) return\r\n        username = promptUsername\r\n      }\r\n      let authenticatedAccount: AuthenticatedAccount | true | undefined\r\n      if (overrides.authenticatedAccountOverride) {\r\n        if (overrides.authenticatedAccountOverride === true) {\r\n          authenticatedAccount = true\r\n        } else {\r\n          authenticatedAccount = authenticatedAccounts.find(a => a.username === overrides.authenticatedAccountOverride) ?? true\r\n        }\r\n      }\r\n      const options = {\r\n        username,\r\n        server: normalizeIp(ip),\r\n        proxy: overrides.proxyOverride || getCurrentProxy(),\r\n        botVersion: overrides.versionOverride ?? /* legacy */ overrides['version'],\r\n        ignoreQs: true,\r\n        authenticatedAccount,\r\n        saveServerToHistory: shouldSave,\r\n        onSuccessfulPlay () {\r\n          if (shouldSave !== false && !serversListProvided.some(s => s.ip === ip)) {\r\n            const newServersList: StoreServerItem[] = [\r\n              {\r\n                ip,\r\n                lastJoined: Date.now(),\r\n                versionOverride: overrides.versionOverride,\r\n                numConnects: 1\r\n              },\r\n              ...serversListProvided\r\n            ]\r\n            setNewServersList(newServersList)\r\n            miscUiState.loadedServerIndex = (newServersList.length - 1).toString()\r\n          }\r\n\r\n          if (shouldSave === undefined) { // loading saved\r\n            // find and update\r\n            const server = serversListProvided.find(s => s.ip === ip)\r\n            if (server) {\r\n              // move to top\r\n              const newList = [...serversListProvided]\r\n              const index = newList.indexOf(server)\r\n              const thisItem = newList[index]\r\n              newList.splice(index, 1)\r\n              newList.unshift(thisItem)\r\n\r\n              server.lastJoined = Date.now()\r\n              server.numConnects = (server.numConnects || 0) + 1\r\n              setNewServersList(newList)\r\n            }\r\n          }\r\n        },\r\n        serverIndex: shouldSave ? serversListProvided.length.toString() : indexOrIp // assume last\r\n      } satisfies ConnectOptions\r\n      dispatchEvent(new CustomEvent('connect', { detail: options }))\r\n      // qsOptions\r\n    }}\r\n    lockedEditing={!!customServersList}\r\n    setQuickConnectIp={setQuickConnectIp}\r\n    onProfileClick={async () => {\r\n      const username = await showOptionsModal('Select authenticated account to remove', authenticatedAccounts.map(a => a.username))\r\n      if (!username) return\r\n      appStorage.authenticatedAccounts = authenticatedAccounts.filter(a => a.username !== username)\r\n    }}\r\n    onWorldAction={(action, index) => {\r\n      const server = serversListProvided[index]\r\n      if (!server) return\r\n\r\n      if (action === 'edit') {\r\n        setServerEditScreen(server)\r\n      }\r\n      if (action === 'delete') {\r\n        appStorage.serversList = appStorage.serversList!.filter(s => s !== server)\r\n      }\r\n    }}\r\n    onGeneralAction={(action) => {\r\n      if (action === 'create') {\r\n        setServerEditScreen(true)\r\n      }\r\n      if (action === 'cancel') {\r\n        hideCurrentModal()\r\n      }\r\n    }}\r\n    worldData={serversListSorted.map(server => {\r\n      const additional = additionalServerData[server.ip]\r\n      const handleShare = async () => {\r\n        try {\r\n          const qs = new URLSearchParams()\r\n          qs.set('ip', server.ip)\r\n          if (server.proxyOverride) qs.set('proxy', server.proxyOverride)\r\n          if (server.versionOverride) qs.set('version', server.versionOverride)\r\n          qs.set('username', server.usernameOverride ?? '')\r\n          const shareUrl = `${window.location.origin}${window.location.pathname}?${qs.toString()}`\r\n          await navigator.clipboard.writeText(shareUrl)\r\n          const MESSAGE = 'Server link copied to clipboard'\r\n          if (EXPLICIT_SHARE_SERVER_MODE) {\r\n            await showOptionsModal(MESSAGE, [])\r\n          } else {\r\n            showNotification(MESSAGE)\r\n          }\r\n        } catch (err) {\r\n          console.error(err)\r\n          showNotification('Failed to copy server link to clipboard')\r\n        }\r\n      }\r\n\r\n      return {\r\n        name: server.index.toString(),\r\n        title: server.name || server.ip,\r\n        detail: (server.versionOverride ?? '') + ' ' + (server.usernameOverride ?? ''),\r\n        formattedTextOverride: additional?.formattedText,\r\n        worldNameRight: additional?.textNameRight ?? '',\r\n        worldNameRightGrayed: additional?.textNameRightGrayed ?? '',\r\n        iconSrc: additional?.icon,\r\n        offline: additional?.offline,\r\n        afterTitleUi: (\r\n          <Button\r\n            tabIndex={-1}\r\n            icon=\"external-link\"\r\n            style={{ marginRight: 8, width: 20, height: 20 }}\r\n            onClick={(e) => {\r\n              e.stopPropagation()\r\n              void handleShare()\r\n            }}\r\n          />\r\n        ),\r\n        group: customServersList ? 'Provided Servers' : (server.isRecommended ? '⭐️ Recommended Servers' : '💾 Saved Servers')\r\n      }\r\n    })}\r\n    hidden={hidden}\r\n    onRowSelect={(serverIndex) => {\r\n      setSelectedIndex(Number(serverIndex))\r\n    }}\r\n    selectedRow={selectedIndex}\r\n    retriggerFocusCounter={retriggerFocusCounter}\r\n  />\r\n  return <>\r\n    {serversListJsx}\r\n    {editModalJsx}\r\n  </>\r\n}\r\n\r\nexport default () => {\r\n  const serversListQs = appQueryParams.serversList\r\n  const [customServersList, setCustomServersList] = useState<string[] | undefined>(serversListQs ? [] : undefined)\r\n\r\n  useEffect(() => {\r\n    if (serversListQs) {\r\n      if (serversListQs.startsWith('http')) {\r\n        void fetch(serversListQs).then(async r => r.text()).then((text) => {\r\n          const isJson = serversListQs.endsWith('.json') ? true : serversListQs.endsWith('.txt') ? false : text.startsWith('[')\r\n          setCustomServersList(isJson ? JSON.parse(text) : text.split('\\n').map(x => x.trim()).filter(x => x.trim().length > 0))\r\n        }).catch((err) => {\r\n          console.error(err)\r\n          alert(`Failed to get servers list file: ${err}`)\r\n        })\r\n      } else {\r\n        setCustomServersList(serversListQs.split(','))\r\n      }\r\n    }\r\n  }, [serversListQs])\r\n\r\n  const modalStack = useSnapshot(activeModalStack)\r\n  const hasServersListModal = modalStack.some(x => x.reactType === 'serversList')\r\n  const editServerModalActive = useIsModalActive('editServer')\r\n  const generalSelectActive = useIsModalActive('general-select')\r\n  // const isServersListModalActive = useIsModalActive('serversList') || (modalStack.some(x => x.reactType === 'serversList') && generalSelectActive)\r\n  const isServersListModalActive = useIsModalActive('serversList')\r\n\r\n  const eitherModal = isServersListModalActive || editServerModalActive\r\n  const render = eitherModal || hasServersListModal\r\n  return render ? <Inner hidden={!isServersListModalActive} customServersList={customServersList} /> : null\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-dRiZZT\",\"group\":\"group-haorh2\",\"group-category\":\"group-category-HNSIFU\",\"groupCategory\":\"group-category-HNSIFU\",\"actionBinds\":\"actionBinds-MbRkMv\",\"warning-container\":\"warning-container-mgiK4D\",\"warningContainer\":\"warning-container-mgiK4D\",\"actionName\":\"actionName-uFJWW2\",\"undo-keyboard\":\"undo-keyboard-fjpyGp\",\"undoKeyboard\":\"undo-keyboard-fjpyGp\",\"undo-gamepad\":\"undo-gamepad-ZNUg28\",\"undoGamepad\":\"undo-gamepad-ZNUg28\",\"button\":\"button-AF2rj4\",\"margin-left\":\"margin-left-ugrmlI\",\"marginLeft\":\"margin-left-ugrmlI\",\"matched-bind\":\"matched-bind-GFWOr1\",\"matchedBind\":\"matched-bind-GFWOr1\",\"matched-bind-warning\":\"matched-bind-warning-WdXyU1\",\"matchedBindWarning\":\"matched-bind-warning-WdXyU1\",\"chat-command\":\"chat-command-onMok2\",\"chatCommand\":\"chat-command-onMok2\"};","import { useEffect, useState, useContext } from 'react'\r\nimport { customCommandsConfig } from '../customCommands'\r\nimport { ButtonWithMatchesAlert, Context } from './KeybindingsScreen'\r\nimport Button from './Button'\r\nimport styles from './KeybindingsScreen.module.css'\r\nimport Input from './Input'\r\n\r\n\r\nexport type CustomCommand = {\r\n  keys: undefined | string[]\r\n  gamepad: undefined | string[]\r\n  type: string\r\n  inputs: any[]\r\n}\r\n\r\nexport type CustomCommandsMap = Record<string, CustomCommand>\r\n\r\nexport default ({\r\n  customCommands,\r\n  updateCurrBind,\r\n  resetBinding,\r\n}: {\r\n  customCommands: CustomCommandsMap,\r\n  updateCurrBind: (group: string, action: string) => void,\r\n  resetBinding: (group: string, action: string, inputType: string) => void,\r\n}) => {\r\n  const { userConfig, setUserConfig } = useContext(Context)\r\n  const [customConfig, setCustomConfig] = useState<any>({ ...customCommands })\r\n\r\n  useEffect(() => {\r\n    setUserConfig({ ...userConfig, custom: { ...customConfig } })\r\n  }, [customConfig])\r\n\r\n  const addNewCommand = (type: string) => {\r\n    // max key + 1\r\n    const newKey = String(Math.max(...Object.keys(customConfig).map(Number).filter(key => !isNaN(key)), 0) + 1)\r\n    setCustomConfig(prev => {\r\n      const newCustomConf = { ...prev }\r\n      newCustomConf[newKey] = {\r\n        keys: undefined as string[] | undefined,\r\n        gamepad: undefined as string[] | undefined,\r\n        type,\r\n        inputs: [] as any[]\r\n      }\r\n      return newCustomConf\r\n    })\r\n  }\r\n\r\n  return <>\r\n    <div className={styles.group}>\r\n      {Object.entries(customCommandsConfig).map(([group, { input }]) => (\r\n        <div key={`group-container-${group}`} className={styles.group}>\r\n          <div key={`category-${group}`} className={styles['group-category']}>{group}</div>\r\n          {Object.entries(customConfig).filter(([key, data]) => data.type === group).map((commandData, indexOption) => {\r\n            return <CustomCommandContainer\r\n              key={indexOption}\r\n              indexOption={indexOption}\r\n              commandData={commandData}\r\n              updateCurrBind={updateCurrBind}\r\n              groupData={[group, { input }]}\r\n              setCustomConfig={setCustomConfig}\r\n              resetBinding={resetBinding}\r\n            />\r\n          })}\r\n          <Button\r\n            onClick={() => addNewCommand(group)}\r\n            icon=\"pixelarticons:add-box\"\r\n            style={{\r\n              alignSelf: 'center'\r\n            }}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  </>\r\n}\r\n\r\nconst CustomCommandContainer = ({\r\n  indexOption,\r\n  commandData,\r\n  updateCurrBind,\r\n  setCustomConfig,\r\n  resetBinding,\r\n  groupData\r\n}) => {\r\n  const { userConfig } = useContext(Context)\r\n\r\n  const [commandKey, { keys, gamepad, inputs }] = commandData\r\n  const [group, { input }] = groupData\r\n\r\n  const setInputValue = (optionKey, indexInput, value) => {\r\n    setCustomConfig(prev => {\r\n      const newConfig = { ...prev }\r\n      newConfig[optionKey].inputs = [...prev[optionKey].inputs]\r\n      newConfig[optionKey].inputs[indexInput] = value\r\n      return newConfig\r\n    })\r\n  }\r\n\r\n  return <div style={{ padding: '10px' }}>\r\n    {input.map((obj, indexInput) => {\r\n      const config = typeof obj === 'function' ? obj(inputs) : obj\r\n      if (!config) return null\r\n\r\n      return config.type === 'select'\r\n        ? <select\r\n          key={indexInput} onChange={(e) => {\r\n            setInputValue(commandKey, indexInput, e.target.value)\r\n          }}\r\n        >{config.options.map((option) => <option key={option} value={option}>{option}</option>)}\r\n        </select>\r\n        : <Input key={indexInput} rootStyles={{ width: '99%' }} placeholder={config.placeholder} value={inputs[indexInput] ?? ''} onChange={(e) => setInputValue(commandKey, indexInput, e.target.value)} />\r\n    })}\r\n    <div className={styles.actionBinds}>\r\n      {\r\n        userConfig?.['custom']?.[commandKey]?.keys ? <Button\r\n          onClick={() => {\r\n            updateCurrBind(group, commandKey)\r\n            resetBinding('custom', commandKey, 'keyboard')\r\n          }}\r\n          className={styles['undo-keyboard']}\r\n          icon=\"pixelarticons:undo\"\r\n        />\r\n          : null\r\n      }\r\n\r\n      {[0, 1].map((key, index) => <ButtonWithMatchesAlert\r\n        key={`custom-keyboard-${group}-${commandKey}-${index}`}\r\n        group=\"custom\"\r\n        action={commandKey}\r\n        index={index}\r\n        inputType=\"keyboard\"\r\n        keys={keys}\r\n        gamepad={gamepad}\r\n      />)}\r\n\r\n      <div style={{ marginRight: 'auto' }} />\r\n\r\n      {\r\n        userConfig?.['custom']?.[commandKey]?.gamepad ? <Button\r\n          onClick={() => {\r\n            updateCurrBind(group, commandKey)\r\n            resetBinding('custom', commandKey, 'gamepad')\r\n          }}\r\n          className={styles['undo-keyboard']}\r\n          icon=\"pixelarticons:undo\"\r\n        />\r\n          : null\r\n      }\r\n      <ButtonWithMatchesAlert\r\n        group=\"custom\"\r\n        action={commandKey}\r\n        index={0}\r\n        inputType=\"gamepad\"\r\n        keys={keys}\r\n        gamepad={gamepad}\r\n      />\r\n      <Button\r\n        onClick={() => {\r\n          setCustomConfig(prev => {\r\n            const { [commandKey]: commandToRemove, ...newConfig } = prev\r\n            return newConfig\r\n          })\r\n        }}\r\n        style={{ color: 'red' }}\r\n        icon=\"pixelarticons:delete\"\r\n      />\r\n    </div>\r\n  </div>\r\n}\r\n","export async function parseBindingName (binding: string) {\r\n  if (!binding) return ''\r\n\r\n  const { keyboard } = (typeof navigator === 'undefined' ? undefined : navigator) ?? {}\r\n  const layoutMap = await keyboard?.getLayoutMap?.() ?? new Map<string, string>()\r\n\r\n  const mapKey = (key: string) => layoutMap.get(key) || key\r\n\r\n  const cut = binding.replaceAll(/(Digit|Key)/g, '')\r\n  const parts = cut.includes('+') ? cut.split('+') : [cut]\r\n\r\n  for (let i = 0; i < parts.length; i++) {\r\n    parts[i] = mapKey(parts[i]).split(/(?<=[a-z])(?=\\d)/).join(' ').split(/(?=[A-Z])/).reverse().join(' ')\r\n  }\r\n\r\n  return parts.join(' + ')\r\n}\r\n","import { AllKeyCodes } from 'contro-max'\r\nimport { useState, useEffect } from 'react'\r\nimport triangle from './ps_icons/playstation_triangle_console_controller_gamepad_icon.svg'\r\nimport square from './ps_icons/playstation_square_console_controller_gamepad_icon.svg'\r\nimport circle from './ps_icons/circle_playstation_console_controller_gamepad_icon.svg'\r\nimport cross from './ps_icons/cross_playstation_console_controller_gamepad_icon.svg'\r\nimport { parseBindingName } from './parseKeybindingName'\r\n\r\n\r\ntype Props = {\r\n  type: 'keyboard' | 'gamepad',\r\n  val: AllKeyCodes,\r\n  isPS?: boolean\r\n}\r\n\r\nexport default ({ type, val, isPS }: Props) => {\r\n  const [bindName, setBindName] = useState('')\r\n\r\n  async function setBind () {\r\n    setBindName(val)\r\n    const bind = type === 'keyboard' ? await parseBindingName(val) : isPS && buttonsMap[val] ? buttonsMap[val] : val\r\n    setBindName(bind)\r\n  }\r\n\r\n  useEffect(() => {\r\n    void setBind()\r\n  }, [type, val, isPS])\r\n\r\n  return <>\r\n    {bindName}\r\n  </>\r\n}\r\n\r\nconst buttonsMap = {\r\n  'A': cross,\r\n  'B': circle,\r\n  'X': square,\r\n  'Y': triangle\r\n}\r\n","import { createContext, useState } from 'react'\r\nimport { contro, updateBinds } from '../controls'\r\nimport KeybindingsScreen from './KeybindingsScreen'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nconst bindingActions = {\r\n  updateBinds\r\n}\r\n\r\nexport const BindingActionsContext = createContext(bindingActions)\r\n\r\nexport default () => {\r\n  const [bindActions, setBindActions] = useState(bindingActions)\r\n  const isModalActive = useIsModalActive('keybindings')\r\n\r\n  if (!isModalActive) return null\r\n\r\n  const hasPsGamepad = [...(navigator.getGamepads?.() ?? [])].some(gp => gp?.id.match(/playstation|dualsense|dualshock/i)) // todo: use last used gamepad detection\r\n  return <BindingActionsContext.Provider value={bindActions}>\r\n    <KeybindingsScreen isPS={hasPsGamepad} contro={contro} />\r\n  </BindingActionsContext.Provider>\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport default () => {\r\n  const [dataUrl, setDataUrl] = useState<string | null | true>(null) // true means loading\r\n\r\n  useEffect(() => {\r\n    // TODO delete maps!\r\n    const updateHeldMap = () => {\r\n      setDataUrl(null)\r\n      const item = bot.heldItem\r\n      if (!item || !['filled_map', 'map'].includes(item.name)) return\r\n      // setDataUrl(true)\r\n      const mapNumber = ((item?.nbt?.value as any)?.map?.value) ?? (item['components']?.find(x => x.type === 'map_id')?.data)\r\n      // if (!mapNumber) return\r\n      setDataUrl(bot.mapDownloader.maps?.[mapNumber] as unknown as string)\r\n    }\r\n\r\n    bot.on('heldItemChanged' as any, () => {\r\n      updateHeldMap()\r\n    })\r\n\r\n    bot.on('new_map', ({ id }) => {\r\n      // total maps: Object.keys(bot.mapDownloader.maps).length\r\n      updateHeldMap()\r\n    })\r\n\r\n    updateHeldMap()\r\n  }, [])\r\n\r\n  return dataUrl && dataUrl !== true ? <div style={{\r\n    position: 'fixed',\r\n    bottom: 20,\r\n    left: 8,\r\n    pointerEvents: 'none',\r\n  }}\r\n  >\r\n    <img\r\n      src={dataUrl} style={{\r\n        width: 92,\r\n        height: 92,\r\n        imageRendering: 'pixelated',\r\n      }}\r\n    />\r\n  </div> : null\r\n}\r\n","import { hideCurrentModal } from '../globalState'\r\nimport Button from './Button'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nexport default () => {\r\n  const isModalActive = useIsModalActive('bed')\r\n\r\n  if (!isModalActive) return null\r\n\r\n  return <div style={{\r\n    position: 'fixed',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n  }}\r\n  >\r\n    <Button onClick={() => {\r\n      void bot.wake()\r\n      hideCurrentModal()\r\n    }}>Cancel</Button>\r\n  </div>\r\n}\r\n","import { proxy, subscribe, useSnapshot } from 'valtio'\r\nimport { activeModalStack, hideCurrentModal } from '../globalState'\r\nimport Screen from './Screen'\r\nimport Button from './Button'\r\nimport { hardcodedKnownModals, watchedModalsFromHooks } from './utilsApp'\r\n\r\nconst componentActive = proxy({\r\n  enabled: false\r\n})\r\n\r\nconst checkModalAvailability = () => {\r\n  const last = activeModalStack.at(-1)\r\n  let withWildCardModal = false\r\n  for (const modal of watchedModalsFromHooks.value) {\r\n    if (modal.endsWith('*') && last?.reactType.startsWith(modal.slice(0, -1))) {\r\n      withWildCardModal = true\r\n      break\r\n    }\r\n  }\r\n\r\n  componentActive.enabled = !!last && !hardcodedKnownModals.some(x => last.reactType.startsWith(x)) && !watchedModalsFromHooks.value.includes(last.reactType) && !withWildCardModal\r\n}\r\n\r\nsubscribe(activeModalStack, () => {\r\n  checkModalAvailability()\r\n})\r\nsubscribe(watchedModalsFromHooks, () => {\r\n  checkModalAvailability()\r\n})\r\n\r\nexport default () => {\r\n  const { enabled } = useSnapshot(componentActive)\r\n  const lastModal = useSnapshot(activeModalStack).at(-1)?.reactType\r\n\r\n  if (!enabled || watchedModalsFromHooks.value.includes(lastModal!)) return null\r\n  return <Screen\r\n    title={`Error: Modal (route) ${lastModal} is is unavailable or doesn't exist`}\r\n    style={{\r\n      zIndex: -1,\r\n    }}\r\n    backdrop={false}\r\n  >\r\n    <Button\r\n      style={{ marginTop: 30 }} onClick={() => {\r\n        hideCurrentModal()\r\n      }}\r\n    >Back\r\n    </Button>\r\n  </Screen>\r\n}\r\n","import { useState } from 'react'\r\nimport { useUtilsEffect } from '@zardoy/react-util'\r\nimport { QRCodeSVG } from 'qrcode.react'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport Screen from './Screen'\r\nimport Button from './Button'\r\n\r\nexport default ({\r\n  code = 'ABCD-EFGH-IJKL-MNOP',\r\n  loginLink = 'https://aka.ms/devicelogin',\r\n  connectingServer = 'mc.example.comsdlfjsklfjsfjdskfjsj',\r\n  expiresEnd = Date.now() + 1000 * 60 * 5,\r\n  setSaveToken = (() => { }) as ((state: boolean) => void) | undefined,\r\n  defaultSaveToken = true,\r\n  onCancel = () => { },\r\n  directLink = 'https://aka.ms/devicelogin'\r\n}) => {\r\n  if (connectingServer.length > 30) connectingServer = connectingServer.slice(0, 30) + '...'\r\n  const [timeLeft, setTimeLeft] = useState(``)\r\n\r\n  useUtilsEffect(({ interval }) => {\r\n    interval(1000, () => {\r\n      const timeLeft = Math.max(0, Math.ceil((expiresEnd - Date.now()) / 1000))\r\n      const minutes = Math.floor(timeLeft / 60)\r\n      const seconds = timeLeft % 60\r\n      setTimeLeft(`${minutes}:${seconds.toString().padStart(2, '0')}`)\r\n      if (timeLeft <= 0) setTimeLeft('Code expired!')\r\n    })\r\n  }, [])\r\n\r\n  return <Screen title='Microsoft Account Authentication' titleMarginTop={5}>\r\n    <div style={{\r\n      background: 'white',\r\n      padding: '20px 18px',\r\n      width: 300,\r\n      maxHeight: 240,\r\n      color: 'black',\r\n      // borderRadius: 8,\r\n    }}\r\n    >\r\n      <div style={{\r\n        // fontFamily: 'monospace',\r\n        fontSize: 18,\r\n        padding: '5px 10px',\r\n        paddingBottom: 1,\r\n        backgroundColor: 'lightgray',\r\n        textAlign: 'center',\r\n        marginTop: -5,\r\n        userSelect: 'all',\r\n      }}\r\n      >{code}\r\n      </div>\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        fontSize: 12,\r\n      }}\r\n      >\r\n        Waiting... <PixelartIcon iconName='clock' /> {timeLeft}\r\n      </div>\r\n      <div style={{\r\n        fontSize: 12,\r\n        marginTop: 10,\r\n      }}\r\n      >\r\n        To join a Minecraft server {connectingServer} using your Microsoft account, you need to visit{' '}\r\n        <a\r\n          href={directLink}\r\n          style={{\r\n            color: 'black',\r\n            textDecoration: 'underline',\r\n            fontWeight: 600,\r\n          }}\r\n          target='_blank'\r\n        >Direct Link\r\n        </a>\r\n        {' '} or {' '}\r\n        <a\r\n          href={loginLink}\r\n          style={{\r\n            color: 'black',\r\n            textDecoration: 'underline',\r\n            fontWeight: 600,\r\n          }}\r\n          target='_blank'\r\n        >{loginLink.replace(/(https?:\\/\\/)?(www\\.)?/, '')}\r\n        </a>\r\n        {' '}\r\n        and enter the code above.\r\n      </div>\r\n      <div style={{\r\n        fontSize: 11,\r\n        marginTop: 5,\r\n        color: 'gray',\r\n        display: 'flex',\r\n        gap: 2\r\n      }}\r\n      >\r\n        <div>\r\n          <PixelartIcon iconName={pixelartIcons.alert} styles={{ display: 'inline-block', }} />\r\n          Join only <b>vanilla servers</b>! This client is detectable and may result in a ban by anti-cheat plugins.\r\n        </div>\r\n        <QRCodeSVG size={40} value={directLink} style={{ display: 'block', flexShrink: 0 }} color='gray' />\r\n      </div>\r\n      {setSaveToken && <label style={{\r\n        fontSize: 12,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: 5,\r\n        marginTop: 4,\r\n      }}\r\n      >\r\n        <input type='checkbox' defaultChecked={defaultSaveToken} onChange={e => setSaveToken(e.target.checked)} />{' '}\r\n        Save account token in this browser\r\n      </label>}\r\n    </div>\r\n    <Button\r\n      style={{\r\n        marginTop: -5,\r\n      }}\r\n      onClick={onCancel}\r\n    >Cancel\r\n    </Button>\r\n  </Screen>\r\n}\r\n","import { proxy, ref, useSnapshot } from 'valtio'\r\nimport SignInMessage from './SignInMessage'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nexport const signInMessageState = proxy({\r\n  code: '',\r\n  link: '',\r\n  expiresOn: 0,\r\n  shouldSaveToken: true,\r\n  abortController: ref(new AbortController()),\r\n})\r\n\r\nexport default () => {\r\n  const { code, expiresOn, link, shouldSaveToken } = useSnapshot(signInMessageState)\r\n  const signInTestModal = useIsModalActive('sign-in-test')\r\n\r\n  if (!code && !signInTestModal) return null\r\n\r\n  return <SignInMessage\r\n    code={code}\r\n    expiresEnd={expiresOn}\r\n    loginLink={link}\r\n    defaultSaveToken={shouldSaveToken}\r\n    setSaveToken={(state) => {\r\n      signInMessageState.shouldSaveToken = state\r\n    }}\r\n    connectingServer={lastConnectOptions.value?.server ?? ''}\r\n    onCancel={() => {\r\n      signInMessageState.abortController.abort()\r\n    }}\r\n    directLink={`http://microsoft.com/link?otc=${code}`}\r\n  />\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"bookWrapper\":\"bookWrapper-TEaT2a\",\"bookContainer\":\"bookContainer-ozXOuS\",\"bookImages\":\"bookImages-QIgUqp\",\"outSide\":\"outSide-tdPk6N\",\"titleIcon\":\"titleIcon-FuigMg\",\"titleContent\":\"titleContent-HOFf9S\",\"insideIcon\":\"insideIcon-mvWhHG\",\"insideHalfIcon\":\"insideHalfIcon-oGVWWK\",\"inside\":\"inside-PZ2fCX\",\"uneditable\":\"uneditable-IHhvqQ\",\"page\":\"page-1nUQUw\",\"messageFormattedString\":\"messageFormattedString-MAym7w\",\"textArea\":\"textArea-CTZEzD\",\"blink\":\"blink-k8j9re\",\"controlPrev\":\"controlPrev-lG4k_N\",\"controlNext\":\"controlNext-KXyao4\",\"actions\":\"actions-Puvqtl\",\"pageAnimation\":\"pageAnimation-A9GdFI\",\"titleAnimation\":\"titleAnimation-DE4b6h\",\"titleContentAnimation\":\"titleContentAnimation-VkNFpG\",\"insideAnimation\":\"insideAnimation-ztZegY\",\"pageTextAnimation\":\"pageTextAnimation-FFgFRV\",\"pageSecondTextAnimation\":\"pageSecondTextAnimation-II5__1\",\"hidden\":\"hidden-W0KfLq\",\"titleAnimationReverse\":\"titleAnimationReverse-FRokqy\",\"titleContentAnimationReverse\":\"titleContentAnimationReverse-UxVYyT\",\"insideAnimationReverse\":\"insideAnimationReverse-wRiH6k\",\"pageAnimationReverse\":\"pageAnimationReverse-I_oYqS\",\"pageTextAnimationReverse\":\"pageTextAnimationReverse-OqcZ1i\",\"pageSecondTextAnimationReverse\":\"pageSecondTextAnimationReverse-iU27Jz\",\"pageButtonAnimationReverse\":\"pageButtonAnimationReverse-lx7O3V\",\"text\":\"text-PsAhko\"};","import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport insideIcon from './book_icons/book.webp'\r\nimport insideHalfIcon from './book_icons/book-half.webp'\r\nimport singlePageInsideIcon from './book_icons/notebook.webp'\r\nimport titleIcon from './book_icons/title.webp'\r\nimport styles from './Book.module.css'\r\nimport Button from './Button'\r\nimport MessageFormattedString from './MessageFormattedString'\r\n\r\nexport interface BookProps {\r\n  textPages: string[]\r\n  editable: boolean\r\n  onSign: (textPages: string[], title: string) => void\r\n  onEdit: (textPages: string[]) => void\r\n  onClose: () => void\r\n  author: string\r\n}\r\n\r\nconst Book: React.FC<BookProps> = ({ textPages, editable, onSign, onEdit, onClose, author }) => {\r\n  const [pages, setPages] = useState<string[]>(textPages)\r\n  const [currentPage, setCurrentPage] = useState(0)\r\n  const [isSinglePage, setIsSinglePage] = useState(window.innerWidth < 972)\r\n  const [insideImage, setInsideImage] = useState(window.innerWidth < 972 ? singlePageInsideIcon : insideIcon)\r\n  const [animateInsideIcon, setAnimateInsideIcon] = useState(0)\r\n  const [animatePageIcon, setAnimatePageIcon] = useState(0)\r\n  const [animateTitleIcon, setAnimateTitleIcon] = useState(0)\r\n  const [signClickedOnce, setSignClickedOnce] = useState(false)\r\n  const textAreaRefs = useRef<HTMLTextAreaElement[]>([])\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  const handleResize = useCallback(() => {\r\n    const isSingle = window.innerWidth < 972\r\n    setIsSinglePage(isSingle)\r\n    setInsideImage(isSingle ? singlePageInsideIcon : insideIcon)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    handleResize()\r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [handleResize])\r\n\r\n  useEffect(() => {\r\n    const index = currentPage * (isSinglePage ? 1 : 2)\r\n    if (textAreaRefs.current[index]) textAreaRefs.current[index].focus()\r\n  }, [currentPage, isSinglePage])\r\n\r\n  useEffect(() => {\r\n    if (signClickedOnce) {\r\n      setTimeout(() => {\r\n        inputRef.current!.focus()\r\n      }, 300) // wait for animation\r\n    }\r\n  }, [signClickedOnce])\r\n\r\n  const handlePageChange = (direction: number) => {\r\n    setCurrentPage((prevPage) => Math.min(Math.max(prevPage + direction, 0), Math.ceil(pages.length / (isSinglePage ? 1 : 2)) - 1))\r\n  }\r\n\r\n  const updatePage = (index, text) => {\r\n    setPages((prevPages) => {\r\n      const updatedPages = [...prevPages]\r\n      updatedPages[index] = text\r\n      return updatedPages\r\n    })\r\n  }\r\n\r\n  const handleTextChange = (e, pageIndex) => {\r\n    const text = e.target.value\r\n    updatePage(pageIndex, text)\r\n\r\n    const nextPageIndex = pageIndex + 1\r\n    const isMaxLengthReached = text.length >= e.target.maxLength\r\n\r\n    if (isMaxLengthReached) {\r\n      if (nextPageIndex < pages.length) {\r\n        setCurrentPage(Math.floor(nextPageIndex / (isSinglePage ? 1 : 2)))\r\n      } else {\r\n        setPages((prevPages) => [...prevPages, ''])\r\n        setCurrentPage(Math.floor(nextPageIndex / (isSinglePage ? 1 : 2)))\r\n      }\r\n      textAreaRefs.current[nextPageIndex]?.focus()\r\n    } else if (text === '' && pageIndex > 0 && e.nativeEvent.inputType === 'deleteContentBackward') {\r\n      setCurrentPage(Math.floor((pageIndex - 1) / (isSinglePage ? 1 : 2)))\r\n      textAreaRefs.current[pageIndex - 1]?.focus()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const index = currentPage * (isSinglePage ? 1 : 2)\r\n    textAreaRefs.current[index]?.focus()\r\n  }, [currentPage, isSinglePage])\r\n\r\n  const handlePaste = (e: React.ClipboardEvent<HTMLTextAreaElement>, pageIndex: number) => {\r\n    const pasteText = e.clipboardData.getData('text')\r\n    const updatedPages = [...pages]\r\n    const currentText = updatedPages[pageIndex]\r\n    const selectionStart = e.currentTarget.selectionStart || 0\r\n    const selectionEnd = e.currentTarget.selectionEnd || 0\r\n\r\n    const newText = currentText.slice(0, selectionStart) + pasteText + currentText.slice(selectionEnd)\r\n    updatedPages[pageIndex] = newText\r\n    setPages(updatedPages)\r\n\r\n    if (newText.length > e.currentTarget.maxLength) {\r\n      const remainingText = newText.slice(e.currentTarget.maxLength)\r\n      updatedPages[pageIndex] = newText.slice(0, e.currentTarget.maxLength)\r\n      setPages(updatedPages)\r\n\r\n      const nextPageIndex = pageIndex + 1\r\n\r\n      if (nextPageIndex < pages.length) {\r\n        handlePasteRemainingText(remainingText, nextPageIndex)\r\n      } else {\r\n        setPages((prevPages) => [...prevPages, remainingText])\r\n        setCurrentPage(Math.floor(nextPageIndex / (isSinglePage ? 1 : 2)))\r\n        focusOnTextArea(nextPageIndex)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handlePasteRemainingText = (remainingText: string, nextPageIndex: number) => {\r\n    const updatedPages = [...pages]\r\n    updatedPages[nextPageIndex] = remainingText\r\n    setPages(updatedPages)\r\n    focusOnTextArea(nextPageIndex)\r\n  }\r\n\r\n  const focusOnTextArea = (index: number) => {\r\n    setTimeout(() => {\r\n      textAreaRefs.current[index]?.focus()\r\n    }, 0)\r\n  }\r\n\r\n  const handleSign = useCallback(() => {\r\n    if (editable && signClickedOnce) {\r\n      const title = inputRef.current?.value || ''\r\n      onSign(pages, title)\r\n    }\r\n    setSignClickedOnce(true)\r\n    setAnimatePageIcon(1)\r\n    setAnimateInsideIcon(1)\r\n    setTimeout(() => {\r\n      setAnimateTitleIcon(1)\r\n    }, 150)\r\n  }, [pages, onSign, editable, signClickedOnce])\r\n\r\n  const handleEdit = useCallback(() => {\r\n    setSignClickedOnce(false)\r\n    onEdit(pages)\r\n  }, [pages, onEdit])\r\n\r\n  const handleCancel = useCallback(() => {\r\n    if (signClickedOnce) {\r\n      setSignClickedOnce(false)\r\n      setAnimateTitleIcon(2)\r\n      setTimeout(() => {\r\n        setAnimateInsideIcon(2)\r\n        setTimeout(() => {\r\n          setAnimatePageIcon(2)\r\n        }, 150)\r\n      }, 150)\r\n    } else {\r\n      onClose()\r\n    }\r\n  }, [signClickedOnce, onClose])\r\n\r\n  const setRef = (index: number) => (el: HTMLTextAreaElement | null) => {\r\n    textAreaRefs.current[index] = el!\r\n  }\r\n\r\n  const getAnimationClass = (animationState, baseClass) => {\r\n    switch (animationState) {\r\n      case 1:\r\n        return `${baseClass} ${styles.pageAnimation}`\r\n      case 2:\r\n        return `${baseClass} ${styles.pageAnimationReverse}`\r\n      default:\r\n        return baseClass\r\n    }\r\n  }\r\n\r\n  const renderPage = (index) => (\r\n    <div className={styles.page} key={index}>\r\n      {editable ? (\r\n        <textarea\r\n          onContextMenu={(e) => {\r\n            e.stopPropagation() // allow to open system context menu on text area for better UX\r\n          }}\r\n          ref={setRef(index)}\r\n          value={pages[index]}\r\n          onChange={(e) => handleTextChange(e, index)}\r\n          onPaste={(e) => handlePaste(e, index)}\r\n          className={getAnimationClass(animatePageIcon, styles.textArea)}\r\n          maxLength={500}\r\n        />\r\n      ) : (\r\n        <div className={getAnimationClass(animatePageIcon, '')}>\r\n          <MessageFormattedString message={pages[index]} fallbackColor='black' className={styles.messageFormattedString} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div className={styles.bookWrapper}>\r\n      <div className={styles.bookContainer}>\r\n        <img\r\n          src={insideImage}\r\n          className={`${styles.insideIcon} ${\r\n            animateInsideIcon === 1\r\n              ? styles.insideAnimation\r\n              : animateTitleIcon === 2\r\n                ? styles.insideAnimationReverse\r\n                : ''\r\n          }`}\r\n          alt=\"inside Icon\"\r\n        />\r\n        <img\r\n          src={insideHalfIcon}\r\n          className={`${styles.insideHalfIcon} ${\r\n            animatePageIcon === 1\r\n              ? styles.pageAnimation\r\n              : animatePageIcon === 2\r\n                ? styles.pageAnimationReverse\r\n                : ''\r\n          }`}\r\n          alt=\"inside Page Icon\"\r\n        />\r\n        <img\r\n          src={titleIcon}\r\n          className={`${styles.titleIcon} ${\r\n            animateTitleIcon === 1\r\n              ? styles.titleAnimation\r\n              : animateTitleIcon === 2\r\n                ? styles.titleAnimationReverse\r\n                : ''\r\n          }`}\r\n          alt=\"Title Icon\"\r\n        />\r\n        <div className={`${styles.inside}`}>\r\n          {renderPage(currentPage * (isSinglePage ? 1 : 2))}\r\n          {!isSinglePage && (currentPage * 2 + 1) < pages.length && renderPage(currentPage * 2 + 1)}\r\n          <Button\r\n            className={`${styles.controlPrev} ${\r\n              animateInsideIcon === 1\r\n                ? styles.hidden\r\n                : animateInsideIcon === 2\r\n                  ? styles.pageButtonAnimationReverse\r\n                  : ''\r\n            }`}\r\n            onClick={() => handlePageChange(-1)}\r\n            disabled={currentPage === 0}\r\n          >\r\n            {' '}\r\n          </Button>\r\n          <Button\r\n            className={`${styles.controlNext} ${\r\n              animateInsideIcon === 1\r\n                ? styles.hidden\r\n                : animateInsideIcon === 2\r\n                  ? styles.pageButtonAnimationReverse\r\n                  : ''\r\n            }`}\r\n            onClick={() => handlePageChange(1)}\r\n            disabled={(currentPage + 1) * (isSinglePage ? 1 : 2) >= pages.length}\r\n          >\r\n            {' '}\r\n          </Button>\r\n        </div>\r\n        <div\r\n          className={`${styles.outSide} ${\r\n            animateTitleIcon === 1\r\n              ? styles.titleContentAnimation\r\n              : animateTitleIcon === 2\r\n                ? styles.titleContentAnimationReverse\r\n                : ''\r\n          }`}\r\n        >\r\n          {editable ? (\r\n            <div className={`${styles.titleContent}`} >\r\n              <MessageFormattedString message=\"Enter Book Title: \" />\r\n              <form onSubmit={(e) => {\r\n                e.preventDefault()\r\n                handleSign()\r\n              }}\r\n              >\r\n                <input\r\n                  ref={inputRef}\r\n                  className=\"\"\r\n                />\r\n                {/* for some reason this is needed to make Enter work on android chrome */}\r\n                <button type='submit' style={{ visibility: 'hidden', height: 0, width: 0 }} />\r\n              </form>\r\n              <MessageFormattedString message={`by ${author}`} />\r\n              <br />\r\n              <MessageFormattedString message=\"Note! When you sign the book, it will no longer be editable.\" />\r\n            </div>\r\n          ) : (\r\n            <div className={`${styles.titleContent}`} >\r\n              <MessageFormattedString message=\"Book Name Here\" />\r\n              <br />\r\n              <MessageFormattedString message=\"by: Author\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className={styles.actions}>\r\n        {editable && (\r\n          <Button onClick={handleSign}>\r\n            {signClickedOnce ? 'Sign and Save' : 'Sign'}\r\n          </Button>\r\n        )}\r\n\r\n        {editable && !signClickedOnce && <Button onClick={handleSign}>Sign</Button>}\r\n        {editable && !signClickedOnce && <Button onClick={handleEdit}>Edit</Button>}\r\n        <Button onClick={handleCancel}>{signClickedOnce ? 'Cancel' : 'Close'}</Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Book\r\n","import { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport nbt from 'prismarine-nbt'\r\nimport { useEffect, useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport mojangson from 'mojangson'\r\nimport { activeModalStack, hideCurrentModal, showModal } from '../globalState'\r\nimport Book from './Book'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\ninterface OpenedBook {\r\n  pages: string[]\r\n  title: string\r\n  author: string\r\n  isEditable: boolean\r\n}\r\n\r\nexport default () => {\r\n  const modalActive = useIsModalActive('book')\r\n  // const modalStack = useSnapshot(activeModalStack)\r\n  const [openedBook, setOpenedBook] = useState<OpenedBook | null>(null)\r\n\r\n  const signEditBook = (pages: string[], title: string | undefined) => {\r\n    if (versionToNumber(bot.version) < versionToNumber('1.17.2')) {\r\n      if (title === undefined) {\r\n        void bot.writeBook(bot.inventory.hotbarStart + bot.quickBarSlot, pages)\r\n      } else {\r\n        //@ts-expect-error\r\n        // slot, pages, author, title\r\n        bot.signBook(bot.inventory.hotbarStart + bot.quickBarSlot, pages, title, bot.username)\r\n      }\r\n      hideCurrentModal()\r\n      return\r\n    }\r\n    const currentSlot = bot.quickBarSlot\r\n    // mineflayer has wrong implementation of this action after 1.17.2\r\n    if (title === undefined) {\r\n      bot._client.write('edit_book', {\r\n        hand: currentSlot,\r\n        pages\r\n      })\r\n    } else {\r\n      bot._client.write('edit_book', {\r\n        hand: currentSlot,\r\n        pages,\r\n        title\r\n      })\r\n    }\r\n    hideCurrentModal()\r\n  }\r\n\r\n  // test: /give @p minecraft:written_book{pages:['{\"text\":\"§4This is red text. §lThis is bold text.\"}'],title:\"Book\",author:\"Author\"}\r\n  useEffect(() => {\r\n    const openBookWithNbt = () => {\r\n      if (activeModalStack.at(-1)?.reactType === 'book') {\r\n        hideCurrentModal()\r\n      }\r\n      const book = bot.inventory.slots[bot.inventory.hotbarStart + bot.quickBarSlot]\r\n      if (!book?.nbt) return\r\n      // {\"type\":\"compound\",\"name\":\"\",\"value\":{\"title\":{\"type\":\"string\",\"value\":\"yes\"},\"author\":{\"type\":\"string\",\"value\":\"bot\"},\"pages\":{\"type\":\"list\",\"value\":{\"type\":\"string\",\"value\":[\"{\\\"text\\\":\\\"1\\\"}\",\"{\\\"text\\\":\\\"4\\\"}\",\"{\\\"text\\\":\\\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\\\"}\"]}\r\n      const parsedData = nbt.simplify(book.nbt as any)\r\n      if (!parsedData.pages) return\r\n      const pages = parsedData.pages.map((page) => {\r\n        if (book.name !== 'written_book') return page\r\n        const parsedPage = mojangson.simplify(mojangson.parse(page))\r\n        return parsedPage.text ?? page\r\n      })\r\n      // const {title, author} = parsedData\r\n      setOpenedBook({\r\n        pages,\r\n        title: parsedData.title ?? '',\r\n        author: parsedData.author ?? '',\r\n        isEditable: book.name === 'writable_book',\r\n      })\r\n      showModal({ reactType: 'book' })\r\n    }\r\n    customEvents.on('activateItem', (item) => {\r\n      if (item.name === 'writable_book') {\r\n        if (item.nbt?.value.pages) {\r\n          openBookWithNbt()\r\n        } else {\r\n          setOpenedBook({\r\n            pages: [],\r\n            title: '',\r\n            author: '',\r\n            isEditable: true,\r\n          })\r\n          showModal({ reactType: 'book' })\r\n        }\r\n      }\r\n    })\r\n    bot._client.on('open_book', openBookWithNbt)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (modalActive) return\r\n    setOpenedBook(null)\r\n  }, [modalActive])\r\n\r\n  if (!openedBook) return null\r\n  return <Book\r\n    textPages={openedBook.pages}\r\n    editable={openedBook.isEditable}\r\n    onSign={(pages, title) => signEditBook(pages, title)}\r\n    onEdit={(pages) => signEditBook(pages, undefined)}\r\n    onClose={() => {\r\n      hideCurrentModal()\r\n    }}\r\n    author={bot.username}\r\n  />\r\n}\r\n","import type { BossBar as BossBarTypeRaw } from 'mineflayer'\r\nimport { useState, useEffect } from 'react'\r\nimport MessageFormattedString from './MessageFormattedString'\r\nimport './BossBarOverlay.css'\r\n\r\nconst colors = ['pink', 'blue', 'red', 'green', 'yellow', 'purple', 'white']\r\nconst divs = [0, 6, 10, 12, 20]\r\n\r\nexport type BossBarType = BossBarTypeRaw & {\r\n  // todo why not use public properties?\r\n  title: string | Record<string, any> | null,\r\n  _title: string | Record<string, any> | null,\r\n  _color: string,\r\n  _dividers: number,\r\n  _health: number,\r\n  lastUpdated: number\r\n}\r\n\r\nexport default ({ bar }: { bar: BossBarType }) => {\r\n  const [title, setTitle] = useState({})\r\n  const [bossBarStyles, setBossBarStyles] = useState<{ [key: string]: string | number }>({})\r\n  const [fillStyles, setFillStyles] = useState<{ [key: string]: string | number }>({})\r\n  const [div1Styles, setDiv1Styles] = useState<{ [key: string]: string | number }>({})\r\n  const [div2Styles, setDiv2Styles] = useState<{ [key: string]: string | number }>({})\r\n\r\n  useEffect(() => {\r\n    setTitle(bar._title ?? bar.title)\r\n    setBossBarStyles(prevStyles => ({\r\n      ...prevStyles,\r\n      backgroundPositionY: `-${colors.indexOf(bar._color) * 10}px`\r\n    }))\r\n    setFillStyles(prevStyles => ({\r\n      ...prevStyles,\r\n      width: `${bar._health * 100}%`,\r\n      backgroundPositionY: `-${colors.indexOf(bar._color) * 10 + 5}px`\r\n    }))\r\n    setDiv1Styles(prevStyles => ({\r\n      ...prevStyles,\r\n      backgroundPositionY: `-${divs.indexOf(bar._dividers) * 10 + 70}px`\r\n    }))\r\n    setDiv2Styles(prevStyles => ({\r\n      ...prevStyles,\r\n      width: `${bar._health * 100}%`,\r\n      backgroundPositionY: `-${divs.indexOf(bar._dividers) * 10 + 75}px`\r\n    }))\r\n  }, [bar])\r\n\r\n  return (\r\n    <div className=\"bossbar-container\">\r\n      <div className=\"bossbar-title\"><MessageFormattedString message={title} /></div>\r\n      <div className=\"bossbar\" style={bossBarStyles}>\r\n        <div className=\"fill\" style={fillStyles} />\r\n        <div className=\"fill\" style={div1Styles} />\r\n        <div className=\"fill\" style={div2Styles} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { miscUiState } from '../globalState'\r\nimport './BossBarOverlay.css'\r\nimport BossBar, { BossBarType } from './BossBarOverlay'\r\n\r\n\r\nexport default () => {\r\n  const { currentTouch } = useSnapshot(miscUiState)\r\n  const [bossBars, setBossBars] = useState(new Map<string, BossBarType>())\r\n  const addBossBar = (bossBar: BossBarType) => {\r\n    setBossBars(prevBossBars => new Map(prevBossBars.set(bossBar.entityUUID, {\r\n      ...bossBar,\r\n      lastUpdated: Date.now()\r\n    })))\r\n  }\r\n\r\n  const removeBossBar = (bossBar: BossBarType) => {\r\n    setBossBars(prevBossBars => {\r\n      const newBossBars = new Map(prevBossBars)\r\n      newBossBars.delete(bossBar.entityUUID)\r\n      return newBossBars\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    bot.on('bossBarCreated', (bossBar) => {\r\n      addBossBar(bossBar as BossBarType)\r\n    })\r\n    bot.on('bossBarUpdated', (bossBar) => {\r\n      if (!bossBar) return\r\n      addBossBar(bossBar as BossBarType)\r\n    })\r\n    bot.on('bossBarDeleted', (bossBar) => {\r\n      if (!bossBar) return\r\n      removeBossBar(bossBar as BossBarType)\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <div className={`bossBars ${currentTouch ? 'mobile' : ''}`} id=\"bossBars\">\r\n      {[...bossBars.values()].map(bar => (\r\n        <BossBar key={`${bar.entityUUID}-${bar.lastUpdated}`} bar={bar} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"root\":\"root-FJmcB2\",\"header\":\"header-Ix2S76\",\"statsRow\":\"statsRow-shytw2\",\"searchBar\":\"searchBar-Cmb3Xu\",\"content\":\"content-hDiNMy\",\"verticalContent\":\"verticalContent-XZ5gwH\",\"modList\":\"modList-ADWwNJ\",\"sidebar\":\"sidebar-UQ__eQ\",\"modInfo\":\"modInfo-S_rGad\",\"modInfoTitle\":\"modInfoTitle-UEbS6D\",\"modInfoText\":\"modInfoText-Ir1Jnc\",\"modActions\":\"modActions-nnN4Dq\",\"modRow\":\"modRow-uBWc0w\",\"modRowTitle\":\"modRowTitle-wMBzQF\",\"modRowInfo\":\"modRowInfo-o12SaU\",\"repoHeader\":\"repoHeader-JeRvxn\",\"repoContent\":\"repoContent-SI7GNl\",\"modErrorList\":\"modErrorList-eFLdFJ\",\"fieldEditorTextarea\":\"fieldEditorTextarea-RKqvDd\"};","import { useEffect, useState, useMemo, useRef } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { openURL } from 'renderer/viewer/lib/simpleUtils'\r\nimport { addRepositoryAction, setEnabledModAction, getAllModsDisplayList, installModByName, selectAndRemoveRepository, uninstallModAction, fetchAllRepositories, modsReactiveUpdater, modsErrors, fetchRepository, getModModifiableFields, saveClientModData, getAllModsModifiableFields, callMethodAction } from '../clientMods'\r\nimport { createNotificationProgressReporter, ProgressReporter } from '../core/progressReporter'\r\nimport { hideModal } from '../globalState'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport Input from './Input'\r\nimport Button from './Button'\r\nimport styles from './mods.module.css'\r\nimport { showOptionsModal, showInputsModal } from './SelectOption'\r\nimport Screen from './Screen'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport { showNotification } from './NotificationProvider'\r\nimport { usePassesScaledDimensions } from './UIProvider'\r\nimport { appStorage } from './appStorageProvider'\r\n\r\ntype ModsData = Awaited<ReturnType<typeof getAllModsDisplayList>>\r\n\r\nconst ModListItem = ({\r\n  mod,\r\n  onClick,\r\n  hasError\r\n}: {\r\n  mod: ModsData['repos'][0]['packages'][0],\r\n  onClick: () => void,\r\n  hasError: boolean\r\n}) => (\r\n  <div\r\n    className={styles.modRow}\r\n    onClick={onClick}\r\n    data-enabled={mod.installed ? '' : mod.activated}\r\n    data-has-error={hasError}\r\n  >\r\n    <div className={styles.modRowTitle}>\r\n      {mod.name}\r\n      {mod.installedVersion && mod.installedVersion !== mod.version && (\r\n        <PixelartIcon\r\n          iconName={pixelartIcons['arrow-up-box']}\r\n          styles={{ fontSize: 14, marginLeft: 3 }}\r\n        />\r\n      )}\r\n    </div>\r\n    <div className={styles.modRowInfo}>\r\n      {mod.description}\r\n      {mod.author && ` • By ${mod.author}`}\r\n      {mod.version && ` • v${mod.version}`}\r\n      {mod.serverPlugin && ` • World plugin`}\r\n    </div>\r\n  </div>\r\n)\r\n\r\nconst ModSidebar = ({ mod }: { mod: (ModsData['repos'][0]['packages'][0] & { repo?: string }) | null }) => {\r\n  const errors = useSnapshot(modsErrors)\r\n  const [editingField, setEditingField] = useState<{ name: string, content: string, language: string } | null>(null)\r\n\r\n  const handleAction = async (action: () => Promise<void>, errorMessage: string, progress?: ProgressReporter) => {\r\n    try {\r\n      await action()\r\n      progress?.end()\r\n    } catch (error) {\r\n      console.error(error)\r\n      progress?.end()\r\n      showNotification(errorMessage, error.message, true)\r\n    }\r\n  }\r\n\r\n  if (!mod) {\r\n    return <div className={styles.modInfoText}>Select a mod to view details</div>\r\n  }\r\n\r\n  const modifiableFields = mod.installed ? getModModifiableFields(mod.installed) : []\r\n\r\n  const handleSaveField = async (newContents: string) => {\r\n    if (!editingField) return\r\n    try {\r\n      mod[editingField.name] = newContents\r\n      mod.wasModifiedLocally = true\r\n      await saveClientModData(mod)\r\n      setEditingField(null)\r\n      showNotification('Success', 'Contents saved successfully')\r\n    } catch (error) {\r\n      showNotification('Error', 'Failed to save contents: ' + error.message, true)\r\n    }\r\n  }\r\n\r\n  if (editingField) {\r\n    return (\r\n      <EditingCodeWindow\r\n        contents={editingField.content}\r\n        language={editingField.language}\r\n        onClose={newContents => {\r\n          if (newContents === undefined) {\r\n            setEditingField(null)\r\n            return\r\n          }\r\n          void handleSaveField(newContents)\r\n        }}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.modInfo}>\r\n        <div className={styles.modInfoTitle}>\r\n          {mod.name} {mod.installed?.wasModifiedLocally ? '(modified)' : ''}\r\n        </div>\r\n        <div className={styles.modInfoText}>\r\n          {mod.description}\r\n        </div>\r\n        <div className={styles.modInfoText}>\r\n          {mod.author && `Author: ${mod.author}\\n`}\r\n          {mod.version && `Version: ${mod.version}\\n`}\r\n          {mod.installedVersion && mod.installedVersion !== mod.version && `Installed version: ${mod.installedVersion}\\n`}\r\n          {mod.section && `Section: ${mod.section}\\n`}\r\n        </div>\r\n        {errors[mod.name]?.length > 0 && (\r\n          <div className={styles.modErrorList}>\r\n            <ul>\r\n              {errors[mod.name].map((error, i) => (\r\n                <li key={i}>{error}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={styles.modActions}>\r\n        {mod.installed ? (\r\n          <>\r\n            {mod.activated ? (\r\n              <Button\r\n                onClick={async () => handleAction(\r\n                  async () => setEnabledModAction(mod.name, false),\r\n                  'Failed to disable mod:'\r\n                )}\r\n                icon={pixelartIcons['remove-box']}\r\n                title=\"Disable\"\r\n              />\r\n            ) : (\r\n              <Button\r\n                onClick={async () => handleAction(\r\n                  async () => setEnabledModAction(mod.name, true),\r\n                  'Failed to enable mod:'\r\n                )}\r\n                icon={pixelartIcons['add-box']}\r\n                title=\"Enable\"\r\n                disabled={!mod.canBeActivated}\r\n              />\r\n            )}\r\n            <Button\r\n              onClick={async () => handleAction(\r\n                async () => uninstallModAction(mod.name),\r\n                'Failed to uninstall mod:'\r\n              )}\r\n              icon={pixelartIcons.trash}\r\n              title=\"Delete\"\r\n            />\r\n            {mod.installedVersion && mod.installedVersion !== mod.version && (\r\n              <Button\r\n                onClick={async () => {\r\n                  if (!mod.repo) return\r\n                  const progress = createNotificationProgressReporter(`${mod.name} updated and activated`)\r\n                  await handleAction(\r\n                    async () => {\r\n                      await installModByName(mod.repo!, mod.name, progress)\r\n                    },\r\n                    'Failed to update mod:',\r\n                    progress\r\n                  )\r\n                }}\r\n                icon={pixelartIcons['arrow-up-box']}\r\n                title=\"Update\"\r\n              />\r\n            )}\r\n            {mod.serverPlugin && (\r\n              <Button\r\n                onClick={async () => {\r\n                  const url = new URL(window.location.href)\r\n                  url.searchParams.set('sp', '1')\r\n                  url.searchParams.set('serverPlugin', mod.name)\r\n                  openURL(url.toString())\r\n                }}\r\n                icon={pixelartIcons.play}\r\n                title=\"Try in blank world\"\r\n              />\r\n            )}\r\n          </>\r\n        ) : (\r\n          <Button\r\n            onClick={async () => {\r\n              if (!mod.repo) return\r\n              const progress = createNotificationProgressReporter(`${mod.name} installed and enabled`)\r\n              await handleAction(\r\n                async () => {\r\n                  await installModByName(mod.repo!, mod.name, progress)\r\n                },\r\n                'Failed to install & activate mod:',\r\n                progress\r\n              )\r\n            }}\r\n            icon={pixelartIcons.download}\r\n            title=\"Install\"\r\n          />\r\n        )}\r\n        {modifiableFields.length > 0 && (\r\n          <Button\r\n            onClick={async (e) => {\r\n              const fields = e.shiftKey ? getAllModsModifiableFields() : modifiableFields\r\n              const result = await showInputsModal('Edit Mod Field', Object.fromEntries(fields.map(field => {\r\n                return [field.field, {\r\n                  type: 'button' as const,\r\n                  label: field.label,\r\n                  onButtonClick () {\r\n                    setEditingField({\r\n                      name: field.field,\r\n                      content: field.getContent?.() || mod.installed![field.field] || '',\r\n                      language: field.language\r\n                    })\r\n                  }\r\n                }]\r\n              })), {\r\n                showConfirm: false\r\n              })\r\n            }}\r\n            icon={pixelartIcons['edit']}\r\n            title=\"Edit Mod\"\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {window.loadedMods?.[mod.name] && mod.actionsMain && (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\r\n          Actions:\r\n          {Object.entries(mod.actionsMain).map(([key, setting]) => (\r\n            <div\r\n              key={key} onClick={() => {\r\n                void callMethodAction(mod.name, 'main', key)\r\n              }}>{key}</div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nconst EditingCodeWindow = ({\r\n  contents,\r\n  language,\r\n  onClose\r\n}: {\r\n  contents: string,\r\n  language: string,\r\n  onClose: (newContents?: string) => void\r\n}) => {\r\n  const ref = useRef<HTMLTextAreaElement>(null)\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        e.preventDefault()\r\n        e.stopImmediatePropagation()\r\n      }\r\n    }\r\n    window.addEventListener('keydown', handleKeyDown, { capture: true })\r\n    return () => window.removeEventListener('keydown', handleKeyDown, { capture: true })\r\n  }, [])\r\n\r\n  return <Screen title=\"Editing code\">\r\n    <div className=\"\">\r\n      <textarea\r\n        ref={ref}\r\n        className={styles.fieldEditorTextarea}\r\n        defaultValue={contents}\r\n      />\r\n      <Button\r\n        style={{ position: 'absolute', bottom: 10, left: 10, backgroundColor: 'red' }}\r\n        onClick={() => onClose(undefined)}\r\n        icon={pixelartIcons.close}\r\n        title=\"Cancel\"\r\n      />\r\n      <Button\r\n        style={{ position: 'absolute', bottom: 10, right: 10, backgroundColor: '#4CAF50' }}\r\n        onClick={() => onClose(ref.current?.value)}\r\n        icon={pixelartIcons.check}\r\n        title=\"Save\"\r\n      />\r\n    </div>\r\n  </Screen>\r\n}\r\n\r\nexport default () => {\r\n  const isModalActive = useIsModalActive('mods', true)\r\n  const [modsData, setModsData] = useState<ModsData | null>(null)\r\n  const [search, setSearch] = useState('')\r\n  const [showOnlyInstalled, setShowOnlyInstalled] = useState(false)\r\n  const [showOnlyEnabled, setShowOnlyEnabled] = useState(false)\r\n  const [selectedModIndex, setSelectedModIndex] = useState<number | null>(null)\r\n  const [expandedRepos, setExpandedRepos] = useState<Record<string, boolean>>({})\r\n  const useHorizontalLayout = usePassesScaledDimensions(400)\r\n  const { counter } = useSnapshot(modsReactiveUpdater)\r\n  const errors = useSnapshot(modsErrors)\r\n\r\n  const allModsArray = useMemo(() => {\r\n    if (!modsData) return []\r\n    return [\r\n      ...modsData.repos.flatMap(repo => repo.packages.map(mod => ({ ...mod, repo: repo.url }))),\r\n      ...modsData.modsWithoutRepos\r\n    ]\r\n  }, [modsData])\r\n\r\n  useEffect(() => {\r\n    if (isModalActive) {\r\n      if (appStorage.firstModsPageVisit) {\r\n        appStorage.firstModsPageVisit = false\r\n        const defaultRepo = 'zardoy/mcraft-client-mods'\r\n        void fetchRepository(defaultRepo, defaultRepo)\r\n      }\r\n      void getAllModsDisplayList().then(mods => {\r\n        setModsData(mods)\r\n        // Update selected mod index if needed\r\n        if (selectedModIndex !== null && selectedModIndex < allModsArray.length) {\r\n          setSelectedModIndex(selectedModIndex)\r\n        }\r\n      })\r\n    }\r\n  }, [isModalActive, counter])\r\n\r\n  if (!isModalActive) return null\r\n\r\n  const toggleRepo = (repoUrl: string) => {\r\n    setExpandedRepos(prev => ({\r\n      ...prev,\r\n      [repoUrl]: !prev[repoUrl]\r\n    }))\r\n  }\r\n\r\n  const modFilter = (mod: ModsData['repos'][0]['packages'][0]) => {\r\n    const matchesSearch = mod.name.toLowerCase().includes(search.toLowerCase()) ||\r\n      mod.description?.toLowerCase().includes(search.toLowerCase())\r\n    const matchesInstalledFilter = !showOnlyInstalled || mod.installed\r\n    const matchesEnabledFilter = !showOnlyEnabled || mod.activated\r\n    return matchesSearch && matchesInstalledFilter && matchesEnabledFilter\r\n  }\r\n\r\n  const filteredMods = modsData ? {\r\n    repos: modsData.repos.map(repo => ({\r\n      ...repo,\r\n      packages: repo.packages.filter(modFilter)\r\n    })),\r\n    modsWithoutRepos: modsData.modsWithoutRepos.filter(modFilter)\r\n  } : null\r\n\r\n  const filteredModsCount = filteredMods ?\r\n    filteredMods.repos.reduce((acc, repo) => acc + repo.packages.length, 0) + filteredMods.modsWithoutRepos.length : 0\r\n\r\n  const totalRepos = modsData?.repos.length ?? 0\r\n\r\n  const getStatsText = () => {\r\n    if (!filteredMods) return 'Loading...'\r\n    if (showOnlyEnabled) {\r\n      return `Showing ${filteredMods.repos.reduce((acc, repo) => acc + repo.packages.filter(mod => mod.activated).length, 0)} enabled mods in ${totalRepos} repos`\r\n    } else if (showOnlyInstalled) {\r\n      return `Showing ${filteredMods.repos.reduce((acc, repo) => acc + repo.packages.filter(mod => mod.installed).length, 0)} installed mods in ${totalRepos} repos`\r\n    }\r\n    return `Showing all ${totalRepos} repos with ${filteredModsCount} mods`\r\n  }\r\n\r\n  const selectedMod = selectedModIndex === null ? null : allModsArray[selectedModIndex]\r\n\r\n  return <Screen backdrop=\"dirt\" title=\"Client Mods (Preview)\" titleMarginTop={0} contentStyle={{ paddingTop: 15, height: '100%', width: '100%' }}>\r\n    <Button\r\n      icon={pixelartIcons['close']}\r\n      onClick={() => {\r\n        hideModal()\r\n      }}\r\n      style={{\r\n        color: '#ff5d5d',\r\n        position: 'fixed',\r\n        top: 10,\r\n        left: 20\r\n      }}\r\n    />\r\n    <div className={styles.root}>\r\n      <div className={styles.header}>\r\n        <Button\r\n          style={{}}\r\n          icon={pixelartIcons['sliders']}\r\n          onClick={() => {\r\n            if (showOnlyEnabled) {\r\n              setShowOnlyEnabled(false)\r\n            } else if (showOnlyInstalled) {\r\n              setShowOnlyInstalled(false)\r\n              setShowOnlyEnabled(true)\r\n            } else {\r\n              setShowOnlyInstalled(true)\r\n            }\r\n          }}\r\n          title={showOnlyEnabled ? 'Show all mods' : showOnlyInstalled ? 'Show enabled mods' : 'Show installed mods'}\r\n        />\r\n        <Button\r\n          onClick={async () => {\r\n            // const refreshButton = `Refresh repositories (last update)`\r\n            const refreshButton = `Refresh repositories`\r\n            const choice = await showOptionsModal(`Manage repositories (${modsData?.repos.length ?? '-'} repos)`, ['Add repository', 'Remove repository', refreshButton])\r\n            switch (choice) {\r\n              case 'Add repository': {\r\n                await addRepositoryAction()\r\n                break\r\n              }\r\n              case 'Remove repository': {\r\n                await selectAndRemoveRepository()\r\n                break\r\n              }\r\n              case refreshButton: {\r\n                await fetchAllRepositories()\r\n                break\r\n              }\r\n              case undefined:\r\n                break\r\n            }\r\n          }}\r\n          icon={pixelartIcons['list-box']}\r\n          title=\"Manage repositories\"\r\n        />\r\n        <Input\r\n          className={styles.searchBar}\r\n          value={search}\r\n          onChange={e => setSearch(e.target.value)}\r\n          placeholder=\"Search mods in added repositories...\"\r\n          autoFocus\r\n        />\r\n      </div>\r\n      <div className={styles.statsRow}>\r\n        {getStatsText()}\r\n      </div>\r\n      <div className={`${styles.content} ${useHorizontalLayout ? '' : styles.verticalContent}`}>\r\n        <div className={styles.modList}>\r\n          {filteredMods ? (\r\n            <>\r\n              {filteredMods.repos.map(repo => (\r\n                <div key={repo.url}>\r\n                  <div\r\n                    className={styles.repoHeader}\r\n                    onClick={() => toggleRepo(repo.url)}\r\n                  >\r\n                    <span>{expandedRepos[repo.url] ? '▼' : '▶'}</span>\r\n                    <span>{repo.name || repo.url}</span>\r\n                    <span>({repo.packages.length})</span>\r\n                  </div>\r\n                  {expandedRepos[repo.url] && (\r\n                    <div className={styles.repoContent}>\r\n                      {repo.packages.map((mod) => (\r\n                        <ModListItem\r\n                          key={mod.name}\r\n                          mod={mod}\r\n                          onClick={() => setSelectedModIndex(allModsArray.findIndex(m => m.name === mod.name))}\r\n                          hasError={errors[mod.name]?.length > 0}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n              {filteredMods.modsWithoutRepos.length > 0 && (\r\n                <div>\r\n                  <div className={styles.repoHeader}>\r\n                    <span>▼</span>\r\n                    <span>Other Mods</span>\r\n                    <span>({filteredMods.modsWithoutRepos.length})</span>\r\n                  </div>\r\n                  <div className={styles.repoContent}>\r\n                    {filteredMods.modsWithoutRepos.map(mod => (\r\n                      <ModListItem\r\n                        key={mod.name}\r\n                        mod={mod}\r\n                        onClick={() => setSelectedModIndex(allModsArray.findIndex(m => m.name === mod.name))}\r\n                        hasError={errors[mod.name]?.length > 0}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div className={styles.modRowInfo}>Loading mods...</div>\r\n          )}\r\n        </div>\r\n        <div className={styles.sidebar}>\r\n          <ModSidebar mod={selectedMod} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Screen>\r\n}\r\n","import { useState } from 'react'\r\nimport { useIsHashActive } from './simpleHooks'\r\n\r\nexport default () => {\r\n  const MODES_COUNT = 5\r\n  const [mode, setMode] = useState(0)\r\n  const isHashActive = useIsHashActive('#edges')\r\n\r\n  if (!isHashActive) return null\r\n\r\n  const styles: React.CSSProperties = {\r\n    display: 'flex',\r\n    fontSize: 18,\r\n    zIndex: 10_000,\r\n    background: 'rgba(0, 0, 255, 0.5)',\r\n    border: '2px solid red',\r\n    whiteSpace: 'pre',\r\n  }\r\n  let text = ''\r\n  if (mode === 0) {\r\n    styles.position = 'fixed'\r\n    styles.inset = 0\r\n    styles.height = '100%'\r\n    text = 'inset 0 fixed 100% height'\r\n  }\r\n  if (mode === 1) {\r\n    styles.position = 'fixed'\r\n    styles.inset = 0\r\n    text = 'inset 0 fixed'\r\n  }\r\n  if (mode === 2) {\r\n    styles.position = 'absolute'\r\n    styles.inset = 0\r\n    text = 'inset 0 absolute'\r\n  }\r\n  if (mode === 3) {\r\n    styles.position = 'fixed'\r\n    styles.top = 0\r\n    styles.left = 0\r\n    styles.right = 0\r\n    styles.height = '100dvh'\r\n    text = 'top 0 fixed 100dvh'\r\n  }\r\n  if (mode === 4) {\r\n    styles.position = 'fixed'\r\n    styles.top = 0\r\n    styles.left = 0\r\n    styles.right = 0\r\n    styles.height = '100dvh'\r\n    text = 'top 0 bottom 0 fixed 100dvh'\r\n  }\r\n\r\n  return <div\r\n    style={styles}\r\n    onClick={() => {\r\n      setMode((mode + 1) % MODES_COUNT)\r\n    }}\r\n  >\r\n    {mode}: {text}{'\\n'}\r\n    inner: {window.innerWidth}x{window.innerHeight}{'\\n'}\r\n    outer: {window.outerWidth}x{window.outerHeight}{'\\n'}\r\n  </div>\r\n}\r\n","import { useRef, useEffect } from 'react'\r\nimport { subscribe, useSnapshot } from 'valtio'\r\nimport { useUtilsEffect } from '@zardoy/react-util'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { isItemActivatableMobile } from 'mineflayer-mouse/dist/activatableItemsMobile'\r\nimport { options } from '../optionsStorage'\r\nimport { activeModalStack, isGameActive, miscUiState } from '../globalState'\r\nimport { onCameraMove, CameraMoveEvent } from '../cameraRotationControls'\r\nimport { pointerLock, isInRealGameSession } from '../utils'\r\nimport { videoCursorInteraction } from '../customChannels'\r\nimport { handleMovementStickDelta, joystickPointer } from './TouchAreasControls'\r\n\r\n/** after what time of holding the finger start breaking the block */\r\nconst touchStartBreakingBlockMs = 500\r\n\r\nfunction GameInteractionOverlayInner ({\r\n  zIndex,\r\n  setJoystickOrigin,\r\n  updateJoystick\r\n}: {\r\n  zIndex: number,\r\n  setJoystickOrigin: (e: PointerEvent | null) => void\r\n  updateJoystick: (e: PointerEvent) => void\r\n}) {\r\n  const overlayRef = useRef<HTMLDivElement>(null)\r\n\r\n\r\n  useUtilsEffect(({ signal }) => {\r\n    if (!overlayRef.current) return\r\n\r\n    const cameraControlEl = overlayRef.current\r\n    let virtualClickActive = false\r\n    let virtualClickTimeout: NodeJS.Timeout | undefined\r\n    let screenTouches = 0\r\n    const capturedPointer = {\r\n      active: null as {\r\n        id: number;\r\n        x: number;\r\n        y: number;\r\n        sourceX: number;\r\n        sourceY: number;\r\n        activateCameraMove: boolean;\r\n        time: number\r\n      } | null\r\n    }\r\n\r\n    const pointerDownHandler = (e: PointerEvent) => {\r\n      const clickedEl = e.composedPath()[0]\r\n      if (!isGameActive(true) || clickedEl !== cameraControlEl || e.pointerId === undefined) {\r\n        return\r\n      }\r\n      getThreeJsRendererMethods()?.onPageInteraction()\r\n      screenTouches++\r\n      if (screenTouches === 3) {\r\n        // todo maybe mouse wheel click?\r\n      }\r\n      const usingModernMovement = options.touchMovementType === 'modern'\r\n      if (usingModernMovement) {\r\n        if (!joystickPointer.pointer && e.clientX < window.innerWidth / 2) {\r\n          cameraControlEl.setPointerCapture(e.pointerId)\r\n          setJoystickOrigin(e)\r\n          return\r\n        }\r\n      }\r\n      if (capturedPointer.active) {\r\n        return\r\n      }\r\n      cameraControlEl.setPointerCapture(e.pointerId)\r\n      capturedPointer.active = {\r\n        id: e.pointerId,\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n        sourceX: e.clientX,\r\n        sourceY: e.clientY,\r\n        activateCameraMove: false,\r\n        time: Date.now()\r\n      }\r\n      if (options.touchInteractionType === 'classic') {\r\n        virtualClickTimeout ??= setTimeout(() => {\r\n          virtualClickActive = true\r\n          // If held item is activatable, use right click instead of left\r\n          const heldItemName = bot?.heldItem?.name\r\n          const isOnlyActivatable = heldItemName && isItemActivatableMobile(heldItemName, loadedData)\r\n          document.dispatchEvent(new MouseEvent('mousedown', { button: isOnlyActivatable ? 2 : 0 }))\r\n        }, touchStartBreakingBlockMs)\r\n      }\r\n    }\r\n\r\n    const pointerMoveHandler = (e: PointerEvent) => {\r\n      if (e.pointerId === undefined) return\r\n      const scale = window.visualViewport?.scale || 1\r\n\r\n      const supportsPressure = (e as any).pressure !== undefined &&\r\n        (e as any).pressure !== 0 &&\r\n        (e as any).pressure !== 0.5 &&\r\n        (e as any).pressure !== 1 &&\r\n        (e.pointerType === 'touch' || e.pointerType === 'pen')\r\n\r\n      if (e.pointerId === joystickPointer.pointer?.pointerId) {\r\n        updateJoystick(e)\r\n        if (supportsPressure && (e as any).pressure > 0.5) {\r\n          bot.setControlState('sprint', true)\r\n        }\r\n        return\r\n      }\r\n      if (e.pointerId !== capturedPointer.active?.id) return\r\n      // window.scrollTo(0, 0)\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      const allowedJitter = 1.1\r\n      if (supportsPressure) {\r\n        bot.setControlState('jump', (e as any).pressure > 0.5)\r\n      }\r\n\r\n      // Adjust coordinates for scale\r\n      const currentX = e.clientX / scale\r\n      const currentY = e.clientY / scale\r\n      const sourceX = capturedPointer.active.sourceX / scale\r\n      const sourceY = capturedPointer.active.sourceY / scale\r\n      const lastX = capturedPointer.active.x / scale\r\n      const lastY = capturedPointer.active.y / scale\r\n\r\n      const xDiff = Math.abs(currentX - sourceX) > allowedJitter\r\n      const yDiff = Math.abs(currentY - sourceY) > allowedJitter\r\n\r\n      if (!capturedPointer.active.activateCameraMove && (xDiff || yDiff)) {\r\n        capturedPointer.active.activateCameraMove = true\r\n      }\r\n      if (capturedPointer.active.activateCameraMove) {\r\n        clearTimeout(virtualClickTimeout)\r\n      }\r\n\r\n      onCameraMove({\r\n        movementX: (currentX - lastX),\r\n        movementY: (currentY - lastY),\r\n        type: 'touchmove',\r\n        stopPropagation: () => e.stopPropagation()\r\n      } as CameraMoveEvent)\r\n\r\n      capturedPointer.active.x = e.clientX\r\n      capturedPointer.active.y = e.clientY\r\n    }\r\n\r\n    const pointerUpHandler = (e: PointerEvent) => {\r\n      if (e.pointerId === undefined) return\r\n      if (e.pointerId === joystickPointer.pointer?.pointerId) {\r\n        setJoystickOrigin(null)\r\n        return\r\n      }\r\n      if (e.pointerId !== capturedPointer.active?.id) return\r\n      clearTimeout(virtualClickTimeout)\r\n      virtualClickTimeout = undefined\r\n\r\n      if (virtualClickActive) {\r\n        // button 0 is left click\r\n        // If held item is activatable, use right click instead of left\r\n        const heldItemName = bot?.heldItem?.name\r\n        const isOnlyActivatable = heldItemName && isItemActivatableMobile(heldItemName, loadedData)\r\n        document.dispatchEvent(new MouseEvent('mouseup', { button: isOnlyActivatable ? 2 : 0 }))\r\n        virtualClickActive = false\r\n      } else if (!capturedPointer.active.activateCameraMove && (Date.now() - capturedPointer.active.time < touchStartBreakingBlockMs)) {\r\n        // single click action\r\n        const MOUSE_BUTTON_RIGHT = 2\r\n        const MOUSE_BUTTON_LEFT = 0\r\n        const heldItemName = bot?.heldItem?.name\r\n        const isOnlyActivatable = heldItemName && isItemActivatableMobile(heldItemName, loadedData)\r\n        const gonnaAttack = !!bot.mouse.getCursorState().entity || !!videoCursorInteraction()\r\n        // If not attacking entity and item is activatable, use right click for breaking\r\n        const useButton = !gonnaAttack && isOnlyActivatable ? MOUSE_BUTTON_RIGHT : (gonnaAttack ? MOUSE_BUTTON_LEFT : MOUSE_BUTTON_RIGHT)\r\n        document.dispatchEvent(new MouseEvent('mousedown', { button: useButton }))\r\n        bot.mouse.update()\r\n        document.dispatchEvent(new MouseEvent('mouseup', { button: useButton }))\r\n      }\r\n\r\n      if (screenTouches > 0) {\r\n        screenTouches--\r\n      }\r\n      capturedPointer.active = null\r\n    }\r\n\r\n    const contextMenuHandler = (e: Event) => {\r\n      e.preventDefault()\r\n    }\r\n\r\n    const blurHandler = () => {\r\n      bot.clearControlStates()\r\n    }\r\n\r\n    cameraControlEl.addEventListener('pointerdown', pointerDownHandler, { signal })\r\n    cameraControlEl.addEventListener('pointermove', pointerMoveHandler, { signal })\r\n    cameraControlEl.addEventListener('pointerup', pointerUpHandler, { signal })\r\n    cameraControlEl.addEventListener('pointercancel', pointerUpHandler, { signal })\r\n    cameraControlEl.addEventListener('lostpointercapture', pointerUpHandler, { signal })\r\n    cameraControlEl.addEventListener('contextmenu', contextMenuHandler, { signal })\r\n    window.addEventListener('blur', blurHandler, { signal })\r\n\r\n    // Add zoom detection and reset\r\n    const detectAndResetZoom = () => {\r\n      const { visualViewport } = window\r\n      if (!visualViewport) return\r\n\r\n      if (visualViewport.scale !== 1) {\r\n        // Reset zoom by updating viewport meta tag\r\n        const viewport = document.querySelector('meta[name=viewport]')\r\n        if (viewport) {\r\n          viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no')\r\n          // Force re-layout\r\n          setTimeout(() => {\r\n            viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no')\r\n          }, 300)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Listen for zoom changes\r\n    window.visualViewport?.addEventListener('resize', detectAndResetZoom, { signal })\r\n    detectAndResetZoom()\r\n\r\n    // Prevent zoom gestures\r\n    document.addEventListener('gesturestart', (e) => e.preventDefault(), { signal })\r\n    document.addEventListener('gesturechange', (e) => e.preventDefault(), { signal })\r\n    document.addEventListener('gestureend', (e) => e.preventDefault(), { signal })\r\n\r\n\r\n    // Debug method to simulate zoom\r\n    window.debugSimulateZoom = (scale = 1.1, x = 0, y = 0) => {\r\n      const viewport = document.querySelector('meta[name=viewport]')\r\n      if (viewport) {\r\n        viewport.setAttribute('content', `width=device-width, initial-scale=${scale}, user-scalable=no, viewport-fit=cover, transform-origin: ${x}px ${y}px`)\r\n      }\r\n      // This will trigger the visualViewport resize event\r\n      setTimeout(() => {\r\n        window.visualViewport?.dispatchEvent(new Event('resize'))\r\n      }, 100)\r\n    }\r\n\r\n    // Debug method to reset zoom\r\n    window.debugResetZoom = () => {\r\n      const viewport = document.querySelector('meta[name=viewport]')\r\n      if (viewport) {\r\n        viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no')\r\n      }\r\n      setTimeout(() => {\r\n        window.visualViewport?.dispatchEvent(new Event('resize'))\r\n      }, 100)\r\n    }\r\n\r\n    signal.addEventListener('abort', () => {\r\n      setJoystickOrigin(null)\r\n    })\r\n  }, [setJoystickOrigin])\r\n\r\n  return (\r\n    <OverlayElement divRef={overlayRef} zIndex={zIndex} />\r\n  )\r\n\r\n\r\n}\r\n\r\nconst OverlayElement = ({ divRef, zIndex }: { divRef: React.RefObject<HTMLDivElement>, zIndex: number }) => {\r\n  return <div\r\n    className='game-interaction-overlay'\r\n    ref={divRef}\r\n    style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      zIndex,\r\n      touchAction: 'none',\r\n      userSelect: 'none'\r\n    }}\r\n  />\r\n}\r\n\r\nexport default function GameInteractionOverlay ({ zIndex }: { zIndex: number }) {\r\n  const modalStack = useSnapshot(activeModalStack)\r\n  const { currentTouch } = useSnapshot(miscUiState)\r\n\r\n  const setJoystickOrigin = useRef((e: PointerEvent | null) => {\r\n    if (!e) {\r\n      handleMovementStickDelta()\r\n      joystickPointer.pointer = null\r\n      return\r\n    }\r\n\r\n    joystickPointer.pointer = {\r\n      pointerId: e.pointerId,\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    }\r\n  }).current\r\n\r\n  const updateJoystick = useRef((e: PointerEvent) => {\r\n    handleMovementStickDelta(e)\r\n  }).current\r\n\r\n  if (modalStack.length > 0 || !currentTouch) return null\r\n  return <GameInteractionOverlayInner\r\n    zIndex={zIndex}\r\n    setJoystickOrigin={setJoystickOrigin}\r\n    updateJoystick={updateJoystick}\r\n  />\r\n\r\n}\r\n\r\nsubscribe(activeModalStack, () => {\r\n  if (activeModalStack.length === 0) {\r\n    if (isInRealGameSession()) {\r\n      void pointerLock.requestPointerLock()\r\n    }\r\n  } else {\r\n    document.exitPointerLock?.()\r\n  }\r\n})\r\n","import { PacketData } from './ReplayPanel'\r\n\r\nfunction wildcardToRegExp (pattern: string): RegExp {\r\n  const escaped = pattern.replaceAll(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\r\n  return new RegExp(`^${escaped.replaceAll('\\\\*', '.*')}$`)\r\n}\r\n\r\nfunction patternToRegExp (pattern: string): RegExp {\r\n  if (pattern.startsWith('$')) {\r\n    return new RegExp(`^${pattern.slice(1)}$`)\r\n  }\r\n  return wildcardToRegExp(`*${pattern}*`)\r\n}\r\n\r\nexport function parseFilterString (filter: string): { include: RegExp[]; exclude: RegExp[] } {\r\n  const parts = filter.split(/,\\s*/)\r\n  const include: RegExp[] = []\r\n  const exclude: RegExp[] = []\r\n\r\n  for (const part of parts) {\r\n    if (!part) continue\r\n    if (part.startsWith('!')) {\r\n      exclude.push(patternToRegExp(part.slice(1)))\r\n    } else {\r\n      include.push(patternToRegExp(part))\r\n    }\r\n  }\r\n\r\n  return { include, exclude }\r\n}\r\n\r\nexport function filterPackets (packets: PacketData[], filter: string): { filtered: PacketData[]; hiddenCount: number } {\r\n  if (!filter.trim()) {\r\n    return { filtered: packets, hiddenCount: 0 }\r\n  }\r\n\r\n  const { include, exclude } = parseFilterString(filter)\r\n  const filtered = packets.filter(packet => {\r\n    // If packet matches any exclude pattern, filter it out\r\n    if (exclude.some(pattern => pattern.test(packet.name))) {\r\n      return false\r\n    }\r\n    // If there are include patterns, packet must match at least one\r\n    if (include.length > 0) {\r\n      return include.some(pattern => pattern.test(packet.name))\r\n    }\r\n    // If no include patterns, keep the packet (unless it was excluded)\r\n    return true\r\n  })\r\n\r\n  return {\r\n    filtered,\r\n    hiddenCount: packets.length - filtered.length\r\n  }\r\n}\r\n","export const DARK_COLORS = {\r\n  bg: '#1e1e1e',\r\n  input: '#2d2d2d',\r\n  text: '#ffffff',\r\n  textDim: '#888888',\r\n  client: '#144218',\r\n  server: '#750200',\r\n  modified: '#f57f17',\r\n  border: '#333333',\r\n  hover: '#404040'\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { DARK_COLORS } from './constants'\r\n\r\ninterface Props {\r\n  value: string\r\n  onChange: (value: string) => void\r\n  hiddenCount: number\r\n  shownCount: number\r\n  onClearFilter: () => void\r\n  clientPacketsAutocomplete: string[]\r\n  serverPacketsAutocomplete: string[]\r\n}\r\n\r\nexport default function FilterInput ({\r\n  value,\r\n  onChange,\r\n  hiddenCount,\r\n  shownCount,\r\n  onClearFilter,\r\n  clientPacketsAutocomplete,\r\n  serverPacketsAutocomplete\r\n}: Props) {\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n  const [showAutocomplete, setShowAutocomplete] = useState(false)\r\n  const [selectedIndex, setSelectedIndex] = useState(0)\r\n\r\n  const allSuggestions = [\r\n    ...clientPacketsAutocomplete.map(name => ({ name, isClient: true })),\r\n    ...serverPacketsAutocomplete.map(name => ({ name, isClient: false }))\r\n  ].sort((a, b) => a.name.localeCompare(b.name))\r\n\r\n  const currentWord = value.split(/,\\s*/).pop() || ''\r\n  const filteredSuggestions = allSuggestions.filter(\r\n    ({ name }) => name.toLowerCase().includes(currentWord.toLowerCase().replace(/^\\$/, ''))\r\n  )\r\n\r\n  useEffect(() => {\r\n    setSelectedIndex(0)\r\n  }, [currentWord])\r\n\r\n  const acceptSuggestion = (suggestion: string) => {\r\n    const parts = value.split(/,\\s*/)\r\n    parts[parts.length - 1] = suggestion\r\n    onChange(parts.join(', '))\r\n    setShowAutocomplete(false)\r\n    inputRef.current?.focus()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ position: 'relative' }}>\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          value={value}\r\n          onChange={e => onChange(e.target.value)}\r\n          onFocus={() => setShowAutocomplete(true)}\r\n          onBlur={() => {\r\n            setTimeout(() => setShowAutocomplete(false), 200)\r\n          }}\r\n          onKeyDown={e => {\r\n            if (!showAutocomplete) {\r\n              if (e.key === 'Tab') {\r\n                e.preventDefault()\r\n                setShowAutocomplete(true)\r\n              }\r\n              return\r\n            }\r\n\r\n            if (e.key === 'ArrowDown') {\r\n              e.preventDefault()\r\n              setSelectedIndex(i => (i + 1) % filteredSuggestions.length)\r\n            } else if (e.key === 'ArrowUp') {\r\n              e.preventDefault()\r\n              setSelectedIndex(i => (i - 1 + filteredSuggestions.length) % filteredSuggestions.length)\r\n            } else if (e.key === 'Enter' && filteredSuggestions.length > 0) {\r\n              e.preventDefault()\r\n              acceptSuggestion(filteredSuggestions[selectedIndex].name)\r\n            } else if (e.key === 'Escape') {\r\n              e.preventDefault()\r\n              setShowAutocomplete(false)\r\n            }\r\n          }}\r\n          placeholder=\"Filter packets (e.g. entity, $block_display, !position)\"\r\n          style={{\r\n            width: '100%',\r\n            padding: '8px',\r\n            border: `1px solid ${DARK_COLORS.border}`,\r\n            borderRadius: '4px',\r\n            background: DARK_COLORS.input,\r\n            color: DARK_COLORS.text\r\n          }}\r\n        />\r\n        {showAutocomplete && filteredSuggestions.length > 0 && (\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: '100%',\r\n            left: 0,\r\n            right: 0,\r\n            backgroundColor: DARK_COLORS.bg,\r\n            border: `1px solid ${DARK_COLORS.border}`,\r\n            borderRadius: '4px',\r\n            marginTop: '4px',\r\n            maxHeight: '200px',\r\n            overflowY: 'auto',\r\n            zIndex: 1\r\n          }}>\r\n            {filteredSuggestions.map(({ name, isClient }, index) => (\r\n              <div\r\n                key={name}\r\n                onClick={() => acceptSuggestion(name)}\r\n                style={{\r\n                  padding: '4px 8px',\r\n                  cursor: 'pointer',\r\n                  backgroundColor: index === selectedIndex ? DARK_COLORS.hover : DARK_COLORS.bg,\r\n                  color: isClient ? DARK_COLORS.client : DARK_COLORS.server\r\n                }}\r\n              >\r\n                {name}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div style={{\r\n        marginTop: '4px',\r\n        fontSize: '12px',\r\n        color: DARK_COLORS.textDim,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '4px'\r\n      }}>\r\n        <span>Showing: {shownCount}</span>\r\n        <span>•</span>\r\n        <span>Hidden: {hiddenCount}</span>\r\n\r\n        <div style={{\r\n          opacity: value ? 1 : 0,\r\n          gap: '4px',\r\n          display: 'flex',\r\n          alignItems: 'center'\r\n        }}>\r\n          <span>•</span>\r\n          <button\r\n            onClick={onClearFilter}\r\n            style={{\r\n              background: 'none',\r\n              border: 'none',\r\n              padding: 0,\r\n              color: DARK_COLORS.text,\r\n              cursor: 'pointer',\r\n              textDecoration: 'underline',\r\n            }}\r\n          >\r\n            clear all\r\n          </button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useRef, useState } from 'react'\r\nimport { processPacketDataForLogging } from 'mcraft-fun-mineflayer/build/packetsLogger'\r\nimport { PacketData } from '../../ReplayPanel'\r\nimport { useScrollBehavior } from '../../hooks/useScrollBehavior'\r\nimport { ClientOnMap } from '../../../generatedServerPackets'\r\nimport { DARK_COLORS } from './constants'\r\n\r\nconst formatters: Record<string, (data: any) => string> = {\r\n  position: (data) => `x:${data.x.toFixed(2)} y:${data.y.toFixed(2)} z:${data.z.toFixed(2)}`,\r\n  // chat: (data) => data,\r\n  map_chunk (data: ClientOnMap['map_chunk'] | any) {\r\n    const sizeOfChunk = data.chunkData?.length\r\n    const blockEntitiesCount = data.blockEntities?.length\r\n    return `x:${data.x} z:${data.z} C:${sizeOfChunk} E:${blockEntitiesCount}`\r\n  },\r\n  default: (data) => processPacketDataForLogging(data)\r\n}\r\n\r\nconst getPacketIcon = (packet: PacketData): string => {\r\n  if (packet.isCustomChannel) return '🔗'\r\n  if (packet.name.includes('position')) return '📍'\r\n  if (packet.name.includes('chat')) return '💬'\r\n  if (packet.name.includes('block') || packet.name.includes('chunk') || packet.name.includes('light')) return '📦'\r\n  if (packet.name.includes('entity') || packet.name.includes('player') || packet.name.includes('passenger')) return '🎯'\r\n  return '📄'\r\n}\r\n\r\ninterface Props {\r\n  packets: PacketData[]\r\n  filter: string\r\n  maxHeight?: number\r\n}\r\n\r\nconst ROW_HEIGHT = 24\r\nconst EXPANDED_HEIGHT = 120\r\n\r\nfunction formatTimeDiff (current: number, prev: number | null): string {\r\n  if (prev === null) return ''\r\n  const diff = current - prev\r\n  return `+${Math.floor(diff / 1000)}`\r\n}\r\n\r\nconst styles = {\r\n  packetRow: {\r\n    height: ROW_HEIGHT,\r\n    padding: '0 8px',\r\n    fontSize: '12px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '8px',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    cursor: 'pointer',\r\n    transition: 'background-color 0.1s'\r\n  } as const,\r\n  expandedPacket: {\r\n    height: EXPANDED_HEIGHT,\r\n    padding: '8px',\r\n    background: DARK_COLORS.input,\r\n    fontSize: '12px',\r\n    overflow: 'auto',\r\n    borderBottom: `1px solid ${DARK_COLORS.border}`\r\n  } as const\r\n}\r\n\r\nexport default function PacketList ({ packets, filter, maxHeight = 300 }: Props) {\r\n  const listRef = useRef<HTMLDivElement>(null)\r\n  const [expandedPacket, setExpandedPacket] = useState<number | null>(null)\r\n  const { scrollToBottom } = useScrollBehavior(listRef, { messages: packets, opened: true })\r\n\r\n  let prevTimestamp: number | null = null\r\n\r\n  return (\r\n    <>\r\n      <style>\r\n        {`\r\n          .packet-row:hover {\r\n            background: ${DARK_COLORS.hover} !important;\r\n          }\r\n        `}\r\n      </style>\r\n      <div\r\n        ref={listRef}\r\n        style={{\r\n          overflowY: 'auto',\r\n          height: maxHeight,\r\n          display: 'flex',\r\n          flexDirection: 'column'\r\n        }}\r\n      >\r\n        <div style={{ minHeight: '100%' }}>\r\n          {packets.map((packet, index) => {\r\n            const timeDiff = formatTimeDiff(packet.timestamp, prevTimestamp)\r\n            prevTimestamp = packet.timestamp\r\n            return (\r\n              <div key={`${packet.timestamp}-${packet.position}`}>\r\n                <div\r\n                  className=\"packet-row\"\r\n                  onClick={() => setExpandedPacket(expandedPacket === packet.position ? null : packet.position)}\r\n                  style={{\r\n                    ...styles.packetRow,\r\n                    background: packet.isFromClient ? DARK_COLORS.client : DARK_COLORS.server,\r\n                    opacity: packet.isUpcoming ? 0.5 : 1\r\n                  }}\r\n                >\r\n                  <span>{getPacketIcon(packet)}</span>\r\n                  <span style={{ color: DARK_COLORS.textDim }}>\r\n                    #{packet.position}\r\n                    {timeDiff && <span style={{ marginLeft: '4px' }}>{timeDiff}</span>}\r\n                  </span>\r\n                  {filter && (\r\n                    <span style={{ color: DARK_COLORS.textDim }}>#{index + 1}</span>\r\n                  )}\r\n                  <span style={{\r\n                    color: packet.actualVersion ? DARK_COLORS.modified : DARK_COLORS.text,\r\n                    fontWeight: 'bold'\r\n                  }}>\r\n                    {packet.name}\r\n                  </span>\r\n                  <span style={{ color: DARK_COLORS.textDim, flex: 1, overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                    {formatters[packet.name]?.(packet.data) ?? formatters.default(packet.data)}\r\n                  </span>\r\n                </div>\r\n                {expandedPacket === packet.position && (\r\n                  <div style={styles.expandedPacket}>\r\n                    <div style={{ marginBottom: '8px' }}>\r\n                      <strong>Data:</strong>\r\n                      <pre style={{ margin: '4px 0', color: DARK_COLORS.textDim }}>\r\n                        {JSON.stringify(JSON.parse(formatters.default(packet.data)), null, 2)}\r\n                      </pre>\r\n                    </div>\r\n                    {packet.actualVersion && (\r\n                      <div>\r\n                        <strong>Actual Version:</strong>\r\n                        <pre style={{ margin: '4px 0', color: DARK_COLORS.textDim }}>\r\n                          {JSON.stringify(JSON.parse(formatters.default(packet.actualVersion)), null, 2)}\r\n                        </pre>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import { DARK_COLORS } from './constants'\r\n\r\ninterface Props {\r\n  current: number\r\n  total: number\r\n}\r\n\r\nfunction padNumber (num: number): string {\r\n  return String(num).padStart(3, '0')\r\n}\r\n\r\nexport default function ProgressBar ({ current, total }: Props) {\r\n  return (\r\n    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\r\n      <div style={{ color: DARK_COLORS.textDim, fontSize: '12px', minWidth: '70px' }}>\r\n        {padNumber(current)}/{padNumber(total)}\r\n      </div>\r\n      <div style={{\r\n        flex: 1,\r\n        height: '4px',\r\n        background: DARK_COLORS.border,\r\n        borderRadius: '2px'\r\n      }}>\r\n        <div\r\n          style={{\r\n            width: `${(current / total) * 100}%`,\r\n            height: '100%',\r\n            background: DARK_COLORS.text,\r\n            borderRadius: '2px',\r\n            transition: 'width 0.2s'\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { filterPackets } from './packetsFilter'\r\nimport { DARK_COLORS } from './components/replay/constants'\r\nimport FilterInput from './components/replay/FilterInput'\r\nimport PacketList from './components/replay/PacketList'\r\nimport ProgressBar from './components/replay/ProgressBar'\r\nimport { packetsReplayState } from './state/packetsReplayState'\r\n\r\ninterface Props {\r\n  replayName: string\r\n  packets: readonly PacketData[]\r\n  isPlaying: boolean\r\n  progress: { current: number; total: number }\r\n  speed: number\r\n  defaultFilter?: string\r\n  customButtons: Readonly<Record<string, { state: boolean; label: string; tooltip?: string }>>\r\n  onPlayPause?: (isPlaying: boolean) => void\r\n  onRestart?: () => void\r\n  onSpeedChange?: (speed: number) => void\r\n  onFilterChange: (filter: string) => void\r\n  onCustomButtonToggle: (buttonId: string) => void\r\n  clientPacketsAutocomplete: string[]\r\n  serverPacketsAutocomplete: string[]\r\n  style?: React.CSSProperties\r\n}\r\n\r\nexport default function ReplayPanel ({\r\n  replayName,\r\n  packets,\r\n  isPlaying,\r\n  progress,\r\n  speed,\r\n  defaultFilter = '',\r\n  customButtons,\r\n  onPlayPause,\r\n  onRestart,\r\n  onSpeedChange,\r\n  onFilterChange,\r\n  onCustomButtonToggle,\r\n  clientPacketsAutocomplete,\r\n  serverPacketsAutocomplete,\r\n  style\r\n}: Props) {\r\n  const [filter, setFilter] = useState(defaultFilter)\r\n  const { isMinimized, isRecording } = useSnapshot(packetsReplayState)\r\n  const { filtered: filteredPackets, hiddenCount } = filterPackets(packets.slice(-500), filter)\r\n\r\n  useEffect(() => {\r\n    onFilterChange(filter)\r\n  }, [filter, onFilterChange])\r\n\r\n  const handlePlayPauseClick = () => {\r\n    if (isMinimized) {\r\n      packetsReplayState.isMinimized = false\r\n    } else {\r\n      onPlayPause?.(!isPlaying)\r\n    }\r\n  }\r\n\r\n  const playPauseButton = (\r\n    <button\r\n      onClick={handlePlayPauseClick}\r\n      style={{\r\n        background: 'none',\r\n        border: 'none',\r\n        cursor: 'pointer',\r\n        padding: '4px',\r\n        color: DARK_COLORS.text\r\n      }}\r\n    >\r\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n        {isRecording ? (\r\n          <circle cx=\"12\" cy=\"12\" r=\"8\" fill=\"red\" />\r\n        ) : isPlaying ? (\r\n          <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\r\n        ) : (\r\n          <path d=\"M8 5v14l11-7z\"/>\r\n        )}\r\n      </svg>\r\n    </button>\r\n  )\r\n\r\n  const baseContainerStyle = {\r\n    position: 'fixed',\r\n    top: 18,\r\n    right: 0,\r\n    zIndex: 1000,\r\n    background: DARK_COLORS.bg,\r\n    padding: '16px',\r\n    borderRadius: '0 0 8px 0',\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.3)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '12px',\r\n    color: DARK_COLORS.text,\r\n    ...style\r\n  } as const\r\n\r\n  if (isMinimized) {\r\n    return (\r\n      <div style={{\r\n        ...baseContainerStyle,\r\n        width: 'auto'\r\n      }}>\r\n        {playPauseButton}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      ...baseContainerStyle,\r\n      width: '400px',\r\n      maxHeight: '80vh'\r\n    }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div style={{ fontSize: '12px', fontWeight: 'bold' }}>{replayName || 'Unnamed Replay'}</div>\r\n        <button\r\n          onClick={() => { packetsReplayState.isMinimized = true }}\r\n          style={{\r\n            background: 'none',\r\n            border: 'none',\r\n            color: DARK_COLORS.text,\r\n            cursor: 'pointer',\r\n            padding: '4px',\r\n            fontSize: '14px',\r\n            opacity: 0.7,\r\n            transition: 'opacity 0.2s'\r\n          }}\r\n          onMouseEnter={e => {\r\n            e.currentTarget.style.opacity = '1'\r\n          }}\r\n          onMouseLeave={e => {\r\n            e.currentTarget.style.opacity = '0.7'\r\n          }}\r\n        >\r\n          ✕\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '8px', color: '#888888', marginTop: '-8px' }}>\r\n        {isRecording ? 'Recording packets...' : 'Integrated server emulation. Testing client...'}\r\n      </div>\r\n\r\n      <FilterInput\r\n        value={filter}\r\n        onChange={setFilter}\r\n        hiddenCount={hiddenCount}\r\n        shownCount={filteredPackets.length}\r\n        onClearFilter={() => setFilter('')}\r\n        clientPacketsAutocomplete={clientPacketsAutocomplete}\r\n        serverPacketsAutocomplete={serverPacketsAutocomplete}\r\n      />\r\n\r\n      <PacketList\r\n        packets={filteredPackets}\r\n        filter={filter}\r\n        maxHeight={300}\r\n      />\r\n\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n        // grayscale if recording\r\n        filter: isRecording ? 'grayscale(100%)' : 'none',\r\n        cursor: isRecording ? 'not-allowed' : 'default'\r\n      }}>\r\n        {playPauseButton}\r\n        <ProgressBar current={progress.current} total={progress.total} />\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n        <button\r\n          onClick={onRestart}\r\n          style={{\r\n            padding: '4px 8px',\r\n            borderRadius: '4px',\r\n            border: `1px solid ${DARK_COLORS.border}`,\r\n            background: DARK_COLORS.input,\r\n            color: DARK_COLORS.text,\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          Restart\r\n        </button>\r\n\r\n        <input\r\n          type=\"number\"\r\n          value={speed}\r\n          onChange={e => onSpeedChange?.(Number(e.target.value))}\r\n          onContextMenu={e => {\r\n            e.preventDefault()\r\n            onSpeedChange?.(1)\r\n          }}\r\n          step={0.1}\r\n          min={0.1}\r\n          style={{\r\n            width: '60px',\r\n            padding: '4px',\r\n            border: `1px solid ${DARK_COLORS.border}`,\r\n            borderRadius: '4px',\r\n            background: DARK_COLORS.input,\r\n            color: DARK_COLORS.text\r\n          }}\r\n        />\r\n\r\n        {Object.entries(customButtons).map(([buttonId, { state, label, tooltip }]) => (\r\n          <button\r\n            key={buttonId}\r\n            onClick={() => onCustomButtonToggle(buttonId)}\r\n            title={tooltip}\r\n            style={{\r\n              padding: '4px 8px',\r\n              borderRadius: '4px',\r\n              border: `1px solid ${DARK_COLORS.border}`,\r\n              background: state\r\n                ? DARK_COLORS.client\r\n                : DARK_COLORS.input,\r\n              color: DARK_COLORS.text,\r\n              cursor: 'pointer',\r\n              minWidth: '32px'\r\n            }}\r\n          >\r\n            {label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport interface PacketData {\r\n  name: string\r\n  data: any\r\n  isFromClient: boolean\r\n  isUpcoming: boolean\r\n  actualVersion?: any\r\n  position: number\r\n  timestamp: number\r\n  isCustomChannel?: boolean\r\n}\r\n","import { useSnapshot } from 'valtio'\r\nimport { useMemo } from 'react'\r\nimport { appQueryParams, updateQsParam } from '../appParams'\r\nimport { miscUiState } from '../globalState'\r\nimport { onChangeButtonState, packetsReplayState } from './state/packetsReplayState'\r\nimport ReplayPanel from './ReplayPanel'\r\n\r\nexport default function PacketsReplayProvider () {\r\n  const state = useSnapshot(packetsReplayState)\r\n  const { gameLoaded } = useSnapshot(miscUiState)\r\n\r\n  const autocomplete = useMemo(() => {\r\n    if (!loadedData) return\r\n    return {\r\n      client: Object.keys(loadedData.protocol.play.toClient.types).filter(a => a.startsWith('packet_')).map(a => a.slice('packet_'.length)),\r\n      server: Object.keys(loadedData.protocol.play.toServer.types).filter(a => a.startsWith('packet_')).map(a => a.slice('packet_'.length))\r\n    }\r\n  }, [gameLoaded])\r\n\r\n  if (!state.isOpen) return null\r\n\r\n  return (\r\n    <ReplayPanel\r\n      style={{\r\n        transform: 'scale(0.4)',\r\n        transformOrigin: 'top right'\r\n      }}\r\n      replayName={state.replayName}\r\n      packets={state.packetsPlayback}\r\n      isPlaying={state.isPlaying}\r\n      progress={state.progress}\r\n      speed={state.speed}\r\n      defaultFilter={appQueryParams.replayFilter ?? ''}\r\n      clientPacketsAutocomplete={autocomplete?.client ?? []}\r\n      serverPacketsAutocomplete={autocomplete?.server ?? []}\r\n      customButtons={state.customButtons}\r\n      onPlayPause={(isPlaying) => {\r\n        packetsReplayState.isPlaying = isPlaying\r\n      }}\r\n      onRestart={() => {\r\n        window.location.reload()\r\n      }}\r\n      onSpeedChange={(speed) => {\r\n        packetsReplayState.speed = speed\r\n        updateQsParam('replaySpeed', speed === 1 ? undefined : speed.toString())\r\n      }}\r\n      onFilterChange={(filter) => {\r\n        updateQsParam('replayFilter', filter)\r\n      }}\r\n      onCustomButtonToggle={(button) => {\r\n        onChangeButtonState(button as keyof typeof packetsReplayState.customButtons, !state.customButtons[button].state)\r\n      }}\r\n    />\r\n  )\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"hint_container\":\"hint_container-TtFMXH\",\"hintContainer\":\"hint_container-TtFMXH\",\"hint_text\":\"hint_text-sDZkR9\",\"hintText\":\"hint_text-sDZkR9\"};","import { useEffect, useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { options } from '../optionsStorage'\r\nimport { activeModalStack } from '../globalState'\r\nimport { videoCursorInteraction } from '../customChannels'\r\n// import PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport styles from './TouchInteractionHint.module.css'\r\nimport { useUsingTouch } from './utilsApp'\r\nimport Button from './Button'\r\n\r\nexport default () => {\r\n  const usingTouch = useUsingTouch()\r\n  const modalStack = useSnapshot(activeModalStack)\r\n  const { touchInteractionType } = useSnapshot(options)\r\n  const [hintText, setHintText] = useState<string | null>(null)\r\n  const [entityName, setEntityName] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    const update = () => {\r\n      const videoInteraction = videoCursorInteraction()\r\n      if (videoInteraction) {\r\n        setHintText(`Interact with video`)\r\n        setEntityName(null)\r\n      } else {\r\n        const cursorState = bot.mouse.getCursorState()\r\n        if (cursorState.entity) {\r\n          const name = cursorState.entity.displayName ?? cursorState.entity.name ?? 'Entity'\r\n          setHintText(`Attack ${name}`)\r\n          setEntityName(name)\r\n        } else {\r\n          setHintText(null)\r\n          setEntityName(null)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Initial update\r\n    update()\r\n\r\n    // Subscribe to physics ticks\r\n    bot.on('physicsTick', update)\r\n\r\n    return () => {\r\n      bot?.removeListener('physicsTick', update)\r\n    }\r\n  }, [])\r\n\r\n  const handleUseButtonClick = (e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    document.dispatchEvent(new MouseEvent('mousedown', { button: 2 }))\r\n    bot.mouse.update()\r\n    document.dispatchEvent(new MouseEvent('mouseup', { button: 2 }))\r\n  }\r\n\r\n  if (!usingTouch || touchInteractionType !== 'classic' || modalStack.length > 0) return null\r\n  if (!hintText && !entityName) return null\r\n\r\n  // need to hide \"Use\" button if there isn't an entity name, but there is a hint text\r\n  if (!entityName) return null\r\n\r\n  return (\r\n    <div\r\n      className={`${styles.hint_container} interaction-hint`}\r\n    >\r\n      {/* temporary hide hint indicator and text */}\r\n      {/* <PixelartIcon iconName={pixelartIcons['sun-alt']} width={14} />\r\n      <span className={styles.hint_text}>{hintText || 'Attack entity'}</span> */}\r\n      <Button\r\n        onClick={handleUseButtonClick}\r\n      >\r\n        {`Use ${entityName}`}\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\n\r\nexport const voiceChatStatus = proxy({\r\n  active: false,\r\n  muted: false,\r\n  hasInputVoice: false,\r\n  isErrored: false,\r\n  isConnected: false,\r\n  isAlone: false,\r\n\r\n  isSharingScreen: false,\r\n})\r\n\r\nwindow.voiceChatStatus = voiceChatStatus\r\n\r\nconst Icon = () => {\r\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path fill=\"currentColor\" d=\"M9 14H8v-2h3v-1H8V9h3V8H8V6h3V5H8V3h1V2h1V1h4v1h1v1h1v2h-3v1h3v2h-3v1h3v2h-3v1h3v2h-1v1h-1v1h-4v-1H9z\" />\r\n    <path fill=\"currentColor\" d=\"M19 12v3h-1v2h-1v1h-2v1h-2v2h3v2H8v-2h3v-2H9v-1H7v-1H6v-2H5v-3h1v2h1v2h1v1h2v1h4v-1h2v-1h1v-2h1v-2z\" />\r\n  </svg>\r\n}\r\n\r\nexport default () => {\r\n  const SIZE = 48\r\n  const { active, muted, hasInputVoice, isSharingScreen, isConnected, isErrored, isAlone } = useSnapshot(voiceChatStatus)\r\n  if (!active) return null\r\n\r\n  const getRingColor = () => {\r\n    if (isErrored) return 'rgba(214, 4, 4, 0.5)' // red with opacity\r\n    if (isConnected) {\r\n      if (isAlone) return 'rgba(183, 255, 0, 0.5)' // lime yellow\r\n      return 'rgba(50, 205, 50, 0.5)' // green with opacity\r\n    }\r\n    return 'rgba(128, 128, 128, 0.5)' // gray with opacity\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className='voice-chat-microphone'\r\n      onClick={() => {\r\n        // toggleMicrophoneMuted()\r\n      }}\r\n    >\r\n      <div style={{\r\n        position: 'fixed',\r\n        bottom: '20px',\r\n        zIndex: 10,\r\n        left: '20px',\r\n        width: SIZE,\r\n        height: SIZE,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        color: muted ? 'rgb(214 4 4)' : hasInputVoice ? '#32cd32' : '#ffffff',\r\n        border: `2px solid ${getRingColor()}`,\r\n        borderRadius: '50%',\r\n        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)',\r\n        transition: 'background-color 0.2s ease',\r\n      }}>\r\n        <Icon />\r\n      </div>\r\n      {/* stop sharing screen */}\r\n      {isSharingScreen && <div style={{\r\n        position: 'fixed',\r\n        bottom: '20px',\r\n        left: '20px',\r\n        width: SIZE,\r\n        height: SIZE,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      }}>\r\n        <PixelartIcon iconName={pixelartIcons.cast} /> Stop Sharing Screen\r\n      </div>}\r\n    </div>\r\n  )\r\n}\r\n","import { useMemo } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { appQueryParams } from '../appParams'\r\nimport { ConnectOptions } from '../connect'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport Button from './Button'\r\n\r\nconst VERTICAL_LAYOUT = false\r\n\r\nexport default () => {\r\n  const { ip, version, proxy, username, connectText } = appQueryParams\r\n  const isModalActive = useIsModalActive('only-connect-server')\r\n\r\n  if (!isModalActive) return null\r\n\r\n  const handleConnect = () => {\r\n    const connectOptions: ConnectOptions = {\r\n      username: username || '',\r\n      server: ip,\r\n      proxy,\r\n      botVersion: version,\r\n    }\r\n    window.dispatchEvent(new CustomEvent('connect', { detail: connectOptions }))\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100%',\r\n      height: '100%',\r\n      background: 'rgba(0, 0, 0, 0.25)',\r\n      zIndex: 1000,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    }}>\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '40px',\r\n        alignItems: 'center',\r\n        background: 'rgba(0, 0, 0, 0.5)',\r\n        padding: VERTICAL_LAYOUT ? '15px 40px' : '25px',\r\n        // paddingRight: VERTICAL_LAYOUT ? '0' : '40px',\r\n        borderRadius: '5px',\r\n        flexDirection: VERTICAL_LAYOUT ? 'column' : 'row',\r\n      }}>\r\n        <div style={{\r\n          color: 'white',\r\n          fontSize: '13px'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', marginBottom: '10px' }}>\r\n            <PixelartIcon iconName={pixelartIcons.server} width={16} />\r\n            <span style={{ marginLeft: '8px' }}>{ip}</span>\r\n            {proxy && <span style={{ marginLeft: '8px', color: 'lightgray' }}>({proxy})</span>}\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <PixelartIcon iconName={pixelartIcons.user} width={16} />\r\n            <span style={{ marginLeft: '8px' }}>{username}</span>\r\n            {version && <span style={{ marginLeft: '8px', color: 'lightgray' }}>({version})</span>}\r\n          </div>\r\n        </div>\r\n        <Button\r\n          onClick={handleConnect}\r\n          style={{\r\n            width: 'auto',\r\n            padding: '0 12px',\r\n            transform: 'scale(1.4)',\r\n            transformOrigin: 'center'\r\n          }}\r\n        >\r\n          {connectText || 'Connect'}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { options } from '../optionsStorage'\r\nimport { contro } from '../controls'\r\n\r\nexport default () => {\r\n  const [pressedKeys, setPressedKeys] = useState<Set<string>>(new Set())\r\n  const [actions, setActions] = useState<string[]>([])\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      setPressedKeys(prev => new Set([...prev, e.code]))\r\n    }\r\n\r\n    const handleKeyUp = (e: KeyboardEvent) => {\r\n      setPressedKeys(prev => {\r\n        const newSet = new Set(prev)\r\n        newSet.delete(e.code)\r\n        return newSet\r\n      })\r\n    }\r\n\r\n    const handleBlur = () => {\r\n      setPressedKeys(new Set())\r\n    }\r\n\r\n    const handleControTrigger = ({ command }) => {\r\n      setActions(prev => [...prev, command])\r\n    }\r\n\r\n    const handleControReleased = ({ command }) => {\r\n      setActions(prev => prev.filter(action => action !== command))\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    window.addEventListener('keyup', handleKeyUp)\r\n    window.addEventListener('blur', handleBlur)\r\n\r\n    contro.on('trigger', handleControTrigger)\r\n    contro.on('release', handleControReleased)\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown)\r\n      window.removeEventListener('keyup', handleKeyUp)\r\n      window.removeEventListener('blur', handleBlur)\r\n      contro.off('trigger', handleControTrigger)\r\n      contro.off('released', handleControReleased)\r\n    }\r\n  }, [])\r\n\r\n  if (!options.debugContro) return null\r\n\r\n  return (\r\n    <div\r\n      className='debug-contro'\r\n      style={{\r\n        position: 'fixed',\r\n        right: 0,\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n        padding: '8px',\r\n        fontFamily: 'monospace',\r\n        fontSize: '8px',\r\n        color: 'white',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '4px',\r\n        zIndex: 2,\r\n      }}\r\n    >\r\n      <div>Keys: {[...pressedKeys].join(', ')}</div>\r\n      <div style={{ color: 'limegreen' }}>Actions: {actions.join(', ')}</div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport './LoadingChunks.css'\r\n\r\nexport interface ChunkDebug {\r\n  x: number // like -32\r\n  z: number // like -32\r\n  lines: string[]\r\n  sidebarLines: string[]\r\n  state: 'server-waiting' | 'order-queued' | 'client-waiting' | 'client-processing' | 'done-empty' | 'done'\r\n}\r\n\r\ninterface ProcessedChunk extends ChunkDebug {\r\n  relX: number\r\n  relZ: number\r\n  displayLines: string[]\r\n}\r\n\r\nconst stateColors: Record<ChunkDebug['state'], string> = {\r\n  'server-waiting': 'gray',\r\n  'order-queued': 'darkorange',\r\n  'client-waiting': 'yellow',\r\n  'client-processing': 'yellow',\r\n  'done-empty': 'darkgreen',\r\n  'done': 'limegreen',\r\n}\r\n\r\nexport default ({\r\n  chunks,\r\n  playerChunk,\r\n  maxDistance,\r\n  tileSize = 16,\r\n  fontSize = 5,\r\n}: {\r\n  chunks: ChunkDebug[]\r\n  playerChunk: { x: number, z: number }\r\n  maxDistance: number,\r\n  tileSize?: number\r\n  fontSize?: number\r\n}) => {\r\n  const [selectedChunk, setSelectedChunk] = useState<ProcessedChunk | null>(null)\r\n  const [showSidebar, setShowSidebar] = useState(false)\r\n\r\n  // Calculate grid dimensions based on maxDistance\r\n  const gridSize = maxDistance * 2 + 1\r\n  const centerIndex = maxDistance\r\n\r\n  // Process chunks to get only the last one for each position and within maxDistance\r\n  const processedChunks = chunks.reduce<Record<string, ProcessedChunk>>((acc, chunk) => {\r\n    const relX = Math.floor((chunk.x - playerChunk.x) / 16)\r\n    const relZ = Math.floor((chunk.z - playerChunk.z) / 16)\r\n\r\n    // Skip chunks outside maxDistance\r\n    if (Math.abs(relX) > maxDistance || Math.abs(relZ) > maxDistance) return acc\r\n\r\n    const key = `${chunk.x},${chunk.z}`\r\n    acc[key] = {\r\n      ...chunk,\r\n      relX,\r\n      relZ,\r\n      displayLines: [`${relX},${relZ} (${chunk.x},${chunk.z})`, ...chunk.lines]\r\n    }\r\n    return acc\r\n  }, {})\r\n\r\n  return (\r\n    <div style={{ display: 'flex', gap: '10px' }}>\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: `repeat(${gridSize}, 1fr)`,\r\n        gridTemplateRows: `repeat(${gridSize}, 1fr)`,\r\n        gap: 1,\r\n        // width: `${tileSize * gridSize}px`,\r\n        // height: `${tileSize * gridSize}px`,\r\n      }}>\r\n        {Array.from({ length: gridSize * gridSize }).map((_, i) => {\r\n          const relX = -maxDistance + (i % gridSize)\r\n          const relZ = -maxDistance + Math.floor(i / gridSize)\r\n          const x = playerChunk.x + relX * 16\r\n          const z = playerChunk.z + relZ * 16\r\n          const chunk = processedChunks[`${x},${z}`]\r\n\r\n          return (\r\n            <div\r\n              key={`${x},${z}`}\r\n              onClick={() => {\r\n                if (chunk) {\r\n                  setSelectedChunk(chunk)\r\n                  setShowSidebar(true)\r\n                }\r\n              }}\r\n              style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                background: chunk ? stateColors[chunk.state] : 'black',\r\n                color: 'white',\r\n                fontSize: `${fontSize}px`,\r\n                cursor: chunk ? 'pointer' : 'default',\r\n                position: 'relative',\r\n                width: `${tileSize}px`,\r\n                flexDirection: 'column',\r\n                height: `${tileSize}px`,\r\n                padding: 1,\r\n                // pre-wrap\r\n                whiteSpace: 'pre',\r\n              }}\r\n            >\r\n              {relX}, {relZ}{'\\n'}\r\n              {chunk?.lines[0]}{'\\n'}\r\n              <span style={{ fontSize: `${fontSize * 0.8}px` }}>{chunk?.lines[1]}</span>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {showSidebar && selectedChunk && (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }} className='text-select'>\r\n          {selectedChunk.displayLines.map((line, i) => (\r\n            <div key={i} style={{ fontSize: '10px', wordBreak: 'break-word' }}>\r\n              {line}\r\n            </div>\r\n          ))}\r\n          <div style={{ marginTop: '10px', fontSize: '10px', whiteSpace: 'pre', maxWidth: 100, }}>\r\n            <div>Sidebar Info:</div>\r\n            {selectedChunk.sidebarLines.map((line, i) => (\r\n              <div key={i}>{line}</div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useUtilsEffect } from '@zardoy/react-util'\r\nimport { WorldRendererCommon } from 'renderer/viewer/lib/worldrendererCommon'\r\nimport { WorldRendererThree } from 'renderer/viewer/three/worldrendererThree'\r\nimport { Vec3 } from 'vec3'\r\nimport { generateSpiralMatrix } from 'flying-squid/dist/utils'\r\nimport Screen from './Screen'\r\nimport ChunksDebug, { ChunkDebug } from './ChunksDebug'\r\nimport { useIsModalActive } from './utilsApp'\r\n\r\nconst Inner = () => {\r\n  const [playerX, setPlayerX] = useState(Math.floor(worldView!.lastPos.x / 16) * 16)\r\n  const [playerZ, setPlayerZ] = useState(Math.floor(worldView!.lastPos.z / 16) * 16)\r\n  const [update, setUpdate] = useState(0)\r\n\r\n  useUtilsEffect(({ interval }) => {\r\n    const up = () => {\r\n      // setUpdate(u => u + 1)\r\n    }\r\n    bot.on('chunkColumnLoad', up)\r\n    interval(\r\n      500,\r\n      () => {\r\n        setPlayerX(Math.floor(worldView!.lastPos.x / 16) * 16)\r\n        setPlayerZ(Math.floor(worldView!.lastPos.z / 16) * 16)\r\n        setUpdate(u => u + 1)\r\n      }\r\n    )\r\n    return () => {\r\n      bot.removeListener('chunkColumnLoad', up)\r\n    }\r\n  }, [])\r\n\r\n  // Track first load time for all chunks\r\n  const allLoadTimes = Object.values(worldView!.debugChunksInfo)\r\n    .map(chunk => chunk?.loads[0]?.time ?? Infinity)\r\n    .filter(time => time !== Infinity)\r\n    .sort((a, b) => a - b)\r\n\r\n  const allSpiralChunks = Object.fromEntries(generateSpiralMatrix(worldView!.viewDistance).map(pos => [`${pos[0]},${pos[1]}`, pos]))\r\n\r\n  const mapChunk = (key: string, state: ChunkDebug['state']): ChunkDebug => {\r\n    const x = Number(key.split(',')[0])\r\n    const z = Number(key.split(',')[1])\r\n    const chunkX = Math.floor(x / 16)\r\n    const chunkZ = Math.floor(z / 16)\r\n\r\n    delete allSpiralChunks[`${chunkX},${chunkZ}`]\r\n    const chunk = worldView!.debugChunksInfo[key]\r\n    const firstLoadTime = chunk?.loads[0]?.time\r\n    const loadIndex = firstLoadTime ? allLoadTimes.indexOf(firstLoadTime) + 1 : 0\r\n    // const timeSinceFirstLoad = firstLoadTime ? firstLoadTime - allLoadTimes[0] : 0\r\n    const timeSinceFirstLoad = firstLoadTime ? firstLoadTime - allLoadTimes[0] : 0\r\n    let line = ''\r\n    let line2 = ''\r\n    if (loadIndex) {\r\n      line = `${loadIndex}`\r\n      line2 = `${timeSinceFirstLoad}ms`\r\n    }\r\n    if (chunk?.loads.length > 1) {\r\n      line += ` - ${chunk.loads.length}`\r\n    }\r\n\r\n    return {\r\n      x,\r\n      z,\r\n      state,\r\n      lines: [line, line2],\r\n      sidebarLines: [\r\n        `loads: ${chunk?.loads?.map(l => `${l.reason} ${l.dataLength} ${l.time}`).join('\\n')}`,\r\n        // `blockUpdates: ${chunk.blockUpdates}`,\r\n      ],\r\n    }\r\n  }\r\n\r\n  const chunksWaitingServer = Object.keys(worldView!.waitingSpiralChunksLoad).map(key => mapChunk(key, 'server-waiting'))\r\n\r\n  const world = globalThis.world as WorldRendererThree\r\n\r\n  const loadedSectionsChunks = Object.fromEntries(Object.keys(world.sectionObjects).map(sectionPos => {\r\n    const [x, y, z] = sectionPos.split(',').map(Number)\r\n    return [`${x},${z}`, true]\r\n  }))\r\n\r\n  const chunksWaitingClient = Object.keys(worldView!.loadedChunks).map(key => mapChunk(key, 'client-waiting'))\r\n\r\n  const clientProcessingChunks = Object.keys(world.loadedChunks).map(key => mapChunk(key, 'client-processing'))\r\n\r\n  const chunksDoneEmpty = Object.keys(world.finishedChunks)\r\n    .filter(chunkPos => !loadedSectionsChunks[chunkPos])\r\n    .map(key => mapChunk(key, 'done-empty'))\r\n\r\n  const chunksDone = Object.keys(world.finishedChunks).map(key => mapChunk(key, 'done'))\r\n\r\n\r\n  const chunksWaitingOrder = Object.values(allSpiralChunks).map(([x, z]) => {\r\n    const pos = new Vec3(x * 16, 0, z * 16)\r\n    if (bot.world.getColumnAt(pos) === null) return null\r\n    return mapChunk(`${pos.x},${pos.z}`, 'order-queued')\r\n  }).filter(a => !!a)\r\n\r\n  const allChunks = [\r\n    ...chunksWaitingServer,\r\n    ...chunksWaitingClient,\r\n    ...clientProcessingChunks,\r\n    ...chunksDone,\r\n    ...chunksDoneEmpty,\r\n    ...chunksWaitingOrder,\r\n  ]\r\n  return <Screen title={`Chunks Debug (avg: ${worldView!.lastChunkReceiveTimeAvg.toFixed(1)}ms)`}>\r\n    <ChunksDebug\r\n      chunks={allChunks}\r\n      playerChunk={{\r\n        x: playerX,\r\n        z: playerZ\r\n      }}\r\n      maxDistance={worldView!.viewDistance}\r\n      tileSize={32}\r\n      fontSize={8}\r\n    />\r\n  </Screen>\r\n}\r\n\r\nexport default () => {\r\n  const isActive = useIsModalActive('chunks-debug')\r\n  if (!isActive) return null\r\n\r\n  return <Inner />\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"debugResponseTimeIndicator\":\"debugResponseTimeIndicator-fgQAAT\"};","import { useEffect, useState } from 'react'\r\nimport { options } from '../../optionsStorage'\r\n\r\nimport styles from './DebugResponseTimeIndicator.module.css'\r\n\r\nexport default () => {\r\n  const [isPointerDown, setIsPointerDown] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const handlePointerDown = () => {\r\n      setIsPointerDown(true)\r\n    }\r\n\r\n    const handlePointerUp = () => {\r\n      setIsPointerDown(false)\r\n    }\r\n\r\n    window.addEventListener('pointerdown', handlePointerDown)\r\n    window.addEventListener('pointerup', handlePointerUp)\r\n\r\n    return () => {\r\n      window.removeEventListener('pointerdown', handlePointerDown)\r\n      window.removeEventListener('pointerup', handlePointerUp)\r\n    }\r\n  }, [])\r\n\r\n  if (!('debugResponseTimeIndicator' in options) || !options.debugResponseTimeIndicator) return null\r\n\r\n  return isPointerDown ? (\r\n    <div className={styles.debugResponseTimeIndicator} />\r\n  ) : null\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-fIXcRm\",\"column\":\"column-p5oTjN\",\"sliderGroup\":\"sliderGroup-bL4OLm\"};","import { WorldRendererCommon } from 'renderer/viewer/lib/worldrendererCommon'\r\nimport { useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { options } from '../optionsStorage'\r\nimport Screen from './Screen'\r\nimport Button from './Button'\r\nimport Slider from './Slider'\r\nimport styles from './rendererDebugMenu.module.css'\r\n\r\nexport default () => {\r\n  const worldRenderer = window.world as WorldRendererCommon | undefined\r\n  return worldRenderer ? <RendererDebugMenu worldRenderer={worldRenderer} /> : null\r\n}\r\n\r\nconst RendererDebugMenu = ({ worldRenderer }: { worldRenderer: WorldRendererCommon }) => {\r\n  const { reactiveDebugParams } = worldRenderer\r\n  const { chunksRenderAboveEnabled, chunksRenderBelowEnabled, chunksRenderDistanceEnabled, chunksRenderAboveOverride, chunksRenderBelowOverride, chunksRenderDistanceOverride, stopRendering, disableEntities } = useSnapshot(reactiveDebugParams)\r\n\r\n  const { rendererPerfDebugOverlay } = useSnapshot(options)\r\n\r\n  // Helper to round values to nearest step\r\n  const roundToStep = (value: number, step: number) => Math.round(value / step) * step\r\n\r\n  if (!rendererPerfDebugOverlay) return null\r\n\r\n  return <div className={styles.container}>\r\n    <div className={styles.column}>\r\n      <h3>Rendering Controls</h3>\r\n      <Button\r\n        label={stopRendering ? 'Start Rendering' : 'Stop Rendering'}\r\n        onClick={() => { reactiveDebugParams.stopRendering = !reactiveDebugParams.stopRendering }}\r\n        overlayColor={stopRendering ? 'red' : undefined}\r\n      />\r\n      <Button\r\n        label={disableEntities ? 'Enable Entities' : 'Disable Entities'}\r\n        onClick={() => { reactiveDebugParams.disableEntities = !reactiveDebugParams.disableEntities }}\r\n        overlayColor={disableEntities ? 'red' : undefined}\r\n      />\r\n    </div>\r\n\r\n    <div className={styles.column}>\r\n      <h3>Chunks Render Settings</h3>\r\n      <div className={styles.sliderGroup}>\r\n        <Button\r\n          label={chunksRenderAboveEnabled ? 'Disable Above Override' : 'Enable Above Override'}\r\n          onClick={() => {\r\n            const newState = !chunksRenderAboveEnabled\r\n            reactiveDebugParams.chunksRenderAboveEnabled = newState\r\n            if (newState) { reactiveDebugParams.chunksRenderAboveOverride = 0 } else { reactiveDebugParams.chunksRenderAboveOverride = undefined }\r\n          }}\r\n        />\r\n        <Slider\r\n          label=\"Chunks Above\"\r\n          min={0}\r\n          max={256}\r\n          value={chunksRenderAboveOverride ?? 0}\r\n          style={{ width: '100%', }}\r\n          updateValue={(value) => {\r\n            const roundedValue = roundToStep(value, 16)\r\n            reactiveDebugParams.chunksRenderAboveOverride = roundedValue\r\n          }}\r\n          disabledReason={chunksRenderAboveEnabled ? undefined : 'Override not enabled'}\r\n          unit=\"\"\r\n          valueDisplay={roundToStep(reactiveDebugParams.chunksRenderAboveOverride ?? 0, 16)}\r\n        />\r\n      </div>\r\n\r\n      <div className={styles.sliderGroup}>\r\n        <Button\r\n          label={chunksRenderBelowEnabled ? 'Disable Below Override' : 'Enable Below Override'}\r\n          onClick={() => {\r\n            const newState = !chunksRenderBelowEnabled\r\n            reactiveDebugParams.chunksRenderBelowEnabled = newState\r\n            if (newState) { reactiveDebugParams.chunksRenderBelowOverride = 0 } else { reactiveDebugParams.chunksRenderBelowOverride = undefined }\r\n          }}\r\n        />\r\n        <Slider\r\n          label=\"Chunks Below\"\r\n          min={0}\r\n          max={256}\r\n          style={{ width: '100%', }}\r\n          value={chunksRenderBelowOverride ?? 0}\r\n          updateValue={(value) => {\r\n            const roundedValue = roundToStep(value, 16)\r\n            reactiveDebugParams.chunksRenderBelowOverride = roundedValue\r\n          }}\r\n          disabledReason={chunksRenderBelowEnabled ? undefined : 'Override not enabled'}\r\n          unit=\"\"\r\n          valueDisplay={roundToStep(reactiveDebugParams.chunksRenderBelowOverride ?? 0, 16)}\r\n        />\r\n      </div>\r\n\r\n      {/* <div className={styles.sliderGroup}>\r\n        <Button\r\n          label={chunksRenderDistanceEnabled ? 'Disable Distance Override' : 'Enable Distance Override'}\r\n          onClick={() => {\r\n            const newState = !chunksRenderDistanceEnabled\r\n            reactiveDebugParams.chunksRenderDistanceEnabled = newState\r\n            if (newState) { reactiveDebugParams.chunksRenderDistanceOverride = 8 } else { reactiveDebugParams.chunksRenderDistanceOverride = undefined }\r\n          }}\r\n        />\r\n        <Slider\r\n          label=\"Render Distance\"\r\n          min={1}\r\n          max={32}\r\n          style={{ width: '100%', }}\r\n          value={chunksRenderDistanceOverride ?? 8}\r\n          updateValue={(value) => {\r\n            const roundedValue = Math.round(value)\r\n            reactiveDebugParams.chunksRenderDistanceOverride = roundedValue\r\n          }}\r\n          disabledReason={chunksRenderDistanceEnabled ? undefined : 'Override not enabled'}\r\n          unit=\"\"\r\n          valueDisplay={Math.round(reactiveDebugParams.chunksRenderDistanceOverride ?? 8)}\r\n        />\r\n      </div> */}\r\n    </div>\r\n  </div>\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"modalScreen\":\"modalScreen-cClnsz\",\"container\":\"container-Rg_44M\",\"title\":\"title-HitmZQ\",\"contentWrapper\":\"contentWrapper-w4Sn_u\",\"subtitle\":\"subtitle-Wv3FAi\",\"paragraph\":\"paragraph-Adf60U\",\"list\":\"list-IohlzU\",\"listItem\":\"listItem-fv0jZx\",\"link\":\"link-wejgpx\",\"sectionTitle\":\"sectionTitle-f28VbG\",\"closeButton\":\"closeButton-Ii28Cv\",\"closeIcon\":\"closeIcon-UsO0rV\"};","import { hideCurrentModal } from '../globalState'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport Screen from './Screen'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport styles from './CreditsAboutModal.module.css'\r\n\r\nexport default () => {\r\n  const isModalActive = useIsModalActive('credits-about')\r\n\r\n  if (!isModalActive) return null\r\n\r\n  return (\r\n    <Screen\r\n      title=\"\"\r\n      backdrop\r\n      className={styles.modalScreen}>\r\n      <div className={styles.container}>\r\n        <h2 className={styles.title}>Minecraft Open Source JS Edition</h2>\r\n\r\n        <div className={styles.contentWrapper}>\r\n          <small className={styles.subtitle}><i>What if Minecraft was an online game?</i></small>\r\n          <p className={styles.paragraph}>\r\n            Hey! You are on the safest modern Minecraft clone rewritten in JavaScript. A huge amount of work has gone into this project to make it fast and complete, and many features would not be possible without these awesome people and projects:\r\n          </p>\r\n          <ul className={styles.list}>\r\n            <li className={styles.listItem}>- Everyone who provided awesome mods for the game</li>\r\n            <li className={styles.listItem}>- <span><a className={styles.link} href=\"https://discord.com/users/gen6442\" target=\"_blank\" rel=\"noopener noreferrer\">[Gen]</a></span> for rewriting the physics engine to be Grim-compliant</li>\r\n            <li className={styles.listItem}>- <span><a className={styles.link} href=\"https://viaversion.com/\" target=\"_blank\" rel=\"noopener noreferrer\">[ViaVersion]</a></span> for providing reliable sound id mappings</li>\r\n            <li className={styles.listItem}>- <span><a className={styles.link} href=\"https://github.com/BlueMap-Minecraft/BlueMap\" target=\"_blank\" rel=\"noopener noreferrer\">[Bluemap]</a></span> for providing block entity models like chest</li>\r\n            <li className={styles.listItem}>- <span><a className={styles.link} href=\"https://github.com/misode/deepslate\" target=\"_blank\" rel=\"noopener noreferrer\">[Deepslate]</a></span> for rendering 3d blocks in GUI (inventory)</li>\r\n            <li className={styles.listItem}>- <span><a className={styles.link} href=\"https://www.npmjs.com/package/skinview3d\" target=\"_blank\" rel=\"noopener noreferrer\">[skinview3d]</a></span> for rendering skins & player geometry</li>\r\n            <li className={styles.listItem}>- <span><a className={styles.link} href=\"https://github.com/atxi/Polymer\" target=\"_blank\" rel=\"noopener noreferrer\">[Polymer]</a></span> (c++ project) for providing fast & accurate server light implementation</li>\r\n          </ul>\r\n\r\n          <h3 className={styles.sectionTitle}>Current contributors:</h3>\r\n          <ul className={styles.list}>\r\n            <li className={styles.listItem}>- <span className={styles.link}><a className={styles.link} href=\"https://github.com/mgDentist\" target=\"_blank\" rel=\"noopener noreferrer\">Maxim Grigorev</a></span> - React UI & Core Developer Maintainer</li>\r\n            <li className={styles.listItem}>- And many more community contributors!</li>\r\n          </ul>\r\n\r\n          <button\r\n            className={styles.closeButton}\r\n            onClick={() => hideCurrentModal()}\r\n            aria-label=\"Close\"\r\n            type=\"button\"\r\n          >\r\n            <PixelartIcon\r\n              iconName={pixelartIcons.close}\r\n              width={12}\r\n              className={styles.closeIcon}\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Screen>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useSnapshot } from 'valtio'\r\nimport { options } from '../optionsStorage'\r\nimport { miscUiState } from '../globalState'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\n\r\ninterface BatteryManager extends EventTarget {\r\n  charging: boolean\r\n  chargingTime: number\r\n  dischargingTime: number\r\n  level: number\r\n  addEventListener(type: 'chargingchange' | 'levelchange', listener: EventListener): void\r\n  removeEventListener(type: 'chargingchange' | 'levelchange', listener: EventListener): void\r\n}\r\n\r\ndeclare global {\r\n  interface Navigator {\r\n    getBattery(): Promise<BatteryManager>\r\n  }\r\n}\r\n\r\nexport default () => {\r\n  const [fullScreen, setFullScreen] = useState(false)\r\n  const { topRightTimeDisplay } = useSnapshot(options)\r\n  if (topRightTimeDisplay === 'never') return null\r\n  return <FullscreenTime />\r\n}\r\n\r\nconst FullscreenTime = () => {\r\n  const { topRightTimeDisplay } = useSnapshot(options)\r\n  const { fullscreen } = useSnapshot(miscUiState)\r\n  const [time, setTime] = useState('')\r\n  const [batteryInfo, setBatteryInfo] = useState<{ level: number, charging: boolean } | null>(null)\r\n\r\n  useEffect(() => {\r\n    // Update time every second\r\n    const updateTime = () => {\r\n      const now = new Date()\r\n      const hours = now.getHours().toString().padStart(2, '0')\r\n      const minutes = now.getMinutes().toString().padStart(2, '0')\r\n      setTime(`${hours}:${minutes}`)\r\n    }\r\n    updateTime()\r\n    const timeInterval = setInterval(updateTime, 1000)\r\n\r\n    // Get battery info if available\r\n    if ('getBattery' in navigator) {\r\n      void navigator.getBattery().then(battery => {\r\n        const updateBatteryInfo = () => {\r\n          setBatteryInfo({\r\n            level: Math.round(battery.level * 100),\r\n            charging: battery.charging\r\n          })\r\n        }\r\n        updateBatteryInfo()\r\n        battery.addEventListener('levelchange', updateBatteryInfo)\r\n        battery.addEventListener('chargingchange', updateBatteryInfo)\r\n        return () => {\r\n          battery.removeEventListener('levelchange', updateBatteryInfo)\r\n          battery.removeEventListener('chargingchange', updateBatteryInfo)\r\n        }\r\n      })\r\n    }\r\n\r\n    return () => {\r\n      clearInterval(timeInterval)\r\n    }\r\n  }, [])\r\n\r\n  if (topRightTimeDisplay === 'only-fullscreen' && !fullscreen) return null\r\n\r\n  return (\r\n    <div\r\n      className='top-right-time'\r\n      style={{\r\n        position: 'fixed',\r\n        top: 'env(safe-area-inset-top, 5px)',\r\n        right: 'env(safe-area-inset-right, 5px)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '4px',\r\n        padding: '1px 3px',\r\n        background: 'rgba(0, 0, 0, 0.75)',\r\n        borderRadius: '2px',\r\n        fontSize: 8,\r\n        color: 'white',\r\n        fontFamily: 'minecraft, mojangles, monospace',\r\n        zIndex: 1,\r\n        pointerEvents: 'none'\r\n      }}\r\n    >\r\n      <span>{time}</span>\r\n      {batteryInfo && (\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '2px' }}>\r\n          <PixelartIcon\r\n            iconName={getBatteryIcon(batteryInfo.level, batteryInfo.charging)}\r\n            styles={{ fontSize: 10 }}\r\n          />\r\n          <span>{batteryInfo.level}%</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst getBatteryIcon = (level: number, charging: boolean) => {\r\n  if (charging) return pixelartIcons['battery-charging']\r\n  if (level > 60) return pixelartIcons['battery-full']\r\n  if (level > 20) return pixelartIcons['battery-2']\r\n  if (level > 5) return pixelartIcons['battery-1']\r\n  return pixelartIcons['battery']\r\n}\r\n","import { useSnapshot } from 'valtio'\r\nimport { activeModalStack, hideCurrentModal } from '../globalState'\r\nimport { resolveStorageConflicts, getStorageConflicts } from './appStorageProvider'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport Screen from './Screen'\r\nimport Button from './Button'\r\n\r\nconst formatTimestamp = (timestamp?: number) => {\r\n  if (!timestamp) return 'Unknown time'\r\n  return new Date(timestamp).toLocaleString()\r\n}\r\n\r\nexport default () => {\r\n  const isModalActive = useIsModalActive('storage-conflict')\r\n  const conflicts = getStorageConflicts()\r\n\r\n  if (!isModalActive/*  || conflicts.length === 0 */) return null\r\n\r\n  const clampText = (text: string) => {\r\n    if (typeof text !== 'string') text = JSON.stringify(text)\r\n    return text.length > 30 ? text.slice(0, 30) + '...' : text\r\n  }\r\n\r\n  const conflictText = conflicts.map(conflict => {\r\n    const localTime = formatTimestamp(conflict.localStorageTimestamp)\r\n    const cookieTime = formatTimestamp(conflict.cookieTimestamp)\r\n    return `${conflict.key}: LocalStorage (${localTime}, ${clampText(conflict.localStorageValue)}) vs Cookie (${cookieTime}, ${clampText(conflict.cookieValue)})`\r\n  }).join('\\n')\r\n\r\n  return (\r\n    <div\r\n    >\r\n      <div style={{\r\n        background: '#dcb58f',\r\n        border: '2px solid #654321',\r\n        padding: '20px',\r\n        margin: '10px',\r\n        color: '#FFFFFF',\r\n        fontFamily: 'minecraft, monospace',\r\n        textAlign: 'center',\r\n        zIndex: 1000,\r\n        position: 'fixed',\r\n        left: 0,\r\n        right: 0\r\n      }}>\r\n        <div style={{\r\n          fontSize: '16px',\r\n          fontWeight: 'bold',\r\n          color: '#000000',\r\n          marginBottom: '15px'\r\n        }}>\r\n          Data Conflict Found\r\n        </div>\r\n\r\n        <div style={{\r\n          fontSize: '12px',\r\n          marginBottom: '20px',\r\n          whiteSpace: 'pre-line',\r\n          // backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          color: '#642323',\r\n          padding: '10px',\r\n          // border: '1px solid #654321'\r\n        }}>\r\n          You have conflicting data between localStorage (old) and cookies (new, domain-synced) for the following settings:\r\n          {'\\n\\n'}\r\n          {conflictText}\r\n          {'\\n\\n'}\r\n          Please choose which version to keep:\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', gap: '10px', justifyContent: 'center', fontSize: '8px', color: 'black' }}>\r\n          <div\r\n            onClick={() => {\r\n              resolveStorageConflicts(true) // Use localStorage\r\n              hideCurrentModal()\r\n            }}\r\n            style={{\r\n              border: '1px solid #654321',\r\n              padding: '8px 16px',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            Use Local Storage & Disable Cookie Sync\r\n          </div>\r\n\r\n          <div\r\n            onClick={() => {\r\n              resolveStorageConflicts(false) // Use cookies\r\n              hideCurrentModal()\r\n            }}\r\n            style={{\r\n              border: '1px solid #654321',\r\n              padding: '8px 16px',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            Use Cookie Data & Remove Local Data\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/* eslint-disable no-await-in-loop */\r\nimport { useSnapshot } from 'valtio'\r\nimport { useEffect, useState } from 'react'\r\nimport { getLoadedImage } from 'mc-assets/dist/utils'\r\nimport { createCanvas } from 'renderer/viewer/lib/utils'\r\n\r\nconst TEXTURE_UPDATE_INTERVAL = 100 // 5 times per second\r\n\r\nexport default () => {\r\n  const { onFire, perspective } = useSnapshot(appViewer.playerState.reactive)\r\n  const [fireTextures, setFireTextures] = useState<string[]>([])\r\n  const [currentTextureIndex, setCurrentTextureIndex] = useState(0)\r\n\r\n  useEffect(() => {\r\n    let animationFrameId: number\r\n    let lastTextureUpdate = 0\r\n\r\n    const updateTexture = (timestamp: number) => {\r\n      if (onFire && fireTextures.length > 0) {\r\n        if (timestamp - lastTextureUpdate >= TEXTURE_UPDATE_INTERVAL) {\r\n          setCurrentTextureIndex(prev => (prev + 1) % fireTextures.length)\r\n          lastTextureUpdate = timestamp\r\n        }\r\n      }\r\n      animationFrameId = requestAnimationFrame(updateTexture)\r\n    }\r\n\r\n    animationFrameId = requestAnimationFrame(updateTexture)\r\n    return () => cancelAnimationFrame(animationFrameId)\r\n  }, [onFire, fireTextures])\r\n\r\n  useEffect(() => {\r\n    const loadTextures = async () => {\r\n      const fireImageUrls: string[] = []\r\n\r\n      const { resourcesManager } = appViewer\r\n      const { blocksAtlasParser } = resourcesManager\r\n      if (!blocksAtlasParser?.atlas?.latest) {\r\n        console.warn('FireRenderer: Blocks atlas parser not available')\r\n        return\r\n      }\r\n\r\n      const keys = Object.keys(blocksAtlasParser.atlas.latest.textures).filter(key => /^fire_\\d+$/.exec(key))\r\n      for (const key of keys) {\r\n        const textureInfo = blocksAtlasParser.getTextureInfo(key) as { u: number, v: number, width?: number, height?: number }\r\n        if (textureInfo) {\r\n          const defaultSize = blocksAtlasParser.atlas.latest.tileSize\r\n          const imageWidth = blocksAtlasParser.atlas.latest.width\r\n          const imageHeight = blocksAtlasParser.atlas.latest.height\r\n          const textureWidth = textureInfo.width ?? defaultSize\r\n          const textureHeight = textureInfo.height ?? defaultSize\r\n\r\n          // Create a temporary canvas for the full texture\r\n          const tempCanvas = createCanvas(textureWidth, textureHeight)\r\n          const tempCtx = tempCanvas.getContext('2d')\r\n          if (tempCtx && blocksAtlasParser.latestImage) {\r\n            const image = await getLoadedImage(blocksAtlasParser.latestImage)\r\n            tempCtx.drawImage(\r\n              image,\r\n              textureInfo.u * imageWidth,\r\n              textureInfo.v * imageHeight,\r\n              textureWidth,\r\n              textureHeight,\r\n              0,\r\n              0,\r\n              textureWidth,\r\n              textureHeight\r\n            )\r\n\r\n            // Create final canvas with only top 20% of the texture\r\n            const finalHeight = Math.ceil(textureHeight * 0.4)\r\n            const canvas = createCanvas(textureWidth, finalHeight)\r\n            const ctx = canvas.getContext('2d')\r\n            if (ctx) {\r\n              // Draw only the top portion\r\n              ctx.drawImage(\r\n                tempCanvas,\r\n                0,\r\n                0, // Start from top\r\n                textureWidth,\r\n                finalHeight,\r\n                0,\r\n                0,\r\n                textureWidth,\r\n                finalHeight\r\n              )\r\n\r\n              const blob = await canvas.convertToBlob()\r\n              const url = URL.createObjectURL(blob)\r\n              fireImageUrls.push(url)\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      setFireTextures(fireImageUrls)\r\n    }\r\n\r\n    // Load textures initially\r\n    if (appViewer.resourcesManager.currentResources) {\r\n      void loadTextures()\r\n    }\r\n\r\n    // Set up listener for texture updates\r\n    const onAssetsUpdated = () => {\r\n      void loadTextures()\r\n    }\r\n    appViewer.resourcesManager.on('assetsTexturesUpdated', onAssetsUpdated)\r\n\r\n    // Cleanup\r\n    return () => {\r\n      appViewer.resourcesManager.off('assetsTexturesUpdated', onAssetsUpdated)\r\n      // Cleanup texture URLs\r\n      for (const url of fireTextures) URL.revokeObjectURL(url)\r\n    }\r\n  }, [])\r\n\r\n  if (!onFire || fireTextures.length === 0 || perspective !== 'first_person') return null\r\n\r\n  return (\r\n    <div\r\n      className='fire-renderer-container'\r\n      style={{\r\n        position: 'fixed',\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        height: '20dvh',\r\n        pointerEvents: 'none',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'flex-end',\r\n        overflow: 'hidden',\r\n        zIndex: -1\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          width: '100%',\r\n          height: '100%',\r\n          backgroundImage: `url(${fireTextures[currentTextureIndex]})`,\r\n          backgroundSize: '50% 100%',\r\n          backgroundPosition: 'center',\r\n          backgroundRepeat: 'repeat-x',\r\n          opacity: 0.7,\r\n          filter: 'brightness(1.2) contrast(1.2)',\r\n          mixBlendMode: 'screen'\r\n        }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport { useEffect } from 'react'\r\nimport { Editor } from '@monaco-editor/react'\r\nimport PixelartIcon, { pixelartIcons } from '../react/PixelartIcon'\r\nimport { useIsModalActive } from '../react/utilsApp'\r\nimport { showNotification } from '../react/NotificationProvider'\r\nimport { hideModal, showModal } from '../globalState'\r\nimport { ideState, saveIde } from '../core/ideChannels'\r\nimport './MonacoEditor.css'\r\n\r\nexport default () => {\r\n  const { contents, line, column, id, language, title } = useSnapshot(ideState)\r\n  const isModalActive = useIsModalActive('monaco-editor')\r\n  const bodyFont = getComputedStyle(document.body).fontFamily\r\n\r\n  useEffect(() => {\r\n    if (id && !isModalActive) {\r\n      showModal({ reactType: 'monaco-editor' })\r\n    }\r\n    if (!id && isModalActive) {\r\n      hideModal()\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(() => {\r\n    if (!isModalActive && id) {\r\n      try {\r\n        saveIde()\r\n      } catch (err) {\r\n        reportError(err)\r\n        showNotification('Failed to save the editor', 'Please try again', true)\r\n      }\r\n      ideState.id = ''\r\n      ideState.contents = ''\r\n    }\r\n  }, [isModalActive])\r\n\r\n  if (!isModalActive) return null\r\n\r\n  return <div className=\"monaco-editor-container\">\r\n    <div className=\"monaco-editor-close\">\r\n      <PixelartIcon\r\n        iconName={pixelartIcons.close}\r\n        width={26}\r\n        onClick={() => {\r\n          hideModal()\r\n        }}\r\n      />\r\n    </div>\r\n    <div className=\"monaco-editor-title\">\r\n      {title}\r\n    </div>\r\n    <div className=\"monaco-editor-wrapper\">\r\n      <Editor\r\n        height=\"100%\"\r\n        width=\"100%\"\r\n        language={language}\r\n        theme='vs-dark'\r\n        line={line}\r\n        onChange={(value) => {\r\n          ideState.contents = value ?? ''\r\n        }}\r\n        value={contents}\r\n        options={{\r\n          fontFamily: bodyFont,\r\n          minimap: {\r\n            enabled: true,\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  </div>\r\n}\r\n","import { useSnapshot } from 'valtio'\r\nimport { miscUiState } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\n\r\nexport default () => {\r\n  const { fullscreen } = useSnapshot(miscUiState)\r\n  const { topRightTimeDisplay } = useSnapshot(options)\r\n  const useBottom = (\r\n    (process.env.NODE_ENV === 'development' && document.exitPointerLock) ||\r\n    (\r\n      topRightTimeDisplay === 'always' ||\r\n      (topRightTimeDisplay === 'only-fullscreen' && fullscreen)\r\n    )\r\n  )\r\n\r\n  return <div\r\n    id='corner-indicator-stats'\r\n    style={{\r\n      position: 'fixed',\r\n      right: 0,\r\n      zIndex: 10,\r\n      ...(useBottom ? { bottom: 0 } : { top: 0 }),\r\n    }}\r\n  />\r\n}\r\n","import { promisify } from 'util'\r\nimport fs from 'fs'\r\nimport * as nbt from 'prismarine-nbt'\r\nimport RegionFile from 'prismarine-provider-anvil/src/region'\r\nimport { versions } from 'minecraft-data'\r\nimport { getThreeJsRendererMethods } from 'renderer/viewer/three/threeJsMethods'\r\nimport { openWorldDirectory, openWorldZip } from './browserfs'\r\nimport { isGameActive } from './globalState'\r\nimport { showNotification } from './react/NotificationProvider'\r\nimport { openFile, VALID_REPLAY_EXTENSIONS } from './packetsReplay/replayPackets'\r\n\r\nconst parseNbt = promisify(nbt.parse)\r\nconst simplifyNbt = nbt.simplify\r\nwindow.nbt = nbt\r\n\r\n// Supported image types for skybox\r\nconst VALID_IMAGE_EXTENSIONS = ['.png', '.jpg', '.jpeg', '.webp']\r\n\r\n// todo display drop zone\r\nfor (const event of ['drag', 'dragstart', 'dragend', 'dragover', 'dragenter', 'dragleave', 'drop']) {\r\n  window.addEventListener(event, (e: any) => {\r\n    if (e.dataTransfer && !e.dataTransfer.types.includes('Files')) {\r\n      // e.dataTransfer.effectAllowed = \"none\"\r\n      return\r\n    }\r\n    e.preventDefault()\r\n  })\r\n}\r\nwindow.addEventListener('drop', async e => {\r\n  if (!e.dataTransfer?.files.length) return\r\n  const { items } = e.dataTransfer\r\n  const item = items[0]\r\n  if (item.getAsFileSystemHandle) {\r\n    const filehandle = await item.getAsFileSystemHandle() as FileSystemFileHandle | FileSystemDirectoryHandle\r\n    if (filehandle.kind === 'file') {\r\n      const file = await filehandle.getFile()\r\n\r\n      await handleDroppedFile(file)\r\n    } else {\r\n      if (isGameActive(false)) {\r\n        alert('Exit current world first, before loading a new one.')\r\n        return\r\n      }\r\n      await openWorldDirectory(filehandle)\r\n    }\r\n  } else {\r\n    await handleDroppedFile(item.getAsFile()!)\r\n  }\r\n})\r\n\r\nasync function handleDroppedFile (file: File) {\r\n  // Check for image files first when game is active\r\n  if (isGameActive(false) && VALID_IMAGE_EXTENSIONS.some(ext => file.name.toLowerCase().endsWith(ext))) {\r\n    try {\r\n      // Convert image to base64\r\n      const reader = new FileReader()\r\n      const base64Promise = new Promise<string>((resolve, reject) => {\r\n        reader.onload = () => resolve(reader.result as string)\r\n        reader.onerror = reject\r\n      })\r\n      reader.readAsDataURL(file)\r\n      const base64Image = await base64Promise\r\n\r\n      // Get ThreeJS backend methods and update skybox\r\n      const setSkyboxImage = getThreeJsRendererMethods()?.setSkyboxImage\r\n      if (setSkyboxImage) {\r\n        await setSkyboxImage(base64Image)\r\n        showNotification('Skybox updated successfully')\r\n      } else {\r\n        showNotification('Cannot update skybox - renderer does not support it')\r\n      }\r\n      return\r\n    } catch (err) {\r\n      console.error('Failed to update skybox:', err)\r\n      showNotification('Failed to update skybox', 'error')\r\n      return\r\n    }\r\n  }\r\n\r\n  if (file.name.endsWith('.zip')) {\r\n    void openWorldZip(file)\r\n    return\r\n  }\r\n  // if (file.name.endsWith('.mca')) // TODO let's do something interesting with it: viewer?\r\n  if (file.name.endsWith('.rar')) {\r\n    alert('Rar files are not supported yet!')\r\n    return\r\n  }\r\n  if (VALID_REPLAY_EXTENSIONS.some(ext => file.name.endsWith(ext)) || file.name.startsWith('packets-replay')) {\r\n    const contents = await file.text()\r\n    openFile({\r\n      contents,\r\n      filename: file.name,\r\n      filesize: file.size\r\n    })\r\n    return\r\n  }\r\n  if (file.name.endsWith('.mca')) {\r\n    const tempPath = '/temp/temp.mca'\r\n    try {\r\n      await fs.promises.writeFile(tempPath, Buffer.from(await file.arrayBuffer()) as any)\r\n      const region = new RegionFile(tempPath)\r\n      await region.initialize()\r\n      const chunks: Record<string, any> = {}\r\n      console.log('Reading chunks...')\r\n      console.log(chunks)\r\n      let versionDetected = false\r\n      for (const [i, _] of Array.from({ length: 32 }).entries()) {\r\n        for (const [k, _] of Array.from({ length: 32 }).entries()) {\r\n          // todo, may use faster reading, but features is not commonly used\r\n          // eslint-disable-next-line no-await-in-loop\r\n          const nbt = await region.read(i, k)\r\n          chunks[`${i},${k}`] = nbt\r\n          if (nbt && !versionDetected) {\r\n            const simplified = simplifyNbt(nbt)\r\n            const version = versions.pc.find(x => x['dataVersion'] === simplified.DataVersion)?.minecraftVersion\r\n            console.log('Detected version', version ?? 'unknown')\r\n            versionDetected = true\r\n          }\r\n        }\r\n      }\r\n      Object.defineProperty(chunks, 'simplified', {\r\n        get () {\r\n          const mapped = {}\r\n          for (const [i, _] of Array.from({ length: 32 }).entries()) {\r\n            for (const [k, _] of Array.from({ length: 32 }).entries()) {\r\n              const key = `${i},${k}`\r\n              const chunk = chunks[key]\r\n              if (!chunk) continue\r\n              mapped[key] = simplifyNbt(chunk)\r\n            }\r\n          }\r\n          return mapped\r\n        },\r\n      })\r\n      console.log('Done!', chunks)\r\n    } finally {\r\n      await fs.promises.unlink(tempPath)\r\n    }\r\n    return\r\n  }\r\n\r\n  const buffer = await file.arrayBuffer()\r\n  const parsed = await parseNbt(Buffer.from(buffer)).catch((err) => {\r\n    alert('Couldn\\'t parse nbt, ensure you are opening .dat or file (or .zip/folder with a world)')\r\n    throw err\r\n  })\r\n  showNotification(`${file.name} data available in browser console`)\r\n  console.log('raw', parsed)\r\n  console.log('simplified', nbt.simplify(parsed))\r\n}\r\n","import { LocalServer } from './customServer'\r\n\r\nconst { createMCServer } = require('flying-squid/dist')\r\n\r\nexport const startLocalServer = (serverOptions) => {\r\n  const passOptions = { ...serverOptions, Server: LocalServer }\r\n  const server: NonNullable<typeof localServer> = createMCServer(passOptions)\r\n  server.formatMessage = (message) => `[server] ${message}`\r\n  server.options = passOptions\r\n  //@ts-expect-error todo remove\r\n  server.looseProtocolMode = true\r\n  return server\r\n}\r\n\r\n// features that flying-squid doesn't support at all\r\n// todo move & generate in flying-squid\r\nexport const unsupportedLocalServerFeatures = ['transactionPacketExists', 'teleportUsesOwnPacket']\r\n","import { isCypress } from './standaloneUtils'\r\n\r\n// might not resolve at all\r\nexport const registerServiceWorker = async () => {\r\n  if (!('serviceWorker' in navigator) || process.env.SINGLE_FILE_BUILD) return\r\n  if (process.env.DISABLE_SERVICE_WORKER) return\r\n  if (!isCypress() && process.env.NODE_ENV !== 'development') {\r\n    return new Promise<void>(resolve => {\r\n      window.addEventListener('load', async () => {\r\n        await navigator.serviceWorker.register('./service-worker.js').then(registration => {\r\n          console.log('SW registered:', registration)\r\n          resolve()\r\n        }).catch(registrationError => {\r\n          console.log('SW registration failed:', registrationError)\r\n        })\r\n      })\r\n    })\r\n  } else {\r\n    // force unregister service worker in development mode\r\n    const registrations = await navigator.serviceWorker.getRegistrations()\r\n    for (const registration of registrations) {\r\n      await registration.unregister() // eslint-disable-line no-await-in-loop\r\n    }\r\n    if (registrations.length) {\r\n      location.reload()\r\n    }\r\n  }\r\n}\r\n","import { subscribeKey } from 'valtio/utils'\r\nimport { gameAdditionalState } from './globalState'\r\nimport { options } from './optionsStorage'\r\nimport { playerState } from './mineflayer/playerState'\r\n\r\nlet currentFov = 0\r\nlet targetFov = 0\r\nlet lastUpdateTime = 0\r\nconst FOV_TRANSITION_DURATION = 200 // milliseconds\r\n\r\n// TODO: These should be configured based on your game's settings\r\nconst BASE_MOVEMENT_SPEED = 0.1 // Default walking speed in Minecraft\r\nconst FOV_EFFECT_SCALE = 1 // Equivalent to Minecraft's FOV Effects slider\r\n\r\nconst updateFovAnimation = () => {\r\n  if (!playerState.ready) return\r\n\r\n  // Calculate base FOV modifier\r\n  let fovModifier = 1\r\n\r\n  // Flying modifier\r\n  if (gameAdditionalState.isFlying) {\r\n    fovModifier *= 1.05\r\n  }\r\n\r\n  // Movement speed modifier\r\n  // TODO: Get actual movement speed attribute value\r\n  const movementSpeedAttr = (bot.entity?.attributes?.['generic.movement_speed'] || bot.entity?.attributes?.['minecraft:movement_speed'] || bot.entity?.attributes?.['movement_speed'] || bot.entity?.attributes?.['minecraft:movementSpeed'])?.value || BASE_MOVEMENT_SPEED\r\n  let currentSpeed = BASE_MOVEMENT_SPEED\r\n  // todo\r\n  if (bot.controlState?.sprint && !bot.controlState?.sneak) {\r\n    currentSpeed *= 1.3\r\n  }\r\n  fovModifier *= (currentSpeed / movementSpeedAttr + 1) / 2\r\n\r\n  // Validate fov modifier\r\n  if (Math.abs(BASE_MOVEMENT_SPEED) < Number.EPSILON || isNaN(fovModifier) || !isFinite(fovModifier)) {\r\n    fovModifier = 1\r\n  }\r\n\r\n  // Item usage modifier\r\n  if (playerState.reactive.heldItemMain) {\r\n    const heldItem = playerState.reactive.heldItemMain\r\n    if (heldItem?.name === 'bow' && playerState.reactive.itemUsageTicks > 0) {\r\n      const ticksUsingItem = playerState.reactive.itemUsageTicks\r\n      let usageProgress = ticksUsingItem / 20\r\n      if (usageProgress > 1) {\r\n        usageProgress = 1\r\n      } else {\r\n        usageProgress *= usageProgress\r\n      }\r\n      fovModifier *= 1 - usageProgress * 0.15\r\n    }\r\n    // TODO: Add spyglass/scope check here if needed\r\n  }\r\n\r\n  // Apply FOV effect scale\r\n  fovModifier = 1 + (fovModifier - 1) * FOV_EFFECT_SCALE\r\n\r\n  // Calculate target FOV\r\n  const baseFov = gameAdditionalState.isZooming ? 30 : options.fov\r\n  targetFov = baseFov * fovModifier\r\n\r\n  // Smooth transition\r\n  const now = performance.now()\r\n  if (currentFov !== targetFov) {\r\n    const elapsed = now - lastUpdateTime\r\n    const progress = Math.min(elapsed / FOV_TRANSITION_DURATION, 1)\r\n    const easeOutCubic = (t: number) => 1 - (1 - t) ** 3\r\n\r\n    currentFov += (targetFov - currentFov) * easeOutCubic(progress)\r\n\r\n    if (Math.abs(currentFov - targetFov) < 0.01) {\r\n      currentFov = targetFov\r\n    }\r\n\r\n    appViewer.inWorldRenderingConfig.fov = currentFov\r\n  }\r\n  lastUpdateTime = now\r\n}\r\n\r\nexport const watchFov = () => {\r\n  // Initial FOV setup\r\n  if (!beforeRenderFrame.includes(updateFovAnimation)) {\r\n    beforeRenderFrame.push(updateFovAnimation)\r\n  }\r\n\r\n  customEvents.on('gameLoaded', () => {\r\n    updateFovAnimation()\r\n  })\r\n}\r\n","import { saveServer } from './flyingSquidUtils'\r\nimport { watchUnloadForCleanup } from './gameUnload'\r\nimport { showModal } from './globalState'\r\nimport { options } from './optionsStorage'\r\nimport { chatInputValueGlobal } from './react/Chat'\r\nimport { showNotification } from './react/NotificationProvider'\r\n\r\nexport default () => {\r\n  localServer!.on('warpsLoaded', () => {\r\n    if (!localServer) return\r\n    showNotification(`${localServer.warps.length} Warps loaded`, 'Use /warp <name> to teleport to a warp point.', false, 'label-alt', () => {\r\n      chatInputValueGlobal.value = '/warp '\r\n      showModal({ reactType: 'chat' })\r\n    })\r\n  })\r\n\r\n  if (options.singleplayerAutoSave) {\r\n    const autoSaveInterval = setInterval(() => {\r\n      if (options.singleplayerAutoSave) {\r\n        void saveServer(true)\r\n      }\r\n    }, 2000)\r\n    watchUnloadForCleanup(() => {\r\n      clearInterval(autoSaveInterval)\r\n    })\r\n  }\r\n}\r\n","import { isMobile } from 'renderer/viewer/lib/simpleUtils'\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  // mobile devtools\r\n  if (isMobile()) {\r\n    // can be changed to require('eruda')\r\n    //@ts-expect-error\r\n    void import('https://cdn.skypack.dev/eruda').then(({ default: eruda }) => eruda.init())\r\n  }\r\n}\r\nconsole.log('JS Loaded in', Date.now() - window.startLoad)\r\n","import { ref } from 'valtio'\r\nimport { watchUnloadForCleanup } from './gameUnload'\r\n\r\nlet inWater = false\r\n\r\ncustomEvents.on('gameLoaded', () => {\r\n  const cleanup = () => {\r\n    appViewer.playerState.reactive.inWater = false\r\n  }\r\n  watchUnloadForCleanup(cleanup)\r\n\r\n  const updateInWater = () => {\r\n    const waterBr = Object.keys(bot.entity.effects).find((effect: any) => loadedData.effects[effect.id]?.name === 'water_breathing')\r\n    if (inWater) {\r\n      appViewer.playerState.reactive.inWater = true\r\n      appViewer.playerState.reactive.waterBreathing = waterBr !== undefined\r\n    } else {\r\n      cleanup()\r\n    }\r\n    updateBackground()\r\n  }\r\n  bot.on('physicsTick', () => {\r\n    // todo\r\n    const _inWater = bot.world.getBlock(bot.entity.position.offset(0, 1, 0))?.name === 'water'\r\n    if (_inWater !== inWater) {\r\n      inWater = _inWater\r\n      updateInWater()\r\n    }\r\n  })\r\n})\r\n\r\nlet sceneBg = { r: 0, g: 0, b: 0 }\r\nexport const updateBackground = (newSceneBg = sceneBg) => {\r\n  sceneBg = newSceneBg\r\n  const color: [number, number, number] = inWater ? [0, 0, 1] : [sceneBg.r, sceneBg.g, sceneBg.b]\r\n  appViewer.playerState.reactive.backgroundColor = ref(color)\r\n}\r\n","import { noCase } from 'change-case'\r\n\r\nexport interface BenchmarkAdapterInfo {\r\n  fixture: string\r\n  // general load info\r\n  worldLoadTimeSeconds: number\r\n\r\n  // mesher\r\n  mesherWorkersCount: number\r\n  mesherProcessAvgMs: number\r\n  mesherProcessWorstMs: number\r\n  mesherProcessTotalMs: number\r\n  chunksFullInfo: string\r\n\r\n  // rendering backend\r\n  averageRenderTimeMs: number\r\n  worstRenderTimeMs: number\r\n  fpsAveragePrediction: number\r\n  fpsWorstPrediction: number\r\n  fpsAverageReal: string\r\n  fpsWorstReal: number\r\n  backendInfoReport: string\r\n\r\n  // main thread\r\n  fpsAverageMainThread: number\r\n  fpsWorstMainThread: number\r\n\r\n  // memory total\r\n  memoryUsageAverage: string\r\n  memoryUsageWorst: string\r\n\r\n  // context info\r\n  gpuInfo: string\r\n  hardwareConcurrency: number\r\n  userAgent: string\r\n  clientVersion: string\r\n}\r\n\r\nexport const getAllInfo = (adapter: BenchmarkAdapterInfo) => {\r\n  return Object.fromEntries(\r\n    Object.entries(adapter).map(([key, value]) => {\r\n      if (typeof value === 'function') {\r\n        value = (value as () => any)()\r\n      }\r\n      if (typeof value === 'number') {\r\n        value = value.toFixed(2)\r\n      }\r\n      return [noCase(key), value]\r\n    })\r\n  )\r\n}\r\n\r\nexport const getAllInfoLines = (adapter: BenchmarkAdapterInfo, delayed = false) => {\r\n  const info = getAllInfo(adapter)\r\n  if (delayed) {\r\n    for (const key in info) {\r\n      if (key !== 'fpsAveragePrediction' && key !== 'fpsAverageReal') {\r\n        delete info[key]\r\n      }\r\n    }\r\n  }\r\n\r\n  return Object.entries(info).map(([key, value]) => {\r\n    return `${key}${delayed ? ' (delayed)' : ''}: ${value}`\r\n  })\r\n}\r\n","import { Vec3 } from 'vec3'\r\nimport { WorldRendererCommon } from 'renderer/viewer/lib/worldrendererCommon'\r\nimport prettyBytes from 'pretty-bytes'\r\nimport { subscribe } from 'valtio'\r\nimport { downloadAndOpenMapFromUrl } from './downloadAndOpenFile'\r\nimport { activeModalStack, miscUiState } from './globalState'\r\nimport { disabledSettings, options } from './optionsStorage'\r\nimport { BenchmarkAdapterInfo, getAllInfoLines } from './benchmarkAdapter'\r\nimport { appQueryParams } from './appParams'\r\nimport { getScreenRefreshRate } from './utils'\r\nimport { setLoadingScreenStatus } from './appStatus'\r\n\r\nconst DEFAULT_RENDER_DISTANCE = 5\r\n\r\ninterface BenchmarkFixture {\r\n  urlZip?: string\r\n  urlDir?: string[]\r\n  replayFileUrl?: string\r\n  spawn?: [number, number, number]\r\n}\r\n\r\nconst fixtures: Record<string, BenchmarkFixture> = {\r\n  default: {\r\n    urlZip: 'https://bucket.mcraft.fun/Future CITY 4.4-slim.zip',\r\n    spawn: [-133, 87, 309] as [number, number, number],\r\n  },\r\n  dir: {\r\n    urlDir: ['https://bucket.mcraft.fun/Greenfield%20v0.5.1/map-index.json', 'https://mcraft-proxy.vercel.app/0/bucket.mcraft.fun/Greenfield%20v0.5.1/map-index.json'],\r\n  },\r\n  replay: {\r\n    replayFileUrl: 'https://raw.githubusercontent.com/zardoy/mcraft-fun-replays/refs/heads/main/hypepixel-tnt-lobby.worldstate.txt',\r\n  },\r\n}\r\n\r\nError.stackTraceLimit = Error.stackTraceLimit < 30 ? 30 : Error.stackTraceLimit\r\n\r\nconst SESSION_STORAGE_BACKUP_KEY = 'benchmark-backup'\r\nexport const openBenchmark = async (renderDistance = DEFAULT_RENDER_DISTANCE) => {\r\n  let fixtureNameOpen = appQueryParams.openBenchmark\r\n  if (!fixtureNameOpen || fixtureNameOpen === '1' || fixtureNameOpen === 'true' || fixtureNameOpen === 'zip') {\r\n    fixtureNameOpen = 'default'\r\n  }\r\n\r\n\r\n  if (sessionStorage.getItem(SESSION_STORAGE_BACKUP_KEY)) {\r\n    const backup = JSON.stringify(JSON.parse(sessionStorage.getItem(SESSION_STORAGE_BACKUP_KEY)!), null, 2)\r\n    setLoadingScreenStatus('Either other tab with benchmark is open or page crashed. Last data backup is downloaded. Reload page to retry.')\r\n    // download file\r\n    const a = document.createElement('a')\r\n    a.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(backup)\r\n    a.download = `benchmark-${appViewer.backend?.id}.txt`\r\n    a.click()\r\n    sessionStorage.removeItem(SESSION_STORAGE_BACKUP_KEY)\r\n    return\r\n  }\r\n\r\n  const fixture: BenchmarkFixture = appQueryParams.benchmarkMapZipUrl ? {\r\n    urlZip: appQueryParams.benchmarkMapZipUrl,\r\n    spawn: appQueryParams.benchmarkPosition ? appQueryParams.benchmarkPosition.split(',').map(Number) as [number, number, number] : fixtures.default.spawn,\r\n  } : fixtures[fixtureNameOpen]\r\n\r\n  if (!fixture) {\r\n    setLoadingScreenStatus(`Benchmark fixture ${fixtureNameOpen} not found`)\r\n    return\r\n  }\r\n\r\n  let memoryUsageAverage = 0\r\n  let memoryUsageSamples = 0\r\n  let memoryUsageWorst = 0\r\n  setInterval(() => {\r\n    const memoryUsage = (window.performance as any)?.memory?.usedJSHeapSize\r\n    if (memoryUsage) {\r\n      memoryUsageAverage = (memoryUsageAverage * memoryUsageSamples + memoryUsage) / (memoryUsageSamples + 1)\r\n      memoryUsageSamples++\r\n      if (memoryUsage > memoryUsageWorst) {\r\n        memoryUsageWorst = memoryUsage\r\n      }\r\n    }\r\n  }, 200)\r\n\r\n  let mainThreadFpsAverage = 0\r\n  let mainThreadFpsWorst = undefined as number | undefined\r\n  let mainThreadFpsSamples = 0\r\n  let currentPassedFrames = 0\r\n  const mainLoop = () => {\r\n    currentPassedFrames++\r\n    requestAnimationFrame(mainLoop)\r\n  }\r\n  requestAnimationFrame(mainLoop)\r\n  setInterval(() => {\r\n    mainThreadFpsAverage = (mainThreadFpsAverage * mainThreadFpsSamples + currentPassedFrames) / (mainThreadFpsSamples + 1)\r\n    mainThreadFpsSamples++\r\n    if (mainThreadFpsWorst === undefined) {\r\n      mainThreadFpsWorst = currentPassedFrames\r\n    } else {\r\n      mainThreadFpsWorst = Math.min(mainThreadFpsWorst, currentPassedFrames)\r\n    }\r\n    currentPassedFrames = 0\r\n  }, 1000)\r\n\r\n  // todo urlDir fix\r\n  let fixtureName = `${fixture.urlZip ?? fixture.urlDir?.join('|') ?? fixture.replayFileUrl ?? 'unknown'}`\r\n  if (fixture.spawn) {\r\n    fixtureName += ` - ${fixture.spawn.join(' ')}`\r\n  }\r\n\r\n  fixtureName += ` - ${renderDistance}`\r\n  if (process.env.NODE_ENV !== 'development') { // do not delay\r\n    setLoadingScreenStatus('Benchmark requested... Getting screen refresh rate')\r\n    await new Promise(resolve => {\r\n      setTimeout(resolve, 1000)\r\n    })\r\n  }\r\n  let start = 0\r\n  // interval to backup data in sessionStorage in case of page crash\r\n  const saveBackupInterval = setInterval(() => {\r\n    if (!window.world) return\r\n    const backup = JSON.parse(JSON.stringify(window.benchmarkAdapter))\r\n    backup.timePassed = ((Date.now() - start) / 1000).toFixed(2)\r\n    sessionStorage.setItem(SESSION_STORAGE_BACKUP_KEY, JSON.stringify(backup))\r\n  }, 500)\r\n\r\n  const screenRefreshRate = await getScreenRefreshRate()\r\n  const benchmarkAdapter: BenchmarkAdapterInfo = {\r\n    get fixture () {\r\n      return fixtureName\r\n    },\r\n    get worldLoadTimeSeconds () {\r\n      return window.worldLoadTime\r\n    },\r\n    get mesherWorkersCount () {\r\n      return (window.world as WorldRendererCommon).worldRendererConfig.mesherWorkers\r\n    },\r\n    get mesherProcessAvgMs () {\r\n      return (window.world as WorldRendererCommon).workersProcessAverageTime\r\n    },\r\n    get mesherProcessTotalMs () {\r\n      return (window.world as WorldRendererCommon).workersProcessAverageTime * (window.world as WorldRendererCommon).workersProcessAverageTimeCount\r\n    },\r\n    get mesherProcessWorstMs () {\r\n      return (window.world as WorldRendererCommon).maxWorkersProcessTime\r\n    },\r\n    get chunksFullInfo () {\r\n      return (window.world as WorldRendererCommon).chunksFullInfo\r\n    },\r\n    get averageRenderTimeMs () {\r\n      return (window.world as WorldRendererCommon).renderTimeAvg\r\n    },\r\n    get worstRenderTimeMs () {\r\n      return (window.world as WorldRendererCommon).renderTimeMax\r\n    },\r\n    get fpsAveragePrediction () {\r\n      const avgRenderTime = (window.world as WorldRendererCommon).renderTimeAvg\r\n      return 1000 / avgRenderTime\r\n    },\r\n    get fpsWorstPrediction () {\r\n      const maxRenderTime = (window.world as WorldRendererCommon).renderTimeMax\r\n      return 1000 / maxRenderTime\r\n    },\r\n    get fpsAverageReal () {\r\n      return `${(window.world as WorldRendererCommon).fpsAverage.toFixed(0)} / ${screenRefreshRate}`\r\n    },\r\n    get fpsWorstReal () {\r\n      return (window.world as WorldRendererCommon).fpsWorst ?? -1\r\n    },\r\n    get backendInfoReport () {\r\n      return (window.world as WorldRendererCommon).backendInfoReport\r\n    },\r\n    get fpsAverageMainThread () {\r\n      return mainThreadFpsAverage\r\n    },\r\n    get fpsWorstMainThread () {\r\n      return mainThreadFpsWorst ?? -1\r\n    },\r\n    get memoryUsageAverage () {\r\n      return prettyBytes(memoryUsageAverage)\r\n    },\r\n    get memoryUsageWorst () {\r\n      return prettyBytes(memoryUsageWorst)\r\n    },\r\n    get gpuInfo () {\r\n      return appViewer.rendererState.renderer\r\n    },\r\n    get hardwareConcurrency () {\r\n      return navigator.hardwareConcurrency\r\n    },\r\n    get userAgent () {\r\n      return navigator.userAgent\r\n    },\r\n    clientVersion: `${process.env.RELEASE_TAG} ${process.env.BUILD_VERSION} ${process.env.RELEASE_LINK ?? ''}`,\r\n  }\r\n  window.benchmarkAdapter = benchmarkAdapter\r\n\r\n  disabledSettings.value.add('renderDistance')\r\n  options.renderDistance = renderDistance\r\n  disabledSettings.value.add('renderDebug')\r\n  options.renderDebug = 'advanced'\r\n  disabledSettings.value.add('waitForChunksRender')\r\n  options.waitForChunksRender = false\r\n\r\n  void downloadAndOpenMapFromUrl(fixture.urlZip, undefined, fixture.urlDir, fixture.replayFileUrl, {\r\n    connectEvents: {\r\n      serverCreated () {\r\n        if (fixture.spawn) {\r\n          localServer!.spawnPoint = new Vec3(...fixture.spawn)\r\n          localServer!.on('newPlayer', (player) => {\r\n            player.on('dataLoaded', () => {\r\n              player.position = new Vec3(...fixture.spawn!)\r\n              start = Date.now()\r\n            })\r\n          })\r\n        }\r\n      },\r\n    }\r\n  })\r\n\r\n  document.addEventListener('cypress-world-ready', () => {\r\n    clearInterval(saveBackupInterval)\r\n    sessionStorage.removeItem(SESSION_STORAGE_BACKUP_KEY)\r\n    let stats = getAllInfoLines(window.benchmarkAdapter)\r\n    const downloadFile = () => {\r\n      // const changedSettings =\r\n\r\n      const a = document.createElement('a')\r\n      a.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(stats.join('\\n'))\r\n      a.download = `benchmark-${appViewer.backend?.id}.txt`\r\n      a.click()\r\n    }\r\n    if (appQueryParams.downloadBenchmark) {\r\n      downloadFile()\r\n    }\r\n\r\n    const panel = document.createElement('div')\r\n    panel.style.position = 'fixed'\r\n    panel.style.top = '20px'\r\n    panel.style.right = '10px'\r\n    panel.style.backgroundColor = 'rgba(0,0,0,0.8)'\r\n    panel.style.color = 'white'\r\n    panel.style.padding = '10px'\r\n    panel.style.zIndex = '1000'\r\n    panel.style.fontFamily = 'monospace'\r\n    panel.style.maxWidth = '80%'\r\n    panel.style.maxHeight = '90vh'\r\n    panel.style.overflow = 'auto'\r\n    panel.id = 'benchmark-panel'\r\n\r\n    // Add download button\r\n    const downloadButton = document.createElement('button')\r\n    downloadButton.textContent = 'Download Results'\r\n    downloadButton.style.marginBottom = '10px'\r\n    downloadButton.style.padding = '5px 10px'\r\n    downloadButton.style.backgroundColor = '#4CAF50'\r\n    downloadButton.style.color = 'white'\r\n    downloadButton.style.border = 'none'\r\n    downloadButton.style.borderRadius = '4px'\r\n    downloadButton.style.cursor = 'pointer'\r\n    downloadButton.onclick = downloadFile\r\n    panel.appendChild(downloadButton)\r\n\r\n    const pre = document.createElement('pre')\r\n    pre.style.whiteSpace = 'pre-wrap'\r\n    pre.style.wordBreak = 'break-word'\r\n    panel.appendChild(pre)\r\n\r\n    pre.textContent = stats.join('\\n')\r\n    const updateStats = () => {\r\n      stats = getAllInfoLines(window.benchmarkAdapter)\r\n      pre.textContent = stats.join('\\n')\r\n    }\r\n\r\n    document.body.appendChild(panel)\r\n    // setInterval(updateStats, 100)\r\n  })\r\n}\r\n\r\n// add before unload\r\nwindow.addEventListener('beforeunload', () => {\r\n  // remove sessionStorage backup\r\n  sessionStorage.removeItem(SESSION_STORAGE_BACKUP_KEY)\r\n})\r\n\r\ndocument.addEventListener('pointerlockchange', (e) => {\r\n  const panel = document.querySelector<HTMLDivElement>('#benchmark-panel')\r\n  if (panel) {\r\n    panel.hidden = !!document.pointerLockElement\r\n  }\r\n})\r\n\r\nsubscribe(activeModalStack, () => {\r\n  const panel = document.querySelector<HTMLDivElement>('#benchmark-panel')\r\n  if (panel && activeModalStack.length > 1) {\r\n    panel.hidden = true\r\n  }\r\n})\r\n\r\nexport const registerOpenBenchmarkListener = () => {\r\n  if (appQueryParams.openBenchmark) {\r\n    void openBenchmark(appQueryParams.renderDistance ? +appQueryParams.renderDistance : undefined)\r\n  }\r\n\r\n  window.addEventListener('keydown', (e) => {\r\n    if (e.code === 'KeyB' && e.shiftKey && !miscUiState.gameLoaded && activeModalStack.length === 0) {\r\n      e.preventDefault()\r\n      // add ?openBenchmark=true to url without reload\r\n      const url = new URL(window.location.href)\r\n      url.searchParams.set('openBenchmark', 'true')\r\n      window.history.replaceState({}, '', url.toString())\r\n      void openBenchmark()\r\n    }\r\n  })\r\n}\r\n","import { proxy, subscribe } from 'valtio'\r\nimport { showInventory } from 'minecraft-inventory-gui/web/ext.mjs'\r\n\r\n// import Dirt from 'mc-assets/dist/other-textures/latest/blocks/dirt.png'\r\nimport { RecipeItem } from 'minecraft-data'\r\nimport { flat, fromFormattedString } from '@xmcl/text-component'\r\nimport { splitEvery, equals } from 'rambda'\r\nimport PItem, { Item } from 'prismarine-item'\r\nimport { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport { getRenamedData } from 'flying-squid/dist/blockRenames'\r\nimport PrismarineChatLoader from 'prismarine-chat'\r\nimport * as nbt from 'prismarine-nbt'\r\nimport { BlockModel } from 'mc-assets'\r\nimport { renderSlot } from 'renderer/viewer/three/renderSlot'\r\nimport { loadSkinFromUsername } from 'renderer/viewer/lib/utils/skins'\r\nimport Generic95 from '../assets/generic_95.png'\r\nimport { appReplacableResources } from './generated/resources'\r\nimport { activeModalStack, hideCurrentModal, hideModal, miscUiState, showModal } from './globalState'\r\nimport { options } from './optionsStorage'\r\nimport { assertDefined, inGameError } from './utils'\r\nimport { displayClientChat } from './botUtils'\r\nimport { currentScaling } from './scaleInterface'\r\nimport { getItemDescription } from './itemsDescriptions'\r\nimport { MessageFormatPart } from './chatUtils'\r\nimport { GeneralInputItem, getItemMetadata, getItemModelName, getItemNameRaw, RenderItem } from './mineflayer/items'\r\nimport { playerState } from './mineflayer/playerState'\r\nimport { modelViewerState } from './react/OverlayModelViewer'\r\n\r\nconst loadedImagesCache = new Map<string, HTMLImageElement | ImageBitmap>()\r\nconst cleanLoadedImagesCache = () => {\r\n  loadedImagesCache.delete('blocks')\r\n  loadedImagesCache.delete('items')\r\n}\r\n\r\nlet lastWindow: ReturnType<typeof showInventory>\r\nlet lastWindowType: string | null | undefined // null is inventory\r\n/** bot version */\r\nlet version: string\r\nlet PrismarineItem: typeof Item\r\n\r\nexport const jeiCustomCategories = proxy({\r\n  value: [] as Array<{ id: string, categoryTitle: string, items: any[] }>\r\n})\r\n\r\nlet remotePlayerSkin: string | undefined | Promise<string>\r\n\r\nexport const showInventoryPlayer = () => {\r\n  modelViewerState.model = {\r\n    positioning: {\r\n      windowWidth: 176,\r\n      windowHeight: 166,\r\n      x: 25,\r\n      y: 8,\r\n      width: 50,\r\n      height: 70,\r\n      scaled: true,\r\n      onlyInitialScale: true,\r\n    },\r\n    followCursor: true,\r\n    followCursorCenter: {\r\n      x: 51,\r\n      y: 27,\r\n    },\r\n    // models: ['https://bucket.mcraft.fun/sitarbuckss.glb'],\r\n    // debug: true,\r\n    steveModelSkin: appViewer.playerState.reactive.playerSkin ?? (typeof remotePlayerSkin === 'string' ? remotePlayerSkin : ''),\r\n  }\r\n  if (remotePlayerSkin === undefined && !appViewer.playerState.reactive.playerSkin) {\r\n    remotePlayerSkin = loadSkinFromUsername(bot.username, 'skin').then(a => {\r\n      setTimeout(() => {\r\n        // Check if player inventory is still open before updating\r\n        if (lastWindowType === null) {\r\n          showInventoryPlayer()\r\n        }\r\n      }, 0) // todo patch instead and make reactive\r\n      remotePlayerSkin = a ?? ''\r\n      return remotePlayerSkin\r\n    })\r\n  }\r\n}\r\n\r\nexport const onGameLoad = () => {\r\n  version = bot.version\r\n\r\n  PrismarineItem = PItem(version)\r\n\r\n  const mapWindowType = (type: string, inventoryStart: number) => {\r\n    if (type === 'minecraft:container') {\r\n      if (inventoryStart === 45 - 9 * 4) return 'minecraft:generic_9x1'\r\n      if (inventoryStart === 45 - 9 * 3) return 'minecraft:generic_9x2'\r\n      if (inventoryStart === 45 - 9 * 2) return 'minecraft:generic_9x3'\r\n      if (inventoryStart === 45 - 9) return 'minecraft:generic_9x4'\r\n      if (inventoryStart === 45) return 'minecraft:generic_9x5'\r\n      if (inventoryStart === 45 + 9) return 'minecraft:generic_9x6'\r\n    }\r\n    return type\r\n  }\r\n\r\n  const maybeParseNbtJson = (data: any) => {\r\n    if (typeof data === 'string') {\r\n      try {\r\n        data = JSON.parse(data)\r\n      } catch (err) {\r\n        // ignore\r\n      }\r\n    }\r\n    return nbt.simplify(data) ?? data\r\n  }\r\n\r\n  bot.on('windowOpen', (win) => {\r\n    const implementedWindow = implementedContainersGuiMap[mapWindowType(win.type as string, win.inventoryStart)]\r\n    if (implementedWindow) {\r\n      openWindow(implementedWindow, maybeParseNbtJson(win.title))\r\n    } else if (options.unimplementedContainers) {\r\n      openWindow('ChestWin', maybeParseNbtJson(win.title))\r\n    } else {\r\n      // todo format\r\n      displayClientChat(`[client error] cannot open unimplemented window ${win.id} (${win.type}). Slots: ${win.slots.map(item => getItemName(item)).filter(Boolean).join(', ')}`)\r\n      bot.currentWindow?.['close']()\r\n    }\r\n  })\r\n\r\n  // workaround: singleplayer player inventory crafting\r\n  let skipUpdate = false\r\n  bot.inventory.on('updateSlot', ((_oldSlot, oldItem, newItem) => {\r\n    const currentSlot = _oldSlot as number\r\n    if (!miscUiState.singleplayer || oldItem === newItem || skipUpdate) return\r\n    const { craftingResultSlot } = bot.inventory\r\n    if (currentSlot === craftingResultSlot && oldItem && !newItem) {\r\n      for (let i = 1; i < 5; i++) {\r\n        const count = bot.inventory.slots[i]?.count\r\n        if (count && count > 1) {\r\n          const slot = bot.inventory.slots[i]!\r\n          slot.count--\r\n          void bot.creative.setInventorySlot(i, slot)\r\n        } else {\r\n          void bot.creative.setInventorySlot(i, null)\r\n        }\r\n      }\r\n      return\r\n    }\r\n    if (currentSlot > 4) return\r\n    const craftingSlots = bot.inventory.slots.slice(1, 5)\r\n    try {\r\n      const resultingItem = getResultingRecipe(craftingSlots, 2)\r\n      skipUpdate = true\r\n      void bot.creative.setInventorySlot(craftingResultSlot, resultingItem ?? null).then(() => {\r\n        skipUpdate = false\r\n      })\r\n    } catch (err) {\r\n      console.error(err)\r\n      // todo resolve the error! and why would we ever get here on every update?\r\n    }\r\n  }) as any)\r\n\r\n  bot.on('windowClose', () => {\r\n    // todo hide up to the window itself!\r\n    if (lastWindow) {\r\n      hideCurrentModal()\r\n    }\r\n  })\r\n  bot.on('respawn', () => { // todo validate logic against native client (maybe login)\r\n    if (lastWindow) {\r\n      hideCurrentModal()\r\n    }\r\n  })\r\n\r\n  customEvents.on('search', (q) => {\r\n    if (!lastWindow) return\r\n    upJei(q)\r\n  })\r\n\r\n  if (!appViewer.resourcesManager['_inventoryChangeTracked']) {\r\n    appViewer.resourcesManager['_inventoryChangeTracked'] = true\r\n    const texturesChanged = () => {\r\n      cleanLoadedImagesCache()\r\n      if (!lastWindow) return\r\n      upWindowItemsLocal()\r\n      upJei(lastJeiSearch)\r\n    }\r\n    appViewer.resourcesManager.on('assetsInventoryReady', () => texturesChanged())\r\n    appViewer.resourcesManager.on('assetsTexturesUpdated', () => texturesChanged())\r\n  }\r\n}\r\n\r\nconst getImageSrc = (path): string | HTMLImageElement | ImageBitmap => {\r\n  switch (path) {\r\n    case 'gui/container/inventory': return appReplacableResources.latest_gui_container_inventory.content\r\n    case 'blocks': return appViewer.resourcesManager.blocksAtlasParser.latestImage\r\n    case 'items': return appViewer.resourcesManager.itemsAtlasParser.latestImage\r\n    case 'gui': return appViewer.resourcesManager.currentResources!.guiAtlas!.image\r\n    case 'gui/container/dispenser': return appReplacableResources.latest_gui_container_dispenser.content\r\n    case 'gui/container/furnace': return appReplacableResources.furnace_gui_texture.content\r\n    case 'gui/container/crafting_table': return appReplacableResources.latest_gui_container_crafting_table.content\r\n    case 'gui/container/shulker_box': return appReplacableResources.latest_gui_container_shulker_box.content\r\n    case 'gui/container/generic_54': return appReplacableResources.latest_gui_container_generic_54.content\r\n    case 'gui/container/generic_95': return Generic95\r\n    case 'gui/container/hopper': return appReplacableResources.latest_gui_container_hopper.content\r\n    case 'gui/container/horse': return appReplacableResources.latest_gui_container_horse.content\r\n    case 'gui/container/villager2': return appReplacableResources.latest_gui_container_villager2.content\r\n    case 'gui/container/enchanting_table': return appReplacableResources.latest_gui_container_enchanting_table.content\r\n    case 'gui/container/anvil': return appReplacableResources.latest_gui_container_anvil.content\r\n    case 'gui/container/beacon': return appReplacableResources.latest_gui_container_beacon.content\r\n    case 'gui/container/smithing':\r\n      return versionToNumber(bot.version) < versionToNumber('1.20')\r\n        ? appReplacableResources._1_19_4_gui_container_smithing.content\r\n        : appReplacableResources.latest_gui_container_smithing.content\r\n    case 'gui/widgets': return appReplacableResources.other_textures_latest_gui_widgets.content\r\n  }\r\n  // empty texture\r\n  return 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\r\n}\r\n\r\nconst getImage = ({ path = undefined as string | undefined, texture = undefined as string | undefined, blockData = undefined as any, image = undefined as HTMLImageElement | undefined }, onLoad = () => { }) => {\r\n  if (image) {\r\n    return image\r\n  }\r\n  if (!path && !texture) {\r\n    throw new Error('Either pass path or texture')\r\n  }\r\n  const loadPath = (blockData ? 'blocks' : path ?? texture)!\r\n  if (loadedImagesCache.has(loadPath)) {\r\n    onLoad()\r\n  } else {\r\n    const imageSrc = getImageSrc(loadPath)\r\n    if (imageSrc instanceof ImageBitmap) {\r\n      onLoad()\r\n      loadedImagesCache.set(loadPath, imageSrc)\r\n      return imageSrc\r\n    }\r\n\r\n    let image: HTMLImageElement\r\n    if (imageSrc instanceof Image) {\r\n      image = imageSrc\r\n    } else {\r\n      image = new Image()\r\n      image.src = imageSrc\r\n    }\r\n    image.onload = onLoad\r\n    loadedImagesCache.set(loadPath, image)\r\n  }\r\n  return loadedImagesCache.get(loadPath)\r\n}\r\n\r\nconst getItemName = (slot: Item | RenderItem | null) => {\r\n  const parsed = getItemNameRaw(slot, appViewer.resourcesManager)\r\n  if (!parsed) return\r\n  // todo display full text renderer from sign renderer\r\n  const text = flat(parsed as MessageFormatPart).map(x => (typeof x === 'string' ? x : x.text))\r\n  return text.join('')\r\n}\r\n\r\nlet lastMappedSlots = [] as any[]\r\nconst itemToVisualKey = (slot: RenderItem | Item | null) => {\r\n  if (!slot) return ''\r\n  const keys = [\r\n    slot.name,\r\n    slot.durabilityUsed,\r\n    slot.maxDurability,\r\n    slot['count'],\r\n    slot['metadata'],\r\n    slot.nbt ? JSON.stringify(slot.nbt) : '',\r\n    slot['components'] ? JSON.stringify(slot['components']) : '',\r\n    appViewer.resourcesManager.currentResources!.guiAtlasVersion,\r\n  ].join('|')\r\n  return keys\r\n}\r\nconst validateSlot = (slot: any, index: number) => {\r\n  if (!slot.texture) {\r\n    throw new Error(`Slot has no texture: ${index} ${slot.name}`)\r\n  }\r\n}\r\nconst mapSlots = (slots: Array<RenderItem | Item | null>, isJei = false) => {\r\n  const newSlots = slots.map((slot, i) => {\r\n    if (!slot) return null\r\n\r\n    if (!isJei) {\r\n      const oldKey = lastMappedSlots[i]?.cacheKey\r\n      const newKey = itemToVisualKey(slot)\r\n      slot['cacheKey'] = i + '|' + newKey\r\n      if (oldKey && oldKey === newKey) {\r\n        validateSlot(lastMappedSlots[i], i)\r\n        return lastMappedSlots[i]\r\n      }\r\n    }\r\n\r\n    try {\r\n      if (slot.durabilityUsed && slot.maxDurability) slot.durabilityUsed = Math.min(slot.durabilityUsed, slot.maxDurability)\r\n      const debugIsQuickbar = !isJei && i === bot.inventory.hotbarStart + bot.quickBarSlot\r\n      const modelName = getItemModelName(slot, { 'minecraft:display_context': 'gui', }, appViewer.resourcesManager, appViewer.playerState.reactive)\r\n      const slotCustomProps = renderSlot({ modelName, originalItemName: slot.name }, appViewer.resourcesManager, debugIsQuickbar)\r\n      const itemCustomName = getItemName(slot)\r\n      Object.assign(slot, { ...slotCustomProps, displayName: itemCustomName ?? slot.displayName })\r\n      //@ts-expect-error\r\n      slot.toJSON = () => {\r\n        // Allow to serialize slot to JSON as minecraft-inventory-gui creates icon property as cache (recursively)\r\n        //@ts-expect-error\r\n        const { icon, ...rest } = slot\r\n        return rest\r\n      }\r\n      validateSlot(slot, i)\r\n    } catch (err) {\r\n      inGameError(err)\r\n    }\r\n    return slot\r\n  })\r\n  lastMappedSlots = JSON.parse(JSON.stringify(newSlots))\r\n  return newSlots\r\n}\r\n\r\nexport const upInventoryItems = (isInventory: boolean, invWindow = lastWindow) => {\r\n  // inv.pwindow.inv.slots[2].displayName = 'test'\r\n  // inv.pwindow.inv.slots[2].blockData = getBlockData('dirt')\r\n  const customSlots = mapSlots((isInventory ? bot.inventory : bot.currentWindow)!.slots)\r\n  invWindow.pwindow.setSlots(customSlots)\r\n  return customSlots\r\n}\r\n\r\nexport const onModalClose = (callback: () => any) => {\r\n  const modal = activeModalStack.at(-1)\r\n  const unsubscribe = subscribe(activeModalStack, () => {\r\n    const newModal = activeModalStack.at(-1)\r\n    if (modal?.reactType !== newModal?.reactType) {\r\n      callback()\r\n      unsubscribe()\r\n    }\r\n  }, true)\r\n}\r\n\r\nconst implementedContainersGuiMap = {\r\n  // todo allow arbitrary size instead!\r\n  'minecraft:generic_9x1': 'ChestWin',\r\n  'minecraft:generic_9x2': 'ChestWin',\r\n  'minecraft:generic_9x3': 'ChestWin',\r\n  'minecraft:generic_9x4': 'Generic95Win',\r\n  'minecraft:generic_9x5': 'Generic95Win',\r\n  // hopper\r\n  'minecraft:hopper': 'HopperWin',\r\n  'minecraft:generic_5x1': 'HopperWin',\r\n  'minecraft:generic_9x6': 'LargeChestWin',\r\n  'minecraft:generic_3x3': 'DropDispenseWin',\r\n  'minecraft:furnace': 'FurnaceWin',\r\n  'minecraft:smoker': 'FurnaceWin',\r\n  'minecraft:blast_furnace': 'FurnaceWin',\r\n  'minecraft:shulker_box': 'ChestWin',\r\n  'minecraft:crafting': 'CraftingWin',\r\n  'minecraft:smithing': 'will_be_patched_in_openWindow',\r\n  'minecraft:crafting3x3': 'CraftingWin', // todo different result slot\r\n  'minecraft:anvil': 'AnvilWin',\r\n  // enchant\r\n  'minecraft:enchanting_table': 'EnchantingWin',\r\n  // horse\r\n  'minecraft:horse': 'HorseWin',\r\n  // villager\r\n  'minecraft:villager': 'VillagerWin',\r\n}\r\n\r\nlet lastJeiSearch = ''\r\nconst upJei = (search: string) => {\r\n  lastJeiSearch = search\r\n  search = search.toLowerCase()\r\n  // todo fix pre flat\r\n  const itemsArray = [\r\n    ...jeiCustomCategories.value.flatMap(x => x.items).filter(x => x !== null),\r\n    ...loadedData.itemsArray.filter(x => x.displayName.toLowerCase().includes(search)).map(item => new PrismarineItem(item.id, 1)).filter(x => x !== null)\r\n  ]\r\n  const matchedSlots = itemsArray.map(x => {\r\n    x.displayName = getItemName(x) ?? x.displayName\r\n    if (!x.displayName.toLowerCase().includes(search)) return null\r\n    return x\r\n  }).filter(a => a !== null)\r\n  lastWindow.pwindow.win.jeiSlotsPage = 0\r\n  lastWindow.pwindow.win.jeiSlots = mapSlots(matchedSlots, true)\r\n}\r\n\r\nexport const openItemsCanvas = (type, _bot = bot as typeof bot | null) => {\r\n  const inv = showInventory(type, getImage, {}, _bot);\r\n  (inv.canvasManager.children[0].callbacks as any).getItemRecipes = (item) => {\r\n    const allRecipes = getAllItemRecipes(item.name)\r\n    inv.canvasManager.children[0].messageDisplay = ''\r\n    const itemDescription = getItemDescription(item)\r\n    if (!allRecipes?.length && !itemDescription) {\r\n      inv.canvasManager.children[0].messageDisplay = `No recipes found for ${item.displayName}`\r\n    }\r\n    return [...allRecipes ?? [], ...itemDescription ? [\r\n      [\r\n        'GenericDescription',\r\n        mapSlots([item], true)[0],\r\n        [],\r\n        itemDescription\r\n      ]\r\n    ] : []]\r\n  }\r\n  (inv.canvasManager.children[0].callbacks as any).getItemUsages = (item) => {\r\n    const allItemUsages = getAllItemUsages(item.name)\r\n    inv.canvasManager.children[0].messageDisplay = ''\r\n    if (!allItemUsages?.length) {\r\n      inv.canvasManager.children[0].messageDisplay = `No usages found for ${item.displayName}`\r\n    }\r\n    return allItemUsages\r\n  }\r\n  return inv\r\n}\r\n\r\nconst upWindowItemsLocal = () => {\r\n  void Promise.resolve().then(() => {\r\n    if (!lastWindow && bot.currentWindow) {\r\n      // edge case: might happen due to high ping, inventory should be closed soon!\r\n      // openWindow(implementedContainersGuiMap[bot.currentWindow.type])\r\n      return\r\n    }\r\n    upInventoryItems(lastWindowType === null)\r\n  })\r\n}\r\n\r\nlet skipClosePacketSending = false\r\nconst openWindow = (type: string | undefined, title: string | any = undefined) => {\r\n  // patch implementedContainersGuiMap\r\n  implementedContainersGuiMap['minecraft:smithing'] = versionToNumber(bot.version) < versionToNumber('1.20') ? 'SmithingTableLegacyWin' : 'SmithingTableWin'\r\n\r\n  // if (activeModalStack.some(x => x.reactType?.includes?.('player_win:'))) {\r\n  if (activeModalStack.length && !miscUiState.disconnectedCleanup) { // game is not in foreground, don't close current modal\r\n    if (type) {\r\n      skipClosePacketSending = true\r\n      hideCurrentModal()\r\n    } else {\r\n      bot.currentWindow?.['close']()\r\n      return\r\n    }\r\n  }\r\n  lastWindowType = type ?? null\r\n  showModal({\r\n    reactType: `player_win:${type}`,\r\n  })\r\n  if (type === undefined) {\r\n    showInventoryPlayer()\r\n  }\r\n  cleanLoadedImagesCache()\r\n  const inv = openItemsCanvas(type)\r\n  inv.canvasManager.children[0].mobileHelpers = miscUiState.currentTouch\r\n  window.inventory = inv\r\n  const PrismarineChat = PrismarineChatLoader(bot.version)\r\n  try {\r\n    inv.canvasManager.children[0].customTitleText = title ?\r\n      typeof title === 'string' ?\r\n        fromFormattedString(title).text :\r\n        new PrismarineChat(title).toString() :\r\n      undefined\r\n  } catch (err) {\r\n    reportError?.(err)\r\n    inv.canvasManager.children[0].customTitleText = undefined\r\n  }\r\n  // todo\r\n  inv.canvasManager.setScale(currentScaling.scale === 1 ? 1.5 : currentScaling.scale)\r\n  inv.canvas.style.zIndex = '10'\r\n  inv.canvas.style.position = 'fixed'\r\n  inv.canvas.style.inset = '0'\r\n\r\n  inv.canvasManager.onClose = async () => {\r\n    await new Promise(resolve => {\r\n      setTimeout(resolve, 0)\r\n    })\r\n    if (activeModalStack.at(-1)?.reactType?.includes('player_win:')) {\r\n      hideModal(undefined, undefined, { force: true })\r\n    }\r\n    inv.canvasManager.destroy()\r\n  }\r\n\r\n  lastWindow = inv\r\n\r\n  onModalClose(() => {\r\n    // might be already closed (event fired)\r\n    if (type !== undefined && bot.currentWindow && !skipClosePacketSending) bot.currentWindow['close']()\r\n    lastWindow.destroy()\r\n    lastWindow = null as any\r\n    lastWindowType = undefined\r\n    window.inventory = null\r\n    miscUiState.displaySearchInput = false\r\n    destroyFn()\r\n    skipClosePacketSending = false\r\n\r\n    modelViewerState.model = undefined\r\n  })\r\n\r\n  upWindowItemsLocal()\r\n\r\n  lastWindow.pwindow.touch = miscUiState.currentTouch ?? false\r\n  const oldOnInventoryEvent = lastWindow.pwindow.onInventoryEvent.bind(lastWindow.pwindow)\r\n  lastWindow.pwindow.onInventoryEvent = (type, containing, windowIndex, inventoryIndex, item) => {\r\n    if (inv.canvasManager.children[0].currentGuide) {\r\n      const isRightClick = type === 'rightclick'\r\n      const isLeftClick = type === 'leftclick'\r\n      if (isLeftClick || isRightClick) {\r\n        modelViewerState.model = undefined\r\n        inv.canvasManager.children[0].showRecipesOrUsages(isLeftClick, item)\r\n      }\r\n    } else {\r\n      oldOnInventoryEvent(type, containing, windowIndex, inventoryIndex, item)\r\n    }\r\n  }\r\n  lastWindow.pwindow.onJeiClick = (slotItem, _index, isRightclick) => {\r\n    if (versionToNumber(bot.version) < versionToNumber('1.13')) {\r\n      alert('Item give is broken on 1.12.2 and below, we are working on it!')\r\n      return\r\n    }\r\n    // slotItem is the slot from mapSlots\r\n    const itemId = loadedData.itemsByName[slotItem.name]?.id\r\n    if (!itemId) {\r\n      inGameError(`Item for block ${slotItem.name} not found`)\r\n      return\r\n    }\r\n    const item = PrismarineItem.fromNotch({\r\n      ...slotItem,\r\n      itemId,\r\n      itemCount: isRightclick ? 64 : 1,\r\n      components: slotItem.components ?? [],\r\n      removeComponents: slotItem.removedComponents ?? [],\r\n      itemDamage: slotItem.metadata ?? 0,\r\n      nbt: slotItem.nbt,\r\n    })\r\n    if (bot.game.gameMode === 'creative') {\r\n      const freeSlot = bot.inventory.firstEmptyInventorySlot()\r\n      if (freeSlot === null) return\r\n      void bot.creative.setInventorySlot(freeSlot, item)\r\n    } else {\r\n      modelViewerState.model = undefined\r\n      inv.canvasManager.children[0].showRecipesOrUsages(!isRightclick, mapSlots([item], true)[0])\r\n    }\r\n  }\r\n\r\n  const isJeiEnabled = () => {\r\n    if (typeof options.jeiEnabled === 'boolean') return options.jeiEnabled\r\n    if (Array.isArray(options.jeiEnabled)) {\r\n      return options.jeiEnabled.includes(bot.game?.gameMode as any)\r\n    }\r\n    return false\r\n  }\r\n\r\n  if (isJeiEnabled()) {\r\n    lastWindow.pwindow.win.jeiSlotsPage = 0\r\n    // todo workaround so inventory opens immediately (though it still lags)\r\n    setTimeout(() => {\r\n      upJei('')\r\n    })\r\n    miscUiState.displaySearchInput = true\r\n  } else {\r\n    lastWindow.pwindow.win.jeiSlots = []\r\n    miscUiState.displaySearchInput = false\r\n  }\r\n\r\n  if (type === undefined) {\r\n    // player inventory\r\n    bot.inventory.on('updateSlot', upWindowItemsLocal)\r\n    destroyFn = () => {\r\n      bot.inventory.off('updateSlot', upWindowItemsLocal)\r\n    }\r\n  } else {\r\n    //@ts-expect-error\r\n    bot.currentWindow.on('updateSlot', () => {\r\n      upWindowItemsLocal()\r\n    })\r\n  }\r\n}\r\n\r\nlet destroyFn = () => { }\r\n\r\nexport const openPlayerInventory = () => {\r\n  openWindow(undefined)\r\n}\r\n\r\nconst getResultingRecipe = (slots: Array<Item | null>, gridRows: number) => {\r\n  const inputSlotsItems = slots.map(blockSlot => blockSlot?.type)\r\n  let currentShape = splitEvery(gridRows, inputSlotsItems as Array<number | undefined | null>)\r\n  // todo rewrite with candidates search\r\n  if (currentShape.length > 1) {\r\n    // eslint-disable-next-line @typescript-eslint/no-for-in-array\r\n    for (const slotX in currentShape[0]) {\r\n      if (currentShape[0][slotX] !== undefined) {\r\n        for (const [otherY] of Array.from({ length: gridRows }).entries()) {\r\n          if (currentShape[otherY]?.[slotX] === undefined) {\r\n            currentShape[otherY]![slotX] = null\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  currentShape = currentShape.map(arr => arr.filter(x => x !== undefined)).filter(x => x.length !== 0)\r\n\r\n  // todo rewrite\r\n  // eslint-disable-next-line @typescript-eslint/require-array-sort-compare\r\n  const slotsIngredients = [...inputSlotsItems].sort().filter(item => item !== undefined)\r\n  type Result = RecipeItem | undefined\r\n  let shapelessResult: Result\r\n  let shapeResult: Result\r\n  outer: for (const [id, recipeVariants] of Object.entries(loadedData.recipes ?? {})) {\r\n    for (const recipeVariant of recipeVariants) {\r\n      if ('inShape' in recipeVariant && equals(currentShape, recipeVariant.inShape as number[][])) {\r\n        shapeResult = recipeVariant.result!\r\n        break outer\r\n      }\r\n      if ('ingredients' in recipeVariant && equals(slotsIngredients, recipeVariant.ingredients?.sort() as number[])) {\r\n        shapelessResult = recipeVariant.result\r\n        break outer\r\n      }\r\n    }\r\n  }\r\n  const result = shapeResult ?? shapelessResult\r\n  if (!result) return\r\n  const id = typeof result === 'number' ? result : Array.isArray(result) ? result[0] : result.id\r\n  if (!id) return\r\n  const count = (typeof result === 'number' ? undefined : Array.isArray(result) ? result[1] : result.count) ?? 1\r\n  const metadata = typeof result === 'object' && !Array.isArray(result) ? result.metadata : undefined\r\n  const item = new PrismarineItem(id, count, metadata)\r\n  return item\r\n}\r\n\r\nconst ingredientToItem = (recipeItem) => (recipeItem === null ? null : new PrismarineItem(recipeItem, 1))\r\n\r\nconst getAllItemRecipes = (itemName: string) => {\r\n  const item = loadedData.itemsByName[itemName]\r\n  if (!item) return\r\n  const itemId = item.id\r\n  const recipes = loadedData.recipes?.[itemId]\r\n  if (!recipes) return\r\n  const results = [] as Array<{\r\n    result: Item,\r\n    ingredients: Array<Item | null>,\r\n    description?: string\r\n  }>\r\n\r\n  // get recipes here\r\n  for (const recipe of recipes) {\r\n    const { result } = recipe\r\n    if (!result) continue\r\n    const resultId = typeof result === 'number' ? result : Array.isArray(result) ? result[0]! : result.id\r\n    const resultCount = (typeof result === 'number' ? undefined : Array.isArray(result) ? result[1] : result.count) ?? 1\r\n    const resultMetadata = typeof result === 'object' && !Array.isArray(result) ? result.metadata : undefined\r\n    const resultItem = new PrismarineItem(resultId!, resultCount, resultMetadata)\r\n    if ('inShape' in recipe) {\r\n      const ingredients = recipe.inShape\r\n      if (!ingredients) continue\r\n\r\n      const ingredientsItems = ingredients.flatMap(items => items.map(item => ingredientToItem(item)))\r\n      results.push({ result: resultItem, ingredients: ingredientsItems })\r\n    }\r\n    if ('ingredients' in recipe) {\r\n      const { ingredients } = recipe\r\n      if (!ingredients) continue\r\n      const ingredientsItems = ingredients.map(item => ingredientToItem(item))\r\n      results.push({ result: resultItem, ingredients: ingredientsItems, description: 'Shapeless' })\r\n    }\r\n  }\r\n  return results.map(({ result, ingredients, description }) => {\r\n    return [\r\n      'CraftingTableGuide',\r\n      mapSlots([result], true)[0],\r\n      mapSlots(ingredients, true),\r\n      description\r\n    ]\r\n  })\r\n}\r\n\r\nconst getAllItemUsages = (itemName: string) => {\r\n  const item = loadedData.itemsByName[itemName]\r\n  if (!item) return\r\n  const foundRecipeIds = [] as string[]\r\n\r\n  for (const [id, recipes] of Object.entries(loadedData.recipes ?? {})) {\r\n    for (const recipe of recipes) {\r\n      if ('inShape' in recipe) {\r\n        if (recipe.inShape.some(row => row.includes(item.id))) {\r\n          foundRecipeIds.push(id)\r\n        }\r\n      }\r\n      if ('ingredients' in recipe) {\r\n        if (recipe.ingredients.includes(item.id)) {\r\n          foundRecipeIds.push(id)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return foundRecipeIds.flatMap(id => {\r\n    // todo should use exact match, not include all recipes!\r\n    return getAllItemRecipes(loadedData.items[id].name)\r\n  })\r\n}\r\n","\r\nexport const descriptionGenerators = new Map<RegExp | string[], string | ((name) => string)>()\r\ndescriptionGenerators.set(/_slab$/, name => 'Craft it by placing 3 blocks of the material in a row in a crafting table.')\r\ndescriptionGenerators.set(/_stairs$/, name => 'Craft it by placing 6 blocks of the material in a stair shape in a crafting table.')\r\ndescriptionGenerators.set(/_log$/, name => 'You can get it by chopping down a tree. To chop down a tree, hold down the left mouse button until the tree breaks.')\r\ndescriptionGenerators.set(/_leaves$/, name => 'You can get it by breaking the leaves of a tree with a tool that has the Silk Touch enchantment or by using shears.')\r\ndescriptionGenerators.set(['mangrove_roots'], name => 'You can get it by breaking the roots of a mangrove tree.')\r\ndescriptionGenerators.set(['mud'], 'Mud is a block found abundantly in mangrove swamps or created by using a water bottle on a dirt block. It can be used for crafting or converted into clay using pointed dripstone.')\r\ndescriptionGenerators.set(['clay'], 'Clay is a block found underwater or created by using a water bottle on a mud block. It can be used for crafting or converted into terracotta using a furnace.')\r\ndescriptionGenerators.set(['terracotta'], 'Terracotta is a block created by smelting clay in a furnace. It can be used for crafting or decoration.')\r\ndescriptionGenerators.set(['stone'], 'Stone is a block found underground.')\r\ndescriptionGenerators.set(['dirt'], 'Dirt is a block found on the surface.')\r\ndescriptionGenerators.set(['sand'], 'Sand is a block found on the surface near water.')\r\ndescriptionGenerators.set(['gravel'], 'Gravel is a block found on the surface and sometimes underground.')\r\ndescriptionGenerators.set(['sandstone'], 'Sandstone is a block found in deserts.')\r\ndescriptionGenerators.set(['red_sandstone'], 'Red sandstone is a block found in mesas.')\r\ndescriptionGenerators.set(['granite', 'diorite', 'andesite'], name => `${name.charAt(0).toUpperCase() + name.slice(1)} is a block found underground.`)\r\ndescriptionGenerators.set(['netherrack', 'soul_sand', 'soul_soil', 'glowstone'], name => `${name.charAt(0).toUpperCase() + name.slice(1)} is a block found in the Nether.`)\r\ndescriptionGenerators.set(['end_stone'], 'End stone is a block found in the End.')\r\ndescriptionGenerators.set(['obsidian'], 'Obsidian is a block created by pouring water on lava.')\r\ndescriptionGenerators.set(['glass'], 'Glass is a block created by smelting sand in a furnace.')\r\ndescriptionGenerators.set(['bedrock'], 'Bedrock is an indestructible block found at the bottom of the world in the Overworld and at the top of the world in the Nether.')\r\ndescriptionGenerators.set(['water', 'lava'], name => `${name.charAt(0).toUpperCase() + name.slice(1)} is a fluid found in the Overworld.`)\r\ndescriptionGenerators.set(/_sapling$/, name => `${name} drops from the leaves of a tree when it decays or is broken. It can be planted on dirt to grow a new tree.`)\r\ndescriptionGenerators.set(/^stripped_/, name => `${name} is created by using an axe on the block.`)\r\ndescriptionGenerators.set(['sponge'], 'Sponge is a block found in ocean monuments.')\r\ndescriptionGenerators.set(/^music_disc_/, name => `Music discs are rare items that can be found in dungeons or by trading with villagers. Also dropped by creepers when killed by a skeleton.`)\r\ndescriptionGenerators.set(/^enchanted_book$/, 'Enchanted books are rare items that can be found in dungeons or by trading with villagers.')\r\ndescriptionGenerators.set(/_spawn_egg$/, name => `${name} is an item that can be used to spawn a mob in Creative mode. Cannot be obtained in Survival mode.`)\r\ndescriptionGenerators.set(/_pottery_sherd$/, name => `${name} can be obtained only by brushing suspicious blocks, with the variants of sherd obtainable being dependent on the structure.`)\r\ndescriptionGenerators.set(['cracked_deepslate_bricks'], `Deepslate Bricks and Cracked Deepslate Bricks generate naturally in ancient cities.`)\r\n\r\nconst moreGeneratedBlocks = {\r\n  'natural_blocks': {\r\n    'air': {\r\n      'obtained_from': 'Naturally occurs in the world.'\r\n    },\r\n    'deepslate': {\r\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 16.',\r\n      'rarity': 'Common'\r\n    },\r\n    'cobbled_deepslate': {\r\n      'obtained_from': 'Mined from deepslate with any pickaxe.'\r\n    },\r\n    'calcite': {\r\n      'obtained_from': 'Mined with a pickaxe, found in geodes.'\r\n    },\r\n    'tuff': {\r\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 16.',\r\n      'rarity': 'Common'\r\n    },\r\n    'chiseled_tuff': {\r\n      'obtained_from': 'Crafted from tuff.'\r\n    },\r\n    'polished_tuff': {\r\n      'obtained_from': 'Crafted from tuff.'\r\n    },\r\n    'tuff_bricks': {\r\n      'obtained_from': 'Crafted from tuff.'\r\n    },\r\n    'chiseled_tuff_bricks': {\r\n      'obtained_from': 'Crafted from tuff bricks.'\r\n    },\r\n    'grass_block': {\r\n      'obtained_from': 'Mined with a tool enchanted with Silk Touch.'\r\n    },\r\n    'podzol': {\r\n      'obtained_from': 'Mined with a tool enchanted with Silk Touch, found in giant tree taiga biomes.'\r\n    },\r\n    'rooted_dirt': {\r\n      'obtained_from': 'Mined with a shovel, found under azalea trees.'\r\n    },\r\n    'crimson_nylium': {\r\n      'obtained_from': 'Mined with a pickaxe, found in the Nether.'\r\n    },\r\n    'warped_nylium': {\r\n      'obtained_from': 'Mined with a pickaxe, found in the Nether.'\r\n    },\r\n    'cobblestone': {\r\n      'obtained_from': 'Mined from stone, or from breaking stone structures.'\r\n    },\r\n    'mangrove_propagule': {\r\n      'obtained_from': 'Harvested from mangrove trees.'\r\n    },\r\n    'suspicious_sand': {\r\n      'obtained_from': 'Found in deserts and beaches.'\r\n    },\r\n    'suspicious_gravel': {\r\n      'obtained_from': 'Found underwater.'\r\n    },\r\n    'red_sand': {\r\n      'obtained_from': 'Mined from red sand in badlands biomes.'\r\n    },\r\n    'coal_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers 0 to 128.',\r\n      'rarity': 'Common'\r\n    },\r\n    'deepslate_coal_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 0.',\r\n      'rarity': 'Rare'\r\n    },\r\n    'iron_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers 0 to 63.',\r\n      'rarity': 'Common'\r\n    },\r\n    'deepslate_iron_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 0.',\r\n      'rarity': 'Uncommon'\r\n    },\r\n    'copper_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers 0 to 96.',\r\n      'rarity': 'Common'\r\n    },\r\n    'deepslate_copper_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers -16 to 64.',\r\n      'rarity': 'Uncommon'\r\n    },\r\n    'gold_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 32.',\r\n      'rarity': 'Uncommon'\r\n    },\r\n    'deepslate_gold_ore': {\r\n      'obtained_from': 'Mined with a pickaxe in layers -64 to 0.',\r\n      'rarity': 'Rare'\r\n    },\r\n    'redstone_ore': {\r\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 16.',\r\n      'rarity': 'Uncommon'\r\n    },\r\n    'deepslate_redstone_ore': {\r\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 0.',\r\n      'rarity': 'Uncommon'\r\n    },\r\n    'emerald_ore': {\r\n      'obtained_from': 'Mined with an iron pickaxe or higher in mountain biomes, layers -16 to 256.',\r\n      'rarity': 'Rare'\r\n    },\r\n    'deepslate_emerald_ore': {\r\n      'obtained_from': 'Mined with an iron pickaxe or higher in mountain biomes, layers -64 to 0.',\r\n      'rarity': 'Very Rare'\r\n    },\r\n    'lapis_ore': {\r\n      'obtained_from': 'Mined with a stone pickaxe or higher in layers -64 to 32.',\r\n      'rarity': 'Uncommon'\r\n    },\r\n    'deepslate_lapis_ore': {\r\n      'obtained_from': 'Mined with a stone pickaxe or higher in layers -64 to 0.',\r\n      'rarity': 'Rare'\r\n    },\r\n    'diamond_ore': {\r\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 16.',\r\n      'rarity': 'Rare'\r\n    },\r\n    'deepslate_diamond_ore': {\r\n      'obtained_from': 'Mined with an iron pickaxe or higher in layers -64 to 0.',\r\n      'rarity': 'Very Rare'\r\n    },\r\n    'nether_gold_ore': {\r\n      'obtained_from': 'Mined with any pickaxe in the Nether.'\r\n    },\r\n    'nether_quartz_ore': {\r\n      'obtained_from': 'Mined with any pickaxe in the Nether.'\r\n    },\r\n    'ancient_debris': {\r\n      'obtained_from': 'Mined with a diamond or netherite pickaxe in the Nether, layers 8 to 22.',\r\n      'rarity': 'Very Rare'\r\n    },\r\n    'budding_amethyst': {\r\n      'obtained_from': 'Found in amethyst geodes, cannot be obtained as an item.'\r\n    },\r\n    'exposed_copper': {\r\n      'obtained_from': 'Exposed copper block obtained through mining.'\r\n    },\r\n    'weathered_copper': {\r\n      'obtained_from': 'Weathered copper block obtained through mining.'\r\n    },\r\n    'oxidized_copper': {\r\n      'obtained_from': 'Oxidized copper block obtained through mining.'\r\n    },\r\n    'chiseled_copper': {\r\n      'obtained_from': 'Crafted from copper blocks.'\r\n    },\r\n    'exposed_chiseled_copper': {\r\n      'obtained_from': 'Exposed chiseled copper block obtained through mining.'\r\n    },\r\n    'weathered_chiseled_copper': {\r\n      'obtained_from': 'Weathered chiseled copper block obtained through mining.'\r\n    },\r\n    'oxidized_chiseled_copper': {\r\n      'obtained_from': 'Oxidized chiseled copper block obtained through mining.'\r\n    },\r\n    'waxed_chiseled_copper': {\r\n      'obtained_from': 'Crafted from copper blocks, waxed to prevent oxidation.'\r\n    },\r\n    'waxed_exposed_chiseled_copper': {\r\n      'obtained_from': 'Waxed exposed chiseled copper block obtained through mining.'\r\n    },\r\n    'waxed_weathered_chiseled_copper': {\r\n      'obtained_from': 'Waxed weathered chiseled copper block obtained through mining.'\r\n    },\r\n    'waxed_oxidized_chiseled_copper': {\r\n      'obtained_from': 'Waxed oxidized chiseled copper block obtained through mining.'\r\n    },\r\n    'crimson_stem': {\r\n      'obtained_from': 'Mined from crimson trees in the Nether.'\r\n    },\r\n    'warped_stem': {\r\n      'obtained_from': 'Mined from warped trees in the Nether.'\r\n    },\r\n    'stripped_crimson_stem': {\r\n      'obtained_from': 'Stripped from crimson stem with an axe.'\r\n    },\r\n    'stripped_warped_stem': {\r\n      'obtained_from': 'Stripped from warped stem with an axe.'\r\n    },\r\n    'stripped_bamboo_block': {\r\n      'obtained_from': 'Crafted from bamboo.'\r\n    },\r\n    'sponge': {\r\n      'obtained_from': 'Found in ocean monuments.'\r\n    },\r\n    'wet_sponge': {\r\n      'obtained_from': 'Absorbs water, can be dried in a furnace.'\r\n    },\r\n    'cobweb': {\r\n      'obtained_from': 'Mined with a sword or shears, found in mineshafts.'\r\n    },\r\n    'short_grass': {\r\n      'obtained_from': 'Sheared from grass.'\r\n    },\r\n    'fern': {\r\n      'obtained_from': 'Sheared from ferns in forest biomes.'\r\n    },\r\n    'azalea': {\r\n      'obtained_from': 'Found in lush caves.'\r\n    },\r\n    'flowering_azalea': {\r\n      'obtained_from': 'Found in lush caves.'\r\n    },\r\n    'dead_bush': {\r\n      'obtained_from': 'Mined with shears in desert biomes.'\r\n    },\r\n    'seagrass': {\r\n      'obtained_from': 'Sheared from underwater grass.'\r\n    },\r\n    'sea_pickle': {\r\n      'obtained_from': 'Mined with shears from coral reefs.'\r\n    },\r\n    'dandelion': {\r\n      'type': 'natural',\r\n      'description': 'Dandelions are common flowers that spawn in plains, forests, and meadows.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'poppy': {\r\n      'type': 'natural',\r\n      'description': 'Poppies are common flowers that generate in plains, forests, and meadows.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'blue_orchid': {\r\n      'type': 'natural',\r\n      'description': 'Blue orchids spawn naturally in swamp biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'allium': {\r\n      'type': 'natural',\r\n      'description': 'Alliums are flowers that generate in flower forest biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'azure_bluet': {\r\n      'type': 'natural',\r\n      'description': 'Azure bluets are common flowers that spawn in plains and flower forest biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'red_tulip': {\r\n      'type': 'natural',\r\n      'description': 'Red tulips are flowers found in flower forests and plains.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'orange_tulip': {\r\n      'type': 'natural',\r\n      'description': 'Orange tulips are flowers found in flower forests and plains.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'white_tulip': {\r\n      'type': 'natural',\r\n      'description': 'White tulips are flowers found in flower forests and plains.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'pink_tulip': {\r\n      'type': 'natural',\r\n      'description': 'Pink tulips are flowers found in flower forests and plains.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'oxeye_daisy': {\r\n      'type': 'natural',\r\n      'description': 'Oxeye daisies are common flowers that generate in plains and flower forest biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'cornflower': {\r\n      'type': 'natural',\r\n      'description': 'Cornflowers spawn in plains, flower forests, and meadows.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'lily_of_the_valley': {\r\n      'type': 'natural',\r\n      'description': 'Lily of the valleys generate in flower forest biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'wither_rose': {\r\n      'type': 'dropped',\r\n      'description': 'Wither roses are dropped when a mob is killed by the Wither boss.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'torchflower': {\r\n      'type': 'crafted',\r\n      'description': 'Torchflowers can be grown using torchflower seeds, which are found in archeology loot or by trading.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'pitcher_plant': {\r\n      'type': 'crafted',\r\n      'description': 'Pitcher plants can be grown using pitcher pods, which are found in archeology loot or by trading.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'spore_blossom': {\r\n      'type': 'natural',\r\n      'description': 'Spore blossoms generate naturally on the ceilings of lush caves.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'brown_mushroom': {\r\n      'type': 'natural',\r\n      'description': 'Brown mushrooms are found in dark areas, swamps, mushroom fields, and forests.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'red_mushroom': {\r\n      'type': 'natural',\r\n      'description': 'Red mushrooms are found in dark areas, swamps, mushroom fields, and forests.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'crimson_fungus': {\r\n      'type': 'natural',\r\n      'description': 'Crimson fungi generate naturally in crimson forests in the Nether.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'warped_fungus': {\r\n      'type': 'natural',\r\n      'description': 'Warped fungi generate naturally in warped forests in the Nether.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'crimson_roots': {\r\n      'type': 'natural',\r\n      'description': 'Crimson roots generate naturally in crimson forests in the Nether.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'warped_roots': {\r\n      'type': 'natural',\r\n      'description': 'Warped roots generate naturally in warped forests in the Nether.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'nether_sprouts': {\r\n      'type': 'natural',\r\n      'description': 'Nether sprouts generate naturally in warped forests in the Nether.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'weeping_vines': {\r\n      'type': 'natural',\r\n      'description': 'Weeping vines generate naturally in crimson forests in the Nether and grow downward from netherrack.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'twisting_vines': {\r\n      'type': 'natural',\r\n      'description': 'Twisting vines generate naturally in warped forests in the Nether and grow upward from the ground.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'sugar_cane': {\r\n      'type': 'natural',\r\n      'description': 'Sugar cane is found near water in most biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'kelp': {\r\n      'type': 'natural',\r\n      'description': 'Kelp generates underwater in most ocean biomes.',\r\n      'spawn_range': 'Water'\r\n    },\r\n    'pink_petals': {\r\n      'type': 'natural',\r\n      'description': 'Pink petals generate naturally in cherry grove biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'moss_block': {\r\n      'type': 'natural',\r\n      'description': 'Moss blocks generate in lush caves and can also be obtained through trading or by using bone meal on moss carpets.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'hanging_roots': {\r\n      'type': 'natural',\r\n      'description': 'Hanging roots generate naturally in lush caves.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'big_dripleaf': {\r\n      'type': 'natural',\r\n      'description': 'Big dripleaf plants generate in lush caves and can also be obtained through trading.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'small_dripleaf': {\r\n      'type': 'natural',\r\n      'description': 'Small dripleaf plants generate in lush caves and can also be obtained through trading.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'bamboo': {\r\n      'type': 'natural',\r\n      'description': 'Bamboo generates in jungle biomes, especially bamboo jungles.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'smooth_quartz': {\r\n      'type': 'crafted',\r\n      'description': 'Smooth quartz is obtained by smelting blocks of quartz.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'smooth_red_sandstone': {\r\n      'type': 'crafted',\r\n      'description': 'Smooth red sandstone is obtained by smelting red sandstone.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'smooth_sandstone': {\r\n      'type': 'crafted',\r\n      'description': 'Smooth sandstone is obtained by smelting sandstone.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'smooth_stone': {\r\n      'type': 'crafted',\r\n      'description': 'Smooth stone is obtained by smelting regular stone.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'chorus_plant': {\r\n      'type': 'natural',\r\n      'description': 'Chorus plants generate naturally in the End and can be grown from chorus flowers.',\r\n      'spawn_range': 'End'\r\n    },\r\n    'chorus_flower': {\r\n      'type': 'natural',\r\n      'description': 'Chorus flowers generate naturally in the End on top of chorus plants.',\r\n      'spawn_range': 'End'\r\n    },\r\n    'spawner': {\r\n      'type': 'natural',\r\n      'description': 'Spawners generate in dungeons, mineshafts, and other structures.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'farmland': {\r\n      'type': 'crafted',\r\n      'description': 'Farmland is created by using a hoe on dirt or grass blocks.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'ice': {\r\n      'type': 'natural',\r\n      'description': 'Ice generates in snowy and icy biomes and can also be obtained by breaking ice blocks with a Silk Touch tool.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'cactus': {\r\n      'type': 'natural',\r\n      'description': 'Cacti generate naturally in desert biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'pumpkin': {\r\n      'type': 'natural',\r\n      'description': 'Pumpkins generate naturally in most grassy biomes and can also be grown from pumpkin seeds.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'carved_pumpkin': {\r\n      'type': 'crafted',\r\n      'description': 'Carved pumpkins are obtained by using shears on a pumpkin.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'basalt': {\r\n      'type': 'natural',\r\n      'description': 'Basalt generates in the Nether in basalt deltas and can also be created by lava flowing over soul soil next to blue ice.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'smooth_basalt': {\r\n      'type': 'natural',\r\n      'description': 'Smooth basalt is found around amethyst geodes or can be obtained by smelting basalt.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'infested_stone': {\r\n      'type': 'natural',\r\n      'description': 'Infested stone blocks contain silverfish and generate in strongholds, underground.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'infested_cobblestone': {\r\n      'type': 'natural',\r\n      'description': 'Infested cobblestone blocks contain silverfish and generate in strongholds, underground.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'infested_stone_bricks': {\r\n      'type': 'natural',\r\n      'description': 'Infested stone bricks contain silverfish and generate in strongholds, underground.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'infested_mossy_stone_bricks': {\r\n      'type': 'natural',\r\n      'description': 'Infested mossy stone bricks contain silverfish and generate in strongholds, underground.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'infested_cracked_stone_bricks': {\r\n      'type': 'natural',\r\n      'description': 'Infested cracked stone bricks contain silverfish and generate in strongholds, underground.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'infested_chiseled_stone_bricks': {\r\n      'type': 'natural',\r\n      'description': 'Infested chiseled stone bricks contain silverfish and generate in strongholds, underground.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'infested_deepslate': {\r\n      'type': 'natural',\r\n      'description': 'Infested deepslate contains silverfish and generates in the deepslate layer underground.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'cracked_stone_bricks': {\r\n      'type': 'crafted',\r\n      'description': 'Cracked stone bricks are obtained by smelting stone bricks.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'cracked_deepslate_bricks': {\r\n      'type': 'crafted',\r\n      'description': 'Cracked deepslate bricks are obtained by smelting deepslate bricks.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'cracked_deepslate_tiles': {\r\n      'type': 'crafted',\r\n      'description': 'Cracked deepslate tiles are obtained by smelting deepslate tiles.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'reinforced_deepslate': {\r\n      'type': 'crafted',\r\n      'description': 'Reinforced deepslate is a strong block that cannot be obtained in survival mode.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'brown_mushroom_block': {\r\n      'type': 'natural',\r\n      'description': 'Brown mushroom blocks generate as part of huge mushrooms in dark forest biomes and mushroom fields.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'red_mushroom_block': {\r\n      'type': 'natural',\r\n      'description': 'Red mushroom blocks generate as part of huge mushrooms in dark forest biomes and mushroom fields.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'mushroom_stem': {\r\n      'type': 'natural',\r\n      'description': 'Mushroom stems generate as part of huge mushrooms in dark forest biomes and mushroom fields.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'vine': {\r\n      'type': 'natural',\r\n      'description': 'Vines generate naturally on trees and walls in jungle biomes, swamps, and lush caves.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'glow_lichen': {\r\n      'type': 'natural',\r\n      'description': 'Glow lichen generates naturally in caves and can spread to other blocks using bone meal.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'mycelium': {\r\n      'type': 'natural',\r\n      'description': 'Mycelium generates naturally in mushroom field biomes and spreads to dirt blocks.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'lily_pad': {\r\n      'type': 'natural',\r\n      'description': 'Lily pads generate naturally on the surface of water in swamps.',\r\n      'spawn_range': 'Water'\r\n    },\r\n    'cracked_nether_bricks': {\r\n      'type': 'crafted',\r\n      'description': 'Cracked nether bricks are obtained by smelting nether bricks.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'sculk': {\r\n      'type': 'natural',\r\n      'description': 'Sculk generates naturally in the deep dark biome and spreads using a sculk catalyst.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'sculk_vein': {\r\n      'type': 'natural',\r\n      'description': 'Sculk veins generate naturally in the deep dark biome and spread using a sculk catalyst.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'sculk_catalyst': {\r\n      'type': 'natural',\r\n      'description': 'Sculk catalysts generate naturally in the deep dark biome and spread sculk blocks when mobs die nearby.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'sculk_shrieker': {\r\n      'type': 'natural',\r\n      'description': 'Sculk shriekers generate naturally in the deep dark biome and emit a loud shriek when activated.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'end_portal_frame': {\r\n      'type': 'natural',\r\n      'description': 'End portal frames generate naturally in strongholds, forming the structure of end portals.',\r\n      'spawn_range': 'Underground'\r\n    },\r\n    'dragon_egg': {\r\n      'type': 'dropped',\r\n      'description': 'The dragon egg is dropped when the Ender Dragon is defeated for the first time.',\r\n      'spawn_range': 'End'\r\n    },\r\n    'command_block': {\r\n      'type': 'crafted',\r\n      'description': 'Command blocks are powerful blocks used in commands and redstone, obtainable only via commands.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'chipped_anvil': {\r\n      'type': 'crafted',\r\n      'description': 'Chipped anvils are damaged versions of anvils and are used for repairing and enchanting.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'damaged_anvil': {\r\n      'type': 'crafted',\r\n      'description': 'Damaged anvils are further damaged versions of anvils and are used for repairing and enchanting.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'barrier': {\r\n      'type': 'crafted',\r\n      'description': 'Barriers are invisible blocks used in map-making and obtainable only via commands.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light': {\r\n      'type': 'crafted',\r\n      'description': 'Light blocks are invisible blocks that emit light, obtainable only via commands.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'dirt_path': {\r\n      'type': 'crafted',\r\n      'description': 'Dirt paths are created by using a shovel on grass blocks and are commonly found in villages.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'sunflower': {\r\n      'type': 'natural',\r\n      'description': 'Sunflowers generate naturally in sunflower plains biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'lilac': {\r\n      'type': 'natural',\r\n      'description': 'Lilacs generate naturally in forest biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'rose_bush': {\r\n      'type': 'natural',\r\n      'description': 'Rose bushes generate naturally in forest biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'peony': {\r\n      'type': 'natural',\r\n      'description': 'Peonies generate naturally in forest biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'tall_grass': {\r\n      'type': 'natural',\r\n      'description': 'Tall grass generates naturally in various biomes and can be grown using bone meal.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'large_fern': {\r\n      'type': 'natural',\r\n      'description': 'Large ferns generate naturally in taiga biomes.',\r\n      'spawn_range': 'Surface'\r\n    },\r\n    'repeating_command_block': {\r\n      'type': 'crafted',\r\n      'description': 'Repeating command blocks execute commands every tick and are obtainable only via commands.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'chain_command_block': {\r\n      'type': 'crafted',\r\n      'description': 'Chain command blocks execute commands when triggered and are obtainable only via commands.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'warped_wart_block': {\r\n      'type': 'natural',\r\n      'description': 'Warped wart blocks generate naturally in warped forests in the Nether.',\r\n      'spawn_range': 'Nether'\r\n    },\r\n    'structure_void': {\r\n      'type': 'crafted',\r\n      'description': 'Structure voids are used in structure blocks to exclude certain blocks from being saved and are obtainable only via commands.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'white_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'White shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'orange_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Orange shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'magenta_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Magenta shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_blue_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Light blue shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'yellow_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Yellow shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'lime_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Lime shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'pink_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Pink shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'gray_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Gray shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_gray_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Light gray shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'cyan_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Cyan shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'purple_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Purple shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'blue_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Blue shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'brown_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Brown shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'green_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Green shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'red_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Red shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'black_shulker_box': {\r\n      'type': 'crafted',\r\n      'description': 'Black shulker boxes are crafted from shulker shells and dye, and they function as portable storage.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'white_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'White glazed terracotta is obtained by smelting white terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'orange_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Orange glazed terracotta is obtained by smelting orange terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'magenta_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Magenta glazed terracotta is obtained by smelting magenta terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_blue_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Light blue glazed terracotta is obtained by smelting light blue terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'yellow_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Yellow glazed terracotta is obtained by smelting yellow terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'lime_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Lime glazed terracotta is obtained by smelting lime terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'pink_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Pink glazed terracotta is obtained by smelting pink terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'gray_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Gray glazed terracotta is obtained by smelting gray terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_gray_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Light gray glazed terracotta is obtained by smelting light gray terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'cyan_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Cyan glazed terracotta is obtained by smelting cyan terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'purple_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Purple glazed terracotta is obtained by smelting purple terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'blue_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Blue glazed terracotta is obtained by smelting blue terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'brown_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Brown glazed terracotta is obtained by smelting brown terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'green_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Green glazed terracotta is obtained by smelting green terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'red_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Red glazed terracotta is obtained by smelting red terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'black_glazed_terracotta': {\r\n      'type': 'crafted',\r\n      'description': 'Black glazed terracotta is obtained by smelting black terracotta and features decorative patterns.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'white_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'White concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'orange_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Orange concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'magenta_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Magenta concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_blue_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Light blue concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'yellow_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Yellow concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'lime_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Lime concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'pink_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Pink concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'gray_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Gray concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_gray_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Light gray concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'cyan_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Cyan concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'purple_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Purple concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'blue_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Blue concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'brown_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Brown concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'green_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Green concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'red_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Red concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'black_concrete': {\r\n      'type': 'crafted',\r\n      'description': 'Black concrete is crafted from concrete powder and hardens when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'white_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'White concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'orange_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Orange concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'magenta_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Magenta concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_blue_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Light blue concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'yellow_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Yellow concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'lime_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Lime concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'pink_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Pink concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'gray_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Gray concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'light_gray_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Light gray concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'cyan_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Cyan concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'purple_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Purple concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'blue_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Blue concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'brown_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Brown concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'green_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Green concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'red_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Red concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'black_concrete_powder': {\r\n      'type': 'crafted',\r\n      'description': 'Black concrete powder is crafted from sand, gravel, and dye, and hardens into concrete when in contact with water.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'cyan_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Cyan candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'pink_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Pink candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'purple_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Purple candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'blue_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Blue candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'brown_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Brown candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'green_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Green candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'red_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Red candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'black_candle': {\r\n      'type': 'crafted',\r\n      'description': 'Black candles are crafted from string and dye and can be placed on blocks to emit light.',\r\n      'spawn_range': 'N/A'\r\n    },\r\n    'turtle_egg': 'can be obtained via turtle breeding on beaches, where turtles lay eggs that can be collected.',\r\n    'sniffer_egg': 'can be found in buried treasure or ancient ruins, used to hatch sniffers.',\r\n    'dead_tube_coral_block': 'can be obtained by mining tube coral blocks with a pickaxe without Silk Touch or when exposed to air.',\r\n    'dead_brain_coral_block': 'can be obtained by mining brain coral blocks with a pickaxe without Silk Touch or when exposed to air.',\r\n    'dead_bubble_coral_block': 'can be obtained by mining bubble coral blocks with a pickaxe without Silk Touch or when exposed to air.',\r\n    'dead_fire_coral_block': 'can be obtained by mining fire coral blocks with a pickaxe without Silk Touch or when exposed to air.',\r\n    'dead_horn_coral_block': 'can be obtained by mining horn coral blocks with a pickaxe without Silk Touch or when exposed to air.',\r\n    'tube_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'brain_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'bubble_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'fire_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'horn_coral_block': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'tube_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'brain_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'bubble_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'fire_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'horn_coral': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'dead_brain_coral': 'can be obtained by mining brain coral without Silk Touch or when exposed to air.',\r\n    'dead_bubble_coral': 'can be obtained by mining bubble coral without Silk Touch or when exposed to air.',\r\n    'dead_fire_coral': 'can be obtained by mining fire coral without Silk Touch or when exposed to air.',\r\n    'dead_horn_coral': 'can be obtained by mining horn coral without Silk Touch or when exposed to air.',\r\n    'dead_tube_coral': 'can be obtained by mining tube coral without Silk Touch or when exposed to air.',\r\n    'tube_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'brain_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'bubble_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'fire_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'horn_coral_fan': 'can be obtained by mining with a pickaxe enchanted with Silk Touch, found in warm ocean biomes.',\r\n    'dead_tube_coral_fan': 'can be obtained by mining tube coral fans without Silk Touch or when exposed to air.',\r\n    'dead_brain_coral_fan': 'can be obtained by mining brain coral fans without Silk Touch or when exposed to air.',\r\n    'dead_bubble_coral_fan': 'can be obtained by mining bubble coral fans without Silk Touch or when exposed to air.',\r\n    'dead_fire_coral_fan': 'can be obtained by mining fire coral fans without Silk Touch or when exposed to air.',\r\n    'dead_horn_coral_fan': 'can be obtained by mining horn coral fans without Silk Touch or when exposed to air.',\r\n    'sculk_sensor': 'can be obtained via Silk Touch enchantment on a pickaxe or found in ancient cities in the deep dark biome.',\r\n    'copper_door': 'can be crafted using copper ingots.',\r\n    'exposed_copper_door': 'can be obtained by allowing copper doors to oxidize or can be crafted directly.',\r\n    'weathered_copper_door': 'can be obtained by allowing exposed copper doors to further oxidize or can be crafted directly.',\r\n    'oxidized_copper_door': 'can be obtained by allowing weathered copper doors to fully oxidize or can be crafted directly.',\r\n    'waxed_copper_door': 'can be crafted using copper ingots and honeycomb.',\r\n    'waxed_exposed_copper_door': 'can be crafted using exposed copper doors and honeycomb.',\r\n    'waxed_weathered_copper_door': 'can be crafted using weathered copper doors and honeycomb.',\r\n    'waxed_oxidized_copper_door': 'can be crafted using oxidized copper doors and honeycomb.',\r\n    'copper_trapdoor': 'can be crafted using copper ingots.',\r\n    'exposed_copper_trapdoor': 'can be obtained by allowing copper trapdoors to oxidize or can be crafted directly.',\r\n    'weathered_copper_trapdoor': 'can be obtained by allowing exposed copper trapdoors to further oxidize or can be crafted directly.',\r\n    'oxidized_copper_trapdoor': 'can be obtained by allowing weathered copper trapdoors to fully oxidize or can be crafted directly.',\r\n    'waxed_copper_trapdoor': 'can be crafted using copper ingots and honeycomb.',\r\n    'waxed_exposed_copper_trapdoor': 'can be crafted using exposed copper trapdoors and honeycomb.',\r\n    'waxed_weathered_copper_trapdoor': 'can be crafted using weathered copper trapdoors and honeycomb.',\r\n    'waxed_oxidized_copper_trapdoor': 'can be crafted using oxidized copper trapdoors and honeycomb.',\r\n    'saddle': 'can be obtained from fishing, dungeon chests, or trading with leatherworkers.',\r\n    'elytra': 'can be found in end ships within end cities.',\r\n    'structure_block': 'can be obtained using commands or in creative mode, used to save and load structures.',\r\n    'jigsaw': 'can be obtained using commands or in creative mode, used to generate structures.',\r\n    'scute': 'can be obtained when baby turtles grow into adults.',\r\n    'apple': 'can be obtained by breaking oak and dark oak leaves or found in chests.',\r\n    'charcoal': 'can be obtained by smelting logs or wood in a furnace.',\r\n    'quartz': 'can be obtained by mining nether quartz ore in the Nether.',\r\n    'amethyst_shard': 'can be obtained by mining amethyst clusters found in geodes with a pickaxe.',\r\n    'netherite_scrap': 'can be obtained by smelting ancient debris found in the Nether.',\r\n    'netherite_sword': 'can be crafted using a diamond sword and netherite ingot.',\r\n    'netherite_shovel': 'can be crafted using a diamond shovel and netherite ingot.',\r\n    'netherite_pickaxe': 'can be crafted using a diamond pickaxe and netherite ingot.',\r\n    'netherite_axe': 'can be crafted using a diamond axe and netherite ingot.',\r\n    'netherite_hoe': 'can be crafted using a diamond hoe and netherite ingot.',\r\n    'string': 'can be obtained from killing spiders or breaking cobwebs.',\r\n    'feather': 'can be obtained from killing chickens.',\r\n    'gunpowder': 'can be obtained from killing creepers, ghasts, and witches.',\r\n    'wheat_seeds': 'can be obtained by breaking tall grass or harvesting wheat crops.',\r\n    'chainmail_helmet': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\r\n    'chainmail_chestplate': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\r\n    'chainmail_leggings': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\r\n    'chainmail_boots': 'can be obtained from chest loot, trading with villagers, or killing mobs wearing it.',\r\n    'netherite_helmet': 'can be crafted using a diamond helmet and netherite ingot.',\r\n    'netherite_chestplate': 'can be crafted using a diamond chestplate and netherite ingot.',\r\n    'netherite_leggings': 'can be crafted using diamond leggings and netherite ingot.',\r\n    'netherite_boots': 'can be crafted using diamond boots and netherite ingot.',\r\n    'flint': 'can be obtained by breaking gravel blocks.',\r\n    'porkchop': 'can be obtained by killing pigs.',\r\n    'cooked_porkchop': 'can be obtained by cooking porkchop in a furnace, smoker, or campfire.',\r\n    'enchanted_golden_apple': 'can be found in dungeon, bastion remnant, and mineshaft chests.',\r\n    'water_bucket': 'can be obtained by using a bucket on a water source block.',\r\n    'lava_bucket': 'can be obtained by using a bucket on a lava source block.',\r\n    'powder_snow_bucket': 'can be obtained by using a bucket on powder snow.',\r\n    'snowball': 'can be obtained by breaking snow blocks or using a shovel on snow.',\r\n    'milk_bucket': 'can be obtained by using a bucket on a cow or mooshroom.',\r\n    'pufferfish_bucket': 'can be obtained by using a bucket on a pufferfish in water.',\r\n    'salmon_bucket': 'can be obtained by using a bucket on a salmon in water.',\r\n    'cod_bucket': 'can be obtained by using a bucket on a cod in water.',\r\n    'tropical_fish_bucket': 'can be obtained by using a bucket on a tropical fish in water.',\r\n    'axolotl_bucket': 'can be obtained by using a bucket on an axolotl in water.',\r\n    'tadpole_bucket': 'can be obtained by using a bucket on a tadpole in water.',\r\n    'brick': 'can be obtained by smelting clay in a furnace.',\r\n    'clay_ball': 'can be obtained by breaking clay blocks or from chest loot.',\r\n    'egg': 'can be obtained from chickens periodically.',\r\n    'bundle': 'can be crafted using rabbit hide and string.',\r\n    'glowstone_dust': 'can be obtained by breaking glowstone blocks or killing witches.',\r\n    'cod': 'can be obtained by fishing or killing cod in water.',\r\n    'salmon': 'can be obtained by fishing or killing salmon in water.',\r\n    'tropical_fish': 'can be obtained by fishing or killing tropical fish in water.',\r\n    'pufferfish': 'can be obtained by fishing or killing pufferfish in water.',\r\n    'cooked_cod': 'can be obtained by cooking cod in a furnace, smoker, or campfire.',\r\n    'cooked_salmon': 'can be obtained by cooking salmon in a furnace, smoker, or campfire.',\r\n    'ink_sac': 'can be obtained by killing squid or as loot from wandering traders.',\r\n    'glow_ink_sac': 'can be obtained by killing glow squid.',\r\n    'cocoa_beans': 'can be obtained from cocoa pods found on jungle trees.',\r\n    'green_dye': 'can be obtained by smelting cactus in a furnace.',\r\n    'bone': 'can be obtained by killing skeletons or from chest loot.',\r\n    'crafter': 'can be obtained via crafting using specific materials (details vary by mod or version).',\r\n    'filled_map': 'can be obtained by using an empty map item.',\r\n    'melon_slice': 'can be obtained by breaking melon blocks.',\r\n    'beef': 'can be obtained by killing cows.',\r\n    'cooked_beef': 'can be obtained by cooking beef in a furnace, smoker, or campfire.',\r\n    'chicken': 'can be obtained by killing chickens.',\r\n    'cooked_chicken': 'can be obtained by cooking chicken in a furnace, smoker, or campfire.',\r\n    'rotten_flesh': 'can be obtained by killing zombies or drowned.',\r\n    'ender_pearl': 'can be obtained by killing endermen.',\r\n    'blaze_rod': 'can be obtained by killing blazes in the Nether.',\r\n    'ghast_tear': 'can be obtained by killing ghasts in the Nether.',\r\n    'nether_wart': 'can be found in Nether fortresses and bastion remnants.',\r\n    'potion': 'can be brewed using a brewing stand with various ingredients.',\r\n    'spider_eye': 'can be obtained by killing spiders or witches.',\r\n    'experience_bottle': 'can be obtained from trading with villagers or found in chest loot.',\r\n    'written_book': 'can be crafted using a book and quill after writing in it.',\r\n    'carrot': 'can be obtained by harvesting carrot crops or found in village farms.',\r\n    'potato': 'can be obtained by harvesting potato crops or found in village farms.',\r\n    'baked_potato': 'can be obtained by cooking potatoes in a furnace, smoker, or campfire.',\r\n    'poisonous_potato': 'can be obtained by harvesting potato crops (rare chance).',\r\n    'skeleton_skull': 'can be obtained by killing skeletons with a charged creeper explosion.',\r\n    'wither_skeleton_skull': 'can be obtained by killing wither skeletons (rare drop).',\r\n    'player_head': 'can be obtained via commands or by killing players in certain conditions (e.g., with a charged creeper).',\r\n    'zombie_head': 'can be obtained by killing zombies with a charged creeper explosion.',\r\n    'creeper_head': 'can be obtained by killing creepers with a charged creeper explosion.',\r\n    'dragon_head': 'can be found at the end of end ships in end cities.',\r\n    'piglin_head': 'can be obtained by killing piglins with a charged creeper explosion.',\r\n    'nether_star': 'can be obtained by defeating the Wither boss.',\r\n    'firework_star': 'can be crafted using gunpowder and dye.',\r\n    'nether_brick': 'can be obtained by smelting netherrack in a furnace or found in Nether fortresses.',\r\n    'prismarine_shard': 'can be obtained by killing guardians and elder guardians.',\r\n    'prismarine_crystals': 'can be obtained by killing guardians and elder guardians or breaking sea lanterns.',\r\n    'rabbit': 'can be obtained by killing rabbits.',\r\n    'cooked_rabbit': 'can be obtained by cooking rabbit in a furnace, smoker, or campfire.',\r\n    'rabbit_foot': 'can be obtained by killing rabbits (rare drop).',\r\n    'rabbit_hide': 'can be obtained by killing rabbits.',\r\n    'iron_horse_armor': 'can be found in dungeon, temple, and stronghold chests.',\r\n    'golden_horse_armor': 'can be found in dungeon, temple, and stronghold chests.',\r\n    'diamond_horse_armor': 'can be found in dungeon, temple, and stronghold chests.',\r\n    'name_tag': 'can be obtained by fishing, dungeon chests, or trading with librarians.',\r\n    'command_block_minecart': 'can be obtained using commands in creative mode.',\r\n    'mutton': 'can be obtained by killing sheep.',\r\n    'cooked_mutton': 'can be obtained by cooking mutton in a furnace, smoker, or campfire.',\r\n    'chorus_fruit': 'can be obtained by breaking chorus plants found in the End.',\r\n    'popped_chorus_fruit': 'can be obtained by smelting chorus fruit in a furnace.',\r\n    'torchflower_seeds': 'can be obtained from torchflower plants, used for breeding and decoration.',\r\n    'pitcher_pod': 'can be obtained from pitcher plants, used for breeding and decoration.',\r\n    'beetroot': 'can be obtained by harvesting beetroot crops or found in village farms.',\r\n    'beetroot_seeds': 'can be obtained by harvesting beetroot crops or from chests.',\r\n    'dragon_breath': 'can be obtained by using an empty bottle on the ender dragon\\'s breath attack.',\r\n    'splash_potion': 'can be brewed using a brewing stand and gunpowder with various potions.',\r\n    'tipped_arrow': 'can be crafted using arrows and lingering potions.',\r\n    'lingering_potion': 'can be brewed using a brewing stand and dragon\\'s breath with various potions.',\r\n    'totem_of_undying': 'can be obtained by killing evokers in woodland mansions and during raids.',\r\n    'shulker_shell': 'can be obtained by killing shulkers in end cities.',\r\n    'knowledge_book': 'can be obtained using commands or given in custom advancements.',\r\n    'debug_stick': 'can be obtained using commands in creative mode.',\r\n    'disc_fragment_5': 'can be found in ancient city chests, used to craft music disc 5.',\r\n    'trident': 'can be obtained by killing drowned (rare drop).',\r\n    'phantom_membrane': 'can be obtained by killing phantoms.',\r\n    'nautilus_shell': 'can be obtained from fishing, drowned, or wandering traders.',\r\n    'heart_of_the_sea': 'can be found in buried treasure chests.',\r\n    'suspicious_stew': 'can be crafted using mushrooms and various flowers or found in chests.',\r\n    'globe_banner_pattern': 'can be obtained from trading with cartographer villagers.',\r\n    'piglin_banner_pattern': 'can be obtained from bastion remnant chests.',\r\n    'goat_horn': 'can be obtained when a goat rams a solid block.',\r\n    'bell': 'can be obtained from village structures or crafted using iron ingots and wood.',\r\n    'sweet_berries': 'can be obtained from sweet berry bushes found in taiga biomes.',\r\n    'glow_berries': 'can be found in lush cave biomes or by trading with wandering traders.',\r\n    'shroomlight': 'can be obtained by breaking shroomlights found in Nether forests.',\r\n    'honeycomb': 'can be obtained by using shears on beehives or bee nests.',\r\n    'bee_nest': 'can be found in forest biomes with birch or oak trees, especially in flower forests.',\r\n    'crying_obsidian': 'can be found in ruined portals, bastion remnants, or bartered from piglins.',\r\n    'blackstone': 'can be found in basalt deltas, bastion remnants, or crafted from polished blackstone.',\r\n    'gilded_blackstone': 'can be found in bastion remnants.',\r\n    'cracked_polished_blackstone_bricks': 'can be obtained by smelting polished blackstone bricks.',\r\n    'small_amethyst_bud': 'can be found growing in amethyst geodes.',\r\n    'medium_amethyst_bud': 'can be found growing in amethyst geodes.',\r\n    'large_amethyst_bud': 'can be found growing in amethyst geodes.',\r\n    'amethyst_cluster': 'can be found growing in amethyst geodes.',\r\n    'pointed_dripstone': 'can be found in dripstone caves or created by placing a dripstone block under a water source block.',\r\n    'ochre_froglight': 'can be obtained by leading a frog to eat a magma cube, dropping this item.',\r\n    'verdant_froglight': 'can be obtained by leading a frog to eat a magma cube, dropping this item.',\r\n    'pearlescent_froglight': 'can be obtained by leading a frog to eat a magma cube, dropping this item.',\r\n    'frogspawn': 'Frogspawn is an item that can be found in the game Minecraft and is primarily used to breed frogs.',\r\n    'echo_shard': 'Echo Shard is an item in Minecraft Dungeons, primarily used as a currency for trading with Piglin vendors.',\r\n    'copper_grate': 'Copper Grate is a block in Minecraft that can be crafted from copper ingots, primarily used as a decorative block.',\r\n    'exposed_copper_grate': 'Exposed Copper Grate is a variant of Copper Grate in Minecraft that has weathered to the exposed state over time.',\r\n    'weathered_copper_grate': 'Weathered Copper Grate is a variant of Copper Grate in Minecraft that has weathered to the weathered state over time.',\r\n    'oxidized_copper_grate': 'Oxidized Copper Grate is a variant of Copper Grate in Minecraft that has weathered to the oxidized state over time.',\r\n    'waxed_copper_grate': 'Waxed Copper Grate is a variant of Copper Grate in Minecraft that has been waxed to prevent further weathering.',\r\n    'waxed_exposed_copper_grate': 'Waxed Exposed Copper Grate is a variant of Exposed Copper Grate in Minecraft that has been waxed to prevent further weathering.',\r\n    'waxed_weathered_copper_grate': 'Waxed Weathered Copper Grate is a variant of Weathered Copper Grate in Minecraft that has been waxed to prevent further weathering.',\r\n    'waxed_oxidized_copper_grate': 'Waxed Oxidized Copper Grate is a variant of Oxidized Copper Grate in Minecraft that has been waxed to prevent further weathering.',\r\n    'copper_bulb': 'Copper Bulb is a block in Minecraft that can be crafted from copper ingots, primarily used as a decorative block.',\r\n    'exposed_copper_bulb': 'Exposed Copper Bulb is a variant of Copper Bulb in Minecraft that has weathered to the exposed state over time.',\r\n    'weathered_copper_bulb': 'Weathered Copper Bulb is a variant of Copper Bulb in Minecraft that has weathered to the weathered state over time.',\r\n    'oxidized_copper_bulb': 'Oxidized Copper Bulb is a variant of Copper Bulb in Minecraft that has weathered to the oxidized state over time.',\r\n    'waxed_copper_bulb': 'Waxed Copper Bulb is a variant of Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\r\n    'waxed_exposed_copper_bulb': 'Waxed Exposed Copper Bulb is a variant of Exposed Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\r\n    'waxed_weathered_copper_bulb': 'Waxed Weathered Copper Bulb is a variant of Weathered Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\r\n    'waxed_oxidized_copper_bulb': 'Waxed Oxidized Copper Bulb is a variant of Oxidized Copper Bulb in Minecraft that has been waxed to prevent further weathering.',\r\n    'trial_spawner': 'Trial Spawner is an item in Minecraft Dungeons, used in the Ancient Hunt game mode to summon trials for unique rewards.',\r\n    'trial_key': 'Trial Key is an item in Minecraft Dungeons, obtained from defeating Ancient mobs in the Ancient Hunt game mode, used to unlock trials.'\r\n  }\r\n}\r\n\r\nconst lowerCaseFirstLetter = (string) => string.charAt(0).toLowerCase() + string.slice(1)\r\nfor (const [name, data] of Object.entries(moreGeneratedBlocks.natural_blocks)) {\r\n  let description = '' as string | ((name: string) => string)\r\n  if (typeof data === 'object') {\r\n    const obtainedFrom = 'obtained_from' in data ? data.obtained_from : 'description' in data ? data.description : ''\r\n    description = obtainedFrom + ('rarity' in data ? ` Rarity: ${data.rarity}` : '') + ('spawn_range' in data ? ` Spawn range: ${data.spawn_range}` : '')\r\n  } else {\r\n    description = (name) => `${lowerCaseFirstLetter(name)}: ${data}`\r\n  }\r\n  descriptionGenerators.set([name], description)\r\n}\r\n\r\nexport const getItemDescription = (item: import('prismarine-item').Item) => {\r\n  const { name } = item\r\n  let result: string | ((name: string) => string) = ''\r\n  for (const [names, description] of descriptionGenerators) {\r\n    if (Array.isArray(names) && names.includes(name)) {\r\n      result = description\r\n    }\r\n    if (typeof names === 'string' && names === name) {\r\n      result = description\r\n    }\r\n    if (names instanceof RegExp && names.test(name)) {\r\n      result = description\r\n    }\r\n  }\r\n  return typeof result === 'function' ? result(item.displayName) : result\r\n}\r\n","import fs from 'fs'\r\nimport path from 'path'\r\nimport * as nbt from 'prismarine-nbt'\r\nimport { proxy } from 'valtio'\r\nimport { gzip } from 'node-gzip'\r\nimport { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport { options } from './optionsStorage'\r\nimport { nameToMcOfflineUUID, disconnect } from './flyingSquidUtils'\r\nimport { existsViaStats, forceCachedDataPaths, forceRedirectPaths, mkdirRecursive } from './browserfs'\r\nimport { isMajorVersionGreater } from './utils'\r\n\r\nimport { activeModalStacks, insertActiveModalStack, miscUiState } from './globalState'\r\nimport supportedVersions from './supportedVersions.mjs'\r\nimport { ConnectOptions } from './connect'\r\nimport { appQueryParams } from './appParams'\r\n\r\n// todo include name of opened handle (zip)!\r\n// additional fs metadata\r\nexport const fsState = proxy({\r\n  isReadonly: false,\r\n  syncFs: false,\r\n  inMemorySave: false,\r\n  saveLoaded: false,\r\n  openReadOperations: 0,\r\n  openWriteOperations: 0,\r\n  remoteBackend: false,\r\n  inMemorySavePath: ''\r\n})\r\n\r\nconst PROPOSE_BACKUP = true\r\n\r\nexport function longArrayToNumber (longArray: number[]) {\r\n  const [high, low] = longArray\r\n  return (high << 32) + low\r\n}\r\n\r\nexport const readLevelDat = async (path) => {\r\n  let levelDatContent\r\n  try {\r\n    // todo-low cache reading\r\n    levelDatContent = await fs.promises.readFile(`${path}/level.dat`)\r\n  } catch (err) {\r\n    if (err.code === 'ENOENT') {\r\n      return undefined\r\n    }\r\n    throw err\r\n  }\r\n  const { parsed } = await nbt.parse(Buffer.from(levelDatContent))\r\n  const levelDat: import('./mcTypes').LevelDat = nbt.simplify(parsed).Data\r\n  return { levelDat, dataRaw: parsed.value.Data!.value as Record<string, any> }\r\n}\r\n\r\nexport const loadSave = async (root = '/world', connectOptions?: Partial<ConnectOptions>) => {\r\n  // todo test\r\n  if (miscUiState.gameLoaded) {\r\n    await disconnect()\r\n    await new Promise(resolve => {\r\n      setTimeout(resolve)\r\n    })\r\n  }\r\n\r\n  const disablePrompts = options.disableLoadPrompts\r\n\r\n  // todo do it in singleplayer as well\r\n  // eslint-disable-next-line guard-for-in\r\n  for (const key in forceCachedDataPaths) {\r\n\r\n    delete forceCachedDataPaths[key]\r\n  }\r\n  // eslint-disable-next-line guard-for-in\r\n  for (const key in forceRedirectPaths) {\r\n\r\n    delete forceRedirectPaths[key]\r\n  }\r\n  // todo check jsHeapSizeLimit\r\n\r\n  const warnings: string[] = []\r\n  const { levelDat, dataRaw } = (await readLevelDat(root))!\r\n  if (levelDat === undefined) {\r\n    if (fsState.isReadonly) {\r\n      throw new Error('level.dat not found, ensure you are loading world folder')\r\n    } else {\r\n      warnings.push('level.dat not found, world in current folder will be created')\r\n    }\r\n  }\r\n\r\n  let version: string | undefined | null\r\n  if (levelDat) {\r\n    version = appQueryParams.mapVersion ?? levelDat.Version?.Name\r\n    if (!version) {\r\n      // const newVersion = disablePrompts ? '1.8.8' : prompt(`In 1.8 and before world save doesn't contain version info, please enter version you want to use to load the world.\\nSupported versions ${supportedVersions.join(', ')}`, '1.8.8')\r\n      // if (!newVersion) return\r\n      // todo detect world load issues\r\n      const newVersion = '1.8.8'\r\n      version = newVersion\r\n    }\r\n    const lastSupportedVersion = supportedVersions.at(-1)!\r\n    const firstSupportedVersion = supportedVersions[0]\r\n    const lowerBound = isMajorVersionGreater(firstSupportedVersion, version)\r\n    const upperBound = versionToNumber(version) > versionToNumber(lastSupportedVersion)\r\n    if (lowerBound || upperBound) {\r\n      version = prompt(`Version ${version} is not supported, supported versions are ${supportedVersions.join(', ')}, what try to use instead?`, lowerBound ? firstSupportedVersion : lastSupportedVersion)\r\n      if (!version) return\r\n    }\r\n\r\n    const playerUuid = nameToMcOfflineUUID(options.localUsername)\r\n    const playerDatPath = `${root}/playerdata/${playerUuid}.dat`\r\n    const playerDataOverride = dataRaw.Player\r\n    if (playerDataOverride) {\r\n      const playerDat = await gzip(nbt.writeUncompressed({ name: '', ...playerDataOverride }))\r\n      if (fsState.isReadonly) {\r\n        forceCachedDataPaths[playerDatPath] = playerDat\r\n      } else {\r\n        await mkdirRecursive(path.dirname(playerDatPath))\r\n        await fs.promises.writeFile(playerDatPath, playerDat)\r\n      }\r\n    }\r\n  }\r\n\r\n  if (warnings.length && !disablePrompts) {\r\n    const doContinue = confirm(`Continue with following warnings?\\n${warnings.join('\\n')}`)\r\n    if (!doContinue) return\r\n  }\r\n\r\n  if (PROPOSE_BACKUP) {\r\n    // const doBackup = options.alwaysBackupWorldBeforeLoading ?? confirm('Do you want to backup your world files before loading it?')\r\n    // // const doBackup = true\r\n    // if (doBackup) {\r\n    //   // todo do it in flying squid instead\r\n    //   await fs.promises.copyFile('/world/level.dat', `/world/level.dat_old`)\r\n    //   try {\r\n    //     await fs.promises.mkdir('/backups/region.old', { recursive: true })\r\n    //   } catch (err) { }\r\n    //   const files = await fs.promises.readdir('/world/region')\r\n    //   for (const file of files) {\r\n    //     await fs.promises.copyFile(`/world/region/${file}`, `/world/region.old/${file}`)\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  if (!fsState.isReadonly && !fsState.inMemorySave && !disablePrompts) {\r\n    // todo allow also to ctrl+s\r\n    alert('Note: the world is saved on interval, /save or disconnect! Ensure you have backup and be careful of new chunks writes!')\r\n  }\r\n\r\n  // improve compatibility with community saves\r\n  const rootRemapFiles = ['Warp files']\r\n  for (const rootRemapFile of rootRemapFiles) {\r\n    // eslint-disable-next-line no-await-in-loop\r\n    if (await existsViaStats(path.join(root, '..', rootRemapFile))) {\r\n      forceRedirectPaths[path.join(root, rootRemapFile)] = path.join(root, '..', rootRemapFile)\r\n    }\r\n  }\r\n\r\n  // todo reimplement\r\n  if (activeModalStacks['main-menu']) {\r\n    insertActiveModalStack('main-menu')\r\n  }\r\n  // todo use general logic\r\n  // if (activeModalStack.at(-1)?.reactType === 'app-status' && !appStatusState.isError) {\r\n  //   alert('Wait for operations to finish before loading a new world')\r\n  //   return\r\n  // }\r\n  // for (const _i of activeModalStack) {\r\n  //   hideModal(undefined, undefined, { force: true })\r\n  // }\r\n\r\n  // todo should not be set here\r\n  fsState.saveLoaded = true\r\n  fsState.inMemorySavePath = root\r\n  window.dispatchEvent(new CustomEvent('singleplayer', {\r\n    // todo check gamemode level.dat data etc\r\n    detail: {\r\n      version,\r\n      ...root === '/world' ? {} : {\r\n        'worldFolder': root\r\n      },\r\n      connectOptions\r\n    },\r\n  }))\r\n}\r\n","export const getProxyDetails = async (proxyBaseUrl: string) => {\r\n  if (!proxyBaseUrl.startsWith('http')) proxyBaseUrl = `${isPageSecure() ? 'https' : 'http'}://${proxyBaseUrl}`\r\n  const url = `${proxyBaseUrl}/api/vm/net/connect`\r\n  let result: Response\r\n  try {\r\n    result = await fetch(url)\r\n  } catch (err) {\r\n    throw new Error(`Selected proxy server ${proxyBaseUrl} most likely is down`)\r\n  }\r\n  return result\r\n}\r\n\r\nexport default async ({ tokenCaches, proxyBaseUrl, setProgressText = (text) => { }, setCacheResult, connectingServer }) => {\r\n  let onMsaCodeCallback\r\n  let connectingVersion = ''\r\n  // const authEndpoint = 'http://localhost:3000/'\r\n  // const sessionEndpoint = 'http://localhost:3000/session'\r\n  let authEndpoint: URL | undefined\r\n  let sessionEndpoint: URL | undefined\r\n  const result = await getProxyDetails(proxyBaseUrl)\r\n\r\n  try {\r\n    const json = await result.json()\r\n    authEndpoint = urlWithBase(json.capabilities.authEndpoint, proxyBaseUrl)\r\n    sessionEndpoint = urlWithBase(json.capabilities.sessionEndpoint, proxyBaseUrl)\r\n    if (!authEndpoint) throw new Error('No auth endpoint')\r\n  } catch (err) {\r\n    console.error(err)\r\n    throw new Error(`Selected proxy server ${proxyBaseUrl} does not support Microsoft authentication`)\r\n  }\r\n  const authFlow = {\r\n    async getMinecraftJavaToken () {\r\n      setProgressText('Authenticating with Microsoft account')\r\n      if (!window.crypto && !isPageSecure()) throw new Error('Crypto API is available only in secure contexts. Be sure to use https!')\r\n      let result = null\r\n      await fetch(authEndpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          ...tokenCaches,\r\n          // important to set this param and not fake it as auth server might reject the request otherwise\r\n          connectingServer,\r\n          connectingServerVersion: connectingVersion\r\n        }),\r\n      })\r\n        .catch(e => {\r\n          throw new Error(`Failed to connect to auth server (network error): ${e.message}`)\r\n        })\r\n        .then(async response => {\r\n          if (!response.ok) {\r\n            throw new Error(`Auth server error (${response.status}): ${await response.text()}`)\r\n          }\r\n\r\n          const reader = response.body!.getReader()\r\n          const decoder = new TextDecoder('utf8')\r\n\r\n          const processText = ({ done, value = undefined as Uint8Array | undefined }) => {\r\n            if (done) {\r\n              return\r\n            }\r\n\r\n            const processChunk = (chunkStr) => {\r\n              let json: any\r\n              try {\r\n                json = JSON.parse(chunkStr)\r\n              } catch (err) {}\r\n              if (!json) return\r\n              if (json.user_code) {\r\n                onMsaCodeCallback(json)\r\n                // this.codeCallback(json)\r\n              }\r\n              if (json.error) throw new Error(`Auth server error: ${json.error}`)\r\n              if (json.token) result = json\r\n              if (json.newCache) setCacheResult(json.newCache)\r\n            }\r\n\r\n            const strings = decoder.decode(value)\r\n\r\n            for (const chunk of strings.split('\\n\\n')) {\r\n              processChunk(chunk)\r\n            }\r\n\r\n            return reader.read().then(processText)\r\n          }\r\n          return reader.read().then(processText)\r\n        })\r\n      const restoredData = await restoreData(result)\r\n      if (restoredData?.certificates?.profileKeys?.privatePEM) {\r\n        restoredData.certificates.profileKeys.private = restoredData.certificates.profileKeys.privatePEM\r\n      }\r\n      return restoredData\r\n    }\r\n  }\r\n  return {\r\n    authFlow,\r\n    sessionEndpoint,\r\n    setOnMsaCodeCallback (callback) {\r\n      onMsaCodeCallback = callback\r\n    },\r\n    setConnectingVersion (version) {\r\n      connectingVersion = version\r\n    }\r\n  }\r\n}\r\n\r\nfunction isPageSecure (url = window.location.href) {\r\n  return !url.startsWith('http:')\r\n}\r\n\r\n// restore dates from strings\r\nconst restoreData = async (json) => {\r\n  const promises = [] as Array<Promise<void>>\r\n  if (typeof json === 'object' && json) {\r\n    for (const [key, value] of Object.entries(json)) {\r\n      if (typeof value === 'string') {\r\n        promises.push(tryRestorePublicKey(value, key, json))\r\n        if (value.endsWith('Z')) {\r\n          const date = new Date(value)\r\n          if (!isNaN(date.getTime())) {\r\n            json[key] = date\r\n          }\r\n        }\r\n      }\r\n      if (typeof value === 'object') {\r\n        // eslint-disable-next-line no-await-in-loop\r\n        await restoreData(value)\r\n      }\r\n    }\r\n  }\r\n\r\n  await Promise.all(promises)\r\n\r\n  return json\r\n}\r\n\r\nconst tryRestorePublicKey = async (value: string, name: string, parent: { [x: string]: any }) => {\r\n  value = value.trim()\r\n  if (!name.endsWith('PEM') || !value.startsWith('-----BEGIN RSA PUBLIC KEY-----') || !value.endsWith('-----END RSA PUBLIC KEY-----')) return\r\n  const der = pemToArrayBuffer(value)\r\n  const key = await window.crypto.subtle.importKey(\r\n    'spki', // Specify that the data is in SPKI format\r\n    der,\r\n    {\r\n      name: 'RSA-OAEP',\r\n      hash: { name: 'SHA-256' }\r\n    },\r\n    true,\r\n    ['encrypt'] // Specify key usages\r\n  )\r\n  const originalName = name.replace('PEM', '')\r\n  const exported = await window.crypto.subtle.exportKey('spki', key)\r\n  const exportedBuffer = new Uint8Array(exported)\r\n  parent[originalName] = {\r\n    export () {\r\n      return exportedBuffer\r\n    }\r\n  }\r\n}\r\n\r\nfunction pemToArrayBuffer (pem) {\r\n  // Fetch the part of the PEM string between header and footer\r\n  const pemHeader = '-----BEGIN RSA PUBLIC KEY-----'\r\n  const pemFooter = '-----END RSA PUBLIC KEY-----'\r\n  const pemContents = pem.slice(pemHeader.length, pem.length - pemFooter.length).trim()\r\n  const binaryDerString = atob(pemContents.replaceAll(/\\s/g, ''))\r\n  const binaryDer = new Uint8Array(binaryDerString.length)\r\n  for (let i = 0; i < binaryDerString.length; i++) {\r\n    binaryDer[i] = binaryDerString.codePointAt(i)!\r\n  }\r\n  return binaryDer.buffer\r\n}\r\n\r\nconst urlWithBase = (url: string, base: string) => {\r\n  const defaultBase = isPageSecure() ? 'https' : 'http'\r\n  if (!base.startsWith('http')) base = `${defaultBase}://${base}`\r\n  const urlObj = new URL(url, base)\r\n  base = base.replace(/^https?:\\/\\//, '')\r\n  urlObj.host = base.includes(':') ? base : `${base}:${isPageSecure(base) ? '443' : '80'}`\r\n  return urlObj\r\n}\r\n","import mojangson from 'mojangson'\r\nimport nbt from 'prismarine-nbt'\r\nimport { fromFormattedString } from '@xmcl/text-component'\r\nimport { getItemSelector, ItemSpecificContextProperties, PlayerStateRenderer } from 'renderer/viewer/lib/basePlayerState'\r\nimport { getItemDefinition } from 'mc-assets/dist/itemDefinitions'\r\nimport { MessageFormatPart } from '../chatUtils'\r\nimport { ResourcesManager, ResourcesManagerCommon, ResourcesManagerTransferred } from '../resourcesManager'\r\n\r\ntype RenderSlotComponent = {\r\n  type: string,\r\n  data: any\r\n  // example\r\n  // {\r\n  //   \"type\": \"item_model\",\r\n  //   \"data\": \"aa:ss\"\r\n  // }\r\n}\r\nexport type RenderItem = Pick<import('prismarine-item').Item, 'name' | 'displayName' | 'durabilityUsed' | 'maxDurability' | 'enchants' | 'nbt'> & {\r\n  components?: RenderSlotComponent[],\r\n  // componentMap?: Map<string, RenderSlotComponent>\r\n}\r\nexport type GeneralInputItem = Pick<import('prismarine-item').Item, 'name' | 'nbt'> & {\r\n  components?: RenderSlotComponent[],\r\n  displayName?: string\r\n  modelResolved?: boolean\r\n}\r\n\r\ntype JsonString = string\r\ntype PossibleItemProps = {\r\n  CustomModelData?: number\r\n  Damage?: number\r\n  display?: { Name?: JsonString } // {\"text\":\"Knife\",\"color\":\"white\",\"italic\":\"true\"}\r\n}\r\n\r\nexport const getItemMetadata = (item: GeneralInputItem, resourcesManager: ResourcesManagerCommon) => {\r\n  let customText = undefined as string | any | undefined\r\n  let customModel = undefined as string | undefined\r\n\r\n  let itemId = item.name\r\n  if (!itemId.includes(':')) {\r\n    itemId = `minecraft:${itemId}`\r\n  }\r\n  const customModelDataDefinitions = resourcesManager.currentResources?.customItemModelNames[itemId]\r\n\r\n  if (item.components) {\r\n    const componentMap = new Map<string, RenderSlotComponent>()\r\n    for (const component of item.components) {\r\n      componentMap.set(component.type, component)\r\n    }\r\n\r\n    const customTextComponent = componentMap.get('custom_name') || componentMap.get('item_name')\r\n    if (customTextComponent) {\r\n      customText = typeof customTextComponent.data === 'string' ? customTextComponent.data : nbt.simplify(customTextComponent.data)\r\n    }\r\n    const customModelComponent = componentMap.get('item_model')\r\n    if (customModelComponent) {\r\n      customModel = customModelComponent.data\r\n    }\r\n    if (customModelDataDefinitions) {\r\n      const customModelDataComponent: any = componentMap.get('custom_model_data')\r\n      if (customModelDataComponent?.data) {\r\n        let customModelData: number | undefined\r\n        if (typeof customModelDataComponent.data === 'number') {\r\n          customModelData = customModelDataComponent.data\r\n        } else if (typeof customModelDataComponent.data === 'object'\r\n          && 'floats' in customModelDataComponent.data\r\n          && Array.isArray(customModelDataComponent.data.floats)\r\n          && customModelDataComponent.data.floats.length > 0) {\r\n          customModelData = customModelDataComponent.data.floats[0]\r\n        }\r\n        if (customModelData && customModelDataDefinitions[customModelData]) {\r\n          customModel = customModelDataDefinitions[customModelData]\r\n        }\r\n      }\r\n    }\r\n    const loreComponent = componentMap.get('lore')\r\n    if (loreComponent) {\r\n      customText ??= item.displayName ?? item.name\r\n      // todo test\r\n      customText += `\\n${JSON.stringify(loreComponent.data)}`\r\n    }\r\n  }\r\n  if (item.nbt) {\r\n    const itemNbt: PossibleItemProps = nbt.simplify(item.nbt)\r\n    const customName = itemNbt.display?.Name\r\n    if (customName) {\r\n      customText = customName\r\n    }\r\n    if (customModelDataDefinitions && itemNbt.CustomModelData && customModelDataDefinitions[itemNbt.CustomModelData]) {\r\n      customModel = customModelDataDefinitions[itemNbt.CustomModelData]\r\n    }\r\n  }\r\n\r\n  return {\r\n    customText,\r\n    customModel\r\n  }\r\n}\r\n\r\n\r\nexport const getItemNameRaw = (item: Pick<import('prismarine-item').Item, 'nbt'> | null, resourcesManager: ResourcesManagerCommon) => {\r\n  if (!item) return ''\r\n  const { customText } = getItemMetadata(item as GeneralInputItem, resourcesManager)\r\n  if (!customText) return\r\n  try {\r\n    if (typeof customText === 'object') {\r\n      return customText\r\n    }\r\n    const parsed = customText.startsWith('{') && customText.endsWith('}') ? mojangson.simplify(mojangson.parse(customText)) : fromFormattedString(customText)\r\n    if (parsed.extra) {\r\n      return parsed as Record<string, any>\r\n    } else {\r\n      return parsed as MessageFormatPart\r\n    }\r\n  } catch (err) {\r\n    return {\r\n      text: JSON.stringify(customText)\r\n    }\r\n  }\r\n}\r\n\r\nexport const getItemModelName = (item: GeneralInputItem, specificProps: ItemSpecificContextProperties, resourcesManager: ResourcesManagerCommon, playerState: PlayerStateRenderer) => {\r\n  let itemModelName = item.name\r\n  const { customModel } = getItemMetadata(item, resourcesManager)\r\n  if (customModel) {\r\n    itemModelName = customModel\r\n  }\r\n\r\n  const itemSelector = getItemSelector(playerState, {\r\n    ...specificProps\r\n  })\r\n  const modelFromDef = getItemDefinition(appViewer.resourcesManager.itemsDefinitionsStore, {\r\n    name: itemModelName,\r\n    version: appViewer.resourcesManager.currentResources!.version,\r\n    properties: itemSelector\r\n  })?.model\r\n  const model = (modelFromDef === 'minecraft:special' ? undefined : modelFromDef) ?? itemModelName\r\n  return model\r\n}\r\n","import { HandItemBlock } from 'renderer/viewer/three/holdingBlock'\r\nimport { getInitialPlayerState, getPlayerStateUtils, PlayerStateReactive, PlayerStateRenderer, PlayerStateUtils } from 'renderer/viewer/lib/basePlayerState'\r\nimport { subscribe } from 'valtio'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { gameAdditionalState } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\n\r\n/**\r\n * can be used only in main thread. Mainly for more convenient reactive state updates.\r\n * In renderer/ directory, use PlayerStateControllerRenderer type or worldRenderer.playerState.\r\n */\r\nexport class PlayerStateControllerMain {\r\n  disableStateUpdates = false\r\n\r\n  private timeOffGround = 0\r\n  private lastUpdateTime = performance.now()\r\n\r\n  // Held item state\r\n  private isUsingItem = false\r\n  ready = false\r\n\r\n  reactive: PlayerStateReactive\r\n  utils: PlayerStateUtils\r\n\r\n  constructor () {\r\n    customEvents.on('mineflayerBotCreated', () => {\r\n      this.ready = false\r\n      bot.on('inject_allowed', () => {\r\n        if (this.ready) return\r\n        this.ready = true\r\n        this.botCreated()\r\n      })\r\n      bot.on('end', () => {\r\n        this.ready = false\r\n      })\r\n    })\r\n  }\r\n\r\n  private onBotCreatedOrGameJoined () {\r\n    this.reactive.username = bot.username ?? ''\r\n  }\r\n\r\n  private botCreated () {\r\n    console.log('bot created & plugins injected')\r\n    this.reactive = getInitialPlayerState()\r\n    this.reactive.perspective = options.defaultPerspective\r\n    this.utils = getPlayerStateUtils(this.reactive)\r\n    this.onBotCreatedOrGameJoined()\r\n\r\n    const handleDimensionData = (data) => {\r\n      let hasSkyLight = 1\r\n      try {\r\n        hasSkyLight = data.dimension.value.has_skylight.value\r\n      } catch {}\r\n      this.reactive.lightingDisabled = bot.game.dimension === 'the_nether' || bot.game.dimension === 'the_end' || !hasSkyLight\r\n    }\r\n\r\n    bot._client.on('login', (packet) => {\r\n      handleDimensionData(packet)\r\n    })\r\n    bot._client.on('respawn', (packet) => {\r\n      handleDimensionData(packet)\r\n    })\r\n\r\n    // Movement tracking\r\n    bot.on('move', () => {\r\n      this.updateMovementState()\r\n    })\r\n\r\n    // Item tracking\r\n    bot.on('heldItemChanged', () => {\r\n      return this.updateHeldItem(false)\r\n    })\r\n    bot.inventory.on('updateSlot', (index) => {\r\n      if (index === 45) this.updateHeldItem(true)\r\n    })\r\n    const updateSneakingOrFlying = () => {\r\n      this.updateMovementState()\r\n      this.reactive.sneaking = bot.controlState.sneak\r\n      this.reactive.flying = gameAdditionalState.isFlying\r\n      this.reactive.eyeHeight = bot.controlState.sneak && !gameAdditionalState.isFlying ? 1.27 : 1.62\r\n    }\r\n    bot.on('physicsTick', () => {\r\n      if (this.isUsingItem) this.reactive.itemUsageTicks++\r\n      updateSneakingOrFlying()\r\n    })\r\n    // todo move from gameAdditionalState to reactive directly\r\n    subscribeKey(gameAdditionalState, 'isSneaking', () => {\r\n      updateSneakingOrFlying()\r\n    })\r\n    subscribeKey(gameAdditionalState, 'isFlying', () => {\r\n      updateSneakingOrFlying()\r\n    })\r\n\r\n    // Initial held items setup\r\n    this.updateHeldItem(false)\r\n    this.updateHeldItem(true)\r\n\r\n    bot.on('game', () => {\r\n      this.reactive.gameMode = bot.game.gameMode\r\n    })\r\n    this.reactive.gameMode = bot.game?.gameMode\r\n\r\n    customEvents.on('gameLoaded', () => {\r\n      this.reactive.team = bot.teamMap[bot.username]\r\n    })\r\n\r\n    this.watchReactive()\r\n  }\r\n\r\n  // #region Movement and Physics State\r\n  private updateMovementState () {\r\n    if (!bot?.entity || this.disableStateUpdates) return\r\n\r\n    const { velocity } = bot.entity\r\n    const isOnGround = bot.entity.onGround\r\n    const VELOCITY_THRESHOLD = 0.01\r\n    const SPRINTING_VELOCITY = 0.15\r\n    const OFF_GROUND_THRESHOLD = 0 // ms before switching to SNEAKING when off ground\r\n\r\n    const now = performance.now()\r\n    const deltaTime = now - this.lastUpdateTime\r\n    this.lastUpdateTime = now\r\n\r\n    // this.lastVelocity = velocity\r\n\r\n    // Update time off ground\r\n    if (isOnGround) {\r\n      this.timeOffGround = 0\r\n    } else {\r\n      this.timeOffGround += deltaTime\r\n    }\r\n\r\n    if (gameAdditionalState.isSneaking || gameAdditionalState.isFlying || (this.timeOffGround > OFF_GROUND_THRESHOLD)) {\r\n      this.reactive.movementState = 'SNEAKING'\r\n    } else if (Math.abs(velocity.x) > VELOCITY_THRESHOLD || Math.abs(velocity.z) > VELOCITY_THRESHOLD) {\r\n      this.reactive.movementState = Math.abs(velocity.x) > SPRINTING_VELOCITY || Math.abs(velocity.z) > SPRINTING_VELOCITY\r\n        ? 'SPRINTING'\r\n        : 'WALKING'\r\n    } else {\r\n      this.reactive.movementState = 'NOT_MOVING'\r\n    }\r\n  }\r\n\r\n  // #region Held Item State\r\n  private updateHeldItem (isLeftHand: boolean) {\r\n    const newItem = isLeftHand ? bot.inventory.slots[45] : bot.heldItem\r\n    if (!newItem) {\r\n      if (isLeftHand) {\r\n        this.reactive.heldItemOff = undefined\r\n      } else {\r\n        this.reactive.heldItemMain = undefined\r\n      }\r\n      return\r\n    }\r\n\r\n    const block = loadedData.blocksByName[newItem.name]\r\n    const blockProperties = block ? new window.PrismarineBlock(block.id, 'void', newItem.metadata).getProperties() : {}\r\n    const item: HandItemBlock = {\r\n      name: newItem.name,\r\n      properties: blockProperties,\r\n      id: newItem.type,\r\n      type: block ? 'block' : 'item',\r\n      fullItem: newItem,\r\n    }\r\n\r\n    if (isLeftHand) {\r\n      this.reactive.heldItemOff = item\r\n    } else {\r\n      this.reactive.heldItemMain = item\r\n    }\r\n    // this.events.emit('heldItemChanged', item, isLeftHand)\r\n  }\r\n\r\n  startUsingItem () {\r\n    if (this.isUsingItem) return\r\n    this.isUsingItem = true\r\n    this.reactive.itemUsageTicks = 0\r\n  }\r\n\r\n  stopUsingItem () {\r\n    this.isUsingItem = false\r\n    this.reactive.itemUsageTicks = 0\r\n  }\r\n\r\n  getItemUsageTicks (): number {\r\n    return this.reactive.itemUsageTicks\r\n  }\r\n\r\n  watchReactive () {\r\n    subscribeKey(this.reactive, 'eyeHeight', () => {\r\n      appViewer.backend?.updateCamera(bot.entity.position, bot.entity.yaw, bot.entity.pitch)\r\n    })\r\n  }\r\n\r\n  // #endregion\r\n}\r\n\r\nexport const playerState = new PlayerStateControllerMain()\r\nwindow.playerState = playerState\r\n","import { viewerConnector } from 'mcraft-fun-mineflayer'\r\nimport { PACKETS_REPLAY_FILE_EXTENSION, WORLD_STATE_FILE_EXTENSION } from 'mcraft-fun-mineflayer/build/worldState'\r\nimport { Bot } from 'mineflayer'\r\nimport CircularBuffer from 'flying-squid/dist/circularBuffer'\r\nimport { PacketsLogger } from 'mcraft-fun-mineflayer/build/packetsLogger'\r\nimport { subscribe } from 'valtio'\r\nimport { lastConnectOptions } from '../../react/AppStatusProvider'\r\nimport { packetsRecordingState } from '../../packetsReplay/packetsReplayLegacy'\r\nimport { packetsReplayState } from '../../react/state/packetsReplayState'\r\n\r\nconst AUTO_CAPTURE_PACKETS_COUNT = 30\r\nlet circularBuffer: CircularBuffer | undefined\r\nlet lastConnectVersion = ''\r\n\r\nexport const localRelayServerPlugin = (bot: Bot) => {\r\n  lastConnectVersion = bot.version\r\n  let ended = false\r\n  bot.on('end', () => {\r\n    ended = true\r\n  })\r\n\r\n  bot.loadPlugin(\r\n    viewerConnector({\r\n      tcpEnabled: false,\r\n      websocketEnabled: false,\r\n    })\r\n  )\r\n\r\n  const downloadFile = (contents: string, filename: string) => {\r\n    const a = document.createElement('a')\r\n    const blob = new Blob([contents], { type: 'text/plain' })\r\n    const url = URL.createObjectURL(blob)\r\n    a.href = url\r\n    a.download = filename\r\n    a.click()\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n  bot.downloadCurrentWorldState = () => {\r\n    const worldState = bot.webViewer._unstable.createStateCaptureFile()\r\n    // add readable timestamp to filename\r\n    const timestamp = new Date().toISOString().replaceAll(/[-:Z]/g, '')\r\n    downloadFile(worldState.contents, `${bot.username}-world-state-${timestamp}.${WORLD_STATE_FILE_EXTENSION}`)\r\n  }\r\n\r\n  let logger: PacketsLogger | undefined\r\n  bot.startPacketsRecording = () => {\r\n    bot.webViewer._unstable.startRecording((l) => {\r\n      logger = l\r\n    })\r\n  }\r\n\r\n  bot.stopPacketsRecording = () => {\r\n    if (!logger) return\r\n    const packets = logger?.contents\r\n    logger = undefined\r\n    const timestamp = new Date().toISOString().replaceAll(/[-:Z]/g, '')\r\n    downloadFile(packets, `${bot.username}-packets-${timestamp}.${PACKETS_REPLAY_FILE_EXTENSION}`)\r\n    bot.webViewer._unstable.stopRecording()\r\n  }\r\n\r\n  circularBuffer = new CircularBuffer(AUTO_CAPTURE_PACKETS_COUNT)\r\n  let position = 0\r\n  bot._client.on('writePacket' as any, (name, params) => {\r\n    circularBuffer!.add({ name, state: bot._client.state, params, isFromServer: false, timestamp: Date.now() })\r\n    if (packetsRecordingState.active) {\r\n      packetsReplayState.packetsPlayback.push({\r\n        name,\r\n        data: params,\r\n        isFromClient: true,\r\n        isUpcoming: false,\r\n        position: position++,\r\n        timestamp: Date.now(),\r\n      })\r\n      packetsReplayState.progress.current++\r\n    }\r\n  })\r\n  bot._client.on('packet', (data, { name }) => {\r\n    if (name === 'map_chunk') data = { x: data.x, z: data.z }\r\n    circularBuffer!.add({ name, state: bot._client.state, params: data, isFromServer: true, timestamp: Date.now() })\r\n    if (packetsRecordingState.active) {\r\n      packetsReplayState.packetsPlayback.push({\r\n        name,\r\n        data,\r\n        isFromClient: false,\r\n        isUpcoming: false,\r\n        position: position++,\r\n        timestamp: Date.now(),\r\n      })\r\n      packetsReplayState.progress.total++\r\n    }\r\n  })\r\n  const oldWriteChannel = bot._client.writeChannel.bind(bot._client)\r\n  bot._client.writeChannel = (channel, params) => {\r\n    packetsReplayState.packetsPlayback.push({\r\n      name: channel,\r\n      data: params,\r\n      isFromClient: true,\r\n      isUpcoming: false,\r\n      position: position++,\r\n      timestamp: Date.now(),\r\n      isCustomChannel: true,\r\n    })\r\n    oldWriteChannel(channel, params)\r\n  }\r\n\r\n  upPacketsReplayPanel()\r\n}\r\n\r\nconst upPacketsReplayPanel = () => {\r\n  if (packetsRecordingState.active && bot) {\r\n    packetsReplayState.isOpen = true\r\n    packetsReplayState.isMinimized = true\r\n    packetsReplayState.isRecording = true\r\n    packetsReplayState.replayName = 'Recording all packets for ' + bot.username\r\n  }\r\n}\r\n\r\nsubscribe(packetsRecordingState, () => {\r\n  upPacketsReplayPanel()\r\n})\r\n\r\ndeclare module 'mineflayer' {\r\n  interface Bot {\r\n    downloadCurrentWorldState: () => void\r\n    startPacketsRecording: () => void\r\n    stopPacketsRecording: () => void\r\n  }\r\n}\r\n\r\nexport const getLastAutoCapturedPackets = () => circularBuffer?.size\r\nexport const downloadAutoCapturedPackets = () => {\r\n  const logger = new PacketsLogger({ minecraftVersion: lastConnectVersion })\r\n  logger.relativeTime = false\r\n  logger.formattedTime = true\r\n  for (const packet of circularBuffer?.getLastElements() ?? []) {\r\n    logger.log(packet.isFromServer, { name: packet.name, state: packet.state, time: packet.timestamp }, packet.params)\r\n  }\r\n  const textContents = logger.contents\r\n  const blob = new Blob([textContents], { type: 'text/plain' })\r\n  const url = URL.createObjectURL(blob)\r\n  const a = document.createElement('a')\r\n  a.href = url\r\n  a.download = `${lastConnectOptions.value?.server ?? 'unknown-server'}-${lastConnectOptions.value?.username ?? 'unknown-username'}-auto-captured-packets.txt`\r\n  a.click()\r\n  URL.revokeObjectURL(url)\r\n}\r\n","export class UserError extends Error {\r\n  constructor (message: string) {\r\n    super(message)\r\n    this.name = 'UserError'\r\n  }\r\n}\r\n","// fix double tap on mobile\r\n\r\nlet lastElement = null as {\r\n  clickTime: number\r\n  element: HTMLElement\r\n} | null\r\ndocument.addEventListener('touchstart', (e) => {\r\n  if (e.touches.length > 1) {\r\n    lastElement = null\r\n    return\r\n  }\r\n  if (lastElement && Date.now() - lastElement.clickTime < 500 && lastElement.element === e.target) {\r\n    lastElement.element.dispatchEvent(new MouseEvent('dblclick', { bubbles: true }))\r\n    lastElement = null\r\n  }\r\n  lastElement = {\r\n    clickTime: Date.now(),\r\n    element: e.target as HTMLElement\r\n  }\r\n}, { passive: false })\r\n","import { proxy, subscribe } from 'valtio/vanilla'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { omitObj } from '@zardoy/utils'\r\nimport { appQueryParams, appQueryParamsArray } from './appParams'\r\nimport type { AppConfig } from './appConfig'\r\nimport { appStorage } from './react/appStorageProvider'\r\nimport { miscUiState } from './globalState'\r\nimport { defaultOptions } from './defaultOptions'\r\n\r\nconst isDev = process.env.NODE_ENV === 'development'\r\nconst initialAppConfig = process.env?.INLINED_APP_CONFIG as AppConfig ?? {}\r\n\r\n// const qsOptionsRaw = new URLSearchParams(location.search).getAll('setting')\r\nconst qsOptionsRaw = appQueryParamsArray.setting ?? []\r\nexport const qsOptions = Object.fromEntries(qsOptionsRaw.map(o => {\r\n  const [key, value] = o.split(':')\r\n  return [key, JSON.parse(value)]\r\n}))\r\n\r\n// Track which settings are disabled (controlled by QS or forced by config)\r\nexport const disabledSettings = proxy({\r\n  value: new Set<string>(Object.keys(qsOptions))\r\n})\r\n\r\nconst migrateOptions = (options: Partial<AppOptions & Record<string, any>>) => {\r\n  if (options.highPerformanceGpu) {\r\n    options.gpuPreference = 'high-performance'\r\n    delete options.highPerformanceGpu\r\n  }\r\n  if (Object.keys(options.touchControlsPositions ?? {}).length === 0) {\r\n    options.touchControlsPositions = defaultOptions.touchControlsPositions\r\n  }\r\n  if (options.touchControlsPositions?.jump === undefined) {\r\n    options.touchControlsPositions!.jump = defaultOptions.touchControlsPositions.jump\r\n  }\r\n  if (options.touchControlsType === 'joystick-buttons') {\r\n    options.touchInteractionType = 'buttons'\r\n  }\r\n\r\n  return options\r\n}\r\nconst migrateOptionsLocalStorage = () => {\r\n  if (Object.keys(appStorage['options'] ?? {}).length) {\r\n    for (const key of Object.keys(appStorage['options'])) {\r\n      if (!(key in defaultOptions)) continue // drop unknown options\r\n      const defaultValue = defaultOptions[key]\r\n      if (JSON.stringify(defaultValue) !== JSON.stringify(appStorage['options'][key])) {\r\n        appStorage.changedSettings[key] = appStorage['options'][key]\r\n      }\r\n    }\r\n    delete appStorage['options']\r\n  }\r\n}\r\n\r\nexport type AppOptions = typeof defaultOptions\r\n\r\nconst isDeepEqual = (a: any, b: any): boolean => {\r\n  if (a === b) return true\r\n  if (typeof a !== typeof b) return false\r\n  if (typeof a !== 'object') return false\r\n  if (a === null || b === null) return a === b\r\n  if (Array.isArray(a) && Array.isArray(b)) {\r\n    if (a.length !== b.length) return false\r\n    return a.every((item, index) => isDeepEqual(item, b[index]))\r\n  }\r\n  const keysA = Object.keys(a)\r\n  const keysB = Object.keys(b)\r\n  if (keysA.length !== keysB.length) return false\r\n  return keysA.every(key => isDeepEqual(a[key], b[key]))\r\n}\r\n\r\nexport const getChangedSettings = () => {\r\n  return Object.fromEntries(\r\n    Object.entries(appStorage.changedSettings).filter(([key, value]) => !isDeepEqual(defaultOptions[key], value))\r\n  )\r\n}\r\n\r\nmigrateOptionsLocalStorage()\r\nexport const options: AppOptions = proxy({\r\n  ...defaultOptions,\r\n  ...initialAppConfig.defaultSettings,\r\n  ...migrateOptions(appStorage.changedSettings),\r\n  ...qsOptions\r\n})\r\n\r\nwindow.options = window.settings = options\r\n\r\nexport const resetOptions = () => {\r\n  Object.assign(options, defaultOptions)\r\n}\r\n\r\nObject.defineProperty(window, 'debugChangedOptions', {\r\n  get () {\r\n    return getChangedSettings()\r\n  },\r\n})\r\n\r\nsubscribe(options, (ops) => {\r\n  if (appQueryParams.freezeSettings === 'true') return\r\n  for (const op of ops) {\r\n    const [type, path, value] = op\r\n    // let patch\r\n    // let accessor = options\r\n    // for (const part of path) {\r\n    // }\r\n    const key = path[0] as string\r\n    if (disabledSettings.value.has(key)) continue\r\n    appStorage.changedSettings[key] = options[key]\r\n  }\r\n})\r\n\r\ntype WatchValue = <T extends Record<string, any>>(proxy: T, callback: (p: T, isChanged: boolean) => void) => () => void\r\n\r\nexport const watchValue: WatchValue = (proxy, callback) => {\r\n  const watchedProps = new Set<string>()\r\n  callback(new Proxy(proxy, {\r\n    get (target, p, receiver) {\r\n      watchedProps.add(p.toString())\r\n      return Reflect.get(target, p, receiver)\r\n    },\r\n  }), false)\r\n  const unsubscribes = [] as Array<() => void>\r\n  for (const prop of watchedProps) {\r\n    unsubscribes.push(\r\n      subscribeKey(proxy, prop, () => {\r\n        callback(proxy, true)\r\n      })\r\n    )\r\n  }\r\n\r\n  return () => {\r\n    for (const unsubscribe of unsubscribes) {\r\n      unsubscribe()\r\n    }\r\n  }\r\n}\r\n\r\nwatchValue(options, o => {\r\n  globalThis.excludeCommunicationDebugEvents = o.excludeCommunicationDebugEvents\r\n})\r\n\r\nwatchValue(options, o => {\r\n  document.body.classList.toggle('disable-assets', o.disableAssets)\r\n})\r\nwatchValue(options, o => {\r\n  document.body.style.setProperty('--touch-movement-buttons-opacity', (o.touchButtonsOpacity / 100).toString())\r\n})\r\nwatchValue(options, o => {\r\n  document.body.style.setProperty('--touch-movement-buttons-position', (o.touchButtonsPosition * 2) + 'px')\r\n})\r\n\r\nexport const useOptionValue = (setting, valueCallback) => {\r\n  valueCallback(setting)\r\n  subscribe(setting, valueCallback)\r\n}\r\n\r\nexport const getAppLanguage = () => {\r\n  if (options.language === 'auto') {\r\n    return miscUiState.appConfig?.defaultLanguage ?? navigator.language\r\n  }\r\n  return options.language\r\n}\r\n\r\nexport { defaultOptions } from './defaultOptions'\r\n","import { proxy } from 'valtio'\r\nimport { PacketsLogger } from 'mcraft-fun-mineflayer/build/packetsLogger'\r\nimport { options } from '../optionsStorage'\r\n\r\nexport const packetsRecordingState = proxy({\r\n  active: options.packetsRecordingAutoStart,\r\n  hasRecordedPackets: false\r\n})\r\n\r\n// eslint-disable-next-line import/no-mutable-exports\r\nexport let replayLogger: PacketsLogger | undefined\r\n\r\nconst isBufferData = (data: any): boolean => {\r\n  if (Buffer.isBuffer(data) || data instanceof Uint8Array) return true\r\n  if (typeof data === 'object' && data !== null) {\r\n    return Object.values(data).some(value => isBufferData(value))\r\n  }\r\n  return false\r\n}\r\n\r\nconst processPacketData = (data: any): any => {\r\n  if (options.packetsLoggerPreset === 'no-buffers') {\r\n    if (Buffer.isBuffer(data)) {\r\n      return '[buffer]'\r\n    }\r\n    if (typeof data === 'object' && data !== null) {\r\n      const processed = {}\r\n      for (const [key, value] of Object.entries(data)) {\r\n        processed[key] = isBufferData(value) ? '[buffer]' : value\r\n      }\r\n      return processed\r\n    }\r\n  }\r\n  return data\r\n}\r\n\r\nexport default () => {\r\n  customEvents.on('mineflayerBotCreated', () => {\r\n    replayLogger = new PacketsLogger({ minecraftVersion: bot.version })\r\n    replayLogger.contents = ''\r\n    packetsRecordingState.hasRecordedPackets = false\r\n    const handleServerPacket = (data, { name, state = bot._client.state }) => {\r\n      if (!packetsRecordingState.active) {\r\n        return\r\n      }\r\n      replayLogger!.log(true, { name, state }, processPacketData(data))\r\n      packetsRecordingState.hasRecordedPackets = true\r\n    }\r\n    bot._client.on('packet', handleServerPacket)\r\n    bot._client.on('packet_name' as any, (name, data) => {\r\n      handleServerPacket(data, { name })\r\n    })\r\n\r\n    bot._client.on('writePacket' as any, (name, data) => {\r\n      if (!packetsRecordingState.active) {\r\n        return\r\n      }\r\n      replayLogger!.log(false, { name, state: bot._client.state }, processPacketData(data))\r\n      packetsRecordingState.hasRecordedPackets = true\r\n    })\r\n  })\r\n}\r\n\r\nexport const downloadPacketsReplay = async () => {\r\n  const a = document.createElement('a')\r\n  a.href = `data:text/plain;charset=utf-8,${encodeURIComponent(replayLogger!.contents)}`\r\n  a.download = `packets-replay-${new Date().toISOString()}.txt`\r\n  a.click()\r\n}\r\nglobalThis.downloadPacketsReplay = downloadPacketsReplay\r\n","import prettyBytes from 'pretty-bytes'\r\n\r\nexport const getFixedFilesize = (bytes: number) => {\r\n  return prettyBytes(bytes, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n}\r\n","/* eslint-disable no-await-in-loop */\r\nimport { createServer, ServerClient } from 'minecraft-protocol'\r\nimport { ParsedReplayPacket, parseReplayContents } from 'mcraft-fun-mineflayer/build/packetsLogger'\r\nimport { PACKETS_REPLAY_FILE_EXTENSION, WORLD_STATE_FILE_EXTENSION } from 'mcraft-fun-mineflayer/build/worldState'\r\nimport MinecraftData from 'minecraft-data'\r\nimport { GameMode } from 'mineflayer'\r\nimport { UserError } from '../mineflayer/userError'\r\nimport { packetsReplayState } from '../react/state/packetsReplayState'\r\nimport { getFixedFilesize } from '../react/simpleUtils'\r\nimport { appQueryParams } from '../appParams'\r\nimport { LocalServer } from '../customServer'\r\n\r\nconst SUPPORTED_FORMAT_VERSION = 1\r\n\r\ntype ReplayDefinition = {\r\n  minecraftVersion: string\r\n  replayAgainst?: 'client' | 'server'\r\n  serverIp?: string\r\n}\r\n\r\ninterface OpenFileOptions {\r\n  contents: string\r\n  filename?: string\r\n  filesize?: number\r\n}\r\n\r\nexport function openFile ({ contents, filename = 'unnamed', filesize }: OpenFileOptions) {\r\n  packetsReplayState.replayName = `${filename} (${getFixedFilesize(filesize ?? contents.length)})`\r\n  packetsReplayState.isPlaying = false\r\n\r\n  const connectOptions = {\r\n    worldStateFileContents: contents,\r\n    username: 'replay'\r\n  }\r\n  dispatchEvent(new CustomEvent('connect', { detail: connectOptions }))\r\n}\r\n\r\nexport const startLocalReplayServer = (contents: string) => {\r\n  const { packets, header } = parseReplayContents(contents)\r\n\r\n  packetsReplayState.packetsPlayback = []\r\n  packetsReplayState.isOpen = true\r\n  packetsReplayState.isPlaying = true\r\n  packetsReplayState.progress = {\r\n    current: 0,\r\n    total: packets.filter(packet => packet.isFromServer).length\r\n  }\r\n  packetsReplayState.speed = 1\r\n  packetsReplayState.replayName ||= `local ${getFixedFilesize(contents.length)}`\r\n  packetsReplayState.replayName = `${header.minecraftVersion} ${packetsReplayState.replayName}`\r\n\r\n  if ('formatVersion' in header && header.formatVersion !== SUPPORTED_FORMAT_VERSION) {\r\n    throw new UserError(`Unsupported format version: ${header.formatVersion}`)\r\n  }\r\n  if ('replayAgainst' in header && header.replayAgainst === 'server') {\r\n    throw new Error('not supported')\r\n  }\r\n\r\n  const server = createServer({\r\n    Server: LocalServer as any,\r\n    version: header.minecraftVersion,\r\n    keepAlive: false,\r\n    'online-mode': false\r\n  })\r\n\r\n  const data = MinecraftData(header.minecraftVersion)\r\n  server.on(data.supportFeature('hasConfigurationState') ? 'playerJoin' : 'login' as any, async client => {\r\n    await mainPacketsReplayer(\r\n      client,\r\n      packets,\r\n      packetsReplayState.customButtons.validateClientPackets.state ? undefined : true\r\n    )\r\n  })\r\n\r\n  return {\r\n    server,\r\n    version: header.minecraftVersion\r\n  }\r\n}\r\n\r\n// time based packets\r\n// const FLATTEN_CLIENT_PACKETS = new Set(['position', 'position_look'])\r\nconst FLATTEN_CLIENT_PACKETS = new Set([] as string[])\r\n\r\nconst positions = {\r\n  client: 0,\r\n  server: 0\r\n}\r\nconst addPacketToReplayer = (name: string, data, isFromClient: boolean, wasUpcoming = false) => {\r\n  const side = isFromClient ? 'client' : 'server'\r\n\r\n  if (wasUpcoming) {\r\n    const lastUpcoming = packetsReplayState.packetsPlayback.find(p => p.isUpcoming && p.name === name)\r\n    if (lastUpcoming) {\r\n      lastUpcoming.isUpcoming = false\r\n    }\r\n  } else {\r\n    packetsReplayState.packetsPlayback.push({\r\n      name,\r\n      data,\r\n      isFromClient,\r\n      position: ++positions[side]!,\r\n      isUpcoming: false,\r\n      timestamp: Date.now()\r\n    })\r\n  }\r\n\r\n  if (!isFromClient && !wasUpcoming) {\r\n    packetsReplayState.progress.current++\r\n  }\r\n}\r\n\r\nconst IGNORE_SERVER_PACKETS = new Set([\r\n  'kick_disconnect',\r\n])\r\n\r\nconst ADDITIONAL_DELAY = 500\r\n\r\nconst mainPacketsReplayer = async (client: ServerClient, packets: ParsedReplayPacket[], ignoreClientPacketsWait: string[] | true = []) => {\r\n  const writePacket = (name: string, data: any) => {\r\n    data = restoreData(data)\r\n    client.write(name, data)\r\n  }\r\n\r\n  const playPackets = packets.filter(p => p.state === 'play')\r\n\r\n  let clientPackets = [] as Array<{ name: string, params: any }>\r\n  const clientsPacketsWaiter = createPacketsWaiter({\r\n    unexpectedPacketReceived (name, params) {\r\n      console.log('unexpectedPacketReceived', name, params)\r\n      addPacketToReplayer(name, params, true)\r\n    },\r\n    expectedPacketReceived (name, params) {\r\n      console.log('expectedPacketReceived', name, params)\r\n      addPacketToReplayer(name, params, true, true)\r\n    },\r\n    unexpectedPacketsLimit: 15,\r\n    onUnexpectedPacketsLimitReached () {\r\n      addPacketToReplayer('...', {}, true)\r\n    }\r\n  })\r\n\r\n  // Patch console.error to detect errors\r\n  const originalConsoleError = console.error\r\n  let lastSentPacket: { name: string, params: any } | null = null\r\n  console.error = (...args) => {\r\n    if (lastSentPacket) {\r\n      console.log('Got error after packet', lastSentPacket.name, lastSentPacket.params)\r\n    }\r\n    originalConsoleError.apply(console, args)\r\n    if (packetsReplayState.customButtons.stopOnError.state) {\r\n      packetsReplayState.isPlaying = false\r\n      throw new Error('Replay stopped due to error: ' + args.join(' '))\r\n    }\r\n  }\r\n\r\n  const playServerPacket = (name: string, params: any) => {\r\n    try {\r\n      writePacket(name, params)\r\n      addPacketToReplayer(name, params, false)\r\n      lastSentPacket = { name, params }\r\n    } catch (err) {\r\n      console.error('Error processing packet:', err)\r\n      if (packetsReplayState.customButtons.stopOnError.state) {\r\n        packetsReplayState.isPlaying = false\r\n      }\r\n    }\r\n  }\r\n\r\n  try {\r\n    bot.on('error', (err) => {\r\n      console.error('Mineflayer error:', err)\r\n    })\r\n\r\n    bot._client.on('writePacket' as any, (name, params) => {\r\n      clientsPacketsWaiter.addPacket(name, params)\r\n    })\r\n\r\n    console.log('start replaying!')\r\n    for (const [i, packet] of playPackets.entries()) {\r\n      if (!packetsReplayState.isPlaying) {\r\n        await new Promise<void>(resolve => {\r\n          const interval = setInterval(() => {\r\n            if (packetsReplayState.isPlaying) {\r\n              clearInterval(interval)\r\n              resolve()\r\n            }\r\n          }, 100)\r\n        })\r\n      }\r\n\r\n      if (packet.isFromServer) {\r\n        if (packet.params === null) {\r\n          console.warn('packet.params is null', packet)\r\n          continue\r\n        }\r\n        playServerPacket(packet.name, packet.params)\r\n        if (packet.diff) {\r\n          await new Promise(resolve => {\r\n            setTimeout(resolve, packet.diff * packetsReplayState.speed + ADDITIONAL_DELAY * (packetsReplayState.customButtons.packetsSenderDelay.state ? 1 : 0))\r\n          })\r\n        }\r\n      } else if (ignoreClientPacketsWait !== true && !ignoreClientPacketsWait.includes(packet.name)) {\r\n        clientPackets.push({ name: packet.name, params: packet.params })\r\n        if (playPackets[i + 1]?.isFromServer) {\r\n          // eslint-disable-next-line @typescript-eslint/no-loop-func\r\n          clientPackets = clientPackets.filter((p, index) => {\r\n            return !FLATTEN_CLIENT_PACKETS.has(p.name) || index === clientPackets.findIndex(clientPacket => clientPacket.name === p.name)\r\n          })\r\n          for (const packet of clientPackets) {\r\n            packetsReplayState.packetsPlayback.push({\r\n              name: packet.name,\r\n              data: packet.params,\r\n              isFromClient: true,\r\n              position: positions.client++,\r\n              timestamp: Date.now(),\r\n              isUpcoming: true,\r\n            })\r\n          }\r\n\r\n          await Promise.race([\r\n            clientsPacketsWaiter.waitForPackets(clientPackets.map(p => p.name)),\r\n            ...(packetsReplayState.customButtons.skipMissingOnTimeout.state ? [new Promise(resolve => {\r\n              setTimeout(resolve, 1000)\r\n            })] : [])\r\n          ])\r\n          clientsPacketsWaiter.stopWaiting()\r\n          clientPackets = []\r\n        }\r\n      }\r\n    }\r\n  } finally {\r\n    // Restore original console.error\r\n    console.error = originalConsoleError\r\n  }\r\n}\r\n\r\nexport const switchGameMode = (gameMode: GameMode) => {\r\n  const gamemodes = {\r\n    survival: 0,\r\n    creative: 1,\r\n    adventure: 2,\r\n    spectator: 3\r\n  }\r\n  if (gameMode === 'spectator') {\r\n    bot._client.emit('abilities', {\r\n    // can fly + is flying\r\n      flags: 6\r\n    })\r\n  }\r\n  bot._client.emit('game_state_change', {\r\n    reason: 3,\r\n    gameMode: gamemodes[gameMode]\r\n  })\r\n}\r\n\r\ninterface PacketsWaiterOptions {\r\n  unexpectedPacketReceived?: (name: string, params: any) => void\r\n  expectedPacketReceived?: (name: string, params: any) => void\r\n  onUnexpectedPacketsLimitReached?: () => void\r\n  unexpectedPacketsLimit?: number\r\n}\r\n\r\ninterface PacketsWaiter {\r\n  addPacket(name: string, params: any): void\r\n  waitForPackets(packets: string[]): Promise<void>\r\n  stopWaiting(): void\r\n}\r\n\r\nconst createPacketsWaiter = (options: PacketsWaiterOptions = {}): PacketsWaiter => {\r\n  let packetHandler: ((data: any, name: string) => void) | null = null\r\n  const queuedPackets: Array<{ name: string, params: any }> = []\r\n  let isWaiting = false\r\n  let unexpectedPacketsCount = 0\r\n  const handlePacket = (data: any, name: string, waitingPackets: string[], resolve: () => void) => {\r\n    if (waitingPackets.includes(name)) {\r\n      waitingPackets.splice(waitingPackets.indexOf(name), 1)\r\n      options.expectedPacketReceived?.(name, data)\r\n    } else {\r\n      if (options.unexpectedPacketsLimit && unexpectedPacketsCount < options.unexpectedPacketsLimit) {\r\n        options.unexpectedPacketReceived?.(name, data)\r\n      }\r\n      if (options.onUnexpectedPacketsLimitReached && unexpectedPacketsCount === options.unexpectedPacketsLimit) {\r\n        options.onUnexpectedPacketsLimitReached?.()\r\n      }\r\n      unexpectedPacketsCount++\r\n    }\r\n\r\n    if (waitingPackets.length === 0) {\r\n      resolve()\r\n    }\r\n  }\r\n\r\n  return {\r\n    addPacket (name: string, params: any) {\r\n      if (packetHandler) {\r\n        packetHandler(params, name)\r\n      } else {\r\n        queuedPackets.push({ name, params })\r\n      }\r\n    },\r\n\r\n    async waitForPackets (packets: string[]) {\r\n      if (isWaiting) {\r\n        throw new Error('Already waiting for packets')\r\n      }\r\n      unexpectedPacketsCount = 0\r\n      isWaiting = true\r\n\r\n      try {\r\n        await new Promise<void>(resolve => {\r\n          const waitingPackets = [...packets]\r\n\r\n          packetHandler = (data: any, name: string) => {\r\n            handlePacket(data, name, waitingPackets, resolve)\r\n          }\r\n\r\n          // Process any queued packets\r\n          for (const packet of queuedPackets) {\r\n            handlePacket(packet.params, packet.name, waitingPackets, resolve)\r\n          }\r\n          queuedPackets.length = 0\r\n        })\r\n      } finally {\r\n        isWaiting = false\r\n        packetHandler = null\r\n      }\r\n    },\r\n    stopWaiting () {\r\n      isWaiting = false\r\n      packetHandler = null\r\n      queuedPackets.length = 0\r\n    }\r\n  }\r\n}\r\n\r\nconst isArrayEqual = (a: any[], b: any[]) => {\r\n  if (a.length !== b.length) return false\r\n  for (const [i, element] of a.entries()) {\r\n    if (element !== b[i]) return false\r\n  }\r\n  return true\r\n}\r\n\r\nconst restoreData = (json: any) => {\r\n  if (!json) return json\r\n  const keys = Object.keys(json)\r\n\r\n  if (isArrayEqual(keys.sort(), ['data', 'type'].sort())) {\r\n    if (json.type === 'Buffer') {\r\n      return Buffer.from(json.data)\r\n    }\r\n  }\r\n\r\n  if (typeof json === 'object' && json) {\r\n    for (const [key, value] of Object.entries(json)) {\r\n      if (typeof value === 'object') {\r\n        json[key] = restoreData(value)\r\n      }\r\n    }\r\n  }\r\n\r\n  return json\r\n}\r\n\r\nexport const VALID_REPLAY_EXTENSIONS = [`.${PACKETS_REPLAY_FILE_EXTENSION}`, `.${WORLD_STATE_FILE_EXTENSION}`]\r\n","export const urlParams = new URLSearchParams(window.location.search)\r\nexport const isPlayground = urlParams.get('playground') === 'true' || urlParams.get('playground') === '1'\r\n\r\nif (isPlayground) {\r\n  // hide #ui-root\r\n  const uiRoot = document.getElementById('ui-root')\r\n  if (uiRoot) {\r\n    uiRoot.style.display = 'none'\r\n  }\r\n}\r\n","export const guessProblem = (errorMessage: string) => {\r\n  if (errorMessage.endsWith('Socket error: ECONNREFUSED')) {\r\n    return 'Most probably the server is not running.'\r\n  }\r\n}\r\n\r\nexport const loadingTexts = [\r\n  'Like the project? Give us a star on GitHub or rate us on AlternativeTo!',\r\n  'To stay updated with the latest changes, go to the GitHub page, click on \"Watch\", choose \"Custom\", and then opt for \"Releases\"!',\r\n  'Upvote features on GitHub issues to help us prioritize them!',\r\n  'Want to contribute to the project? Check out Contributing.md on GitHub!',\r\n]\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"app-status-title-context-info\":\"app-status-title-context-info-y1wg4x\",\"appStatusTitleContextInfo\":\"app-status-title-context-info-y1wg4x\",\"description\":\"description-CKQUPy\",\"last-status\":\"last-status-js4NpE\",\"lastStatus\":\"last-status-js4NpE\"};","import { useEffect, useState } from 'react'\r\nimport { appQueryParams } from '../appParams'\r\nimport styles from './appStatus.module.css'\r\nimport Button from './Button'\r\nimport Screen from './Screen'\r\nimport LoadingChunks from './LoadingChunks'\r\nimport LoadingTimer from './LoadingTimer'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\n\r\nexport default ({\r\n  status,\r\n  isError,\r\n  hideDots = false,\r\n  lastStatus = '',\r\n  backAction = undefined as undefined | (() => void),\r\n  description = '' as string | JSX.Element,\r\n  actionsSlot = null as React.ReactNode | null,\r\n  showReconnect = false,\r\n  onReconnect = undefined as undefined | (() => void),\r\n  children\r\n}) => {\r\n  const [loadingDotIndex, setLoadingDotIndex] = useState(0)\r\n  const { hadWorldLoaded } = lastConnectOptions\r\n\r\n  useEffect(() => {\r\n    const statusRunner = async () => {\r\n      const timer = async (ms) => new Promise((resolve) => { setTimeout(resolve, ms) })\r\n\r\n      const load = async () => {\r\n        // eslint-disable-next-line no-constant-condition\r\n        while (true) {\r\n          setLoadingDotIndex(i => (i + 1) % 4)\r\n          await timer(500) // eslint-disable-line no-await-in-loop\r\n        }\r\n      }\r\n\r\n      void load()\r\n    }\r\n\r\n    void statusRunner()\r\n  }, [])\r\n\r\n  const lockConnect = appQueryParams.lockConnect === 'true'\r\n  const connectOptions = lastConnectOptions.value\r\n  const connectionProxy =\r\n    connectOptions?.server && !connectOptions.server.startsWith('ws://') && !connectOptions.server.startsWith('wss://')\r\n      ? connectOptions.proxy : undefined\r\n\r\n  return (\r\n    <div className=''>\r\n      <Screen\r\n        className='small-content'\r\n        titleSelectable={isError}\r\n        title={\r\n          <>\r\n            <span\r\n              className='app-status-title'\r\n              style={{\r\n                wordBreak: 'break-word',\r\n                whiteSpace: 'pre-wrap',\r\n              }}\r\n            >\r\n              {status}\r\n            </span>\r\n            <div style={{ display: 'inline-flex', gap: '1px', }} hidden={hideDots || isError}>\r\n              {\r\n                [...'...'].map((dot, i) => {\r\n                  return <span\r\n                    key={i} style={{\r\n                      visibility: loadingDotIndex <= i ? 'hidden' : 'visible',\r\n                    }}>{dot}</span>\r\n                })\r\n              }\r\n            </div>\r\n            <p className={styles.description}>{description}</p>\r\n            <p className={styles['last-status']}>{lastStatus ? `Last status: ${lastStatus}` : lastStatus}</p>\r\n            {isError && <p className={`app-status-title-context-info ${styles.appStatusTitleContextInfo}`}>\r\n              S: {connectOptions?.server ?? 'N/A'} {' '}\r\n              P: {connectionProxy ?? 'N/A'} {' '}\r\n              V: {connectOptions?.botVersion ?? 'auto'} {' '}\r\n              U: {connectOptions?.username ?? 'N/A'}{' '}\r\n              cV: {process.env.RELEASE_TAG ?? 'N/A'}\r\n            </p>}\r\n          </>\r\n        }\r\n        backdrop='dirt'\r\n      >\r\n        {isError && (\r\n          <>\r\n            {showReconnect && onReconnect && <Button onClick={onReconnect}>\r\n              <b>Reconnect</b>\r\n            </Button>}\r\n            {actionsSlot}\r\n            {!lockConnect && <Button\r\n              onClick={() => {\r\n                if (location.search) {\r\n                  location.search = ''\r\n                } else {\r\n                  window.location.reload()\r\n                }\r\n              }}\r\n            >\r\n              <b>Reset App (recommended)</b>\r\n            </Button>}\r\n            {backAction && <Button label=\"Back\" onClick={backAction} />}\r\n          </>\r\n        )}\r\n        {children}\r\n        <LoadingTimer />\r\n      </Screen>\r\n    </div>\r\n  )\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-HLYI5E\",\"main\":\"main-i6FZfW\"};","import { useEffect, useState } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport styles from './DiveTransition.module.css'\r\n\r\nconst durationInSeconds = 0.3\r\nconst durationInMs = durationInSeconds * 1000\r\n\r\nexport default ({ children, open, isError = false }) => {\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (!mounted && open) {\r\n      setMounted(true)\r\n    }\r\n    let timeout\r\n    if (mounted && !open) {\r\n      timeout = setTimeout(() => {\r\n        setMounted(false)\r\n      }, durationInMs)\r\n    }\r\n    return () => {\r\n      if (timeout) clearTimeout(timeout)\r\n    }\r\n  }, [open])\r\n\r\n  if (!mounted) return null\r\n\r\n  return (\r\n    <AnimatePresence initial={false}>\r\n      {open && (\r\n        <div className={styles.container}>\r\n          <motion.div\r\n            initial={false}\r\n            exit={isError ? undefined : { opacity: 0 }}\r\n            transition={{ duration: durationInSeconds }}\r\n            className={styles.main}\r\n          >\r\n            {children}\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n","import { useEffect, useRef } from 'react'\r\nimport './LoadingChunks.css'\r\n\r\nexport default ({ regionFiles = [] as string[], stateMap = {} as Record<string, string>, displayText = false, playerChunk = null as null | { x: number, z: number } }) => {\r\n  // visualize downloading chunks\r\n  const regionNumbers = regionFiles.map(x => x.split('.').slice(1, 3).map(Number))\r\n  const minX = Math.min(...regionNumbers.map(([x]) => x))\r\n  const maxX = Math.max(...regionNumbers.map(([x]) => x))\r\n  const minZ = Math.min(...regionNumbers.map(([, z]) => z))\r\n  const maxZ = Math.max(...regionNumbers.map(([, z]) => z))\r\n  const xChunks = maxX - minX + 1\r\n  const zChunks = maxZ - minZ + 1\r\n\r\n  return <div style={{\r\n    // maxWidth: '80%',\r\n    // maxHeight: '80%',\r\n    // aspectRatio: '1',\r\n    display: 'grid',\r\n    gridTemplateColumns: `repeat(${xChunks}, 1fr)`,\r\n    gridTemplateRows: `repeat(${zChunks}, 1fr)`,\r\n    gap: 1,\r\n    width: '110px',\r\n    height: '110px',\r\n  }}>\r\n    {Array.from({ length: xChunks * zChunks }).map((_, i) => {\r\n      const x = minX + i % xChunks\r\n      const z = minZ + Math.floor(i / xChunks)\r\n      const file = `r.${x}.${z}.mca`\r\n      const state = stateMap[file]\r\n      if (!regionFiles.includes(file)) return <div key={i} style={{ background: 'gray' }} />\r\n      return <Chunk key={i} x={x} z={z} state={state} displayText={displayText} currentPlayer={playerChunk?.x === x && playerChunk?.z === z} />\r\n    })}\r\n  </div>\r\n}\r\n\r\nconst Chunk = ({ x, z, state, displayText, currentPlayer }) => {\r\n  const text = displayText ? `${x},${z}` : undefined\r\n\r\n  return <div style={{\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    background: state === 'errored' ? 'red' : state === 'loading' ? 'white' : 'limegreen',\r\n    animation: state === 'loading' ? `loading-chunks-loading-animation 4s infinite cubic-bezier(0.4, 0, 0.2, 1)` : undefined,\r\n    transition: 'background 1s',\r\n    color: state === 'loading' ? 'black' : 'white',\r\n    position: 'relative',\r\n    zIndex: 1,\r\n  }}>\r\n    {/* green dot */}\r\n    {currentPlayer && <div style={{\r\n      position: 'absolute',\r\n      background: 'red',\r\n      borderRadius: '50%',\r\n      width: '5px',\r\n      height: '5px',\r\n      zIndex: -1,\r\n    }} />}\r\n    {text}</div>\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { activeModalStack, activeModalStacks, hideModal, insertActiveModalStack, maybeCleanupAfterDisconnect, miscUiState } from '../globalState'\r\nimport { guessProblem } from '../errorLoadingScreenHelpers'\r\nimport type { ConnectOptions } from '../connect'\r\nimport { downloadPacketsReplay, packetsRecordingState, replayLogger } from '../packetsReplay/packetsReplayLegacy'\r\nimport { getProxyDetails } from '../microsoftAuthflow'\r\nimport { downloadAutoCapturedPackets, getLastAutoCapturedPackets } from '../mineflayer/plugins/packetsRecording'\r\nimport { appQueryParams } from '../appParams'\r\nimport AppStatus from './AppStatus'\r\nimport DiveTransition from './DiveTransition'\r\nimport { useDidUpdateEffect } from './utils'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport Button from './Button'\r\nimport { updateAuthenticatedAccountData, updateLoadedServerData, AuthenticatedAccount } from './serversStorage'\r\nimport { showOptionsModal } from './SelectOption'\r\nimport LoadingChunks from './LoadingChunks'\r\nimport MessageFormattedString from './MessageFormattedString'\r\n\r\nconst initialState = {\r\n  status: '',\r\n  lastStatus: '',\r\n  maybeRecoverable: true,\r\n  descriptionHint: '',\r\n  isError: false,\r\n  hideDots: false,\r\n  loadingChunksData: null as null | Record<string, string>,\r\n  loadingChunksDataPlayerChunk: null as null | { x: number, z: number },\r\n  isDisplaying: false,\r\n  minecraftJsonMessage: null as null | Record<string, any>,\r\n  showReconnect: false\r\n}\r\nexport const appStatusState = proxy(initialState)\r\nexport const resetAppStatusState = () => {\r\n  Object.assign(appStatusState, initialState)\r\n}\r\n\r\nexport const lastConnectOptions = {\r\n  value: null as ConnectOptions | null,\r\n  hadWorldLoaded: false\r\n}\r\nglobalThis.lastConnectOptions = lastConnectOptions\r\n\r\nconst saveReconnectOptions = (options: ConnectOptions) => {\r\n  sessionStorage.setItem('reconnectOptions', JSON.stringify({\r\n    value: options,\r\n    timestamp: Date.now()\r\n  }))\r\n}\r\n\r\nexport const reconnectReload = () => {\r\n  if (lastConnectOptions.value) {\r\n    saveReconnectOptions(lastConnectOptions.value)\r\n    window.location.reload()\r\n  }\r\n}\r\n\r\nexport const quickDevReconnect = () => {\r\n  if (!lastConnectOptions.value) {\r\n    return\r\n  }\r\n\r\n  resetAppStatusState()\r\n  window.dispatchEvent(new window.CustomEvent('connect', {\r\n    detail: lastConnectOptions.value\r\n  }))\r\n}\r\n\r\nexport default () => {\r\n  const lastState = useRef(JSON.parse(JSON.stringify(appStatusState)))\r\n  const currentState = useSnapshot(appStatusState)\r\n  const { active: replayActive } = useSnapshot(packetsRecordingState)\r\n\r\n  const isOpen = useIsModalActive('app-status')\r\n\r\n  if (isOpen) {\r\n    lastState.current = JSON.parse(JSON.stringify(currentState))\r\n  }\r\n\r\n  const usingState = (isOpen ? currentState : lastState.current) as typeof currentState\r\n  const { isError, lastStatus, maybeRecoverable, status, hideDots, descriptionHint, loadingChunksData, loadingChunksDataPlayerChunk, minecraftJsonMessage, showReconnect } = usingState\r\n\r\n  useDidUpdateEffect(() => {\r\n    // todo play effect only when world successfully loaded\r\n    if (!isOpen) {\r\n      const startDiveAnimation = (divingElem: HTMLElement) => {\r\n        divingElem.style.animationName = 'dive-animation'\r\n        divingElem.parentElement!.style.perspective = '1200px'\r\n        divingElem.onanimationend = () => {\r\n          divingElem.parentElement!.style.perspective = ''\r\n          divingElem.onanimationend = null\r\n        }\r\n      }\r\n\r\n      const divingElem = document.querySelector('#viewer-canvas')\r\n      let observer: MutationObserver | null = null\r\n      if (divingElem) {\r\n        startDiveAnimation(divingElem as HTMLElement)\r\n      } else {\r\n        observer = new MutationObserver((mutations) => {\r\n          const divingElem = document.querySelector('#viewer-canvas')\r\n          if (divingElem) {\r\n            startDiveAnimation(divingElem as HTMLElement)\r\n            observer!.disconnect()\r\n          }\r\n        })\r\n        observer.observe(document.body, {\r\n          childList: true,\r\n          subtree: true\r\n        })\r\n      }\r\n      return () => {\r\n        if (observer) {\r\n          observer.disconnect()\r\n        }\r\n      }\r\n    }\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const controller = new AbortController()\r\n    window.addEventListener('keyup', (e) => {\r\n      if ('input textarea select'.split(' ').includes((e.target as HTMLElement).tagName?.toLowerCase() ?? '')) return\r\n      if (activeModalStack.at(-1)?.reactType !== 'app-status') return\r\n      // todo do only if reconnect is possible\r\n      if (e.code !== 'KeyR' || !lastConnectOptions.value) return\r\n      quickDevReconnect()\r\n    }, {\r\n      signal: controller.signal\r\n    })\r\n    return () => controller.abort()\r\n  }, [])\r\n\r\n  const displayAuthButton = status.includes('This server appears to be an online server and you are providing no authentication.')\r\n    || JSON.stringify(minecraftJsonMessage ?? {}).toLowerCase().includes('authenticate')\r\n  const hasVpnText = (text: string) => text.includes('VPN') || text.includes('Proxy')\r\n  const displayVpnButton = hasVpnText(status) || (minecraftJsonMessage && hasVpnText(JSON.stringify(minecraftJsonMessage)))\r\n  const authReconnectAction = async () => {\r\n    let accounts = [] as AuthenticatedAccount[]\r\n    updateAuthenticatedAccountData(oldAccounts => {\r\n      accounts = oldAccounts\r\n      return oldAccounts\r\n    })\r\n\r\n    const account = await showOptionsModal('Choose account to connect with', [...accounts.map(account => account.username), 'Use other account'])\r\n    if (!account) return\r\n    lastConnectOptions.value!.authenticatedAccount = accounts.find(acc => acc.username === account) || true\r\n    quickDevReconnect()\r\n  }\r\n\r\n  const lastAutoCapturedPackets = getLastAutoCapturedPackets()\r\n  const lockConnect = appQueryParams.lockConnect === 'true'\r\n  const wasDisconnected = showReconnect\r\n  let backAction = undefined as (() => void) | undefined\r\n  if (maybeRecoverable && (!lockConnect || !wasDisconnected)) {\r\n    backAction = () => {\r\n      maybeCleanupAfterDisconnect()\r\n\r\n      if (!wasDisconnected) {\r\n        hideModal(undefined, undefined, { force: true })\r\n        return\r\n      }\r\n      resetAppStatusState()\r\n      miscUiState.gameLoaded = false\r\n      miscUiState.loadedDataVersion = null\r\n      window.loadedData = undefined\r\n      if (activeModalStacks['main-menu']) {\r\n        insertActiveModalStack('main-menu')\r\n        if (activeModalStack.at(-1)?.reactType === 'app-status') {\r\n          hideModal(undefined, undefined, { force: true }) // workaround: hide loader that was shown on world loading\r\n        }\r\n      } else {\r\n        hideModal(undefined, undefined, { force: true })\r\n      }\r\n    }\r\n  }\r\n  return <DiveTransition open={isOpen} isError={isError}>\r\n    <AppStatus\r\n      status={status}\r\n      isError={isError || status === ''} // display back button if status is empty as probably our app is errored\r\n      hideDots={hideDots}\r\n      lastStatus={lastStatus}\r\n      showReconnect={showReconnect}\r\n      onReconnect={reconnectReload}\r\n      description={<>{\r\n        displayAuthButton ? '' : (isError ? guessProblem(status) : '') || descriptionHint\r\n      }{\r\n        minecraftJsonMessage && <MessageFormattedString message={minecraftJsonMessage} />\r\n      }</>}\r\n      backAction={backAction}\r\n      actionsSlot={\r\n        <>\r\n          {displayAuthButton && <Button label='Authenticate' onClick={authReconnectAction} />}\r\n          {displayVpnButton && <PossiblyVpnBypassProxyButton reconnect={quickDevReconnect} />}\r\n          {replayActive && <Button label={`Download Packets Replay ${replayLogger?.contents.split('\\n').length}L`} onClick={downloadPacketsReplay} />}\r\n          {wasDisconnected && lastAutoCapturedPackets && <Button label={`Inspect Last ${lastAutoCapturedPackets} Packets`} onClick={() => downloadAutoCapturedPackets()} />}\r\n        </>\r\n      }\r\n    >\r\n      {loadingChunksData && <LoadingChunks regionFiles={Object.keys(loadingChunksData)} stateMap={loadingChunksData} playerChunk={loadingChunksDataPlayerChunk} />}\r\n      {isOpen && <DisplayingIndicator />}\r\n    </AppStatus>\r\n  </DiveTransition>\r\n}\r\n\r\nconst DisplayingIndicator = () => {\r\n  useEffect(() => {\r\n    requestAnimationFrame(() => {\r\n      requestAnimationFrame(() => {\r\n        appStatusState.isDisplaying = true\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  return <div />\r\n}\r\n\r\nconst PossiblyVpnBypassProxyButton = ({ reconnect }: { reconnect: () => void }) => {\r\n  const [vpnBypassProxy, setVpnBypassProxy] = useState('')\r\n\r\n  const useVpnBypassProxyAction = () => {\r\n    updateLoadedServerData((data) => {\r\n      data.proxyOverride = vpnBypassProxy\r\n      return data\r\n    }, lastConnectOptions.value?.serverIndex)\r\n    lastConnectOptions.value!.proxy = vpnBypassProxy\r\n    reconnect()\r\n  }\r\n\r\n  useEffect(() => {\r\n    const proxy = lastConnectOptions.value?.proxy\r\n    if (!proxy) return\r\n    getProxyDetails(proxy)\r\n      .then(async (r) => r.json())\r\n      .then(({ capabilities }) => {\r\n        const { vpnBypassProxy } = capabilities\r\n        if (!vpnBypassProxy) return\r\n        setVpnBypassProxy(vpnBypassProxy)\r\n      })\r\n      .catch(() => { })\r\n  }, [])\r\n\r\n  if (!vpnBypassProxy) return\r\n  return <Button label='Use VPN bypass proxy' onClick={useVpnBypassProxyAction} />\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"button\":\"button-KqXTeV\",\"icon\":\"icon-rzxum4\"};","import classNames from 'classnames'\r\nimport { createContext, FC, Ref, useContext, useEffect, useRef } from 'react'\r\nimport buttonCss from './button.module.css'\r\nimport SharedHudVars from './SharedHudVars'\r\nimport PixelartIcon from './PixelartIcon'\r\n\r\n// testing in storybook from deathscreen\r\n\r\ninterface Props extends React.ComponentProps<'button'> {\r\n  label?: string\r\n  postLabel?: React.ReactNode\r\n  icon?: string\r\n  children?: React.ReactNode\r\n  inScreen?: boolean\r\n  rootRef?: Ref<HTMLButtonElement>\r\n  overlayColor?: string\r\n  noTranslate?: boolean\r\n}\r\n\r\nconst ButtonContext = createContext({\r\n  onClick () { },\r\n})\r\n\r\nexport const ButtonProvider: FC<{ children, onClick }> = ({ children, onClick }) => {\r\n  return <ButtonContext.Provider value={{ onClick }}>{children}</ButtonContext.Provider>\r\n}\r\n\r\nexport default (({ label, icon, children, inScreen, rootRef, type = 'button', postLabel, overlayColor, noTranslate, ...args }) => {\r\n  const style = {\r\n    ...args.style,\r\n  } as React.CSSProperties\r\n\r\n  const buttonRef = useRef<any>(null)\r\n\r\n  useEffect(() => {\r\n    // replace all text childs with translated text\r\n    // traverse dom\r\n    const traverse = (node: HTMLElement) => {\r\n      for (const child of node.childNodes) {\r\n        if (child.nodeType === Node.TEXT_NODE) {\r\n          if (child.textContent) {\r\n            child.textContent = translate(child.textContent)\r\n          }\r\n        } else {\r\n          traverse(child as HTMLElement)\r\n        }\r\n      }\r\n    }\r\n    traverse(buttonRef.current)\r\n  }, [label, children, postLabel])\r\n\r\n  args.title = translate(args.title)\r\n\r\n  const ctx = useContext(ButtonContext)\r\n\r\n  const onClick = (e) => {\r\n    ctx.onClick()\r\n    args.onClick?.(e)\r\n  }\r\n  const labelText = `${translate(label) ?? ''} ${typeof children === 'string' ? translate(children) : ''}`\r\n  if (inScreen) {\r\n    style.width = 150\r\n    args.className = `${args.className ?? ''} settings-text-container`\r\n  }\r\n  if (typeof style.width === 'number' && ((style.width <= 150 && labelText.length > 17) || (style.width >= 90 && labelText.length >= 11))) {\r\n    args.className = `${args.className ?? ''} settings-text-container-long`\r\n  }\r\n\r\n  if (icon) {\r\n    style.width = 20\r\n  }\r\n\r\n  const tryToTranslate = (maybeText: any) => {\r\n    if (noTranslate) return maybeText\r\n    if (typeof maybeText === 'string') {\r\n      return window.translateText?.(maybeText) ?? maybeText\r\n    }\r\n    if (Array.isArray(maybeText)) {\r\n      return maybeText.map(tryToTranslate)\r\n    }\r\n    return maybeText\r\n  }\r\n\r\n  return <SharedHudVars>\r\n    <button\r\n      ref={(button) => {\r\n        buttonRef.current = button\r\n        if (typeof rootRef === 'function') {\r\n          rootRef(button)\r\n        } else if (rootRef) {\r\n        //@ts-expect-error\r\n          rootRef.current = button\r\n        }\r\n      }}\r\n      {...args}\r\n      style={style}\r\n      className={classNames(buttonCss.button, args.className)}\r\n      onClick={onClick}\r\n      type={type}\r\n    >\r\n      {icon && <PixelartIcon className={buttonCss.icon} iconName={icon} />}\r\n      {label}\r\n      {postLabel}\r\n      {children}\r\n      {overlayColor && <div style={{\r\n        position: 'absolute',\r\n        inset: 0,\r\n        backgroundColor: overlayColor,\r\n        opacity: 0.5,\r\n        pointerEvents: 'none'\r\n      }} />}\r\n    </button>\r\n  </SharedHudVars>\r\n}) satisfies FC<Props>\r\n","import { proxy, subscribe } from 'valtio'\r\nimport { useEffect, useMemo, useRef, useState } from 'react'\r\nimport { isStringAllowed, MessageFormatPart } from '../chatUtils'\r\nimport { MessagePart } from './MessageFormatted'\r\nimport './Chat.css'\r\nimport { isIos, reactKeyForMessage } from './utils'\r\nimport Button from './Button'\r\nimport { pixelartIcons } from './PixelartIcon'\r\nimport { useScrollBehavior } from './hooks/useScrollBehavior'\r\n\r\nexport type Message = {\r\n  parts: MessageFormatPart[],\r\n  id: number\r\n  timestamp?: number\r\n}\r\n\r\nconst MessageLine = ({ message, currentPlayerName, chatOpened }: { message: Message, currentPlayerName?: string, chatOpened?: boolean }) => {\r\n  const [fadeState, setFadeState] = useState<'visible' | 'fading' | 'faded'>('visible')\r\n\r\n  useEffect(() => {\r\n    if (window.debugStopChatFade) return\r\n    // Start fading after 5 seconds\r\n    const fadeTimeout = setTimeout(() => {\r\n      setFadeState('fading')\r\n    }, 5000)\r\n\r\n    // Remove after fade animation (3s) completes\r\n    const removeTimeout = setTimeout(() => {\r\n      setFadeState('faded')\r\n    }, 8000)\r\n\r\n    // Cleanup timeouts if component unmounts\r\n    return () => {\r\n      clearTimeout(fadeTimeout)\r\n      clearTimeout(removeTimeout)\r\n    }\r\n  }, []) // Empty deps array since we only want this to run once when message is added\r\n\r\n  const classes = {\r\n    'chat-message': true,\r\n    'chat-message-fading': !chatOpened && fadeState === 'fading',\r\n    'chat-message-faded': !chatOpened && fadeState === 'faded'\r\n  }\r\n\r\n  return <li className={Object.entries(classes).filter(([, val]) => val).map(([name]) => name).join(' ')} data-time={message.timestamp ? new Date(message.timestamp).toLocaleString('en-US', { hour12: false }) : undefined}>\r\n    {message.parts.map((msg, i) => {\r\n      // Check if this is a text part that might contain a mention\r\n      if (typeof msg.text === 'string' && currentPlayerName) {\r\n        const parts = msg.text.split(new RegExp(`(@${currentPlayerName})`, 'i'))\r\n        if (parts.length > 1) {\r\n          return parts.map((txtPart, j) => {\r\n            const part = {\r\n              ...msg,\r\n              text: txtPart\r\n            }\r\n            if (txtPart.toLowerCase() === `@${currentPlayerName}`.toLowerCase()) {\r\n              part.color = '#ffa500'\r\n              part.bold = true\r\n              return <MessagePart key={j} part={part} />\r\n            }\r\n            return <MessagePart key={j} part={part} />\r\n          })\r\n        }\r\n      }\r\n      return <MessagePart key={i} part={msg} />\r\n    })}\r\n  </li>\r\n}\r\n\r\ntype Props = {\r\n  messages: Message[]\r\n  usingTouch: boolean\r\n  opacity?: number\r\n  opened?: boolean\r\n  onClose?: () => void\r\n  sendMessage?: (message: string) => Promise<void> | void\r\n  fetchCompletionItems?: (triggerKind: 'implicit' | 'explicit', completeValue: string, fullValue: string, abortController?: AbortController) => Promise<string[] | void>\r\n  // width?: number\r\n  allowSelection?: boolean\r\n  inputDisabled?: string\r\n  placeholder?: string\r\n  chatVanillaRestrictions?: boolean\r\n  debugChatScroll?: boolean\r\n  getPingComplete?: (value: string) => Promise<string[]>\r\n  currentPlayerName?: string\r\n  spellCheckEnabled?: boolean\r\n  onSpellCheckEnabledChange?: (enabled: boolean) => void\r\n}\r\n\r\nexport const chatInputValueGlobal = proxy({\r\n  value: ''\r\n})\r\n\r\nexport default ({\r\n  messages,\r\n  opacity = 1,\r\n  fetchCompletionItems,\r\n  opened,\r\n  sendMessage,\r\n  onClose,\r\n  usingTouch,\r\n  allowSelection,\r\n  inputDisabled,\r\n  placeholder,\r\n  chatVanillaRestrictions,\r\n  debugChatScroll,\r\n  getPingComplete,\r\n  currentPlayerName,\r\n  spellCheckEnabled = false,\r\n  onSpellCheckEnabledChange\r\n}: Props) => {\r\n  const playerNameValidated = useMemo(() => {\r\n    if (!/^[\\w\\d_]+$/i.test(currentPlayerName ?? '')) return ''\r\n    return currentPlayerName\r\n  }, [currentPlayerName])\r\n\r\n  const sendHistoryRef = useRef(JSON.parse(window.sessionStorage.chatHistory || '[]'))\r\n  const [isInputFocused, setIsInputFocused] = useState(false)\r\n  const [preservedInputValue, setPreservedInputValue] = useState('')\r\n  const [inputKey, setInputKey] = useState(0)\r\n  const pingHistoryRef = useRef(JSON.parse(window.localStorage.pingHistory || '[]'))\r\n\r\n  const [completePadText, setCompletePadText] = useState('')\r\n  const completeRequestValue = useRef('')\r\n  const [completionItemsSource, setCompletionItemsSource] = useState([] as string[])\r\n  const [completionItems, setCompletionItems] = useState([] as string[])\r\n\r\n  const chatInput = useRef<HTMLInputElement>(null!)\r\n  const chatMessages = useRef<HTMLDivElement>(null)\r\n  const chatHistoryPos = useRef(sendHistoryRef.current.length)\r\n  const commandHistoryPos = useRef(0)\r\n  const inputCurrentlyEnteredValue = useRef('')\r\n  const commandHistoryRef = useRef(sendHistoryRef.current.filter((msg: string) => msg.startsWith('/')))\r\n\r\n  const { scrollToBottom, isAtBottom, wasAtBottom, currentlyAtBottom } = useScrollBehavior(chatMessages, { messages, opened })\r\n  const [rightNowAtBottom, setRightNowAtBottom] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (!debugChatScroll) return\r\n    const interval = setInterval(() => {\r\n      setRightNowAtBottom(isAtBottom())\r\n    }, 50)\r\n    return () => clearInterval(interval)\r\n  }, [debugChatScroll])\r\n\r\n  const setSendHistory = (newHistory: string[]) => {\r\n    sendHistoryRef.current = newHistory\r\n    window.sessionStorage.chatHistory = JSON.stringify(newHistory)\r\n    chatHistoryPos.current = newHistory.length\r\n    // Update command history (only messages starting with /)\r\n    commandHistoryRef.current = newHistory.filter((msg: string) => msg.startsWith('/'))\r\n    commandHistoryPos.current = commandHistoryRef.current.length\r\n  }\r\n\r\n  const acceptComplete = (item: string) => {\r\n    const base = completeRequestValue.current === '/' ? '' : getCompleteValue()\r\n    updateInputValue(base + item)\r\n    // Record ping completion in history\r\n    if (item.startsWith('@')) {\r\n      const newHistory = [item, ...pingHistoryRef.current.filter((x: string) => x !== item)].slice(0, 10)\r\n      pingHistoryRef.current = newHistory\r\n      // todo use appStorage\r\n      window.localStorage.pingHistory = JSON.stringify(newHistory)\r\n    }\r\n    chatInput.current.focus()\r\n  }\r\n\r\n  const updateInputValue = (newValue: string) => {\r\n    chatInput.current.value = newValue\r\n    onMainInputChange()\r\n    setTimeout(() => {\r\n      chatInput.current.setSelectionRange(newValue.length, newValue.length)\r\n    }, 0)\r\n  }\r\n\r\n  const handleArrowUp = () => {\r\n    if (chatHistoryPos.current === 0) return\r\n    if (chatHistoryPos.current === sendHistoryRef.current.length) { // started navigating history\r\n      inputCurrentlyEnteredValue.current = chatInput.current.value\r\n    }\r\n    chatHistoryPos.current--\r\n    updateInputValue(sendHistoryRef.current[chatHistoryPos.current] || '')\r\n  }\r\n\r\n  const handleArrowDown = () => {\r\n    if (chatHistoryPos.current === sendHistoryRef.current.length) return\r\n    chatHistoryPos.current++\r\n    updateInputValue(sendHistoryRef.current[chatHistoryPos.current] || inputCurrentlyEnteredValue.current || '')\r\n  }\r\n\r\n  const handleCommandArrowUp = () => {\r\n    if (commandHistoryPos.current === 0 || commandHistoryRef.current.length === 0) return\r\n    if (commandHistoryPos.current === commandHistoryRef.current.length) { // started navigating command history\r\n      inputCurrentlyEnteredValue.current = chatInput.current.value\r\n    }\r\n    commandHistoryPos.current--\r\n    updateInputValue(commandHistoryRef.current[commandHistoryPos.current] || '')\r\n  }\r\n\r\n  const handleCommandArrowDown = () => {\r\n    if (commandHistoryPos.current === commandHistoryRef.current.length) return\r\n    commandHistoryPos.current++\r\n    updateInputValue(commandHistoryRef.current[commandHistoryPos.current] || inputCurrentlyEnteredValue.current || '')\r\n  }\r\n\r\n  const auxInputFocus = (direction: 'up' | 'down') => {\r\n    chatInput.current.focus()\r\n    if (direction === 'up') {\r\n      handleArrowUp()\r\n    } else {\r\n      handleArrowDown()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // todo focus input on any keypress except tab\r\n  }, [])\r\n\r\n  const resetCompletionItems = () => {\r\n    setCompletionItemsSource([])\r\n    setCompletionItems([])\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (opened) {\r\n      updateInputValue(chatInputValueGlobal.value)\r\n      chatInputValueGlobal.value = ''\r\n      chatHistoryPos.current = sendHistoryRef.current.length\r\n      commandHistoryPos.current = commandHistoryRef.current.length\r\n      if (!usingTouch) {\r\n        chatInput.current.focus()\r\n      }\r\n\r\n      // Add keyboard event listener for letter keys and paste\r\n      const handleKeyDown = (e: KeyboardEvent) => {\r\n        if (['input', 'textarea', 'select'].includes(document.activeElement?.tagName.toLowerCase() ?? '')) return\r\n        // Check if it's a single character key (works with any layout) without modifiers except shift\r\n        const isSingleChar = e.key.length === 1 && !e.ctrlKey && !e.altKey && !e.metaKey\r\n        // Check if it's paste command\r\n        const isPaste = e.code === 'KeyV' && (e.ctrlKey || e.metaKey)\r\n\r\n        if ((isSingleChar || isPaste) && document.activeElement !== chatInput.current) {\r\n          chatInput.current.focus()\r\n        }\r\n      }\r\n\r\n      window.addEventListener('keydown', handleKeyDown)\r\n      const unsubscribeValtio = subscribe(chatInputValueGlobal, () => {\r\n        if (!chatInputValueGlobal.value) return\r\n        updateInputValue(chatInputValueGlobal.value)\r\n        chatInputValueGlobal.value = ''\r\n        chatInput.current.focus()\r\n      })\r\n\r\n      return () => {\r\n        window.removeEventListener('keydown', handleKeyDown)\r\n        unsubscribeValtio()\r\n      }\r\n    }\r\n  }, [opened])\r\n\r\n  useMemo(() => {\r\n    if (opened) {\r\n      completeRequestValue.current = ''\r\n      resetCompletionItems()\r\n    } else {\r\n      setPreservedInputValue('')\r\n    }\r\n  }, [opened])\r\n\r\n  const onMainInputChange = () => {\r\n    const lastWord = chatInput.current.value.slice(0, chatInput.current.selectionEnd ?? chatInput.current.value.length).split(' ').at(-1)!\r\n    const isCommand = chatInput.current.value.startsWith('/')\r\n\r\n    if (lastWord.startsWith('@') && getPingComplete && !isCommand) {\r\n      setCompletePadText(lastWord)\r\n      void fetchPingCompletions(true, lastWord.slice(1))\r\n      return\r\n    }\r\n\r\n    const completeValue = getCompleteValue()\r\n    setCompletePadText(completeValue === '/' ? '' : completeValue)\r\n    // not sure if enabling would be useful at all (maybe make as a setting in the future?)\r\n    // setSpellCheckEnabled(!chatInput.current.value.startsWith('/'))\r\n    if (completeRequestValue.current === completeValue) {\r\n      updateFilteredCompleteItems(completionItemsSource)\r\n      return\r\n    }\r\n\r\n    if (completeValue.startsWith('/')) {\r\n      void fetchCompletions(true)\r\n    } else {\r\n      resetCompletionItems()\r\n    }\r\n    completeRequestValue.current = completeValue\r\n  }\r\n\r\n  const fetchCompletions = async (implicit: boolean, inputValue = chatInput.current.value) => {\r\n    const completeValue = getCompleteValue(inputValue)\r\n    completeRequestValue.current = completeValue\r\n    resetCompletionItems()\r\n    const newItems = await fetchCompletionItems?.(implicit ? 'implicit' : 'explicit', completeValue, inputValue) ?? []\r\n    if (completeValue !== completeRequestValue.current) return\r\n    setCompletionItemsSource(newItems)\r\n    updateFilteredCompleteItems(newItems)\r\n  }\r\n\r\n  const fetchPingCompletions = async (implicit: boolean, inputValue: string) => {\r\n    completeRequestValue.current = inputValue\r\n    resetCompletionItems()\r\n    const newItems = await getPingComplete?.(inputValue) ?? []\r\n    if (inputValue !== completeRequestValue.current) return\r\n    // Sort items by ping history\r\n    const sortedItems = [...newItems].sort((a, b) => {\r\n      const aIndex = pingHistoryRef.current.indexOf(a)\r\n      const bIndex = pingHistoryRef.current.indexOf(b)\r\n      if (aIndex === -1 && bIndex === -1) return 0\r\n      if (aIndex === -1) return 1\r\n      if (bIndex === -1) return -1\r\n      return aIndex - bIndex\r\n    })\r\n    setCompletionItemsSource(sortedItems)\r\n    updateFilteredCompleteItems(sortedItems)\r\n  }\r\n\r\n  const updateFilteredCompleteItems = (sourceItems: string[] | Array<{ match: string, toolip: string }>) => {\r\n    const newCompleteItems = sourceItems\r\n      .map((item): string => (typeof item === 'string' ? item : item.match))\r\n      .filter(item => {\r\n        // this regex is imporatnt is it controls the word matching\r\n        // const compareableParts = item.split(/[[\\]{},_:]/)\r\n        const lastWord = chatInput.current.value.slice(0, chatInput.current.selectionEnd ?? chatInput.current.value.length).split(' ').at(-1)!\r\n        if (lastWord.startsWith('@')) {\r\n          return item.toLowerCase().includes(lastWord.slice(1).toLowerCase())\r\n        }\r\n        return item.includes(lastWord)\r\n        // return [item, ...compareableParts].some(compareablePart => compareablePart.startsWith(lastWord))\r\n      })\r\n    setCompletionItems(newCompleteItems)\r\n  }\r\n\r\n  const getDefaultCompleteValue = () => {\r\n    const raw = chatInput.current.value\r\n    return raw.slice(0, chatInput.current.selectionEnd ?? raw.length)\r\n  }\r\n\r\n  const getCompleteValue = (value = getDefaultCompleteValue()) => {\r\n    const valueParts = value.split(' ')\r\n    const lastLength = valueParts.at(-1)!.length\r\n    const completeValue = lastLength ? value.slice(0, -lastLength) : value\r\n    if (valueParts.length === 1 && value.startsWith('/')) return '/'\r\n    return completeValue\r\n  }\r\n\r\n  const handleSlashCommand = () => {\r\n    remountInput('/')\r\n  }\r\n\r\n  const handleAcceptFirstCompletion = () => {\r\n    if (completionItems.length > 0) {\r\n      acceptComplete(completionItems[0])\r\n    }\r\n  }\r\n\r\n  const remountInput = (newValue?: string) => {\r\n    if (newValue !== undefined) {\r\n      setPreservedInputValue(newValue)\r\n    }\r\n    setInputKey(k => k + 1)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (preservedInputValue && chatInput.current) {\r\n      chatInput.current.focus()\r\n    }\r\n  }, [inputKey]) // Changed from spellCheckEnabled to inputKey\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`chat-wrapper chat-messages-wrapper ${usingTouch ? 'display-mobile' : ''} ${opened ? 'chat-opened' : ''}`} style={{\r\n          userSelect: opened && allowSelection ? 'text' : undefined,\r\n        }}\r\n      >\r\n        {opacity && <div ref={chatMessages} className={`chat ${opened ? 'opened' : ''}`} id=\"chat-messages\" style={{ opacity }}>\r\n          {debugChatScroll && (\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                top: 5,\r\n                left: 5,\r\n                display: 'flex',\r\n                gap: 4,\r\n                zIndex: 100,\r\n              }}\r\n            >\r\n              <div\r\n                title=\"Right now is at bottom (updated every 50ms)\"\r\n                style={{\r\n                  width: 12,\r\n                  height: 12,\r\n                  backgroundColor: rightNowAtBottom ? '#00ff00' : '#ff0000',\r\n                  border: '1px solid #fff',\r\n                }}\r\n              />\r\n              <div\r\n                title=\"Currently at bottom\"\r\n                style={{\r\n                  width: 12,\r\n                  height: 12,\r\n                  backgroundColor: currentlyAtBottom ? '#00ff00' : '#ff0000',\r\n                  border: '1px solid #fff',\r\n                }}\r\n              />\r\n              <div\r\n                title=\"Was at bottom\"\r\n                style={{\r\n                  width: 12,\r\n                  height: 12,\r\n                  backgroundColor: wasAtBottom() ? '#00ff00' : '#ff0000',\r\n                  border: '1px solid #fff',\r\n                }}\r\n              />\r\n              <div\r\n                title=\"Chat opened\"\r\n                style={{\r\n                  width: 12,\r\n                  height: 12,\r\n                  backgroundColor: opened ? '#00ff00' : '#ff0000',\r\n                  border: '1px solid #fff',\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n          {messages.map((m) => (\r\n            <MessageLine key={reactKeyForMessage(m)} message={m} currentPlayerName={playerNameValidated} chatOpened={opened} />\r\n          ))}\r\n        </div> || undefined}\r\n      </div>\r\n\r\n      <div className={`chat-wrapper chat-input-wrapper ${usingTouch ? 'input-mobile' : ''}`} hidden={!opened}>\r\n        {usingTouch && (\r\n          <>\r\n            <Button\r\n              icon={pixelartIcons.close}\r\n              onClick={() => onClose?.()}\r\n              style={{\r\n                width: 20,\r\n                flexShrink: 0,\r\n              }}\r\n            />\r\n\r\n            {(chatInput.current?.value && !chatInput.current.value.startsWith('/')) ? (\r\n              // TOGGLE SPELL CHECK\r\n              <Button\r\n                style={{\r\n                  width: 20,\r\n                  flexShrink: 0,\r\n                }}\r\n                overlayColor={spellCheckEnabled ? '#00ff00' : '#ff0000'}\r\n                icon={pixelartIcons['text-wrap']}\r\n                onClick={() => {\r\n                  setPreservedInputValue(chatInput.current?.value || '')\r\n                  onSpellCheckEnabledChange?.(!spellCheckEnabled)\r\n                  remountInput()\r\n                }}\r\n              />\r\n            ) : (\r\n              // SLASH COMMAND\r\n              <Button\r\n                style={{\r\n                  width: 20,\r\n                  flexShrink: 0,\r\n                }}\r\n                label={chatInput.current?.value ? undefined : '/'}\r\n                icon={chatInput.current?.value ? pixelartIcons['arrow-right'] : undefined}\r\n                onClick={() => {\r\n                  const inputValue = chatInput.current.value\r\n                  if (!inputValue) {\r\n                    handleSlashCommand()\r\n                  } else if (completionItems.length > 0) {\r\n                    handleAcceptFirstCompletion()\r\n                  }\r\n                }}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        <div className=\"chat-input\">\r\n          {isInputFocused && completionItems?.length ? (\r\n            <div className=\"chat-completions\">\r\n              <div className=\"chat-completions-pad-text\">{completePadText}</div>\r\n              <div className=\"chat-completions-items\">\r\n                {completionItems.map((item) => (\r\n                  <div\r\n                    key={item}\r\n                    onMouseDown={(e) => {\r\n                      e.preventDefault() // Prevent blur before click\r\n                      acceptComplete(item)\r\n                    }}\r\n                  >\r\n                    {item}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n          <form onSubmit={async (e) => {\r\n            e.preventDefault()\r\n            const message = chatInput.current.value\r\n            if (message) {\r\n              setSendHistory([...sendHistoryRef.current, message])\r\n              onClose?.()\r\n              await sendMessage?.(message)\r\n              // Always scroll to bottom after sending a message\r\n              scrollToBottom()\r\n            }\r\n          }}\r\n          >\r\n            {isIos && <input\r\n              value=''\r\n              type=\"text\"\r\n              className=\"chat-mobile-input-hidden chat-mobile-input-hidden-up\"\r\n              id=\"chatinput-next-command\"\r\n              spellCheck={false}\r\n              autoComplete=\"off\"\r\n              onFocus={() => auxInputFocus('up')}\r\n              onChange={() => { }}\r\n            />}\r\n            <input\r\n              maxLength={chatVanillaRestrictions ? 256 : undefined}\r\n              defaultValue={preservedInputValue}\r\n              // ios doesn't support toggling autoCorrect on the fly so we need to re-create the input\r\n              key={`${inputKey}`}\r\n              autoCapitalize={preservedInputValue ? 'off' : 'on'}\r\n              ref={chatInput}\r\n              type=\"text\"\r\n              className=\"chat-input\"\r\n              id=\"chatinput\"\r\n              spellCheck={spellCheckEnabled}\r\n              autoCorrect={spellCheckEnabled ? 'on' : 'off'}\r\n              autoComplete=\"off\"\r\n              aria-autocomplete=\"both\"\r\n              onChange={onMainInputChange}\r\n              disabled={!!inputDisabled}\r\n              placeholder={inputDisabled || placeholder}\r\n              onFocus={() => setIsInputFocused(true)}\r\n              onBlur={() => setIsInputFocused(false)}\r\n              onKeyDown={(e) => {\r\n                if (e.code === 'ArrowUp') {\r\n                  if (e.altKey) {\r\n                    handleCommandArrowUp()\r\n                    e.preventDefault()\r\n                  } else {\r\n                    handleArrowUp()\r\n                  }\r\n                } else if (e.code === 'ArrowDown') {\r\n                  if (e.altKey) {\r\n                    handleCommandArrowDown()\r\n                    e.preventDefault()\r\n                  } else {\r\n                    handleArrowDown()\r\n                  }\r\n                }\r\n                if (e.code === 'Tab') {\r\n                  if (completionItemsSource.length) {\r\n                    if (completionItems.length) {\r\n                      acceptComplete(completionItems[0])\r\n                    }\r\n                  } else {\r\n                    void fetchCompletions(false)\r\n                  }\r\n                  e.preventDefault()\r\n                }\r\n                if (e.code === 'Space') {\r\n                  resetCompletionItems()\r\n                  if (chatInput.current.value.startsWith('/')) {\r\n                    // alternative we could just simply use keyup, but only with keydown we can display suggestions popup as soon as possible\r\n                    void fetchCompletions(true, getCompleteValue(getDefaultCompleteValue() + ' '))\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n            {isIos && <input\r\n              value=''\r\n              type=\"text\"\r\n              className=\"chat-mobile-input-hidden chat-mobile-input-hidden-down\"\r\n              id=\"chatinput-prev-command\"\r\n              spellCheck={false}\r\n              autoComplete=\"off\"\r\n              onFocus={() => auxInputFocus('down')}\r\n              onChange={() => { }}\r\n            />}\r\n            {/* for some reason this is needed to make Enter work on android chrome */}\r\n            <button type='submit' className=\"chat-submit-button\" />\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\nimport { proxy, useSnapshot } from 'valtio'\r\nimport { isInRealGameSession, pointerLock } from '../utils'\r\nimport { activeModalStack, miscUiState } from '../globalState'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport { useUsingTouch } from './utilsApp'\r\n\r\nexport const displayHintsState = proxy({\r\n  captureMouseHint: false\r\n})\r\n\r\nexport default () => {\r\n  const { captureMouseHint } = useSnapshot(displayHintsState)\r\n  const { usingGamepadInput } = useSnapshot(miscUiState)\r\n  const usingTouch = useUsingTouch()\r\n  const acitveModals = useSnapshot(activeModalStack).length > 0\r\n\r\n  const inRealGameSession = isInRealGameSession()\r\n\r\n  useEffect(() => {\r\n    const listener = () => {\r\n      if (pointerLock.hasPointerLock) {\r\n        displayHintsState.captureMouseHint = false\r\n      }\r\n    }\r\n    document.addEventListener('pointerlockchange', listener)\r\n\r\n    return () => {\r\n      document.removeEventListener('pointerlockchange', listener)\r\n    }\r\n  }, [])\r\n\r\n  return <div style={{\r\n    // below crosshair that is in center of screen\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    color: 'white',\r\n    fontSize: '10px',\r\n    whiteSpace: 'nowrap',\r\n    fontWeight: 'bold',\r\n    marginTop: '-16px',\r\n    pointerEvents: 'none',\r\n    textShadow: '0 0 1px black'\r\n  }}>\r\n    {captureMouseHint && !usingTouch && !usingGamepadInput && !acitveModals && inRealGameSession && <div style={{\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '10px',\r\n    }}>\r\n      <PixelartIcon iconName={pixelartIcons['sun-alt']} />\r\n      <div>{translate('Click to capture mouse')}</div>\r\n    </div>}\r\n  </div>\r\n}\r\n","import React, { CSSProperties, useEffect, useMemo, useRef, useState } from 'react'\r\nimport { isMobile } from 'renderer/viewer/lib/simpleUtils'\r\nimport styles from './input.module.css'\r\n\r\ninterface Props extends Omit<React.ComponentProps<'input'>, 'width'> {\r\n  rootStyles?: React.CSSProperties\r\n  autoFocus?: boolean\r\n  inputRef?: React.RefObject<HTMLInputElement>\r\n  validateInput?: (value: string) => CSSProperties | undefined\r\n  width?: number\r\n}\r\n\r\nconst Input = ({ autoFocus, rootStyles, inputRef, validateInput, defaultValue, width, ...inputProps }: Props) => {\r\n  if (width) rootStyles = { ...rootStyles, width }\r\n\r\n  const ref = useRef<HTMLInputElement>(null!)\r\n  const [validationStyle, setValidationStyle] = useState<CSSProperties>({})\r\n  const [value, setValue] = useState(defaultValue ?? '')\r\n\r\n  useEffect(() => {\r\n    setValue(inputProps.value === '' || inputProps.value ? inputProps.value : value)\r\n  }, [inputProps.value])\r\n\r\n  useEffect(() => {\r\n    if (inputRef) (inputRef as any).current = ref.current\r\n    if (!autoFocus || isMobile()) return // Don't make screen keyboard popup on mobile\r\n    ref.current.focus()\r\n  }, [])\r\n\r\n\r\n  useEffect(() => {\r\n    setValidationStyle(validateInput?.(value as any) ?? {})\r\n  }, [value, validateInput])\r\n\r\n  return <div id='input-container' className={styles.container} style={rootStyles}>\r\n    <input\r\n      ref={ref}\r\n      autoComplete='off'\r\n      autoCapitalize='off'\r\n      autoCorrect='off'\r\n      autoSave='off'\r\n      spellCheck='false'\r\n      style={{ ...validationStyle }}\r\n      {...inputProps}\r\n      className={styles.input + ' ' + (inputProps.className ?? '')}\r\n      value={value}\r\n      onChange={(e) => {\r\n        setValue(e.target.value)\r\n        inputProps.onChange?.(e)\r\n      }}\r\n    />\r\n  </div>\r\n}\r\n\r\nexport default Input\r\n\r\nexport const INPUT_LABEL_WIDTH = 190\r\n\r\nexport const InputWithLabel = ({ label, span, ...props }: React.ComponentProps<typeof Input> & { label, span? }) => {\r\n  return <div style={{\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gridRow: span ? 'span 2 / span 2' : undefined,\r\n  }}\r\n  >\r\n    <label style={{ fontSize: 12, marginBottom: 1, color: 'lightgray' }}>{label}</label>\r\n    <Input rootStyles={{ width: INPUT_LABEL_WIDTH }} {...props} />\r\n  </div>\r\n}\r\n","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"container-GXglqr\",\"input\":\"input-Mraw77\"};","import { useEffect, useState } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { proxy, useSnapshot } from 'valtio'\r\n\r\nexport const loadingTimerState = proxy({\r\n  start: 0,\r\n  loading: false,\r\n  total: '0.00',\r\n\r\n  networkOnlyStart: 0,\r\n  networkTimeTotal: '0.0'\r\n})\r\n\r\ncustomEvents.on('gameLoaded', () => {\r\n  loadingTimerState.loading = false\r\n})\r\n\r\nexport default () => {\r\n  // const time = useSnapshot(timerState).start\r\n  const { networkTimeTotal, total } = useSnapshot(loadingTimerState)\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if (!loadingTimerState.loading) return\r\n      if (loadingTimerState.networkOnlyStart) {\r\n        loadingTimerState.networkTimeTotal = ((Date.now() - loadingTimerState.networkOnlyStart) / 1000).toFixed(2)\r\n      } else {\r\n        loadingTimerState.total = ((Date.now() - loadingTimerState.start) / 1000).toFixed(2)\r\n      }\r\n    }, 100)\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  return <Portal to={document.getElementById('ui-root')!}>\r\n    <div style={{\r\n      position: 'absolute',\r\n      left: 0,\r\n      bottom: 0,\r\n      color: 'gray',\r\n      fontSize: '0.6em',\r\n      paddingLeft: 'calc(env(safe-area-inset-left) / 2)'\r\n    }}>\r\n      {total}/{networkTimeTotal}\r\n    </div>\r\n  </Portal>\r\n}\r\n\r\nconst Portal = ({ children, to = document.body }) => {\r\n  return createPortal(children, to)\r\n}\r\n","import { ComponentProps } from 'react'\r\nimport { render } from '@xmcl/text-component'\r\nimport { noCase } from 'change-case'\r\nimport mojangson from 'mojangson'\r\nimport { openURL } from 'renderer/viewer/lib/simpleUtils'\r\nimport { MessageFormatOptions, MessageFormatPart } from '../chatUtils'\r\nimport { chatInputValueGlobal } from './Chat'\r\nimport './MessageFormatted.css'\r\nimport { showOptionsModal } from './SelectOption'\r\n\r\nconst hoverItemToText = (hoverEvent: MessageFormatPart['hoverEvent']) => {\r\n  try {\r\n    if (!hoverEvent) return undefined\r\n    const contents = hoverEvent['contents'] ?? hoverEvent.value\r\n    if (typeof contents.text === 'string' && contents.text.startsWith('{')) {\r\n      Object.assign(contents, mojangson.simplify(mojangson.parse(contents.text)))\r\n    }\r\n    if (typeof contents === 'string') return contents\r\n    // if (hoverEvent.action === 'show_text') {\r\n    //   return contents\r\n    // }\r\n    if (hoverEvent.action === 'show_item') {\r\n      return contents.id\r\n    }\r\n    if (hoverEvent.action === 'show_entity') {\r\n      let str = noCase(contents.type.replace('minecraft:', ''))\r\n      if (contents.name) str += `: ${contents.name.text}`\r\n      return str\r\n    }\r\n  } catch (err) {\r\n    // todo report critical error\r\n    reportError?.('Failed to parse message hover' + err.message)\r\n    return undefined\r\n  }\r\n}\r\n\r\nconst clickEventToProps = (clickEvent: MessageFormatPart['clickEvent']) => {\r\n  if (!clickEvent) return\r\n  if (clickEvent.action === 'run_command' || clickEvent.action === 'suggest_command') {\r\n    return {\r\n      onClick () {\r\n        chatInputValueGlobal.value = clickEvent.value\r\n      }\r\n    }\r\n  }\r\n  if (clickEvent.action === 'open_url' || clickEvent.action === 'open_file') {\r\n    return {\r\n      async onClick () {\r\n        const promptMessageText = `Open \"${clickEvent.value}\"?`\r\n        const confirm = await showOptionsModal(promptMessageText, ['Open', 'Copy'], {\r\n          cancel: true\r\n        })\r\n        if (confirm === 'Open') {\r\n          openURL(clickEvent.value)\r\n        } else if (confirm === 'Copy') {\r\n          void navigator.clipboard.writeText(clickEvent.value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  if (clickEvent.action === 'copy_to_clipboard') {\r\n    return {\r\n      onClick () {\r\n        void navigator.clipboard.writeText(clickEvent.value)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const MessagePart = ({ part, formatOptions, ...props }: { part: MessageFormatPart, formatOptions?: MessageFormatOptions } & ComponentProps<'span'>) => {\r\n\r\n  const { color: _color, italic, bold, underlined, strikethrough, text, clickEvent, hoverEvent, obfuscated } = part\r\n  const color = _color ?? 'white'\r\n\r\n  const clickProps = clickEventToProps(clickEvent)\r\n  const hoverMessageRaw = hoverItemToText(hoverEvent)\r\n  const hoverItemText = hoverMessageRaw && typeof hoverMessageRaw !== 'string' ? render(hoverMessageRaw).children.map(child => child.component.text).join('') : hoverMessageRaw\r\n\r\n  const applyStyles = [\r\n    clickProps && messageFormatStylesMap.clickEvent,\r\n    colorF(color.toLowerCase()) + ((formatOptions?.doShadow ?? true) ? `; text-shadow: 1px 1px 0px ${getColorShadow(colorF(color.toLowerCase()).replace('color:', ''))}` : ''),\r\n    italic && messageFormatStylesMap.italic,\r\n    bold && messageFormatStylesMap.bold,\r\n    italic && messageFormatStylesMap.italic,\r\n    underlined && messageFormatStylesMap.underlined,\r\n    strikethrough && messageFormatStylesMap.strikethrough,\r\n    obfuscated && messageFormatStylesMap.obfuscated\r\n  ].filter(a => a !== false && a !== undefined).filter(Boolean)\r\n\r\n  return <span title={hoverItemText} style={parseInlineStyle(applyStyles.join(';'))} {...clickProps} {...props}>{text}</span>\r\n}\r\n\r\nexport default ({ parts, className, formatOptions }: { parts: readonly MessageFormatPart[], className?: string, formatOptions?: MessageFormatOptions }) => {\r\n  return (\r\n    <span className={`formatted-message ${className ?? ''}`}>\r\n      {parts.map((part, i) => <MessagePart key={i} part={part} formatOptions={formatOptions} />)}\r\n    </span>\r\n  )\r\n}\r\n\r\nconst colorF = (color) => {\r\n  return color.trim().startsWith('#') ? `color:${color}` : messageFormatStylesMap[color] ?? undefined\r\n}\r\n\r\nexport function getColorShadow (hex, dim = 0.25) {\r\n  const color = parseInt(hex.replace('#', ''), 16)\r\n\r\n  const r = Math.trunc((color >> 16 & 0xFF) * dim)\r\n  const g = Math.trunc((color >> 8 & 0xFF) * dim)\r\n  const b = Math.trunc((color & 0xFF) * dim)\r\n\r\n  const f = (c) => ('00' + c.toString(16)).slice(-2)\r\n  return `#${f(r)}${f(g)}${f(b)}`\r\n}\r\n\r\nexport function parseInlineStyle (style: string): Record<string, any> {\r\n  const obj: Record<string, any> = {}\r\n  for (const rule of style.split(';')) {\r\n    const [prop, value] = rule.split(':')\r\n    const cssInJsProp = prop.trim().replaceAll(/-./g, (x) => x.toUpperCase()[1])\r\n    obj[cssInJsProp] = value.trim()\r\n  }\r\n  return obj\r\n}\r\n\r\nexport const messageFormatStylesMap = {\r\n  black: 'color:color(display-p3 0 0 0)',\r\n  dark_blue: 'color:color(display-p3 0 0 0.6667)',\r\n  dark_green: 'color:color(display-p3 0 0.6667 0)',\r\n  dark_aqua: 'color:color(display-p3 0 0.6667 0.6667)',\r\n  dark_red: 'color:color(display-p3 0.6667 0 0)',\r\n  dark_purple: 'color:color(display-p3 0.6667 0 0.6667)',\r\n  gold: 'color:color(display-p3 1 0.6667 0)',\r\n  gray: 'color:color(display-p3 0.6667 0.6667 0.6667)',\r\n  dark_gray: 'color:color(display-p3 0.3333 0.3333 0.3333)',\r\n  blue: 'color:color(display-p3 0.3333 0.3333 1)',\r\n  green: 'color:color(display-p3 0.3333 1 0.3333)',\r\n  aqua: 'color:color(display-p3 0.3333 1 1)',\r\n  red: 'color:color(display-p3 1 0.3333 0.3333)',\r\n  light_purple: 'color:color(display-p3 1 0.3333 1)',\r\n  yellow: 'color:color(display-p3 1 1 0.3333)',\r\n  white: 'color:color(display-p3 1 1 1)',\r\n  bold: 'font-weight:900',\r\n  strikethrough: 'text-decoration:line-through',\r\n  underlined: 'text-decoration:underline',\r\n  italic: 'font-style:italic',\r\n  obfuscated: 'filter:blur(2px)',\r\n  clickEvent: 'cursor:pointer',\r\n}\r\n","import { useMemo } from 'react'\r\nimport { fromFormattedString } from '@xmcl/text-component'\r\nimport { ErrorBoundary } from '@zardoy/react-util'\r\nimport { formatMessage, MessageFormatOptions } from '../chatUtils'\r\nimport MessageFormatted from './MessageFormatted'\r\n\r\n/** like MessageFormatted, but receives raw string or json instead, uses window.loadedData */\r\nexport default ({ message, fallbackColor, className, formatOptions }: {\r\n  message: string | Record<string, any> | null,\r\n  fallbackColor?: string,\r\n  className?: string\r\n  formatOptions?: MessageFormatOptions\r\n}) => {\r\n  const messageJson = useMemo(() => {\r\n    if (!message) return null\r\n    try {\r\n      const texts = formatMessage(typeof message === 'string' ? fromFormattedString(message) : message)\r\n      return texts.map(text => {\r\n        return {\r\n          ...text,\r\n          color: text.color ?? fallbackColor,\r\n        }\r\n      })\r\n    } catch (err) {\r\n      console.error(err) // todo ensure its being logged\r\n      return null\r\n    }\r\n  }, [message])\r\n\r\n  return messageJson ? <ErrorBoundary renderError={(error) => {\r\n    console.error(error)\r\n    return <div>[text component crashed]</div>\r\n  }}>\r\n    <MessageFormatted parts={messageJson} className={className} formatOptions={formatOptions} />\r\n  </ErrorBoundary> : null\r\n}\r\n","import { motion, AnimatePresence } from 'framer-motion'\r\nimport PixelartIcon, { pixelartIcons } from './PixelartIcon'\r\nimport { useUsingTouch } from './utilsApp'\r\n\r\nconst duration = 0.2\r\n\r\n// save pass: login\r\n\r\nconst toastHeight = 34\r\n\r\ninterface NotificationProps {\r\n  open: boolean\r\n  message: string\r\n  type?: 'message' | 'error' | 'progress'\r\n  subMessage?: string\r\n  icon?: string\r\n  action?: () => void\r\n  topPosition?: number\r\n\r\n  currentProgress?: number\r\n  totalProgress?: number\r\n}\r\n\r\nexport default ({\r\n  type = 'message',\r\n  message,\r\n  subMessage = '',\r\n  open,\r\n  icon = '',\r\n  action = undefined as (() => void) | undefined,\r\n  topPosition = 0,\r\n  currentProgress,\r\n  totalProgress,\r\n}: NotificationProps) => {\r\n  const isUsingTouch = useUsingTouch()\r\n  const isError = type === 'error'\r\n  icon ||= isError ? 'alert' : 'message'\r\n\r\n  const isLoader = type === 'progress'\r\n\r\n  const top = (topPosition * toastHeight) + (isUsingTouch ? 18 : 0) // add space for mobile top buttons\r\n  return <AnimatePresence>\r\n    {open && (\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 0 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        exit={{ opacity: 0, y: '-100%' }}\r\n        transition={{ duration }}\r\n        className={`app-notification ${isError ? 'error-notification' : ''}`}\r\n        onClick={action}\r\n        style={{\r\n          position: 'fixed',\r\n          top,\r\n          right: 0,\r\n          width: type === 'progress' ? '180px' : undefined,\r\n          scale: type === 'progress' ? undefined : 0.9,\r\n          transformOrigin: type === 'progress' ? undefined : 'right',\r\n          whiteSpace: 'nowrap',\r\n          fontSize: '9px',\r\n          display: 'flex',\r\n          gap: 4,\r\n          alignItems: 'center',\r\n          padding: '4px 5px',\r\n          background: isError ? 'rgba(255, 0, 0, 0.7)' : 'rgba(0, 0, 0, 0.7)',\r\n          borderRadius: top === 0 ? '0 0 0 5px' : '5px',\r\n          pointerEvents: action ? 'auto' : 'none',\r\n          zIndex: isLoader ? 10 : 1200,\r\n        }}\r\n      >\r\n        <PixelartIcon\r\n          iconName={icon}\r\n          styles={{\r\n            fontSize: isLoader ? 15 : 12,\r\n            animation: isLoader ? 'rotation 6s linear infinite' : 'none',\r\n          }}\r\n        />\r\n        <div style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          width: '100%',\r\n        }}>\r\n          <div style={{\r\n            whiteSpace: 'normal',\r\n          }}>\r\n            {translate(message)}\r\n          </div>\r\n          <div style={{\r\n            fontSize: '7px',\r\n            whiteSpace: 'nowrap',\r\n            color: 'lightgray',\r\n            marginTop: 3,\r\n          }}>\r\n            {translate(subMessage)}\r\n          </div>\r\n          {currentProgress !== undefined && totalProgress !== undefined && (\r\n            <div style={{\r\n              width: '100%',\r\n              height: '2px',\r\n              background: 'rgba(128, 128, 128, 0.5)',\r\n              marginTop: '2px',\r\n              overflow: 'hidden',\r\n            }}>\r\n              <div style={{\r\n                width: `${Math.min(100, (totalProgress ? currentProgress / totalProgress : 0) * 100)}%`,\r\n                height: '100%',\r\n                background: 'white',\r\n                transition: 'width 0.2s ease-out',\r\n              }} />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </motion.div>\r\n    )}\r\n  </AnimatePresence>\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { proxy, useSnapshot } from 'valtio'\r\nimport { AnimatePresence, motion } from 'framer-motion'\r\nimport { useAppScale } from '../scaleInterface'\r\nimport Notification from './Notification'\r\nimport { pixelartIcons } from './PixelartIcon'\r\n\r\ntype NotificationType = React.ComponentProps<typeof Notification> & {\r\n  autoHide: boolean\r\n  id: string\r\n}\r\n\r\n// todo stacking\r\nexport const notificationProxy = proxy({\r\n  message: '',\r\n  open: false,\r\n  type: 'message',\r\n  subMessage: '',\r\n  icon: '',\r\n  autoHide: true,\r\n  id: '',\r\n} satisfies NotificationType as NotificationType)\r\n\r\nexport const progressNotificationsProxy = proxy({\r\n  loaders: [] as Array<{\r\n    id: string\r\n    message: string\r\n    subMessage?: string\r\n    current?: number\r\n    total?: number\r\n    priority?: number\r\n  }>,\r\n})\r\n\r\nexport const setNotificationProgress = (id: string, newProps: {\r\n  current?: number\r\n  total?: number\r\n  message?: string\r\n  subMessage?: string\r\n  delete?: boolean\r\n  priority?: number\r\n}) => {\r\n  const loaderExisting = progressNotificationsProxy.loaders.find((loader) => loader.id === id)\r\n  let loader = loaderExisting\r\n  if (!loader) {\r\n    loader = {\r\n      id,\r\n      message: '',\r\n      priority: newProps.priority,\r\n    }\r\n  }\r\n  if (newProps.current !== undefined) loader.current = newProps.current\r\n  if (newProps.total !== undefined) loader.total = newProps.total\r\n  if (newProps.message !== undefined) loader.message = newProps.message\r\n  if (newProps.subMessage !== undefined) loader.subMessage = newProps.subMessage\r\n  if (!loaderExisting) {\r\n    progressNotificationsProxy.loaders.push(loader)\r\n  }\r\n  if (newProps.delete) {\r\n    progressNotificationsProxy.loaders = progressNotificationsProxy.loaders.filter((loader) => loader.id !== id)\r\n  }\r\n}\r\n\r\nexport const showNotification = (\r\n  message: string,\r\n  subMessage = '',\r\n  isError = false,\r\n  icon = '',\r\n  action = undefined as (() => void) | undefined,\r\n  autoHide = true,\r\n  id = ''\r\n) => {\r\n  notificationProxy.message = message\r\n  notificationProxy.subMessage = subMessage\r\n  notificationProxy.type = isError ? 'error' : 'message'\r\n  notificationProxy.icon = icon\r\n  notificationProxy.open = true\r\n  notificationProxy.autoHide = autoHide\r\n  notificationProxy.action = action\r\n  notificationProxy.id = id\r\n}\r\nglobalThis.showNotification = showNotification\r\nexport const hideNotification = (id?: string) => {\r\n  if (id === undefined || notificationProxy.id === id) {\r\n    // openNotification('') // reset\r\n    notificationProxy.open = false\r\n  }\r\n}\r\n\r\nexport default () => {\r\n  const { autoHide, message, open, icon, type, subMessage, action } = useSnapshot(notificationProxy)\r\n  const { loaders } = useSnapshot(progressNotificationsProxy)\r\n\r\n  useEffect(() => {\r\n    if (autoHide && open) {\r\n      setTimeout(() => {\r\n        hideNotification(notificationProxy.id)\r\n      }, 7000)\r\n    }\r\n  }, [autoHide, open])\r\n\r\n  // test\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      // showNotification('test', 'test', false, pixelartIcons.loader)\r\n      // setNotificationProgress('test', {\r\n      //   current: 10,\r\n      //   total: 100,\r\n      //   message: 'Rendering world chunks',\r\n      // })\r\n      // setNotificationProgress('test2', {\r\n      //   current: 10,\r\n      //   total: 100,\r\n      //   message: 'progress',\r\n      // })\r\n    }, 1000)\r\n  }, [])\r\n  const scale = useAppScale()\r\n\r\n  return <div\r\n    className='notification-container'\r\n    style={{\r\n      // transform: `scale(${scale})`,\r\n      // transformOrigin: 'top right',\r\n    }}\r\n  >\r\n    <Notification\r\n      action={action}\r\n      type={type}\r\n      message={message}\r\n      subMessage={subMessage}\r\n      open={open}\r\n      icon={icon}\r\n    />\r\n    <AnimatePresence>\r\n      {loaders.toSorted((a, b) => (b.priority ?? 0) - (a.priority ?? 0)).map((loader, i) => (\r\n        <motion.div\r\n          key={loader.id}\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          transition={{ duration: 0.2 }}\r\n        >\r\n          <Notification\r\n            type='progress'\r\n            open={true}\r\n            topPosition={i + 1}\r\n            icon={pixelartIcons.loader}\r\n            subMessage={loader.subMessage ?? (loader.current !== undefined && loader.total !== undefined ? formatProgress(loader.current, loader.total) : undefined)}\r\n            message={loader.message}\r\n            currentProgress={loader.current}\r\n            totalProgress={loader.total}\r\n          />\r\n        </motion.div>\r\n      ))}\r\n    </AnimatePresence>\r\n  </div>\r\n}\r\n\r\nconst formatProgress = (current: number, total: number) => {\r\n  const formatter = new Intl.NumberFormat()\r\n  return `${Math.floor((current / total) * 100)}% (${formatter.format(current)} / ${formatter.format(total)})`\r\n}\r\n","import { PlayerObject, PlayerAnimation } from 'skinview3d'\r\nimport * as THREE from 'three'\r\nimport { WalkingGeneralSwing } from '../three/entity/animations'\r\nimport { loadSkinImage, stevePngUrl } from './utils/skins'\r\n\r\nexport type PlayerObjectType = PlayerObject & {\r\n  animation?: PlayerAnimation\r\n  realPlayerUuid: string\r\n  realUsername: string\r\n}\r\n\r\nexport function createPlayerObject (options: {\r\n  username?: string\r\n  uuid?: string\r\n  scale?: number\r\n}): {\r\n    playerObject: PlayerObjectType\r\n    wrapper: THREE.Group\r\n  } {\r\n  const wrapper = new THREE.Group()\r\n  const playerObject = new PlayerObject() as PlayerObjectType\r\n\r\n  playerObject.realPlayerUuid = options.uuid ?? ''\r\n  playerObject.realUsername = options.username ?? ''\r\n  playerObject.position.set(0, 16, 0)\r\n\r\n  // fix issues with starfield\r\n  playerObject.traverse((obj) => {\r\n    if (obj instanceof THREE.Mesh && obj.material instanceof THREE.MeshStandardMaterial) {\r\n      obj.material.transparent = true\r\n    }\r\n  })\r\n\r\n  wrapper.add(playerObject as any)\r\n  const scale = options.scale ?? (1 / 16)\r\n  wrapper.scale.set(scale, scale, scale)\r\n  wrapper.rotation.set(0, Math.PI, 0)\r\n\r\n  // Set up animation\r\n  playerObject.animation = new WalkingGeneralSwing()\r\n  ;(playerObject.animation as WalkingGeneralSwing).isMoving = false\r\n  playerObject.animation.update(playerObject, 0)\r\n\r\n  return { playerObject, wrapper }\r\n}\r\n\r\nexport const applySkinToPlayerObject = async (playerObject: PlayerObjectType, skinUrl: string) => {\r\n  return loadSkinImage(skinUrl || stevePngUrl).then(({ canvas }) => {\r\n    const skinTexture = new THREE.CanvasTexture(canvas)\r\n    skinTexture.magFilter = THREE.NearestFilter\r\n    skinTexture.minFilter = THREE.NearestFilter\r\n    skinTexture.needsUpdate = true\r\n    playerObject.skin.map = skinTexture as any\r\n  }).catch(console.error)\r\n}\r\n","import { proxy, useSnapshot, subscribe } from 'valtio'\r\nimport { useEffect, useMemo, useRef } from 'react'\r\nimport * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport { applySkinToPlayerObject, createPlayerObject, PlayerObjectType } from '../../renderer/viewer/lib/createPlayerObject'\r\nimport { currentScaling } from '../scaleInterface'\r\nimport { activeModalStack } from '../globalState'\r\n\r\n\r\nexport const modelViewerState = proxy({\r\n  model: undefined as undefined | {\r\n    models?: string[] // Array of model URLs (URL itself is the cache key)\r\n    steveModelSkin?: string\r\n    debug?: boolean\r\n    // absolute positioning\r\n    positioning: {\r\n      windowWidth: number\r\n      windowHeight: number\r\n      x: number\r\n      y: number\r\n      width: number\r\n      height: number\r\n      scaled?: boolean\r\n      onlyInitialScale?: boolean\r\n    }\r\n    followCursor?: boolean\r\n    followCursorCenter?: {\r\n      x: number\r\n      y: number\r\n    }\r\n    modelCustomization?: { [modelUrl: string]: { color?: string, opacity?: number, metalness?: number, roughness?: number, rotation?: { x?: number, y?: number, z?: number } } }\r\n    resetRotationOnReleae?: boolean\r\n    continiousRender?: boolean\r\n    alwaysRender?: boolean\r\n    playModelAnimation?: string\r\n    playModelAnimationSpeed?: number\r\n    playModelAnimationLoop?: boolean\r\n    followCursorCenterDebug?: boolean\r\n  }\r\n})\r\nglobalThis.modelViewerState = modelViewerState\r\n\r\n// Global debug function to get camera and model values\r\nglobalThis.getModelViewerValues = () => {\r\n  const scene = globalThis.sceneRef?.current\r\n  if (!scene) return null\r\n\r\n  const { camera, playerObject } = scene\r\n  if (!playerObject) return null\r\n\r\n  const wrapper = playerObject.parent\r\n  if (!wrapper) return null\r\n\r\n  const box = new THREE.Box3().setFromObject(wrapper)\r\n  const size = box.getSize(new THREE.Vector3())\r\n  const center = box.getCenter(new THREE.Vector3())\r\n\r\n  return {\r\n    camera: {\r\n      position: camera.position.clone(),\r\n      fov: camera.fov,\r\n      aspect: camera.aspect\r\n    },\r\n    model: {\r\n      position: wrapper.position.clone(),\r\n      rotation: wrapper.rotation.clone(),\r\n      scale: wrapper.scale.clone(),\r\n      size,\r\n      center\r\n    },\r\n    cursor: {\r\n      position: globalThis.cursorPosition || { x: 0, y: 0 },\r\n      normalized: globalThis.cursorPosition ? {\r\n        x: globalThis.cursorPosition.x * 2 - 1,\r\n        y: globalThis.cursorPosition.y * 2 - 1\r\n      } : { x: 0, y: 0 }\r\n    },\r\n    visibleArea: {\r\n      height: 2 * Math.tan(camera.fov * Math.PI / 180 / 2) * camera.position.z,\r\n      width: 2 * Math.tan(camera.fov * Math.PI / 180 / 2) * camera.position.z * camera.aspect\r\n    }\r\n  }\r\n}\r\n\r\nsubscribe(activeModalStack, () => {\r\n  if (!modelViewerState.model || !modelViewerState.model?.alwaysRender) {\r\n    return\r\n  }\r\n  if (activeModalStack.length === 0) {\r\n    modelViewerState.model = undefined\r\n  }\r\n})\r\n\r\nexport default () => {\r\n  const { model } = useSnapshot(modelViewerState)\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  const sceneRef = useRef<{\r\n    scene: THREE.Scene\r\n    camera: THREE.PerspectiveCamera\r\n    renderer: THREE.WebGLRenderer\r\n    controls: OrbitControls\r\n    playerObject?: PlayerObjectType\r\n    dispose: () => void\r\n  }>()\r\n  const initialScale = useMemo(() => {\r\n    return currentScaling.scale\r\n  }, [])\r\n  globalThis.sceneRef = sceneRef\r\n\r\n  // Cursor following state\r\n  const cursorPosition = useRef<{ x: number, y: number }>({ x: 0, y: 0 }) // window clientX/clientY in px\r\n  const isFollowingCursor = useRef(false)\r\n  const getUiScaleFactor = (scaled?: boolean, onlyInitialScale?: boolean) => {\r\n    return scaled ? (onlyInitialScale ? initialScale : currentScaling.scale) : 1\r\n  }\r\n  const windowRef = useRef<HTMLDivElement>(null)\r\n  // Shared helper to compute normalized cursor from window clientX/Y taking scale & center into account\r\n  const computeNormalizedFromClient = (clientX: number, clientY: number) => {\r\n    const { positioning, followCursorCenter } = modelViewerState.model!\r\n    const { windowWidth, windowHeight } = positioning\r\n    const rect = windowRef.current?.getBoundingClientRect()\r\n    const effectiveScale = rect ? (rect.width / windowWidth) : getUiScaleFactor(positioning.scaled, positioning.onlyInitialScale)\r\n\r\n    const centerPxX = (followCursorCenter?.x ?? (windowWidth / 2)) * effectiveScale\r\n    const centerPxY = (followCursorCenter?.y ?? (windowHeight / 2)) * effectiveScale\r\n\r\n    const localX = rect ? (clientX - rect.left) : clientX\r\n    const localY = rect ? (clientY - rect.top) : clientY\r\n\r\n    const denomX = rect ? (rect.width / 2) : (window.innerWidth / 2)\r\n    const denomY = rect ? (rect.height / 2) : (window.innerHeight / 2)\r\n    const normalizedX = (localX - centerPxX) / denomX\r\n    const normalizedY = (localY - centerPxY) / denomY\r\n    return { normalizedX, normalizedY }\r\n  }\r\n\r\n\r\n  // Model management state\r\n  const loadedModels = useRef<Map<string, THREE.Object3D>>(new Map())\r\n  const modelLoaders = useRef<Map<string, GLTFLoader | OBJLoader>>(new Map())\r\n  const animationMixers = useRef<Map<string, THREE.AnimationMixer>>(new Map())\r\n  const gltfClips = useRef<Map<string, THREE.AnimationClip[]>>(new Map())\r\n  const activeActions = useRef<Map<string, THREE.AnimationAction>>(new Map())\r\n  const clockRef = useRef(new THREE.Clock())\r\n  const mixersAnimatingRef = useRef(false)\r\n  const rafIdRef = useRef<number | undefined>(undefined)\r\n\r\n  const updateAllMixers = (delta: number) => {\r\n    for (const mixer of animationMixers.current.values()) {\r\n      mixer.update(delta)\r\n    }\r\n  }\r\n\r\n  const anyActionActive = () => {\r\n    // Consider actions active as soon as they're enabled, even before first mixer.update\r\n    for (const action of activeActions.current.values()) {\r\n      if (action.enabled) return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  const ensureMixerLoop = (render: () => void) => {\r\n    if (mixersAnimatingRef.current) return\r\n    mixersAnimatingRef.current = true\r\n    const tick = () => {\r\n      const delta = clockRef.current.getDelta()\r\n      updateAllMixers(delta)\r\n      render()\r\n      if (anyActionActive()) {\r\n        rafIdRef.current = requestAnimationFrame(tick)\r\n      } else {\r\n        mixersAnimatingRef.current = false\r\n        rafIdRef.current = undefined\r\n      }\r\n    }\r\n    rafIdRef.current = requestAnimationFrame(tick)\r\n  }\r\n\r\n  const playAnimationForModel = (modelUrl: string, animName: string | undefined, render: () => void) => {\r\n    const clips = gltfClips.current.get(modelUrl)\r\n    const mixer = animationMixers.current.get(modelUrl)\r\n    if (!clips || !mixer) {\r\n      return\r\n    }\r\n    // stop previous\r\n    const prev = activeActions.current.get(modelUrl)\r\n    if (prev) {\r\n      prev.stop()\r\n      activeActions.current.delete(modelUrl)\r\n    }\r\n    if (!animName) {\r\n      return\r\n    }\r\n    const clip = clips.find(c => c.name === animName)\r\n    if (!clip) return\r\n    const action = mixer.clipAction(clip)\r\n    const loop = modelViewerState.model?.playModelAnimationLoop ?? true\r\n    action.setLoop(loop ? THREE.LoopRepeat : THREE.LoopOnce, Infinity)\r\n    const speed = modelViewerState.model?.playModelAnimationSpeed ?? 1\r\n    action.timeScale = speed\r\n    action.reset().fadeIn(0.1).play()\r\n    activeActions.current.set(modelUrl, action)\r\n    ensureMixerLoop(render)\r\n  }\r\n\r\n  const applyAnimationParamsToAll = () => {\r\n    const loop = modelViewerState.model?.playModelAnimationLoop ?? true\r\n    const speed = modelViewerState.model?.playModelAnimationSpeed ?? 1\r\n    for (const [modelUrl, action] of activeActions.current) {\r\n      action.setLoop(loop ? THREE.LoopRepeat : THREE.LoopOnce, Infinity)\r\n      action.timeScale = speed\r\n    }\r\n  }\r\n\r\n  // Model management functions\r\n  const loadModel = (modelUrl: string) => {\r\n    if (loadedModels.current.has(modelUrl)) return // Already loaded\r\n\r\n    const isGLTF = modelUrl.toLowerCase().endsWith('.gltf') || modelUrl.toLowerCase().endsWith('.glb')\r\n    const loader = isGLTF ? new GLTFLoader() : new OBJLoader()\r\n    modelLoaders.current.set(modelUrl, loader)\r\n\r\n    const onLoad = (object: THREE.Object3D, animations?: THREE.AnimationClip[]) => {\r\n      // Apply customization if available\r\n      const customization = model?.modelCustomization?.[modelUrl]\r\n      if (customization?.rotation) {\r\n        object.rotation.set(customization.rotation.x ?? 0, customization.rotation.y ?? 0, customization.rotation.z ?? 0)\r\n      }\r\n      object.traverse((child) => {\r\n        if (child instanceof THREE.Mesh) {\r\n          if (child.material && customization) {\r\n            const material = child.material as THREE.MeshStandardMaterial\r\n            if (customization.color) {\r\n              material.color.setHex(parseInt(customization.color.replace('#', ''), 16))\r\n            }\r\n            if (customization.opacity !== undefined) {\r\n              material.opacity = customization.opacity\r\n              material.transparent = customization.opacity < 1\r\n            }\r\n            if (customization.metalness !== undefined) {\r\n              material.metalness = customization.metalness\r\n            }\r\n            if (customization.roughness !== undefined) {\r\n              material.roughness = customization.roughness\r\n            }\r\n          }\r\n        }\r\n      })\r\n\r\n      // Center and scale model\r\n      const box = new THREE.Box3().setFromObject(object)\r\n      const center = box.getCenter(new THREE.Vector3())\r\n      const size = box.getSize(new THREE.Vector3())\r\n      const maxDim = Math.max(size.x, size.y, size.z)\r\n      const scale = 2 / maxDim\r\n      object.scale.setScalar(scale)\r\n      object.position.sub(center.multiplyScalar(scale))\r\n\r\n      // Store the model using URL as key\r\n      loadedModels.current.set(modelUrl, object)\r\n      sceneRef.current?.scene.add(object)\r\n\r\n      // Setup animations for GLTF\r\n      if (animations && animations.length > 0) {\r\n        const mixer = new THREE.AnimationMixer(object)\r\n        animationMixers.current.set(modelUrl, mixer)\r\n        gltfClips.current.set(modelUrl, animations)\r\n        // Auto-play current requested animation if set\r\n        const render = () => sceneRef.current?.renderer.render(sceneRef.current.scene, sceneRef.current.camera)\r\n        playAnimationForModel(modelUrl, modelViewerState.model?.playModelAnimation, render)\r\n      }\r\n\r\n      // Trigger render\r\n      if (sceneRef.current) {\r\n        setTimeout(() => {\r\n          const render = () => sceneRef.current?.renderer.render(sceneRef.current.scene, sceneRef.current.camera)\r\n          render()\r\n        }, 0)\r\n      }\r\n    }\r\n\r\n    if (isGLTF) {\r\n      (loader as GLTFLoader).load(modelUrl, (gltf) => {\r\n        onLoad(gltf.scene, gltf.animations)\r\n      })\r\n    } else {\r\n      (loader as OBJLoader).load(modelUrl, onLoad)\r\n    }\r\n  }\r\n\r\n  const removeModel = (modelUrl: string) => {\r\n    const model = loadedModels.current.get(modelUrl)\r\n    if (model) {\r\n      sceneRef.current?.scene.remove(model)\r\n      model.traverse((child) => {\r\n        if (child instanceof THREE.Mesh) {\r\n          if (child.material) {\r\n            if (Array.isArray(child.material)) {\r\n              for (const mat of child.material) {\r\n                mat.dispose()\r\n              }\r\n            } else {\r\n              child.material.dispose()\r\n            }\r\n          }\r\n          if (child.geometry) {\r\n            child.geometry.dispose()\r\n          }\r\n        }\r\n      })\r\n      loadedModels.current.delete(modelUrl)\r\n    }\r\n    modelLoaders.current.delete(modelUrl)\r\n    // Clear animations\r\n    const action = activeActions.current.get(modelUrl)\r\n    action?.stop()\r\n    activeActions.current.delete(modelUrl)\r\n    animationMixers.current.delete(modelUrl)\r\n    gltfClips.current.delete(modelUrl)\r\n  }\r\n\r\n  // Subscribe to model changes\r\n  useEffect(() => {\r\n    if (!modelViewerState.model?.models) return\r\n\r\n    const modelsChanged = () => {\r\n      const currentModels = modelViewerState.model?.models || []\r\n      const currentModelUrls = new Set(currentModels)\r\n      const loadedModelUrls = new Set(loadedModels.current.keys())\r\n\r\n      // Remove models that are no longer in the state\r\n      for (const modelUrl of loadedModelUrls) {\r\n        if (!currentModelUrls.has(modelUrl)) {\r\n          removeModel(modelUrl)\r\n        }\r\n      }\r\n\r\n      // Add new models\r\n      for (const modelUrl of currentModels) {\r\n        if (!loadedModelUrls.has(modelUrl)) {\r\n          loadModel(modelUrl)\r\n        }\r\n      }\r\n    }\r\n    const unsubscribe = subscribe(modelViewerState.model.models, modelsChanged)\r\n\r\n    let unmounted = false\r\n    setTimeout(() => {\r\n      if (unmounted) return\r\n      modelsChanged()\r\n    })\r\n\r\n    return () => {\r\n      unmounted = true\r\n      unsubscribe?.()\r\n    }\r\n  }, [model?.models])\r\n\r\n  useEffect(() => {\r\n    if (!model || !containerRef.current) return\r\n\r\n    // Setup scene\r\n    const scene = new THREE.Scene()\r\n    scene.background = null // Transparent background\r\n\r\n    // Setup camera with optimal settings for player model viewing\r\n    const camera = new THREE.PerspectiveCamera(\r\n      50, // Reduced FOV for better model viewing\r\n      model.positioning.width / model.positioning.height,\r\n      0.1,\r\n      1000\r\n    )\r\n    camera.position.set(0, 0, 3) // Position camera to view player model optimally\r\n\r\n    // Setup renderer with pixel density awareness\r\n    const renderer = new THREE.WebGLRenderer({ alpha: true })\r\n    renderer.useLegacyLights = false\r\n    renderer.outputColorSpace = THREE.LinearSRGBColorSpace\r\n    let scale = window.devicePixelRatio || 1\r\n    if (modelViewerState.model?.positioning.scaled) {\r\n      scale *= currentScaling.scale\r\n    }\r\n    renderer.setPixelRatio(scale)\r\n    renderer.setSize(model.positioning.width, model.positioning.height)\r\n\r\n    containerRef.current.appendChild(renderer.domElement)\r\n\r\n    // Setup controls\r\n    const controls = new OrbitControls(camera, renderer.domElement)\r\n    // controls.enableZoom = false\r\n    // controls.enablePan = false\r\n    controls.minPolarAngle = Math.PI / 2 // Lock vertical rotation\r\n    controls.maxPolarAngle = Math.PI / 2\r\n    controls.enableDamping = true\r\n    controls.dampingFactor = 0.05\r\n\r\n    // Add ambient light for overall illumination\r\n    const ambientLight = new THREE.AmbientLight(0xff_ff_ff, 3)\r\n    scene.add(ambientLight)\r\n\r\n    // Add camera light (matching skinview3d cameraLight)\r\n    const cameraLight = new THREE.PointLight(0xff_ff_ff, 0.6) // Intensity, no distance limit, no decay\r\n    camera.add(cameraLight)\r\n    scene.add(camera)\r\n\r\n    // Cursor following function\r\n    const updatePlayerLookAt = () => {\r\n      if (!isFollowingCursor.current || !sceneRef.current?.playerObject) return\r\n\r\n      const { playerObject } = sceneRef.current\r\n      const { x, y } = cursorPosition.current\r\n\r\n      // Convert clientX/clientY to normalized coordinates centered by followCursorCenter\r\n      const { normalizedX, normalizedY } = computeNormalizedFromClient(x, y)\r\n\r\n      // Calculate head rotation based on cursor position\r\n      // Limit head movement to ±60 degrees\r\n      const maxHeadYaw = Math.PI * (60 / 180)\r\n      const maxHeadPitch = Math.PI * (60 / 180)\r\n\r\n      const clampedX = THREE.MathUtils.clamp(normalizedX, -1, 1)\r\n      const clampedY = THREE.MathUtils.clamp(normalizedY, -1, 1)\r\n\r\n      const headYaw = clampedX * maxHeadYaw\r\n      const headPitch = clampedY * maxHeadPitch\r\n\r\n      // Apply head rotation with smooth interpolation\r\n      const lerpFactor = 0.1 // Smooth interpolation factor\r\n      playerObject.skin.head.rotation.y = THREE.MathUtils.lerp(\r\n        playerObject.skin.head.rotation.y,\r\n        headYaw,\r\n        lerpFactor\r\n      )\r\n      playerObject.skin.head.rotation.x = THREE.MathUtils.lerp(\r\n        playerObject.skin.head.rotation.x,\r\n        headPitch,\r\n        lerpFactor\r\n      )\r\n\r\n      // Apply slight body rotation for more natural movement\r\n      const bodyYaw = headYaw * 0.3 // Body follows head but with less rotation\r\n      playerObject.rotation.y = THREE.MathUtils.lerp(\r\n        playerObject.rotation.y,\r\n        bodyYaw,\r\n        lerpFactor * 0.5 // Slower body movement\r\n      )\r\n\r\n      render()\r\n    }\r\n\r\n    // Render function\r\n    const render = () => {\r\n      renderer.render(scene, camera)\r\n    }\r\n\r\n    // Setup animation/render strategy\r\n    if (model.continiousRender) {\r\n      // Continuous animation loop\r\n      const animate = () => {\r\n        requestAnimationFrame(animate)\r\n        const delta = clockRef.current.getDelta()\r\n        updateAllMixers(delta)\r\n        render()\r\n      }\r\n      animate()\r\n    } else {\r\n      // Render only on camera movement\r\n      controls.addEventListener('change', render)\r\n      // Initial render\r\n      render()\r\n      // Render after model loads\r\n      if (model.steveModelSkin !== undefined) {\r\n        // Create player model\r\n        const { playerObject, wrapper } = createPlayerObject({\r\n          scale: 1 // Start with base scale, will adjust below\r\n        })\r\n        playerObject.ears.visible = false\r\n        playerObject.cape.visible = false\r\n\r\n        // Enable shadows for player object\r\n        wrapper.traverse((child) => {\r\n          if (child instanceof THREE.Mesh) {\r\n            child.castShadow = true\r\n            child.receiveShadow = true\r\n          }\r\n        })\r\n\r\n        // Calculate proper scale and positioning for camera view\r\n        const box = new THREE.Box3().setFromObject(wrapper)\r\n        const size = box.getSize(new THREE.Vector3())\r\n        const center = box.getCenter(new THREE.Vector3())\r\n\r\n        // Calculate scale to fit within camera view (considering FOV and distance)\r\n        const cameraDistance = camera.position.z\r\n        const fov = camera.fov * Math.PI / 180 // Convert to radians\r\n        const visibleHeight = 2 * Math.tan(fov / 2) * cameraDistance\r\n        const visibleWidth = visibleHeight * (model.positioning.width / model.positioning.height)\r\n\r\n        const scaleFactor = Math.min(\r\n          (visibleHeight) / size.y,\r\n          (visibleWidth) / size.x\r\n        )\r\n\r\n        wrapper.scale.multiplyScalar(scaleFactor)\r\n\r\n        // Center the player object\r\n        wrapper.position.sub(center.multiplyScalar(scaleFactor))\r\n\r\n        // Rotate to face camera (remove the default 180° rotation)\r\n        wrapper.rotation.set(0, 0, 0)\r\n\r\n        scene.add(wrapper)\r\n        sceneRef.current = {\r\n          ...sceneRef.current!,\r\n          playerObject\r\n        }\r\n\r\n        void applySkinToPlayerObject(playerObject, model.steveModelSkin).then(() => {\r\n          setTimeout(render, 0)\r\n        })\r\n\r\n        // Set up cursor following if enabled\r\n        if (model.followCursor) {\r\n          isFollowingCursor.current = true\r\n        }\r\n      }\r\n    }\r\n\r\n    // Window cursor tracking for followCursor\r\n    let lastCursorUpdate = 0\r\n    let waitingRender = false\r\n    const handleWindowPointerMove = (event: PointerEvent) => {\r\n      if (!model.followCursor) return\r\n\r\n      // Track cursor position as window clientX/clientY in px\r\n      const newPosition = {\r\n        x: event.clientX,\r\n        y: event.clientY\r\n      }\r\n      cursorPosition.current = newPosition\r\n      globalThis.cursorPosition = newPosition // Expose for debug\r\n      lastCursorUpdate = Date.now()\r\n      updatePlayerLookAt()\r\n      if (!waitingRender) {\r\n        requestAnimationFrame(() => {\r\n          render()\r\n          waitingRender = false\r\n        })\r\n        waitingRender = true\r\n      }\r\n    }\r\n\r\n    // Add window event listeners\r\n    if (model.followCursor) {\r\n      window.addEventListener('pointermove', handleWindowPointerMove)\r\n      isFollowingCursor.current = true\r\n    }\r\n\r\n    // Note: animation state subscriptions moved to useEffect hooks below to satisfy TS types\r\n\r\n    // Store refs for cleanup\r\n    sceneRef.current = {\r\n      ...sceneRef.current!,\r\n      scene,\r\n      camera,\r\n      renderer,\r\n      controls,\r\n      dispose () {\r\n        if (!model.continiousRender) {\r\n          controls.removeEventListener('change', render)\r\n        }\r\n        if (model.followCursor) {\r\n          window.removeEventListener('pointermove', handleWindowPointerMove)\r\n        }\r\n        if (rafIdRef.current !== undefined) cancelAnimationFrame(rafIdRef.current)\r\n\r\n        // Clean up loaded models\r\n        for (const [modelUrl, model] of loadedModels.current) {\r\n          scene.remove(model)\r\n          model.traverse((child) => {\r\n            if (child instanceof THREE.Mesh) {\r\n              if (child.material) {\r\n                if (Array.isArray(child.material)) {\r\n                  for (const mat of child.material) {\r\n                    mat.dispose()\r\n                  }\r\n                } else {\r\n                  child.material.dispose()\r\n                }\r\n              }\r\n              if (child.geometry) {\r\n                child.geometry.dispose()\r\n              }\r\n            }\r\n          })\r\n        }\r\n        loadedModels.current.clear()\r\n        modelLoaders.current.clear()\r\n        activeActions.current.clear()\r\n        animationMixers.current.clear()\r\n        gltfClips.current.clear()\r\n\r\n        const playerObject = sceneRef.current?.playerObject\r\n        if (playerObject?.skin.map) {\r\n          (playerObject.skin.map as unknown as THREE.Texture).dispose()\r\n        }\r\n        renderer.dispose()\r\n        renderer.domElement?.remove()\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      sceneRef.current?.dispose()\r\n    }\r\n  }, [model])\r\n\r\n  // React to animation name changes\r\n  useEffect(() => {\r\n    if (!model) return\r\n    const render = () => {\r\n      const s = sceneRef.current\r\n      if (!s) return\r\n      s.renderer.render(s.scene, s.camera)\r\n    }\r\n    const animName = model.playModelAnimation\r\n    if (animName === undefined) return\r\n    for (const modelUrl of loadedModels.current.keys()) {\r\n      playAnimationForModel(modelUrl, animName, render)\r\n    }\r\n  }, [model?.playModelAnimation])\r\n\r\n  // React to animation params (speed/loop) changes\r\n  useEffect(() => {\r\n    if (!model) return\r\n    applyAnimationParamsToAll()\r\n  }, [model?.playModelAnimationSpeed, model?.playModelAnimationLoop])\r\n\r\n  if (!model) return null\r\n\r\n  const { x, y, width, height, scaled, onlyInitialScale } = model.positioning\r\n  const { windowWidth } = model.positioning\r\n  const { windowHeight } = model.positioning\r\n  const scaleValue = onlyInitialScale ? initialScale : 'var(--guiScale)'\r\n\r\n  return (\r\n    <div\r\n      className='overlay-model-viewer-container'\r\n      style={{\r\n        zIndex: 100,\r\n        position: 'fixed',\r\n        inset: 0,\r\n        width: '100dvw',\r\n        height: '100dvh',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        transform: scaled ? `scale(${scaleValue})` : 'none',\r\n        pointerEvents: 'none',\r\n      }}\r\n    >\r\n      <div\r\n        ref={windowRef}\r\n        className='overlay-model-viewer-window'\r\n        style={{\r\n          width: windowWidth,\r\n          height: windowHeight,\r\n          position: 'relative',\r\n          pointerEvents: 'none',\r\n        }}\r\n      >\r\n        {model.followCursor && model.followCursorCenterDebug ? (\r\n          (() => {\r\n            const { followCursorCenter } = model\r\n            const cx = (followCursorCenter?.x ?? (windowWidth / 2))\r\n            const cy = (followCursorCenter?.y ?? (windowHeight / 2))\r\n            const size = 6\r\n            return (\r\n              <div\r\n                className='overlay-model-viewer-follow-cursor-center-debug'\r\n                style={{\r\n                  position: 'absolute',\r\n                  left: cx - (size / 2),\r\n                  top: cy - (size / 2),\r\n                  width: size,\r\n                  height: size,\r\n                  backgroundColor: 'red',\r\n                  pointerEvents: 'none',\r\n                  zIndex: 1000,\r\n                }}\r\n              />\r\n            )\r\n          })()\r\n        ) : null}\r\n        <div\r\n          ref={containerRef}\r\n          className='overlay-model-viewer'\r\n          style={{\r\n            position: 'absolute',\r\n            left: x,\r\n            top: y,\r\n            width,\r\n            height,\r\n            pointerEvents: 'auto',\r\n            backgroundColor: model.debug ? 'red' : undefined,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { CSSProperties } from 'react'\r\nimport { PixelartIconsGenerated } from './pixelartIcons.generated'\r\n\r\nexport default ({\r\n  iconName,\r\n  width = undefined as undefined | number,\r\n  styles = {} as CSSProperties,\r\n  className = undefined as undefined | string,\r\n  onClick = () => { }\r\n}) => {\r\n  if (width !== undefined) styles = { width, height: width, fontSize: width, ...styles }\r\n  iconName = iconName.replace('pixelarticons:', '')\r\n\r\n  return <div\r\n    style={{\r\n      ...styles\r\n    }} onClick={onClick} className={`${`pixelart-icons-font-${iconName}`} ${className ?? ''}`}\r\n  />\r\n}\r\n\r\nexport const pixelartIcons = new Proxy({} as PixelartIconsGenerated, {\r\n  get (target, prop) {\r\n    return prop as string\r\n  }\r\n})\r\n","interface Props {\r\n  title: JSX.Element | string\r\n  children: React.ReactNode\r\n  backdrop?: boolean | 'dirt'\r\n  style?: React.CSSProperties\r\n  className?: string\r\n  titleSelectable?: boolean\r\n  titleMarginTop?: number\r\n  contentStyle?: React.CSSProperties\r\n}\r\n\r\nexport default ({ title, children, backdrop = true, style, className = '', titleSelectable, titleMarginTop, contentStyle }: Props) => {\r\n  return (\r\n    <>\r\n      {backdrop === 'dirt' ? <div className='dirt-bg' /> : backdrop ? <div className=\"backdrop\" /> : null}\r\n      <div className={`fullscreen ${className}`} style={{ ...style }}>\r\n        <div className=\"screen-content\" style={{ ...contentStyle, ...(titleMarginTop === undefined ? {} : { marginTop: titleMarginTop }) }}>\r\n          <div className={`screen-title ${titleSelectable ? 'text-select' : ''}`}>{title}</div>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport { useEffect, useRef } from 'react'\r\nimport { noCase } from 'change-case'\r\nimport { titleCase } from 'title-case'\r\nimport { hideCurrentModal, showModal } from '../globalState'\r\nimport { parseFormattedMessagePacket } from '../botUtils'\r\nimport Screen from './Screen'\r\nimport { useIsModalActive } from './utilsApp'\r\nimport Button from './Button'\r\nimport MessageFormattedString from './MessageFormattedString'\r\nimport Input, { InputWithLabel } from './Input'\r\n\r\nconst state = proxy({\r\n  title: '',\r\n  options: [] as string[],\r\n  showCancel: true,\r\n  minecraftJsonMessage: null as null | Record<string, any>,\r\n  behavior: 'resolve-close' as 'resolve-close' | 'close-resolve',\r\n  inputs: {} as Record<string, InputOption>,\r\n  inputsConfirmButton: ''\r\n})\r\n\r\nlet resolve\r\nexport const showOptionsModal = async <T extends string> (\r\n  title: string,\r\n  options: T[],\r\n  { cancel = true, minecraftJsonMessage }: { cancel?: boolean, minecraftJsonMessage? } = {}\r\n): Promise<T | undefined> => {\r\n  showModal({ reactType: 'general-select' })\r\n  let minecraftJsonMessageParsed\r\n  if (minecraftJsonMessage) {\r\n    const parseResult = parseFormattedMessagePacket(minecraftJsonMessage)\r\n    minecraftJsonMessageParsed = parseResult.formatted\r\n    if (parseResult.plain) {\r\n      title += ` (${parseResult.plain})`\r\n    }\r\n  }\r\n  return new Promise((_resolve) => {\r\n    resolve = _resolve\r\n    Object.assign(state, {\r\n      title,\r\n      options,\r\n      showCancel: cancel,\r\n      minecraftJsonMessage: minecraftJsonMessageParsed,\r\n      inputs: {},\r\n      inputsConfirmButton: ''\r\n    })\r\n  })\r\n}\r\n\r\nexport type InputOption = {\r\n  type: 'text' | 'checkbox' | 'button'\r\n  defaultValue?: string | boolean\r\n  label?: string\r\n  placeholder?: string\r\n  onButtonClick?: () => void\r\n}\r\nexport const showInputsModal = async <T extends Record<string, InputOption>>(\r\n  title: string,\r\n  inputs: T,\r\n  {\r\n    cancel = true,\r\n    minecraftJsonMessage,\r\n    showConfirm = true\r\n  }: {\r\n    cancel?: boolean,\r\n    minecraftJsonMessage?\r\n    showConfirm?: boolean\r\n  } = {}\r\n): Promise<{\r\n  [K in keyof T]: T[K] extends { type: 'text' }\r\n    ? string\r\n    : T[K] extends { type: 'checkbox' }\r\n      ? boolean\r\n      : T[K] extends { type: 'button' }\r\n        ? string\r\n        : never\r\n}> => {\r\n  showModal({ reactType: 'general-select' })\r\n  let minecraftJsonMessageParsed\r\n  if (minecraftJsonMessage) {\r\n    const parseResult = parseFormattedMessagePacket(minecraftJsonMessage)\r\n    minecraftJsonMessageParsed = parseResult.formatted\r\n    if (parseResult.plain) {\r\n      title += ` (${parseResult.plain})`\r\n    }\r\n  }\r\n  return new Promise((_resolve) => {\r\n    resolve = _resolve\r\n    Object.assign(state, {\r\n      title,\r\n      inputs,\r\n      showCancel: cancel,\r\n      minecraftJsonMessage: minecraftJsonMessageParsed,\r\n      options: [],\r\n      inputsConfirmButton: showConfirm ? 'Confirm' : ''\r\n    })\r\n  })\r\n}\r\n\r\nexport default () => {\r\n  const { title, options, showCancel, minecraftJsonMessage, inputs, inputsConfirmButton } = useSnapshot(state)\r\n  const isModalActive = useIsModalActive('general-select')\r\n  const inputValues = useRef({})\r\n\r\n  useEffect(() => {\r\n    inputValues.current = Object.fromEntries(Object.entries(inputs).map(([key, input]) => [key, input.defaultValue ?? (input.type === 'checkbox' ? false : '')]))\r\n  }, [inputs])\r\n\r\n  if (!isModalActive) return\r\n\r\n  const resolveClose = (value: any) => {\r\n    if (state.behavior === 'resolve-close') {\r\n      resolve(value)\r\n      hideCurrentModal()\r\n    } else {\r\n      hideCurrentModal()\r\n      resolve(value)\r\n    }\r\n  }\r\n\r\n  return <Screen title={title} backdrop>\r\n    {minecraftJsonMessage && <div style={{ textAlign: 'center', }}>\r\n      <MessageFormattedString message={minecraftJsonMessage} />\r\n    </div>}\r\n    <div style={{ display: 'flex', flexDirection: 'column', gap: 9 }}>\r\n      {options.length > 0 && <div style={{ display: 'flex', flexDirection: 'column', gap: 5 }}>\r\n        {options.map(option => <Button\r\n          key={option} onClick={() => {\r\n            resolveClose(option)\r\n          }}\r\n        >{option}\r\n        </Button>)}\r\n      </div>}\r\n      <div style={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\r\n        {Object.entries(inputs).map(([key, input]) => {\r\n          const label = input.label ?? titleCase(noCase(key))\r\n          return <div key={key}>\r\n            {input.type === 'text' && (\r\n              <InputWithLabel\r\n                label={label}\r\n                autoFocus\r\n                type='text'\r\n                defaultValue={input.defaultValue as string}\r\n                placeholder={input.placeholder}\r\n                onChange={(e) => {\r\n                  inputValues.current[key] = e.target.value\r\n                }}\r\n              />\r\n            )}\r\n            {input.type === 'checkbox' && (\r\n              <label style={{ display: 'flex', alignItems: 'center', gap: 4, fontSize: 12 }}>\r\n                <input\r\n                  type='checkbox'\r\n                  style={{ marginBottom: -1, }}\r\n                  defaultChecked={input.defaultValue as boolean}\r\n                  onChange={(e) => {\r\n                    inputValues.current[key] = e.target.checked\r\n                  }}\r\n                />\r\n                {label}\r\n              </label>\r\n            )}\r\n            {input.type === 'button' && (\r\n              <Button\r\n                onClick={() => {\r\n                  resolveClose(inputValues.current)\r\n                  input.onButtonClick?.()\r\n                }}\r\n              >{label}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        })}\r\n      </div>\r\n      {inputs && inputsConfirmButton && (\r\n        <Button\r\n          // style={{ marginTop: 30 }}\r\n          onClick={() => {\r\n            resolveClose(inputValues.current)\r\n          }}\r\n        >\r\n          {inputsConfirmButton}\r\n        </Button>\r\n      )}\r\n      {showCancel && (\r\n        <Button\r\n          // style={{ marginTop: 30 }}\r\n          onClick={() => {\r\n            resolveClose(undefined)\r\n          }}\r\n        >\r\n          Cancel\r\n        </Button>\r\n      )}\r\n    </div>\r\n  </Screen>\r\n}\r\n","import { useEffect } from 'react'\r\n\r\n// appReplacableResources\r\nimport { appReplacableResources } from '../generated/resources'\r\n\r\nexport default ({ children }): React.ReactElement => {\r\n  useEffect(() => {\r\n    if (document.getElementById('hud-vars-style')) return\r\n    // 1. Don't inline long data URLs for better DX in elements tab\r\n    // 2. Easier application to globally override icons with custom image (eg from resourcepacks)\r\n    const css = /* css */`\r\n      html {\r\n        ${Object.values(appReplacableResources).filter(r => r.cssVar).map(r => {\r\n      const repeat = r.cssVarRepeat ?? 1\r\n      return `${r.cssVar}: ${repeatArr(`url('${r.content}')`, repeat).join(', ')};`\r\n    }).join('\\n')}\r\n\r\n        --hud-bottom-max: 0px;\r\n        --hud-bottom-raw: max(env(safe-area-inset-bottom), var(--hud-bottom-max));\r\n        --safe-area-inset-bottom: calc(var(--hud-bottom-raw) / 2);\r\n      }\r\n    `\r\n    const style = document.createElement('style')\r\n    style.id = 'hud-vars-style'\r\n    style.textContent = css\r\n    document.head.appendChild(style)\r\n  }, [])\r\n\r\n  return children\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-constraint\r\nconst repeatArr = <T extends any> (item: T, times: number): T[] => {\r\n  return Array.from({ length: times }, () => item)\r\n}\r\n","import { proxy, ref, subscribe } from 'valtio'\r\nimport { UserOverridesConfig } from 'contro-max/build/types/store'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { AppConfig } from '../appConfig'\r\nimport { CustomCommand } from './KeybindingsCustom'\r\nimport { AuthenticatedAccount } from './serversStorage'\r\nimport type { BaseServerInfo } from './AddServerOrConnect'\r\n\r\n// when opening html file locally in browser, localStorage is shared between all ever opened html files, so we try to avoid conflicts\r\nconst localStoragePrefix = process.env?.SINGLE_FILE_BUILD ? 'minecraft-web-client:' : ''\r\nconst cookiePrefix = process.env.COOKIE_STORAGE_PREFIX || ''\r\nconst { localStorage } = window\r\nconst migrateRemoveLocalStorage = false\r\n\r\nexport interface SavedProxiesData {\r\n  proxies: string[]\r\n  selected: string\r\n}\r\n\r\nexport interface ServerHistoryEntry {\r\n  ip: string\r\n  version?: string\r\n  numConnects: number\r\n  lastConnected: number\r\n}\r\n\r\nexport interface StoreServerItem extends BaseServerInfo {\r\n  lastJoined?: number\r\n  description?: string\r\n  optionsOverride?: Record<string, any>\r\n  autoLogin?: Record<string, string>\r\n  numConnects?: number // Track number of connections\r\n  isRecommended?: boolean\r\n}\r\n\r\ninterface StorageConflict {\r\n  key: string\r\n  localStorageValue: any\r\n  localStorageTimestamp?: number\r\n  cookieValue: any\r\n  cookieTimestamp?: number\r\n}\r\n\r\ntype StorageData = {\r\n  cookieStorage: boolean | { ignoreKeys: Array<keyof StorageData> }\r\n  customCommands: Record<string, CustomCommand> | undefined\r\n  username: string | undefined\r\n  keybindings: UserOverridesConfig | undefined\r\n  changedSettings: any\r\n  proxiesData: SavedProxiesData | undefined\r\n  serversHistory: ServerHistoryEntry[]\r\n  authenticatedAccounts: AuthenticatedAccount[]\r\n  serversList: StoreServerItem[] | undefined\r\n  modsAutoUpdateLastCheck: number | undefined\r\n  firstModsPageVisit: boolean\r\n}\r\n\r\nconst cookieStoreKeys: Array<keyof StorageData> = [\r\n  'customCommands',\r\n  'username',\r\n  'keybindings',\r\n  'changedSettings',\r\n  'serversList',\r\n]\r\n\r\nconst oldKeysAliases: Partial<Record<keyof StorageData, string>> = {\r\n  serversHistory: 'serverConnectionHistory',\r\n}\r\n\r\n// Cookie storage functions\r\nconst getCookieValue = (key: string): string | null => {\r\n  const cookie = document.cookie.split(';').find(c => c.trimStart().startsWith(`${cookiePrefix}${key}=`))\r\n  if (cookie) {\r\n    return decodeURIComponent(cookie.split('=')[1])\r\n  }\r\n  return null\r\n}\r\n\r\nconst topLevelDomain = window.location.hostname.split('.').slice(-2).join('.')\r\nconst cookieBase = `; Domain=.${topLevelDomain}; Path=/; SameSite=Strict; Secure`\r\n\r\nconst setCookieValue = (key: string, value: string): boolean => {\r\n  try {\r\n    const cookieKey = `${cookiePrefix}${key}`\r\n    let cookie = `${cookieKey}=${encodeURIComponent(value)}`\r\n    cookie += `${cookieBase}; Max-Age=2147483647`\r\n\r\n    // Test if cookie exceeds size limit\r\n    if (cookie.length > 4096) {\r\n      throw new Error(`Cookie size limit exceeded for key '${key}'. Cookie size: ${cookie.length} bytes, limit: 4096 bytes.`)\r\n    }\r\n\r\n    document.cookie = cookie\r\n\r\n    // Verify the cookie was actually saved by reading it back\r\n    const savedValue = getCookieValue(key)\r\n    if (savedValue !== value) {\r\n      console.warn(`Cookie verification failed for key '${key}'. Expected: ${value}, Got: ${savedValue}`)\r\n      return false\r\n    }\r\n\r\n    return true\r\n  } catch (error) {\r\n    console.error(`Failed to set cookie for key '${key}':`, error)\r\n    window.showNotification(`Failed to save data to cookies: ${error.message}`, 'Consider switching to localStorage in advanced settings.', true)\r\n    return false\r\n  }\r\n}\r\n\r\nconst deleteCookie = (key: string) => {\r\n  const cookieKey = `${cookiePrefix}${key}`\r\n  document.cookie = `${cookieKey}=; ${cookieBase}; expires=Thu, 01 Jan 1970 00:00:00 UTC;`\r\n}\r\n\r\n// Storage conflict detection and resolution\r\nlet storageConflicts: StorageConflict[] = []\r\n\r\nconst detectStorageConflicts = (): StorageConflict[] => {\r\n  const conflicts: StorageConflict[] = []\r\n\r\n  for (const key of cookieStoreKeys) {\r\n    const localStorageKey = `${localStoragePrefix}${key}`\r\n    const localStorageValue = localStorage.getItem(localStorageKey)\r\n    const cookieValue = getCookieValue(key)\r\n\r\n    if (localStorageValue && cookieValue) {\r\n      try {\r\n        const localParsed = JSON.parse(localStorageValue)\r\n        const cookieParsed = JSON.parse(cookieValue)\r\n\r\n        if (localStorage.getItem(`${localStorageKey}:migrated`)) {\r\n          continue\r\n        }\r\n\r\n        // Extract timestamps if they exist\r\n        const localTimestamp = localParsed?.timestamp\r\n        const cookieTimestamp = cookieParsed?.timestamp\r\n\r\n        // Compare the actual data (excluding timestamp)\r\n        const localData = localTimestamp ? { ...localParsed } : localParsed\r\n        const cookieData = cookieTimestamp ? { ...cookieParsed } : cookieParsed\r\n        delete localData.timestamp\r\n        delete cookieData.timestamp\r\n\r\n        const isDataEmpty = (data: any) => {\r\n          if (typeof data === 'object' && data !== null) {\r\n            return Object.keys(data).length === 0\r\n          }\r\n          return !data && data !== 0 && data !== false\r\n        }\r\n\r\n        if (JSON.stringify(localData) !== JSON.stringify(cookieData) && !isDataEmpty(localData) && !isDataEmpty(cookieData)) {\r\n          conflicts.push({\r\n            key,\r\n            localStorageValue: localData,\r\n            localStorageTimestamp: localTimestamp,\r\n            cookieValue: (typeof cookieData === 'object' && cookieData !== null && 'data' in cookieData) ? cookieData.data : cookieData,\r\n            cookieTimestamp\r\n          })\r\n        }\r\n      } catch (e) {\r\n        console.error(`Failed to parse storage values for conflict detection on key '${key}':`, e, localStorageValue, cookieValue)\r\n      }\r\n    }\r\n  }\r\n\r\n  return conflicts\r\n}\r\n\r\nconst showStorageConflictModal = () => {\r\n  // Import showModal dynamically to avoid circular dependency\r\n  const showModal = (window as any).showModal || ((modal: any) => {\r\n    console.error('Modal system not available:', modal)\r\n    console.warn('Storage conflicts detected but modal system not available:', storageConflicts)\r\n  })\r\n\r\n  setTimeout(() => {\r\n    showModal({ reactType: 'storage-conflict', conflicts: storageConflicts })\r\n  }, 100)\r\n}\r\n\r\nconst migrateLegacyData = () => {\r\n  const proxies = localStorage.getItem('proxies')\r\n  const selectedProxy = localStorage.getItem('selectedProxy')\r\n  if (proxies && selectedProxy) {\r\n    appStorage.proxiesData = {\r\n      proxies: JSON.parse(proxies),\r\n      selected: selectedProxy,\r\n    }\r\n  }\r\n\r\n  const username = localStorage.getItem('username')\r\n  if (username && !username.startsWith('\"')) {\r\n    appStorage.username = username\r\n  }\r\n\r\n  const serversHistoryLegacy = localStorage.getItem('serverConnectionHistory')\r\n  if (serversHistoryLegacy) {\r\n    appStorage.serversHistory = JSON.parse(serversHistoryLegacy)\r\n  }\r\n  localStorage.removeItem('proxies')\r\n  localStorage.removeItem('selectedProxy')\r\n  localStorage.removeItem('serverConnectionHistory')\r\n}\r\n\r\nconst defaultStorageData: StorageData = {\r\n  cookieStorage: !!process.env.ENABLE_COOKIE_STORAGE && !process.env?.SINGLE_FILE_BUILD,\r\n  customCommands: undefined,\r\n  username: undefined,\r\n  keybindings: undefined,\r\n  changedSettings: {},\r\n  proxiesData: undefined,\r\n  serversHistory: [],\r\n  authenticatedAccounts: [],\r\n  serversList: undefined,\r\n  modsAutoUpdateLastCheck: undefined,\r\n  firstModsPageVisit: true,\r\n}\r\n\r\nexport const setStorageDataOnAppConfigLoad = (appConfig: AppConfig) => {\r\n  appStorage.username ??= getRandomUsername(appConfig)\r\n}\r\n\r\nexport const getRandomUsername = (appConfig: AppConfig) => {\r\n  if (!appConfig.defaultUsername) return ''\r\n\r\n  const username = appConfig.defaultUsername\r\n    .replaceAll(/{(\\d+)-(\\d+)}/g, (_, start, end) => {\r\n      const min = Number(start)\r\n      const max = Number(end)\r\n      return Math.floor(Math.random() * (max - min + 1) + min).toString()\r\n    })\r\n    .replaceAll('{num}', () => Math.floor(Math.random() * 10).toString())\r\n\r\n  return username\r\n}\r\n\r\nexport const appStorage = proxy({ ...defaultStorageData })\r\n\r\n// Track if cookies failed in this session\r\nlet cookiesFailedThisSession = false\r\n\r\n// Check if cookie storage should be used (will be set by options)\r\nconst shouldUseCookieStorage = () => {\r\n  // If cookies failed this session, don't try again\r\n  if (cookiesFailedThisSession) {\r\n    return false\r\n  }\r\n\r\n  const isSecureCookiesAvailable = () => {\r\n    // either https or localhost\r\n    return window.location.protocol === 'https:' || (window.location.hostname === 'localhost')\r\n  }\r\n  if (!isSecureCookiesAvailable()) {\r\n    return false\r\n  }\r\n\r\n  const localStorageValue = localStorage.getItem(`${localStoragePrefix}cookieStorage`)\r\n  if (localStorageValue === null) {\r\n    return appStorage.cookieStorage === true\r\n  }\r\n  return localStorageValue === 'true'\r\n}\r\n\r\n// Restore data from storage with conflict detection\r\nconst restoreStorageData = () => {\r\n  const useCookieStorage = shouldUseCookieStorage()\r\n\r\n  if (useCookieStorage) {\r\n    // Detect conflicts first\r\n    storageConflicts = detectStorageConflicts()\r\n\r\n    if (storageConflicts.length > 0) {\r\n      // Show conflict resolution modal\r\n      showStorageConflictModal()\r\n      return // Don't restore data until conflict is resolved\r\n    }\r\n  }\r\n\r\n  for (const key of Object.keys(defaultStorageData)) {\r\n    const typedKey = key\r\n    const prefixedKey = `${localStoragePrefix}${key}`\r\n    const aliasedKey = oldKeysAliases[typedKey]\r\n\r\n    let storedValue: string | null = null\r\n    let cookieValueCanBeUsed = false\r\n    let usingLocalStorageValue = false\r\n\r\n    // Try cookie storage first if enabled and key is in cookieStoreKeys\r\n    if (useCookieStorage && cookieStoreKeys.includes(typedKey)) {\r\n      storedValue = getCookieValue(key)\r\n      cookieValueCanBeUsed = true\r\n    }\r\n\r\n    // Fallback to localStorage if no cookie value found\r\n    if (storedValue === null) {\r\n      storedValue = localStorage.getItem(prefixedKey) ?? (aliasedKey ? localStorage.getItem(aliasedKey) : null)\r\n      usingLocalStorageValue = true\r\n    }\r\n\r\n    if (storedValue) {\r\n      try {\r\n        let parsed = JSON.parse(storedValue)\r\n\r\n        // Handle timestamped data\r\n        if (parsed && typeof parsed === 'object' && parsed.timestamp) {\r\n          delete parsed.timestamp\r\n          // If it was a wrapped primitive, unwrap it\r\n          if ('data' in parsed && Object.keys(parsed).length === 1) {\r\n            parsed = parsed.data\r\n          }\r\n        }\r\n\r\n        appStorage[typedKey] = parsed\r\n\r\n        if (usingLocalStorageValue && cookieValueCanBeUsed) {\r\n          // migrate localStorage to cookie\r\n          saveKey(key)\r\n          markLocalStorageAsMigrated(key)\r\n        }\r\n      } catch (e) {\r\n        console.error(`Failed to parse stored value for ${key}:`, e)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst markLocalStorageAsMigrated = (key: keyof StorageData) => {\r\n  const localStorageKey = `${localStoragePrefix}${key}`\r\n  if (migrateRemoveLocalStorage) {\r\n    localStorage.removeItem(localStorageKey)\r\n    return\r\n  }\r\n\r\n  localStorage.setItem(`${localStorageKey}:migrated`, 'true')\r\n}\r\n\r\nconst saveKey = (key: keyof StorageData) => {\r\n  const useCookieStorage = shouldUseCookieStorage()\r\n  const prefixedKey = `${localStoragePrefix}${key}`\r\n  const value = appStorage[key]\r\n\r\n  const dataToSave = value === undefined ? undefined : (\r\n    value && typeof value === 'object' && !Array.isArray(value)\r\n      ? { ...value, timestamp: Date.now() }\r\n      : { data: value, timestamp: Date.now() }\r\n  )\r\n\r\n  const serialized = dataToSave === undefined ? undefined : JSON.stringify(dataToSave)\r\n\r\n  let useLocalStorage = true\r\n  // Save to cookie if enabled and key is in cookieStoreKeys\r\n  if (useCookieStorage && cookieStoreKeys.includes(key)) {\r\n    useLocalStorage = false\r\n    if (serialized === undefined) {\r\n      deleteCookie(key)\r\n    } else {\r\n      const success = setCookieValue(key, serialized)\r\n      if (success) {\r\n        // Remove from localStorage if cookie save was successful\r\n        markLocalStorageAsMigrated(key)\r\n      } else {\r\n        // Cookie save failed, disable cookies for this session and fallback to localStorage\r\n        console.warn(`Cookie save failed for key '${key}', disabling cookies for this session`)\r\n        cookiesFailedThisSession = true\r\n        useLocalStorage = true\r\n      }\r\n    }\r\n  }\r\n\r\n  if (useLocalStorage) {\r\n    // Save to localStorage\r\n    if (value === undefined) {\r\n      localStorage.removeItem(prefixedKey)\r\n    } else {\r\n      localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }\r\n  }\r\n}\r\n\r\nsubscribe(appStorage, (ops) => {\r\n  for (const op of ops) {\r\n    const [type, path, value] = op\r\n    const key = path[0]\r\n    saveKey(key as keyof StorageData)\r\n  }\r\n})\r\n\r\nexport const resetAppStorage = () => {\r\n  for (const key of Object.keys(appStorage)) {\r\n    appStorage[key as keyof StorageData] = defaultStorageData[key as keyof StorageData]\r\n  }\r\n\r\n  for (const key of Object.keys(localStorage)) {\r\n    if (key.startsWith(localStoragePrefix)) {\r\n      localStorage.removeItem(key)\r\n    }\r\n  }\r\n\r\n  if (!shouldUseCookieStorage()) return\r\n  const shouldContinue = window.confirm(`Removing all synced cookies will remove all data from all ${topLevelDomain} subdomains websites. Continue?`)\r\n  if (!shouldContinue) return\r\n\r\n  // Clear cookies\r\n  for (const key of cookieStoreKeys) {\r\n    deleteCookie(key)\r\n  }\r\n}\r\n\r\n// Export functions for conflict resolution\r\nexport const resolveStorageConflicts = (useLocalStorage: boolean) => {\r\n  if (useLocalStorage) {\r\n    // Disable cookie storage and use localStorage data\r\n    appStorage.cookieStorage = false\r\n  } else {\r\n    // Remove localStorage data and continue using cookie storage\r\n    for (const conflict of storageConflicts) {\r\n      const prefixedKey = `${localStoragePrefix}${conflict.key}`\r\n      localStorage.removeItem(prefixedKey)\r\n    }\r\n  }\r\n\r\n  // forcefully set data again\r\n  for (const conflict of storageConflicts) {\r\n    appStorage[conflict.key] = useLocalStorage ? conflict.localStorageValue : conflict.cookieValue\r\n    saveKey(conflict.key as keyof StorageData)\r\n  }\r\n\r\n  // Clear conflicts and restore data\r\n  storageConflicts = []\r\n  restoreStorageData()\r\n}\r\n\r\nexport const getStorageConflicts = () => storageConflicts\r\n\r\nmigrateLegacyData()\r\n\r\n// Restore data after checking for conflicts\r\nrestoreStorageData()\r\n","import { RefObject, useEffect, useLayoutEffect, useRef, useState } from 'react'\r\nimport { pixelartIcons } from '../PixelartIcon'\r\n\r\nexport const useScrollBehavior = (\r\n  elementRef: RefObject<HTMLElement>,\r\n  {\r\n    messages,\r\n    opened\r\n  }: {\r\n    messages: readonly any[],\r\n    opened?: boolean\r\n  }\r\n) => {\r\n  const openedWasAtBottom = useRef(true) // before new messages\r\n  const [currentlyAtBottom, setCurrentlyAtBottom] = useState(true)\r\n  const scrollTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  const isAtBottom = () => {\r\n    if (!elementRef.current) return true\r\n    const { scrollTop, scrollHeight, clientHeight } = elementRef.current\r\n    const distanceFromBottom = Math.abs(scrollHeight - clientHeight - scrollTop)\r\n    return distanceFromBottom < 1\r\n  }\r\n\r\n  const scrollToBottom = (behavior: ScrollBehavior = 'instant') => {\r\n    if (!elementRef.current) return\r\n\r\n    // Clear any existing scroll timeout\r\n    if (scrollTimeoutRef.current) {\r\n      clearTimeout(scrollTimeoutRef.current)\r\n    }\r\n\r\n    const el = elementRef.current\r\n\r\n    // Immediate scroll\r\n    el.scrollTop = el.scrollHeight\r\n\r\n    // Double-check after a short delay to ensure we're really at the bottom\r\n    scrollTimeoutRef.current = setTimeout(() => {\r\n      if (!elementRef.current) return\r\n      const el = elementRef.current\r\n      el.scrollTo({\r\n        top: el.scrollHeight,\r\n        behavior\r\n      })\r\n      setCurrentlyAtBottom(true)\r\n      openedWasAtBottom.current = true\r\n    }, 5)\r\n  }\r\n\r\n  // Handle scroll position tracking\r\n  useEffect(() => {\r\n    const element = elementRef.current\r\n    if (!element) return\r\n\r\n    const handleScroll = () => {\r\n      const atBottom = isAtBottom()\r\n      openedWasAtBottom.current = atBottom\r\n      setCurrentlyAtBottom(atBottom)\r\n    }\r\n\r\n    element.addEventListener('scroll', handleScroll)\r\n    return () => {\r\n      element.removeEventListener('scroll', handleScroll)\r\n      if (scrollTimeoutRef.current) {\r\n        clearTimeout(scrollTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Handle opened state changes\r\n  useLayoutEffect(() => {\r\n    if (opened) {\r\n      // Wait a frame before scrolling to ensure DOM has updated\r\n      requestAnimationFrame(() => {\r\n        scrollToBottom()\r\n      })\r\n    } else if (elementRef.current) {\r\n      scrollToBottom()\r\n    }\r\n  }, [opened])\r\n\r\n  // Handle messages changes\r\n  useLayoutEffect(() => {\r\n    if ((!opened || (opened && openedWasAtBottom.current)) && elementRef.current) {\r\n      scrollToBottom()\r\n    }\r\n  }, [messages])\r\n\r\n  return {\r\n    scrollToBottom,\r\n    isAtBottom,\r\n    wasAtBottom: () => openedWasAtBottom.current,\r\n    currentlyAtBottom\r\n  }\r\n}\r\n","import { appQueryParams } from '../appParams'\r\nimport { miscUiState } from '../globalState'\r\nimport { BaseServerInfo } from './AddServerOrConnect'\r\nimport { lastConnectOptions } from './AppStatusProvider'\r\nimport { appStorage, StoreServerItem } from './appStorageProvider'\r\n\r\nconst serversListQs = appQueryParams.serversList\r\n\r\nexport interface AuthenticatedAccount {\r\n  // type: 'microsoft'\r\n  username: string\r\n  cachedTokens?: {\r\n    data: any\r\n    expiresOn: number\r\n  }\r\n}\r\n\r\nexport interface ServerConnectionHistory {\r\n  ip: string\r\n  numConnects: number\r\n  lastConnected: number\r\n  version?: string\r\n}\r\n\r\nexport function updateServerConnectionHistory (ip: string, version?: string) {\r\n  try {\r\n    const history = [...(appStorage.serversHistory ?? [])]\r\n    const existingServer = history.find(s => s.ip === ip)\r\n    if (existingServer) {\r\n      existingServer.numConnects++\r\n      existingServer.lastConnected = Date.now()\r\n      if (version) existingServer.version = version\r\n    } else {\r\n      history.push({\r\n        ip,\r\n        numConnects: 1,\r\n        lastConnected: Date.now(),\r\n        version\r\n      })\r\n    }\r\n    appStorage.serversHistory = history\r\n  } catch (err) {\r\n    console.error('Failed to update server connection history:', err)\r\n  }\r\n}\r\n\r\nexport const getServerIndex = () => {\r\n  const lastConnectedIp = lastConnectOptions.value?.server\r\n  const index = miscUiState.loadedServerIndex\r\n  if (index !== undefined) return index\r\n  if (lastConnectedIp) {\r\n    const idx = appStorage.serversList?.findIndex(s => s.ip === lastConnectedIp).toString()\r\n    if (idx === '-1') return undefined\r\n    return idx\r\n  }\r\n  return undefined\r\n}\r\n\r\nexport const findServerPassword = () => {\r\n  const { username } = bot\r\n  const index = getServerIndex()\r\n  if (index === undefined) return\r\n  const pswd = appStorage.serversList?.[index]?.autoLogin?.[username]\r\n  if (pswd) return pswd\r\n  // try other servers with same host\r\n  return appStorage.serversList?.find(s => s.ip === lastConnectOptions.value?.server && s.autoLogin?.[username])?.autoLogin?.[username]\r\n}\r\n\r\nexport const updateLoadedServerData = (callback: (data: StoreServerItem) => StoreServerItem, index = miscUiState.loadedServerIndex) => {\r\n  if (index === undefined) {\r\n    const idx = getServerIndex()\r\n    if (idx === undefined) return\r\n    index = idx\r\n  }\r\n\r\n  const servers = [...(appStorage.serversList ?? [])]\r\n  const server = servers[index]\r\n  if (!server) return\r\n  servers[index] = callback(server)\r\n  setNewServersList(servers)\r\n}\r\n\r\nexport const setNewServersList = (serversList: StoreServerItem[], force = false) => {\r\n  if (serversListQs && !force) return\r\n  appStorage.serversList = serversList\r\n}\r\n\r\nexport const updateAuthenticatedAccountData = (callback: (data: AuthenticatedAccount[]) => AuthenticatedAccount[]) => {\r\n  const accounts = appStorage.authenticatedAccounts\r\n  const newAccounts = callback(accounts)\r\n  appStorage.authenticatedAccounts = newAccounts\r\n}\r\n\r\nexport function getServerConnectionHistory (): ServerConnectionHistory[] {\r\n  return appStorage.serversHistory ?? []\r\n}\r\n","import { proxy } from 'valtio'\r\nimport type { PacketData } from '../ReplayPanel'\r\nimport { appQueryParams, updateQsParam } from '../../appParams'\r\n\r\nexport const packetsReplayState = proxy({\r\n  packetsPlayback: [] as PacketData[],\r\n  isOpen: false,\r\n  isMinimized: false,\r\n  isRecording: false,\r\n  replayName: '',\r\n  isPlaying: false,\r\n  progress: {\r\n    current: 0,\r\n    total: 0\r\n  },\r\n  speed: appQueryParams.replaySpeed ? parseFloat(appQueryParams.replaySpeed) : 1,\r\n  customButtons: {\r\n    validateClientPackets: {\r\n      state: appQueryParams.replayValidateClient === 'true',\r\n      label: 'C',\r\n      tooltip: 'Validate client packets'\r\n    },\r\n    stopOnError: {\r\n      state: appQueryParams.replayStopOnError === 'true',\r\n      label: 'E',\r\n      tooltip: 'Stop the replay when an error occurs'\r\n    },\r\n    skipMissingOnTimeout: {\r\n      state: appQueryParams.replaySkipMissingOnTimeout === 'true',\r\n      label: 'T',\r\n      tooltip: 'Skip missing packets on timeout'\r\n    },\r\n    packetsSenderDelay: {\r\n      state: appQueryParams.replayPacketsSenderDelay === 'true',\r\n      label: 'D',\r\n      tooltip: 'Send packets with an additional delay'\r\n    }\r\n  }\r\n})\r\n\r\nexport const onChangeButtonState = (button: keyof typeof packetsReplayState.customButtons, state: boolean) => {\r\n  packetsReplayState.customButtons[button].state = state\r\n  switch (button) {\r\n    case 'validateClientPackets': {\r\n      updateQsParam('replayValidateClient', String(state))\r\n      break\r\n    }\r\n    case 'stopOnError': {\r\n      updateQsParam('replayStopOnError', String(state))\r\n      break\r\n    }\r\n    case 'skipMissingOnTimeout': {\r\n      updateQsParam('replaySkipMissingOnTimeout', String(state))\r\n      break\r\n    }\r\n    case 'packetsSenderDelay': {\r\n      updateQsParam('replayPacketsSenderDelay', String(state))\r\n      break\r\n    }\r\n  }\r\n}\r\n","import { useCallback, useRef, useState } from 'react'\r\n\r\ninterface LongPressOptions {\r\n  shouldPreventDefault?: boolean;\r\n  delay?: number;\r\n}\r\n\r\nconst useLongPress = (\r\n  onLongPress: () => void,\r\n  onClick: () => void,\r\n  { shouldPreventDefault = false, delay = 300 }: LongPressOptions = {}\r\n) => {\r\n  const [longPressTriggered, setLongPressTriggered] = useState(false)\r\n  const timeout = useRef<number | undefined>()\r\n  const target = useRef<EventTarget | null>(null)\r\n\r\n  const start = useCallback(\r\n    (event: React.MouseEvent | React.TouchEvent) => {\r\n      if (shouldPreventDefault && event.target) {\r\n        event.target.addEventListener('touchend', preventDefault, {\r\n          passive: false\r\n        })\r\n        target.current = event.target\r\n      }\r\n      timeout.current = window.setTimeout(() => {\r\n        onLongPress()\r\n        setLongPressTriggered(true)\r\n      }, delay)\r\n    },\r\n    [onLongPress, delay, shouldPreventDefault]\r\n  )\r\n\r\n  const clear = useCallback(\r\n    (event: React.MouseEvent | React.TouchEvent) => {\r\n      if (timeout.current) {\r\n        clearTimeout(timeout.current)\r\n        timeout.current = undefined\r\n      }\r\n\r\n      setLongPressTriggered(false)\r\n\r\n      if (shouldPreventDefault && target.current) {\r\n        target.current.removeEventListener('touchend', preventDefault)\r\n        target.current = null\r\n      }\r\n    },\r\n    [shouldPreventDefault, onClick, longPressTriggered]\r\n  )\r\n\r\n  return {\r\n    onMouseDown: (e: React.MouseEvent) => start(e),\r\n    onTouchStart: (e: React.TouchEvent) => start(e),\r\n    onMouseUp: (e: React.MouseEvent) => clear(e),\r\n    onMouseLeave: (e: React.MouseEvent) => clear(e),\r\n    onTouchEnd: (e: React.TouchEvent) => clear(e),\r\n    onClick (e: React.MouseEvent) {\r\n      onClick()\r\n    }\r\n  }\r\n}\r\n\r\nconst preventDefault = (event: Event) => {\r\n  if (!('touches' in event)) return\r\n\r\n  const touchEvent = event as TouchEvent\r\n  if (touchEvent.touches.length < 2 && event.preventDefault) {\r\n    event.preventDefault()\r\n  }\r\n}\r\n\r\nexport default useLongPress\r\n","import { useEffect, useRef } from 'react'\r\nimport { UAParser } from 'ua-parser-js'\r\n\r\nexport function useDidUpdateEffect (fn, inputs) {\r\n  const isMountingRef = useRef(false)\r\n\r\n  useEffect(() => {\r\n    isMountingRef.current = true\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isMountingRef.current) {\r\n      isMountingRef.current = false\r\n    } else {\r\n      return fn()\r\n    }\r\n  }, inputs)\r\n}\r\n\r\nexport const ua = new UAParser(navigator.userAgent)\r\n\r\nexport const isIos = ua.getOS().name === 'iOS'\r\n\r\nexport const reactKeyForMessage = (message) => {\r\n  return typeof message === 'string' ? message : JSON.stringify(message)\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport { useEffect, useMemo } from 'react'\r\nimport { useMedia } from 'react-use'\r\nimport { activeModalStack, miscUiState } from '../globalState'\r\n\r\nexport const watchedModalsFromHooks = proxy({\r\n  value: [] as string[]\r\n})\r\n// todo should not be there\r\nexport const hardcodedKnownModals = [\r\n  'empty',\r\n  'player_win:',\r\n  'divkit:',\r\n  'full-map' // todo\r\n]\r\n\r\nexport const useUsingTouch = () => {\r\n  return useSnapshot(miscUiState).currentTouch\r\n}\r\nexport const useIsModalActive = (modal: string, useIncludes = false) => {\r\n  useMemo(() => {\r\n    watchedModalsFromHooks.value.push(modal)\r\n  }, [])\r\n  useEffect(() => {\r\n    // watchedModalsFromHooks.add(modal)\r\n    return () => {\r\n      watchedModalsFromHooks.value = watchedModalsFromHooks.value.filter(x => x !== modal)\r\n    }\r\n  }, [])\r\n\r\n  const allStack = useSnapshot(activeModalStack)\r\n  return useIncludes ? allStack.some(x => x.reactType === modal) : allStack.at(-1)?.reactType === modal\r\n}\r\n\r\nexport const useIsWidgetActive = (name: string) => {\r\n  return useIsModalActive(`widget-${name}`)\r\n}\r\n\r\nexport const useIsSmallWidth = () => {\r\n  return useMedia('(max-width: 550px)')\r\n}\r\n","/* eslint-disable no-await-in-loop */\r\nimport { join, dirname, basename } from 'path'\r\nimport fs from 'fs'\r\nimport JSZip from 'jszip'\r\nimport { proxy, subscribe } from 'valtio'\r\nimport { armorTextures } from 'renderer/viewer/three/entity/armorModels'\r\nimport { copyFilesAsyncWithProgress, mkdirRecursive, removeFileRecursiveAsync } from './browserfs'\r\nimport { showNotification } from './react/NotificationProvider'\r\nimport { options } from './optionsStorage'\r\nimport { showOptionsModal } from './react/SelectOption'\r\nimport { appReplacableResources, resourcesContentOriginal } from './generated/resources'\r\nimport { gameAdditionalState, miscUiState } from './globalState'\r\nimport { watchUnloadForCleanup } from './gameUnload'\r\nimport { createConsoleLogProgressReporter, createFullScreenProgressReporter, ProgressReporter } from './core/progressReporter'\r\n\r\nexport const resourcePackState = proxy({\r\n  resourcePackInstalled: false,\r\n  isServerDownloading: false,\r\n  isServerInstalling: false\r\n})\r\n\r\nconst getLoadedImage = async (url: string) => {\r\n  const img = new Image()\r\n  img.src = url\r\n  await new Promise((resolve, reject) => {\r\n    img.onload = resolve\r\n    img.onerror = reject\r\n  })\r\n  return img\r\n}\r\n\r\nconst resourcepackPackBasePath = '/data/resourcePacks/'\r\nexport const uninstallResourcePack = async (name = 'default') => {\r\n  if (await existsAsync('/resourcepack/pack.mcmeta')) {\r\n    await removeFileRecursiveAsync('/resourcepack', false)\r\n    gameAdditionalState.usingServerResourcePack = false\r\n  }\r\n  const basePath = resourcepackPackBasePath + name\r\n  if (!(await existsAsync(basePath))) return\r\n  await removeFileRecursiveAsync(basePath)\r\n  options.enabledResourcepack = null\r\n  await updateTexturePackInstalledState()\r\n}\r\n\r\nexport const getResourcePackNames = async () => {\r\n  // TODO\r\n  try {\r\n    return { [await fs.promises.readFile(join(resourcepackPackBasePath, 'default', 'name.txt'), 'utf8')]: true }\r\n  } catch (err) {\r\n    return {}\r\n  }\r\n}\r\n\r\nexport const fromTexturePackPath = (path) => {\r\n  // return join(texturePackBasePath, path)\r\n}\r\n\r\nexport const updateTexturePackInstalledState = async () => {\r\n  try {\r\n    resourcePackState.resourcePackInstalled = await existsAsync(resourcepackPackBasePath + 'default')\r\n  } catch {\r\n  }\r\n}\r\n\r\nexport const installTexturePackFromHandle = async () => {\r\n  // await mkdirRecursive(texturePackBasePath)\r\n  // await copyFilesAsyncWithProgress('/world', texturePackBasePath)\r\n  // await completeTexturePackInstall()\r\n}\r\n\r\nexport const installResourcepackPack = async (file: File | ArrayBuffer, progressReporter: ProgressReporter, displayName = file['name'], name = 'default', isServer = false) => {\r\n  console.time('processResourcePack')\r\n  const installPath = isServer ? '/resourcepack/' : resourcepackPackBasePath + name\r\n  try {\r\n    await progressReporter.executeWithMessage('Uninstalling resource pack', async () => {\r\n      await uninstallResourcePack(name)\r\n    })\r\n  } catch (err) {\r\n  }\r\n  const status = 'Installing resource pack: copying all files'\r\n  progressReporter.beginStage('copy-files-resourcepack', status)\r\n\r\n  // extract the zip and write to fs every file in it\r\n  const zip = new JSZip()\r\n  const zipFile = await zip.loadAsync(file)\r\n  if (!zipFile.file('pack.mcmeta')) throw new Error('Not a resource pack: missing /pack.mcmeta')\r\n  await mkdirRecursive(installPath)\r\n\r\n  const allFilesArr = Object.entries(zipFile.files)\r\n    .filter(([path]) => !path.startsWith('.') && !path.startsWith('_') && !path.startsWith('/')) // ignore dot files and __MACOSX\r\n  let done = 0\r\n  const upStatus = () => {\r\n    progressReporter.reportProgress('copy-files-resourcepack', done / allFilesArr.length)\r\n  }\r\n  const createdDirs = new Set<string>()\r\n  const copyTasks = [] as Array<Promise<void>>\r\n  console.time('resourcePackCopy')\r\n  await Promise.all(allFilesArr.map(async ([path, file]) => {\r\n    const writePath = join(installPath, path)\r\n    if (path.endsWith('/')) return\r\n    const dir = dirname(writePath)\r\n    if (!createdDirs.has(dir)) {\r\n      await mkdirRecursive(dir)\r\n      createdDirs.add(dir)\r\n    }\r\n    if (copyTasks.length > 100) {\r\n      await Promise.all(copyTasks)\r\n      copyTasks.length = 0\r\n    }\r\n    const promise = fs.promises.writeFile(writePath, Buffer.from(await file.async('arraybuffer')) as any)\r\n    copyTasks.push(promise)\r\n    await promise\r\n    done++\r\n    upStatus()\r\n  }))\r\n  console.timeEnd('resourcePackCopy')\r\n  await completeResourcepackPackInstall(displayName, name, isServer, progressReporter)\r\n  console.log('resource pack install done')\r\n  console.timeEnd('processResourcePack')\r\n}\r\n\r\n// or enablement\r\nexport const completeResourcepackPackInstall = async (displayName: string | undefined, name: string, isServer: boolean, progressReporter: ProgressReporter) => {\r\n  const basePath = isServer ? '/resourcepack/' : resourcepackPackBasePath + name\r\n  if (displayName) {\r\n    await fs.promises.writeFile(join(basePath, 'name.txt'), displayName, 'utf8')\r\n  }\r\n\r\n  await updateTextures(progressReporter)\r\n  if (currentErrors.length > 0) {\r\n    showNotification(`Resource pack installed & enabled with ${currentErrors.length} errors`)\r\n    console.error('Resource pack installed & enabled with errors:', currentErrors)\r\n  } else {\r\n    showNotification('Resource pack installed & enabled')\r\n  }\r\n  await updateTexturePackInstalledState()\r\n  if (isServer) {\r\n    gameAdditionalState.usingServerResourcePack = true\r\n  } else {\r\n    options.enabledResourcepack = name\r\n  }\r\n\r\n  progressReporter.end()\r\n}\r\n\r\nconst existsAsync = async (path) => {\r\n  try {\r\n    await fs.promises.stat(path)\r\n    return true\r\n  } catch (err) {\r\n    return false\r\n  }\r\n}\r\n\r\nconst arrEqual = (a: any[], b: any[]) => a.length === b.length && a.every((x) => b.includes(x))\r\n\r\nconst getSizeFromImage = async (filePath: string) => {\r\n  const probeImg = new Image()\r\n  const file = await fs.promises.readFile(filePath, 'base64')\r\n  probeImg.src = `data:image/png;base64,${file}`\r\n  await new Promise((resolve, reject) => {\r\n    probeImg.addEventListener('load', resolve)\r\n  })\r\n  if (probeImg.width !== probeImg.height) throw new Error(`Probe texture ${filePath} is not square`)\r\n  return probeImg.width\r\n}\r\n\r\nexport const getActiveResourcepackBasePath = async () => {\r\n  if (await existsAsync('/resourcepack/pack.mcmeta')) {\r\n    return '/resourcepack'\r\n  }\r\n  const { enabledResourcepack } = options\r\n  // const enabledResourcepack = 'default'\r\n  if (!enabledResourcepack) {\r\n    return null\r\n  }\r\n  if (await existsAsync(`/data/resourcePacks/${enabledResourcepack}/pack.mcmeta`)) {\r\n    return `/data/resourcePacks/${enabledResourcepack}`\r\n  }\r\n  return null\r\n}\r\n\r\nconst isDirSafe = async (filePath: string) => {\r\n  try {\r\n    return await fs.promises.stat(filePath).then(stat => stat.isDirectory()).catch(() => false)\r\n  } catch (err) {\r\n    return false\r\n  }\r\n}\r\n\r\nconst getFilesMapFromDir = async (dir: string) => {\r\n  const files = [] as string[]\r\n  const scan = async (dir) => {\r\n    const dirFiles = await fs.promises.readdir(dir)\r\n    for (const file of dirFiles) {\r\n      const filePath = join(dir, file)\r\n      if (await isDirSafe(filePath)) {\r\n        await scan(filePath)\r\n      } else {\r\n        files.push(filePath)\r\n      }\r\n    }\r\n  }\r\n  await scan(dir)\r\n  return files\r\n}\r\n\r\nlet currentErrors = [] as string[]\r\n\r\nexport const getResourcepackTiles = async (type: 'blocks' | 'items' | 'armor', existingTextures: string[], progressReporter: ProgressReporter) => {\r\n  const basePath = await getActiveResourcepackBasePath()\r\n  if (!basePath) return\r\n  let firstTextureSize: number | undefined\r\n  const namespaces = await fs.promises.readdir(join(basePath, 'assets'))\r\n\r\n  const textures = {} as Record<string, HTMLImageElement>\r\n  let path\r\n  switch (type) {\r\n    case 'blocks':\r\n      path = 'block'\r\n      break\r\n    case 'items':\r\n      path = 'item'\r\n      break\r\n    case 'armor':\r\n      path = 'models/armor'\r\n      break\r\n    default:\r\n      throw new Error('Invalid type')\r\n  }\r\n  for (const namespace of namespaces) {\r\n    const texturesCommonBasePath = `${basePath}/assets/${namespace}/textures`\r\n    const isMinecraftNamespace = namespace === 'minecraft'\r\n    let texturesBasePath = `${texturesCommonBasePath}/${path}`\r\n    const texturesBasePathAlt = `${texturesCommonBasePath}/${path}s`\r\n    if (!(await existsAsync(texturesBasePath))) {\r\n      if (await existsAsync(texturesBasePathAlt)) {\r\n        texturesBasePath = texturesBasePathAlt\r\n      }\r\n    }\r\n    const allInterestedPaths = new Set(\r\n      existingTextures\r\n        .filter(tex => (isMinecraftNamespace && !tex.includes(':')) || (tex.includes(':') && tex.split(':')[0] === namespace))\r\n        .map(tex => {\r\n          tex = tex.split(':')[1] ?? tex\r\n          if (tex.includes('/')) {\r\n            return join(`${texturesCommonBasePath}/${tex}`)\r\n          }\r\n          return join(texturesBasePath, tex)\r\n        })\r\n    )\r\n    // add all files from texturesCommonBasePath\r\n    // if (!isMinecraftNamespace) {\r\n    //   const commonBasePathFiles = await getFilesMapFromDir(texturesCommonBasePath)\r\n    //   for (const file of commonBasePathFiles) {\r\n    //     allInterestedPaths.add(file)\r\n    //   }\r\n    // }\r\n    const allInterestedPathsPerDir = new Map<string, string[]>()\r\n    for (const path of allInterestedPaths) {\r\n      const dir = dirname(path)\r\n      if (!allInterestedPathsPerDir.has(dir)) {\r\n        allInterestedPathsPerDir.set(dir, [])\r\n      }\r\n      const file = basename(path)\r\n      allInterestedPathsPerDir.get(dir)!.push(file)\r\n    }\r\n\r\n    const allInterestedImages = [] as string[]\r\n    for (const [dir, paths] of allInterestedPathsPerDir) {\r\n      if (!await existsAsync(dir)) {\r\n        continue\r\n      }\r\n      const dirImages = (await fs.promises.readdir(dir)).filter(f => f.endsWith('.png')).map(f => f.replace('.png', ''))\r\n      allInterestedImages.push(...dirImages.filter(image => paths.includes(image)).map(image => `${dir}/${image}`))\r\n    }\r\n\r\n    if (allInterestedImages.length === 0) {\r\n      continue\r\n    }\r\n\r\n    const firstImageFile = allInterestedImages[0]!\r\n    try {\r\n      firstTextureSize ??= await getSizeFromImage(`${firstImageFile}.png`)\r\n    } catch (err) { }\r\n    // eslint-disable-next-line @typescript-eslint/no-loop-func\r\n    const newTextures = Object.fromEntries(await Promise.all(allInterestedImages.map(async (image) => {\r\n      try {\r\n        const imagePath = `${image}.png`\r\n        const contents = await fs.promises.readFile(imagePath, 'base64')\r\n        const img = await getLoadedImage(`data:image/png;base64,${contents}`)\r\n        const imageRelative = image.replace(`${texturesBasePath}/`, '').replace(`${texturesCommonBasePath}/`, '')\r\n        const textureName = isMinecraftNamespace ? imageRelative : `${namespace}:${imageRelative}`\r\n\r\n        return [textureName, img]\r\n      } catch (err) {\r\n        const imageRelative = image.replace(`${texturesBasePath}/`, '').replace(`${texturesCommonBasePath}/`, '')\r\n        const textureName = isMinecraftNamespace ? imageRelative : `${namespace}:${imageRelative}`\r\n        currentErrors.push(`[${imageRelative}] ${err.message}`)\r\n        return [textureName, undefined]\r\n      }\r\n    })))\r\n    Object.assign(textures, Object.fromEntries(Object.entries(newTextures).filter(([, img]) => img !== undefined)))\r\n  }\r\n  return {\r\n    firstTextureSize,\r\n    textures,\r\n  }\r\n}\r\n\r\nconst prepareBlockstatesAndModels = async (progressReporter: ProgressReporter) => {\r\n  const resources = appViewer.resourcesManager.currentResources!\r\n  resources.customBlockStates = {}\r\n  resources.customModels = {}\r\n  resources.customItemModelNames = {}\r\n  const usedBlockTextures = new Set<string>()\r\n  const usedItemTextures = new Set<string>()\r\n  const basePath = await getActiveResourcepackBasePath()\r\n  if (!basePath) return\r\n  progressReporter.beginStage('read-resource-pack-blockstates-and-models', 'Reading resource pack blockstates and models')\r\n\r\n  const readModelData = async (path: string, type: 'models' | 'blockstates', namespaceDir: string) => {\r\n    if (!(await existsAsync(path))) return\r\n    const files = await fs.promises.readdir(path)\r\n    const jsons = {} as Record<string, any>\r\n    await Promise.all(files.map(async (file) => {\r\n      const filePath = `${path}/${file}`\r\n      if (file.endsWith('.json')) {\r\n        const contents = await fs.promises.readFile(filePath, 'utf8')\r\n        let name = file.replace('.json', '')\r\n        const isBlock = path.endsWith('block')\r\n        if (type === 'models') {\r\n          name = `${isBlock ? 'block' : 'item'}/${name}`\r\n        }\r\n        const parsed = JSON.parse(contents)\r\n        if (namespaceDir === 'minecraft') {\r\n          jsons[name] = parsed\r\n        }\r\n        jsons[`${namespaceDir}:${name}`] = parsed\r\n        if (type === 'models') {\r\n          for (let texturePath of Object.values(parsed.textures ?? {})) {\r\n            if (typeof texturePath !== 'string') continue\r\n            if (texturePath.startsWith('#')) continue\r\n            if (!texturePath.includes(':')) texturePath = `minecraft:${texturePath}`\r\n            if (isBlock) {\r\n              usedBlockTextures.add(texturePath as string)\r\n            } else {\r\n              usedItemTextures.add(texturePath as string)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }))\r\n    return jsons\r\n  }\r\n\r\n  const readCustomModelData = async (path: string, namespaceDir: string) => {\r\n    if (!(await existsAsync(path))) return\r\n    const files = await fs.promises.readdir(path)\r\n    const customModelData = {} as Record<string, string[]>\r\n    await Promise.all(files.map(async (file) => {\r\n      const filePath = `${path}/${file}`\r\n      if (file.endsWith('.json')) {\r\n        const contents = await fs.promises.readFile(filePath, 'utf8')\r\n        const name = file.replace('.json', '')\r\n        const parsed = JSON.parse(contents)\r\n        const entries: string[] = []\r\n        if (path.endsWith('/items')) { // 1.21.4+\r\n          // TODO: Support other properties too\r\n          if (parsed.model?.type === 'range_dispatch' && parsed.model?.property === 'custom_model_data') {\r\n            for (const entry of parsed.model?.entries ?? []) {\r\n              const threshold = entry.threshold ?? 0\r\n              let modelPath = entry.model?.model\r\n              if (typeof modelPath !== 'string') continue\r\n              if (!modelPath.includes(':')) modelPath = `minecraft:${modelPath}`\r\n              entries[threshold] = modelPath\r\n            }\r\n          }\r\n        } else if (path.endsWith('/models/item')) { // pre 1.21.4\r\n          for (const entry of parsed.overrides ?? []) {\r\n            if (entry.predicate?.custom_model_data && entry.model) {\r\n              let modelPath = entry.model\r\n              if (typeof modelPath !== 'string') continue\r\n              if (!modelPath.includes(':')) modelPath = `minecraft:${modelPath}`\r\n              entries[entry.predicate.custom_model_data] = modelPath\r\n            }\r\n          }\r\n        }\r\n        if (entries.length > 0) {\r\n          customModelData[`${namespaceDir}:${name}`] = entries\r\n        }\r\n      }\r\n    }))\r\n    return customModelData\r\n  }\r\n\r\n  const readData = async (namespaceDir: string) => {\r\n    const blockstatesPath = `${basePath}/assets/${namespaceDir}/blockstates`\r\n    const blockModelsPath = `${basePath}/assets/${namespaceDir}/models/block`\r\n    const itemsPath = `${basePath}/assets/${namespaceDir}/items`\r\n    const itemModelsPath = `${basePath}/assets/${namespaceDir}/models/item`\r\n\r\n    Object.assign(resources.customBlockStates!, await readModelData(blockstatesPath, 'blockstates', namespaceDir))\r\n    Object.assign(resources.customModels!, await readModelData(blockModelsPath, 'models', namespaceDir))\r\n    Object.assign(resources.customModels!, await readModelData(itemModelsPath, 'models', namespaceDir))\r\n\r\n    for (const [key, value] of Object.entries(await readCustomModelData(itemsPath, namespaceDir) ?? {})) {\r\n      resources.customItemModelNames[key] = value\r\n    }\r\n    for (const [key, value] of Object.entries(await readCustomModelData(itemModelsPath, namespaceDir) ?? {})) {\r\n      resources.customItemModelNames[key] = value\r\n    }\r\n  }\r\n\r\n  try {\r\n    const assetsDirs = await fs.promises.readdir(join(basePath, 'assets'))\r\n    for (const assetsDir of assetsDirs) {\r\n      await readData(assetsDir)\r\n    }\r\n  } catch (err) {\r\n    console.error('Failed to read some of resource pack blockstates and models', err)\r\n    currentErrors.push('Failed to read blockstates/models')\r\n    resources.customBlockStates = undefined\r\n    resources.customModels = undefined\r\n    resources.customItemModelNames = {}\r\n  }\r\n  return {\r\n    usedBlockTextures,\r\n    usedItemTextures\r\n  }\r\n}\r\n\r\nconst downloadAndUseResourcePack = async (url: string, progressReporter: ProgressReporter): Promise<void> => {\r\n  progressReporter.beginStage('install-resource-pack', 'Installing server resource pack')\r\n  try {\r\n    resourcePackState.isServerInstalling = true\r\n    resourcePackState.isServerDownloading = true\r\n    progressReporter.beginStage('download-resource-pack', 'Downloading server resource pack')\r\n    console.log('Downloading server resource pack', url)\r\n    console.time('downloadServerResourcePack')\r\n    const response = await fetch(url).catch((err) => {\r\n      console.error(err)\r\n      if (err.message === 'Failed to fetch') {\r\n        err.message = `Check internet connection and ensure server on ${url} support CORS which is not required for the vanilla client, but is required for the web client.`\r\n      }\r\n      progressReporter.error('Failed to download resource pack: ' + err.message)\r\n    })\r\n    console.timeEnd('downloadServerResourcePack')\r\n    if (!response) return\r\n\r\n    const contentLength = response.headers.get('Content-Length')\r\n    const total = contentLength ? parseInt(contentLength, 10) : 0\r\n    let loaded = 0\r\n\r\n    const reader = response.body!.getReader()\r\n    const chunks: Uint8Array[] = []\r\n\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n      const { done, value } = await reader.read()\r\n      if (done) break\r\n\r\n      chunks.push(value)\r\n      loaded += value.length\r\n\r\n      if (total) {\r\n        const progress = Math.round((loaded / total) * 100)\r\n        progressReporter.reportProgress('download-resource-pack', progress / 100)\r\n      }\r\n    }\r\n\r\n    resourcePackState.isServerDownloading = false\r\n    const resourcePackData = await new Blob(chunks).arrayBuffer()\r\n    progressReporter.endStage('install-resource-pack')\r\n    await installResourcepackPack(resourcePackData, progressReporter, undefined, undefined, true).catch((err) => {\r\n      console.error(err)\r\n      showNotification('Failed to install resource pack: ' + err.message)\r\n    })\r\n  } catch (err) {\r\n    console.error('Could not install resource pack', err)\r\n    progressReporter.error('Could not install resource pack: ' + err.message)\r\n  } finally {\r\n    progressReporter.endStage('download-resource-pack')\r\n    resourcePackState.isServerInstalling = false\r\n    resourcePackState.isServerDownloading = false\r\n  }\r\n}\r\n\r\nexport const onAppLoad = () => {\r\n  customEvents.on('mineflayerBotCreated', () => {\r\n    // todo also handle resourcePack\r\n    const handleResourcePackRequest = async (packet) => {\r\n      const start = Date.now()\r\n      console.log('Received resource pack request', packet)\r\n      const promptMessagePacket = ('promptMessage' in packet && packet.promptMessage) ? packet.promptMessage : undefined\r\n      const promptMessageText = promptMessagePacket ? '' : 'Do you want to use server resource pack?'\r\n      // TODO!\r\n      const hash = 'hash' in packet ? packet.hash : '-'\r\n      const forced = 'forced' in packet ? packet.forced : false\r\n      const choice = options.serverResourcePacks === 'never'\r\n        ? false\r\n        : options.serverResourcePacks === 'always'\r\n          ? true\r\n          : await showOptionsModal(promptMessageText, ['Download & Install (recommended)', 'Pretend Installed (not recommended)'], {\r\n            cancel: !forced,\r\n            minecraftJsonMessage: promptMessagePacket,\r\n          })\r\n      if (Date.now() - start < 700) {\r\n        void new Promise(resolve => {\r\n          // wait for state protocol switch\r\n          setTimeout(resolve, 700)\r\n        }).then(() => {\r\n          if (choice === false || choice === 'Pretend Installed (not recommended)' || choice === 'Download & Install (recommended)' || choice) {\r\n            console.log('accepting resource pack')\r\n            bot.acceptResourcePack()\r\n          } else {\r\n            bot.denyResourcePack()\r\n          }\r\n        })\r\n      }\r\n      if (choice === true || choice === 'Download & Install (recommended)') {\r\n        await downloadAndUseResourcePack(packet.url, createFullScreenProgressReporter()).catch((err) => {\r\n          console.error(err)\r\n          showNotification('Failed to download resource pack: ' + err.message)\r\n        })\r\n      }\r\n    }\r\n    bot._client.on('resource_pack_send', handleResourcePackRequest)\r\n    bot._client.on('add_resource_pack' as any, handleResourcePackRequest)\r\n  })\r\n\r\n  subscribe(resourcePackState, () => {\r\n    if (!resourcePackState.resourcePackInstalled) return\r\n    void updateAllReplacableTextures()\r\n  })\r\n}\r\n\r\nconst updateAllReplacableTextures = async () => {\r\n  const basePath = await getActiveResourcepackBasePath()\r\n  const setCustomCss = async (path: string | null, varName: string, repeat = 1) => {\r\n    if (path && await existsAsync(path)) {\r\n      const contents = await fs.promises.readFile(path, 'base64')\r\n      const dataUrl = `data:image/png;base64,${contents}`\r\n      document.body.style.setProperty(varName, repeatArr(`url(${dataUrl})`, repeat).join(', '))\r\n    } else {\r\n      document.body.style.setProperty(varName, '')\r\n    }\r\n  }\r\n  const setCustomPicture = async (key: string, path: string) => {\r\n    let contents = resourcesContentOriginal[key]\r\n    if (await existsAsync(path)) {\r\n      const file = await fs.promises.readFile(path, 'base64')\r\n      const dataUrl = `data:image/png;base64,${file}`\r\n      contents = dataUrl\r\n    }\r\n    appReplacableResources[key].content = contents\r\n  }\r\n  const vars = Object.entries(appReplacableResources).filter(([, x]) => x.cssVar)\r\n  for (const [key, { cssVar, cssVarRepeat, resourcePackPath }] of vars) {\r\n    const resPath = `${basePath}/assets/${resourcePackPath}`\r\n    if (cssVar) {\r\n\r\n      await setCustomCss(resPath, cssVar, cssVarRepeat ?? 1)\r\n    } else {\r\n\r\n      await setCustomPicture(key, resPath)\r\n    }\r\n  }\r\n}\r\n\r\nconst repeatArr = (arr, i) => Array.from({ length: i }, () => arr)\r\n\r\nconst updateTextures = async (progressReporter = createConsoleLogProgressReporter(), skipResourcesLoad = false) => {\r\n  if (!appViewer.resourcesManager.currentResources) {\r\n    appViewer.resourcesManager.resetResources()\r\n  }\r\n  const resources = appViewer.resourcesManager.currentResources!\r\n  currentErrors = []\r\n  const origBlocksFiles = Object.keys(appViewer.resourcesManager.sourceBlocksAtlases.latest.textures)\r\n  const origItemsFiles = Object.keys(appViewer.resourcesManager.sourceItemsAtlases.latest.textures)\r\n  const origArmorFiles = Object.keys(armorTextures)\r\n  const { usedBlockTextures, usedItemTextures } = await prepareBlockstatesAndModels(progressReporter) ?? {}\r\n  progressReporter.beginStage(`generate-atlas-texture-blocks`, `Generating atlas textures`)\r\n  const [\r\n    blocksData,\r\n    itemsData,\r\n    armorData\r\n  ] = await Promise.all([\r\n    getResourcepackTiles('blocks', [...origBlocksFiles, ...usedBlockTextures ?? []], progressReporter),\r\n    getResourcepackTiles('items', [...origItemsFiles, ...usedItemTextures ?? []], progressReporter),\r\n    getResourcepackTiles('armor', origArmorFiles, progressReporter),\r\n    updateAllReplacableTextures()\r\n  ])\r\n  resources.customTextures = {}\r\n\r\n  if (blocksData) {\r\n    resources.customTextures.blocks = {\r\n      tileSize: blocksData.firstTextureSize,\r\n      textures: blocksData.textures\r\n    }\r\n  }\r\n  if (itemsData) {\r\n    resources.customTextures.items = {\r\n      tileSize: itemsData.firstTextureSize,\r\n      textures: itemsData.textures\r\n    }\r\n  }\r\n  if (armorData) {\r\n    resources.customTextures.armor = {\r\n      tileSize: armorData.firstTextureSize,\r\n      textures: armorData.textures\r\n    }\r\n  }\r\n\r\n  if (!skipResourcesLoad) {\r\n    await appViewer.resourcesManager.updateAssetsData({ })\r\n  }\r\n}\r\n\r\nexport const resourcepackReload = async (skipResourcesLoad = false) => {\r\n  await updateTextures(undefined, skipResourcesLoad)\r\n}\r\n\r\nexport const copyServerResourcePackToRegular = async (name = 'default') => {\r\n  // Check if server resource pack exists\r\n  if (!(await existsAsync('/resourcepack/pack.mcmeta'))) {\r\n    throw new Error('No server resource pack is currently installed')\r\n  }\r\n\r\n  // Get display name from server resource pack if available\r\n  let displayName\r\n  try {\r\n    displayName = await fs.promises.readFile('/resourcepack/name.txt', 'utf8')\r\n  } catch {\r\n    displayName = 'Server Resource Pack'\r\n  }\r\n\r\n  // Copy all files from server resource pack to regular location\r\n  const destPath = resourcepackPackBasePath + name\r\n  await mkdirRecursive(destPath)\r\n\r\n  const reporter = createFullScreenProgressReporter()\r\n  reporter.setMessage('Copying server resource pack to user location')\r\n  await copyFilesAsyncWithProgress('/resourcepack', destPath, true, ' (server -> user)')\r\n\r\n  // Complete the installation\r\n  await completeResourcepackPackInstall(displayName, name, false, reporter)\r\n  showNotification('Server resource pack copied to user location')\r\n\r\n  reporter.end()\r\n}\r\n","import { proxy, useSnapshot } from 'valtio'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { useMedia } from 'react-use'\r\nimport { options, watchValue } from './optionsStorage'\r\nimport { useScale } from './react/UIProvider'\r\n\r\nexport const currentScaling = proxy({\r\n  scale: 1,\r\n})\r\nwindow.currentScaling = currentScaling\r\n\r\nconst setScale = () => {\r\n  const scaleValues = [\r\n    { maxWidth: 980, maxHeight: null, scale: 2 },\r\n    { maxWidth: null, maxHeight: 390, scale: 1.5 }, // todo allow to set the scaling at 360-400 (dynamic scaling setting)\r\n    { maxWidth: 620, maxHeight: null, scale: 1 },\r\n\r\n    { maxWidth: 620, minHeight: 240, scale: 1.4 },\r\n  ]\r\n\r\n  const { innerWidth, innerHeight } = window\r\n\r\n  let result = options.guiScale\r\n  for (const { maxWidth, maxHeight, scale, minHeight } of scaleValues) {\r\n    if ((!maxWidth || innerWidth <= maxWidth) && (!maxHeight || innerHeight <= maxHeight) && (!minHeight || innerHeight >= minHeight)) {\r\n      result = scale\r\n    }\r\n  }\r\n\r\n  currentScaling.scale = result\r\n}\r\n\r\n\r\nsetScale()\r\nsubscribeKey(options, 'guiScale', setScale)\r\nwatchValue(currentScaling, (c) => {\r\n  document.documentElement.style.setProperty('--guiScale', String(c.scale))\r\n  document.documentElement.style.setProperty('--scale', String(c.scale))\r\n})\r\nwindow.addEventListener('resize', setScale)\r\n\r\nexport const useAppScale = () => {\r\n  return useSnapshot(currentScaling).scale\r\n}\r\n","//@ts-check\r\nexport * from 'crypto-browserify'\r\nexport function createPublicKey() { }\r\n\r\n// CUSTOM SIGN ASYNC IMPLEMENTATION FOR BROWSERS\r\n\r\nexport async function sign(signatureAlgorithm, data, privateKeyPem) {\r\n  if (signatureAlgorithm !== 'RSA-SHA256') throw new Error(`Unsupported signature algorithm ${signatureAlgorithm}`)\r\n  if (typeof privateKeyPem !== 'string') throw new Error(`This implementation only supports strings as private keys`)\r\n  const privateKeyBuffer = pemToArrayBuffer(privateKeyPem)\r\n  const privateKey = await crypto.subtle.importKey(\r\n    'pkcs8', // Chrome has difficulties with pkcs1 and the recommended format is pkcs8\r\n    privateKeyBuffer,\r\n    {\r\n      name: 'RSASSA-PKCS1-v1_5',\r\n      hash: { name: 'SHA-256' },\r\n    },\r\n    true,\r\n    ['sign']\r\n  )\r\n  const signature = await crypto.subtle.sign(\r\n    {\r\n      name: 'RSASSA-PKCS1-v1_5',\r\n      hash: { name: 'SHA-256' }, // SHA-256 hash function\r\n    },\r\n    privateKey,\r\n    data\r\n  )\r\n  return signature\r\n}\r\n\r\nfunction pemToArrayBuffer(pem) {\r\n  pem = pem.trim()\r\n  const pemHeader = '-----BEGIN RSA PRIVATE KEY-----'\r\n  const pemFooter = '-----END RSA PRIVATE KEY-----'\r\n  const pemContents = pem.slice(pemHeader.length, pem.length - pemFooter.length).trim()\r\n  const binaryDerString = atob(pemContents.replaceAll(/\\s/g, ''))\r\n  const binaryDer = new Uint8Array(binaryDerString.length)\r\n  for (let i = 0; i < binaryDerString.length; i++) {\r\n    //@ts-expect-error\r\n    binaryDer[i] = binaryDerString.codePointAt(i)\r\n  }\r\n  return binaryDer.buffer\r\n}\r\n","/* global XMLHttpRequest */\r\n\r\n// Custom DNS resolver made by SiebeDW. Powered by google dns.\r\n// Supported: SRV (not all errors support)\r\nmodule.exports.resolveSrv = function (hostname, _callback) {\r\n  globalThis.setLoadingMessage?.(`Getting SRV using Google DNS`)\r\n\r\n  const callback = (err, result) => {\r\n    globalThis.setLoadingMessage?.(undefined)\r\n    _callback(err, result)\r\n  }\r\n\r\n  const Http = new XMLHttpRequest()\r\n  const url = `https://dns.google.com/resolve?name=${hostname}&type=SRV`\r\n  Http.open('GET', url)\r\n  Http.responseType = 'json'\r\n  Http.send()\r\n\r\n  const minecraftServerHostname = hostname.startsWith('_minecraft._tcp.') ? hostname.slice('_minecraft._tcp.'.length) : null\r\n  if (minecraftServerHostname) {\r\n    Http.onerror = async function () {\r\n      try {\r\n        if (!globalThis.resolveDnsFallback) return\r\n        globalThis.setLoadingMessage?.('Resolving SRV using fallback')\r\n        const result = await globalThis.resolveDnsFallback(minecraftServerHostname)\r\n        callback(null, result ? [{\r\n          priority: 0,\r\n          weight: 0,\r\n          port: result.port,\r\n          name: result.host\r\n        }] : [])\r\n      } catch (err) {\r\n        callback(err)\r\n      }\r\n    }\r\n  }\r\n\r\n  Http.onload = function () {\r\n    const { response } = Http\r\n    if (response.Status === 3) {\r\n      const err = new Error('querySrv ENOTFOUND')\r\n      err.code = 'ENOTFOUND'\r\n      callback(err)\r\n      return\r\n    }\r\n    if (!response.Answer || response.Answer.length < 1) {\r\n      const err = new Error('querySrv ENODATA')\r\n      err.code = 'ENODATA'\r\n      callback(err)\r\n      return\r\n    }\r\n    const willreturn = []\r\n    for (const object of response.Answer) {\r\n      const data = object.data.split(' ')\r\n      if (data[3] === undefined || data[2] === undefined) continue\r\n      willreturn.push({\r\n        priority: data[0],\r\n        weight: data[1],\r\n        port: data[2],\r\n        name: data[3]\r\n      })\r\n    }\r\n    console.log(willreturn)\r\n    callback(null, willreturn)\r\n  }\r\n}\r\n","// eslint-disable-next-line @typescript-eslint/no-useless-empty-export\r\nexport { }\r\nexport default {}\r\n","const BrowserFS = require('browserfs')\r\n\r\nglobalThis.fs ??= BrowserFS.BFSRequire('fs')\r\nglobalThis.fs.promises = new Proxy({}, {\r\n  get(target, p) {\r\n    return (...args) => {\r\n      return globalThis.promises[p](...args)\r\n    }\r\n  }\r\n})\r\n\r\nmodule.exports = globalThis.fs\r\n","import { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport { restoreMinecraftData } from '../optimizeJson'\r\n// import minecraftInitialDataJson from '../../generated/minecraft-initial-data.json'\r\nimport { toMajorVersion } from '../utils'\r\nimport { importLargeData } from '../../generated/large-data-aliases'\r\n\r\nconst customResolver = () => {\r\n  const resolver = Promise.withResolvers()\r\n  let resolvedData\r\n  return {\r\n    ...resolver,\r\n    get resolvedData () {\r\n      return resolvedData\r\n    },\r\n    resolve (data) {\r\n      resolver.resolve(data)\r\n      resolvedData = data\r\n    }\r\n  }\r\n}\r\n\r\nlet dataStatus = 'not-called'\r\n\r\nconst optimizedDataResolver = customResolver()\r\nwindow._MC_DATA_RESOLVER = optimizedDataResolver\r\nwindow._LOAD_MC_DATA = async () => {\r\n  if (optimizedDataResolver.resolvedData) return\r\n  dataStatus = 'loading'\r\n  try {\r\n    optimizedDataResolver.resolve(await importLargeData('mcData'))\r\n    dataStatus = 'ready'\r\n  } catch (e) {\r\n    dataStatus = 'error'\r\n    throw e\r\n  }\r\n}\r\n\r\n// 30 seconds\r\nconst cacheTtl = 30 * 1000\r\nconst cache = new Map<string, any>()\r\nconst cacheTime = new Map<string, number>()\r\nconst possiblyGetFromCache = (version: string) => {\r\n  // if (minecraftInitialDataJson[version] && !optimizedDataResolver.resolvedData) {\r\n  //   return minecraftInitialDataJson[version]\r\n  // }\r\n  if (cache.has(version)) {\r\n    return cache.get(version)\r\n  }\r\n  const inner = () => {\r\n    if (!optimizedDataResolver.resolvedData) {\r\n      throw new Error(`Minecraft data are not ready yet. Ensure you await window._LOAD_MC_DATA() before using it. Status: ${dataStatus}`)\r\n    }\r\n    const dataTypes = Object.keys(optimizedDataResolver.resolvedData)\r\n    const allRestored = {}\r\n    for (const dataType of dataTypes) {\r\n      if (dataType === 'blockCollisionShapes' && versionToNumber(version) >= versionToNumber('1.13')) {\r\n        const shapes = window.globalGetCollisionShapes?.(version)\r\n        if (shapes) {\r\n          allRestored[dataType] = shapes\r\n          continue\r\n        }\r\n      }\r\n\r\n      const data = optimizedDataResolver.resolvedData[dataType]\r\n      if (data.__IS_OPTIMIZED__) {\r\n        allRestored[dataType] = restoreMinecraftData(optimizedDataResolver.resolvedData, dataType, version)\r\n      } else {\r\n        allRestored[dataType] = data[version] ?? data[toMajorVersion(version)]\r\n      }\r\n    }\r\n    return allRestored\r\n  }\r\n  const data = inner()\r\n  cache.set(version, data)\r\n  cacheTime.set(version, Date.now())\r\n  return data\r\n}\r\nwindow.allLoadedMcData = new Proxy({}, {\r\n  get (t, version: string) {\r\n    // special properties like $typeof\r\n    if (version.includes('$')) return\r\n    // todo enumerate all props\r\n    return new Proxy({}, {\r\n      get (target, prop) {\r\n        return possiblyGetFromCache(version)[prop]\r\n      },\r\n    })\r\n  }\r\n})\r\n\r\nsetInterval(() => {\r\n  const now = Date.now()\r\n  for (const [version, time] of cacheTime) {\r\n    if (now - time > cacheTtl) {\r\n      cache.delete(version)\r\n      cacheTime.delete(version)\r\n    }\r\n  }\r\n}, 1000)\r\n\r\nexport const pc = window.allLoadedMcData\r\nexport default { pc }\r\n","import { versionToNumber } from 'renderer/viewer/common/utils'\r\n\r\ntype IdMap = Record<string, number>\r\n\r\ntype DiffData = {\r\n  removed: number[],\r\n  changed: any[],\r\n  removedProps: Array<[number, number[]]>,\r\n  added\r\n}\r\n\r\ntype SourceData = {\r\n  keys: IdMap,\r\n  properties: IdMap\r\n  source: Record<number, any>\r\n  diffs: Record<string, DiffData>\r\n  arrKey?\r\n  __IS_OPTIMIZED__: true\r\n}\r\n\r\nfunction getRecipesProcessorProcessRecipes (items, blocks) {\r\n  return (current) => {\r\n    // can require the same multiple times per different versions\r\n    const itemsIdsMap = Object.fromEntries(items.map((b) => [b.name, b.id]))\r\n    const blocksIdsMap = Object.fromEntries(blocks.map((b) => [b.name, b.id]))\r\n    const keys = Object.keys(current)\r\n    for (const key of keys) {\r\n      if (key === '_proccessed') {\r\n        delete current[key]\r\n        continue\r\n      }\r\n      const mapId = (id) => {\r\n        if (typeof id !== 'string' && typeof id !== 'number') throw new Error('Incorrect type')\r\n        const mapped = itemsIdsMap[id] ?? blocksIdsMap[id]\r\n        if (!mapped) {\r\n          throw new Error(`No item/block name with id ${id}`)\r\n        }\r\n        return mapped\r\n      }\r\n      const processRecipe = (obj) => {\r\n        // if (!obj) return\r\n        // if (Array.isArray(obj)) {\r\n        //   obj.forEach((id, i) => {\r\n        //     obj[i] = mapId(obj[id])\r\n        //   })\r\n        // } else if (obj && typeof obj === 'object') {\r\n        //   if (!'count metadata id'.split(' ').every(x => x in obj)) {\r\n        //     throw new Error(`process error: Unknown deep object pattern: ${JSON.stringify(obj)}`)\r\n        //   }\r\n        //   obj.id = mapId(obj.id)\r\n        // } else {\r\n        //   throw new Error('unknown type')\r\n        // }\r\n        const parseRecipeItem = (item) => {\r\n          if (typeof item === 'number' || typeof item === 'string') return mapId(item)\r\n          if (Array.isArray(item)) return [mapId(item), ...item.slice(1)]\r\n          if (!item) {\r\n            return item\r\n          }\r\n          if ('id' in item) {\r\n            item.id = mapId(item.id)\r\n            return item\r\n          }\r\n          throw new Error('unhandled')\r\n        }\r\n        const maybeProccessShape = (shape) => {\r\n          if (!shape) return\r\n          for (const shapeRow of shape) {\r\n            for (const [i, item] of shapeRow.entries()) {\r\n              shapeRow[i] = parseRecipeItem(item)\r\n            }\r\n          }\r\n        }\r\n        if (obj.result) obj.result = parseRecipeItem(obj.result)\r\n        maybeProccessShape(obj.inShape)\r\n        maybeProccessShape(obj.outShape)\r\n        if (obj.ingredients) {\r\n          for (const [i, ingredient] of obj.ingredients.entries()) {\r\n            obj.ingredients[i] = parseRecipeItem(ingredient)\r\n          }\r\n        }\r\n      }\r\n      // eslint-disable-next-line no-useless-catch\r\n      try {\r\n        const name = mapId(key)\r\n        for (const [i, recipe] of current[key].entries()) {\r\n          // eslint-disable-next-line no-useless-catch\r\n          try {\r\n            processRecipe(recipe)\r\n          } catch (err) {\r\n            // console.warn(`${version} [warn] Removing incorrect recipe: ${err}`)\r\n            // delete current[i]\r\n            throw err\r\n          }\r\n        }\r\n        current[name] = current[key]\r\n      } catch (err) {\r\n        // console.warn(`${version} [warn] Removing incorrect recipe: ${err}`)\r\n        throw err\r\n      }\r\n      delete current[key]\r\n    }\r\n  }\r\n}\r\n\r\nexport const restoreMinecraftData = (allVersionData: any, type: string, version: string) => {\r\n  let restorer\r\n  if (type === 'recipes') {\r\n    restorer = getRecipesProcessorProcessRecipes(\r\n      JsonOptimizer.restoreData(allVersionData.items, version, undefined),\r\n      JsonOptimizer.restoreData(allVersionData.blocks, version, undefined),\r\n    )\r\n  }\r\n  return JsonOptimizer.restoreData(allVersionData[type], version, restorer)\r\n}\r\n\r\nexport default class JsonOptimizer {\r\n  keys = {} as IdMap\r\n  idToKey = {} as Record<number, string>\r\n  properties = {} as IdMap\r\n  source = {}\r\n  previousKeys = [] as number[]\r\n  previousValues = {} as Record<number, any>\r\n  diffs = {} as Record<string, DiffData>\r\n\r\n  constructor (public arrKey?: string, public ignoreChanges = false, public ignoreRemoved = false) { }\r\n\r\n  export () {\r\n    const { keys, properties, source, arrKey, diffs } = this\r\n    return {\r\n      keys,\r\n      properties,\r\n      source,\r\n      arrKey,\r\n      diffs,\r\n      '__IS_OPTIMIZED__': true\r\n    } satisfies SourceData\r\n  }\r\n\r\n  diffObj (diffing): DiffData {\r\n    const removed = [] as number[]\r\n    const changed = [] as any[]\r\n    const removedProps = [] as any[]\r\n    const { arrKey, ignoreChanges, ignoreRemoved } = this\r\n    const added = [] as number[]\r\n\r\n    if (!diffing || typeof diffing !== 'object') throw new Error('diffing data is not object')\r\n    if (Array.isArray(diffing) && !arrKey) throw new Error('arrKey is required for arrays')\r\n    const diffingObj = Array.isArray(diffing) ? Object.fromEntries(diffing.map(x => {\r\n      const key = JsonOptimizer.getByArrKey(x, arrKey!)\r\n      return [key, x]\r\n    })) : diffing\r\n\r\n    const possiblyNewKeys = Object.keys(diffingObj)\r\n    this.keys ??= {}\r\n    this.properties ??= {}\r\n    let lastRootKeyId = Object.values(this.keys).length\r\n    let lastItemKeyId = Object.values(this.properties).length\r\n    for (const key of possiblyNewKeys) {\r\n      this.keys[key] ??= lastRootKeyId++\r\n      this.idToKey[this.keys[key]] = key\r\n    }\r\n    const DEBUG = false\r\n\r\n    const addDiff = (key, newVal, prevVal) => {\r\n      const valueMapped = [] as any[]\r\n      const isItemObj = typeof newVal === 'object' && newVal\r\n      const keyId = this.keys[key]\r\n      if (isItemObj) {\r\n        const removedPropsLocal = [] as any[]\r\n        for (const [prop, val] of Object.entries(newVal)) {\r\n          // mc-data: why push only changed props? eg for blocks only stateId are different between all versions so we skip a lot of duplicated data like block props\r\n          if (!isEqualStructured(newVal[prop], prevVal[prop])) {\r\n            let keyMapped = this.properties[prop]\r\n            if (keyMapped === undefined) {\r\n              this.properties[prop] = lastItemKeyId++\r\n              keyMapped = this.properties[prop]\r\n            }\r\n            valueMapped.push(DEBUG ? prop : keyMapped, newVal[prop])\r\n          }\r\n        }\r\n        // also add undefined for removed props\r\n        for (const prop of Object.keys(prevVal)) {\r\n          if (prop in newVal) continue\r\n          let keyMapped = this.properties[prop]\r\n          if (keyMapped === undefined) {\r\n            this.properties[prop] = lastItemKeyId++\r\n            keyMapped = this.properties[prop]\r\n          }\r\n          removedPropsLocal.push(DEBUG ? prop : keyMapped)\r\n        }\r\n        removedProps.push([keyId, removedPropsLocal])\r\n      }\r\n      changed.push(DEBUG ? key : keyId, isItemObj ? valueMapped : newVal)\r\n    }\r\n    for (const [id, sourceVal] of Object.entries(this.source)) {\r\n      const key = this.idToKey[id]\r\n      const diffVal = diffingObj[key]\r\n      if (!ignoreChanges && diffVal !== undefined) {\r\n        this.previousValues[id] ??= this.source[id]\r\n        const prevVal = this.previousValues[id]\r\n        if (!isEqualStructured(prevVal, diffVal)) {\r\n          addDiff(key, diffVal, prevVal)\r\n        }\r\n        this.previousValues[id] = diffVal\r\n      }\r\n    }\r\n    for (const [key, val] of Object.entries(diffingObj)) {\r\n      const id = this.keys[key]\r\n      if (!this.source[id]) {\r\n        this.source[id] = val\r\n      }\r\n      added.push(id)\r\n    }\r\n\r\n    for (const previousKey of this.previousKeys) {\r\n      const key = this.idToKey[previousKey]\r\n      if (diffingObj[key] === undefined && !ignoreRemoved) {\r\n        removed.push(previousKey)\r\n      }\r\n    }\r\n\r\n    for (const toRemove of removed) {\r\n      this.previousKeys.splice(this.previousKeys.indexOf(toRemove), 1)\r\n    }\r\n\r\n    for (const previousKey of this.previousKeys) {\r\n      const index = added.indexOf(previousKey)\r\n      if (index === -1) continue\r\n      added.splice(index, 1)\r\n    }\r\n\r\n    this.previousKeys = [...this.previousKeys, ...added]\r\n\r\n    return {\r\n      removed,\r\n      changed,\r\n      added,\r\n      removedProps\r\n    }\r\n  }\r\n\r\n  recordDiff (key: string, diffObj: string) {\r\n    const diff = this.diffObj(diffObj)\r\n    // problem is that 274 key 10.20.6 no removed keys in diff created\r\n    this.diffs[key] = diff\r\n  }\r\n\r\n  static isOptimizedChangeDiff (changePossiblyArrDiff) {\r\n    if (!Array.isArray(changePossiblyArrDiff)) return false\r\n    if (changePossiblyArrDiff.length % 2 !== 0) return false\r\n    for (let i = 0; i < changePossiblyArrDiff.length; i += 2) {\r\n      if (typeof changePossiblyArrDiff[i] !== 'number') return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  static restoreData ({ keys, properties, source, arrKey, diffs }: SourceData, targetKey: string, dataRestorer: ((data) => void) | undefined) {\r\n    // if (!diffs[targetKey]) throw new Error(`The requested data to restore with key ${targetKey} does not exist`)\r\n    source = structuredClone(source)\r\n    const keysById = Object.fromEntries(Object.entries(keys).map(x => [x[1], x[0]]))\r\n    const propertiesById = Object.fromEntries(Object.entries(properties).map(x => [x[1], x[0]]))\r\n    const dataByKeys = {} as Record<string, any>\r\n    for (const [versionKey, { added, changed, removed, removedProps }] of Object.entries(diffs)) {\r\n      for (const toAdd of added) {\r\n        dataByKeys[toAdd] = source[toAdd]\r\n      }\r\n      for (const toRemove of removed) {\r\n        delete dataByKeys[toRemove]\r\n      }\r\n      for (let i = 0; i < changed.length; i += 2) {\r\n        const key = changed[i]\r\n        const change = changed[i + 1]\r\n        const isOptimizedChange = JsonOptimizer.isOptimizedChangeDiff(change)\r\n        if (isOptimizedChange) {\r\n          // apply optimized diff\r\n          for (let k = 0; k < change.length; k += 2) {\r\n            const propId = change[k]\r\n            const newVal = change[k + 1]\r\n            const prop = propertiesById[propId]\r\n            // const prop = propId\r\n            if (prop === undefined) throw new Error(`Property id change is undefined: ${propId}`)\r\n            dataByKeys[key][prop] = newVal\r\n          }\r\n        } else {\r\n          dataByKeys[key] = change\r\n        }\r\n      }\r\n      for (const [key, removePropsId] of removedProps) {\r\n        for (const removePropId of removePropsId) {\r\n          const removeProp = propertiesById[removePropId]\r\n          // todo: this is not correct!\r\n          if (Array.isArray(dataByKeys[key])) {\r\n            dataByKeys[key].splice(removeProp as any, 1) // splice accepts strings as well\r\n          } else {\r\n            delete dataByKeys[key][removeProp]\r\n          }\r\n        }\r\n      }\r\n      if (versionToNumber(versionKey) <= versionToNumber(targetKey)) {\r\n        break\r\n      }\r\n    }\r\n    let data\r\n    if (arrKey) {\r\n      data = Object.values(dataByKeys)\r\n    } else {\r\n      data = Object.fromEntries(Object.entries(dataByKeys).map(([key, val]) => [keysById[key], val]))\r\n    }\r\n    dataRestorer?.(data)\r\n    return data\r\n  }\r\n\r\n  static getByArrKey (item: any, arrKey: string) {\r\n    return arrKey.split('+').map(x => item[x]).join('+')\r\n  }\r\n\r\n  static resolveDefaults (arr) {\r\n    if (!Array.isArray(arr)) throw new Error('not an array')\r\n    const propsValueCount = {} as {\r\n      [key: string]: {\r\n        [val: string]: number\r\n      }\r\n    }\r\n    for (const obj of arr) {\r\n      if (typeof obj !== 'object' || !obj) continue\r\n      for (const [key, val] of Object.entries(obj)) {\r\n        const valJson = JSON.stringify(val)\r\n        propsValueCount[key] ??= {}\r\n        propsValueCount[key][valJson] ??= 0\r\n        propsValueCount[key][valJson] += 1\r\n      }\r\n    }\r\n    const defaults = Object.fromEntries(Object.entries(propsValueCount).map(([prop, values]) => {\r\n      const defaultValue = Object.entries(values).sort(([, count1], [, count2]) => count2 - count1)[0][0]\r\n      return [prop, defaultValue]\r\n    }))\r\n\r\n    const newData = [] as any[]\r\n    const noData = {}\r\n    for (const [i, obj] of arr.entries()) {\r\n      if (typeof obj !== 'object' || !obj) {\r\n        newData.push(obj)\r\n        continue\r\n      }\r\n      for (const key of Object.keys(defaults)) {\r\n        const val = obj[key]\r\n        if (!val) {\r\n          noData[key] ??= []\r\n          noData[key].push(key)\r\n          continue\r\n        }\r\n        if (defaults[key] === JSON.stringify(val)) {\r\n          delete obj[key]\r\n        }\r\n      }\r\n      newData.push(obj)\r\n    }\r\n\r\n    return {\r\n      data: newData,\r\n      defaults\r\n    }\r\n  }\r\n}\r\n\r\nconst isEqualStructured = (val1, val2) => {\r\n  return JSON.stringify(val1) === JSON.stringify(val2)\r\n}\r\n","module.exports.performance = globalThis.performance\r\n","// Auth is done in the connection option callback. In this app the auth implementation is server side.\r\n\r\nconst Titles = {}\r\n\r\nexport {\r\n  Titles\r\n}\r\n","export const server = ({ host: sessionServer }) => {\r\n  return {\r\n    async join (accessToken, sessionSelectedProfileId, serverId, sharedSecret, publicKey, cb) {\r\n      try {\r\n        const result = await fetch(`${sessionServer}`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            accessToken,\r\n            selectedProfile: sessionSelectedProfileId,\r\n            serverId,\r\n            sharedSecret,\r\n            publicKey,\r\n          }),\r\n        })\r\n        if (!result.ok) {\r\n          throw new Error(`Request failed ${await result.text()}`)\r\n        }\r\n        cb(null)\r\n      } catch (err) {\r\n        cb(err)\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Vec3 } from 'vec3'\r\nimport { versionToNumber } from 'renderer/viewer/common/utils'\r\nimport { loadScript } from 'renderer/viewer/lib/utils'\r\nimport type { Block } from 'prismarine-block'\r\nimport { subscribeKey } from 'valtio/utils'\r\nimport { miscUiState } from '../globalState'\r\nimport { options } from '../optionsStorage'\r\nimport { loadOrPlaySound } from '../basicSounds'\r\nimport { getActiveResourcepackBasePath, resourcePackState } from '../resourcePack'\r\nimport { showNotification } from '../react/NotificationProvider'\r\nimport { pixelartIcons } from '../react/PixelartIcon'\r\nimport { createSoundMap, SoundMap } from './soundsMap'\r\nimport { musicSystem } from './musicSystem'\r\nimport './customSoundSystem'\r\n\r\nlet soundMap: SoundMap | undefined\r\n\r\nconst updateResourcePack = async () => {\r\n  if (!soundMap) return\r\n  // todo, rework to await\r\n  void soundMap.updateActiveResourcePackBasePath(await getActiveResourcepackBasePath() ?? undefined)\r\n}\r\n\r\nlet musicInterval: ReturnType<typeof setInterval> | null = null\r\n\r\nsubscribeKey(miscUiState, 'gameLoaded', async () => {\r\n  if (!miscUiState.gameLoaded) {\r\n    stopMusicSystem()\r\n    soundMap?.quit()\r\n    return\r\n  }\r\n\r\n  console.log(`Loading sounds for version ${bot.version}. Resourcepack state: ${JSON.stringify(resourcePackState)}`)\r\n  soundMap = createSoundMap(bot.version) ?? undefined\r\n  globalThis.soundMap = soundMap\r\n  if (!soundMap) return\r\n  if (soundMap.noVersionIdMapping) {\r\n    showNotification('No exact sound ID mappings for this version', undefined, false, pixelartIcons['warning-box'])\r\n  }\r\n  void updateResourcePack()\r\n  startMusicSystem()\r\n\r\n  const playGeneralSound = async (soundKey: string, position?: Vec3, volume = 1, pitch?: number) => {\r\n    if (!options.volume || !soundMap) return\r\n    const soundData = await soundMap.getSoundUrl(soundKey, volume)\r\n    if (!soundData) return\r\n\r\n    const isMuted = options.mutedSounds.includes(soundKey) || options.volume === 0\r\n    if (position) {\r\n      if (!isMuted) {\r\n        appViewer.backend?.soundSystem?.playSound(\r\n          position,\r\n          soundData.url,\r\n          soundData.volume,\r\n          Math.max(Math.min(pitch ?? 1, 2), 0.5),\r\n          soundData.timeout ?? options.remoteSoundsLoadTimeout\r\n        )\r\n      }\r\n      if (getDistance(bot.entity.position, position) < 4 * 16) {\r\n        lastPlayedSounds.lastServerPlayed[soundKey] ??= { count: 0, last: 0 }\r\n        lastPlayedSounds.lastServerPlayed[soundKey].count++\r\n        lastPlayedSounds.lastServerPlayed[soundKey].last = Date.now()\r\n      }\r\n    } else {\r\n      if (!isMuted) {\r\n        await loadOrPlaySound(soundData.url, volume)\r\n      }\r\n      lastPlayedSounds.lastClientPlayed.push(soundKey)\r\n      if (lastPlayedSounds.lastClientPlayed.length > 10) {\r\n        lastPlayedSounds.lastClientPlayed.shift()\r\n      }\r\n    }\r\n  }\r\n\r\n  const musicStartCheck = async (force = false) => {\r\n    if (!soundMap || !bot) return\r\n    if (!options.enableMusic && !force) return\r\n    // 30% chance to start music\r\n    if (Math.random() > 0.3 && !force) return\r\n\r\n    const musicKeys = ['music.game']\r\n    if (bot.game.gameMode === 'creative') {\r\n      musicKeys.push('music.creative')\r\n    }\r\n    const randomMusicKey = musicKeys[Math.floor(Math.random() * musicKeys.length)]\r\n    const soundData = await soundMap.getSoundUrl(randomMusicKey)\r\n    if (!soundData || !soundMap) return\r\n    await musicSystem.playMusic(soundData.url, soundData.volume)\r\n  }\r\n\r\n  function startMusicSystem () {\r\n    if (musicInterval) return\r\n    musicInterval = setInterval(() => {\r\n      void musicStartCheck()\r\n    }, 10_000)\r\n  }\r\n\r\n  window.forceStartMusic = () => {\r\n    void musicStartCheck(true)\r\n  }\r\n\r\n\r\n  function stopMusicSystem () {\r\n    if (musicInterval) {\r\n      clearInterval(musicInterval)\r\n      musicInterval = null\r\n    }\r\n  }\r\n\r\n  const playHardcodedSound = async (soundKey: string, position?: Vec3, volume = 1, pitch?: number) => {\r\n    await playGeneralSound(soundKey, position, volume, pitch)\r\n  }\r\n\r\n  bot.on('soundEffectHeard', async (soundId, position, volume, pitch) => {\r\n    if (/^https?:/.test(soundId.replace('minecraft:', ''))) {\r\n      return\r\n    }\r\n    await playHardcodedSound(soundId, position, volume, pitch)\r\n  })\r\n\r\n  bot._client.on('sound_effect', async (packet) => {\r\n    const hasNamedSoundEffect = versionToNumber(bot.version) < versionToNumber('1.19.3')\r\n\r\n    const soundResource = packet['soundEvent']?.resource as string | undefined\r\n    const pos = new Vec3(packet.x / 8, packet.y / 8, packet.z / 8)\r\n    if (packet.soundId !== 0 || !soundResource) {\r\n      const soundKey = soundMap!.soundsIdToName[packet.soundId - (hasNamedSoundEffect ? 0 : 1)]\r\n      if (soundKey === undefined) return\r\n      await playGeneralSound(soundKey, pos, packet.volume, packet.pitch)\r\n      return\r\n    }\r\n\r\n    await playHardcodedSound(soundResource.replace('minecraft:', ''), pos, packet.volume, packet.pitch)\r\n  })\r\n\r\n  bot.on('entityHurt', async (entity) => {\r\n    if (entity.id === bot.entity.id) {\r\n      await playHardcodedSound('entity.player.hurt')\r\n    }\r\n  })\r\n\r\n  let lastStepSound = 0\r\n  const movementHappening = async () => {\r\n    if (!bot.entity || !soundMap) return // no info yet\r\n    if (appViewer.playerState.reactive.gameMode === 'spectator') return // Don't play step sounds in spectator mode\r\n    const VELOCITY_THRESHOLD = 0.1\r\n    const RUN_THRESHOLD = 0.15\r\n    const { x, z, y } = bot.entity.velocity\r\n    if (bot.entity.onGround && (Math.abs(x) > VELOCITY_THRESHOLD || Math.abs(z) > VELOCITY_THRESHOLD)) {\r\n      const isRunning = (Math.abs(x) > RUN_THRESHOLD || Math.abs(z) > RUN_THRESHOLD)\r\n      // movement happening\r\n      if (Date.now() - lastStepSound > (isRunning ? 100 : 300)) {\r\n        const blockUnder = bot.world.getBlock(bot.entity.position.offset(0, -1, 0))\r\n        if (blockUnder) {\r\n          const stepSound = soundMap.getStepSound(blockUnder.name)\r\n          if (stepSound) {\r\n            await playHardcodedSound(stepSound, undefined, 0.6)\r\n            lastStepSound = Date.now()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const playBlockBreak = async (blockName: string, position?: Vec3) => {\r\n    if (!soundMap) return\r\n    const sound = soundMap.getBreakSound(blockName)\r\n    await playHardcodedSound(sound, position, 0.6, 1)\r\n  }\r\n\r\n  const registerEvents = () => {\r\n    bot.on('move', () => {\r\n      void movementHappening()\r\n    })\r\n    bot._client.on('world_event', async ({ effectId, location, data, global: disablePosVolume }) => {\r\n      const position = disablePosVolume ? undefined : new Vec3(location.x, location.y, location.z)\r\n      if (effectId === 2001) {\r\n        // break event\r\n        const block = loadedData.blocksByStateId[data]\r\n        await playBlockBreak(block.name, position)\r\n      }\r\n      // these produce glass break sound\r\n      if (effectId === 2002 || effectId === 2003 || effectId === 2007) {\r\n        await playHardcodedSound('block.glass.break', position, 1, 1)\r\n      }\r\n      if (effectId === 1004) {\r\n        // firework shoot\r\n        await playHardcodedSound('entity.firework_rocket.launch', position, 1, 1)\r\n      }\r\n      if (effectId === 1006 || effectId === 1007 || effectId === 1014) {\r\n        // wooden door open/close\r\n        await playHardcodedSound('block.wooden_door.open', position, 1, 1)\r\n      }\r\n      if (effectId === 1002) {\r\n        // dispenser shoot\r\n        await playHardcodedSound('block.dispenser.dispense', position, 1, 1)\r\n      }\r\n      if (effectId === 1024) {\r\n        // wither shoot\r\n        await playHardcodedSound('entity.wither.shoot', position, 1, 1)\r\n      }\r\n      if (effectId === 1031) {\r\n        // anvil land\r\n        await playHardcodedSound('block.anvil.land', position, 1, 1)\r\n      }\r\n      if (effectId === 1010) {\r\n        console.log('play record', data)\r\n      }\r\n    })\r\n\r\n    let diggingBlock: Block | null = null\r\n    customEvents.on('digStart', () => {\r\n      diggingBlock = bot.blockAtCursor(5)\r\n    })\r\n    bot.on('diggingCompleted', async () => {\r\n      if (diggingBlock) {\r\n        await playBlockBreak(diggingBlock.name, diggingBlock.position)\r\n      }\r\n    })\r\n  }\r\n\r\n  registerEvents()\r\n})\r\n\r\nsubscribeKey(resourcePackState, 'resourcePackInstalled', async () => {\r\n  await updateResourcePack()\r\n})\r\n\r\nexport const downloadSoundsIfNeeded = async () => {\r\n  if (!window.allSoundsMap) {\r\n    try {\r\n      await loadScript('./sounds.js')\r\n    } catch (err) {\r\n      console.warn('Sounds map was not generated. Sounds will not be played.')\r\n    }\r\n  }\r\n}\r\n\r\nexport const lastPlayedSounds = {\r\n  lastClientPlayed: [] as string[],\r\n  lastServerPlayed: {} as Record<string, { count: number, last: number }>,\r\n}\r\n\r\nconst getDistance = (pos1: Vec3, pos2: Vec3) => {\r\n  return Math.hypot((pos1.x - pos2.x), (pos1.y - pos2.y), (pos1.z - pos2.z))\r\n}\r\n","import { loadOrPlaySound } from '../basicSounds'\r\nimport { options } from '../optionsStorage'\r\n\r\nclass MusicSystem {\r\n  private currentMusic: string | null = null\r\n\r\n  async playMusic (url: string, musicVolume = 1) {\r\n    if (!options.enableMusic || this.currentMusic || options.musicVolume === 0) return\r\n\r\n    try {\r\n      const { onEnded } = await loadOrPlaySound(url, musicVolume, 5000, undefined, true) ?? {}\r\n\r\n      if (!onEnded) return\r\n\r\n      this.currentMusic = url\r\n\r\n      onEnded(() => {\r\n        this.currentMusic = null\r\n      })\r\n    } catch (err) {\r\n      console.warn('Failed to play music:', err)\r\n      this.currentMusic = null\r\n    }\r\n  }\r\n\r\n  stopMusic () {\r\n    if (this.currentMusic) {\r\n      this.currentMusic = null\r\n    }\r\n  }\r\n}\r\n\r\nexport const musicSystem = new MusicSystem()\r\n","import fs from 'fs'\r\nimport path from 'path'\r\nimport { versionsMapToMajor, versionToMajor, versionToNumber } from 'renderer/viewer/common/utils'\r\n\r\nimport { stopAllSounds } from '../basicSounds'\r\nimport { musicSystem } from './musicSystem'\r\n\r\ninterface SoundMeta {\r\n  format: string\r\n  baseUrl: string\r\n}\r\n\r\ninterface SoundData {\r\n  volume: number\r\n  path: string\r\n}\r\n\r\ninterface SoundMapData {\r\n  allSoundsMap: Record<string, Record<string, string>>\r\n  soundsLegacyMap: Record<string, string[]>\r\n  soundsMeta: SoundMeta\r\n}\r\n\r\ninterface BlockSoundMap {\r\n  [blockName: string]: string\r\n}\r\n\r\ninterface SoundEntry {\r\n  file: string\r\n  weight: number\r\n  volume: number\r\n}\r\n\r\ninterface ResourcePackSoundEntry {\r\n  name: string\r\n  stream?: boolean\r\n  volume?: number\r\n  timeout?: number\r\n}\r\n\r\ninterface ResourcePackSound {\r\n  category: string\r\n  sounds: ResourcePackSoundEntry[]\r\n}\r\n\r\ninterface ResourcePackSoundsJson {\r\n  [soundId: string]: ResourcePackSound\r\n}\r\n\r\nexport class SoundMap {\r\n  private readonly soundsPerName: Record<string, SoundEntry[]>\r\n  soundsIdToName: Record<string, string>\r\n  private readonly existingResourcePackPaths: Set<string>\r\n  private activeResourcePackBasePath: string | undefined\r\n  private activeResourcePackSoundsJson: ResourcePackSoundsJson | undefined\r\n  noVersionIdMapping = false\r\n\r\n  constructor (\r\n    private readonly soundData: SoundMapData,\r\n    private readonly version: string\r\n  ) {\r\n    // First try exact version match\r\n    let soundsMap = soundData.allSoundsMap[this.version]\r\n\r\n    if (!soundsMap) {\r\n      // If no exact match, try major version\r\n      const allSoundsMajor = versionsMapToMajor(soundData.allSoundsMap)\r\n      soundsMap = allSoundsMajor[versionToMajor(version)]\r\n\r\n      if (!soundsMap) {\r\n        // If still no match, use first available mapping\r\n        soundsMap = Object.values(allSoundsMajor)[0]\r\n      }\r\n\r\n      this.noVersionIdMapping = true\r\n    }\r\n\r\n    // Create both mappings\r\n    this.soundsIdToName = {}\r\n    this.soundsPerName = {}\r\n\r\n    for (const [id, soundsStr] of Object.entries(soundsMap)) {\r\n      const sounds = soundsStr.split(',').map(s => {\r\n        const [volume, name, weight] = s.split(';')\r\n        if (isNaN(Number(volume))) throw new Error('volume is not a number')\r\n        if (isNaN(Number(weight))) throw new TypeError('weight is not a number')\r\n        return {\r\n          file: name,\r\n          weight: Number(weight),\r\n          volume: Number(volume)\r\n        }\r\n      })\r\n\r\n      const [idPart, namePart] = id.split(';')\r\n      this.soundsIdToName[idPart] = namePart\r\n\r\n      this.soundsPerName[namePart] = sounds\r\n    }\r\n  }\r\n\r\n  async updateActiveResourcePackBasePath (basePath: string | undefined) {\r\n    this.activeResourcePackBasePath = basePath\r\n    if (!basePath) {\r\n      this.activeResourcePackSoundsJson = undefined\r\n      return\r\n    }\r\n\r\n    let soundsJsonContent: string | undefined\r\n    try {\r\n      const soundsJsonPath = path.join(basePath, 'assets/minecraft/sounds.json')\r\n      soundsJsonContent = await fs.promises.readFile(soundsJsonPath, 'utf8')\r\n    } catch (err) {}\r\n    try {\r\n      if (soundsJsonContent) {\r\n        this.activeResourcePackSoundsJson = JSON.parse(soundsJsonContent)\r\n      }\r\n    } catch (err) {\r\n      console.warn('Failed to parse sounds.json from resourcepack', err)\r\n      this.activeResourcePackSoundsJson = undefined\r\n    }\r\n  }\r\n\r\n  async updateExistingResourcePackPaths () {\r\n    if (!this.activeResourcePackBasePath) return\r\n    // todo support sounds.js from resource pack\r\n    const soundsBasePath = path.join(this.activeResourcePackBasePath, 'assets/minecraft/sounds')\r\n    // scan recursively for sounds files\r\n    const scan = async (dir: string) => {\r\n      const entries = await fs.promises.readdir(dir, { withFileTypes: true })\r\n      for (const entry of entries) {\r\n        const entryPath = path.join(dir, entry.name)\r\n        if (entry.isDirectory()) {\r\n          await scan(entryPath)\r\n        } else if (entry.isFile() && entry.name.endsWith('.ogg')) {\r\n          const relativePath = path.relative(soundsBasePath, entryPath)\r\n          this.existingResourcePackPaths.add(relativePath)\r\n        }\r\n      }\r\n    }\r\n\r\n    await scan(soundsBasePath)\r\n  }\r\n\r\n  async getSoundUrl (soundKey: string, volume = 1): Promise<{ url: string; volume: number, timeout?: number } | undefined> {\r\n    // First check resource pack sounds.json\r\n    if (this.activeResourcePackSoundsJson && soundKey in this.activeResourcePackSoundsJson) {\r\n      const rpSound = this.activeResourcePackSoundsJson[soundKey]\r\n      // Pick a random sound from the resource pack\r\n      const sound = rpSound.sounds[Math.floor(Math.random() * rpSound.sounds.length)]\r\n      const soundVolume = sound.volume ?? 1\r\n\r\n      if (this.activeResourcePackBasePath) {\r\n        const tryFormat = async (format: string) => {\r\n          try {\r\n            if (sound.name.startsWith('http://') || sound.name.startsWith('https://')) {\r\n              return {\r\n                url: sound.name,\r\n                volume: soundVolume * Math.max(Math.min(volume, 1), 0),\r\n                timeout: sound.timeout\r\n              }\r\n            }\r\n            const resourcePackPath = path.join(this.activeResourcePackBasePath!, `/assets/minecraft/sounds/${sound.name}.${format}`)\r\n            const fileData = await fs.promises.readFile(resourcePackPath)\r\n            return {\r\n              url: `data:audio/${format};base64,${fileData.toString('base64')}`,\r\n              volume: soundVolume * Math.max(Math.min(volume, 1), 0)\r\n            }\r\n          } catch (err) {\r\n            return null\r\n          }\r\n        }\r\n\r\n        const result = await tryFormat(this.soundData.soundsMeta.format)\r\n        if (result) return result\r\n\r\n        if (this.soundData.soundsMeta.format !== 'ogg') {\r\n          const oggResult = await tryFormat('ogg')\r\n          if (oggResult) return oggResult\r\n        }\r\n      }\r\n    }\r\n\r\n    // Fall back to vanilla sounds if no resource pack sound found\r\n    const sounds = this.soundsPerName[soundKey]\r\n    if (!sounds?.length) return undefined\r\n\r\n    // Pick a random sound based on weights\r\n    const totalWeight = sounds.reduce((sum, s) => sum + s.weight, 0)\r\n    let random = Math.random() * totalWeight\r\n    const sound = sounds.find(s => {\r\n      random -= s.weight\r\n      return random <= 0\r\n    }) ?? sounds[0]\r\n\r\n    const versionedSound = this.getVersionedSound(sound.file)\r\n\r\n    const url = this.soundData.soundsMeta.baseUrl.replace(/\\/$/, '') +\r\n      (versionedSound ? `/${versionedSound}` : '') +\r\n      '/minecraft/sounds/' +\r\n      sound.file +\r\n      '.' +\r\n      this.soundData.soundsMeta.format\r\n\r\n    return {\r\n      url,\r\n      volume: sound.volume * Math.max(Math.min(volume, 1), 0)\r\n    }\r\n  }\r\n\r\n  private getVersionedSound (item: string): string | undefined {\r\n    const verNumber = versionToNumber(this.version)\r\n    const entries = Object.entries(this.soundData.soundsLegacyMap)\r\n    for (const [itemsVer, items] of entries) {\r\n      if (items.includes(item) && verNumber <= versionToNumber(itemsVer)) {\r\n        return itemsVer\r\n      }\r\n    }\r\n    return undefined\r\n  }\r\n\r\n  getBlockSound (blockName: string, category: string, fallback: string): string {\r\n    const mappedName = blockSoundAliases[blockName] ?? blockName\r\n    const key = `block.${mappedName}.${category}`\r\n    return this.soundsPerName[key] ? key : fallback\r\n  }\r\n\r\n  getStepSound (blockName: string): string {\r\n    return this.getBlockSound(blockName, 'step', 'block.stone.step')\r\n  }\r\n\r\n  getBreakSound (blockName: string): string {\r\n    return this.getBlockSound(blockName, 'break', 'block.stone.break')\r\n  }\r\n\r\n  quit () {\r\n    musicSystem.stopMusic()\r\n    stopAllSounds()\r\n  }\r\n}\r\n\r\nexport function createSoundMap (version: string): SoundMap | null {\r\n  const globalObject = window as {\r\n    allSoundsMap?: Record<string, Record<string, string>>,\r\n    allSoundsVersionedMap?: Record<string, string[]>,\r\n    allSoundsMeta?: { format: string, baseUrl: string }\r\n  }\r\n  if (!globalObject.allSoundsMap) return null\r\n  return new SoundMap({\r\n    allSoundsMap: globalObject.allSoundsMap,\r\n    soundsLegacyMap: globalObject.allSoundsVersionedMap ?? {},\r\n    soundsMeta: globalObject.allSoundsMeta!\r\n  }, version)\r\n}\r\n\r\n// Block name mappings for sound effects\r\nconst blockSoundAliases: BlockSoundMap = {\r\n  // Grass-like blocks\r\n  grass_block: 'grass',\r\n  tall_grass: 'grass',\r\n  fern: 'grass',\r\n  large_fern: 'grass',\r\n  dead_bush: 'grass',\r\n  seagrass: 'grass',\r\n  tall_seagrass: 'grass',\r\n  kelp: 'grass',\r\n  kelp_plant: 'grass',\r\n  sugar_cane: 'grass',\r\n  bamboo: 'grass',\r\n  vine: 'grass',\r\n  nether_sprouts: 'grass',\r\n  twisting_vines: 'grass',\r\n  weeping_vines: 'grass',\r\n  sweet_berry_bush: 'grass',\r\n  glow_lichen: 'grass',\r\n  moss_carpet: 'grass',\r\n  moss_block: 'grass',\r\n  hanging_roots: 'grass',\r\n  spore_blossom: 'grass',\r\n  small_dripleaf: 'grass',\r\n  big_dripleaf: 'grass',\r\n  flowering_azalea: 'grass',\r\n  azalea: 'grass',\r\n  azalea_leaves: 'grass',\r\n  flowering_azalea_leaves: 'grass',\r\n\r\n  // Dirt and ground blocks\r\n  dirt: 'gravel',\r\n  coarse_dirt: 'gravel',\r\n  podzol: 'gravel',\r\n  mycelium: 'gravel',\r\n  farmland: 'gravel',\r\n  dirt_path: 'gravel',\r\n  rooted_dirt: 'rooted_dirt',\r\n\r\n  // Crop blocks\r\n  wheat: 'crop',\r\n  potatoes: 'crop',\r\n  carrots: 'crop',\r\n  beetroots: 'crop',\r\n  melon_stem: 'crop',\r\n  pumpkin_stem: 'crop',\r\n  sweet_berries: 'crop',\r\n  cocoa: 'crop',\r\n  nether_wart: 'crop',\r\n  torchflower_crop: 'crop',\r\n  pitcher_crop: 'crop',\r\n\r\n  // Stone-like blocks\r\n  cobblestone: 'stone',\r\n  stone_bricks: 'stone',\r\n  mossy_stone_bricks: 'stone',\r\n  cracked_stone_bricks: 'stone',\r\n  chiseled_stone_bricks: 'stone',\r\n  stone_brick_slab: 'stone',\r\n  stone_brick_stairs: 'stone',\r\n  stone_brick_wall: 'stone',\r\n  polished_granite: 'stone',\r\n  granite: 'stone',\r\n  andesite: 'stone',\r\n  diorite: 'stone',\r\n  polished_andesite: 'stone',\r\n  polished_diorite: 'stone',\r\n  deepslate: 'deepslate',\r\n  cobbled_deepslate: 'deepslate',\r\n  polished_deepslate: 'deepslate',\r\n  deepslate_bricks: 'deepslate_bricks',\r\n  deepslate_tiles: 'deepslate_tiles',\r\n  calcite: 'stone',\r\n  tuff: 'stone',\r\n  smooth_stone: 'stone',\r\n  smooth_sandstone: 'stone',\r\n  smooth_quartz: 'stone',\r\n  smooth_red_sandstone: 'stone',\r\n\r\n  // Wood-like blocks\r\n  oak_planks: 'wood',\r\n  spruce_planks: 'wood',\r\n  birch_planks: 'wood',\r\n  jungle_planks: 'wood',\r\n  acacia_planks: 'wood',\r\n  dark_oak_planks: 'wood',\r\n  crimson_planks: 'wood',\r\n  warped_planks: 'wood',\r\n  oak_log: 'wood',\r\n  spruce_log: 'wood',\r\n  birch_log: 'wood',\r\n  jungle_log: 'wood',\r\n  acacia_log: 'wood',\r\n  dark_oak_log: 'wood',\r\n  crimson_stem: 'stem',\r\n  warped_stem: 'stem',\r\n\r\n  // Metal blocks\r\n  iron_block: 'metal',\r\n  gold_block: 'metal',\r\n  copper_block: 'copper',\r\n  exposed_copper: 'copper',\r\n  weathered_copper: 'copper',\r\n  oxidized_copper: 'copper',\r\n  netherite_block: 'netherite_block',\r\n  ancient_debris: 'ancient_debris',\r\n  lodestone: 'lodestone',\r\n  chain: 'chain',\r\n  anvil: 'anvil',\r\n  chipped_anvil: 'anvil',\r\n  damaged_anvil: 'anvil',\r\n\r\n  // Glass blocks\r\n  glass: 'glass',\r\n  glass_pane: 'glass',\r\n  white_stained_glass: 'glass',\r\n  orange_stained_glass: 'glass',\r\n  magenta_stained_glass: 'glass',\r\n  light_blue_stained_glass: 'glass',\r\n  yellow_stained_glass: 'glass',\r\n  lime_stained_glass: 'glass',\r\n  pink_stained_glass: 'glass',\r\n  gray_stained_glass: 'glass',\r\n  light_gray_stained_glass: 'glass',\r\n  cyan_stained_glass: 'glass',\r\n  purple_stained_glass: 'glass',\r\n  blue_stained_glass: 'glass',\r\n  brown_stained_glass: 'glass',\r\n  green_stained_glass: 'glass',\r\n  red_stained_glass: 'glass',\r\n  black_stained_glass: 'glass',\r\n  tinted_glass: 'glass',\r\n\r\n  // Wool blocks\r\n  white_wool: 'wool',\r\n  orange_wool: 'wool',\r\n  magenta_wool: 'wool',\r\n  light_blue_wool: 'wool',\r\n  yellow_wool: 'wool',\r\n  lime_wool: 'wool',\r\n  pink_wool: 'wool',\r\n  gray_wool: 'wool',\r\n  light_gray_wool: 'wool',\r\n  cyan_wool: 'wool',\r\n  purple_wool: 'wool',\r\n  blue_wool: 'wool',\r\n  brown_wool: 'wool',\r\n  green_wool: 'wool',\r\n  red_wool: 'wool',\r\n  black_wool: 'wool',\r\n\r\n  // Nether blocks\r\n  netherrack: 'netherrack',\r\n  nether_bricks: 'nether_bricks',\r\n  red_nether_bricks: 'nether_bricks',\r\n  nether_wart_block: 'wart_block',\r\n  warped_wart_block: 'wart_block',\r\n  soul_sand: 'soul_sand',\r\n  soul_soil: 'soul_soil',\r\n  basalt: 'basalt',\r\n  polished_basalt: 'basalt',\r\n  blackstone: 'gilded_blackstone',\r\n  gilded_blackstone: 'gilded_blackstone',\r\n\r\n  // Amethyst blocks\r\n  amethyst_block: 'amethyst_block',\r\n  amethyst_cluster: 'amethyst_cluster',\r\n  large_amethyst_bud: 'large_amethyst_bud',\r\n  medium_amethyst_bud: 'medium_amethyst_bud',\r\n  small_amethyst_bud: 'small_amethyst_bud',\r\n\r\n  // Miscellaneous\r\n  sand: 'sand',\r\n  red_sand: 'sand',\r\n  gravel: 'gravel',\r\n  snow: 'snow',\r\n  snow_block: 'snow',\r\n  powder_snow: 'powder_snow',\r\n  ice: 'glass',\r\n  packed_ice: 'glass',\r\n  blue_ice: 'glass',\r\n  slime_block: 'slime_block',\r\n  honey_block: 'honey_block',\r\n  scaffolding: 'scaffolding',\r\n  ladder: 'ladder',\r\n  lantern: 'lantern',\r\n  soul_lantern: 'lantern',\r\n  pointed_dripstone: 'pointed_dripstone',\r\n  dripstone_block: 'dripstone_block',\r\n  sculk_sensor: 'sculk_sensor',\r\n  shroomlight: 'shroomlight'\r\n}\r\n","import { loadOrPlaySound, stopAllSounds, stopSound } from '../basicSounds'\r\nimport { options } from '../optionsStorage'\r\n\r\nconst customSoundSystem = () => {\r\n  bot._client.on('named_sound_effect', packet => {\r\n    if (!options.remoteSoundsSupport) return\r\n    let { soundName } = packet\r\n    let metadata = {} as { loadTimeout?: number, loop?: boolean }\r\n\r\n    // Extract JSON metadata from parentheses at the end\r\n    const jsonMatch = /\\(({.*})\\)$/.exec(soundName)\r\n    if (jsonMatch) {\r\n      try {\r\n        metadata = JSON.parse(jsonMatch[1])\r\n        soundName = soundName.slice(0, -jsonMatch[0].length)\r\n      } catch (e) {\r\n        console.warn('Failed to parse sound metadata:', jsonMatch[1])\r\n      }\r\n    }\r\n\r\n    if (/^https?:/.test(soundName.replace('minecraft:', ''))) {\r\n      const { loadTimeout, loop } = metadata\r\n      void loadOrPlaySound(soundName, packet.volume, loadTimeout, loop)\r\n    }\r\n  })\r\n\r\n  bot._client.on('stop_sound', packet => {\r\n    const { flags, source, sound } = packet\r\n\r\n    if (flags === 0) {\r\n      // Stop all sounds\r\n      stopAllSounds()\r\n    } else if (sound) {\r\n      // Stop specific sound by name\r\n      stopSound(sound)\r\n    }\r\n  })\r\n\r\n  bot.on('end', () => {\r\n    stopAllSounds()\r\n  })\r\n}\r\n\r\ncustomEvents.on('mineflayerBotCreated', () => {\r\n  customSoundSystem()\r\n})\r\n","export const isCypress = () => {\r\n  return localStorage.cypress === 'true'\r\n}\r\n","import { supportedVersions, postNettyVersionsByProtocolVersion } from 'minecraft-data'\r\n\r\nexport const ignoredVersionsRegex = /(^0\\.30c$)|w|-pre|-rc/\r\n\r\n/** @type {string[]} */\r\nconst versionsFromProtocol = Object.values(postNettyVersionsByProtocolVersion.pc).flat().filter(x => !ignoredVersionsRegex.test(x.minecraftVersion)).map(x => x.minecraftVersion)\r\n\r\nexport const notTestedVersions = '1.19.3 1.20 1.19.1 1.19 1.18.1 1.15.1 1.14.1'.split(' ')\r\n\r\n// Versions >= 1.21.7 are forbidden due to critical world display issues\r\nconst FORBIDDEN_VERSION_THRESHOLD = '1.21.7'\r\nconst versionToNumber = (ver) => {\r\n  const [x, y = '0', z = '0'] = ver.split('.')\r\n  return +`${x.padStart(2, '0')}${y.padStart(2, '0')}${z.padStart(2, '0')}`\r\n}\r\n\r\nconst forbiddenVersionThresholdNum = versionToNumber(FORBIDDEN_VERSION_THRESHOLD)\r\n\r\nexport default versionsFromProtocol.filter(x => {\r\n  if (x === '1.7' || x.startsWith('1.7.')) return false\r\n  // Filter out versions >= 1.21.7\r\n  const versionNum = versionToNumber(x)\r\n  return versionNum < forbiddenVersionThresholdNum\r\n})\r\n","import { gameAdditionalState, isGameActive, miscUiState } from './globalState'\r\nimport { options } from './optionsStorage'\r\nimport { displayHintsState } from './react/GlobalOverlayHints'\r\nimport { notificationProxy, showNotification } from './react/NotificationProvider'\r\nimport { packetsReplayState } from './react/state/packetsReplayState'\r\n\r\nexport const goFullscreen = async (doToggle = false) => {\r\n  if (!document.fullscreenElement) {\r\n    // todo display a message or repeat?\r\n    await document.documentElement.requestFullscreen().catch(() => { })\r\n    // request full keyboard access\r\n    await navigator.keyboard?.lock?.(['Escape', 'KeyW'])\r\n  } else if (doToggle) {\r\n    await document.exitFullscreen().catch(() => { })\r\n  }\r\n}\r\n\r\nexport const toNumber = val => {\r\n  const num = Number(val)\r\n  return isNaN(num) ? undefined : num\r\n}\r\n\r\nexport const inGameError = err => {\r\n  console.error(err)\r\n  window.reportError?.(err)\r\n  // todo report\r\n  miscUiState.hasErrors = true\r\n}\r\n\r\nexport const pointerLock = {\r\n  get hasPointerLock () {\r\n    return document.pointerLockElement\r\n  },\r\n  justHitEscape: false,\r\n  async requestPointerLock () {\r\n    if (!isGameActive(true) || !document.documentElement.requestPointerLock || miscUiState.currentTouch) {\r\n      return\r\n    }\r\n    if (options.autoFullScreen) {\r\n      void goFullscreen()\r\n    }\r\n    const displayMouseCaptureFailure = () => {\r\n      // if (notificationProxy.id === 'auto-login') return // prevent notification hide\r\n      // showNotification('Browser Delay Limitation', navigator['keyboard'] ? 'Click on screen, enable Auto Fullscreen or F11' : 'Click on screen or use fullscreen in Chrome')\r\n      // notificationProxy.id = 'pointerlockchange'\r\n      displayHintsState.captureMouseHint = true\r\n    }\r\n    if (!(document.fullscreenElement && navigator['keyboard']) && this.justHitEscape) {\r\n      displayMouseCaptureFailure()\r\n    } else {\r\n      //@ts-expect-error\r\n      const promise: any = document.documentElement.requestPointerLock({\r\n        unadjustedMovement: options.mouseRawInput\r\n      })\r\n      promise?.catch(error => {\r\n        if (error.name === 'NotSupportedError') {\r\n          // Some platforms may not support unadjusted movement, request again a regular pointer lock.\r\n          document.documentElement.requestPointerLock()\r\n        } else if (error.name === 'SecurityError') {\r\n          // cause: https://discourse.threejs.org/t/how-to-avoid-pointerlockcontrols-error/33017/4\r\n          displayMouseCaptureFailure()\r\n        } else {\r\n          displayMouseCaptureFailure()\r\n          console.warn('Failed to request pointer lock:', error)\r\n        }\r\n      })\r\n    }\r\n    this.justHitEscape = false\r\n  }\r\n}\r\n\r\nexport const isInRealGameSession = () => {\r\n  return isGameActive(true) && (!packetsReplayState.isOpen || packetsReplayState.isMinimized) && !gameAdditionalState.viewerConnection\r\n}\r\n\r\nwindow.getScreenRefreshRate = getScreenRefreshRate\r\n\r\n/**\r\n * Allows to obtain the estimated Hz of the primary monitor in the system.\r\n */\r\nexport async function getScreenRefreshRate (): Promise<number> {\r\n  let requestId = null as number | null\r\n  let callbackTriggered = false\r\n  let resolve\r\n\r\n  const DOMHighResTimeStampCollection = [] as number[]\r\n\r\n  const triggerAnimation = DOMHighResTimeStamp => {\r\n    DOMHighResTimeStampCollection.unshift(DOMHighResTimeStamp)\r\n\r\n    if (DOMHighResTimeStampCollection.length > 10) {\r\n      const t0 = DOMHighResTimeStampCollection.pop()!\r\n      const fps = Math.floor(1000 * 10 / (DOMHighResTimeStamp - t0))\r\n\r\n      if (!callbackTriggered || fps > 1000) {\r\n        resolve(Math.min(fps, 1000)/* , DOMHighResTimeStampCollection */)\r\n      }\r\n\r\n      callbackTriggered = true\r\n    }\r\n\r\n    requestId = window.requestAnimationFrame(triggerAnimation)\r\n  }\r\n\r\n  window.requestAnimationFrame(triggerAnimation)\r\n\r\n  window.setTimeout(() => {\r\n    window.cancelAnimationFrame(requestId!)\r\n    requestId = null\r\n    resolve(0)\r\n  }, 500)\r\n\r\n  return new Promise(_resolve => {\r\n    resolve = _resolve\r\n  })\r\n}\r\n\r\nexport const getGamemodeNumber = bot => {\r\n  switch (bot.game.gameMode) {\r\n    case 'survival': return 0\r\n    case 'creative': return 1\r\n    case 'adventure': return 2\r\n    case 'spectator': return 3\r\n    default: return -1\r\n  }\r\n}\r\n\r\nexport const isMajorVersionGreater = (ver1: string, ver2: string) => {\r\n  const [a1, b1] = ver1.split('.')\r\n  const [a2, b2] = ver2.split('.')\r\n  return +a1 > +a2 || (+a1 === +a2 && +b1 > +b2)\r\n}\r\n\r\n// doesn't support snapshots\r\nexport const toMajorVersion = version => {\r\n  const [a, b] = (String(version)).split('.')\r\n  return `${a}.${b}`\r\n}\r\n\r\nlet prevRenderDistance = options.renderDistance\r\nexport const setRenderDistance = () => {\r\n  assertDefined(worldView)\r\n  const { renderDistance: singleplayerRenderDistance, multiplayerRenderDistance } = options\r\n  let renderDistance = miscUiState.singleplayer ? singleplayerRenderDistance : multiplayerRenderDistance\r\n  const zeroRenderDistance = miscUiState.singleplayer && renderDistance === 0\r\n  if (zeroRenderDistance) {\r\n    renderDistance = 1 // mineflayer limitation workaround\r\n  }\r\n  bot.setSettings({\r\n    viewDistance: renderDistance\r\n  })\r\n  if (zeroRenderDistance) {\r\n    localServer!.players[0].view = 0\r\n    renderDistance = 0\r\n  }\r\n  worldView?.updateViewDistance(renderDistance)\r\n  prevRenderDistance = renderDistance\r\n}\r\nexport const reloadChunks = async () => {\r\n  if (!bot || !worldView) return\r\n  setRenderDistance()\r\n  await worldView.updatePosition(bot.entity.position, true)\r\n}\r\n\r\nexport const openGithub = (addUrl = '') => {\r\n  window.open(`${process.env.GITHUB_URL?.replace(/\\/$/, '')}${addUrl}`, '_blank')\r\n}\r\n\r\nexport const resolveTimeout = async (promise, timeout = 10_000) => {\r\n  return new Promise((resolve, reject) => {\r\n    promise.then(resolve, reject)\r\n    setTimeout(() => {\r\n      reject(new Error('timeout'))\r\n    }, timeout)\r\n  })\r\n}\r\n\r\nexport function assertDefined<T> (x: T | undefined): asserts x is T {\r\n  if (!x) throw new Error('Assertion failed. Something is not available')\r\n}\r\n\r\nexport const haveDirectoryPicker = () => {\r\n  return !!window.showDirectoryPicker\r\n}\r\n\r\nconst reportedWarnings = new Set<string>()\r\n\r\nexport const reportWarningOnce = (id: string, message: string) => {\r\n  if (reportedWarnings.has(id)) return\r\n  reportedWarnings.add(id)\r\n  console.warn(message)\r\n}\r\n"],"names":["globalThis","pako","importLargeData","mod","displayEntitiesDebugList","version","container","document","title","results","entityNames","Object","mcData","window","acc","entity","loading","_iteratorError","debugFlags","rendererSpecialHandled","_window","entityMesh","_ref","EntityMesh","undefined","e","console","a","b","sections","r","_iteratorError1","title1","filter","_createSection","items","section","sectionTitle","list","filteredItems","item","listItem","entityName","text","count","makeError","str","_reportError","makeErrorCritical","Error","getSyncWorld","World","WorldLoader","Chunk","ChunkLoader","world","methods","getAllMethods","method","oldMethod","args","arg","Math","obj","Set","currentObj","name","delayedIterator","arr","delay","exec","chunkSize","i","Promise","resolve","setTimeout","versionToNumber","ver","_ver_split","x","tmp","tmp1","y","z","versionToMajor","_version_split","versionsMapToMajor","versionsMap","majorVersions","data","DebugGui","id","target","params","paramsMeta","GUI","param","activate","loadSavedValues","saved","localStorage","values","JSON","value","saveValues","deleteKey","saveVisibility","setupControls","meta","_this_paramsMeta_param","_meta_min","_meta_max","_meta_step","min","max","step","_meta_min1","_meta_max1","_meta_step1","min1","max1","step1","Array","save","destroy","toggle","show","hide","getInitialPlayerState","proxy","getPlayerStateUtils","reactive","getInitialPlayerStateRenderer","getItemSelector","playerState","specificProperties","Date","buildRotationMatrix","axis","degree","radians","cos","sin","axis0","axis1","axis2","matrix","vecadd3","vecsub3","matmul3","vector","matmulmat3","te","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","elemFaces","renderElement","element","doAO","attr","globalMatrix","globalShift","block","biome","neighbors","face","Vec3","eFace","_elemFaces_face","corners","mask1","mask2","dir","minx","miny","minz","maxx","maxy","maxz","texture","u","v","su","sv","ndx","tint","uvcs","uvsn","localMatrix","localShift","aos","_attr_normals","pos","vertex","baseu","basev","light","ao","baseLight","renderBlockThreeAttr","models","variants","sx","sy","sz","_attr_positions","_attr_colors","_attr_uvs","modelVars","model","_modelVars_variants_i","_iter","_model_axis","_model_axis1","_model_ao","_model_elements","i1","Float32Array","renderBlockThree","geometry","THREE","getThreeBlockModelGroup","material","mesh","group","setBlockPosition","object","position","openURL","url","newTab","isMobile","navigator","chunkPos","sectionPos","stats","lastY","addNewStat","width","pane","visible","updateStatText","updatePanesVisibility","removeAllStats","removeStat","customEvents","loadScript","scriptSrc","highPriority","existingScript","reject","scriptElement","error","hasFullOffscreenCanvasSupport","detectFullOffscreenCanvasSupport","OffscreenCanvas","canvas","gl","createCanvas","height","_loadImageFromUrl","imageUrl","fetch","response","createImageBitmap","config","setSkinsConfig","newConfig","_loadSkinFromUsername","username","type","_loadSkinImage","skinUrl","image","skinCanvas","fetchAndConvertBase64Skin","loadImageFromUrl","loadSkinToCanvas","arrayBuffer","base64","Buffer","dynamicMcDataFiles","buildCleanupDecorator","cleanupMethod","_target","propertyKey","key","_$_target","originalMethod","Reflect","arguments","n","toMajorVersion","_String_split","String","worldCleanup","defaultWorldRendererConfig","WorldRendererCommon","resourcesManager","displayOptions","initOptions","Map","EventEmitter","AbortController","URL","location","loadedChunks","interval","setInterval","curr","clearInterval","fpsUpdate","logWorkerWork","message","init","_this_resourcesManager_currentResources","snapshotInitialValues","wasChunkSentToWorker","chunkKey","getHighestBlocks","updateCustomBlock","blockPos","_blockPos_split_map","Number","getBlockInfo","stateId","_this_protocolCustomBlocks_get","customBlockName","cacheKey","modelNameOverride","modelInfo","initWorkers","numWorkers","worker","initMesherWorker","_this_messageQueue","onReactivePlayerStateUpdated","callback","initial","subscribeKey","onReactiveConfigUpdated","onReactiveDebugUpdated","watchReactivePlayerState","watchReactiveConfig","processMessageQueue","source","start","startTime","processedCount","processingStopped","performance","requestAnimationFrame","handleMessage","rawData","_this_mesherLogReader","_this_geometryReceiveCount","_data_workerIndex","_Math","chunkCoords","chunkCoords1","loaded","info","Uint8Array","downloadMesherLog","encodeURIComponent","checkAllFinished","_this","changeHandSwingingState","isAnimationPlaying","isLeftHand","updateViewerPosition","sendWorkers","getDistance","posAbsolute","_chunkPos","botX","botZ","resetWorld","resetWorkers","_document","getMesherConfig","skyLight","timeOfDay","sendMesherMcData","allMcData","_mcDataRaw_pc_this_version","mcDataRaw","updateAssetsData","resources","blockstatesModels","updateChunksStats","_this_allLoadedIn_toFixed","addColumn","chunk","isLightUpdate","customBlockModels","loc","markAsLoaded","removeColumn","setBlockStateId","needAoRecalculation","set","sectionX","sectionZ","updateEntity","isUpdate","lightUpdate","chunkX","chunkZ","connect","worldView","worldEmitter","_this1","currentLoadChunkBatch","worldConfig","fn","blockEntities","d","generateSpiralMatrix","setBlockStateIdInner","getWorkerNumber","updateAction","hash","debugGetWorkerCustomBlockModel","setSectionDirty","_this_sectionsWaiting_get","_this_toWorkerMessagesQueue","useChangeWorker","distance","_hash","dispatchMessages","workerIndex","waitForChunksToRender","updateHandler","waitForChunkToLoad","_this_initOptions_config_statsVisible","_this_worldRendererConfig_clipWorldBelowY","Infinity","onGotMessage","Worker","parseSafe","task","LEGACY_COLORS","renderSign","blockEntity","isHanging","PrismarineChat","ctxHook","ctx","canvasCreator","texts","heightOffset","defaultColor","lineNum","renderComponent","fontSize","offset","parsed","_type_of","toRenderCanvas","visibleFormatting","plainText","textOffset","textWidths","renderText","component","parentFormatting","_$text","formatting","_component_color","_component_underlined","_component_strikethrough","_component_bold","_component_italic","line","addTextPart","child","_formatting_color","_formatting_underlined","_formatting_strikethrough","color","renderedWidth","previousOffsetY","_textWidths_offsetY","fillStyle","fontStyle","underlineStyle","strikeStyle","offsetY","textWidth","offsetX","create3DItemMesh","options","depth","pixelSize","imageData","w","h","halfDepth","actualPixelSize","isOpaque","vertices","indices","uvs","normals","vertexIndex","addVertex","nx","ny","nz","addQuad","v0","v1","v2","v3","frontVertices","backVertices","py","px","_pixelToWorld","needVertex","adjacentPixels","adjX","adjY","py1","px1","v00","v10","v11","v01","b00","b10","b01","py2","px2","pixelU","pixelV","f0","f1","b0","b1","f01","f11","b02","f02","f12","b03","f03","f13","b04","b14","extractItemTextureToCanvas","sourceTexture","textureInfo","sizeX","sizeY","canvasWidth","canvasHeight","createItemMesh","faceCamera","use3D","itemsTexture","spriteMat","itemsTexture1","mesh1","itemsTexture2","itemsTextureFlipped","material1","materialFlipped","mesh2","steveTexture","loadThreeJsTextureFromUrl","stevePngUrl","TWEEN_DURATION","convert2sComplementToHex","complement","toRgba","parseInt","hex","toQuaternion","quaternion","defaultValue","poseToEuler","pose","degreesToRadians","getUsernameTexture","param1","nameTagBackgroundColor","nameTagTextOpacity","fontFamily","PrismarineChatLoader","plainLines","padding","addNametag","c","nameTag","tex","nametags","getEntityMesh","overrides","isFirstUpperCase","snakeCase","Entity","err","isEntityAttackable","loadedData","cube","nametagCount","Entities","worldRenderer","getDebugString","totalEntities","visibleEntities","playerEntities","visiblePlayerEntities","handlePlayerEntity","playerData","_playerData_uuid","wrapper","clear","disposeObject","reloadEntities","watchResourcesUpdates","setDebugMode","mode","boxHelper","setRendering","rendering","ent","render","renderEntitiesConfig","dt","botPos","entityId","playerObject","dx","dy","dz","distanceSquared","yOffset","rotation","syncArmorPositions","armor","_armor_children_","skin","getPlayerObject","_this_playerEntity","_this_playerEntity1","_this_entities_entityId","isCanvasBlank","_canvas_getContext","channel","updatePlayerSkin","uuidCache","capeUrl","_this_uuidPerSkinUrlsCache_uuidCache","_this_uuidPerSkinUrlsCache_uuidCache_skinUrl","newSkinUrl","renderEars","isCustomSkin","loadSkinFromUsername","newCapeUrl","loadAndApplySkin","playerCustomSkinImage","skinTexture","canvas1","earsCanvas","earsTexture","loadSkinImage","inferModelType","loadEarsToCanvasFromSkin","loadAndApplyCape","capeCanvas","capeImage","capeTexture","loadCapeToCanvas","debugSwingArm","_entity_playerObject","WalkingGeneralSwing","playAnimation","entityPlayerId","animation","playerObject1","playerEntityObject","_this_playerEntity2","parseEntityLabel","jsonLike","mojangson","nbt","flat","textFromComponent","_component_text","getItemMesh","specificProps","previousModel","textureUv","getBlockMeshFromModel","SCALE","outerGroup","_textureUv_renderInfo","textureThree","result","SCALE1","setVisible","update","isPlayerModel","justAdded","_entity_metadata_","_entity_pos","_entity_metadata1","m","clock","delta","nametag","getGeneralEntitiesMetadata","isInvisible","_mesh_children","textDisplayMeta","getSpecificEntityMetadata","displayTextRaw","nameTagFixed","rawOpacity","armorStandMeta","isSmall","hasArms","hasBasePlate","isMarker","_c_parent","_c_parent1","itemFrameMeta","item1","_itemFrameMeta_item","_entity_metadata2","_e_children_find","_this_itemFrameMaps_existingMapNumber","_c_material_map","existingMapNumber","_item_nbtData_value_map_value","_item_components_find","_itemFrameMeta_rotation","mapNumber","itemMesh","updateEntityPosition","_overrides_rotation","ANIMATION_DURATION","TWEEN","da","headRotationDiff","onAddEntity","maybeRenderPlayerSkin","cameraPos","onRemoveEntity","updateMap","itemFrameMeshes","updateNameTagVisibility","playerTeam","entityTeam","nameTagVisibility","showNameTag","addMapModel","_this_cachedMapsImages","parameters","mapMesh","loadMap","addItemModel","hand","isPlayer","bedrockParentName","itemName","itemObject","handleDamageEvent","damageAmount","clonedMaterial","originalColor","raycastSceneDebug","_intersects_","raycaster","setupPlayerObject","_entity_uuid","_entity_username","PlayerObject","scale","updateEntityEquipment","addArmorModel","elytraTexture","byName","entityData","Proxy","p","receiver","_entityData_metadataKeys","_entity_metadata","index","slotType","layer","overlay","removeArmorModel","itemParts","isPlayerHead","itemNbt","textureData","_itemNbt_SkullOwner_Properties_textures_","_itemNbt_minecraftprofile_Properties_find","_decodedData_textures_SKIN","texturePath","skinTexturesProxy","armorMaterial","_worldRenderer_resourcesManager_currentResources_customTextures_armor_textures_armorTextureName_src","armorTextureName","armorTextures","armorModel","meshName","loadTexture","getMesh","_item_nbt_value_display_value_color","_item_nbt_value","g","dot","addCube","boneId","bone","sameTextureForAllFaces","texWidth","texHeight","mirror","errors","cubeRotation","u0","u1","eastOrWest","faceUvs","_cube_inflate","posX","posY","posZ","inflate","vecPos","faceIndex","tempFaceUvs","jsonModel","textureWidth","_jsonModel_texturewidth","textureHeight","_jsonModel_textureheight","useBlockTexture","blocksTexture","textureOffset","_blocksTexture_image_width","_blocksTexture_image_height","blockName","bones","geoData","jsonBone","_overrides_rotation_jsonBone_name_x","_overrides_rotation_jsonBone_name_y","_overrides_rotation_jsonBone_name_z","_debugFlags_errors","_debugFlags","rootBones","skeleton","_mesh","loadedTexture","actualWidth","actualHeight","temporaryMappings","getEntityMapping","mapping","getEntity","entities","scaleEntity","offsetEntity","originalType","mappedValue","externalModels","objLoader","OBJLoader","texturePathMap","huskPng","ocelotPng","arrowTexture","spectralArrowTexture","tippedArrowTexture","tempTextureMap","externalTexturesJson","_overrides_rotation_head_x","_overrides_rotation_head_y","_overrides_rotation_head_z","_overrides_textures_name","texture1","getStaticData","swingArm","animate","player","t","updateT","reset","croughAnimation","tHand","HitAnimation","basicArmRotationZ","basicArmRotationZ1","basicCapeRotationX","basicCapeRotationX1","PlayerAnimation","progress","isMovingOrRunning","isCrouched","pr","leatherLayer1","leatherLayer1Overlay","leatherLayer2","leatherLayer2Overlay","chainmailLayer1","chainmailLayer2","ironLayer1","ironLayer2","diamondLayer1","diamondLayer2","goldenLayer1","goldenLayer2","netheriteLayer1","netheriteLayer2","turtleLayer1","getMyHand","userName","newMap","box","setSkinUVs","setUVs","toFaceVertices","x1","y1","x2","y2","top","bottom","left","front","right","back","uvAttr","uvRight","uvLeft","uvTop","uvBottom","uvFront","uvBack","newUVData","uvArray","uv","AnimationController","startAnimation","createAnimation","onCancelled","cancelCurrentAnimation","animationCycleFinish","forceFinish","callComplete","tween","callbacks","cb","DEFAULT_SPEEDS","SmoothSwitcher","getState","setState","speeds","calculateDuration","newState","maxDuration","currentState","targetValue","currentValue","diff","speed","duration","getPropertySpeed","property","startTransition","stateName","onEnd","easing","tweenJs","state","transitionTo","getCurrentValue","watchProperty","asyncGetter","valtioProxy","readySetter","cleanup","lastRes","request","req","res","rotationPositionData","HoldingBlock","offHand","newHand","oldHand","updateItem","initCameraGroup","startSwing","_this_swingAnimator","stopSwing","originalCamera","renderer","ambientLight","directionalLight","_this_swingAnimator1","_this_blockSwapAnimation","_this_swingAnimator2","_this_idleAnimator","now","scene","viewerSize","minSize","offHandDisplay","playBlockSwapAnimation","forceState","targetY","cancelled","isDifferentItem","_block_fullItem","_block_fullItem1","Item","PrismarineItem","updateCameraGroup","camera","_this_getHandHeld3d","scaleData","side","createItemModel","handItem","blockInner","isBlock","modelName","rotationDeg","replaceItemModel","_this_holdingBlock","_this_holdingBlock1","testUnknownBlockSwitch","setNewItem","switchRequest","playAppearAnimation","result1","blockOuterGroup","HandSwingAnimator","HandIdleAnimator","getHandHeld3d","_this_lastHeldItem_type","itemData","blockData","handMesh","startIdleAnimation","stopIdleAnimation","getStateTransform","time","amplitude","stateTransform","_this_idleTween","deltaTime","getCurrentState","stage","sqrtProgress","sinProgress","swingProgress","sinSqrtProgress","xOffset","zOffset","xOffset1","yOffset1","zOffset1","isCurrentlySwinging","blockProvider","worldRenderModel","renderSlot","debugIsQuickbar","_appViewer_resourcesManager_currentResources","fullBlockModelSupport","itemModelName","isItem","bot","getRenamedData","itemTexture","_resourcesManager_currentResources_guiAtlas","_tryGetAtlasTexture","atlas","tryGetAtlasTexture","blockToTopTexture","_r_top","appViewer","getThreeJsRendererMethods","prop","_obj_geometry","_obj_material","_obj_material_map","cleanTextures","textureCache","imagesPromises","loadThreeJsTextureFromUrlSync","promise","getLoadedImage","loadThreeJsTextureFromBitmap","_loadTexture","onLoad","_Promise_withResolvers","exportWorldGeometry","cameraPosition","cameraRotation","_worldRenderer_version","includeTexture","sectionObject","positionAttr","normalAttr","colorAttr","indexAttr","exportData","downloadWorldGeometry","filename","blob","Blob","_loadWorldGeometryFromUrl","createMeshesFromExport","groups","IndexArrayType","maxIndex","Uint32Array","Uint16Array","_loadTextureFromDataUrl","dataUrl","Image","BANNER_NAME_TO_COLOR","BANNER_COLORS","getBannerBaseColor","_BANNER_NAME_TO_COLOR_baseName","renderPattern","pattern","createBannerCacheKey","baseColor","patterns","patternStr","_p_Pattern","_p_Color","renderBanner","BANNER_WIDTH","BANNER_HEIGHT","_patternData_Color","_patternData_Pattern","patternData","colorId","bannerTextureCache","getBannerTexture","cached","releaseBannerTexture","createBannerMesh","isWall","clothYOffset","clothZPosition","thickness","CursorBlock","destroyStagesImages","breakMaterial","updateLineMaterial","inCreative","pixelRatio","LineMaterial","updateBreakAnimation","blockPosition","mergedShape","_this_breakTextures_stage","hideBreakAnimation","updateDisplay","setHighlightCursorBlock","shapePositions","force","sameArray","_this_interactionLines_shapePositions","lines","LineSegmentsGeometry","wireframe","Wireframe","getItemUv","idOrName","blockState","_loadedData_blocksByStateId_blockState","_loadedData_items_idOrName","getItemModelName","renderInfo","img","_renderInfo_slice","_ref1","ThreeJsSound","volume","initAudioListener","playSound","path","pitch","timeout","sound","audioLoader","buffer","stopAll","changeVolume","individualVolume","playTestSound","CameraShake","onRenderCallbacks","setBaseRotation","yaw","getBaseRotation","shakeFromDamage","startRoll","targetRoll","elapsed","yawQuat","pitchOffset","yawOffset","pitchQuat","yawQuat1","rollQuat","finalQuat","easeOut","easeInOut","addAntiZfightingOffset","angle","normalizedAngle","ThreeJsMedia","onWorldGone","videoData","onWorldStop","createErrorTexture","background","createBackgroundTexture","opacity","validateOrigin","src","allowOrigins","origin","onPageInteraction","_videoData_video","fromCatch","addMedia","props","_props_rotation","originalProps","structuredClone","video","_props_loop","_props_volume","positionalAudio","_props_volume1","soundSystem","sendVideoStop","sendVideoPlay","backgroundTexture","handleError","_this_customMedia_get","panel","_this_positionMeshExact","updateUVMapping","sectionY","sectionKey","setVideoPlaying","playing","setVideoSeeking","seconds","setVideoVolume","setVideoSpeed","destroyMedia","mediaData","positionMeshExact","startPosition","debugGroup","startMarker","endX","endZ","endYMarker","endWidthMarker","endCornerMarker","directionHelper","createTestCanvasTexture","addTestMeshExact","rotationNum","plane","tryIntersectMedia","_this_worldRenderer","mouse","intersects","intersection","intersectedObject","WAYPOINT_CONFIG","createWaypointSprite","_options_color","_options_depthTest","_options_label","_options_label1","arrowSprite","depthTest","_options_labelYOffset","sprite","createCombinedSprite","currentLabel","lastDistanceText","lastDistance","arrowParent","arrowEnabled","_options_position","setColor","newColor","_mat_map","drawCombinedCanvas","mat","setLabel","newLabel","updateDistanceText","label","distanceText","setPosition","updateScaleScreenPixels","cameraFov","viewportHeightPx","worldUnitsPerScreenHeightAtDist","vFovRad","ensureArrow","size","colorHex","updateOffscreenArrow","viewportWidthPx","_options_metadata","onlyLeftRight","forward","upWorld","upCam","camPos","toWp","aspect","hFovRad","thetaX","thetaY","rx","ry","s","ndcX","ndcY","clampedPxX","clampedPxY","placeDist","halfPlaneHeight","sPx","computeDistance","dispose","_am_map","am","enableOffscreenArrow","enabled","setArrowParent","parent","updateForCamera","roundedDistance","onScreen","centerX","dotY","radius","borderWidth","nameFontPx","distanceFontPx","nameY","distanceY","WaypointsRenderer","updateWaypoints","currentTime","playerPos","cameraMovedSignificantly","timeToUpdate","sizeVec","waypoint","waypointPos","addWaypoint","_options_minDistance","metadata","minDistance","removeWaypoint","testWaypoint","getWaypoint","getAllWaypoints","setWaypointColor","setWaypointLabel","SkyboxRenderer","defaultSkybox","initialImage","setSkyboxImage","textureLoader","newViewDistance","_this_voidMesh","updateTime","partialTicks","updateViewDistance","viewDistance","updateTemperature","temperature","updateWaterState","inWater","waterBreathing","updateDefaultSkybox","createGradientSky","geometry1","getFogColor","getSkyColor","brightness","rgb","red","green","blue","calculateCelestialAngle","modTime","getCelestialAngle","getTemperature","getSkyColorByTemp","baseHue","hue","orangeHue","saturation","hsbToRgb","f","q","updateSkyColors","renderDistance","targetBrightness","waterViewDistance","viewFactor","skyColor","fogColor","clampedBrightness","interpolatedBrightness","FIREWORKS_CONFIG","getOffsetXYZ","getOffsetRGBA","getRandomNum","drawRadialGradation","canvasRadius","canvasW","canvasH","gradient","createFireworksTexture","diameter","getPointMesh","num","vels","particleSize","bufferGeometry","velocities","colors","adjustSizes","masses","colorType","singleColor","multipleColor","rgbType","rgbTypeDice","size1","size2","shaderMaterial","vertexShader","fragmentShader","ParticleMesh","gravity","velocity","mass","_getOffsetXYZ","decrementRandom","disposeAll","ParticleSeedMesh","shake","dice","_f","ParticleTailMesh","BasicFireworks","getSeed","vy","pm","explode","getFlower","theta","phi","vx","vz","vel","zStep","trad","sphereRate","vz1","vx1","xStep","vy1","yStep","vel1","particleMesh","drawTail","offsetPos","l","_this_seed_mesh_position","flowerPos","highestPos","l1","RichFireworks","getTail","tails","petalColor","j","tail","_getOffsetRGBA","petalR","petalG","petalB","petalA","k","rgba","_this_flower_mesh_position","flowerGeometry","desiredVelocity","tailPos","tailVel","steer","FireworksManager","_config_defaultParticleSize","_config_maxActiveFireworks","launchFirework","_options_particleSize","fw","explodedIndexList","instance","instance1","_instance_flower","WorldRendererThree","_WorldRendererThree_getRendererInfo","StarField","worldSwitchActions","downloadWorldGeometry1","_e_headPitch","isPosUpdate","updatePlayerEntity","resetScene","_value_stage","isLeft","holdingBlock","oldTexture","oldItemsTexture","_superprop_get_updateAssetsData","onAllTexturesLoaded","changeBackgroundColor","timeUpdated","newTime","biomeUpdated","biomeReset","getItemRenderData","demoModel","helper","cursorBlockRel","demoItem","addDebugOverlay","formatBigNumber","Intl","updatePosDataChunk","_key_split_map","chunkDistance","cameraSectionPositionUpdate","getDir","current","finishChunk","_this_waitingChunksToDisplay_chunkKey","handleWorkerMessage","staticChunkMesh","posKey","signBlockEntity","_posKey_split","sign","posKey1","isWall1","rotation1","headBlockEntity","_posKey_split1","z1","head","_iteratorError2","posKey2","isWall2","rotation2","bannerBlockEntity","_posKey_split2","z2","bannerTexture","banner","_this_waitingChunksToDisplay","_chunkKey","getSignTexture","backSide","textures","texturekey","getCameraPosition","worldPos","getSectionCameraPosition","updateCameraSectionPos","newSectionPos","setFirstPersonCamera","_pos_offset","getThirdPersonCamera","isBack","direction","nearbyChunks","chunkWorldPos","meshes","finalDistance","debugRaycast","hitGeometry","hitMaterial","updateCamera","_this_currentPosTween","tweenDelay","_this_currentRotTween","halfPi","_this_currentRotTween1","perspective","currentCameraPos","thirdPersonPos","debugChunksVisibilityOverride","_this_reactiveDebugParams","chunksRenderAboveOverride","chunksRenderBelowOverride","chunksRenderDistanceOverride","chunksRenderAboveEnabled","chunksRenderBelowEnabled","chunksRenderDistanceEnabled","baseY","object1","sizeChanged","cam","fountain","onRender","totalTime","end","renderHead","_blockEntity_SkullOwner_Properties_textures_","_blockEntity_profile_properties_find","scaleFactor","lineHeight","rerenderAllChunks","updateShowChunksBorder","getLoadedChunksRelative","includeY","_sectionPos","currentX","currentY","currentZ","o","xRaw","yRaw","zRaw","cleanChunkTextures","_this_chunkTextures_get","readdChunks","disableUpdates","children","_child_children","_key","_$_get","_args","worldStop","shouldObjectVisible","updateSectionOffsets","anim","timeDelta","reloadWorld","getRendererInfo","_this_cameraGroupVr","addToScene","positions","sizes","increment","_positions","genStar","StarfieldMaterial","remove","_window_location_search","_process_env_INLINED_APP_CONFIG","_globalThis","qsParams","URLSearchParams","appQueryParams","_miscUiState_appConfig_appParams","qsParam","appQueryParamsArray","_miscUiState_appConfig_appParams_property","updateQsParam","ourLastStatus","setLoadingScreenStatus","status","_window_translateText1","isError","hideDots","fromFlyingSquid","minecraftJsonMessage","appStatusState","hideModal","activeModalStack","resetAppStatusState","showModal","miscUiState","resetStateAfterDisconnect","DocumentRenderer","externalCanvas","supportsWebGL2","TopRightStats","updatePixelRatio","sizeUpdated","addToPage","addCanvasToPage","updateSizeExternal","newWidth","newHeight","updateCanvasSize","innnerWidth","innnerHeight","setupFpsTracking","startRenderLoop","_this_inWorldRenderingConfig","_this_stats","fpsInterval","frameRender","_this_stats1","setPaused","paused","cancelAnimationFrame","clearTimeout","HTMLCanvasElement","initialStatsVisible","Stats","StatsGl","process","addStat","dom","_document_getElementById","initStats","hasRamPanel","_child","setVisibility","level","markStart","markEnd","WorldDataEmitterWorker","WorldDataEmitter","listenToBot","bot1","entitiesObjectData","emitEntity","oldBlock","newBlock","_newBlock_stateId","evt","listener","emitterGotConnected","_bot_world_getBlock","_posKey_split_map","removeListenersFromBot","_bot_time","_bot1","chunkProgress","avgReceiveTime","_loadChunks","centerPos","spiralNumber","continueLoading","readdDebug","clonedLoadedChunks","loadedChunk","_loadedChunk_split_map","loadChunk","reason","column","_this_debugChunksInfo","_column_minY","_column_worldHeight","unloadAllChunks","coords","_coords_split_map","unloadChunk","udpateBiome","biomeId","biomeData","updatePosition","posFloored","lastX","lastZ","_chunkPos1","newViewToUnload","chunksToUnload","_chunkPos2","p1","ViewRect","_$pos","getDefaultRendererState","date","isChristmas","panoramaFiles","PanoramaRenderer","documentRenderer","doWorldBlocksPanorama","debugImageInFrontOfCamera","join","addClassicPanorama","panorGeo","panorMaterials","file","load","panoramaBox","worldBlocksPanorama","fullResourceManager","Block","fullBlocks","initPos","initX","initY","prevTwin","PrismarineBlock","require","_b_shapes","shape","xRel","yRel","_initVR","vrButtonContainer","updateVrButtons","user","controllerModelFactory","controller1","controller2","connectedVirtualGamepad","manageXrInputSource","hand1","hand2","originalGetGamepads","rotSnapReset","enableVr","disableVr","createVrButtonContainer","vrButton","VRButton","styleContainer","closeButton","createCloseButton","typedAssign","_checkVRSupport","_navigator_xr","supported","XRSession","checkVRSupport","newHidden","XRControllerModelFactory","GLTFLoader","defaultHandedness","gamepad","handedness","removeAction","event","Event","originalGamepads","remapAxes","remapButtons","xrStandardRightButtonsMap","xrStandardLeftButtonsMap","rightButtons","leftButtons","remapped","remapWithMap","buttons","map","standardName","standardButtonsMap","aliases","alias","axesRight","axesLeft","createGraphicsBackend","panoramaRenderer","startPanorama","qs","supportedVersions","callModsMethod","startWorld","initVR","backend","disconnect","_window_loadedMods","_mod_threeJsBackendModule","errorMessage","showNotification","getNonFullBlocksModels","_appViewer_resourcesManager_currentResources_version","itemsDefinitions","blockModelsResolved","itemsModelsResolved","fullBlocksWithNonStandardDisplay","handledItemsWithDefinitions","assetsParser","AssetsParser","getLoadedBlockstatesStore","getLoadedModelsStore","standardGuiDisplay","arrEqual","addModelIfNotFullblock","_assetsParser_blockModelsStore_data_latest__textures_layer0","_display","_model_display","_model","_gui","definition","getItemDefinition","resolvedModel","_assetsParser_getResolvedModelsByModel","_resolvedModel_display","hasStandardDisplay","notSideLight","name1","blockstate","resolvedModel1","generateItemsGui","isItems","currentResources","imgBitmap","canvasTemp","atlasParser","textureAtlas","PREVIEW_ID","textureWasRequested","modelData","currentModelName","includeOnly","images","missingTextures","resetGLContext","TextureAtlas","_value_su","_value_sv","Identifier","BlockDefinition","BlockModel","ItemModel","ItemStack","NbtString","ItemRenderer","patchMissingTextures","faceName","generateAtlas","makeTextureAtlas","generateGuiAtlas","_getNonFullBlocksModels","blockImages","itemImages","LoadedResourcesTransferrable","ResourcesManager","blocksAtlases","itemsAtlases","itemDefinitionsJson","getLoadedItemDefinitionsStore","loadSourceData","resetResources","unstableSkipEvent","abortController","_this_currentResources","_this_currentConfig_texturesVersion","ItemsRenderer","recreateBlockAtlas","_resources_customTextures_blocks_textures","blockTexturesChanges","blocksAssetsParser","customBlockTextures","blocksAtlas","blocksCanvas","christmasPack","AtlasParser","blocksAtlasLatest","blocksAtlasLegacy","textureName","_resources_customTextures_blocks","_blockTexturesChanges_textureName","worldBlockProvider","recreateItemsAtlas","_resources_customTextures_items_textures","_resources_customTextures_items1","itemsAssetsParser","customItemTextures","itemsAtlas","itemsCanvas","itemsAtlasLatest","itemsAtlasLegacy","_resources_customTextures_items","generateGuiTextures","downloadDebugAtlas","reloadChunks","watchValue","updateTouch","watchOptionsAfterViewerInit","renderDebug","isCypress","windowFocused","updateFpsLimit","backgroundFpsLimit","normalFpsLimit","isChanged","watchOptionsAfterWorldViewInit","defaultGraphicsBackendConfig","AppViewer","loadBackend","loader","_this_backendLoader","rendererSpecificSettings","rendererSettingsKey","_this_backend","_this_currentState","_bot_entity","eventName","modalStackUpdateChecks","startWithBot","appConfigUdpate","playerStateSend","displayWorldOptions","_this_backend_startWorld","isPlayground","resetBackend","cleanState","hasAppStatus","destroyAll","disconnectBackend","initialMenuStart","loadMinecraftData","subscribe","appGraphicBackends","appLoadBackend","animLoop","beforeRenderFrame","audioContext","sounds","activeSounds","loadingSounds","convertedSounds","_loadSound","contents","audioBuffer","loadOrPlaySound","soundVolume","loadTimeout","loop","isMusic","loadSound","_playSound","soundBuffer","gainNode","reportWarningOnce","stopAllSounds","stopSound","soundIndex","changeVolumeOfCurrentlyPlayingSounds","newVolume","newMusicVolume","normalizedVolume","volumeMultiplier","displayClientChat","parseFormattedMessagePacket","googleDriveFileSystem","GoogleDriveFileSystem","browserfs","defaultMountablePoints","fallbackMountablePoints","e2","updateTexturePackInstalledState","forceCachedDataPaths","forceRedirectPaths","fs","promisify","toRemap","from","fsState","oneOf","fd","_fs","bytesRead","removeFileRecursiveSync","curPath","mkdirRecursive","parts","part","err1","uniqueFileNameFromWorldName","savePath","resultPath","free","sanitizeFilename","mountExportFolder","handle","showDirectoryPicker","DOMException","googleDriveGetFileIdFromPath","mountGoogleDriveFolder","readonly","rootId","_removeFileRecursiveAsync","removeDirectoryItself","files","removeFileRecursiveAsync","_$path","openWorldDirectory","dragndropHandle","directoryHandle","_directoryHandle","requestResult","writeAccess","SUPPORT_WRITE","confirm","loadSave","tryToDetectResourcePack","alert","askInstall","possiblyCleanHandle","readdirSafe","collectFilesToCopy","basePath","safe","countFiles","relPath","resolvedPath","copyFilesAsyncWithProgress","pathSrc","pathDest","throwRootNotExist","addMsg","stat","filesCount","copied","existsViaStats","copyFilesAsync","fileExistsAsyncOptimized","fileCopied","curPathSrc","curPathDest","openWorldFromHttpDir","fileDescriptorUrls","baseUrlParam","baseUrl","controller","openWorldZipInner","connectOptions","dirs","availableWorlds","File","openWorldZip","resetLocalStorage","resetOptions","resetAppStorage","openFilePicker","specificCase","picker","VALID_REPLAY_EXTENSIONS","_picker_files","installResourcepackPack","createFullScreenProgressReporter","ext","openFile","global","formatMessage","msglist","readMsg","msg","styles","_msg_json","tText","_mcData_language_msg_translate","splitted","msgWith","ex","_msg_extra_flatMap","_msg_text","fromFormattedString","blockToItemRemaps","getItemFromBlock","_blockToItemRemaps_block_name","isAllowedChatCharacter","char","charCode","isStringAllowed","invalidChars","valid","getVersionAutoSelect","autoVersionSelect","MinecraftData","downloadAllMinecraftData","reporter","loadFonts","FONT_FAMILY","downloadOtherGameData","downloadSoundsIfNeeded","ideState","registerIdeChannels","registerIdeOpenChannel","registerIdeSaveChannel","CHANNEL_NAME","language","IDE_SAVE_CHANNEL_NAME","saveIde","createProgressReporter","implementation","currentMessage","stages","ended","updateStatus","activeStages","_activeStages_at","isFinite","subStageTitle","tempStage","fullScreenReporters","createNotificationProgressReporter","endMessage","pixelartIcons","hideNotification","createConsoleLogProgressReporter","createWrappedProgressReporter","registerBlockModelsChannel","registerMediaChannels","registerSectionAnimationChannels","registeredJeiChannel","registerBlockInteractionsCustomizationChannel","registerWaypointChannels","registerFireworksChannels","registerServerSettingsChannel","registerChannel","channelName","packetStructure","handler","waitForWorld","_getThreeJsRendererMethods","worldName","blockPosKey","speedX","speedY","speedZ","limitX","limitY","limitZ","categoryTitle","jeiCustomCategories","PItem","itemString","itemId","noDataPacketStructure","setNumberPacketStructure","getCurrentTopDomain","MEDIA_INTERACTION_CHANNEL","MEDIA_PLAY_CHANNEL_CLIENTBOUND","MEDIA_STOP_CHANNEL_CLIENTBOUND","sendVideoInteraction","isRightClick","videoCursorInteraction","intersectMedia","isImage","settings","appliedCount","skippedCount","serverSafeSettings","hostname","debug","states","customCommunication","processData","CustomChannelClient","isServer","setSerializer","endReason","fullReason","client","write","writeBundle","packets","writeRaw","newProperty","oldProperty","LocalServer","customPackets","hideErrors","listen","close","module","defaultOptions","getDefaultTouchControlsPositions","getTouchControlsSize","javaUUID","crypto","nameToMcOfflineUUID","UUID","_savePlayers","autoSave","_localServer","localServer","saveServer","worlds","savePlayers","appReplacableResources","latest_gui_title_minecraft","other_textures_1_19_gui_icons","other_textures_latest_gui_widgets","other_textures_latest_gui_bars","latest_gui_container_inventory","latest_gui_container_shulker_box","latest_gui_container_generic_54","furnace_gui_texture","latest_gui_container_crafting_table","latest_gui_container_dispenser","latest_gui_container_hopper","latest_gui_container_horse","latest_gui_container_villager2","latest_gui_container_enchanting_table","latest_gui_container_anvil","latest_gui_container_beacon","latest_gui_container_smithing","_1_19_4_gui_container_smithing","resourcesContentOriginal","versionFrom","collisionShapesInit","renamedBlocks","notHideableModalsWithoutForce","insertActiveModalStack","newModalStack","activeModalStacks","_activeModalStack","last","showModalInner","modal","_modal_elem","elem","resolved","curModal","restorePrevious","cancel","lastModal","newModal","hideCurrentModal","_data","onHide","hideAllModals","openOptionsMenu","maybeCleanupAfterDisconnect","isGameActive","foregroundCheck","updateFullscreen","gameAdditionalState","_globalThis1","_navigator","_window_reportError","onFireTimeout","lastMouseMove","lastClickedElTimeout","peerInstance","_controEx_userConfig","adapter","activeTouch","_bot_blockAtCursor","newPos","_window_world_getLoadedChunksRelative","_window_world","zRel","_sessionStorage_ignorePackets","oldEmit","packetName","isFromClient","fullOrListener","RegExp","packetNameListener","packetListener","attach","_bot","_bot2","detach","returnobj","disable","enable","keysToKeep","currentStatsPerSec","waitingStatsPerSec","_waitingStatsPerSec","_label","_waitingStatsPerSec_label","_currentStatsPerSec","updateStatsPerSecAvg","statsPerSecCurrent","lastReset","_statsPerSecCurrent","_name","ws","wsReconnectTimeout","metricsInterval","collectAndSendMetrics","WebSocket","_performance_memory_usedJSHeapSize","metrics","getWebSocketUrl","connectWebSocket","wsUrl","EntityStatus","updateAutoJump","autoJump","tracker","autoJumpPlugin","playerPerAnimation","checkEntityData","trackBotEntity","lastCall","_getThreeJsRendererMethods1","tracking","isWalking","isSprinting","newAnimation","slot","_appViewer_worldView","damage","entityStatus","updateEntityStates","handleEntityMetadata","packet","entity1","applySkinTexturesProxy","appConfig","updateSkin","entId","reportError","teamUpdated","team","updateEntityNameTags","doEntitiesNeedUpdating","_appViewer_playerState_reactive_team","_appViewer_playerState_reactive_team1","members","ENTITY_FLAGS","onFire","flagsData","sessionStorage","_activeModalStack_at_elem","isInRealGameSession","_e_target","_window_getSelection","ALLOW_TAGS","setImageConverter","buf","mapDownloader","png","health","customStickNbt","tags","cmd","wrapIntoQuotes","writeCmd","unit","valueProp","valueDisplay","disabledReason","throttle","updateOnDragEnd","updateValue","divProps","translate","_useState","setValue","getRatio","_useState1","ratio","setRatio","timeoutRef","useRef","lastValueRef","_useState2","showGamepadTooltip","setShowGamepadTooltip","lastChangeTime","containerRef","useEffect","throttledUpdateValue","useCallback","newValue","dragEnd","handleMouseOver","handleMouseOut","handleGamepadInputChange","constrainedValue","fireValueUpdate","labelText","arrowRef","_useFloating","arrow","offsetMiddleware","ARROW_HEIGHT","refs","floatingStyles","context","SharedHudVars","node","FloatingArrow","showAllSettingsEditor","isModalActive","useIsModalActive","optionsSnapshot","useSnapshot","disabledSettingsSnapshot","disabledSettings","searchTerm","setSearchTerm","editingKey","setEditingKey","editingValue","setEditingValue","searchInputRef","dropdownRef","filteredOptions","useMemo","search","keyLower","titleKey","titleCase","noCase","handleClickOutside","handleValueClick","handleValueChange","parseFloat","isNaN","OptionRow","optionKey","valueButtonRef","isDisabled","isEditing","isBoolean","isNumber","isString","renderValueEditor","dropdownStyle","rect","Input","Screen","PixelartIcon","Button","isLocked","useCommonComponentsProps","disabledBecauseOfSetting","disableIfSetting","ignoreReloadWarningsCache","OptionButton","onClick","valueText","optionValue","valuesTitlesMap","getOptionValue","currentIndex","nextIndex","toCacheKey","showOptionsModal","arrItem","reconnectReload","result2","reloadChunksAction","OptionSlider","onChange","valueOverride","Slider","OptionElement","RenderOption","gameLoaded","_item","baseElement","backButtonAction","_element_id","sillyProtection","protectRuntime","sensetiveKeys","_$proxy","dbPromise","openDB","db","_saveClientModData","modsReactiveUpdater","_getPlugin","_getAllMods","_deletePlugin","_saveRepository","_getRepository","_getAllRepositories","_deleteRepository","getAllRepositories","React","valtio","valtioUtils","activateMod","style","_mod_name","blob1","url1","_window_loadedMods1","_mod_name1","module1","getModSettingsProxy","e1","appStartup","mods","checkModsUpdates","getAllMods","_modsErrors","modsErrors","modsUpdateStatus","modsWaitingReloadStatus","normalizeRepoUrl","installOrUpdateMod","repo","fetchData","urls","errored","urlTemplate","modNameOnly","modFolder","saveClientModData","checkRepositoryUpdates","modExisting","getPlugin","gt","fetchRepository","urlOriginal","fetchUrl","hasMirrors","getRepository","saveRepository","fetchAllRepositories","repositories","allUrls","isLast","appStorage","autoRefreshModRepositories","lastCheck","installModByName","repoUrl","uninstallModAction","choice","deletePlugin","setEnabledModAction","newEnabled","_window_loadedMods_mod_name","_window_loadedMods_mod_name1","getAllModsDisplayList","repos","installedMods","modsWithoutRepos","mapMods","_installedMods_find","removeRepositoryAction","deleteRepository","selectAndRemoveRepository","addRepositoryAction","showInputsModal","getServerPlugin","plugin","getAvailableServerPlugins","getAllModsModifiableFields","_options_","setting","ops","op","_op","callMethodAction","modName","importData","_data__about","input","presentTypes","importChoices","importedTypes","shouldMerge","key1","existingIps","newServers","uniqueProxies","existingAccounts","newAccounts","_input_files","_","customKeymaps","_appStorage_proxiesData","_appStorage_proxiesData1","fileName","getChangedSettings","guiOptionsScheme","frameLimitValue","frameLimitMax","setFrameLimitMax","newVal","getScreenRefreshRate","Category","_renderByChunks","sp","resourcePackInstalled","resourcePackState","usingServerResourcePack","enabledResourcepack","names","choices","getResourcePackNames","resourcepackReload","completeResourcepackPackInstall","uninstallResourcePack","modsUpdateSnapshot","clientMods","setClientMods","enabledModsCount","_appConfig_supportedLanguages","newLang","UiToggleButton","Boolean","_useSnapshot","touchInteractionType","touchMovementType","cookieStorage","versionAutoSelect","serversAutoVersionSelect","allVersions","active","packetsRecordingState","hasRecordedPackets","downloadPacketsReplay","addUiText","disabledUiParts","currentlyDisabled","newDisabledUiParts","tryFindOptionConfig","option","optionConfig","customCommandsConfig","_param","command","action","getBase","value1","Function","useIsWidgetActive","selected","setSelected","allSignsPos","signs","FullScreenWidget","ModuleSignsViewer","motionState","motionVelocity","lastUpdate","lastYaw","lastPitch","updateMotion","yawDiff","pitchDiff","velocityVector","cameraQuat","velocityContribution","motionEnabled","initMotionTracking","useUiMotion","ref","unsubscribe","el","onCameraMove","mouseSensX","mouseSensY","moveCameraRawHandler","_appViewer_backend","maxPitch","minPitch","pointerLockChangeCallback","pointerLock","playersLists","clientId","tablistHeader","tablistFooter","serverIP","MessageFormattedString","_player_displayName","_player_uuid","tabListState","_lastConnectOptions_value","isOpen","serverIp","setClientId","players","setPlayers","setCounter","requestUpdate","_bot_players","_bot_player","_bot_player1","playerlistHeader","prev","playersArray","totalPlayers","numColumns","playersPerColumn","lists","startIdx","endIdx","PlayerListOverlay","controlOptions","contro","ControMax","isCommandDisabled","_miscUiState_appConfig_disabledCommands","stick","updateBinds","updateDoPreventDefault","setSprinting","isSpectatingEntity","gamepadIndex","soleVector","coordToAction","_coordToAction_find","coord","mapV","lastCommandTrigger","secondActionCommands","toggleFly","cameraRotationControls","movement","pressed","directionMap","setSneaking","onTriggerOrReleased","stringStartsWith","MouseEvent","onF3LongPress","alwaysPressedHandledCommand","_activeModalStack_at_reactType","_toggleMicrophoneMuted","lockUrl","newQs","worldFolder","_lastConnectOptions_value1","server","botVersion","cycleHotbarSlot","newHotbarSlot","_contro_userConfig","_command_split","isCommandAvailableAfterDisconnect","_miscUiState_disconnectedCleanup","willContinue","commandToTrigger","openPlayerInventory","chatInputValueGlobal","selectItem","goFullscreen","_activeModalStack_at","isActive","f3Keybinds","widgetNames","widget","widgets","nextGameMode","switchGameMode","uuid","playerPing","proxyPing","copyServerResourcePackToRegular","f3Keybind","_keybind_enabled1","keybind","isFlying","_bot_physicsEngineCtx_state_flying","startFlying","sendAbilities","endFlying","onBotCreate","_getItemFromBlock","commands","_commands_custom","actions","_value_keys","_value_gamepad","addEventListener","_e_target_matches","link","actionNames","select","_f3Keybind_enabled1","handleMobileButtonCustomAction","_customCommandsConfig_action_type","triggerCommand","isDown","handleMobileButtonActionCommand","commandValue","handleMobileButtonLongPress","actionHold","loadAppConfig","_appViewer","qsOptions","defaultsDeep","setStorageDataOnAppConfigLoad","preventThrottlingWithSound","oscillator","maybeGoBackgroundKickPrevention","unsub","requestWakeLock","cursorBlockDisplay","updateCursorBlock","createMouse","domListeners","otherListeners","isOffhand","videoInteraction","botInit","clientWrite","curI","onPong","received","pingId","_bot_player_ping","curId","BigInt","getAppLanguage","packetsPatcher","lastConnectOptions","ping","localRelayServerPlugin","loadingChunksProgress","gameStopped","checkStartProgress","lastChunksLoaded","chunksTotal","currentChunksLoaded","deleteProgress","setNotificationProgress","intervalId","startInventoryTexturesProgress","progressNotificationsProxy","gamepadUiCursorState","moveGamepadCursorByPx","isX","valueToPercentage","hasModals","_useSnapshot1","usingGamepadInput","doDisplay","lastHoveredElement","emitMousemove","trackHoveredElement","xAbs","yAbs","mouseoutEvent","mouseoverEvent","emitGamepadInputChange","emulateGamepadScroll","isStickMovement","cursorX","cursorY","customEvent","CustomEvent","scrollableParent","findScrollableParent","isScrollable","overflowY","hasVerticalScroll","lastClickedEl","inModalCommand","emulateMouseClick","parseServerAddress","address","removeHttp","port","host","tabs","activeTab","labels","onTabChange","fullSize","disabledTabs","tab","_labels_tab","useIsSmallWidth","setIsSmall","checkWidth","removeEventListener","useCopyKeybinding","getCopyText","useUtilsEffect","activeElement","HTMLInputElement","HTMLTextAreaElement","copyText","signal","useIsHashActive","setIsActive","checkHash","GroupHeader","expanded","onToggle","isFocused","lastPlayed","detail","onFocus","onInteraction","iconSrc","formattedTextOverride","worldNameRight","worldNameRightGrayed","afterTitleUi","elemRef","offline","timeRelativeFormatted","formatter","minutes","hours","days","sizeFormatted","filesize","classNames","missingWorldPreview","_worldData_defaultSelectedRow_name","_worldData_selectedRow","worldData","onGeneralAction","onWorldAction","firstRowChildrenOverride","serversLayout","searchRowChildrenOverride","activeProvider","setActiveProvider","providerActions","providers","disabledProviders","isReadonly","warning","warningAction","warningActionLabel","hidden","onRowSelect","defaultSelectedRow","selectedRow","listStyle","setListHovered","secondRowStyles","lockedEditing","retriggerFocusCounter","firstButton","worldRefs","useTypedEventListener","elements","focusable","focusedElemIndex","nextElem","setSearch","focusedWorld","setFocusedWorld","expandedGroups","setExpandedGroups","_worldRefs_current_worldName","onRowSelectHandler","isSmallWidth","toggleGroup","groupName","Tabs","Fragment","filtered","_expandedGroups_groupName","_expandedGroups_groupName1","rest","row","interaction","_firstButton_current","_defaultValue_label","_defaultValue_label1","initialOptions","updateOptions","getCssOnInput","onValueChange","containerStyle","placeholder","disabled","inputValue","setInputValue","currValue","setCurrValue","inputStyle","setInputStyle","_useState3","isFirstClick","setIsFirstClick","Creatable","_e_value","_e_value1","_e_value2","_getCssOnInput","base","getInitialProxies","_miscUiState_appConfig","proxies","getCurrentProxy","getCurrentUsername","_appQueryParams_username","_snap_proxiesData","_snap_serversHistory","joinServer","onProfileClick","setQuickConnectIp","snap","_React_useState","setServerIp","_React_useState1","setSave","_React_useState2","activeHighlight","setActiveHighlight","updateProxies","newData","setUsername","getActiveHighlightStyles","initialProxies","proxiesData","Singleplayer","checked","Select","newSel","serverName","hovered","pingServerVersion","ip","mergeOptions","fakeClient","latency","fullInfo","clientAutoVersion","_err_message","CHAT_VALIDATE_PACKETS","validatePacket","fullBuffer","isFromServer","maxDepth","getObjectMaxDepth","currentDepth","CustomDuplex","writeAction","_read","_write","encoding","Duplex","getWebsocketStream","baseProtocol","hostClean","hostURL","hostParams","clientDuplex","UserError","lastPacketTime","MinecraftProtocolError","cause","onClientError","packetMeta","getServerInfo","preferredVersion","progressReporter","setProxyParams","stream","isWebSocket","setProxy","getDefaultProxyParams","_get","proxyParams","_proxyParams_address","https","parsedProxy","_proxyParams","net","renamedBlocksInteraction","outputInteractionShapesJson","interactionShapes","dieReasonMessage","respawnCallback","disconnectCallback","MessageFormatted","dieReasonProxy","messageParsed","DeathScreen","finalItemsScheme","optionsArr","optionsObj","metaMerge","OptionsItems","_useSnapshot_at","reactType","settingsGroup","OptionsGroup","HTTPS_REGEX","SPLASH_CACHE_KEY","limitWords","words","isRemoteSplashText","loadRemoteSplashText","timeoutId","clonedResponse","json","jsonError","cacheSourceUrl","clearSplashCache","cacheSplashText","initialTooltip","alwaysTooltip","localStorageKey","showTooltips","setShowTooltips","DiscordButton","links","DropdownButton","setIsOpen","autoPlacement","PauseLinkButtonsInner","pauseLinksConfig","renderButton","button","_button_text","openGithub","ErrorBoundary","httpsRegex","connectToServerAction","mapsProvider","singleplayerAction","optionsAction","openFileAction","githubAction","versionText","onVersionTextClick","versionStatus","versionTitle","onVersionStatusClick","bottomRightLinks","singleplayerAvailable","splashText","cachedText","configSplashFromApp","isRemote","sourceKey","storedSourceKey","fetchedText","linksParsed","singleplayerLongPress","useLongPress","versionLongPress","buildDate","hoursAgo","connectToServerLongPress","ButtonWithTooltip","haveDirectoryPicker","PauseLinkButtons","CreditsBookButton","isMainMenu","refreshApp","failedUpdate","registration","_window_clients","clients","mainMenuState","disableAnimation","haveModals","fsReady","noDisplay","setVersionStatus","setVersionTitle","isLatest","upStatus","mapsProviderUrl","AnimatePresence","motion","MainMenu","overridePeerJsServer","getJoinLink","copyJoinLink","joinLink","openToWanAndCopyJoinLink","writeText","doCopy","_miscUiState_appConfig1","peer","fallbackServer","hasFallback","hadErrorReported","parseUrl","Peer","connection","serverDuplex","Client","endConnection","disconnected","urlObj","closeWan","connectToPeer","peerId","resolveTimeout","_addFolderToZip","folderPath","zip","relativePath","entries","entry","entryPath","zipEntryPath","subZip","fileData","addFolderToZip","exportWorld","zipName","zipContent","downloadLink","dest","levelDat","JSZip","readLevelDat","exportLoadedWorld","_window_cursorBlockRel","formatted","tryHandleBuiltinCommand","_message_split","userCommand","CLIENT_ID","SCOPES","APP_ID","GoogleDriveProvider","GoogleOAuthProvider","useGoogleLogIn","login","useGoogleLogin","tokenResponse","googleProviderState","accessDenied","possiblyHandleStateVariable","stateParam","tokenClient","loadGoogleDriveApi","loadInMemorySave","worldsProxy","getWorldsPath","providersEnableFeatures","readWorlds","brokenWorlds","loggedIn","worldsPath","provider","newMappedWorlds","folder","_levelDat_Version_Name","levelDatStat","region","iconBase64","iconPath","levelName","longArrayToNumber","getScore","_x_lastModified","worldPath","Inner","gapi","_obj","selectedProvider","selectedGoogleId","readWorldsAbortController","googleDriveReadonly","exists","googleLogIn","googlePicker","_googlePicker_current","selectGoogleFolder","google","view","isGoogleProviderReady","GoogleButton","isGoogleDriveAvailable","brokenWorld","openInGoogleDrive","selectedVariant","fileId","versions","parsedsupportedVersions","parsedValue","compareVersions","num1","num2","minVersion","maxVersion","worldTypes","gameModes","creatingWorldState","cancelClick","createClick","customizeClick","defaultVersion","quota","setQuota","gameMode","plugins","_navigator_storage","usage","SelectGameVersion","availableServerPlugins","availableModNames","WorldCustomize","backClick","activeCreate","activeCustomize","defaultLocalServerOptions","CreateWorld","loadPluginsIntoWorld","content","hideOnModals","fullScreen","setFullScreen","activeStack","inMainMenu","usingTouch","useUsingTouch","hideButton","mineflayerPluginHudState","parseTextWithIcons","currentText","endBrace","iconName","TextElement","css","onTab","motionRef","innerRef","ImageElement","ui","mineflayerConsoleState","MessageLine","messageClass","opened","messages","replEnabled","consoleEnabled","onExecute","consoleInput","consoleMessages","scrollToBottom","useScrollBehavior","_consoleInput_current","updateInputValue","code","viewerVersionState","getViewerVersionData","_result_takeoverMode","openWebsocket","oldWrite","_parsed_clientIgnoredPackets","ev","getWsProtocolStream","handleCustomChannel","toCleanup","send","lils","gui","existingIndex","paramName","gui1","Gui","_update_data","paramNames","onBotCreatedViewerHandler","originalSetControlState","control","setMessages","isChatActive","lastMessageId","lastPingTime","disconnectedCleanup","chatSelect","messagesLimit","chatOpacity","chatOpacityOpened","chatVanillaRestrictions","debugChatScroll","chatPingExtension","chatSpellCheckEnabled","forwardChat","viewerConnection","jsonMsg","messageText","newMessage","Chat","builtinHandled","savePassword","validation","_validation_invalid","getServerIndex","hadPassword","updateLoadedServerData","_server","password","_$message","notificationProxy","triggerKind","completeValue","_items_","getBuiltinCommandsList","subtitle","actionBar","transitionTimes","openTitle","openActionBar","mounted","setMounted","defaultText","defaultTimings","ticksToMs","ticks","getComponent","setTitle","setSubtitle","setActionBar","animTimes","setAnimTimes","_useState4","setOpenTitle","_useState5","setOpenActionBar","mes","Title","Scoreboard","open","_item_displayName","reactKeyForMessage","ScoreboardProvider","setItems","setOpen","updateSidebarScoreboard","addStatPerSec","markdown","md","remark","ast","transformToMinecraftJSON","transformedChildren","handleInput","ProseMirrorView","handleClick","isWysiwyg","prosemirrorContainer","editorView","formattedText","markdownToFormattedText","_item_match","setLocation","isFrontText","setIsFrontText","enableWysiwyg","setEnableWysiwyg","proseMirrorView","setProseMirrorView","_packet_isFrontText","SignEditor","smallSymbols","largeSymbols","addLength","letter","formatTime","remainingSeconds","formattedMinutes","formattedSeconds","EffectBox","initialTime","setCurrentTime","timeRemaining","formattedTime","levelText","romanNumerals","defaultIndicatorsState","indicatorIcons","colorOverrides","indicators","effects","displayIndicators","displayEffects","indicatorsMapped","indicator","_colorOverrides_indicator_key","EffectsInner","effect","absorption","glowing","instant_health","nausea","slow_falling","weakness","bad_omen","haste","invisibility","night_vision","slowness","wither","blindness","health_boost","jump_boost","poison","conduit_power","hero_of_the_village","levitation","regeneration","strength","dolphins_grace","hunger","luck","resistance","unluck","fire_resistance","instant_damage","mining_fatigue","water_breathing","darkness","addEffect","newEffect","_effectData_name","_images_nameKebab","effectData","inGameError","effectIndex","getEffectIndex","removeEffect","setDummyState","stateIndicators","chunksLoading","mesherWork","hasErrors","openReadOperations","openWriteOperations","noConnection","poorConnection","allIndicators","nameKebab","gotEffect","_bot_entity_effects","IndicatorEffects","INVISIBLE_BLOCKS","toggleFullMap","grid","setGrid","zoomRef","redraw","setRedraw","lastWarpPos","setLastWarpPos","stateRef","cells","isWarpInfoOpened","setIsWarpInfoOpened","initWarp","setInitWarp","warpPreview","setWarpPreview","updateGrid","_zoomRef_current_instance_wrapperComponent","wrapperRect","columns","cellSize","rows","leftBorder","topBorder","newGrid","col","TransformWrapper","TransformComponent","cellCoords","_wrapperRect_width","_wrapperRect_height","_cellCoords_split_map","playerChunkLeft","playerChunkTop","MapChunk","WarpInfo","worldX","worldZ","touchTimer","canvasRef","longPress","clientX","clientY","_getXZ","mapX","mapZ","warp","getXZ","_adapter_mapDrawer_mapPixel","factor","handleMouseMove","handleRedraw","_canvasRef_current","_canvasRef_current1","_canvasRef_current2","_canvasRef_current3","_canvasRef_current4","_warpPos_x","_warpPos_y","_warpPos_z","_warp_x","_warp_z","_warp_disabled","warpPos","afterWarpIsSet","setWarp","posInputStyle","fieldCont","updateChunk","quickTp","thisWarp","showMinimap","showFullmap","singleplayer","fullMap","displayMode","full","canvasTick","rotateMap","requestIdleCallback","_adapter_mapDrawer","updateWarps","Fullmap","MinimapDrawer","warps","loadingChunksQueue","chunksStore","setMapPixel","draw","_this_loadingChunksQueue","updateChunksInView","viewX","viewZ","worldCenterX","worldCenterZ","leftViewBorder","rightViewBorder","topViewBorder","bottomViewBorder","drawChunk","chunkInfo","chunkCanvasX","chunkWorldX","chunkCanvasY","chunkWorldZ","_chunk_colors_index","pixelX","pixelY","drawPixel","clearChunksStore","setWarpPosOnClick","mousePos","drawWarps","_centerPos_x","_centerPos_z","_centerPos_z1","_centerPos_x1","_warp_color","circleDist","circleZ","circleX","drawPartsOfWorld","angleS","angleW","angleE","drawPlayerPos","canvasWorldCenterX","canvasWorldCenterZ","disableTurn","center","mapSize","findHeightMap","DrawerAdapterImpl","regionX","regionZ","regionKey","_this_regions_get_read","RegionFile","readX","readZ","rawChunk","heightmap","simplify","_lastConnectOptions_value_server","_lastConnectOptions_value_username","storageWarps","BlockData","blockKey","renamedKey","unsubscriber","overwriteWarps","newWarps","getHighestBlockY","_bot_game","minY","getChunkSingleplayer","loadChunkMinimap","blockX","blockZ","loadChunkNoRegion","blockY","loadChunkFromRegion","getChunkHeightMapFromRegion","loadChunkFromViewer","highestBlocks","hBlock","_hBlock_y","applyShadows","_chunk_heightmap_","_chunk_heightmap_1","_chunk_heightmap_2","_chunk_heightmap_3","_chunk_heightmap_4","_chunk_heightmap_5","isLighterOrDarker","ur","dl","linkedIndex","linkedColor","makeDarker","_color_match_map","rgbArray","makeLighter","_BlockData_colors_preflatMap_blocks__replaceAll","_preflatMap_blocks_","_this_blockData_get","blockNamePieces","keys","piece","match","drawChunkOnCanvas","TypedEventEmitter","Minimap","fullMapOpened","getEffectClass","barEffectAdded","htmlElement","effectClass","barEffectEnded","isHardcore","damaged","healthValue","effectToAdd","effectToRemove","resetEffects","healthRef","hearts","healthElement","heart","food","foodRef","foodbar","foods","food1","armorValue","armorRef","armors","armorElement","oxygen","breathRef","breathbar","breaths","breath","setDamaged","setHealthValue","setFood","setOxygen","setArmorValue","setGameMode","_useState6","setIsHardcore","_useState7","setEffectToAdd","_useState8","setEffectToRemove","hurtTimeout","onDamage","updateHealth","hValue","upArmour","armorSlots","points","_armor_armorName__armorName_","_bot_inventory_slots_slotIndex","slotIndex","armorName","HealthBar","ArmorBar","FoodBar","BreathBar","gamemode","setProgress","setLevel","setGamemode","onXpUpdate","XPBar","getFixedFilesize","bytes","prettyBytes","isInterestedInDownload","texturepack","replayFileUrl","mapDir","inner","downloadAndOpenMapFromUrl","mapUrl","texturepackUrl","mapUrlDir","_response_headers","_response_headers1","contentLength","downloadedBytes","mapUrlDirGuess","mapUrlDirBaseUrl","downloadThing","response1","contentType","contentLengthStr","contentLength1","downloadedBytes1","buffer1","Response","ReadableStream","reader","done","decoder","TextDecoder","_modelInfo_modelNames_","_loadedData_biomesArray_biomeId_name","_appViewer_backend_getDebugOverlay_left","_appViewer_backend2","_appViewer_backend_getDebugOverlay_right","_appViewer_rendererState_renderer","defaultPacketsCount","sent","receivedTotal","packetsCountByNamePerSec","packetsCountByNamePer10Sec","packetsCountByName","ignoredPackets","packetsString","setPacketsString","showDebugHud","setPos","skyL","setSkyL","blockL","setBlockL","setBiomeId","day","setDay","setTimeOfDay","dimension","setDimension","cursorBlock","setCursorBlock","_useState9","cursorEntity","setCursorEntity","_useState10","blockInfo","setBlockInfo","_useState11","clientTps","setClientTps","_useState12","serverTps","setServerTps","minecraftYaw","minecraftQuad","rendererDevice","shortenUuid","cleaned","readPacket","_buf","managePackets","_packetsCountByName_current_type","_packetsCountByNamePerSec_current_type","_packetsCountByNamePer10Sec_current_type","_name1","_name2","hardcodedListOfDebugPacketsToIgnore","lastTpsReset","lastTps","lastTickDate","updateTps","packetsUpdateInterval","freqUpdateInterval","cursorState","notFrequentUpdateInterval","quadsDescription","idx","stringified","issue","elRef","mobileButtonsConfig","longPressTimerIdRef","actionToShortPressRef","showMobileControls","getButtonClassName","actionForStyle","className","onPointerUp","wasShortPressHandled","setProxyPing","serverPing","setServerPing","isProxyStale","setIsProxyStale","isServerStale","setIsServerStale","proxyTimeoutRef","serverTimeoutRef","setProxyPingWithTimeout","setServerPingWithTimeout","updatePing","updateServerPing","updateProxyPing","proxyUrl","pingTotal","waitForPotentialRender","saveToBrowserMemory","_Math1","_Math2","_Math3","saveRootPath","allRootPaths","allFilesToCopy","pathsSplitBasic","isRegionFiles","upProgress","copyFiles","regionFiles","regionFilesNumbers","xMin","zMin","xMax","zMax","playerPosRegion","maxDistantRegion","filesWithSpiral","usedServerPathsV1","dirBase","_allFilesToCopy","_path_split_at_split_slice_map","totalSize","copyPaths","totalSIze","copyFileGroup","copyPath","srcPath","regionFile","splitByCopySize","spiral","copySize","cur","lockConnect","fsStateSnap","wanOpened","wanOpening","packetsReplaceActive","packetsReplaceHasRecordedPackets","displayPacketsButtons","_useSnapshot2","handlePointerLockChange","clickWebShareButton","shareData","clickJoinLinkButton","qr","openWorldActions","saveName","NetworkStatus","_navigator_userAgentData_platform","platform","body","currentHost","_$options","LoadingTimer","SoundRow","isMuted","mutedSounds","showMuted","setShowMuted","setI","lastPlayedSounds","modals","LeftTouchArea","RightTouchArea","InnerSearch","currentTouch","displaySearchInput","useInterfaceState","actionAndState","getCurrentAppScaling","getComputedStyle","joystickPointer","handleMovementStickDelta","setupActive","closeButtonsSetup","foregroundGameActive","touchControlsPositions","touchControlsSize","selectedButton","setSelectedButton","joystickOuter","joystickInner","pointer","newButtonPositions","buttonProps","holdDown","holdUp","pointerup","pointerToggledUpdate","setupPointer","buttonsPositions","xPerc","yPerc","Z_INDEX_INTERACTIBLE","MineIcon","TouchAreasControls","newPositions","watchUnloadForCleanup","func","ItemName","itemKey","setShow","setItemName","defaultStyle","customDisplay","getItemNameRaw","HotbarInner","_appConfig_disabledCommands","setItemKey","mobileOpenInventory","setSize","canvasManager","currentScaling","inv","openItemsCanvas","mouseButton","hotbarSlot","upHotbarItems","_appViewer_resourcesManager","upInventoryItems","setSelectedSlot","_bot_inventory_slots","heldItemChanged","_item_components","_exec","_exec_","numPressed","touchStart","Portal","_bot_game_gameMode","to","createPortal","itemBeingUsed","usingItem","displayIndicator","setDisplayIndicator","indicatorProgress","setIndicatorProgress","alternativeIndicator","setAlternativeIndicator","displayBar","maxTime","isFood","indicatorSize","ButtonProvider","_response_raw_srv_record","fetchServerStatus","isServerValid","allowLocalhost","isInLocalNetwork","VALID_IP_OR_DOMAIN","_fetchServerStatus","versionOverride","_data_version","_data_motd_raw","_data_players_online","_data_players_max","versionClean","ScaleContext","createContext","UIProvider","usePassesScaledDimensions","minWidth","minHeight","useContext","conditions","media","useMedia","_ref2","_ref3","_ref4","_versions_map","_fallbackIfNotFound","onBack","onConfirm","initialData","parseQs","onQsConnect","placeholders","accounts","isSmallHeight","qsParamName","qsParamIp","qsParamVersion","qsParamProxy","qsParamUsername","qsParamLockConnect","parsedQsIp","parsedInitialIp","setServerName","setVersionOverride","_React_useState3","proxyOverride","setProxyOverride","_React_useState4","usernameOverride","setUsernameOverride","smallWidth","initialAccount","_React_useState5","accountIndex","setAccountIndex","noAccountSelected","authenticatedAccountOverride","freshAccount","ipFinal","commonUseOptions","_React_useState6","fetchedServerInfoIp","setFetchedServerInfoIp","_React_useState7","serverOnline","setServerOnline","_React_useState8","onlinePlayersList","setOnlinePlayersList","checkServer","_status_raw_players_list_map","serverExamples","example","InputWithLabel","MINECRAFT_USERNAME_REGEX","account","ButtonWrapper","displayConnectButton","_props","INPUT_LABEL_WIDTH","fallbackIfNotFound","firstProtocolVersion","lastProtocolVersion","protocolSupportedVersions","appSupportedVersions","normalizeIp","customServersList","serverEditScreen","setServerEditScreen","authenticatedAccounts","quickConnectIp","selectedIndex","setSelectedIndex","setRetriggerFocusCounter","_savedServersListWatchOnly","serversListProvided","_appStorage_serversList_filter","_row_split","_ip_split","additionalServerData","setAdditionalServerData","handleKeyDown","_e_target_tagName","newIndex","newList","oldItem","newItem","serversListSorted","_miscUiState_appConfig_promoteServers","isEditScreenModal","queue","activeRequests","lastRequestStart","_pingResult_fullInfo_players_online","_pingResult_fullInfo_players_max","pingResult","old","FETCH_DELAY","useDidUpdateEffect","editModalJsx","AddServerOrConnect","_appStorage_serversList","_appStorage_serversList1","lastJoined","dispatchEvent","serversListJsx","ServersList","overridesOrIp","_serversListProvided_find","authenticatedAccount","_authenticatedAccounts_find","_overrides_versionOverride","shouldSave","msAuth","indexOrIp","lastJoinedUsername","promptUsername","prompt","newServersList","setNewServersList","thisItem","_server_versionOverride","_server_usernameOverride","_additional_textNameRight","_additional_textNameRightGrayed","additional","handleShare","shareUrl","MESSAGE","EXPLICIT_SHARE_SERVER_MODE","serverIndex","serversListQs","setCustomServersList","isJson","hasServersListModal","modalStack","editServerModalActive","isServersListModalActive","eitherModal","customCommands","updateCurrBind","resetBinding","_useContext","Context","userConfig","setUserConfig","customConfig","setCustomConfig","addNewCommand","newKey","newCustomConf","commandData","indexOption","CustomCommandContainer","_userConfig_custom_commandKey","_userConfig_custom_commandKey1","groupData","_commandData","commandKey","inputs","_groupData","indexInput","_inputs_indexInput","ButtonWithMatchesAlert","_parseBindingName","binding","keyboard","layoutMap","cut","mapKey","val","isPS","bindName","setBindName","_setBind","bind","parseBindingName","buttonsMap","setBind","_userConfig_custom","bindsMap","awaitingInputType","setAwaitingInputType","setGroupName","actionName","setActionName","buttonNum","setButtonNum","BindingActionsContext","setCustomCommands","setBinding","buttonIndex","_newConfig_group","_newConfig_group_command","_data_code","_newConfig","_group","_command","_type","inputType","_userConfig_group","updateBindMap","updateBinding","pressedModifiers","currKeys","_userConfig_group_action","_bindsMap_current_keyboard","_userConfig_group_action1","_bindsMap_current_gamepad","_currButtons_","currButtons","preventDefault","_document_activeElement","AwaitingInputOverlay","_userConfig_group_action_keys","_userConfig_group_action_gamepad","parseActionName","KeybindingsCustom","_userConfig_group_action_","buttonSign","setButtonSign","_userConfig_group_action_type","_gamepad_","customValue","Keybinding","isGamepad","KeyboardEvent","bindingActions","_navigator_getGamepads1","bindActions","hasPsGamepad","gp","KeybindingsScreen","setDataUrl","updateHeldMap","_item_nbt_value_map_value","_bot_mapDownloader_maps","componentActive","checkModalAvailability","withWildCardModal","watchedModalsFromHooks","hardcodedKnownModals","loginLink","connectingServer","expiresEnd","setSaveToken","defaultSaveToken","onCancel","directLink","timeLeft","setTimeLeft","QRCodeSVG","signInMessageState","expiresOn","shouldSaveToken","signInTestModal","SignInMessage","textPages","editable","onSign","onEdit","onClose","author","pages","setPages","currentPage","setCurrentPage","isSinglePage","setIsSinglePage","singlePageInsideIcon","insideIcon","insideImage","setInsideImage","animateInsideIcon","setAnimateInsideIcon","animatePageIcon","setAnimatePageIcon","animateTitleIcon","setAnimateTitleIcon","signClickedOnce","setSignClickedOnce","textAreaRefs","inputRef","handleResize","isSingle","handlePageChange","prevPage","updatePage","prevPages","updatedPages","handleTextChange","pageIndex","_textAreaRefs_current_nextPageIndex","_textAreaRefs_current_","nextPageIndex","_textAreaRefs_current_index","handlePaste","pasteText","selectionStart","selectionEnd","newText","remainingText","handlePasteRemainingText","focusOnTextArea","handleSign","_inputRef_current","handleEdit","handleCancel","getAnimationClass","animationState","baseClass","renderPage","modalActive","openedBook","setOpenedBook","signEditBook","currentSlot","openBookWithNbt","_parsedData_title","_parsedData_author","book","parsedData","page","_parsedPage_text","_item_nbt","Book","divs","bar","bossBarStyles","setBossBarStyles","fillStyles","setFillStyles","div1Styles","setDiv1Styles","div2Styles","setDiv2Styles","_bar__title","prevStyles","bossBars","setBossBars","addBossBar","bossBar","prevBossBars","removeBossBar","newBossBars","BossBar","ModListItem","hasError","ModSidebar","_mod_installed","_errors_mod_name","editingField","setEditingField","handleAction","modifiableFields","field","handleSaveField","newContents","EditingCodeWindow","fields","_ref_current","_modsData_repos_length","modsData","setModsData","showOnlyInstalled","setShowOnlyInstalled","showOnlyEnabled","setShowOnlyEnabled","selectedModIndex","setSelectedModIndex","expandedRepos","setExpandedRepos","useHorizontalLayout","counter","allModsArray","defaultRepo","toggleRepo","modFilter","_mod_description","matchesSearch","matchesInstalledFilter","matchesEnabledFilter","filteredMods","filteredModsCount","totalRepos","selectedMod","refreshButton","setMode","GameInteractionOverlayInner","zIndex","setJoystickOrigin","updateJoystick","overlayRef","_window_visualViewport","virtualClickTimeout","cameraControlEl","virtualClickActive","screenTouches","capturedPointer","pointerUpHandler","_joystickPointer_pointer","_capturedPointer_active","_bot_heldItem","heldItemName","isOnlyActivatable","isItemActivatableMobile","_bot_heldItem1","heldItemName1","isOnlyActivatable1","gonnaAttack","useButton","clickedEl","usingModernMovement","supportsPressure","sourceX","sourceY","xDiff","yDiff","detectAndResetZoom","visualViewport","viewport","OverlayElement","divRef","GameInteractionOverlay","wildcardToRegExp","escaped","patternToRegExp","parseFilterString","include","exclude","filterPackets","_parseFilterString","DARK_COLORS","FilterInput","hiddenCount","shownCount","onClearFilter","clientPacketsAutocomplete","serverPacketsAutocomplete","showAutocomplete","setShowAutocomplete","allSuggestions","currentWord","filteredSuggestions","acceptSuggestion","suggestion","isClient","formatters","_data_chunkData","_data_blockEntities","sizeOfChunk","blockEntitiesCount","processPacketDataForLogging","formatTimeDiff","PacketList","maxHeight","listRef","expandedPacket","setExpandedPacket","prevTimestamp","_formatters_packet_name1","timeDiff","padNumber","ProgressBar","total","ReplayPanel","replayName","isPlaying","defaultFilter","customButtons","onPlayPause","onRestart","onSpeedChange","onFilterChange","onCustomButtonToggle","setFilter","packetsReplayState","isMinimized","isRecording","_filterPackets","filteredPackets","playPauseButton","baseContainerStyle","buttonId","tooltip","PacketsReplayProvider","_appQueryParams_replayFilter","_autocomplete_client","_autocomplete_server","autocomplete","onChangeButtonState","hintText","setHintText","setEntityName","voiceChatStatus","Icon","muted","hasInputVoice","isSharingScreen","isConnected","isErrored","isAlone","connectText","pressedKeys","setPressedKeys","setActions","handleKeyUp","newSet","handleBlur","handleControTrigger","handleControReleased","stateColors","chunks","playerChunk","maxDistance","tileSize","selectedChunk","setSelectedChunk","showSidebar","setShowSidebar","gridSize","processedChunks","relX","relZ","playerX","setPlayerX","playerZ","setPlayerZ","setUpdate","up","allLoadTimes","_chunk_loads__time","allSpiralChunks","mapChunk","_chunk_loads_","_chunk_loads","firstLoadTime","loadIndex","timeSinceFirstLoad","line2","chunksWaitingServer","loadedSectionsChunks","_sectionPos_split_map","chunksWaitingClient","clientProcessingChunks","chunksDoneEmpty","chunksDone","chunksWaitingOrder","allChunks","ChunksDebug","isPointerDown","setIsPointerDown","handlePointerDown","handlePointerUp","RendererDebugMenu","_reactiveDebugParams_chunksRenderAboveOverride","_reactiveDebugParams_chunksRenderBelowOverride","reactiveDebugParams","stopRendering","disableEntities","rendererPerfDebugOverlay","roundToStep","topRightTimeDisplay","FullscreenTime","fullscreen","setTime","batteryInfo","setBatteryInfo","timeInterval","battery","updateBatteryInfo","getBatteryIcon","charging","formatTimestamp","timestamp","conflicts","getStorageConflicts","clampText","conflictText","conflict","localTime","cookieTime","resolveStorageConflicts","fireTextures","setFireTextures","currentTextureIndex","setCurrentTextureIndex","animationFrameId","lastTextureUpdate","updateTexture","loadTextures","_blocksAtlasParser_atlas","fireImageUrls","blocksAtlasParser","defaultSize","imageWidth","imageHeight","_textureInfo_width","_textureInfo_height","tempCanvas","tempCtx","finalHeight","onAssetsUpdated","bodyFont","Editor","useBottom","isFirefox","ua","isIphone","RobustPortal","PerComponentErrorBoundary","DisplayQr","currentDisplayQr","InGameComponent","InGameUi","showUIRaw","displayBossBars","modalsSnapshot","showUI","displayFullmap","DeathScreenProvider","DebugOverlay","MobileTopButtons","PlayerListOverlayProvider","ChatProvider","SoundMuffler","MinimapProvider","TitleProvider","IndicatorEffectsProvider","Crosshair","BookProvider","BossBarOverlayProvider","VoiceMicrophone","ChunksDebugScreen","FireRenderer","PauseScreen","MineflayerPluginHud","MineflayerPluginConsole","TouchInteractionHint","GlobalOverlayHints","XPBarProvider","HudBarsProvider","BedTime","HotbarRenderApp","SignEditorProvider","TouchControls","GlobalSearchInput","AllWidgets","WidgetDisplay","Component","componentNameClean","disableReactProfiling","urlParams","renderToDom","useAppScale","ButtonAppProvider","HeldMapUi","ControDebug","EnterFullscreenButton","StorageConflictModal","SingleplayerProvider","CreateWorldProvider","AppStatusProvider","KeybindingsScreenProvider","ServersListProvider","OptionsRenderApp","MainMenuRenderApp","ConnectOnlyServerUi","TouchAreasControlsProvider","SignInMessageProvider","NotificationProvider","ModsPage","SelectOption","CreditsAboutModal","AllSettingsEditor","NoModalFoundProvider","GamepadUiCursor","DebugEdges","OverlayModelViewer","MonacoEditor","DebugResponseTimeIndicator","CornerIndicatorStats","App","parseNbt","simplifyNbt","VALID_IMAGE_EXTENSIONS","_handleDroppedFile","base64Promise","base64Image","tempPath","versionDetected","FileReader","_3","_$nbt","_versions_pc_find","simplified","mapped","_1","_e_dataTransfer","filehandle","handleDroppedFile","createMCServer","startLocalServer","serverOptions","passOptions","unsupportedLocalServerFeatures","registerServiceWorker","registrations","registrationError","currentFov","targetFov","lastUpdateTime","updateFovAnimation","_bot_entity_attributes1","_bot_entity_attributes2","_bot_entity_attributes3","_bot_controlState","_bot_controlState1","fovModifier","movementSpeedAttr","currentSpeed","heldItem","usageProgress","ticksUsingItem","baseFov","autoSaveInterval","updateInWater","waterBr","_loadedData_effects_effect_id","updateBackground","_inWater","sceneBg","newSceneBg","getAllInfoLines","delayed","fixtures","SESSION_STORAGE_BACKUP_KEY","openBenchmark","_fixture_urlDir","fixtureNameOpen","backup","fixture","memoryUsageAverage","memoryUsageSamples","memoryUsageWorst","mainThreadFpsAverage","mainThreadFpsWorst","mainThreadFpsSamples","currentPassedFrames","mainLoop","fixtureName","saveBackupInterval","screenRefreshRate","_process_env_RELEASE_LINK","benchmarkAdapter","_window_performance_memory","_window_performance","memoryUsage","_window_world_fpsWorst","downloadFile","downloadButton","pre","initCollisionShapes","initializePacketsReplay","onAppLoad","customChannels","hideCurrentScreens","loadSingleplayer","_appQueryParamsArray_serverSetting","serverOverrides","flattenedServerOverrides","serverSettingsQs","serverSettingsQsRaw","_connect","_connectOptions_proxy","p2pMultiplayer","parsedServer","renderDistanceSingleplayer","multiplayerRenderDistance","parsedServer1","_server_port","loggingInMsg","hadConnected","handleSessionEnd","cleanFs","lastPacket","onPossibleErrorDisconnect","errorAbortController","clientDataStream","updateDataAfterJoin","localReplaySession","lastKnownKickReason","_authData_sessionEndpoint","_connectOptions_serverOverrides","_connectOptions_serverOverridesFlat","dataDownloaded","downloadMcData","finalVersion","checkForbiddenVersion","_connectOptions_connectEvents","serverPlugins","_serverOptions","initialLoadingText","wrapped","_server_port1","newTokensCacheResult","cachedTokens","authData","_loadingTimerState","brand","_supportFeature","setupConnectHandlers","originalSetSocket","p2pConnectTimeout","packetBeforePlay","playStateSwitch","worldWasReady","waitForChunksToLoad","spawnEarlier","displayWorld","loadingTimerState","updateServerConnectionHistory","wasKicked","alwaysReconnect","quickDevReconnect","_e_reason_stack","defaultServerOptions","downloadingAssets","reportAssetDownload","asset","isDone","versionNum","startLocalReplayServer","newStatus","flyingSquidEvents","microsoftAuthflow","requiresPass","mineflayer","protocolMicrosoftAuth","_r","updateAuthenticatedAccountData","existingAccount","feature","Socket","socket","kickReason","_parseFormattedMessagePacket","kickReasonFormatted","kickReasonString","__","___","perc","loadWorldStart","botPosition","_connectOptions_serverIndex","findServerPassword","onGameLoad","waitForChunks","arrays","_appQueryParamsArray_command","targetElement","firstClickable","maybeEnterGame","waitForConfigFsLoad","checkDone","reconnectOptions","_appQueryParams_version","peerOptions","downloadAndOpenFile","initialLoader","lastWindow","lastWindowType","remotePlayerSkin","descriptionGenerators","description","obtainedFrom","string","getItemDescription","loadedImagesCache","cleanLoadedImagesCache","showInventoryPlayer","_appViewer_playerState_reactive_playerSkin","modelViewerState","mapWindowType","inventoryStart","maybeParseNbtJson","_nbt_simplify","win","_bot_currentWindow","implementedWindow","implementedContainersGuiMap","openWindow","getItemName","skipUpdate","_oldSlot","craftingResultSlot","_bot_inventory_slots_i","craftingSlots","resultingItem","getResultingRecipe","upJei","texturesChanged","upWindowItemsLocal","lastJeiSearch","getImageSrc","getImage","loadPath","image1","imageSrc","ImageBitmap","lastMappedSlots","validateSlot","mapSlots","slots","isJei","newSlots","_lastMappedSlots_i","oldKey","slotCustomProps","itemCustomName","icon","isInventory","invWindow","customSlots","onModalClose","matchedSlots","itemsArray","_getItemName","showInventory","allRecipes","getAllItemRecipes","itemDescription","allItemUsages","getAllItemUsages","skipClosePacketSending","_miscUiState_currentTouch","destroyFn","oldOnInventoryEvent","containing","windowIndex","inventoryIndex","isLeftClick","slotItem","_index","isRightclick","_loadedData_itemsByName_slotItem_name","_slotItem_components","_slotItem_removedComponents","_slotItem_metadata","freeSlot","isJeiEnabled","gridRows","inputSlotsItems","blockSlot","currentShape","splitEvery","slotX","_currentShape_otherY","otherY","slotsIngredients","outer","shapelessResult","shapeResult","_loadedData_recipes","recipeVariants","_recipeVariant_ingredients","recipeVariant","equals","id1","ingredientToItem","recipeItem","recipes","recipe","resultId","resultCount","resultMetadata","resultItem","ingredients","ingredientsItems","ingredients1","ingredientsItems1","foundRecipeIds","longArray","_longArray","high","levelDatContent","root","disablePrompts","warnings","dataRaw","_levelDat_Version","_appQueryParams_mapVersion","lastSupportedVersion","firstSupportedVersion","lowerBound","upperBound","playerUuid","playerDatPath","playerDataOverride","playerDat","rootRemapFiles","rootRemapFile","isMajorVersionGreater","gzip","getProxyDetails","proxyBaseUrl","isPageSecure","tokenCaches","setProgressText","setCacheResult","onMsaCodeCallback","connectingVersion","authEndpoint","sessionEndpoint","urlWithBase","authFlow","_restoredData_certificates_profileKeys","restoredData","processText","strings","processChunk","chunkStr","restoreData","promises","tryRestorePublicKey","der","originalName","exportedBuffer","pemToArrayBuffer","pem","binaryDerString","atob","pemContents","binaryDer","defaultBase","getItemMetadata","customText","customModel","customModelDataDefinitions","_resourcesManager_currentResources","componentMap","customTextComponent","customModelComponent","customModelData","customModelDataComponent","loreComponent","_itemNbt_display","customName","_getItemDefinition","itemSelector","modelFromDef","PlayerStateControllerMain","onBotCreatedOrGameJoined","_bot_username","botCreated","handleDimensionData","hasSkyLight","updateSneakingOrFlying","updateMovementState","isOnGround","updateHeldItem","blockProperties","startUsingItem","stopUsingItem","getItemUsageTicks","watchReactive","circularBuffer","lastConnectVersion","viewerConnector","logger","worldState","WORLD_STATE_FILE_EXTENSION","PACKETS_REPLAY_FILE_EXTENSION","CircularBuffer","oldWriteChannel","upPacketsReplayPanel","getLastAutoCapturedPackets","downloadAutoCapturedPackets","PacketsLogger","_circularBuffer_getLastElements","lastElement","_options_touchControlsPositions","_options_touchControlsPositions1","_appQueryParamsArray_setting","initialAppConfig","qsOptionsRaw","_o_split","isDeepEqual","keysA","keysB","migrateOptionsLocalStorage","_appStorage_options","watchedProps","unsubscribes","_miscUiState_appConfig_defaultLanguage","replayLogger","isBufferData","processPacketData","processed","handleServerPacket","_packetsReplayState","_parseReplayContents","header","createServer","mainPacketsReplayer","FLATTEN_CLIENT_PACKETS","addPacketToReplayer","wasUpcoming","lastUpcoming","ignoreClientPacketsWait","writePacket","playPackets","clientPackets","clientsPacketsWaiter","originalConsoleError","lastSentPacket","playServerPacket","createPacketsWaiter","_playPackets_","packet1","ADDITIONAL_DELAY","clientPacket","gamemodes","packetHandler","queuedPackets","isWaiting","unexpectedPacketsCount","handlePacket","waitingPackets","isArrayEqual","uiRoot","guessProblem","_connectOptions_server","_connectOptions_botVersion","_connectOptions_username","lastStatus","backAction","actionsSlot","showReconnect","onReconnect","loadingDotIndex","setLoadingDotIndex","hadWorldLoaded","statusRunner","ms","timer","connectionProxy","durationInSeconds","stateMap","displayText","regionNumbers","minX","maxX","minZ","maxZ","xChunks","zChunks","currentPlayer","initialState","saveReconnectOptions","lastState","replayActive","usingState","maybeRecoverable","descriptionHint","loadingChunksData","loadingChunksDataPlayerChunk","startDiveAnimation","divingElem","observer","MutationObserver","mutations","_e_target_tagName_toLowerCase","displayAuthButton","hasVpnText","displayVpnButton","authReconnectAction","oldAccounts","lastAutoCapturedPackets","DiveTransition","AppStatus","PossiblyVpnBypassProxyButton","wasDisconnected","LoadingChunks","DisplayingIndicator","reconnect","vpnBypassProxy","setVpnBypassProxy","capabilities","ButtonContext","_translate","_args_className","_args_className1","inScreen","rootRef","postLabel","overlayColor","noTranslate","buttonRef","traverse","Node","buttonCss","currentPlayerName","chatOpened","fadeState","setFadeState","fadeTimeout","removeTimeout","txtPart","MessagePart","_chatInput_current","_chatInput_current1","_chatInput_current2","fetchCompletionItems","sendMessage","allowSelection","inputDisabled","getPingComplete","spellCheckEnabled","onSpellCheckEnabledChange","playerNameValidated","sendHistoryRef","isInputFocused","setIsInputFocused","preservedInputValue","setPreservedInputValue","inputKey","setInputKey","pingHistoryRef","completePadText","setCompletePadText","completeRequestValue","completionItemsSource","setCompletionItemsSource","completionItems","setCompletionItems","chatInput","chatMessages","chatHistoryPos","commandHistoryPos","inputCurrentlyEnteredValue","commandHistoryRef","_useScrollBehavior","isAtBottom","wasAtBottom","currentlyAtBottom","rightNowAtBottom","setRightNowAtBottom","setSendHistory","newHistory","acceptComplete","getCompleteValue","onMainInputChange","handleArrowUp","handleArrowDown","handleCommandArrowUp","handleCommandArrowDown","auxInputFocus","resetCompletionItems","_document_activeElement_tagName_toLowerCase","isSingleChar","isPaste","unsubscribeValtio","_chatInput_current_selectionEnd","lastWord","isCommand","fetchPingCompletions","updateFilteredCompleteItems","fetchCompletions","implicit","newItems","sortedItems","aIndex","bIndex","sourceItems","getDefaultCompleteValue","raw","valueParts","lastLength","handleSlashCommand","remountInput","handleAcceptFirstCompletion","isIos","displayHintsState","captureMouseHint","acitveModals","inRealGameSession","_inputProps_className","autoFocus","rootStyles","validateInput","inputProps","validationStyle","setValidationStyle","_validateInput","span","networkTimeTotal","hoverItemToText","hoverEvent","_hoverEvent_contents","clickEventToProps","clickEvent","promptMessageText","_formatOptions_doShadow","formatOptions","_color","italic","bold","underlined","strikethrough","obfuscated","clickProps","hoverMessageRaw","hoverItemText","applyStyles","messageFormatStylesMap","colorF","getColorShadow","parseInlineStyle","_messageFormatStylesMap_color","dim","rule","_rule_split","fallbackColor","messageJson","_text_color","subMessage","topPosition","currentProgress","totalProgress","isUsingTouch","isLoader","newProps","loaderExisting","autoHide","loaders","Notification","_b_priority","_a_priority","_loader_subMessage","formatProgress","createPlayerObject","_options_uuid","_options_username","_options_scale","applySkinToPlayerObject","_followCursorCenter_x","_followCursorCenter_y","followCursorCenter","cx","cy","sceneRef","initialScale","cursorPosition","isFollowingCursor","windowRef","computeNormalizedFromClient","scaled","onlyInitialScale","_windowRef_current","_modelViewerState_model","positioning","windowWidth","windowHeight","effectiveScale","centerPxX","centerPxY","localX","localY","normalizedX","normalizedY","loadedModels","modelLoaders","animationMixers","gltfClips","activeActions","clockRef","mixersAnimatingRef","rafIdRef","updateAllMixers","mixer","anyActionActive","ensureMixerLoop","tick","playAnimationForModel","modelUrl","animName","_modelViewerState_model_playModelAnimationLoop","_modelViewerState_model_playModelAnimationSpeed","clips","clip","applyAnimationParamsToAll","loadModel","isGLTF","animations","customization","_model_modelCustomization","_customization_rotation_x","_customization_rotation_y","_customization_rotation_z","_sceneRef_current","gltf","removeModel","modelsChanged","currentModels","currentModelUrls","loadedModelUrls","modelUrl1","unmounted","controls","OrbitControls","cameraLight","updatePlayerLookAt","_cursorPosition_current","_computeNormalizedFromClient","maxHeadYaw","maxHeadPitch","clampedX","clampedY","headYaw","lerpFactor","_createPlayerObject","cameraDistance","visibleHeight","fov","visibleWidth","waitingRender","handleWindowPointerMove","newPosition","_renderer_domElement","model1","_model_positioning","_globalThis_sceneRef","backdrop","titleSelectable","titleMarginTop","contentStyle","minecraftJsonMessageParsed","parseResult","_resolve","showConfirm","showCancel","inputsConfirmButton","inputValues","_input_defaultValue","resolveClose","_input_label","_r_cssVarRepeat","repeat","repeatArr","times","selectedProxy","serversHistoryLegacy","_process_env","_process_env1","localStoragePrefix","cookieStoreKeys","oldKeysAliases","getCookieValue","cookie","decodeURIComponent","topLevelDomain","cookieBase","setCookieValue","cookieKey","savedValue","deleteCookie","storageConflicts","detectStorageConflicts","localStorageValue","cookieValue","localParsed","cookieParsed","localTimestamp","cookieTimestamp","localData","cookieData","isDataEmpty","showStorageConflictModal","defaultStorageData","_appStorage","getRandomUsername","cookiesFailedThisSession","shouldUseCookieStorage","restoreStorageData","useCookieStorage","_localStorage_getItem","prefixedKey","aliasedKey","storedValue","cookieValueCanBeUsed","usingLocalStorageValue","saveKey","markLocalStorageAsMigrated","dataToSave","serialized","useLocalStorage","key2","conflict1","elementRef","openedWasAtBottom","setCurrentlyAtBottom","scrollTimeoutRef","_elementRef_current","scrollTop","distanceFromBottom","scrollHeight","clientHeight","behavior","handleScroll","atBottom","useLayoutEffect","_appStorage_serversHistory","history","existingServer","lastConnectedIp","_appStorage_serversList_index_autoLogin","_appStorage_serversList_find_autoLogin","pswd","_s_autoLogin","servers","serversList","touchEvent","onLongPress","shouldPreventDefault","longPressTriggered","setLongPressTriggered","isMountingRef","UAParser","_allStack_at","useIncludes","allStack","resourcepackPackBasePath","existsAsync","displayName","installPath","zipFile","allFilesArr","createdDirs","copyTasks","_$file","writePath","dirname","updateTextures","currentErrors","getSizeFromImage","filePath","probeImg","getActiveResourcepackBasePath","getResourcepackTiles","existingTextures","firstTextureSize","namespaces","namespace","texturesCommonBasePath","isMinecraftNamespace","texturesBasePath","texturesBasePathAlt","allInterestedPaths","allInterestedPathsPerDir","path1","allInterestedImages","firstImageFile","newTextures","_tex_split_","basename","paths","_allInterestedImages","dirImages","imagePath","imageRelative","imageRelative1","textureName1","prepareBlockstatesAndModels","usedBlockTextures","usedItemTextures","readModelData","readCustomModelData","readData","assetsDirs","assetsDir","namespaceDir","jsons","_parsed_textures","_parsed_model","_parsed_model1","_parsed_model_entries","_entry_model","_entry_threshold","threshold","modelPath","_parsed_overrides","entry1","_entry_predicate","modelPath1","blockstatesPath","blockModelsPath","itemsPath","itemModelsPath","downloadAndUseResourcePack","resourcePackData","handleResourcePackRequest","promptMessagePacket","forced","updateAllReplacableTextures","setCustomCss","setCustomPicture","vars","cssVar","cssVarRepeat","resourcePackPath","resPath","varName","skipResourcesLoad","origBlocksFiles","origItemsFiles","origArmorFiles","blocksData","itemsData","armorData","destPath","setScale","innerWidth","innerHeight","scaleValues","maxWidth","createPublicKey","_sign","signatureAlgorithm","privateKeyPem","privateKeyBuffer","privateKey","_callback","Http","XMLHttpRequest","minecraftServerHostname","_$err","_$err1","willreturn","BrowserFS","_globalThis_promises","resolvedData","resolver","getRecipesProcessorProcessRecipes","blocks","itemsIdsMap","blocksIdsMap","mapId","_itemsIdsMap_id","processRecipe","parseRecipeItem","maybeProccessShape","shapeRow","ingredient","restoreMinecraftData","allVersionData","restorer","JsonOptimizer","arrKey","ignoreChanges","ignoreRemoved","_export","properties","diffs","diffObj","diffing","removed","changed","removedProps","added","diffingObj","possiblyNewKeys","lastRootKeyId","lastItemKeyId","_this_keys1","sourceVal","diffVal","_this_previousValues","_id","prevVal","isEqualStructured","addDiff","valueMapped","isItemObj","keyId","removedPropsLocal","keyMapped","prop1","keyMapped1","_iteratorError3","previousKey","key3","_iteratorError4","toRemove","_iteratorError5","previousKey1","recordDiff","isOptimizedChangeDiff","changePossiblyArrDiff","targetKey","dataRestorer","keysById","propertiesById","dataByKeys","versionKey","toAdd","change","propId","removePropsId","removeProp","getByArrKey","resolveDefaults","propsValueCount","_propsValueCount_key","valJson","_propsValueCount","_valJson","defaults","count1","count2","noData","obj1","val1","_noData","_key1","val2","dataStatus","optimizedDataResolver","cache","cacheTime","possiblyGetFromCache","dataTypes","allRestored","dataType","shapes","pc","Titles","sessionServer","accessToken","sessionSelectedProfileId","serverId","sharedSecret","publicKey","soundMap","musicSystem","MusicSystem","playMusic","musicVolume","onEnded","stopMusic","SoundMap","soundData","soundsMap","allSoundsMajor","soundsStr","_s_split","weight","TypeError","_id_split","idPart","namePart","updateActiveResourcePackBasePath","soundsJsonContent","soundsJsonPath","updateExistingResourcePackPaths","soundsBasePath","scan","getSoundUrl","soundKey","rpSound","_sound_volume","tryFormat","oggResult","random","_sounds_find","sound1","versionedSound","format","sum","getVersionedSound","verNumber","itemsVer","getBlockSound","category","fallback","_blockSoundAliases_blockName","mappedName","getStepSound","getBreakSound","quit","createSoundMap","_globalObject_allSoundsVersionedMap","globalObject","blockSoundAliases","customSoundSystem","soundName","jsonMatch","flags","updateResourcePack","musicInterval","_createSoundMap","playGeneralSound","musicStartCheck","playHardcodedSound","lastStepSound","playBlockBreak","startMusicSystem","stopMusicSystem","diggingBlock","_appViewer_backend_soundSystem","_soundData_timeout","_lastPlayedSounds_lastServerPlayed","_soundKey","musicKeys","randomMusicKey","soundId","_packet_soundEvent","hasNamedSoundEffect","soundResource","_bot_entity_velocity","isRunning","blockUnder","stepSound","movementHappening","effectId","disablePosVolume","pos1","pos2","ignoredVersionsRegex","versionsFromProtocol","postNettyVersionsByProtocolVersion","forbiddenVersionThresholdNum","doToggle","_navigator_keyboard","displayMouseCaptureFailure","_getScreenRefreshRate","requestId","callbackTriggered","DOMHighResTimeStampCollection","triggerAnimation","DOMHighResTimeStamp","fps","ver1","ver2","_ver1_split","a1","_ver2_split","a2","b2","setRenderDistance","assertDefined","_worldView","singleplayerRenderDistance","zeroRenderDistance","addUrl","_process_env_GITHUB_URL","reportedWarnings"],"mappings":"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"}