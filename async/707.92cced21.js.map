{"version":3,"file":"static/js/async/707.92cced21.js","sources":["webpack://minecraft-web-client/./renderer/playground/baseScene.ts","webpack://minecraft-web-client/./renderer/playground/scenes/main.ts","webpack://minecraft-web-client/./renderer/playground/playgroundUi.tsx","webpack://minecraft-web-client/./renderer/playground/scenes/railsCobweb.ts","webpack://minecraft-web-client/./renderer/playground/scenes/floorRandom.ts","webpack://minecraft-web-client/./renderer/playground/scenes/lightingStarfield.ts","webpack://minecraft-web-client/./renderer/playground/scenes/transparencyIssue.ts","webpack://minecraft-web-client/./renderer/playground/scenes/rotationIssue.ts","webpack://minecraft-web-client/./renderer/playground/scenes/entities.ts","webpack://minecraft-web-client/./renderer/playground/scenes/frequentUpdates.ts","webpack://minecraft-web-client/./renderer/playground/scenes/slabsOptimization.ts","webpack://minecraft-web-client/./renderer/playground/scenes/allEntities.ts","webpack://minecraft-web-client/./renderer/playground/scenes/geometryExport.ts","webpack://minecraft-web-client/./renderer/playground/playground.ts"],"sourcesContent":["import { Vec3 } from 'vec3'\r\nimport * as THREE from 'three'\r\nimport '../../src/getCollisionShapes'\r\nimport { IndexedData } from 'minecraft-data'\r\nimport BlockLoader from 'prismarine-block'\r\nimport ChunkLoader from 'prismarine-chunk'\r\nimport WorldLoader from 'prismarine-world'\r\nimport { proxy } from 'valtio'\r\n\r\n//@ts-expect-error\r\nimport { OrbitControls } from 'three/addons/controls/OrbitControls.js'\r\n// eslint-disable-next-line import/no-named-as-default\r\nimport GUI from 'lil-gui'\r\nimport _ from 'lodash'\r\nimport supportedVersions from '../../src/supportedVersions.mjs'\r\nimport { toMajorVersion } from '../../src/utils'\r\nimport { BlockNames } from '../../src/mcDataTypes'\r\nimport { defaultWorldRendererConfig, WorldRendererConfig } from '../viewer/lib/worldrendererCommon'\r\nimport { WorldDataEmitter } from '../viewer/lib/worldDataEmitter'\r\nimport { getInitialPlayerState } from '../viewer/lib/basePlayerState'\r\nimport { appGraphicBackends } from '../../src/appViewerLoad'\r\nimport { getSyncWorld } from './shared'\r\n\r\nwindow.THREE = THREE\r\n\r\n// Scene configuration interface\r\nexport interface PlaygroundSceneConfig {\r\n  version?: string\r\n  viewDistance?: number\r\n  targetPos?: Vec3\r\n  enableCameraControls?: boolean\r\n  enableCameraOrbitControl?: boolean\r\n  worldConfig?: WorldRendererConfig\r\n  continuousRender?: boolean\r\n}\r\n\r\nconst includedVersions = globalThis.includedVersions ?? supportedVersions\r\n\r\nexport class BasePlaygroundScene {\r\n  // Rendering state\r\n  continuousRender = false\r\n  stopRender = false\r\n  windowHidden = false\r\n\r\n  // Scene configuration\r\n  viewDistance = 0\r\n  targetPos = new Vec3(2, 90, 2)\r\n  version: string = new URLSearchParams(window.location.search).get('version') || includedVersions.at(-1)!\r\n\r\n  // World data\r\n  Chunk: typeof import('prismarine-chunk/types/index').PCChunk\r\n  Block: typeof import('prismarine-block').Block\r\n  world: ReturnType<typeof getSyncWorld>\r\n\r\n  // GUI\r\n  gui = new GUI()\r\n  params = {} as Record<string, any>\r\n  paramOptions = {} as Partial<Record<keyof typeof this.params, {\r\n    hide?: boolean\r\n    options?: string[]\r\n    min?: number\r\n    max?: number\r\n    reloadOnChange?: boolean\r\n  }>>\r\n  onParamUpdate = {} as Record<string, () => void>\r\n  alwaysIgnoreQs = [] as string[]\r\n  skipUpdateQs = false\r\n\r\n  // Camera controls - own camera synced to backend\r\n  enableCameraControls = true\r\n  enableCameraOrbitControl = true\r\n  controls: OrbitControls | undefined\r\n  camera: THREE.PerspectiveCamera\r\n\r\n  // World data emitter (from appViewer)\r\n  worldView: WorldDataEmitter | undefined\r\n\r\n  // Debug FPS tracking\r\n  private debugFpsElement: HTMLElement | undefined\r\n  private frameCount = 0\r\n  private lastSecondTime = performance.now()\r\n  private frameTimes: number[] = []\r\n  private currentFps = 0\r\n  private maxFrameDelay = 0\r\n\r\n  // Getter for worldRenderer - accesses via window.world for advanced scene features\r\n  // This allows derived scenes to access worldRenderer when needed without storing it\r\n  get worldRenderer () {\r\n    return window.world\r\n  }\r\n\r\n  // World config - syncs with appViewer.inWorldRenderingConfig\r\n  get worldConfig () {\r\n    return appViewer.inWorldRenderingConfig\r\n  }\r\n  set worldConfig (value) {\r\n    // Merge the new values into appViewer's config to maintain reactivity\r\n    Object.assign(appViewer.inWorldRenderingConfig, value)\r\n  }\r\n\r\n  constructor (config: PlaygroundSceneConfig = {}) {\r\n    // Apply config\r\n    if (config.version) this.version = config.version\r\n\r\n    // Ensure version is always set (fallback to latest supported version)\r\n    if (!this.version) {\r\n      throw new Error('Minecraft version is not set')\r\n    }\r\n\r\n    if (config.viewDistance !== undefined) this.viewDistance = config.viewDistance\r\n    if (config.targetPos) this.targetPos = config.targetPos\r\n    if (config.enableCameraControls !== undefined) this.enableCameraControls = config.enableCameraControls\r\n    if (config.enableCameraOrbitControl !== undefined) this.enableCameraOrbitControl = config.enableCameraOrbitControl\r\n    if (config.worldConfig) {\r\n      // Merge config into appViewer's config to maintain reactivity\r\n      Object.assign(appViewer.inWorldRenderingConfig, config.worldConfig)\r\n    }\r\n    appViewer.inWorldRenderingConfig.showHand = false\r\n    appViewer.inWorldRenderingConfig.isPlayground = true\r\n    appViewer.inWorldRenderingConfig.instantCameraUpdate = this.enableCameraOrbitControl\r\n    appViewer.config.statsVisible = 2\r\n    if (config.continuousRender !== undefined) this.continuousRender = config.continuousRender\r\n\r\n    void this.initData().then(() => {\r\n      this.addKeyboardShortcuts()\r\n    })\r\n  }\r\n\r\n  onParamsUpdate (paramName: string, object: any) {}\r\n\r\n  updateQs (paramName: string, valueSet: any) {\r\n    if (this.skipUpdateQs) return\r\n    const newQs = new URLSearchParams(window.location.search)\r\n    for (const [key, value] of Object.entries({ [paramName]: valueSet })) {\r\n      if (typeof value === 'function' || this.params.skipQs?.includes(key) || this.alwaysIgnoreQs.includes(key)) continue\r\n      if (value) {\r\n        newQs.set(key, value)\r\n      } else {\r\n        newQs.delete(key)\r\n      }\r\n    }\r\n    window.history.replaceState({}, '', `${window.location.pathname}?${newQs.toString()}`)\r\n  }\r\n\r\n  renderFinish () {\r\n    this.requestRender()\r\n  }\r\n\r\n  initGui () {\r\n    const qs = new URLSearchParams(window.location.search)\r\n    for (const key of Object.keys(this.params)) {\r\n      const value = qs.get(key)\r\n      if (!value) continue\r\n      const parsed = /^-?\\d+$/.test(value) ? Number(value) : value === 'true' ? true : value === 'false' ? false : value\r\n      this.params[key] = parsed\r\n    }\r\n\r\n    for (const param of Object.keys(this.params)) {\r\n      const option = this.paramOptions[param]\r\n      if (option?.hide) continue\r\n      this.gui.add(this.params, param, option?.options ?? option?.min, option?.max)\r\n    }\r\n    if (window.innerHeight < 700) {\r\n      this.gui.open(false)\r\n    } else {\r\n      setTimeout(() => {\r\n        this.gui.domElement.classList.remove('transition')\r\n      }, 500)\r\n    }\r\n\r\n    this.gui.onChange(({ property, object }) => {\r\n      if (object === this.params) {\r\n        this.onParamUpdate[property]?.()\r\n        this.onParamsUpdate(property, object)\r\n        const value = this.params[property]\r\n        if (this.paramOptions[property]?.reloadOnChange && (typeof value === 'boolean' || this.paramOptions[property].options)) {\r\n          setTimeout(() => {\r\n            window.location.reload()\r\n          })\r\n        }\r\n        this.updateQs(property, value)\r\n      } else {\r\n        this.onParamsUpdate(property, object)\r\n      }\r\n    })\r\n  }\r\n\r\n  // Overridable methods\r\n  setupWorld () { }\r\n  sceneReset () {}\r\n\r\n  // eslint-disable-next-line max-params\r\n  addWorldBlock (xOffset: number, yOffset: number, zOffset: number, blockName: BlockNames, properties?: Record<string, any>) {\r\n    if (xOffset > 16 || yOffset > 16 || zOffset > 16) throw new Error('Offset too big')\r\n    const block =\r\n      properties ?\r\n        this.Block.fromProperties(loadedData.blocksByName[blockName].id, properties ?? {}, 0) :\r\n        this.Block.fromStateId(loadedData.blocksByName[blockName].defaultState, 0)\r\n    this.world.setBlock(this.targetPos.offset(xOffset, yOffset, zOffset), block)\r\n  }\r\n\r\n  // Sync our camera state to the graphics backend\r\n  // Extract rotation from OrbitControls spherical coordinates to avoid flip issues\r\n  protected syncCameraToBackend (onlyRotation = false) {\r\n    if (!appViewer.backend || !this.camera) return\r\n\r\n    // Extract rotation from camera's quaternion to avoid gimbal lock issues\r\n    // Get forward direction vector to extract yaw/pitch properly\r\n    const forward = new THREE.Vector3(0, 0, -1)\r\n    forward.applyQuaternion(this.camera.quaternion)\r\n\r\n    // Calculate yaw and pitch from forward vector\r\n    // Yaw: rotation around Y axis (horizontal)\r\n    const yaw = Math.atan2(-forward.x, -forward.z)\r\n    // Pitch: angle from horizontal plane (vertical)\r\n    const pitch = Math.asin(forward.y)\r\n\r\n    if (onlyRotation) {\r\n      appViewer.backend.updateCamera(null, yaw, pitch)\r\n      return\r\n    }\r\n\r\n    const pos = new Vec3(this.camera.position.x, this.camera.position.y, this.camera.position.z)\r\n    appViewer.backend.updateCamera(pos, yaw, pitch)\r\n  }\r\n\r\n  resetCamera () {\r\n    if (!this.camera) return\r\n    const { targetPos } = this\r\n    this.controls?.target.set(targetPos.x + 0.5, targetPos.y + 0.5, targetPos.z + 0.5)\r\n\r\n    const cameraPos = targetPos.offset(2, 2, 2)\r\n    this.camera.position.set(cameraPos.x + 0.5, cameraPos.y + 0.5, cameraPos.z + 0.5)\r\n    this.camera.lookAt(targetPos.x + 0.5, targetPos.y + 0.5, targetPos.z + 0.5)\r\n    this.controls?.update()\r\n    // Sync after reset - this uses quaternion extraction which avoids flip issues\r\n    this.syncCameraToBackend()\r\n  }\r\n\r\n  async initData () {\r\n    await window._LOAD_MC_DATA()\r\n    const mcData: IndexedData = require('minecraft-data')(this.version)\r\n    window.loadedData = window.mcData = mcData\r\n\r\n    this.Chunk = (ChunkLoader as any)(this.version)\r\n    this.Block = (BlockLoader as any)(this.version)\r\n\r\n    const world = getSyncWorld(this.version)\r\n    world.setBlockStateId(this.targetPos, 0)\r\n    this.world = world\r\n\r\n    this.initGui()\r\n\r\n    // Use appViewer for resource management and world rendering\r\n    // worldConfig is already synced with appViewer.inWorldRenderingConfig via getter/setter\r\n\r\n    // Initialize resources manager via appViewer\r\n    appViewer.resourcesManager.currentConfig = { version: this.version, noInventoryGui: true }\r\n    await appViewer.resourcesManager.loadSourceData(this.version)\r\n    await appViewer.resourcesManager.updateAssetsData({})\r\n\r\n    // Load backend if not already loaded\r\n    if (!appViewer.backend) {\r\n      await appViewer.loadBackend(appGraphicBackends[0])\r\n    }\r\n\r\n    // Start world using appViewer\r\n    // This creates WorldDataEmitter, GraphicsBackend, and WorldRendererThree internally\r\n    await appViewer.startWorld(world, this.viewDistance, proxy(getInitialPlayerState()), this.targetPos)\r\n\r\n    // Get world view from appViewer\r\n    this.worldView = appViewer.worldView\r\n\r\n    // Create our own camera for OrbitControls - this is separate from the internal worldRenderer camera\r\n    // We sync our camera state to the backend via updateCamera()\r\n    this.camera = new THREE.PerspectiveCamera(\r\n      appViewer.inWorldRenderingConfig.fov || 75,\r\n      window.innerWidth / window.innerHeight,\r\n      0.1,\r\n      1000\r\n    )\r\n\r\n    // Setup world (adds blocks, etc.)\r\n    this.setupWorld()\r\n\r\n    // Initialize world view with target position (loads chunks after setup)\r\n    if (this.worldView) {\r\n      this.worldView.addWaitTime = 0\r\n      await this.worldView.init(this.targetPos)\r\n    }\r\n\r\n    // Setup camera controls with our own camera\r\n    if (this.enableCameraControls) {\r\n      const canvas = document.querySelector('#viewer-canvas')\r\n      if (canvas) {\r\n        const controls = this.enableCameraOrbitControl\r\n          ? new OrbitControls(this.camera, canvas as HTMLElement)\r\n          : undefined\r\n        this.controls = controls\r\n\r\n        this.resetCamera()\r\n\r\n        // Camera position from query string or localStorage\r\n        const cameraSet = this.params.camera || localStorage.camera\r\n        if (cameraSet) {\r\n          const [x, y, z, rx, ry] = cameraSet.split(',').map(Number)\r\n          this.camera.position.set(x, y, z)\r\n          this.camera.rotation.set(rx, ry, 0, 'ZYX')\r\n          this.controls?.update()\r\n          // this.syncCameraToBackend()\r\n        }\r\n\r\n        const throttledCamQsUpdate = _.throttle(() => {\r\n          if (!this.camera) return\r\n          localStorage.camera = [\r\n            this.camera.position.x.toFixed(2),\r\n            this.camera.position.y.toFixed(2),\r\n            this.camera.position.z.toFixed(2),\r\n            this.camera.rotation.x.toFixed(2),\r\n            this.camera.rotation.y.toFixed(2),\r\n          ].join(',')\r\n        }, 200)\r\n\r\n        if (this.controls) {\r\n          const throttledCameraSync = _.throttle(() => {\r\n            // this.syncCameraToBackend(true) // Only sync rotation when OrbitControls changes\r\n          }, 16) // ~60fps sync rate\r\n\r\n          this.controls.addEventListener('change', () => {\r\n            throttledCameraSync()\r\n            throttledCamQsUpdate()\r\n            this.requestRender()\r\n          })\r\n        } else {\r\n          setInterval(() => {\r\n            throttledCamQsUpdate()\r\n          }, 200)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Manual camera controls (if orbit controls disabled)\r\n    if (!this.enableCameraOrbitControl && this.camera) {\r\n      let mouseMoveCounter = 0\r\n      const mouseMove = (e: PointerEvent) => {\r\n        if ((e.target as HTMLElement).closest('.lil-gui')) return\r\n        if (e.buttons === 1 || e.pointerType === 'touch') {\r\n          mouseMoveCounter++\r\n          this.camera.rotation.x -= e.movementY / 100\r\n          this.camera.rotation.y -= e.movementX / 100\r\n          if (this.camera.rotation.x < -Math.PI / 2) this.camera.rotation.x = -Math.PI / 2\r\n          if (this.camera.rotation.x > Math.PI / 2) this.camera.rotation.x = Math.PI / 2\r\n          this.syncCameraToBackend(true)\r\n        }\r\n        if (e.buttons === 2) {\r\n          this.camera.position.set(0, 0, 0)\r\n          this.syncCameraToBackend()\r\n        }\r\n      }\r\n      setInterval(() => {\r\n        mouseMoveCounter = 0\r\n      }, 1000)\r\n      window.addEventListener('pointermove', mouseMove)\r\n    }\r\n\r\n    // Setup resize handler\r\n    this.onResize()\r\n    window.addEventListener('resize', () => this.onResize())\r\n\r\n    // Setup debug FPS GUI\r\n    this.setupDebugFpsGui()\r\n\r\n    // Wait for chunks and finish setup\r\n    // Access worldRenderer via window.world for this one-time operation\r\n    // const worldRenderer = window.world\r\n    // if (worldRenderer) {\r\n    //   void worldRenderer.waitForChunksToRender().then(async () => {\r\n    //     this.renderFinish()\r\n    //   })\r\n\r\n    //   // Listen for world updates to trigger on-demand renders\r\n    //   worldRenderer.renderUpdateEmitter.addListener('update', () => {\r\n    //     this.requestRender()\r\n    //   })\r\n    // }\r\n\r\n    // // Start render loop if continuous, otherwise use on-demand rendering\r\n    // if (this.continuousRender) {\r\n    //   this.loop()\r\n    // }\r\n    this.renderFinish()\r\n    this.mainDebugLoop()\r\n  }\r\n\r\n  mainDebugLoop () {\r\n    requestAnimationFrame(() => this.mainDebugLoop())\r\n    this.trackFrame()\r\n  }\r\n\r\n  loop () {\r\n    if (this.continuousRender && !this.windowHidden) {\r\n      this.requestRender()\r\n      requestAnimationFrame(() => this.loop())\r\n    }\r\n  }\r\n\r\n  // Request a render from the backend (on-demand rendering)\r\n  // The DocumentRenderer loop handles actual rendering continuously\r\n  // Camera sync happens via syncCameraToBackend() which updates the internal camera\r\n  requestRender () {\r\n    // No-op: rendering is handled by DocumentRenderer's continuous loop\r\n    // This method exists for API compatibility\r\n  }\r\n\r\n  private setupDebugFpsGui () {\r\n    // Create simple DOM element for debug FPS display in bottom left corner\r\n    this.debugFpsElement = document.createElement('div')\r\n    this.debugFpsElement.style.position = 'fixed'\r\n    this.debugFpsElement.style.bottom = '0'\r\n    this.debugFpsElement.style.left = '0'\r\n    this.debugFpsElement.style.zIndex = '1000'\r\n    this.debugFpsElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'\r\n    this.debugFpsElement.style.color = '#fff'\r\n    this.debugFpsElement.style.padding = '4px 6px'\r\n    this.debugFpsElement.style.fontFamily = 'monospace'\r\n    this.debugFpsElement.style.fontSize = '11px'\r\n    this.debugFpsElement.style.lineHeight = '1.2'\r\n    this.debugFpsElement.style.pointerEvents = 'none'\r\n    this.debugFpsElement.style.userSelect = 'none'\r\n    this.debugFpsElement.textContent = 'FPS: 0 | Max: 0 ms'\r\n\r\n    document.body.appendChild(this.debugFpsElement)\r\n\r\n    // Update debug info every second\r\n    setInterval(() => {\r\n      this.updateDebugInfo()\r\n    }, 1000)\r\n  }\r\n\r\n  private trackFrame () {\r\n    const now = performance.now()\r\n    this.frameTimes.push(now)\r\n    this.frameCount++\r\n\r\n    // Calculate frame delay (time since last frame)\r\n    if (this.frameTimes.length > 1) {\r\n      const delay = now - this.frameTimes.at(-2)!\r\n      if (delay > this.maxFrameDelay) {\r\n        this.maxFrameDelay = delay\r\n      }\r\n    }\r\n\r\n    // Keep only last second of frame times\r\n    const oneSecondAgo = now - 1000\r\n    this.frameTimes = this.frameTimes.filter(time => time > oneSecondAgo)\r\n  }\r\n\r\n  private updateDebugInfo () {\r\n    if (!this.debugFpsElement) return\r\n\r\n    // Calculate FPS from number of frames in the last second\r\n    // frameTimes array contains timestamps from the last second after filtering\r\n    const fps = this.frameTimes.length\r\n\r\n    this.currentFps = fps\r\n\r\n    const isSeriousDelay = this.maxFrameDelay > 150\r\n    const delayText = isSeriousDelay\r\n      ? `<span style=\"color: #ff4444;\">${this.maxFrameDelay.toFixed(0)}ms</span>`\r\n      : `${this.maxFrameDelay.toFixed(0)}ms`\r\n\r\n    // Update the DOM element directly - single line format\r\n    this.debugFpsElement.innerHTML = `FPS: ${fps} | Max Delay: ${delayText}`\r\n\r\n    // Reset for next second\r\n    this.lastSecondTime = performance.now()\r\n    this.maxFrameDelay = 0\r\n    this.frameCount = 0\r\n  }\r\n\r\n  // Legacy render method for compatibility\r\n  render (fromLoop = false) {\r\n    this.requestRender()\r\n  }\r\n\r\n  addKeyboardShortcuts () {\r\n    document.addEventListener('keydown', (e) => {\r\n      if (!e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey) {\r\n        if (e.code === 'KeyR') {\r\n          this.controls?.reset()\r\n          this.resetCamera()\r\n        }\r\n        if (e.code === 'KeyE') { // refresh block (main)\r\n          this.worldView!.setBlockStateId(this.targetPos, this.world.getBlockStateId(this.targetPos))\r\n        }\r\n        if (e.code === 'KeyF') { // reload all chunks\r\n          this.sceneReset()\r\n          this.worldView!.unloadAllChunks()\r\n          void this.worldView!.init(this.targetPos)\r\n        }\r\n      }\r\n    })\r\n    document.addEventListener('visibilitychange', () => {\r\n      this.windowHidden = document.visibilityState === 'hidden'\r\n    })\r\n    document.addEventListener('blur', () => {\r\n      this.windowHidden = true\r\n    })\r\n    document.addEventListener('focus', () => {\r\n      this.windowHidden = false\r\n    })\r\n\r\n    const pressedKeys = new Set<string>()\r\n    const updateKeys = () => {\r\n      if (pressedKeys.has('ControlLeft') || pressedKeys.has('MetaLeft')) {\r\n        return\r\n      }\r\n      if (!this.camera) return\r\n\r\n      const direction = new THREE.Vector3(0, 0, 0)\r\n      if (pressedKeys.has('KeyW')) {\r\n        direction.z = -0.5\r\n      }\r\n      if (pressedKeys.has('KeyS')) {\r\n        direction.z += 0.5\r\n      }\r\n      if (pressedKeys.has('KeyA')) {\r\n        direction.x -= 0.5\r\n      }\r\n      if (pressedKeys.has('KeyD')) {\r\n        direction.x += 0.5\r\n      }\r\n\r\n      if (pressedKeys.has('ShiftLeft')) {\r\n        this.camera.position.y -= 0.5\r\n      }\r\n      if (pressedKeys.has('Space')) {\r\n        this.camera.position.y += 0.5\r\n      }\r\n      direction.applyQuaternion(this.camera.quaternion)\r\n      direction.y = 0\r\n\r\n      if (pressedKeys.has('ShiftLeft')) {\r\n        direction.y *= 2\r\n        direction.x *= 2\r\n        direction.z *= 2\r\n      }\r\n      this.camera.position.add(direction.normalize())\r\n      this.controls?.update()\r\n      this.syncCameraToBackend()\r\n      this.requestRender()\r\n    }\r\n    setInterval(updateKeys, 1000 / 20)\r\n\r\n    const keys = (e: KeyboardEvent) => {\r\n      const { code } = e\r\n      const pressed = e.type === 'keydown'\r\n      if (pressed) {\r\n        pressedKeys.add(code)\r\n      } else {\r\n        pressedKeys.delete(code)\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', keys)\r\n    window.addEventListener('keyup', keys)\r\n    window.addEventListener('blur', () => {\r\n      for (const key of pressedKeys) {\r\n        keys(new KeyboardEvent('keyup', { code: key }))\r\n      }\r\n    })\r\n  }\r\n\r\n  onResize () {\r\n    this.requestRender()\r\n  }\r\n}\r\n","// eslint-disable-next-line import/no-named-as-default\r\nimport GUI, { Controller } from 'lil-gui'\r\nimport * as THREE from 'three'\r\nimport JSZip from 'jszip'\r\nimport { BasePlaygroundScene } from '../baseScene'\r\nimport { TWEEN_DURATION } from '../../viewer/three/entities'\r\nimport { EntityMesh } from '../../viewer/three/entity/EntityMesh'\r\nimport supportedVersions from '../../../src/supportedVersions.mjs'\r\n\r\nconst includedVersions = globalThis.includedVersions ?? supportedVersions\r\n\r\nclass MainScene extends BasePlaygroundScene {\r\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\r\n  constructor (...args) {\r\n    super(...args)\r\n  }\r\n\r\n  override initGui (): void {\r\n    // initial values\r\n    this.params = {\r\n      version: includedVersions.at(-1),\r\n      skipQs: '',\r\n      block: '',\r\n      metadata: 0,\r\n      supportBlock: false,\r\n      entity: '',\r\n      removeEntity () {\r\n        this.entity = ''\r\n      },\r\n      entityRotate: false,\r\n      camera: '',\r\n      playSound () { },\r\n      blockIsomorphicRenderBundle () { },\r\n      modelVariant: 0\r\n    }\r\n    this.metadataGui = this.gui.add(this.params, 'metadata')\r\n    this.paramOptions = {\r\n      version: {\r\n        options: includedVersions,\r\n        hide: false\r\n      },\r\n      block: {\r\n        options: mcData.blocksArray.map(b => b.name).sort((a, b) => a.localeCompare(b))\r\n      },\r\n      entity: {\r\n        options: mcData.entitiesArray.map(b => b.name).sort((a, b) => a.localeCompare(b))\r\n      },\r\n      camera: {\r\n        hide: true,\r\n      }\r\n    }\r\n    super.initGui()\r\n  }\r\n\r\n  blockProps = {}\r\n  metadataFolder: GUI | undefined\r\n  metadataGui: Controller\r\n\r\n  override onParamUpdate = {\r\n    version () {\r\n      // if (initialUpdate) return\r\n      // viewer.world.texturesVersion = params.version\r\n      // viewer.world.updateTexturesData()\r\n      // todo warning\r\n    },\r\n    block: () => {\r\n      this.blockProps = {}\r\n      this.metadataFolder?.destroy()\r\n      const block = mcData.blocksByName[this.params.block]\r\n      if (!block) return\r\n      console.log('block', block.name)\r\n      const props = new this.Block(block.id, 0, 0).getProperties()\r\n      const { states } = mcData.blocksByStateId[this.getBlock()?.minStateId] ?? {}\r\n      this.metadataFolder = this.gui.addFolder('metadata')\r\n      if (states) {\r\n        for (const state of states) {\r\n          let defaultValue: string | number | boolean\r\n          if (state.values) { // int, enum\r\n            defaultValue = state.values[0]\r\n          } else {\r\n            switch (state.type) {\r\n              case 'bool':\r\n                defaultValue = false\r\n                break\r\n              case 'int':\r\n                defaultValue = 0\r\n                break\r\n              case 'direction':\r\n                defaultValue = 'north'\r\n                break\r\n\r\n              default:\r\n                continue\r\n            }\r\n          }\r\n          this.blockProps[state.name] = defaultValue\r\n          if (state.values) {\r\n            this.metadataFolder.add(this.blockProps, state.name, state.values)\r\n          } else {\r\n            this.metadataFolder.add(this.blockProps, state.name)\r\n          }\r\n        }\r\n      } else {\r\n        for (const [name, value] of Object.entries(props)) {\r\n          this.blockProps[name] = value\r\n          this.metadataFolder.add(this.blockProps, name)\r\n        }\r\n      }\r\n      console.log('props', this.blockProps)\r\n      this.metadataFolder.open()\r\n    },\r\n    entity: () => {\r\n      this.continuousRender = this.params.entity === 'player'\r\n      this.entityUpdateShared()\r\n      if (!this.params.entity) return\r\n      if (this.params.entity === 'player') {\r\n        this.worldRenderer.entities.updatePlayerSkin('id', this.worldRenderer.entities.entities.id.username, undefined, true, true)\r\n        this.worldRenderer.entities.playAnimation('id', 'running')\r\n      }\r\n      // let prev = false\r\n      // setInterval(() => {\r\n      //   viewer.entities.playAnimation('id', prev ? 'running' : 'idle')\r\n      //   prev = !prev\r\n      // }, 1000)\r\n\r\n      EntityMesh.getStaticData(this.params.entity)\r\n      // entityRotationFolder.destroy()\r\n      // entityRotationFolder = gui.addFolder('entity metadata')\r\n      // entityRotationFolder.add(params, 'entityRotate')\r\n      // entityRotationFolder.open()\r\n    },\r\n    supportBlock: () => {\r\n      this.worldView!.setBlockStateId(this.targetPos.offset(0, -1, 0), this.params.supportBlock ? 1 : 0)\r\n    },\r\n    modelVariant: () => {\r\n      this.worldRenderer.worldRendererConfig.debugModelVariant = this.params.modelVariant === 0 ? undefined : [this.params.modelVariant]\r\n    }\r\n  }\r\n\r\n  entityUpdateShared () {\r\n    this.worldRenderer.entities.clear()\r\n    if (!this.params.entity) return\r\n    this.worldView!.emit('entity', {\r\n      id: 'id', name: this.params.entity, pos: this.targetPos.offset(0.5, 1, 0.5), width: 1, height: 1, username: localStorage.testUsername, yaw: Math.PI, pitch: 0\r\n    })\r\n    const enableSkeletonDebug = (obj) => {\r\n      const { children, isSkeletonHelper } = obj\r\n      if (!Array.isArray(children)) return\r\n      if (isSkeletonHelper) {\r\n        obj.visible = true\r\n        return\r\n      }\r\n      for (const child of children) {\r\n        if (typeof child === 'object') enableSkeletonDebug(child)\r\n      }\r\n    }\r\n    enableSkeletonDebug(this.worldRenderer.entities.entities['id'])\r\n    setTimeout(() => {\r\n      this.render()\r\n    }, TWEEN_DURATION)\r\n  }\r\n\r\n  getBlock () {\r\n    return mcData.blocksByName[this.params.block || 'air']\r\n  }\r\n\r\n  // applyChanges (metadataUpdate = false, skipQs = false) {\r\n  override onParamsUpdate (paramName: string, object: any) {\r\n    const metadataUpdate = paramName === 'metadata'\r\n\r\n    const blockId = this.getBlock()?.id\r\n    let block: import('prismarine-block').Block\r\n    if (metadataUpdate) {\r\n      block = new this.Block(blockId, 0, this.params.metadata)\r\n      Object.assign(this.blockProps, block.getProperties())\r\n      for (const _child of this.metadataFolder!.children) {\r\n        const child = _child as import('lil-gui').Controller\r\n        child.updateDisplay()\r\n      }\r\n    } else {\r\n      try {\r\n        block = this.Block.fromProperties(blockId ?? -1, this.blockProps, 0)\r\n      } catch (err) {\r\n        console.error(err)\r\n        block = this.Block.fromStateId(0, 0)\r\n      }\r\n    }\r\n\r\n    this.worldView!.setBlockStateId(this.targetPos, block.stateId ?? 0)\r\n    console.log('up stateId', block.stateId)\r\n    this.params.metadata = block.metadata\r\n    this.metadataGui.updateDisplay()\r\n  }\r\n\r\n  override renderFinish () {\r\n    for (const update of Object.values(this.onParamUpdate)) {\r\n      // update(true)\r\n      update()\r\n    }\r\n    this.onParamsUpdate('', {})\r\n    this.gui.openAnimated()\r\n  }\r\n\r\n  blockIsomorphicRenderBundle () {\r\n    const { renderer } = this.worldRenderer\r\n\r\n    const canvas = renderer.domElement\r\n    const onlyCurrent = !confirm('Ok - render all blocks, Cancel - render only current one')\r\n    const sizeRaw = prompt('Size', '512')\r\n    if (!sizeRaw) return\r\n    const size = parseInt(sizeRaw, 10)\r\n    // const size = 512\r\n\r\n    canvas.width = size\r\n    canvas.height = size\r\n    renderer.setSize(size, size)\r\n\r\n    // Temporarily replace PerspectiveCamera with OrthographicCamera for block rendering\r\n    this.worldRenderer.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 10) as any\r\n    this.worldRenderer.scene.background = null\r\n\r\n    const rad = THREE.MathUtils.degToRad(-120)\r\n    this.worldRenderer.directionalLight.position.set(\r\n      Math.cos(rad),\r\n      Math.sin(rad),\r\n      0.2\r\n    ).normalize()\r\n    this.worldRenderer.directionalLight.intensity = 1\r\n\r\n    const cameraPos = this.targetPos.offset(2, 2, 2)\r\n    const pitch = THREE.MathUtils.degToRad(-30)\r\n    const yaw = THREE.MathUtils.degToRad(45)\r\n    this.worldRenderer.camera.rotation.set(pitch, yaw, 0, 'ZYX')\r\n    // this.worldRenderer!.camera.lookAt(center.x + 0.5, center.y + 0.5, center.z + 0.5)\r\n    this.worldRenderer.camera.position.set(cameraPos.x + 1, cameraPos.y + 0.5, cameraPos.z + 1)\r\n\r\n    const allBlocks = mcData.blocksArray.map(b => b.name)\r\n    // const allBlocks = ['stone', 'warped_slab']\r\n\r\n    let blockCount = 1\r\n    let blockName = allBlocks[0]\r\n\r\n    const updateBlock = () => {\r\n      // viewer.setBlockStateId(targetPos, mcData.blocksByName[blockName].minStateId)\r\n      this.params.block = blockName\r\n      // todo cleanup (introduce getDefaultState)\r\n      // TODO\r\n      // onUpdate.block()\r\n      // applyChanges(false, true)\r\n    }\r\n    void this.worldRenderer.waitForChunksToRender().then(async () => {\r\n      // wait for next macro task\r\n      await new Promise(resolve => {\r\n        setTimeout(resolve, 0)\r\n      })\r\n      if (onlyCurrent) {\r\n        this.render()\r\n        onWorldUpdate()\r\n      } else {\r\n        // will be called on every render update\r\n        this.worldRenderer.renderUpdateEmitter.addListener('update', onWorldUpdate)\r\n        updateBlock()\r\n      }\r\n    })\r\n\r\n    const zip = new JSZip()\r\n    zip.file('description.txt', 'Generated with mcraft.fun/playground')\r\n\r\n    const end = async () => {\r\n      // download zip file\r\n\r\n      const a = document.createElement('a')\r\n      const blob = await zip.generateAsync({ type: 'blob' })\r\n      const dataUrlZip = URL.createObjectURL(blob)\r\n      a.href = dataUrlZip\r\n      a.download = 'blocks_render.zip'\r\n      a.click()\r\n      URL.revokeObjectURL(dataUrlZip)\r\n      console.log('end')\r\n\r\n      this.worldRenderer.renderUpdateEmitter.removeListener('update', onWorldUpdate)\r\n    }\r\n\r\n    async function onWorldUpdate () {\r\n      // await new Promise(resolve => {\r\n      //   setTimeout(resolve, 50)\r\n      // })\r\n      const dataUrl = canvas.toDataURL('image/png')\r\n\r\n      zip.file(`${blockName}.png`, dataUrl.split(',')[1], { base64: true })\r\n\r\n      if (onlyCurrent) {\r\n        end()\r\n      } else {\r\n        nextBlock()\r\n      }\r\n    }\r\n    const nextBlock = async () => {\r\n      blockName = allBlocks[blockCount++]\r\n      console.log(allBlocks.length, '/', blockCount, blockName)\r\n      if (blockCount % 5 === 0) {\r\n        await new Promise(resolve => {\r\n          setTimeout(resolve, 100)\r\n        })\r\n      }\r\n      if (blockName) {\r\n        updateBlock()\r\n      } else {\r\n        end()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default MainScene\r\n","import { renderToDom } from '@zardoy/react-util'\r\nimport { useEffect, useState } from 'react'\r\nimport { proxy, useSnapshot } from 'valtio'\r\nimport { LeftTouchArea, RightTouchArea, useInterfaceState } from '@dimaka/interface'\r\nimport { css } from '@emotion/css'\r\nimport { Vec3 } from 'vec3'\r\nimport useLongPress from '../../src/react/useLongPress'\r\nimport { isMobile } from '../viewer/lib/simpleUtils'\r\n\r\nexport const playgroundGlobalUiState = proxy({\r\n  scenes: [] as string[],\r\n  selected: '',\r\n  selectorOpened: false,\r\n  actions: {} as Record<string, () => void>,\r\n})\r\n\r\nrenderToDom(<Playground />, {\r\n  strictMode: false,\r\n  selector: '#react-root',\r\n})\r\n\r\nfunction Playground () {\r\n  useEffect(() => {\r\n    const style = document.createElement('style')\r\n    style.innerHTML = /* css */ `\r\n      .lil-gui {\r\n        top: 60px !important;\r\n        right: 0 !important;\r\n      }\r\n    `\r\n    document.body.appendChild(style)\r\n    return () => {\r\n      style.remove()\r\n    }\r\n  }, [])\r\n\r\n  return <div style={{\r\n    fontFamily: 'monospace',\r\n    color: 'white',\r\n  }}>\r\n    <Controls />\r\n    <SceneSelector />\r\n    <ActionsSelector />\r\n  </div>\r\n}\r\n\r\nfunction SceneSelector () {\r\n  const mobile = isMobile()\r\n  const { scenes, selected } = useSnapshot(playgroundGlobalUiState)\r\n  const [hidden, setHidden] = useState(false)\r\n  const longPressEvents = useLongPress(() => {\r\n    playgroundGlobalUiState.selectorOpened = true\r\n  }, () => { })\r\n\r\n  if (hidden) return null\r\n\r\n  return <div\r\n    style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      display: 'flex',\r\n      alignItems: 'flex-start',\r\n    }} {...longPressEvents}>\r\n    <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n      {scenes.map(scene => <div\r\n        key={scene}\r\n        style={{\r\n          padding: mobile ? '5px' : '2px 5px',\r\n          cursor: 'pointer',\r\n          userSelect: 'none',\r\n          background: scene === selected ? 'rgba(0, 0, 0, 0.5)' : 'rgba(0, 0, 0, 0.6)',\r\n          fontWeight: scene === selected ? 'bold' : 'normal',\r\n        }}\r\n        onClick={() => {\r\n          const qs = new URLSearchParams(window.location.search)\r\n          qs.set('scene', scene)\r\n          location.search = qs.toString()\r\n        }}\r\n      >{scene}</div>)}\r\n    </div>\r\n    <div\r\n      style={{\r\n        padding: mobile ? '5px' : '2px 5px',\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        background: 'rgba(0, 0, 0, 0.6)',\r\n        fontSize: '14px',\r\n        lineHeight: '1',\r\n      }}\r\n      onClick={() => setHidden(true)}\r\n    >Ã—</div>\r\n  </div>\r\n}\r\n\r\nconst ActionsSelector = () => {\r\n  const { actions, selectorOpened } = useSnapshot(playgroundGlobalUiState)\r\n\r\n  if (!selectorOpened) return null\r\n  return <div style={{\r\n    position: 'fixed',\r\n    inset: 0,\r\n    background: 'rgba(0, 0, 0, 0.5)',\r\n    zIndex: 10,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    gap: 5,\r\n    fontSize: 24,\r\n  }}>{Object.entries({\r\n      ...actions,\r\n      'Close' () {\r\n        playgroundGlobalUiState.selectorOpened = false\r\n      }\r\n    }).map(([name, action]) => <div\r\n      key={name}\r\n      style={{\r\n        padding: '2px 5px',\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        background: 'rgba(0, 0, 0, 0.5)',\r\n      }}\r\n      onClick={() => {\r\n        action()\r\n        playgroundGlobalUiState.selectorOpened = false\r\n      }}\r\n    >{name}</div>)}</div>\r\n}\r\n\r\nconst Controls = () => {\r\n  // todo setting\r\n  const usingTouch = navigator.maxTouchPoints > 0\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('touchstart', (e) => {\r\n      e.preventDefault()\r\n    })\r\n\r\n    const pressedKeys = new Set<string>()\r\n    useInterfaceState.setState({\r\n      isFlying: false,\r\n      uiCustomization: {\r\n        touchButtonSize: 40,\r\n      },\r\n      updateCoord ([coord, state]) {\r\n        const vec3 = new Vec3(0, 0, 0)\r\n        vec3[coord] = state\r\n        let key: string | undefined\r\n        if (vec3.z < 0) key = 'KeyW'\r\n        if (vec3.z > 0) key = 'KeyS'\r\n        if (vec3.y > 0) key = 'Space'\r\n        if (vec3.y < 0) key = 'ShiftLeft'\r\n        if (vec3.x < 0) key = 'KeyA'\r\n        if (vec3.x > 0) key = 'KeyD'\r\n        if (key) {\r\n          if (!pressedKeys.has(key)) {\r\n            pressedKeys.add(key)\r\n            window.dispatchEvent(new KeyboardEvent('keydown', { code: key }))\r\n          }\r\n        }\r\n        for (const k of pressedKeys) {\r\n          if (k !== key) {\r\n            window.dispatchEvent(new KeyboardEvent('keyup', { code: k }))\r\n            pressedKeys.delete(k)\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  if (!usingTouch) return null\r\n  return (\r\n    <div\r\n      style={{ zIndex: 8 }}\r\n      className={css`\r\n        position: fixed;\r\n        inset: 0;\r\n        height: 100%;\r\n        display: flex;\r\n        width: 100%;\r\n        justify-content: space-between;\r\n        align-items: flex-end;\r\n        pointer-events: none;\r\n        touch-action: none;\r\n        & > div {\r\n            pointer-events: auto;\r\n        }\r\n    `}\r\n    >\r\n      <LeftTouchArea />\r\n      <div />\r\n      <RightTouchArea />\r\n    </div>\r\n  )\r\n}\r\n","import { BasePlaygroundScene } from '../baseScene'\r\n\r\nexport default class RailsCobwebScene extends BasePlaygroundScene {\r\n  setupWorld () {\r\n    this.addWorldBlock(0, 0, 0, 'cobweb')\r\n    this.addWorldBlock(0, -1, 0, 'cobweb')\r\n    this.addWorldBlock(1, -1, 0, 'cobweb')\r\n    this.addWorldBlock(1, 0, 0, 'cobweb')\r\n\r\n    this.addWorldBlock(0, 0, 1, 'powered_rail', { shape: 'north_south', waterlogged: false })\r\n    this.addWorldBlock(0, 0, 2, 'powered_rail', { shape: 'ascending_south', waterlogged: false })\r\n    this.addWorldBlock(0, 1, 3, 'powered_rail', { shape: 'north_south', waterlogged: false })\r\n  }\r\n}\r\n","import { BasePlaygroundScene } from '../baseScene'\r\n\r\nexport default class RailsCobwebScene extends BasePlaygroundScene {\r\n  viewDistance = 5\r\n  continuousRender = true\r\n\r\n  override initGui (): void {\r\n    this.params = {\r\n      squareSize: 50\r\n    }\r\n\r\n    super.initGui()\r\n  }\r\n\r\n  setupWorld () {\r\n    const squareSize = this.params.squareSize ?? 30\r\n    const maxSquareSize = this.viewDistance * 16 * 2\r\n    if (squareSize > maxSquareSize) throw new Error(`Square size too big, max is ${maxSquareSize}`)\r\n    // const fullBlocks = loadedData.blocksArray.map(x => x.name)\r\n    const fullBlocks = loadedData.blocksArray.filter(block => {\r\n      const b = this.Block.fromStateId(block.defaultState, 0)\r\n      if (b.shapes?.length !== 1) return false\r\n      const shape = b.shapes[0]\r\n      return shape[0] === 0 && shape[1] === 0 && shape[2] === 0 && shape[3] === 1 && shape[4] === 1 && shape[5] === 1\r\n    })\r\n    for (let x = -squareSize; x <= squareSize; x++) {\r\n      for (let z = -squareSize; z <= squareSize; z++) {\r\n        const i = Math.abs(x + z) * squareSize\r\n        worldView!.world.setBlock(this.targetPos.offset(x, 0, z), this.Block.fromStateId(fullBlocks[i % fullBlocks.length].defaultState, 0))\r\n      }\r\n    }\r\n  }\r\n}\r\n","//@ts-nocheck\r\nimport * as THREE from 'three'\r\nimport { Vec3 } from 'vec3'\r\nimport { BasePlaygroundScene } from '../baseScene'\r\nimport { WorldRendererThree } from '../../viewer/three/worldrendererThree'\r\n\r\nexport default class extends BasePlaygroundScene {\r\n  continuousRender = true\r\n\r\n  override setupWorld (): void {\r\n    viewer.world.mesherConfig.enableLighting = true\r\n    viewer.world.mesherConfig.skyLight = 0\r\n    this.addWorldBlock(0, 0, 0, 'stone')\r\n    this.addWorldBlock(0, 0, 1, 'stone')\r\n    this.addWorldBlock(1, 0, 0, 'stone')\r\n    this.addWorldBlock(1, 0, 1, 'stone')\r\n    // chess like\r\n    worldView?.world.setBlockLight(this.targetPos.offset(0, 1, 0), 15)\r\n    worldView?.world.setBlockLight(this.targetPos.offset(0, 1, 1), 0)\r\n    worldView?.world.setBlockLight(this.targetPos.offset(1, 1, 0), 0)\r\n    worldView?.world.setBlockLight(this.targetPos.offset(1, 1, 1), 15)\r\n  }\r\n\r\n  override renderFinish (): void {\r\n    viewer.scene.background = new THREE.Color(0x00_00_00)\r\n    // starfield and test entities\r\n    ;(viewer.world as WorldRendererThree).starField.enabled = true\r\n    ;(viewer.world as WorldRendererThree).starField.addToScene()\r\n    viewer.entities.update({\r\n      id: 0,\r\n      name: 'player',\r\n      pos: this.targetPos.clone()\r\n    } as any, {})\r\n    viewer.entities.update({\r\n      id: 1,\r\n      name: 'creeper',\r\n      pos: this.targetPos.offset(1, 0, 0)\r\n    } as any, {})\r\n  }\r\n}\r\n","import { BasePlaygroundScene } from '../baseScene'\r\n\r\nexport default class extends BasePlaygroundScene {\r\n  setupWorld () {\r\n    this.addWorldBlock(0, 0, 0, 'water')\r\n    this.addWorldBlock(0, 1, 0, 'lime_stained_glass')\r\n    this.addWorldBlock(0, 0, -1, 'lime_stained_glass')\r\n    this.addWorldBlock(0, -1, 0, 'lime_stained_glass')\r\n    this.addWorldBlock(0, -1, -1, 'stone')\r\n  }\r\n}\r\n","import { BasePlaygroundScene } from '../baseScene'\r\n\r\nexport default class RotationIssueScene extends BasePlaygroundScene {\r\n  setupWorld () {\r\n    // todo\r\n  }\r\n}\r\n","//@ts-nocheck\r\nimport * as THREE from 'three'\r\nimport { Vec3 } from 'vec3'\r\nimport { BasePlaygroundScene } from '../baseScene'\r\nimport { WorldRendererThree } from '../../viewer/three/worldrendererThree'\r\n\r\nexport default class extends BasePlaygroundScene {\r\n  continuousRender = true\r\n\r\n  override initGui (): void {\r\n    this.params = {\r\n      starfield: false,\r\n      entity: 'player',\r\n      count: 4\r\n    }\r\n  }\r\n\r\n  override renderFinish (): void {\r\n    if (this.params.starfield) {\r\n      ;(viewer.world as WorldRendererThree).scene.background = new THREE.Color(0x00_00_00)\r\n      ;(viewer.world as WorldRendererThree).starField.enabled = true\r\n      ;(viewer.world as WorldRendererThree).starField.addToScene()\r\n    }\r\n\r\n    for (let i = 0; i < this.params.count; i++) {\r\n      for (let j = 0; j < this.params.count; j++) {\r\n        for (let k = 0; k < this.params.count; k++) {\r\n          viewer.entities.update({\r\n            id: i * 1000 + j * 100 + k,\r\n            name: this.params.entity,\r\n            pos: this.targetPos.offset(i, j, k)\r\n          } as any, {})\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","//@ts-nocheck\r\nimport { Vec3 } from 'vec3'\r\nimport { BasePlaygroundScene } from '../baseScene'\r\n\r\nexport default class extends BasePlaygroundScene {\r\n  viewDistance = 5\r\n  continuousRender = true\r\n\r\n  override initGui (): void {\r\n    this.params = {\r\n      testActive: false,\r\n      testUpdatesPerSecond: 10,\r\n      testInitialUpdate: false,\r\n      stopGeometryUpdate: false,\r\n      manualTest: () => {\r\n        this.updateBlock()\r\n      },\r\n      testNeighborUpdates: () => {\r\n        this.testNeighborUpdates()\r\n      }\r\n    }\r\n\r\n    super.initGui()\r\n  }\r\n\r\n  lastUpdatedOffset = 0\r\n  lastUpdatedId = 2\r\n  updateBlock () {\r\n    const x = this.lastUpdatedOffset % 16\r\n    const z = Math.floor(this.lastUpdatedOffset / 16)\r\n    const y = 90\r\n    worldView!.setBlockStateId(new Vec3(x, y, z), this.lastUpdatedId++)\r\n    this.lastUpdatedOffset++\r\n    if (this.lastUpdatedOffset > 16 * 16) this.lastUpdatedOffset = 0\r\n    if (this.lastUpdatedId > 500) this.lastUpdatedId = 1\r\n  }\r\n\r\n  testNeighborUpdates () {\r\n    viewer.world.setBlockStateId(new Vec3(15, 95, 15), 1)\r\n    viewer.world.setBlockStateId(new Vec3(0, 95, 15), 1)\r\n    viewer.world.setBlockStateId(new Vec3(15, 95, 0), 1)\r\n    viewer.world.setBlockStateId(new Vec3(0, 95, 0), 1)\r\n\r\n    viewer.world.setBlockStateId(new Vec3(16, 95, 15), 1)\r\n    viewer.world.setBlockStateId(new Vec3(-1, 95, 15), 1)\r\n    viewer.world.setBlockStateId(new Vec3(15, 95, -1), 1)\r\n    viewer.world.setBlockStateId(new Vec3(-1, 95, 0), 1)\r\n    setTimeout(() => {\r\n      viewer.world.setBlockStateId(new Vec3(16, 96, 16), 1)\r\n      viewer.world.setBlockStateId(new Vec3(-1, 96, 16), 1)\r\n      viewer.world.setBlockStateId(new Vec3(16, 96, -1), 1)\r\n      viewer.world.setBlockStateId(new Vec3(-1, 96, -1), 1)\r\n    }, 3000)\r\n  }\r\n\r\n  setupTimer () {\r\n    // this.stopRender = true\r\n\r\n    let lastTime = 0\r\n    const tick = () => {\r\n      viewer.world.debugStopGeometryUpdate = this.params.stopGeometryUpdate\r\n      const updateEach = 1000 / this.params.testUpdatesPerSecond\r\n      requestAnimationFrame(tick)\r\n      if (!this.params.testActive) return\r\n      const updateCount = Math.floor(performance.now() - lastTime) / updateEach\r\n      for (let i = 0; i < updateCount; i++) {\r\n        this.updateBlock()\r\n      }\r\n      lastTime = performance.now()\r\n    }\r\n\r\n    requestAnimationFrame(tick)\r\n\r\n    // const limit = 1000\r\n    // const limit = 100\r\n    // const limit = 1\r\n    // const updatedChunks = new Set<string>()\r\n    // const updatedBlocks = new Set<string>()\r\n    // let lastSecond = 0\r\n    // setInterval(() => {\r\n    //   const second = Math.floor(performance.now() / 1000)\r\n    //   if (lastSecond !== second) {\r\n    //     lastSecond = second\r\n    //     updatedChunks.clear()\r\n    //     updatedBlocks.clear()\r\n    //   }\r\n    //   const isEven = second % 2 === 0\r\n    //   if (updatedBlocks.size > limit) {\r\n    //     return\r\n    //   }\r\n    //   const changeBlock = (x, z) => {\r\n    //     const chunkKey = `${Math.floor(x / 16)},${Math.floor(z / 16)}`\r\n    //     const key = `${x},${z}`\r\n    //     if (updatedBlocks.has(chunkKey)) return\r\n\r\n    //     updatedChunks.add(chunkKey)\r\n    //     worldView!.world.setBlock(this.targetPos.offset(x, 0, z), this.Block.fromStateId(isEven ? 2 : 3, 0))\r\n    //     updatedBlocks.add(key)\r\n    //   }\r\n    //   const { squareSize } = this.params\r\n    //   const xStart = -squareSize\r\n    //   const zStart = -squareSize\r\n    //   const xEnd = squareSize\r\n    //   const zEnd = squareSize\r\n    //   for (let x = xStart; x <= xEnd; x += 16) {\r\n    //     for (let z = zStart; z <= zEnd; z += 16) {\r\n    //       const key = `${x},${z}`\r\n    //       if (updatedChunks.has(key)) continue\r\n    //       changeBlock(x, z)\r\n    //       return\r\n    //     }\r\n    //   }\r\n    // for (let x = xStart; x <= xEnd; x += 16) {\r\n    //   for (let z = zStart; z <= zEnd; z += 16) {\r\n    //     const key = `${x},${z}`\r\n    //     if (updatedChunks.has(key)) continue\r\n    //     changeBlock(x, z)\r\n    //     return\r\n    //   }\r\n    // }\r\n    // }, 1)\r\n  }\r\n\r\n  setupWorld () {\r\n    this.worldConfig.showChunkBorders = true\r\n\r\n    const maxSquareRadius = this.viewDistance * 16\r\n    // const fullBlocks = loadedData.blocksArray.map(x => x.name)\r\n    const squareSize = maxSquareRadius\r\n    for (let x = -squareSize; x <= squareSize; x++) {\r\n      for (let z = -squareSize; z <= squareSize; z++) {\r\n        const i = Math.abs(x + z) * squareSize\r\n        worldView!.world.setBlock(this.targetPos.offset(x, 0, z), this.Block.fromStateId(1, 0))\r\n      }\r\n    }\r\n    let done = false\r\n    viewer.world.renderUpdateEmitter.on('update', () => {\r\n      if (!viewer.world.allChunksFinished || done) return\r\n      done = true\r\n      this.setupTimer()\r\n    })\r\n    setTimeout(() => {\r\n      if (this.params.testInitialUpdate) {\r\n        this.updateBlock()\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { BasePlaygroundScene } from '../baseScene'\r\n\r\nexport default class extends BasePlaygroundScene {\r\n  expectedNumberOfFaces = 30\r\n  enableCameraOrbitControl = false\r\n\r\n  setupWorld () {\r\n    this.addWorldBlock(0, 1, 0, 'stone_slab')\r\n    this.addWorldBlock(0, 0, 0, 'stone')\r\n    this.addWorldBlock(0, -1, 0, 'stone_slab', { type: 'top', waterlogged: false })\r\n    this.addWorldBlock(0, -1, -1, 'stone_slab', { type: 'top', waterlogged: false })\r\n    this.addWorldBlock(0, -1, 1, 'stone_slab', { type: 'top', waterlogged: false })\r\n    this.addWorldBlock(-1, -1, 0, 'stone_slab', { type: 'top', waterlogged: false })\r\n    this.addWorldBlock(1, -1, 0, 'stone_slab', { type: 'top', waterlogged: false })\r\n  }\r\n}\r\n","import { BasePlaygroundScene } from '../baseScene'\r\nimport { EntityDebugFlags, EntityMesh, rendererSpecialHandled } from '../../viewer/three/entity/EntityMesh'\r\nimport { displayEntitiesDebugList } from '../allEntitiesDebug'\r\n\r\nexport default class AllEntities extends BasePlaygroundScene {\r\n  continuousRender = false\r\n  enableCameraControls = false\r\n\r\n  async initData () {\r\n    await super.initData()\r\n    displayEntitiesDebugList(this.version)\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { BasePlaygroundScene } from '../baseScene'\r\nimport {\r\n  downloadWorldGeometry,\r\n  loadWorldGeometryFromUrl,\r\n  createMeshesFromExport,\r\n  loadTextureFromDataUrl,\r\n  type ExportedWorldGeometry\r\n} from '../../viewer/three/worldGeometryExport'\r\n\r\n/**\r\n * Scene for exporting/importing world geometry\r\n *\r\n * Usage:\r\n * - Load normally: builds world from blocks, can export geometry\r\n * - Load with ?geometryUrl=URL: loads pre-exported geometry from file (or default world-geometry.json)\r\n */\r\nexport default class extends BasePlaygroundScene {\r\n  params = {\r\n    exportGeometry: () => this.exportGeometry(),\r\n    exportWithTexture: () => this.exportGeometry(true),\r\n  }\r\n\r\n  // Loaded geometry data (when loading from URL)\r\n  private loadedGeometry: ExportedWorldGeometry | null = null\r\n  private importedMeshes: THREE.Group[] = []\r\n  private readonly geometryUrl: string | null\r\n\r\n  constructor () {\r\n    const qs = new URLSearchParams(window.location.search)\r\n    const geometryUrl = qs.get('geometryUrl') ?? 'world-geometry.json'\r\n\r\n    // If loading from URL, skip normal world setup (viewDistance 0 means no chunks loaded)\r\n    super({\r\n      viewDistance: geometryUrl ? 0 : 1,\r\n      continuousRender: false,\r\n      enableCameraOrbitControl: false,\r\n    })\r\n\r\n    this.geometryUrl = geometryUrl\r\n  }\r\n\r\n  // Override initData to load geometry after base initialization completes\r\n  override async initData () {\r\n    await super.initData()\r\n\r\n    // Now camera and worldRenderer are ready - load geometry if URL provided\r\n    if (this.geometryUrl) {\r\n      await this.loadFromUrl(this.geometryUrl)\r\n    }\r\n  }\r\n\r\n  setupWorld () {\r\n    if (this.geometryUrl) {\r\n      return\r\n    }\r\n    // Default world setup - add some blocks for testing\r\n    this.addWorldBlock(0, 0, 0, 'stone')\r\n    this.addWorldBlock(1, 0, 0, 'grass_block')\r\n    this.addWorldBlock(0, 0, 1, 'dirt')\r\n    this.addWorldBlock(1, 0, 1, 'cobblestone')\r\n    this.addWorldBlock(0, 1, 0, 'oak_log')\r\n    this.addWorldBlock(1, 1, 0, 'oak_planks')\r\n  }\r\n\r\n  private async loadFromUrl (url: string) {\r\n    try {\r\n      console.log('Loading geometry from:', url)\r\n      this.loadedGeometry = await loadWorldGeometryFromUrl(url)\r\n\r\n      // Restore camera position and rotation\r\n      const { camera: camData } = this.loadedGeometry\r\n      this.camera.position.set(camData.position.x, camData.position.y, camData.position.z)\r\n\r\n      // Apply rotation using lookAt direction\r\n      const { pitch, yaw } = camData.rotation\r\n      const forward = new THREE.Vector3(\r\n        -Math.sin(yaw) * Math.cos(pitch),\r\n        Math.sin(pitch),\r\n        -Math.cos(yaw) * Math.cos(pitch)\r\n      )\r\n      this.camera.lookAt(\r\n        camData.position.x + forward.x,\r\n        camData.position.y + forward.y,\r\n        camData.position.z + forward.z\r\n      )\r\n      this.controls?.update()\r\n      this.syncCameraToBackend()\r\n\r\n      // Determine which material to use\r\n      let material: THREE.Material\r\n      if (this.loadedGeometry.textureAtlasDataUrl) {\r\n        // Use embedded texture from exported file\r\n        const texture = await loadTextureFromDataUrl(this.loadedGeometry.textureAtlasDataUrl)\r\n        material = new THREE.MeshLambertMaterial({\r\n          map: texture,\r\n          vertexColors: true,\r\n          transparent: true,\r\n          alphaTest: 0.1\r\n        })\r\n      } else {\r\n        // Use worldRenderer's material (which has the texture atlas loaded)\r\n        // The UVs in exported geometry reference positions in this atlas\r\n        material = this.worldRenderer.material\r\n      }\r\n\r\n      // Create meshes from exported geometry\r\n      this.importedMeshes = createMeshesFromExport(this.loadedGeometry, material)\r\n\r\n      // Add meshes to scene\r\n      const { scene } = this.worldRenderer\r\n      for (const mesh of this.importedMeshes) {\r\n        scene.add(mesh)\r\n      }\r\n\r\n      console.log(`Loaded ${this.importedMeshes.length} sections from geometry file`)\r\n      this.requestRender()\r\n\r\n    } catch (err) {\r\n      console.error('Failed to load geometry:', err)\r\n    }\r\n  }\r\n\r\n  private exportGeometry (includeTexture = false) {\r\n    const { worldRenderer } = this\r\n    if (!worldRenderer) {\r\n      console.error('WorldRenderer not available')\r\n      return\r\n    }\r\n\r\n    // Get camera position and rotation\r\n    const cameraPosition = {\r\n      x: this.camera.position.x,\r\n      y: this.camera.position.y,\r\n      z: this.camera.position.z\r\n    }\r\n\r\n    // Extract yaw/pitch from camera quaternion\r\n    const forward = new THREE.Vector3(0, 0, -1)\r\n    forward.applyQuaternion(this.camera.quaternion)\r\n    const cameraRotation = {\r\n      yaw: Math.atan2(-forward.x, -forward.z),\r\n      pitch: Math.asin(forward.y)\r\n    }\r\n\r\n    // Generate filename with timestamp\r\n    const timestamp = new Date().toISOString().replaceAll(/[:.]/g, '-')\r\n    const filename = `world-geometry-${timestamp}.json`\r\n\r\n    downloadWorldGeometry(worldRenderer, cameraPosition, cameraRotation, filename, includeTexture)\r\n    console.log('Geometry exported to:', filename)\r\n  }\r\n\r\n}\r\n","import { BasePlaygroundScene } from './baseScene'\r\nimport { playgroundGlobalUiState } from './playgroundUi'\r\nimport * as scenes from './scenes'\r\n\r\nconst qsScene = new URLSearchParams(window.location.search).get('scene')\r\nconst Scene: typeof BasePlaygroundScene = qsScene ? scenes[qsScene] : scenes.main\r\nplaygroundGlobalUiState.scenes = ['main', 'railsCobweb', 'floorRandom', 'lightingStarfield', 'transparencyIssue', 'entities', 'frequentUpdates', 'slabsOptimization', 'allEntities', 'geometryExport']\r\nplaygroundGlobalUiState.selected = qsScene ?? 'main'\r\n\r\nconst scene = new Scene()\r\nglobalThis.scene = scene\r\n"],"names":["_globalThis_includedVersions","playgroundGlobalUiState","proxy","Playground","useEffect","style","document","Controls","SceneSelector","ActionsSelector","mobile","isMobile","_useSnapshot","scenes","selected","_useState","hidden","setHidden","longPressEvents","useLongPress","scene","qs","URLSearchParams","window","location","renderToDom","actions","selectorOpened","Object","name","action","usingTouch","navigator","e","pressedKeys","Set","useInterfaceState","_param","coord","state","vec3","Vec3","key","KeyboardEvent","_iteratorError","k","css","LeftTouchArea","RightTouchArea","THREE","includedVersions","supportedVersions","BasePlaygroundScene","config","GUI","performance","Error","undefined","appViewer","onParamsUpdate","paramName","object","updateQs","valueSet","newQs","_this_params_skipQs","value","renderFinish","initGui","parsed","Number","_iteratorError1","_option_options","param","option","setTimeout","property","_this_onParamUpdate","_this_paramOptions_property","setupWorld","sceneReset","addWorldBlock","xOffset","yOffset","zOffset","blockName","properties","block","loadedData","syncCameraToBackend","onlyRotation","forward","yaw","Math","pitch","pos","resetCamera","_this_controls","_this_controls1","targetPos","cameraPos","initData","mcData","world","canvas","controls","cameraSet","_cameraSet_split_map","x","y","z","rx","ry","throttledCamQsUpdate","throttledCameraSync","mouseMoveCounter","mouseMove","require","ChunkLoader","BlockLoader","getSyncWorld","appGraphicBackends","getInitialPlayerState","OrbitControls","localStorage","_","setInterval","mainDebugLoop","requestAnimationFrame","loop","requestRender","setupDebugFpsGui","trackFrame","now","delay","oneSecondAgo","time","updateDebugInfo","fps","delayText","isSeriousDelay","render","fromLoop","addKeyboardShortcuts","direction","keys","code","onResize","MainScene","_key","args","_this_metadataFolder","console","props","states","_mcData_blocksByStateId_this_getBlock_minStateId","_this_getBlock","defaultValue","EntityMesh","b","a","entityUpdateShared","enableSkeletonDebug","obj","children","isSkeletonHelper","Array","child","_type_of","TWEEN_DURATION","getBlock","blockId","_block_stateId","err","update","blockIsomorphicRenderBundle","renderer","onlyCurrent","confirm","sizeRaw","prompt","size","parseInt","rad","allBlocks","blockCount","updateBlock","Promise","resolve","onWorldUpdate","zip","JSZip","end","blob","dataUrlZip","URL","nextBlock","_onWorldUpdate","dataUrl","RailsCobwebScene","_this_params_squareSize","squareSize","maxSquareSize","fullBlocks","_b_shapes","shape","i","worldView","_worldView","_worldView1","_worldView2","_worldView3","viewer","RotationIssueScene","j","testNeighborUpdates","setupTimer","lastTime","tick","updateEach","updateCount","maxSquareRadius","done","AllEntities","_superprop_get_initData","displayEntitiesDebugList","_qs_get","geometryUrl","loadFromUrl","url","camData","_camData_rotation","material","texture","mesh","loadWorldGeometryFromUrl","_this_loadedGeometry","loadTextureFromDataUrl","createMeshesFromExport","exportGeometry","includeTexture","worldRenderer","cameraPosition","cameraRotation","timestamp","Date","filename","downloadWorldGeometry","qsScene","Scene","globalThis"],"mappings":"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"}